head	1.1;
access;
symbols
	binutils-2_24-branch:1.1.0.40
	binutils-2_24-branchpoint:1.1
	binutils-2_21_1:1.1
	binutils-2_23_2:1.1
	binutils-2_23_1:1.1
	binutils-2_23:1.1
	binutils-2_23-branch:1.1.0.38
	binutils-2_23-branchpoint:1.1
	binutils-2_22_branch:1.1.0.36
	binutils-2_22:1.1
	binutils-2_22-branch:1.1.0.34
	binutils-2_22-branchpoint:1.1
	binutils-2_21:1.1
	binutils-2_21-branch:1.1.0.32
	binutils-2_21-branchpoint:1.1
	binutils-2_20_1:1.1
	binutils-2_20:1.1
	binutils-arc-20081103-branch:1.1.0.30
	binutils-arc-20081103-branchpoint:1.1
	binutils-2_20-branch:1.1.0.28
	binutils-2_20-branchpoint:1.1
	dje-cgen-play1-branch:1.1.0.26
	dje-cgen-play1-branchpoint:1.1
	arc-20081103-branch:1.1.0.24
	arc-20081103-branchpoint:1.1
	binutils-2_19_1:1.1
	binutils-2_19:1.1
	binutils-2_19-branch:1.1.0.22
	binutils-2_19-branchpoint:1.1
	binutils-2_18:1.1
	binutils-2_18-branch:1.1.0.20
	binutils-2_18-branchpoint:1.1
	binutils-csl-coldfire-4_1-32:1.1
	binutils-csl-sourcerygxx-4_1-32:1.1
	binutils-csl-innovasic-fido-3_4_4-33:1.1
	binutils-csl-sourcerygxx-3_4_4-32:1.1
	binutils-csl-coldfire-4_1-30:1.1
	binutils-csl-sourcerygxx-4_1-30:1.1
	binutils-csl-coldfire-4_1-28:1.1
	binutils-csl-sourcerygxx-4_1-29:1.1
	binutils-csl-sourcerygxx-4_1-28:1.1
	binutils-csl-arm-2006q3-27:1.1
	binutils-csl-sourcerygxx-4_1-27:1.1
	binutils-csl-arm-2006q3-26:1.1
	binutils-csl-sourcerygxx-4_1-26:1.1
	binutils-csl-sourcerygxx-4_1-25:1.1
	binutils-csl-sourcerygxx-4_1-24:1.1
	binutils-csl-sourcerygxx-4_1-23:1.1
	binutils-csl-sourcerygxx-4_1-21:1.1
	binutils-csl-arm-2006q3-21:1.1
	binutils-csl-sourcerygxx-4_1-22:1.1
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.1
	binutils-csl-sourcerygxx-4_1-20:1.1
	binutils-csl-arm-2006q3-19:1.1
	binutils-csl-sourcerygxx-4_1-19:1.1
	binutils-csl-sourcerygxx-4_1-18:1.1
	binutils-csl-renesas-4_1-9:1.1
	binutils-csl-sourcerygxx-3_4_4-25:1.1
	binutils-csl-renesas-4_1-8:1.1
	binutils-csl-renesas-4_1-7:1.1
	binutils-csl-renesas-4_1-6:1.1
	binutils-csl-sourcerygxx-4_1-17:1.1
	binutils-csl-sourcerygxx-4_1-14:1.1
	binutils-csl-sourcerygxx-4_1-15:1.1
	binutils-csl-sourcerygxx-4_1-13:1.1
	binutils-2_17:1.1
	binutils-csl-sourcerygxx-4_1-12:1.1
	binutils-csl-sourcerygxx-3_4_4-21:1.1
	binutils-csl-wrs-linux-3_4_4-24:1.1
	binutils-csl-wrs-linux-3_4_4-23:1.1
	binutils-csl-sourcerygxx-4_1-9:1.1
	binutils-csl-sourcerygxx-4_1-8:1.1
	binutils-csl-sourcerygxx-4_1-7:1.1
	binutils-csl-arm-2006q1-6:1.1
	binutils-csl-sourcerygxx-4_1-6:1.1
	binutils-csl-wrs-linux-3_4_4-22:1.1
	binutils-csl-coldfire-4_1-11:1.1
	binutils-csl-sourcerygxx-3_4_4-19:1.1
	binutils-csl-coldfire-4_1-10:1.1
	binutils-csl-sourcerygxx-4_1-5:1.1
	binutils-csl-sourcerygxx-4_1-4:1.1
	binutils-csl-wrs-linux-3_4_4-21:1.1
	binutils-csl-morpho-4_1-4:1.1
	binutils-csl-sourcerygxx-3_4_4-17:1.1
	binutils-csl-wrs-linux-3_4_4-20:1.1
	binutils-2_17-branch:1.1.0.18
	binutils-2_17-branchpoint:1.1
	binutils-csl-2_17-branch:1.1.0.16
	binutils-csl-2_17-branchpoint:1.1
	binutils-csl-gxxpro-3_4-branch:1.1.0.14
	binutils-csl-gxxpro-3_4-branchpoint:1.1
	binutils-2_16_1:1.1
	binutils-csl-arm-2005q1b:1.1
	binutils-2_16:1.1
	binutils-csl-arm-2005q1a:1.1
	binutils-csl-arm-2005q1-branch:1.1.0.12
	binutils-csl-arm-2005q1-branchpoint:1.1
	binutils-2_16-branch:1.1.0.10
	binutils-2_16-branchpoint:1.1
	csl-arm-2004-q3d:1.1
	csl-arm-2004-q3:1.1
	binutils-2_15:1.1
	binutils-2_15-branchpoint:1.1
	csl-arm-2004-q1a:1.1
	csl-arm-2004-q1:1.1
	binutils-2_15-branch:1.1.0.8
	cagney_bfdfile-20040213-branch:1.1.0.6
	cagney_bfdfile-20040213-branchpoint:1.1
	cagney_bigcore-20040122-branch:1.1.0.4
	cagney_bigcore-20040122-branchpoint:1.1
	csl-arm-2003-q4:1.1
	binutils-2_14:1.1
	binutils-2_14-branch:1.1.0.2
	binutils-2_14-branchpoint:1.1
	binutils_latest_snapshot:1.1;
locks; strict;
comment	@# @;


1.1
date	2002.10.11.14.44.55;	author kkojima;	state Exp;
branches;
next	;


desc
@@


1.1
log
@	* ld-sh/rd-sh.exp: If the test matches *-dso.d, copy the output
	of linker to the file tmpdir/*-dso.so.
	* ld-sh/tlsbin.s, ld-sh/tlsbinpic.s, ld-sh/tlslib.s: New.
	* ld-sh/tlsbin-0-dso.d: New.
	* ld-sh/tlsbin-1.d: New.
	* ld-sh/tlsbin-2.d: New.
	* ld-sh/tlsbin-3.d: New.
	* ld-sh/tlsbin-4.d: New.
	* ld-sh/tlspic1.s, ld-sh/tlspic2.s: New.
	* ld-sh/tlspic-1.d: New.
	* ld-sh/tlspic-2.d: New.
	* ld-sh/tlspic-3.d: New.
	* ld-sh/tlspic-4.d: New.
@
text
@	.section ".tdata", "awT", @@progbits
	.globl sg1, sg2
	.globl sh1, sh2
	.hidden sh1, sh2
sg1:	.long 17
sg2:	.long 18
sl1:	.long 65
sl2:	.long 66
sh1:	.long 257
sh2:	.long 258
	.text
	.align	1
	.globl	fn1
	.type	fn1,@@function
fn1:
	mov.l	r12,@@-r15
	mov.l	r14,@@-r15
	sts.l	pr,@@-r15
	mova	.L3,r0
	mov.l	.L3,r12
	add	r0,r12
	mov	r15,r14
	nop;nop;nop;nop

	! GD
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sg1@@TLSGD
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop;nop;nop

	! GD -> IE because variable is referenced through @@GOTTPOFF too
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sg2@@TLSGD
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop;nop;nop

	! GD against local variable
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sl1@@TLSGD
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop;nop;nop

	! GD -> IE against local variable referenced through @@GOTTPOFF too
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sl2@@TLSGD
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop;nop;nop

	! GD against hidden and local variable
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sh1@@TLSGD
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop;nop;nop

	! GD -> IE against hidden and local variable referenced through
	! @@GOTTPOFF too
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sh2@@TLSGD
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop;nop;nop

	! GD against hidden but not local variable
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sH1@@TLSGD
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop;nop;nop

	! GD -> IE against hidden but not local variable referenced through
	! @@GOTTPOFF too
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sH2@@TLSGD
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop;nop;nop

	! LD
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sl1@@TLSLDM
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop
	mov.l	.L4,r1
	add	r0,r1
	nop;nop
	mov.l	.L5,r2
	add	r0,r2
	nop;nop;nop;nop

	! LD against hidden and local variables
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sl1@@TLSLDM
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop
	mov.l	.L6,r1
	add	r0,r1
	nop;nop
	mov.l	.L7,r2
	add	r0,r2
	nop;nop;nop;nop

	! LD against hidden but not local variables
	mov.l	1f,r4
	mova	2f,r0
	mov.l	2f,r1
	add	r0,r1
	jsr	@@r1
	add	r12,r4
	bra	3f
	nop
	.align	2
1:	.long	sH1@@TLSLDM
2:	.long	__tls_get_addr@@PLT
3:
	nop;nop
	mov.l	.L8,r1
	add	r0,r1
	nop;nop
	mov.l	.L9,r2
	add	r0,r2
	nop;nop;nop;nop

	! @@GOTTPOFF IE against global var
	mov.l	1f,r0
	stc	gbr,r1
	mov.l	@@(r0,r12),r0
	bra	2f
	add	r0,r1
	.align	2
1:	.long	sg2@@GOTTPOFF
2:
	nop;nop;nop;nop

	! @@GOTTPOFF IE against local var
	mov.l	1f,r0
	stc	gbr,r1
	mov.l	@@(r0,r12),r0
	bra	2f
	add	r0,r1
	.align	2
1:	.long	sl2@@GOTTPOFF
2:
	nop;nop;nop;nop

	! @@GOTTPOFF IE against hidden and local var
	mov.l	1f,r0
	stc	gbr,r1
	mov.l	@@(r0,r12),r0
	bra	2f
	add	r0,r1
	.align	2
1:	.long	sh2@@GOTTPOFF
2:
	nop;nop;nop;nop

	! @@GOTTPOFF IE against hidden but not local var
	mov.l	1f,r0
	stc	gbr,r1
	mov.l	@@(r0,r12),r0
	bra	2f
	add	r0,r1
	.align	2
1:	.long	sH2@@GOTTPOFF
2:
	nop;nop;nop;nop

	mov	r14,r15
	lds.l	@@r15+,pr
	mov.l	@@r15+,r14
	rts	
	mov.l	@@r15+,r12

	.align 2
.L3:	.long	_GLOBAL_OFFSET_TABLE_
.L4:	.long	sl1@@DTPOFF
.L5:	.long	sl1@@DTPOFF + 4
.L6:	.long	sh1@@DTPOFF
.L7:	.long	sh2@@DTPOFF
.L8:	.long	sH1@@DTPOFF
.L9:	.long	sH2@@DTPOFF
@
