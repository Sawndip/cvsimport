head	1.10;
access;
symbols
	binutils-2_24-branch:1.10.0.2
	binutils-2_24-branchpoint:1.10
	binutils-2_21_1:1.8
	binutils-2_23_2:1.8.8.1
	binutils-2_23_1:1.8.8.1
	binutils-2_23:1.8.8.1
	binutils-2_23-branch:1.8.0.8
	binutils-2_23-branchpoint:1.8
	binutils-2_22_branch:1.8.0.6
	binutils-2_22:1.8
	binutils-2_22-branch:1.8.0.4
	binutils-2_22-branchpoint:1.8
	binutils-2_21:1.8
	binutils-2_21-branch:1.8.0.2
	binutils-2_21-branchpoint:1.8
	binutils-2_20_1:1.6.8.1
	binutils-2_20:1.6.8.1
	binutils-arc-20081103-branch:1.6.0.10
	binutils-arc-20081103-branchpoint:1.6
	binutils-2_20-branch:1.6.0.8
	binutils-2_20-branchpoint:1.6
	dje-cgen-play1-branch:1.6.0.6
	dje-cgen-play1-branchpoint:1.6
	arc-20081103-branch:1.6.0.4
	arc-20081103-branchpoint:1.6
	binutils-2_19_1:1.6
	binutils-2_19:1.6
	binutils-2_19-branch:1.6.0.2
	binutils-2_19-branchpoint:1.6
	binutils-2_18:1.5
	binutils-2_18-branch:1.5.0.2
	binutils-2_18-branchpoint:1.5
	binutils-csl-coldfire-4_1-32:1.4
	binutils-csl-sourcerygxx-4_1-32:1.4
	binutils-csl-innovasic-fido-3_4_4-33:1.4
	binutils-csl-sourcerygxx-3_4_4-32:1.4
	binutils-csl-coldfire-4_1-30:1.4
	binutils-csl-sourcerygxx-4_1-30:1.4
	binutils-csl-coldfire-4_1-28:1.4
	binutils-csl-sourcerygxx-4_1-29:1.4
	binutils-csl-sourcerygxx-4_1-28:1.4
	binutils-csl-arm-2006q3-27:1.4
	binutils-csl-sourcerygxx-4_1-27:1.4
	binutils-csl-arm-2006q3-26:1.4
	binutils-csl-sourcerygxx-4_1-26:1.4
	binutils-csl-sourcerygxx-4_1-25:1.4
	binutils-csl-sourcerygxx-4_1-24:1.4
	binutils-csl-sourcerygxx-4_1-23:1.4
	binutils-csl-sourcerygxx-4_1-21:1.4
	binutils-csl-arm-2006q3-21:1.4
	binutils-csl-sourcerygxx-4_1-22:1.4
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.4
	binutils-csl-sourcerygxx-4_1-20:1.4
	binutils-csl-arm-2006q3-19:1.4
	binutils-csl-sourcerygxx-4_1-19:1.4
	binutils-csl-sourcerygxx-4_1-18:1.4
	binutils-csl-renesas-4_1-9:1.4
	binutils-csl-sourcerygxx-3_4_4-25:1.4
	binutils-csl-renesas-4_1-8:1.4
	binutils-csl-renesas-4_1-7:1.4
	binutils-csl-renesas-4_1-6:1.4
	binutils-csl-sourcerygxx-4_1-17:1.4
	binutils-csl-sourcerygxx-4_1-14:1.4
	binutils-csl-sourcerygxx-4_1-15:1.4
	binutils-csl-sourcerygxx-4_1-13:1.4
	binutils-2_17:1.4
	binutils-csl-sourcerygxx-4_1-12:1.4
	binutils-csl-sourcerygxx-3_4_4-21:1.4
	binutils-csl-wrs-linux-3_4_4-24:1.4
	binutils-csl-wrs-linux-3_4_4-23:1.4
	binutils-csl-sourcerygxx-4_1-9:1.4
	binutils-csl-sourcerygxx-4_1-8:1.4
	binutils-csl-sourcerygxx-4_1-7:1.4
	binutils-csl-arm-2006q1-6:1.4
	binutils-csl-sourcerygxx-4_1-6:1.4
	binutils-csl-wrs-linux-3_4_4-22:1.4
	binutils-csl-coldfire-4_1-11:1.4
	binutils-csl-sourcerygxx-3_4_4-19:1.4
	binutils-csl-coldfire-4_1-10:1.4
	binutils-csl-sourcerygxx-4_1-5:1.4
	binutils-csl-sourcerygxx-4_1-4:1.4
	binutils-csl-wrs-linux-3_4_4-21:1.4
	binutils-csl-morpho-4_1-4:1.4
	binutils-csl-sourcerygxx-3_4_4-17:1.4
	binutils-csl-wrs-linux-3_4_4-20:1.4
	binutils-2_17-branch:1.4.0.10
	binutils-2_17-branchpoint:1.4
	binutils-csl-2_17-branch:1.4.0.8
	binutils-csl-2_17-branchpoint:1.4
	binutils-csl-gxxpro-3_4-branch:1.4.0.6
	binutils-csl-gxxpro-3_4-branchpoint:1.4
	binutils-2_16_1:1.4
	binutils-csl-arm-2005q1b:1.4
	binutils-2_16:1.4
	binutils-csl-arm-2005q1a:1.4
	binutils-csl-arm-2005q1-branch:1.4.0.4
	binutils-csl-arm-2005q1-branchpoint:1.4
	binutils-2_16-branch:1.4.0.2
	binutils-2_16-branchpoint:1.4
	csl-arm-2004-q3d:1.3
	csl-arm-2004-q3:1.3
	binutils-2_15:1.3
	binutils-2_15-branchpoint:1.3
	csl-arm-2004-q1a:1.3
	csl-arm-2004-q1:1.3
	binutils-2_15-branch:1.3.0.2
	cagney_bfdfile-20040213-branch:1.2.0.4
	cagney_bfdfile-20040213-branchpoint:1.2
	cagney_bigcore-20040122-branch:1.2.0.2
	cagney_bigcore-20040122-branchpoint:1.2
	csl-arm-2003-q4:1.2
	binutils_latest_snapshot:1.10;
locks; strict;
comment	@# @;


1.10
date	2012.08.06.21.28.45;	author macro;	state Exp;
branches;
next	1.9;

1.9
date	2012.08.06.21.05.54;	author macro;	state Exp;
branches;
next	1.8;

1.8
date	2010.09.19.10.26.28;	author rsandifo;	state Exp;
branches
	1.8.8.1;
next	1.7;

1.7
date	2009.09.20.11.11.37;	author rsandifo;	state Exp;
branches;
next	1.6;

1.6
date	2008.03.20.10.52.14;	author rsandifo;	state Exp;
branches
	1.6.8.1;
next	1.5;

1.5
date	2006.10.18.07.13.47;	author rsandifo;	state Exp;
branches;
next	1.4;

1.4
date	2005.01.31.22.00.59;	author drow;	state Exp;
branches;
next	1.3;

1.3
date	2004.02.17.10.19.24;	author rsandifo;	state Exp;
branches;
next	1.2;

1.2
date	2003.12.07.21.49.09;	author rsandifo;	state Exp;
branches;
next	1.1;

1.1
date	2003.06.12.17.07.14;	author ths;	state Exp;
branches;
next	;

1.8.8.1
date	2012.09.04.14.38.02;	author gingold;	state Exp;
branches;
next	;

1.6.8.1
date	2009.09.20.11.15.16;	author rsandifo;	state Exp;
branches;
next	;


desc
@@


1.10
log
@	gas/testsuite/
	* gas/mips/mips.exp: Set has_newabi for all Linux targets.
	* gas/mips/cfi-n64-1.d: Adjust for targets that do not infer the
	ISA from the ABI.
	* gas/mips/elf-rel-got-n32.d: Likewise.
	* gas/mips/elf-rel-got-n64.d: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Likewise.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel18.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.
	* gas/mips/elf-rel28-n64.d: Likewise.
	* gas/mips/jal-newabi.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/macro-warn-1-n32.d: Likewise.
	* gas/mips/macro-warn-2-n32.d: Likewise.
	* gas/mips/n32-consec.d: Likewise.

	ld/testsuite/
	* ld-mips-elf/mips-elf.exp: Set has_newabi for all Linux targets.
	Adjust abi_asflags for targets that do not infer the ISA from the
	ABI.
	* ld-mips-elf/eh-frame1-n32.d: Adjust for targets that do not
	infer the ISA from the ABI.
	* ld-mips-elf/eh-frame1-n64.d: Likewise.
	* ld-mips-elf/eh-frame2-n32.d: Likewise.
	* ld-mips-elf/eh-frame2-n64.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32-embed.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-embed.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32-embed.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-embed.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64.d: Likewise.
	* ld-mips-elf/emit-relocs-1.d: Likewise.
	* ld-mips-elf/got-page-2.d: Likewise.
	* ld-mips-elf/no-shared-1-n32.d: Likewise.
	* ld-mips-elf/no-shared-1-n64.d: Likewise.
	* ld-mips-elf/rel32-n32.d: Likewise.
	* ld-mips-elf/rel64.d: Likewise.
	* ld-mips-elf/relax-jalr-n32-shared.d: Likewise.
	* ld-mips-elf/relax-jalr-n32.d: Likewise.
	* ld-mips-elf/relax-jalr-n64-shared.d: Likewise.
	* ld-mips-elf/relax-jalr-n64.d: Likewise.
	* ld-mips-elf/reloc-1-n32.d: Likewise.
	* ld-mips-elf/reloc-1-n64.d: Likewise.
	* ld-mips-elf/textrel-1.d: Likewise.
@
text
@#name: MIPS ELF xgot reloc n64
#as: -march=from-abi -EB -64 -KPIC -xgot
#source: ../../../gas/testsuite/gas/mips/elf-rel-got-n64.s
#ld:
#objdump: -D --show-raw-insn

.*: +file format elf64-.*mips.*

Disassembly of section \.MIPS\.options:

00000001200000b0 <\.MIPS\.options>:
   1200000b0:	01280000 	.*
   1200000b4:	00000000 	.*
   1200000b8:	92020022 	.*
	\.\.\.
   1200000d0:	00000001 	.*
   1200000d4:	200187d0 	.*

Disassembly of section \.text:

00000001200000e0 <fn>:
   1200000e0:	3c050000 	lui	a1,0x0
   1200000e4:	00bc282d 	daddu	a1,a1,gp
   1200000e8:	dca58020 	ld	a1,-32736\(a1\)
   1200000ec:	3c050000 	lui	a1,0x0
   1200000f0:	00bc282d 	daddu	a1,a1,gp
   1200000f4:	dca58020 	ld	a1,-32736\(a1\)
   1200000f8:	64a5000c 	daddiu	a1,a1,12
   1200000fc:	3c050000 	lui	a1,0x0
   120000100:	00bc282d 	daddu	a1,a1,gp
   120000104:	dca58020 	ld	a1,-32736\(a1\)
   120000108:	3c010001 	lui	at,0x1
   12000010c:	3421e240 	ori	at,at,0xe240
   120000110:	00a1282d 	daddu	a1,a1,at
   120000114:	3c050000 	lui	a1,0x0
   120000118:	00bc282d 	daddu	a1,a1,gp
   12000011c:	dca58020 	ld	a1,-32736\(a1\)
   120000120:	00b1282d 	daddu	a1,a1,s1
   120000124:	3c050000 	lui	a1,0x0
   120000128:	00bc282d 	daddu	a1,a1,gp
   12000012c:	dca58020 	ld	a1,-32736\(a1\)
   120000130:	64a5000c 	daddiu	a1,a1,12
   120000134:	00b1282d 	daddu	a1,a1,s1
   120000138:	3c050000 	lui	a1,0x0
   12000013c:	00bc282d 	daddu	a1,a1,gp
   120000140:	dca58020 	ld	a1,-32736\(a1\)
   120000144:	3c010001 	lui	at,0x1
   120000148:	3421e240 	ori	at,at,0xe240
   12000014c:	00a1282d 	daddu	a1,a1,at
   120000150:	00b1282d 	daddu	a1,a1,s1
   120000154:	3c050000 	lui	a1,0x0
   120000158:	00bc282d 	daddu	a1,a1,gp
   12000015c:	dca58020 	ld	a1,-32736\(a1\)
   120000160:	dca50000 	ld	a1,0\(a1\)
   120000164:	3c050000 	lui	a1,0x0
   120000168:	00bc282d 	daddu	a1,a1,gp
   12000016c:	dca58020 	ld	a1,-32736\(a1\)
   120000170:	dca5000c 	ld	a1,12\(a1\)
   120000174:	3c050000 	lui	a1,0x0
   120000178:	00bc282d 	daddu	a1,a1,gp
   12000017c:	dca58020 	ld	a1,-32736\(a1\)
   120000180:	00b1282d 	daddu	a1,a1,s1
   120000184:	dca50000 	ld	a1,0\(a1\)
   120000188:	3c050000 	lui	a1,0x0
   12000018c:	00bc282d 	daddu	a1,a1,gp
   120000190:	dca58020 	ld	a1,-32736\(a1\)
   120000194:	00b1282d 	daddu	a1,a1,s1
   120000198:	dca5000c 	ld	a1,12\(a1\)
   12000019c:	3c010000 	lui	at,0x0
   1200001a0:	003c082d 	daddu	at,at,gp
   1200001a4:	dc218020 	ld	at,-32736\(at\)
   1200001a8:	0025082d 	daddu	at,at,a1
   1200001ac:	dc250022 	ld	a1,34\(at\)
   1200001b0:	3c010000 	lui	at,0x0
   1200001b4:	003c082d 	daddu	at,at,gp
   1200001b8:	dc218020 	ld	at,-32736\(at\)
   1200001bc:	0025082d 	daddu	at,at,a1
   1200001c0:	fc250038 	sd	a1,56\(at\)
   1200001c4:	3c010000 	lui	at,0x0
   1200001c8:	003c082d 	daddu	at,at,gp
   1200001cc:	dc218020 	ld	at,-32736\(at\)
   1200001d0:	88250000 	lwl	a1,0\(at\)
   1200001d4:	98250003 	lwr	a1,3\(at\)
   1200001d8:	3c010000 	lui	at,0x0
   1200001dc:	003c082d 	daddu	at,at,gp
   1200001e0:	dc218020 	ld	at,-32736\(at\)
   1200001e4:	6421000c 	daddiu	at,at,12
   1200001e8:	88250000 	lwl	a1,0\(at\)
   1200001ec:	98250003 	lwr	a1,3\(at\)
   1200001f0:	3c010000 	lui	at,0x0
   1200001f4:	003c082d 	daddu	at,at,gp
   1200001f8:	dc218020 	ld	at,-32736\(at\)
   1200001fc:	0031082d 	daddu	at,at,s1
   120000200:	88250000 	lwl	a1,0\(at\)
   120000204:	98250003 	lwr	a1,3\(at\)
   120000208:	3c010000 	lui	at,0x0
   12000020c:	003c082d 	daddu	at,at,gp
   120000210:	dc218020 	ld	at,-32736\(at\)
   120000214:	6421000c 	daddiu	at,at,12
   120000218:	0031082d 	daddu	at,at,s1
   12000021c:	88250000 	lwl	a1,0\(at\)
   120000220:	98250003 	lwr	a1,3\(at\)
   120000224:	3c010000 	lui	at,0x0
   120000228:	003c082d 	daddu	at,at,gp
   12000022c:	dc218020 	ld	at,-32736\(at\)
   120000230:	64210022 	daddiu	at,at,34
   120000234:	0025082d 	daddu	at,at,a1
   120000238:	88250000 	lwl	a1,0\(at\)
   12000023c:	98250003 	lwr	a1,3\(at\)
   120000240:	3c010000 	lui	at,0x0
   120000244:	003c082d 	daddu	at,at,gp
   120000248:	dc218020 	ld	at,-32736\(at\)
   12000024c:	64210038 	daddiu	at,at,56
   120000250:	0025082d 	daddu	at,at,a1
   120000254:	a8250000 	swl	a1,0\(at\)
   120000258:	b8250003 	swr	a1,3\(at\)
   12000025c:	df858028 	ld	a1,-32728\(gp\)
   120000260:	64a5072c 	daddiu	a1,a1,1836
   120000264:	df858028 	ld	a1,-32728\(gp\)
   120000268:	64a50738 	daddiu	a1,a1,1848
   12000026c:	df858030 	ld	a1,-32720\(gp\)
   120000270:	64a5e96c 	daddiu	a1,a1,-5780
   120000274:	df858028 	ld	a1,-32728\(gp\)
   120000278:	64a5072c 	daddiu	a1,a1,1836
   12000027c:	00b1282d 	daddu	a1,a1,s1
   120000280:	df858028 	ld	a1,-32728\(gp\)
   120000284:	64a50738 	daddiu	a1,a1,1848
   120000288:	00b1282d 	daddu	a1,a1,s1
   12000028c:	df858030 	ld	a1,-32720\(gp\)
   120000290:	64a5e96c 	daddiu	a1,a1,-5780
   120000294:	00b1282d 	daddu	a1,a1,s1
   120000298:	df858028 	ld	a1,-32728\(gp\)
   12000029c:	dca5072c 	ld	a1,1836\(a1\)
   1200002a0:	df858028 	ld	a1,-32728\(gp\)
   1200002a4:	dca50738 	ld	a1,1848\(a1\)
   1200002a8:	df858028 	ld	a1,-32728\(gp\)
   1200002ac:	00b1282d 	daddu	a1,a1,s1
   1200002b0:	dca5072c 	ld	a1,1836\(a1\)
   1200002b4:	df858028 	ld	a1,-32728\(gp\)
   1200002b8:	00b1282d 	daddu	a1,a1,s1
   1200002bc:	dca50738 	ld	a1,1848\(a1\)
   1200002c0:	df818028 	ld	at,-32728\(gp\)
   1200002c4:	0025082d 	daddu	at,at,a1
   1200002c8:	dc25074e 	ld	a1,1870\(at\)
   1200002cc:	df818028 	ld	at,-32728\(gp\)
   1200002d0:	0025082d 	daddu	at,at,a1
   1200002d4:	fc250764 	sd	a1,1892\(at\)
   1200002d8:	df818028 	ld	at,-32728\(gp\)
   1200002dc:	6421072c 	daddiu	at,at,1836
   1200002e0:	88250000 	lwl	a1,0\(at\)
   1200002e4:	98250003 	lwr	a1,3\(at\)
   1200002e8:	df818028 	ld	at,-32728\(gp\)
   1200002ec:	64210738 	daddiu	at,at,1848
   1200002f0:	88250000 	lwl	a1,0\(at\)
   1200002f4:	98250003 	lwr	a1,3\(at\)
   1200002f8:	df818028 	ld	at,-32728\(gp\)
   1200002fc:	6421072c 	daddiu	at,at,1836
   120000300:	0031082d 	daddu	at,at,s1
   120000304:	88250000 	lwl	a1,0\(at\)
   120000308:	98250003 	lwr	a1,3\(at\)
   12000030c:	df818028 	ld	at,-32728\(gp\)
   120000310:	64210738 	daddiu	at,at,1848
   120000314:	0031082d 	daddu	at,at,s1
   120000318:	88250000 	lwl	a1,0\(at\)
   12000031c:	98250003 	lwr	a1,3\(at\)
   120000320:	df818028 	ld	at,-32728\(gp\)
   120000324:	6421074e 	daddiu	at,at,1870
   120000328:	0025082d 	daddu	at,at,a1
   12000032c:	88250000 	lwl	a1,0\(at\)
   120000330:	98250003 	lwr	a1,3\(at\)
   120000334:	df818028 	ld	at,-32728\(gp\)
   120000338:	64210764 	daddiu	at,at,1892
   12000033c:	0025082d 	daddu	at,at,a1
   120000340:	a8250000 	swl	a1,0\(at\)
   120000344:	b8250003 	swr	a1,3\(at\)
   120000348:	3c050000 	lui	a1,0x0
   12000034c:	00bc282d 	daddu	a1,a1,gp
   120000350:	dca58038 	ld	a1,-32712\(a1\)
   120000354:	df858040 	ld	a1,-32704\(gp\)
   120000358:	64a500e0 	daddiu	a1,a1,224
   12000035c:	3c190000 	lui	t9,0x0
   120000360:	033cc82d 	daddu	t9,t9,gp
   120000364:	df398038 	ld	t9,-32712\(t9\)
   120000368:	df998040 	ld	t9,-32704\(gp\)
   12000036c:	673900e0 	daddiu	t9,t9,224
   120000370:	3c190000 	lui	t9,0x0
   120000374:	033cc82d 	daddu	t9,t9,gp
   120000378:	df398038 	ld	t9,-32712\(t9\)
   12000037c:	0411ff58 	bal	1200000e0 <fn>
   120000380:	00000000 	nop
   120000384:	df998040 	ld	t9,-32704\(gp\)
   120000388:	673900e0 	daddiu	t9,t9,224
   12000038c:	0411ff54 	bal	1200000e0 <fn>
   120000390:	00000000 	nop
   120000394:	3c050000 	lui	a1,0x0
   120000398:	00bc282d 	daddu	a1,a1,gp
   12000039c:	dca58048 	ld	a1,-32696\(a1\)
   1200003a0:	3c050000 	lui	a1,0x0
   1200003a4:	00bc282d 	daddu	a1,a1,gp
   1200003a8:	dca58048 	ld	a1,-32696\(a1\)
   1200003ac:	64a5000c 	daddiu	a1,a1,12
   1200003b0:	3c050000 	lui	a1,0x0
   1200003b4:	00bc282d 	daddu	a1,a1,gp
   1200003b8:	dca58048 	ld	a1,-32696\(a1\)
   1200003bc:	3c010001 	lui	at,0x1
   1200003c0:	3421e240 	ori	at,at,0xe240
   1200003c4:	00a1282d 	daddu	a1,a1,at
   1200003c8:	3c050000 	lui	a1,0x0
   1200003cc:	00bc282d 	daddu	a1,a1,gp
   1200003d0:	dca58048 	ld	a1,-32696\(a1\)
   1200003d4:	00b1282d 	daddu	a1,a1,s1
   1200003d8:	3c050000 	lui	a1,0x0
   1200003dc:	00bc282d 	daddu	a1,a1,gp
   1200003e0:	dca58048 	ld	a1,-32696\(a1\)
   1200003e4:	64a5000c 	daddiu	a1,a1,12
   1200003e8:	00b1282d 	daddu	a1,a1,s1
   1200003ec:	3c050000 	lui	a1,0x0
   1200003f0:	00bc282d 	daddu	a1,a1,gp
   1200003f4:	dca58048 	ld	a1,-32696\(a1\)
   1200003f8:	3c010001 	lui	at,0x1
   1200003fc:	3421e240 	ori	at,at,0xe240
   120000400:	00a1282d 	daddu	a1,a1,at
   120000404:	00b1282d 	daddu	a1,a1,s1
   120000408:	3c050000 	lui	a1,0x0
   12000040c:	00bc282d 	daddu	a1,a1,gp
   120000410:	dca58048 	ld	a1,-32696\(a1\)
   120000414:	dca50000 	ld	a1,0\(a1\)
   120000418:	3c050000 	lui	a1,0x0
   12000041c:	00bc282d 	daddu	a1,a1,gp
   120000420:	dca58048 	ld	a1,-32696\(a1\)
   120000424:	dca5000c 	ld	a1,12\(a1\)
   120000428:	3c050000 	lui	a1,0x0
   12000042c:	00bc282d 	daddu	a1,a1,gp
   120000430:	dca58048 	ld	a1,-32696\(a1\)
   120000434:	00b1282d 	daddu	a1,a1,s1
   120000438:	dca50000 	ld	a1,0\(a1\)
   12000043c:	3c050000 	lui	a1,0x0
   120000440:	00bc282d 	daddu	a1,a1,gp
   120000444:	dca58048 	ld	a1,-32696\(a1\)
   120000448:	00b1282d 	daddu	a1,a1,s1
   12000044c:	dca5000c 	ld	a1,12\(a1\)
   120000450:	3c010000 	lui	at,0x0
   120000454:	003c082d 	daddu	at,at,gp
   120000458:	dc218048 	ld	at,-32696\(at\)
   12000045c:	0025082d 	daddu	at,at,a1
   120000460:	dc250022 	ld	a1,34\(at\)
   120000464:	3c010000 	lui	at,0x0
   120000468:	003c082d 	daddu	at,at,gp
   12000046c:	dc218048 	ld	at,-32696\(at\)
   120000470:	0025082d 	daddu	at,at,a1
   120000474:	fc250038 	sd	a1,56\(at\)
   120000478:	3c010000 	lui	at,0x0
   12000047c:	003c082d 	daddu	at,at,gp
   120000480:	dc218048 	ld	at,-32696\(at\)
   120000484:	88250000 	lwl	a1,0\(at\)
   120000488:	98250003 	lwr	a1,3\(at\)
   12000048c:	3c010000 	lui	at,0x0
   120000490:	003c082d 	daddu	at,at,gp
   120000494:	dc218048 	ld	at,-32696\(at\)
   120000498:	6421000c 	daddiu	at,at,12
   12000049c:	88250000 	lwl	a1,0\(at\)
   1200004a0:	98250003 	lwr	a1,3\(at\)
   1200004a4:	3c010000 	lui	at,0x0
   1200004a8:	003c082d 	daddu	at,at,gp
   1200004ac:	dc218048 	ld	at,-32696\(at\)
   1200004b0:	0031082d 	daddu	at,at,s1
   1200004b4:	88250000 	lwl	a1,0\(at\)
   1200004b8:	98250003 	lwr	a1,3\(at\)
   1200004bc:	3c010000 	lui	at,0x0
   1200004c0:	003c082d 	daddu	at,at,gp
   1200004c4:	dc218048 	ld	at,-32696\(at\)
   1200004c8:	6421000c 	daddiu	at,at,12
   1200004cc:	0031082d 	daddu	at,at,s1
   1200004d0:	88250000 	lwl	a1,0\(at\)
   1200004d4:	98250003 	lwr	a1,3\(at\)
   1200004d8:	3c010000 	lui	at,0x0
   1200004dc:	003c082d 	daddu	at,at,gp
   1200004e0:	dc218048 	ld	at,-32696\(at\)
   1200004e4:	64210022 	daddiu	at,at,34
   1200004e8:	0025082d 	daddu	at,at,a1
   1200004ec:	88250000 	lwl	a1,0\(at\)
   1200004f0:	98250003 	lwr	a1,3\(at\)
   1200004f4:	3c010000 	lui	at,0x0
   1200004f8:	003c082d 	daddu	at,at,gp
   1200004fc:	dc218048 	ld	at,-32696\(at\)
   120000500:	64210038 	daddiu	at,at,56
   120000504:	0025082d 	daddu	at,at,a1
   120000508:	a8250000 	swl	a1,0\(at\)
   12000050c:	b8250003 	swr	a1,3\(at\)
   120000510:	df858028 	ld	a1,-32728\(gp\)
   120000514:	64a507a4 	daddiu	a1,a1,1956
   120000518:	df858028 	ld	a1,-32728\(gp\)
   12000051c:	64a507b0 	daddiu	a1,a1,1968
   120000520:	df858030 	ld	a1,-32720\(gp\)
   120000524:	64a5e9e4 	daddiu	a1,a1,-5660
   120000528:	df858028 	ld	a1,-32728\(gp\)
   12000052c:	64a507a4 	daddiu	a1,a1,1956
   120000530:	00b1282d 	daddu	a1,a1,s1
   120000534:	df858028 	ld	a1,-32728\(gp\)
   120000538:	64a507b0 	daddiu	a1,a1,1968
   12000053c:	00b1282d 	daddu	a1,a1,s1
   120000540:	df858030 	ld	a1,-32720\(gp\)
   120000544:	64a5e9e4 	daddiu	a1,a1,-5660
   120000548:	00b1282d 	daddu	a1,a1,s1
   12000054c:	df858028 	ld	a1,-32728\(gp\)
   120000550:	dca507a4 	ld	a1,1956\(a1\)
   120000554:	df858028 	ld	a1,-32728\(gp\)
   120000558:	dca507b0 	ld	a1,1968\(a1\)
   12000055c:	df858028 	ld	a1,-32728\(gp\)
   120000560:	00b1282d 	daddu	a1,a1,s1
   120000564:	dca507a4 	ld	a1,1956\(a1\)
   120000568:	df858028 	ld	a1,-32728\(gp\)
   12000056c:	00b1282d 	daddu	a1,a1,s1
   120000570:	dca507b0 	ld	a1,1968\(a1\)
   120000574:	df818028 	ld	at,-32728\(gp\)
   120000578:	0025082d 	daddu	at,at,a1
   12000057c:	dc2507c6 	ld	a1,1990\(at\)
   120000580:	df818028 	ld	at,-32728\(gp\)
   120000584:	0025082d 	daddu	at,at,a1
   120000588:	fc2507dc 	sd	a1,2012\(at\)
   12000058c:	df818028 	ld	at,-32728\(gp\)
   120000590:	642107a4 	daddiu	at,at,1956
   120000594:	88250000 	lwl	a1,0\(at\)
   120000598:	98250003 	lwr	a1,3\(at\)
   12000059c:	df818028 	ld	at,-32728\(gp\)
   1200005a0:	642107b0 	daddiu	at,at,1968
   1200005a4:	88250000 	lwl	a1,0\(at\)
   1200005a8:	98250003 	lwr	a1,3\(at\)
   1200005ac:	df818028 	ld	at,-32728\(gp\)
   1200005b0:	642107a4 	daddiu	at,at,1956
   1200005b4:	0031082d 	daddu	at,at,s1
   1200005b8:	88250000 	lwl	a1,0\(at\)
   1200005bc:	98250003 	lwr	a1,3\(at\)
   1200005c0:	df818028 	ld	at,-32728\(gp\)
   1200005c4:	642107b0 	daddiu	at,at,1968
   1200005c8:	0031082d 	daddu	at,at,s1
   1200005cc:	88250000 	lwl	a1,0\(at\)
   1200005d0:	98250003 	lwr	a1,3\(at\)
   1200005d4:	df818028 	ld	at,-32728\(gp\)
   1200005d8:	642107c6 	daddiu	at,at,1990
   1200005dc:	0025082d 	daddu	at,at,a1
   1200005e0:	88250000 	lwl	a1,0\(at\)
   1200005e4:	98250003 	lwr	a1,3\(at\)
   1200005e8:	df818028 	ld	at,-32728\(gp\)
   1200005ec:	642107dc 	daddiu	at,at,2012
   1200005f0:	0025082d 	daddu	at,at,a1
   1200005f4:	a8250000 	swl	a1,0\(at\)
   1200005f8:	b8250003 	swr	a1,3\(at\)
   1200005fc:	3c050000 	lui	a1,0x0
   120000600:	00bc282d 	daddu	a1,a1,gp
   120000604:	dca58050 	ld	a1,-32688\(a1\)
   120000608:	df858040 	ld	a1,-32704\(gp\)
   12000060c:	64a506e0 	daddiu	a1,a1,1760
   120000610:	3c190000 	lui	t9,0x0
   120000614:	033cc82d 	daddu	t9,t9,gp
   120000618:	df398050 	ld	t9,-32688\(t9\)
   12000061c:	df998040 	ld	t9,-32704\(gp\)
   120000620:	673906e0 	daddiu	t9,t9,1760
   120000624:	3c190000 	lui	t9,0x0
   120000628:	033cc82d 	daddu	t9,t9,gp
   12000062c:	df398050 	ld	t9,-32688\(t9\)
   120000630:	0411002b 	bal	1200006e0 <fn2>
   120000634:	00000000 	nop
   120000638:	df998040 	ld	t9,-32704\(gp\)
   12000063c:	673906e0 	daddiu	t9,t9,1760
   120000640:	04110027 	bal	1200006e0 <fn2>
   120000644:	00000000 	nop
   120000648:	3c050000 	lui	a1,0x0
   12000064c:	00bc282d 	daddu	a1,a1,gp
   120000650:	dca58020 	ld	a1,-32736\(a1\)
   120000654:	1000fea2 	b	1200000e0 <fn>
   120000658:	00000000 	nop
   12000065c:	3c050000 	lui	a1,0x0
   120000660:	00bc282d 	daddu	a1,a1,gp
   120000664:	dca58048 	ld	a1,-32696\(a1\)
   120000668:	dca50000 	ld	a1,0\(a1\)
   12000066c:	1000001c 	b	1200006e0 <fn2>
   120000670:	00000000 	nop
   120000674:	df858028 	ld	a1,-32728\(gp\)
   120000678:	64a5072c 	daddiu	a1,a1,1836
   12000067c:	1000fe98 	b	1200000e0 <fn>
   120000680:	00000000 	nop
   120000684:	df858028 	ld	a1,-32728\(gp\)
   120000688:	64a507b0 	daddiu	a1,a1,1968
   12000068c:	10000014 	b	1200006e0 <fn2>
   120000690:	00000000 	nop
   120000694:	df858030 	ld	a1,-32720\(gp\)
   120000698:	64a5e96c 	daddiu	a1,a1,-5780
   12000069c:	1000fe90 	b	1200000e0 <fn>
   1200006a0:	00000000 	nop
   1200006a4:	df858028 	ld	a1,-32728\(gp\)
   1200006a8:	dca507a4 	ld	a1,1956\(a1\)
   1200006ac:	1000000c 	b	1200006e0 <fn2>
   1200006b0:	00000000 	nop
   1200006b4:	df858028 	ld	a1,-32728\(gp\)
   1200006b8:	dca50738 	ld	a1,1848\(a1\)
   1200006bc:	1000fe88 	b	1200000e0 <fn>
   1200006c0:	00000000 	nop
   1200006c4:	df818028 	ld	at,-32728\(gp\)
   1200006c8:	0025082d 	daddu	at,at,a1
   1200006cc:	dc2507c6 	ld	a1,1990\(at\)
   1200006d0:	10000003 	b	1200006e0 <fn2>
   1200006d4:	00000000 	nop
	\.\.\.

00000001200006e0 <fn2>:
	\.\.\.

Disassembly of section \.data:

00000001200106f0 <_fdata>:
	\.\.\.

000000012001072c <dg1>:
	\.\.\.

0000000120010768 <sp2>:
	\.\.\.

00000001200107a4 <dg2>:
	\.\.\.

Disassembly of section \.got:

00000001200107e0 <_GLOBAL_OFFSET_TABLE_>:
	\.\.\.
   1200107e8:	80000000 	.*
   1200107ec:	00000000 	.*
   1200107f0:	00000001 	.*
   1200107f4:	2001072c 	.*
   1200107f8:	00000001 	.*
   1200107fc:	20010000 	.*
   120010800:	00000001 	.*
   120010804:	20030000 	.*
   120010808:	00000001 	.*
   12001080c:	200000e0 	.*
   120010810:	00000001 	.*
   120010814:	20000000 	.*
   120010818:	00000001 	.*
   12001081c:	200107a4 	.*
   120010820:	00000001 	.*
   120010824:	200006e0 	.*
	\.\.\.
#pass
@


1.9
log
@	gas/testsuite/
	* gas/mips/mips.exp: Set has_newabi for mips*-sde-elf* too.
	* gas/mips/elf-rel-got-n32.s: Adjust padding.
	* gas/mips/elf-rel-got-n64.s: Likewise.
	* gas/mips/elf-rel23.s: Likewise.
	* gas/mips/elf-rel28.s: Likewise.
	* gas/mips/n32-consec.s: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Adjust output expected.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel23.d: Likewise.
	* gas/mips/elf-rel23a.d: Likewise.
	* gas/mips/elf-rel23b.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.

	ld/testsuite/
	* lib/ld-lib.exp (run_dump_test): Implement the EXTRA_OPTIONS
	argument and the "dump" keyword.
	* ld-mips-elf/emit-relocs-1a.s: Make section alignment uniform
	across targets.
	* ld-mips-elf/emit-relocs-1b.s: Likewise.
	* ld-mips-elf/jalbal.s: Adjust padding.
	* ld-mips-elf/elf-rel-got-n32-embed.d: New test.
	* ld-mips-elf/elf-rel-got-n64-embed.d: New test.
	* ld-mips-elf/elf-rel-xgot-n32-embed.d: New test.
	* ld-mips-elf/elf-rel-xgot-n64-embed.d: New test.
	* ld-mips-elf/elf-rel-got-n32.d: Remove -melf32btsmipn32.
	* ld-mips-elf/elf-rel-got-n64.d: Remove -melf64btsmip.  Adjust
	output.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Remove -melf64btsmip.
	* ld-mips-elf/elf-rel-xgot-n32.d: Remove -melf32btsmipn32.
	Adjust output.
	* ld-mips-elf/elf-rel-xgot-n64.d: Remove -melf64btsmip.  Adjust
	output.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/reloc-1-n64.d: Remove -melf64btsmip.
	* ld-mips-elf/mips-elf.exp: Set has_newabi for mips*-sde-elf*
	too.  Move tool flags from o32_as_flags and o32_ld_flags
	variables into abi_asflags and abi_ldflags arrays.  Adjust test
	cases run to use them.  Run the new tests.
@
text
@d2 1
a2 1
#as: -EB -64 -KPIC -xgot
@


1.8
log
@bfd/
	* elfxx-mips.c (mips_got_entry): Adjust commentary.
	(mips_elf_create_local_got_entry): If given a symbol, check that it
	has been assigned to the local part of the GOT.
	(mips_elf_count_got_symbols): Take the bfd_link_info as argument
	instead of the master GOT.  Put all locally-binding symbols in
	the local area.
	(mips_elf_make_got_per_bfd): Use global_got_area to decide whether
	a symbol lives in the local or global area.
	(mips_elf_local_relocation_p): Remove check_forced argument and
	retain only the !check_forced behavior.
	(mips_elf_calculate_relocation): Adjust call accordingly.
	Use global_got_area to decide whether an output relocation
	should be local or global.  Explicitly decay R_MIPS_GOT_PAGE
	into R_MIPS_GOT_DISP where appropriate.  Fix selection of
	local vs. global semantics for R_MIPS*_26.  Remove redundant
	reevaluation of what is stored in was_local_p.
	(mips_elf_create_dynamic_relocation): Use global_got_area to decide
	whether the relocation should be against a global or local symbol.
	(mips_elf_lay_out_got): Update the GOT traversal after the above
	change to mips_elf_count_got_symbols.
	(mips_elf_adjust_addend): Adjust call to mips_elf_local_relocation_p.
	(_bfd_mips_elf_relocate_section): Likewise.
	(_bfd_mips_elf_finish_dynamic_symbol): Use global_got_area to decide
	whether the symbol has a global got entry.
	(_bfd_mips_vxworks_finish_dynamic_symbol): Likewise.

ld/testsuite/
	* ld-mips-elf/elf-rel-got-n32.d: Swap two local GOT entries
	and remove some duplication between the global and local GOT
	entries.  Adjust GP offsets accordingly.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32.d: Reorder GOT entries and update
	GP offsets accordingly.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/mips16-pic-1.gd: Move all global GOT entries to
	the local GOT.
	* ld-mips-elf/mips16-pic-1.dd: Update GP offsets accordingly.
	* ld-mips-elf/multi-got-no-shared.d: Adjust GP setup for
	smaller GOT sizes.
@
text
@d4 1
a4 1
#ld: -melf64btsmip
d17 1
a17 1
   1200000d4:	200187c0 	.*
d118 1
a118 1
   120000260:	64a5071c 	daddiu	a1,a1,1820
d120 1
a120 1
   120000268:	64a50728 	daddiu	a1,a1,1832
d122 1
a122 1
   120000270:	64a5e95c 	daddiu	a1,a1,-5796
d124 1
a124 1
   120000278:	64a5071c 	daddiu	a1,a1,1820
d127 1
a127 1
   120000284:	64a50728 	daddiu	a1,a1,1832
d130 1
a130 1
   120000290:	64a5e95c 	daddiu	a1,a1,-5796
d133 1
a133 1
   12000029c:	dca5071c 	ld	a1,1820\(a1\)
d135 1
a135 1
   1200002a4:	dca50728 	ld	a1,1832\(a1\)
d138 1
a138 1
   1200002b0:	dca5071c 	ld	a1,1820\(a1\)
d141 1
a141 1
   1200002bc:	dca50728 	ld	a1,1832\(a1\)
d144 1
a144 1
   1200002c8:	dc25073e 	ld	a1,1854\(at\)
d147 1
a147 1
   1200002d4:	fc250754 	sd	a1,1876\(at\)
d149 1
a149 1
   1200002dc:	6421071c 	daddiu	at,at,1820
d153 1
a153 1
   1200002ec:	64210728 	daddiu	at,at,1832
d157 1
a157 1
   1200002fc:	6421071c 	daddiu	at,at,1820
d162 1
a162 1
   120000310:	64210728 	daddiu	at,at,1832
d167 1
a167 1
   120000324:	6421073e 	daddiu	at,at,1854
d172 1
a172 1
   120000338:	64210754 	daddiu	at,at,1876
d291 1
a291 1
   120000514:	64a50794 	daddiu	a1,a1,1940
d293 1
a293 1
   12000051c:	64a507a0 	daddiu	a1,a1,1952
d295 1
a295 1
   120000524:	64a5e9d4 	daddiu	a1,a1,-5676
d297 1
a297 1
   12000052c:	64a50794 	daddiu	a1,a1,1940
d300 1
a300 1
   120000538:	64a507a0 	daddiu	a1,a1,1952
d303 1
a303 1
   120000544:	64a5e9d4 	daddiu	a1,a1,-5676
d306 1
a306 1
   120000550:	dca50794 	ld	a1,1940\(a1\)
d308 1
a308 1
   120000558:	dca507a0 	ld	a1,1952\(a1\)
d311 1
a311 1
   120000564:	dca50794 	ld	a1,1940\(a1\)
d314 1
a314 1
   120000570:	dca507a0 	ld	a1,1952\(a1\)
d317 1
a317 1
   12000057c:	dc2507b6 	ld	a1,1974\(at\)
d320 1
a320 1
   120000588:	fc2507cc 	sd	a1,1996\(at\)
d322 1
a322 1
   120000590:	64210794 	daddiu	at,at,1940
d326 1
a326 1
   1200005a0:	642107a0 	daddiu	at,at,1952
d330 1
a330 1
   1200005b0:	64210794 	daddiu	at,at,1940
d335 1
a335 1
   1200005c4:	642107a0 	daddiu	at,at,1952
d340 1
a340 1
   1200005d8:	642107b6 	daddiu	at,at,1974
d345 1
a345 1
   1200005ec:	642107cc 	daddiu	at,at,1996
d380 1
a380 1
   120000678:	64a5071c 	daddiu	a1,a1,1820
d384 1
a384 1
   120000688:	64a507a0 	daddiu	a1,a1,1952
d388 1
a388 1
   120000698:	64a5e95c 	daddiu	a1,a1,-5796
d392 1
a392 1
   1200006a8:	dca50794 	ld	a1,1940\(a1\)
d396 1
a396 1
   1200006b8:	dca50728 	ld	a1,1832\(a1\)
d401 1
a401 1
   1200006cc:	dc2507b6 	ld	a1,1974\(at\)
d406 3
d411 1
a411 1
00000001200106e0 <_fdata>:
d414 1
a414 1
000000012001071c <dg1>:
d417 1
a417 1
0000000120010758 <sp2>:
d420 1
a420 1
0000000120010794 <dg2>:
d425 1
a425 1
00000001200107d0 <_GLOBAL_OFFSET_TABLE_>:
d427 2
a428 6
   1200107d8:	80000000 	.*
   1200107dc:	00000000 	.*
   1200107e0:	00000001 	.*
   1200107e4:	2001071c 	.*
   1200107e8:	00000001 	.*
   1200107ec:	20010000 	.*
d430 1
a430 1
   1200107f4:	20030000 	.*
d432 1
a432 1
   1200107fc:	200000e0 	.*
d434 1
a434 1
   120010804:	20000000 	.*
d436 1
a436 1
   12001080c:	20010794 	.*
d438 5
a442 1
   120010814:	200006e0 	.*
@


1.8.8.1
log
@bfd/
2012-08-09  Maciej W. Rozycki  <macro@@codesourcery.com>

	* elfxx-mips.c (LA25_LUI_MICROMIPS_1, LA25_LUI_MICROMIPS_2):
	Remove macros, folding them into...
	(LA25_LUI_MICROMIPS): ... this new macro.
	(LA25_J_MICROMIPS_1, LA25_J_MICROMIPS_2): Likewise into...
	(LA25_J_MICROMIPS): ... this new macro.
	(LA25_ADDIU_MICROMIPS_1, LA25_ADDIU_MICROMIPS_2): Likewise
	into...
	(LA25_ADDIU_MICROMIPS): ... this new macro.
	(bfd_put_micromips_32, bfd_get_micromips_32): New functions.
	(mips_elf_create_la25_stub): Use them.
	(check_br32_dslot, check_br32, check_relocated_bzc): Likewise.
	(_bfd_mips_elf_relax_section): Likewise.

gas/
	* config/tc-mips.c (NO_ISA_COP, COP_INSN): Remove macros.
	(is_opcode_valid): Remove coprocessor instruction exclusions.
	Replace OPCODE_IS_MEMBER with opcode_is_member.
	(is_opcode_valid_16): Replace OPCODE_IS_MEMBER with
	opcode_is_member.
	(macro): Remove coprocessor instruction exclusions.

gas/
	* gas/mips/mips.exp: Set has_newabi for all Linux targets.
	* gas/mips/cfi-n64-1.d: Adjust for targets that do not infer the
	ISA from the ABI.
	* gas/mips/elf-rel-got-n32.d: Likewise.
	* gas/mips/elf-rel-got-n64.d: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Likewise.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel18.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.
	* gas/mips/elf-rel28-n64.d: Likewise.
	* gas/mips/jal-newabi.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/macro-warn-1-n32.d: Likewise.
	* gas/mips/macro-warn-2-n32.d: Likewise.
	* gas/mips/n32-consec.d: Likewise.

include/
2012-08-13  Richard Sandiford  <rdsandiford@@googlemail.com>
            Maciej W. Rozycki  <macro@@codesourcery.com>

	* mips.h (mips_opcode): Add the exclusions field.
	(OPCODE_IS_MEMBER): Remove macro.
	(cpu_is_member): New inline function.
	(opcode_is_member): Likewise.

ld/
	* emulparams/elf32bmip.sh: Make _gp hidden.
	* emulparams/elf32bmipn32-defs.sh: Likewise.
	* emulparams/elf32mipswindiss.sh: Likewise.
	* scripttempl/mips.sc: Likewise.

ld/
2012-08-28  Maciej W. Rozycki  <macro@@codesourcery.com>

	* ld-elf/export-class.sd: New test.
	* ld-elf/export-class.vd: New test.
	* ld-elf/export-class-def.s: New test source.
	* ld-elf/export-class-dep.s: New test source.
	* ld-elf/export-class-lib.s: New test source.
	* ld-elf/export-class-ref.s: New test source.
	* ld-elf/export-class-lib.ver: New test version script.
	* ld-elf/export-class.exp: New test script.
	* ld-arm/arm-export-class.rd: New test.
	* ld-arm/arm-export-class.xd: New test.
	* ld-arm/export-class.exp: New test script.
	* ld-i386/i386-export-class.rd: New test.
	* ld-i386/i386-export-class.xd: New test.
	* ld-i386/export-class.exp: New test script.
	* ld-mips-elf/mips-32-export-class.rd: New test.
	* ld-mips-elf/mips-32-export-class.xd: New test.
	* ld-mips-elf/mips-64-export-class.rd: New test.
	* ld-mips-elf/mips-64-export-class.xd: New test.
	* ld-mips-elf/export-class.exp: New test script.
	* ld-powerpc/powerpc-32-export-class.rd: New test.
	* ld-powerpc/powerpc-32-export-class.xd: New test.
	* ld-powerpc/powerpc-64-export-class.rd: New test.
	* ld-powerpc/powerpc-64-export-class.xd: New test.
	* ld-powerpc/export-class.exp: New test script.
	* ld-x86-64/x86-64-64-export-class.rd: New test.
	* ld-x86-64/x86-64-x32-export-class.rd: New test.
	* ld-x86-64/export-class.exp: New test script.

opcodes/
2012-08-14  Maciej W. Rozycki  <macro@@codesourcery.com>

	* mips-dis.c (print_insn_args): Add GET_OP and GET_OP_S local
	macros, use local variables for info struct member accesses,
	update the type of the variable used to hold the instruction
	word.
	(print_insn_mips, print_mips16_insn_arg): Likewise.
	(print_insn_mips16): Add GET_OP and GET_OP_S local macros, use
	local variables for info struct member accesses.
	(print_insn_micromips): Add GET_OP_S local macro.
	(_print_insn_mips): Update the type of the variable used to hold
	the instruction word.
@
text
@d2 1
a2 1
#as: -march=from-abi -EB -64 -KPIC -xgot
d4 1
a4 1
#ld:
d17 1
a17 1
   1200000d4:	200187d0 	.*
d118 1
a118 1
   120000260:	64a5072c 	daddiu	a1,a1,1836
d120 1
a120 1
   120000268:	64a50738 	daddiu	a1,a1,1848
d122 1
a122 1
   120000270:	64a5e96c 	daddiu	a1,a1,-5780
d124 1
a124 1
   120000278:	64a5072c 	daddiu	a1,a1,1836
d127 1
a127 1
   120000284:	64a50738 	daddiu	a1,a1,1848
d130 1
a130 1
   120000290:	64a5e96c 	daddiu	a1,a1,-5780
d133 1
a133 1
   12000029c:	dca5072c 	ld	a1,1836\(a1\)
d135 1
a135 1
   1200002a4:	dca50738 	ld	a1,1848\(a1\)
d138 1
a138 1
   1200002b0:	dca5072c 	ld	a1,1836\(a1\)
d141 1
a141 1
   1200002bc:	dca50738 	ld	a1,1848\(a1\)
d144 1
a144 1
   1200002c8:	dc25074e 	ld	a1,1870\(at\)
d147 1
a147 1
   1200002d4:	fc250764 	sd	a1,1892\(at\)
d149 1
a149 1
   1200002dc:	6421072c 	daddiu	at,at,1836
d153 1
a153 1
   1200002ec:	64210738 	daddiu	at,at,1848
d157 1
a157 1
   1200002fc:	6421072c 	daddiu	at,at,1836
d162 1
a162 1
   120000310:	64210738 	daddiu	at,at,1848
d167 1
a167 1
   120000324:	6421074e 	daddiu	at,at,1870
d172 1
a172 1
   120000338:	64210764 	daddiu	at,at,1892
d291 1
a291 1
   120000514:	64a507a4 	daddiu	a1,a1,1956
d293 1
a293 1
   12000051c:	64a507b0 	daddiu	a1,a1,1968
d295 1
a295 1
   120000524:	64a5e9e4 	daddiu	a1,a1,-5660
d297 1
a297 1
   12000052c:	64a507a4 	daddiu	a1,a1,1956
d300 1
a300 1
   120000538:	64a507b0 	daddiu	a1,a1,1968
d303 1
a303 1
   120000544:	64a5e9e4 	daddiu	a1,a1,-5660
d306 1
a306 1
   120000550:	dca507a4 	ld	a1,1956\(a1\)
d308 1
a308 1
   120000558:	dca507b0 	ld	a1,1968\(a1\)
d311 1
a311 1
   120000564:	dca507a4 	ld	a1,1956\(a1\)
d314 1
a314 1
   120000570:	dca507b0 	ld	a1,1968\(a1\)
d317 1
a317 1
   12000057c:	dc2507c6 	ld	a1,1990\(at\)
d320 1
a320 1
   120000588:	fc2507dc 	sd	a1,2012\(at\)
d322 1
a322 1
   120000590:	642107a4 	daddiu	at,at,1956
d326 1
a326 1
   1200005a0:	642107b0 	daddiu	at,at,1968
d330 1
a330 1
   1200005b0:	642107a4 	daddiu	at,at,1956
d335 1
a335 1
   1200005c4:	642107b0 	daddiu	at,at,1968
d340 1
a340 1
   1200005d8:	642107c6 	daddiu	at,at,1990
d345 1
a345 1
   1200005ec:	642107dc 	daddiu	at,at,2012
d380 1
a380 1
   120000678:	64a5072c 	daddiu	a1,a1,1836
d384 1
a384 1
   120000688:	64a507b0 	daddiu	a1,a1,1968
d388 1
a388 1
   120000698:	64a5e96c 	daddiu	a1,a1,-5780
d392 1
a392 1
   1200006a8:	dca507a4 	ld	a1,1956\(a1\)
d396 1
a396 1
   1200006b8:	dca50738 	ld	a1,1848\(a1\)
d401 1
a401 1
   1200006cc:	dc2507c6 	ld	a1,1990\(at\)
a405 3
00000001200006e0 <fn2>:
	\.\.\.

d408 1
a408 1
00000001200106f0 <_fdata>:
d411 1
a411 1
000000012001072c <dg1>:
d414 1
a414 1
0000000120010768 <sp2>:
d417 1
a417 1
00000001200107a4 <dg2>:
d422 1
a422 1
00000001200107e0 <_GLOBAL_OFFSET_TABLE_>:
d424 6
a429 2
   1200107e8:	80000000 	.*
   1200107ec:	00000000 	.*
d431 1
a431 1
   1200107f4:	2001072c 	.*
d433 1
a433 1
   1200107fc:	20010000 	.*
d435 1
a435 1
   120010804:	20030000 	.*
d437 1
a437 1
   12001080c:	200000e0 	.*
d439 1
a439 5
   120010814:	20000000 	.*
   120010818:	00000001 	.*
   12001081c:	200107a4 	.*
   120010820:	00000001 	.*
   120010824:	200006e0 	.*
@


1.7
log
@ld/testsuite/
	* ld-mips-elf/elf-rel-got-n64-linux.d: Expect BALs.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
@
text
@d18 1
d24 1
a24 1
   1200000e8:	dca58058 	ld	a1,-32680\(a1\)
d27 1
a27 1
   1200000f4:	dca58058 	ld	a1,-32680\(a1\)
d31 1
a31 1
   120000104:	dca58058 	ld	a1,-32680\(a1\)
d37 1
a37 1
   12000011c:	dca58058 	ld	a1,-32680\(a1\)
d41 1
a41 1
   12000012c:	dca58058 	ld	a1,-32680\(a1\)
d46 1
a46 1
   120000140:	dca58058 	ld	a1,-32680\(a1\)
d53 1
a53 1
   12000015c:	dca58058 	ld	a1,-32680\(a1\)
d57 1
a57 1
   12000016c:	dca58058 	ld	a1,-32680\(a1\)
d61 1
a61 1
   12000017c:	dca58058 	ld	a1,-32680\(a1\)
d66 1
a66 1
   120000190:	dca58058 	ld	a1,-32680\(a1\)
d71 1
a71 1
   1200001a4:	dc218058 	ld	at,-32680\(at\)
d76 1
a76 1
   1200001b8:	dc218058 	ld	at,-32680\(at\)
d81 1
a81 1
   1200001cc:	dc218058 	ld	at,-32680\(at\)
d86 1
a86 1
   1200001e0:	dc218058 	ld	at,-32680\(at\)
d92 1
a92 1
   1200001f8:	dc218058 	ld	at,-32680\(at\)
d98 1
a98 1
   120000210:	dc218058 	ld	at,-32680\(at\)
d105 1
a105 1
   12000022c:	dc218058 	ld	at,-32680\(at\)
d112 1
a112 1
   120000248:	dc218058 	ld	at,-32680\(at\)
d117 1
a117 1
   12000025c:	df858020 	ld	a1,-32736\(gp\)
d119 1
a119 1
   120000264:	df858020 	ld	a1,-32736\(gp\)
d121 1
a121 1
   12000026c:	df858028 	ld	a1,-32728\(gp\)
d123 1
a123 1
   120000274:	df858020 	ld	a1,-32736\(gp\)
d126 1
a126 1
   120000280:	df858020 	ld	a1,-32736\(gp\)
d129 1
a129 1
   12000028c:	df858028 	ld	a1,-32728\(gp\)
d132 1
a132 1
   120000298:	df858020 	ld	a1,-32736\(gp\)
d134 1
a134 1
   1200002a0:	df858020 	ld	a1,-32736\(gp\)
d136 1
a136 1
   1200002a8:	df858020 	ld	a1,-32736\(gp\)
d139 1
a139 1
   1200002b4:	df858020 	ld	a1,-32736\(gp\)
d142 1
a142 1
   1200002c0:	df818020 	ld	at,-32736\(gp\)
d145 1
a145 1
   1200002cc:	df818020 	ld	at,-32736\(gp\)
d148 1
a148 1
   1200002d8:	df818020 	ld	at,-32736\(gp\)
d152 1
a152 1
   1200002e8:	df818020 	ld	at,-32736\(gp\)
d156 1
a156 1
   1200002f8:	df818020 	ld	at,-32736\(gp\)
d161 1
a161 1
   12000030c:	df818020 	ld	at,-32736\(gp\)
d166 1
a166 1
   120000320:	df818020 	ld	at,-32736\(gp\)
d171 1
a171 1
   120000334:	df818020 	ld	at,-32736\(gp\)
d178 2
a179 2
   120000350:	dca58048 	ld	a1,-32696\(a1\)
   120000354:	df858030 	ld	a1,-32720\(gp\)
d183 2
a184 2
   120000364:	df398048 	ld	t9,-32696\(t9\)
   120000368:	df998030 	ld	t9,-32720\(gp\)
d188 1
a188 1
   120000378:	df398048 	ld	t9,-32696\(t9\)
d191 1
a191 1
   120000384:	df998030 	ld	t9,-32720\(gp\)
d197 1
a197 1
   12000039c:	dca58060 	ld	a1,-32672\(a1\)
d200 1
a200 1
   1200003a8:	dca58060 	ld	a1,-32672\(a1\)
d204 1
a204 1
   1200003b8:	dca58060 	ld	a1,-32672\(a1\)
d210 1
a210 1
   1200003d0:	dca58060 	ld	a1,-32672\(a1\)
d214 1
a214 1
   1200003e0:	dca58060 	ld	a1,-32672\(a1\)
d219 1
a219 1
   1200003f4:	dca58060 	ld	a1,-32672\(a1\)
d226 1
a226 1
   120000410:	dca58060 	ld	a1,-32672\(a1\)
d230 1
a230 1
   120000420:	dca58060 	ld	a1,-32672\(a1\)
d234 1
a234 1
   120000430:	dca58060 	ld	a1,-32672\(a1\)
d239 1
a239 1
   120000444:	dca58060 	ld	a1,-32672\(a1\)
d244 1
a244 1
   120000458:	dc218060 	ld	at,-32672\(at\)
d249 1
a249 1
   12000046c:	dc218060 	ld	at,-32672\(at\)
d254 1
a254 1
   120000480:	dc218060 	ld	at,-32672\(at\)
d259 1
a259 1
   120000494:	dc218060 	ld	at,-32672\(at\)
d265 1
a265 1
   1200004ac:	dc218060 	ld	at,-32672\(at\)
d271 1
a271 1
   1200004c4:	dc218060 	ld	at,-32672\(at\)
d278 1
a278 1
   1200004e0:	dc218060 	ld	at,-32672\(at\)
d285 1
a285 1
   1200004fc:	dc218060 	ld	at,-32672\(at\)
d290 1
a290 1
   120000510:	df858020 	ld	a1,-32736\(gp\)
d292 1
a292 1
   120000518:	df858020 	ld	a1,-32736\(gp\)
d294 1
a294 1
   120000520:	df858028 	ld	a1,-32728\(gp\)
d296 1
a296 1
   120000528:	df858020 	ld	a1,-32736\(gp\)
d299 1
a299 1
   120000534:	df858020 	ld	a1,-32736\(gp\)
d302 1
a302 1
   120000540:	df858028 	ld	a1,-32728\(gp\)
d305 1
a305 1
   12000054c:	df858020 	ld	a1,-32736\(gp\)
d307 1
a307 1
   120000554:	df858020 	ld	a1,-32736\(gp\)
d309 1
a309 1
   12000055c:	df858020 	ld	a1,-32736\(gp\)
d312 1
a312 1
   120000568:	df858020 	ld	a1,-32736\(gp\)
d315 1
a315 1
   120000574:	df818020 	ld	at,-32736\(gp\)
d318 1
a318 1
   120000580:	df818020 	ld	at,-32736\(gp\)
d321 1
a321 1
   12000058c:	df818020 	ld	at,-32736\(gp\)
d325 1
a325 1
   12000059c:	df818020 	ld	at,-32736\(gp\)
d329 1
a329 1
   1200005ac:	df818020 	ld	at,-32736\(gp\)
d334 1
a334 1
   1200005c0:	df818020 	ld	at,-32736\(gp\)
d339 1
a339 1
   1200005d4:	df818020 	ld	at,-32736\(gp\)
d344 1
a344 1
   1200005e8:	df818020 	ld	at,-32736\(gp\)
d352 1
a352 1
   120000608:	df858030 	ld	a1,-32720\(gp\)
d357 1
a357 1
   12000061c:	df998030 	ld	t9,-32720\(gp\)
d364 1
a364 1
   120000638:	df998030 	ld	t9,-32720\(gp\)
d370 1
a370 1
   120000650:	dca58058 	ld	a1,-32680\(a1\)
d375 1
a375 1
   120000664:	dca58060 	ld	a1,-32672\(a1\)
d379 1
a379 1
   120000674:	df858020 	ld	a1,-32736\(gp\)
d383 1
a383 1
   120000684:	df858020 	ld	a1,-32736\(gp\)
d387 1
a387 1
   120000694:	df858028 	ld	a1,-32728\(gp\)
d391 1
a391 1
   1200006a4:	df858020 	ld	a1,-32736\(gp\)
d395 1
a395 1
   1200006b4:	df858020 	ld	a1,-32736\(gp\)
d399 1
a399 1
   1200006c4:	df818020 	ld	at,-32736\(gp\)
d405 1
d419 1
d427 1
a427 1
   1200107e4:	20010000 	.*
d429 1
a429 1
   1200107ec:	20030000 	.*
d431 5
a435 2
   1200107f4:	20000000 	.*
	\.\.\.
d437 1
a437 1
   12001080c:	200000e0 	.*
d440 1
a440 4
   120010818:	00000001 	.*
   12001081c:	2001071c 	.*
   120010820:	00000001 	.*
   120010824:	20010794 	.*
@


1.6
log
@bfd/
	* elfxx-mips.c (MIPS_ELF_GNU_GOT1_MASK): New macro.
	(_bfd_mips_elf_finish_dynamic_sections): Use it instead of 0x80000000.

ld/testsuite/
	* ld-mips-elf/elf-rel-got-n64-linux.d: Expect bit 63 rather than
	bit 31 of the second GOT entry to be set.
	* ld-mips-elf/elf-rel-got-n64.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64.d: Likewise.
@
text
@d188 1
a188 1
   12000037c:	0320f809 	jalr	t9
d192 1
a192 1
   12000038c:	0320f809 	jalr	t9
d361 1
a361 1
   120000630:	0320f809 	jalr	t9
d365 1
a365 1
   120000640:	0320f809 	jalr	t9
@


1.6.8.1
log
@ld/testsuite/
	* ld-mips-elf/elf-rel-got-n64-linux.d: Expect BALs.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
@
text
@d188 1
a188 1
   12000037c:	0411ff58 	bal	1200000e0 <fn>
d192 1
a192 1
   12000038c:	0411ff54 	bal	1200000e0 <fn>
d361 1
a361 1
   120000630:	0411002b 	bal	1200006e0 <fn2>
d365 1
a365 1
   120000640:	04110027 	bal	1200006e0 <fn2>
@


1.5
log
@ld/testsuite/
	* ld-mips-elf/elf-rel-got-n32.d: Adjust page gap from 0x100000
	to 0x10000.  Move .reginfo before .text and bump .text addresses
	by 0x10 to make room.  Move data segment down by 0x10 bytes to
	account for new size of text segment.
	* ld-mips-elf/elf-rel-xgot-n32.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Adjust page gap from
	0x100000 to 0x10000.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
@
text
@d421 2
a422 1
   1200107dc:	80000000 	.*
@


1.4
log
@	* ld-mips-elf/elf-rel-got-n32.d, ld-mips-elf/elf-rel-got-n64-linux.d,
	ld-mips-elf/elf-rel-got-n64.d, ld-mips-elf/elf-rel-xgot-n32.d,
	ld-mips-elf/elf-rel-xgot-n64-linux.d, ld-mips-elf/elf-rel-xgot-n64.d,
	ld-mips-elf/jalbal.d: Force big-endian.
	* ld-mips-elf/multi-got-1.d: Make more flexible.
	* ld-mips-elf/rel32-n32.d, ld-mips-elf/rel32-o32.d,
	ld-mips-elf/rel64.d: Update offsets.
@
text
@d17 1
a17 1
   1200000d4:	201087c0 	.*
d406 1
a406 1
00000001201006e0 <_fdata>:
d409 1
a409 1
000000012010071c <dg1>:
d412 1
a412 1
0000000120100758 <sp2>:
d415 1
a415 1
0000000120100794 <dg2>:
d419 1
a419 1
00000001201007d0 <_GLOBAL_OFFSET_TABLE_>:
d421 7
a427 7
   1201007dc:	80000000 	.*
   1201007e0:	00000001 	.*
   1201007e4:	20100000 	.*
   1201007e8:	00000001 	.*
   1201007ec:	20120000 	.*
   1201007f0:	00000001 	.*
   1201007f4:	20000000 	.*
d429 8
a436 8
   120100808:	00000001 	.*
   12010080c:	200000e0 	.*
   120100810:	00000001 	.*
   120100814:	200006e0 	.*
   120100818:	00000001 	.*
   12010081c:	2010071c 	.*
   120100820:	00000001 	.*
   120100824:	20100794 	.*
@


1.3
log
@bfd/
	* elfxx-mips.c (mips_elf_calculate_relocation): Use
	_bfd_elf_symbol_refs_local_p to decide whether to decay
	a GOT_PAGE/GOT_OFST pair to GOT_DISP/addend.
	(_bfd_mips_elf_check_relocs): Add a global GOT entry for GOT_PAGE
	relocs if the symbol wasn't defined by a regular object file.
	Don't check the symbol's dynindx.

ld/testsuite/
	* ld-mips/elf/elf-rel-xgot-{n32,n64-linux}.d: Update after 2004-02-02
	changes to the way large constants are added.
	* ld-mips/elf/elf-rel-got-{n32,n64-linux}.d: Likewise.  Adjust order
	of GOT entries after today's change to the handling of GOT_PAGE
	relocations.
@
text
@d2 1
a2 1
#as: -64 -KPIC -xgot
@


1.2
log
@	* ld-mips-elf/elf-rel-xgot-n32.d: Fix offset for "lw $5,dl1+34($5)".
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
@
text
@d31 2
a32 2
   120000108:	3c010002 	lui	at,0x2
   12000010c:	6421e240 	daddiu	at,at,-7616
d46 2
a47 2
   120000144:	3c010002 	lui	at,0x2
   120000148:	6421e240 	daddiu	at,at,-7616
d204 2
a205 2
   1200003bc:	3c010002 	lui	at,0x2
   1200003c0:	6421e240 	daddiu	at,at,-7616
d219 2
a220 2
   1200003f8:	3c010002 	lui	at,0x2
   1200003fc:	6421e240 	daddiu	at,at,-7616
d437 1
@


1.1
log
@	* ld-mips-elf/elf-rel-got-n64-linux.d: New file.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: New file.
	* ld-mips-elf/mips-elf.exp: Use the new files for Linux.
@
text
@d316 1
a316 1
   12000057c:	dc250794 	ld	a1,1940\(at\)
@

