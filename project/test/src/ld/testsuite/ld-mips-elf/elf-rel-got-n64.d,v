head	1.5;
access;
symbols
	binutils-2_24-branch:1.5.0.2
	binutils-2_24-branchpoint:1.5
	binutils-2_21_1:1.3
	binutils-2_23_2:1.3.18.1
	binutils-2_23_1:1.3.18.1
	binutils-2_23:1.3.18.1
	binutils-2_23-branch:1.3.0.18
	binutils-2_23-branchpoint:1.3
	binutils-2_22_branch:1.3.0.16
	binutils-2_22:1.3
	binutils-2_22-branch:1.3.0.14
	binutils-2_22-branchpoint:1.3
	binutils-2_21:1.3
	binutils-2_21-branch:1.3.0.12
	binutils-2_21-branchpoint:1.3
	binutils-2_20_1:1.3
	binutils-2_20:1.3
	binutils-arc-20081103-branch:1.3.0.10
	binutils-arc-20081103-branchpoint:1.3
	binutils-2_20-branch:1.3.0.8
	binutils-2_20-branchpoint:1.3
	dje-cgen-play1-branch:1.3.0.6
	dje-cgen-play1-branchpoint:1.3
	arc-20081103-branch:1.3.0.4
	arc-20081103-branchpoint:1.3
	binutils-2_19_1:1.3
	binutils-2_19:1.3
	binutils-2_19-branch:1.3.0.2
	binutils-2_19-branchpoint:1.3
	binutils-2_18:1.2
	binutils-2_18-branch:1.2.0.12
	binutils-2_18-branchpoint:1.2
	binutils-csl-coldfire-4_1-32:1.2
	binutils-csl-sourcerygxx-4_1-32:1.2
	binutils-csl-innovasic-fido-3_4_4-33:1.2
	binutils-csl-sourcerygxx-3_4_4-32:1.2
	binutils-csl-coldfire-4_1-30:1.2
	binutils-csl-sourcerygxx-4_1-30:1.2
	binutils-csl-coldfire-4_1-28:1.2
	binutils-csl-sourcerygxx-4_1-29:1.2
	binutils-csl-sourcerygxx-4_1-28:1.2
	binutils-csl-arm-2006q3-27:1.2
	binutils-csl-sourcerygxx-4_1-27:1.2
	binutils-csl-arm-2006q3-26:1.2
	binutils-csl-sourcerygxx-4_1-26:1.2
	binutils-csl-sourcerygxx-4_1-25:1.2
	binutils-csl-sourcerygxx-4_1-24:1.2
	binutils-csl-sourcerygxx-4_1-23:1.2
	binutils-csl-sourcerygxx-4_1-21:1.2
	binutils-csl-arm-2006q3-21:1.2
	binutils-csl-sourcerygxx-4_1-22:1.2
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.2
	binutils-csl-sourcerygxx-4_1-20:1.2
	binutils-csl-arm-2006q3-19:1.2
	binutils-csl-sourcerygxx-4_1-19:1.2
	binutils-csl-sourcerygxx-4_1-18:1.2
	binutils-csl-renesas-4_1-9:1.2
	binutils-csl-sourcerygxx-3_4_4-25:1.2
	binutils-csl-renesas-4_1-8:1.2
	binutils-csl-renesas-4_1-7:1.2
	binutils-csl-renesas-4_1-6:1.2
	binutils-csl-sourcerygxx-4_1-17:1.2
	binutils-csl-sourcerygxx-4_1-14:1.2
	binutils-csl-sourcerygxx-4_1-15:1.2
	binutils-csl-sourcerygxx-4_1-13:1.2
	binutils-2_17:1.2
	binutils-csl-sourcerygxx-4_1-12:1.2
	binutils-csl-sourcerygxx-3_4_4-21:1.2
	binutils-csl-wrs-linux-3_4_4-24:1.2
	binutils-csl-wrs-linux-3_4_4-23:1.2
	binutils-csl-sourcerygxx-4_1-9:1.2
	binutils-csl-sourcerygxx-4_1-8:1.2
	binutils-csl-sourcerygxx-4_1-7:1.2
	binutils-csl-arm-2006q1-6:1.2
	binutils-csl-sourcerygxx-4_1-6:1.2
	binutils-csl-wrs-linux-3_4_4-22:1.2
	binutils-csl-coldfire-4_1-11:1.2
	binutils-csl-sourcerygxx-3_4_4-19:1.2
	binutils-csl-coldfire-4_1-10:1.2
	binutils-csl-sourcerygxx-4_1-5:1.2
	binutils-csl-sourcerygxx-4_1-4:1.2
	binutils-csl-wrs-linux-3_4_4-21:1.2
	binutils-csl-morpho-4_1-4:1.2
	binutils-csl-sourcerygxx-3_4_4-17:1.2
	binutils-csl-wrs-linux-3_4_4-20:1.2
	binutils-2_17-branch:1.2.0.10
	binutils-2_17-branchpoint:1.2
	binutils-csl-2_17-branch:1.2.0.8
	binutils-csl-2_17-branchpoint:1.2
	binutils-csl-gxxpro-3_4-branch:1.2.0.6
	binutils-csl-gxxpro-3_4-branchpoint:1.2
	binutils-2_16_1:1.2
	binutils-csl-arm-2005q1b:1.2
	binutils-2_16:1.2
	binutils-csl-arm-2005q1a:1.2
	binutils-csl-arm-2005q1-branch:1.2.0.4
	binutils-csl-arm-2005q1-branchpoint:1.2
	binutils-2_16-branch:1.2.0.2
	binutils-2_16-branchpoint:1.2
	csl-arm-2004-q3d:1.1
	csl-arm-2004-q3:1.1
	binutils-2_15:1.1
	binutils-2_15-branchpoint:1.1
	csl-arm-2004-q1a:1.1
	csl-arm-2004-q1:1.1
	binutils-2_15-branch:1.1.0.8
	cagney_bfdfile-20040213-branch:1.1.0.6
	cagney_bfdfile-20040213-branchpoint:1.1
	cagney_bigcore-20040122-branch:1.1.0.4
	cagney_bigcore-20040122-branchpoint:1.1
	csl-arm-2003-q4:1.1
	binutils-2_14:1.1
	binutils-2_14-branch:1.1.0.2
	binutils-2_14-branchpoint:1.1
	binutils_latest_snapshot:1.5;
locks; strict;
comment	@# @;


1.5
date	2012.08.06.21.28.45;	author macro;	state Exp;
branches;
next	1.4;

1.4
date	2012.08.06.21.05.54;	author macro;	state Exp;
branches;
next	1.3;

1.3
date	2008.03.20.10.52.14;	author rsandifo;	state Exp;
branches
	1.3.18.1;
next	1.2;

1.2
date	2005.01.31.22.00.59;	author drow;	state Exp;
branches;
next	1.1;

1.1
date	2003.04.11.01.56.49;	author aoliva;	state Exp;
branches;
next	;

1.3.18.1
date	2012.09.04.14.38.02;	author gingold;	state Exp;
branches;
next	;


desc
@@


1.5
log
@	gas/testsuite/
	* gas/mips/mips.exp: Set has_newabi for all Linux targets.
	* gas/mips/cfi-n64-1.d: Adjust for targets that do not infer the
	ISA from the ABI.
	* gas/mips/elf-rel-got-n32.d: Likewise.
	* gas/mips/elf-rel-got-n64.d: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Likewise.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel18.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.
	* gas/mips/elf-rel28-n64.d: Likewise.
	* gas/mips/jal-newabi.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/macro-warn-1-n32.d: Likewise.
	* gas/mips/macro-warn-2-n32.d: Likewise.
	* gas/mips/n32-consec.d: Likewise.

	ld/testsuite/
	* ld-mips-elf/mips-elf.exp: Set has_newabi for all Linux targets.
	Adjust abi_asflags for targets that do not infer the ISA from the
	ABI.
	* ld-mips-elf/eh-frame1-n32.d: Adjust for targets that do not
	infer the ISA from the ABI.
	* ld-mips-elf/eh-frame1-n64.d: Likewise.
	* ld-mips-elf/eh-frame2-n32.d: Likewise.
	* ld-mips-elf/eh-frame2-n64.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32-embed.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-embed.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32-embed.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-embed.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64.d: Likewise.
	* ld-mips-elf/emit-relocs-1.d: Likewise.
	* ld-mips-elf/got-page-2.d: Likewise.
	* ld-mips-elf/no-shared-1-n32.d: Likewise.
	* ld-mips-elf/no-shared-1-n64.d: Likewise.
	* ld-mips-elf/rel32-n32.d: Likewise.
	* ld-mips-elf/rel64.d: Likewise.
	* ld-mips-elf/relax-jalr-n32-shared.d: Likewise.
	* ld-mips-elf/relax-jalr-n32.d: Likewise.
	* ld-mips-elf/relax-jalr-n64-shared.d: Likewise.
	* ld-mips-elf/relax-jalr-n64.d: Likewise.
	* ld-mips-elf/reloc-1-n32.d: Likewise.
	* ld-mips-elf/reloc-1-n64.d: Likewise.
	* ld-mips-elf/textrel-1.d: Likewise.
@
text
@#name: MIPS ELF got reloc n64
#as: -march=from-abi -EB -64 -KPIC
#source: ../../../gas/testsuite/gas/mips/elf-rel-got-n64.s
#ld:
#objdump: -D --show-raw-insn

.*: +file format elf64-.*mips.*

Disassembly of section \.MIPS\.options:

00000000100000e8 <\.MIPS\.options>:
    100000e8:	01280000 	.*
    100000ec:	00000000 	.*
    100000f0:	92020022 	.*
	\.\.\.
    1000010c:	10018600 	.*
Disassembly of section \.text:

0000000010000110 <fn>:
    10000110:	df858020 	ld	a1,-32736\(gp\)
    10000114:	df858020 	ld	a1,-32736\(gp\)
    10000118:	64a5000c 	daddiu	a1,a1,12
    1000011c:	df858020 	ld	a1,-32736\(gp\)
    10000120:	3c010001 	lui	at,0x1
    10000124:	3421e240 	ori	at,at,0xe240
    10000128:	00a1282d 	daddu	a1,a1,at
    1000012c:	df858020 	ld	a1,-32736\(gp\)
    10000130:	00b1282d 	daddu	a1,a1,s1
    10000134:	df858020 	ld	a1,-32736\(gp\)
    10000138:	64a5000c 	daddiu	a1,a1,12
    1000013c:	00b1282d 	daddu	a1,a1,s1
    10000140:	df858020 	ld	a1,-32736\(gp\)
    10000144:	3c010001 	lui	at,0x1
    10000148:	3421e240 	ori	at,at,0xe240
    1000014c:	00a1282d 	daddu	a1,a1,at
    10000150:	00b1282d 	daddu	a1,a1,s1
    10000154:	df858028 	ld	a1,-32728\(gp\)
    10000158:	dca5055c 	ld	a1,1372\(a1\)
    1000015c:	df858028 	ld	a1,-32728\(gp\)
    10000160:	dca50568 	ld	a1,1384\(a1\)
    10000164:	df858028 	ld	a1,-32728\(gp\)
    10000168:	00b1282d 	daddu	a1,a1,s1
    1000016c:	dca5055c 	ld	a1,1372\(a1\)
    10000170:	df858028 	ld	a1,-32728\(gp\)
    10000174:	00b1282d 	daddu	a1,a1,s1
    10000178:	dca50568 	ld	a1,1384\(a1\)
    1000017c:	df818028 	ld	at,-32728\(gp\)
    10000180:	0025082d 	daddu	at,at,a1
    10000184:	dc25057e 	ld	a1,1406\(at\)
    10000188:	df818028 	ld	at,-32728\(gp\)
    1000018c:	0025082d 	daddu	at,at,a1
    10000190:	fc250594 	sd	a1,1428\(at\)
    10000194:	df818020 	ld	at,-32736\(gp\)
    10000198:	88250000 	lwl	a1,0\(at\)
    1000019c:	98250003 	lwr	a1,3\(at\)
    100001a0:	df818020 	ld	at,-32736\(gp\)
    100001a4:	6421000c 	daddiu	at,at,12
    100001a8:	88250000 	lwl	a1,0\(at\)
    100001ac:	98250003 	lwr	a1,3\(at\)
    100001b0:	df818020 	ld	at,-32736\(gp\)
    100001b4:	0031082d 	daddu	at,at,s1
    100001b8:	88250000 	lwl	a1,0\(at\)
    100001bc:	98250003 	lwr	a1,3\(at\)
    100001c0:	df818020 	ld	at,-32736\(gp\)
    100001c4:	6421000c 	daddiu	at,at,12
    100001c8:	0031082d 	daddu	at,at,s1
    100001cc:	88250000 	lwl	a1,0\(at\)
    100001d0:	98250003 	lwr	a1,3\(at\)
    100001d4:	df818020 	ld	at,-32736\(gp\)
    100001d8:	64210022 	daddiu	at,at,34
    100001dc:	0025082d 	daddu	at,at,a1
    100001e0:	88250000 	lwl	a1,0\(at\)
    100001e4:	98250003 	lwr	a1,3\(at\)
    100001e8:	df818020 	ld	at,-32736\(gp\)
    100001ec:	64210038 	daddiu	at,at,56
    100001f0:	0025082d 	daddu	at,at,a1
    100001f4:	a8250000 	swl	a1,0\(at\)
    100001f8:	b8250003 	swr	a1,3\(at\)
    100001fc:	df858020 	ld	a1,-32736\(gp\)
    10000200:	df858030 	ld	a1,-32720\(gp\)
    10000204:	df858038 	ld	a1,-32712\(gp\)
    10000208:	df858020 	ld	a1,-32736\(gp\)
    1000020c:	00b1282d 	daddu	a1,a1,s1
    10000210:	df858030 	ld	a1,-32720\(gp\)
    10000214:	00b1282d 	daddu	a1,a1,s1
    10000218:	df858038 	ld	a1,-32712\(gp\)
    1000021c:	00b1282d 	daddu	a1,a1,s1
    10000220:	df858028 	ld	a1,-32728\(gp\)
    10000224:	dca5055c 	ld	a1,1372\(a1\)
    10000228:	df858028 	ld	a1,-32728\(gp\)
    1000022c:	dca50568 	ld	a1,1384\(a1\)
    10000230:	df858028 	ld	a1,-32728\(gp\)
    10000234:	00b1282d 	daddu	a1,a1,s1
    10000238:	dca5055c 	ld	a1,1372\(a1\)
    1000023c:	df858028 	ld	a1,-32728\(gp\)
    10000240:	00b1282d 	daddu	a1,a1,s1
    10000244:	dca50568 	ld	a1,1384\(a1\)
    10000248:	df818028 	ld	at,-32728\(gp\)
    1000024c:	0025082d 	daddu	at,at,a1
    10000250:	dc25057e 	ld	a1,1406\(at\)
    10000254:	df818028 	ld	at,-32728\(gp\)
    10000258:	0025082d 	daddu	at,at,a1
    1000025c:	fc250594 	sd	a1,1428\(at\)
    10000260:	df818020 	ld	at,-32736\(gp\)
    10000264:	88250000 	lwl	a1,0\(at\)
    10000268:	98250003 	lwr	a1,3\(at\)
    1000026c:	df818030 	ld	at,-32720\(gp\)
    10000270:	88250000 	lwl	a1,0\(at\)
    10000274:	98250003 	lwr	a1,3\(at\)
    10000278:	df818020 	ld	at,-32736\(gp\)
    1000027c:	0031082d 	daddu	at,at,s1
    10000280:	88250000 	lwl	a1,0\(at\)
    10000284:	98250003 	lwr	a1,3\(at\)
    10000288:	df818030 	ld	at,-32720\(gp\)
    1000028c:	0031082d 	daddu	at,at,s1
    10000290:	88250000 	lwl	a1,0\(at\)
    10000294:	98250003 	lwr	a1,3\(at\)
    10000298:	df818040 	ld	at,-32704\(gp\)
    1000029c:	0025082d 	daddu	at,at,a1
    100002a0:	88250000 	lwl	a1,0\(at\)
    100002a4:	98250003 	lwr	a1,3\(at\)
    100002a8:	df818048 	ld	at,-32696\(gp\)
    100002ac:	0025082d 	daddu	at,at,a1
    100002b0:	a8250000 	swl	a1,0\(at\)
    100002b4:	b8250003 	swr	a1,3\(at\)
    100002b8:	df858050 	ld	a1,-32688\(gp\)
    100002bc:	df858050 	ld	a1,-32688\(gp\)
    100002c0:	df998050 	ld	t9,-32688\(gp\)
    100002c4:	df998050 	ld	t9,-32688\(gp\)
    100002c8:	df998050 	ld	t9,-32688\(gp\)
    100002cc:	0411ff90 	bal	10000110 <fn>
    100002d0:	00000000 	nop
    100002d4:	df998050 	ld	t9,-32688\(gp\)
    100002d8:	0411ff8d 	bal	10000110 <fn>
    100002dc:	00000000 	nop
    100002e0:	df858058 	ld	a1,-32680\(gp\)
    100002e4:	df858058 	ld	a1,-32680\(gp\)
    100002e8:	64a5000c 	daddiu	a1,a1,12
    100002ec:	df858058 	ld	a1,-32680\(gp\)
    100002f0:	3c010001 	lui	at,0x1
    100002f4:	3421e240 	ori	at,at,0xe240
    100002f8:	00a1282d 	daddu	a1,a1,at
    100002fc:	df858058 	ld	a1,-32680\(gp\)
    10000300:	00b1282d 	daddu	a1,a1,s1
    10000304:	df858058 	ld	a1,-32680\(gp\)
    10000308:	64a5000c 	daddiu	a1,a1,12
    1000030c:	00b1282d 	daddu	a1,a1,s1
    10000310:	df858058 	ld	a1,-32680\(gp\)
    10000314:	3c010001 	lui	at,0x1
    10000318:	3421e240 	ori	at,at,0xe240
    1000031c:	00a1282d 	daddu	a1,a1,at
    10000320:	00b1282d 	daddu	a1,a1,s1
    10000324:	df858028 	ld	a1,-32728\(gp\)
    10000328:	dca505d4 	ld	a1,1492\(a1\)
    1000032c:	df858028 	ld	a1,-32728\(gp\)
    10000330:	dca505e0 	ld	a1,1504\(a1\)
    10000334:	df858028 	ld	a1,-32728\(gp\)
    10000338:	00b1282d 	daddu	a1,a1,s1
    1000033c:	dca505d4 	ld	a1,1492\(a1\)
    10000340:	df858028 	ld	a1,-32728\(gp\)
    10000344:	00b1282d 	daddu	a1,a1,s1
    10000348:	dca505e0 	ld	a1,1504\(a1\)
    1000034c:	df818028 	ld	at,-32728\(gp\)
    10000350:	0025082d 	daddu	at,at,a1
    10000354:	dc2505f6 	ld	a1,1526\(at\)
    10000358:	df818028 	ld	at,-32728\(gp\)
    1000035c:	0025082d 	daddu	at,at,a1
    10000360:	fc25060c 	sd	a1,1548\(at\)
    10000364:	df818058 	ld	at,-32680\(gp\)
    10000368:	88250000 	lwl	a1,0\(at\)
    1000036c:	98250003 	lwr	a1,3\(at\)
    10000370:	df818058 	ld	at,-32680\(gp\)
    10000374:	6421000c 	daddiu	at,at,12
    10000378:	88250000 	lwl	a1,0\(at\)
    1000037c:	98250003 	lwr	a1,3\(at\)
    10000380:	df818058 	ld	at,-32680\(gp\)
    10000384:	0031082d 	daddu	at,at,s1
    10000388:	88250000 	lwl	a1,0\(at\)
    1000038c:	98250003 	lwr	a1,3\(at\)
    10000390:	df818058 	ld	at,-32680\(gp\)
    10000394:	6421000c 	daddiu	at,at,12
    10000398:	0031082d 	daddu	at,at,s1
    1000039c:	88250000 	lwl	a1,0\(at\)
    100003a0:	98250003 	lwr	a1,3\(at\)
    100003a4:	df818058 	ld	at,-32680\(gp\)
    100003a8:	64210022 	daddiu	at,at,34
    100003ac:	0025082d 	daddu	at,at,a1
    100003b0:	88250000 	lwl	a1,0\(at\)
    100003b4:	98250003 	lwr	a1,3\(at\)
    100003b8:	df818058 	ld	at,-32680\(gp\)
    100003bc:	64210038 	daddiu	at,at,56
    100003c0:	0025082d 	daddu	at,at,a1
    100003c4:	a8250000 	swl	a1,0\(at\)
    100003c8:	b8250003 	swr	a1,3\(at\)
    100003cc:	df858058 	ld	a1,-32680\(gp\)
    100003d0:	df858060 	ld	a1,-32672\(gp\)
    100003d4:	df858068 	ld	a1,-32664\(gp\)
    100003d8:	df858058 	ld	a1,-32680\(gp\)
    100003dc:	00b1282d 	daddu	a1,a1,s1
    100003e0:	df858060 	ld	a1,-32672\(gp\)
    100003e4:	00b1282d 	daddu	a1,a1,s1
    100003e8:	df858068 	ld	a1,-32664\(gp\)
    100003ec:	00b1282d 	daddu	a1,a1,s1
    100003f0:	df858028 	ld	a1,-32728\(gp\)
    100003f4:	dca505d4 	ld	a1,1492\(a1\)
    100003f8:	df858028 	ld	a1,-32728\(gp\)
    100003fc:	dca505e0 	ld	a1,1504\(a1\)
    10000400:	df858028 	ld	a1,-32728\(gp\)
    10000404:	00b1282d 	daddu	a1,a1,s1
    10000408:	dca505d4 	ld	a1,1492\(a1\)
    1000040c:	df858028 	ld	a1,-32728\(gp\)
    10000410:	00b1282d 	daddu	a1,a1,s1
    10000414:	dca505e0 	ld	a1,1504\(a1\)
    10000418:	df818028 	ld	at,-32728\(gp\)
    1000041c:	0025082d 	daddu	at,at,a1
    10000420:	dc2505f6 	ld	a1,1526\(at\)
    10000424:	df818028 	ld	at,-32728\(gp\)
    10000428:	0025082d 	daddu	at,at,a1
    1000042c:	fc25060c 	sd	a1,1548\(at\)
    10000430:	df818058 	ld	at,-32680\(gp\)
    10000434:	88250000 	lwl	a1,0\(at\)
    10000438:	98250003 	lwr	a1,3\(at\)
    1000043c:	df818060 	ld	at,-32672\(gp\)
    10000440:	88250000 	lwl	a1,0\(at\)
    10000444:	98250003 	lwr	a1,3\(at\)
    10000448:	df818058 	ld	at,-32680\(gp\)
    1000044c:	0031082d 	daddu	at,at,s1
    10000450:	88250000 	lwl	a1,0\(at\)
    10000454:	98250003 	lwr	a1,3\(at\)
    10000458:	df818060 	ld	at,-32672\(gp\)
    1000045c:	0031082d 	daddu	at,at,s1
    10000460:	88250000 	lwl	a1,0\(at\)
    10000464:	98250003 	lwr	a1,3\(at\)
    10000468:	df818070 	ld	at,-32656\(gp\)
    1000046c:	0025082d 	daddu	at,at,a1
    10000470:	88250000 	lwl	a1,0\(at\)
    10000474:	98250003 	lwr	a1,3\(at\)
    10000478:	df818078 	ld	at,-32648\(gp\)
    1000047c:	0025082d 	daddu	at,at,a1
    10000480:	a8250000 	swl	a1,0\(at\)
    10000484:	b8250003 	swr	a1,3\(at\)
    10000488:	df858080 	ld	a1,-32640\(gp\)
    1000048c:	df858080 	ld	a1,-32640\(gp\)
    10000490:	df998080 	ld	t9,-32640\(gp\)
    10000494:	df998080 	ld	t9,-32640\(gp\)
    10000498:	df998080 	ld	t9,-32640\(gp\)
    1000049c:	0411001d 	bal	10000514 <fn2>
    100004a0:	00000000 	nop
    100004a4:	df998080 	ld	t9,-32640\(gp\)
    100004a8:	0411001a 	bal	10000514 <fn2>
    100004ac:	00000000 	nop
    100004b0:	1000ff17 	b	10000110 <fn>
    100004b4:	df858020 	ld	a1,-32736\(gp\)
    100004b8:	df858028 	ld	a1,-32728\(gp\)
    100004bc:	10000015 	b	10000514 <fn2>
    100004c0:	dca505d4 	ld	a1,1492\(a1\)
    100004c4:	1000ff12 	b	10000110 <fn>
    100004c8:	df858020 	ld	a1,-32736\(gp\)
    100004cc:	df858060 	ld	a1,-32672\(gp\)
    100004d0:	10000010 	b	10000514 <fn2>
    100004d4:	00000000 	nop
    100004d8:	df858038 	ld	a1,-32712\(gp\)
    100004dc:	1000ff0c 	b	10000110 <fn>
    100004e0:	00000000 	nop
    100004e4:	df858028 	ld	a1,-32728\(gp\)
    100004e8:	1000000a 	b	10000514 <fn2>
    100004ec:	dca505d4 	ld	a1,1492\(a1\)
    100004f0:	df858028 	ld	a1,-32728\(gp\)
    100004f4:	1000ff06 	b	10000110 <fn>
    100004f8:	dca50568 	ld	a1,1384\(a1\)
    100004fc:	df818028 	ld	at,-32728\(gp\)
    10000500:	0025082d 	daddu	at,at,a1
    10000504:	10000003 	b	10000514 <fn2>
    10000508:	dc2505f6 	ld	a1,1526\(at\)
	\.\.\.

0000000010000514 <fn2>:
	\.\.\.
Disassembly of section \.data:

0000000010010520 <_fdata>:
	\.\.\.

000000001001055c <dg1>:
	\.\.\.

0000000010010598 <sp2>:
	\.\.\.

00000000100105d4 <dg2>:
	\.\.\.
Disassembly of section \.got:

0000000010010610 <_GLOBAL_OFFSET_TABLE_>:
	\.\.\.
    10010618:	80000000 	.*
	\.\.\.
    10010624:	1001055c 	.*
    10010628:	00000000 	.*
    1001062c:	10010000 	.*
    10010630:	00000000 	.*
    10010634:	10010568 	.*
    10010638:	00000000 	.*
    1001063c:	1002e79c 	.*
    10010640:	00000000 	.*
    10010644:	1001057e 	.*
    10010648:	00000000 	.*
    1001064c:	10010594 	.*
    10010650:	00000000 	.*
    10010654:	10000110 	.*
    10010658:	00000000 	.*
    1001065c:	100105d4 	.*
    10010660:	00000000 	.*
    10010664:	100105e0 	.*
    10010668:	00000000 	.*
    1001066c:	1002e814 	.*
    10010670:	00000000 	.*
    10010674:	100105f6 	.*
    10010678:	00000000 	.*
    1001067c:	1001060c 	.*
    10010680:	00000000 	.*
    10010684:	10000514 	.*
    10010688:	00000000 	.*
	\.\.\.
@


1.4
log
@	gas/testsuite/
	* gas/mips/mips.exp: Set has_newabi for mips*-sde-elf* too.
	* gas/mips/elf-rel-got-n32.s: Adjust padding.
	* gas/mips/elf-rel-got-n64.s: Likewise.
	* gas/mips/elf-rel23.s: Likewise.
	* gas/mips/elf-rel28.s: Likewise.
	* gas/mips/n32-consec.s: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Adjust output expected.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel23.d: Likewise.
	* gas/mips/elf-rel23a.d: Likewise.
	* gas/mips/elf-rel23b.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.

	ld/testsuite/
	* lib/ld-lib.exp (run_dump_test): Implement the EXTRA_OPTIONS
	argument and the "dump" keyword.
	* ld-mips-elf/emit-relocs-1a.s: Make section alignment uniform
	across targets.
	* ld-mips-elf/emit-relocs-1b.s: Likewise.
	* ld-mips-elf/jalbal.s: Adjust padding.
	* ld-mips-elf/elf-rel-got-n32-embed.d: New test.
	* ld-mips-elf/elf-rel-got-n64-embed.d: New test.
	* ld-mips-elf/elf-rel-xgot-n32-embed.d: New test.
	* ld-mips-elf/elf-rel-xgot-n64-embed.d: New test.
	* ld-mips-elf/elf-rel-got-n32.d: Remove -melf32btsmipn32.
	* ld-mips-elf/elf-rel-got-n64.d: Remove -melf64btsmip.  Adjust
	output.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Remove -melf64btsmip.
	* ld-mips-elf/elf-rel-xgot-n32.d: Remove -melf32btsmipn32.
	Adjust output.
	* ld-mips-elf/elf-rel-xgot-n64.d: Remove -melf64btsmip.  Adjust
	output.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/reloc-1-n64.d: Remove -melf64btsmip.
	* ld-mips-elf/mips-elf.exp: Set has_newabi for mips*-sde-elf*
	too.  Move tool flags from o32_as_flags and o32_ld_flags
	variables into abi_asflags and abi_ldflags arrays.  Adjust test
	cases run to use them.  Run the new tests.
@
text
@d2 1
a2 1
#as: -EB -64 -KPIC
@


1.3
log
@bfd/
	* elfxx-mips.c (MIPS_ELF_GNU_GOT1_MASK): New macro.
	(_bfd_mips_elf_finish_dynamic_sections): Use it instead of 0x80000000.

ld/testsuite/
	* ld-mips-elf/elf-rel-got-n64-linux.d: Expect bit 63 rather than
	bit 31 of the second GOT entry to be set.
	* ld-mips-elf/elf-rel-got-n64.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64.d: Likewise.
@
text
@d4 1
a4 1
#ld: -melf64btsmip
d11 4
a14 4
00000000100000b0 <\.MIPS\.options>:
    100000b0:	01280000 	.*
    100000b4:	00000000 	.*
    100000b8:	92020022 	.*
d16 1
a16 1
    100000d4:	101085d0 	.*
d19 89
a107 101
00000000100000e0 <fn>:
    100000e0:	df8580b8 	ld	a1,-32584\(gp\)
    100000e4:	df8580b8 	ld	a1,-32584\(gp\)
    100000e8:	64a5000c 	daddiu	a1,a1,12
    100000ec:	df8580b8 	ld	a1,-32584\(gp\)
    100000f0:	3c010002 	lui	at,0x2
    100000f4:	6421e240 	daddiu	at,at,-7616
    100000f8:	00a1282d 	daddu	a1,a1,at
    100000fc:	df8580b8 	ld	a1,-32584\(gp\)
    10000100:	00b1282d 	daddu	a1,a1,s1
    10000104:	df8580b8 	ld	a1,-32584\(gp\)
    10000108:	64a5000c 	daddiu	a1,a1,12
    1000010c:	00b1282d 	daddu	a1,a1,s1
    10000110:	df8580b8 	ld	a1,-32584\(gp\)
    10000114:	3c010002 	lui	at,0x2
    10000118:	6421e240 	daddiu	at,at,-7616
    1000011c:	00a1282d 	daddu	a1,a1,at
    10000120:	00b1282d 	daddu	a1,a1,s1
    10000124:	df8580b8 	ld	a1,-32584\(gp\)
    10000128:	dca50000 	ld	a1,0\(a1\)
    1000012c:	df8580b8 	ld	a1,-32584\(gp\)
    10000130:	dca5000c 	ld	a1,12\(a1\)
    10000134:	df8580b8 	ld	a1,-32584\(gp\)
    10000138:	00b1282d 	daddu	a1,a1,s1
    1000013c:	dca50000 	ld	a1,0\(a1\)
    10000140:	df8580b8 	ld	a1,-32584\(gp\)
    10000144:	00b1282d 	daddu	a1,a1,s1
    10000148:	dca5000c 	ld	a1,12\(a1\)
    1000014c:	df8180b8 	ld	at,-32584\(gp\)
    10000150:	0025082d 	daddu	at,at,a1
    10000154:	dc250022 	ld	a1,34\(at\)
    10000158:	df8180b8 	ld	at,-32584\(gp\)
    1000015c:	0025082d 	daddu	at,at,a1
    10000160:	fc250038 	sd	a1,56\(at\)
    10000164:	df8180b8 	ld	at,-32584\(gp\)
    10000168:	88250000 	lwl	a1,0\(at\)
    1000016c:	98250003 	lwr	a1,3\(at\)
    10000170:	df8180b8 	ld	at,-32584\(gp\)
    10000174:	6421000c 	daddiu	at,at,12
    10000178:	88250000 	lwl	a1,0\(at\)
    1000017c:	98250003 	lwr	a1,3\(at\)
    10000180:	df8180b8 	ld	at,-32584\(gp\)
    10000184:	0031082d 	daddu	at,at,s1
    10000188:	88250000 	lwl	a1,0\(at\)
    1000018c:	98250003 	lwr	a1,3\(at\)
    10000190:	df8180b8 	ld	at,-32584\(gp\)
    10000194:	6421000c 	daddiu	at,at,12
    10000198:	0031082d 	daddu	at,at,s1
    1000019c:	88250000 	lwl	a1,0\(at\)
    100001a0:	98250003 	lwr	a1,3\(at\)
    100001a4:	df8180b8 	ld	at,-32584\(gp\)
    100001a8:	64210022 	daddiu	at,at,34
    100001ac:	0025082d 	daddu	at,at,a1
    100001b0:	88250000 	lwl	a1,0\(at\)
    100001b4:	98250003 	lwr	a1,3\(at\)
    100001b8:	df8180b8 	ld	at,-32584\(gp\)
    100001bc:	64210038 	daddiu	at,at,56
    100001c0:	0025082d 	daddu	at,at,a1
    100001c4:	a8250000 	swl	a1,0\(at\)
    100001c8:	b8250003 	swr	a1,3\(at\)
    100001cc:	df858020 	ld	a1,-32736\(gp\)
    100001d0:	df858028 	ld	a1,-32728\(gp\)
    100001d4:	df858030 	ld	a1,-32720\(gp\)
    100001d8:	df858020 	ld	a1,-32736\(gp\)
    100001dc:	00b1282d 	daddu	a1,a1,s1
    100001e0:	df858028 	ld	a1,-32728\(gp\)
    100001e4:	00b1282d 	daddu	a1,a1,s1
    100001e8:	df858030 	ld	a1,-32720\(gp\)
    100001ec:	00b1282d 	daddu	a1,a1,s1
    100001f0:	df858038 	ld	a1,-32712\(gp\)
    100001f4:	dca5052c 	ld	a1,1324\(a1\)
    100001f8:	df858038 	ld	a1,-32712\(gp\)
    100001fc:	dca50538 	ld	a1,1336\(a1\)
    10000200:	df858038 	ld	a1,-32712\(gp\)
    10000204:	00b1282d 	daddu	a1,a1,s1
    10000208:	dca5052c 	ld	a1,1324\(a1\)
    1000020c:	df858038 	ld	a1,-32712\(gp\)
    10000210:	00b1282d 	daddu	a1,a1,s1
    10000214:	dca50538 	ld	a1,1336\(a1\)
    10000218:	df818038 	ld	at,-32712\(gp\)
    1000021c:	0025082d 	daddu	at,at,a1
    10000220:	dc25054e 	ld	a1,1358\(at\)
    10000224:	df818038 	ld	at,-32712\(gp\)
    10000228:	0025082d 	daddu	at,at,a1
    1000022c:	fc250564 	sd	a1,1380\(at\)
    10000230:	df818020 	ld	at,-32736\(gp\)
    10000234:	88250000 	lwl	a1,0\(at\)
    10000238:	98250003 	lwr	a1,3\(at\)
    1000023c:	df818028 	ld	at,-32728\(gp\)
    10000240:	88250000 	lwl	a1,0\(at\)
    10000244:	98250003 	lwr	a1,3\(at\)
    10000248:	df818020 	ld	at,-32736\(gp\)
    1000024c:	0031082d 	daddu	at,at,s1
    10000250:	88250000 	lwl	a1,0\(at\)
    10000254:	98250003 	lwr	a1,3\(at\)
    10000258:	df818028 	ld	at,-32728\(gp\)
    1000025c:	0031082d 	daddu	at,at,s1
    10000260:	88250000 	lwl	a1,0\(at\)
    10000264:	98250003 	lwr	a1,3\(at\)
    10000268:	df818040 	ld	at,-32704\(gp\)
    1000026c:	0025082d 	daddu	at,at,a1
d110 114
a223 114
    10000278:	df818048 	ld	at,-32696\(gp\)
    1000027c:	0025082d 	daddu	at,at,a1
    10000280:	a8250000 	swl	a1,0\(at\)
    10000284:	b8250003 	swr	a1,3\(at\)
    10000288:	df8580a8 	ld	a1,-32600\(gp\)
    1000028c:	df858050 	ld	a1,-32688\(gp\)
    10000290:	df9980a8 	ld	t9,-32600\(gp\)
    10000294:	df998050 	ld	t9,-32688\(gp\)
    10000298:	df9980a8 	ld	t9,-32600\(gp\)
    1000029c:	0320f809 	jalr	t9
    100002a0:	00000000 	nop
    100002a4:	df998050 	ld	t9,-32688\(gp\)
    100002a8:	0320f809 	jalr	t9
    100002ac:	00000000 	nop
    100002b0:	df8580c0 	ld	a1,-32576\(gp\)
    100002b4:	df8580c0 	ld	a1,-32576\(gp\)
    100002b8:	64a5000c 	daddiu	a1,a1,12
    100002bc:	df8580c0 	ld	a1,-32576\(gp\)
    100002c0:	3c010002 	lui	at,0x2
    100002c4:	6421e240 	daddiu	at,at,-7616
    100002c8:	00a1282d 	daddu	a1,a1,at
    100002cc:	df8580c0 	ld	a1,-32576\(gp\)
    100002d0:	00b1282d 	daddu	a1,a1,s1
    100002d4:	df8580c0 	ld	a1,-32576\(gp\)
    100002d8:	64a5000c 	daddiu	a1,a1,12
    100002dc:	00b1282d 	daddu	a1,a1,s1
    100002e0:	df8580c0 	ld	a1,-32576\(gp\)
    100002e4:	3c010002 	lui	at,0x2
    100002e8:	6421e240 	daddiu	at,at,-7616
    100002ec:	00a1282d 	daddu	a1,a1,at
    100002f0:	00b1282d 	daddu	a1,a1,s1
    100002f4:	df8580c0 	ld	a1,-32576\(gp\)
    100002f8:	dca50000 	ld	a1,0\(a1\)
    100002fc:	df8580c0 	ld	a1,-32576\(gp\)
    10000300:	dca5000c 	ld	a1,12\(a1\)
    10000304:	df8580c0 	ld	a1,-32576\(gp\)
    10000308:	00b1282d 	daddu	a1,a1,s1
    1000030c:	dca50000 	ld	a1,0\(a1\)
    10000310:	df8580c0 	ld	a1,-32576\(gp\)
    10000314:	00b1282d 	daddu	a1,a1,s1
    10000318:	dca5000c 	ld	a1,12\(a1\)
    1000031c:	df8180c0 	ld	at,-32576\(gp\)
    10000320:	0025082d 	daddu	at,at,a1
    10000324:	dc250022 	ld	a1,34\(at\)
    10000328:	df8180c0 	ld	at,-32576\(gp\)
    1000032c:	0025082d 	daddu	at,at,a1
    10000330:	fc250038 	sd	a1,56\(at\)
    10000334:	df8180c0 	ld	at,-32576\(gp\)
    10000338:	88250000 	lwl	a1,0\(at\)
    1000033c:	98250003 	lwr	a1,3\(at\)
    10000340:	df8180c0 	ld	at,-32576\(gp\)
    10000344:	6421000c 	daddiu	at,at,12
    10000348:	88250000 	lwl	a1,0\(at\)
    1000034c:	98250003 	lwr	a1,3\(at\)
    10000350:	df8180c0 	ld	at,-32576\(gp\)
    10000354:	0031082d 	daddu	at,at,s1
    10000358:	88250000 	lwl	a1,0\(at\)
    1000035c:	98250003 	lwr	a1,3\(at\)
    10000360:	df8180c0 	ld	at,-32576\(gp\)
    10000364:	6421000c 	daddiu	at,at,12
    10000368:	0031082d 	daddu	at,at,s1
    1000036c:	88250000 	lwl	a1,0\(at\)
    10000370:	98250003 	lwr	a1,3\(at\)
    10000374:	df8180c0 	ld	at,-32576\(gp\)
    10000378:	64210022 	daddiu	at,at,34
    1000037c:	0025082d 	daddu	at,at,a1
    10000380:	88250000 	lwl	a1,0\(at\)
    10000384:	98250003 	lwr	a1,3\(at\)
    10000388:	df8180c0 	ld	at,-32576\(gp\)
    1000038c:	64210038 	daddiu	at,at,56
    10000390:	0025082d 	daddu	at,at,a1
    10000394:	a8250000 	swl	a1,0\(at\)
    10000398:	b8250003 	swr	a1,3\(at\)
    1000039c:	df858058 	ld	a1,-32680\(gp\)
    100003a0:	df858060 	ld	a1,-32672\(gp\)
    100003a4:	df858068 	ld	a1,-32664\(gp\)
    100003a8:	df858058 	ld	a1,-32680\(gp\)
    100003ac:	00b1282d 	daddu	a1,a1,s1
    100003b0:	df858060 	ld	a1,-32672\(gp\)
    100003b4:	00b1282d 	daddu	a1,a1,s1
    100003b8:	df858068 	ld	a1,-32664\(gp\)
    100003bc:	00b1282d 	daddu	a1,a1,s1
    100003c0:	df858038 	ld	a1,-32712\(gp\)
    100003c4:	dca505a4 	ld	a1,1444\(a1\)
    100003c8:	df858038 	ld	a1,-32712\(gp\)
    100003cc:	dca505b0 	ld	a1,1456\(a1\)
    100003d0:	df858038 	ld	a1,-32712\(gp\)
    100003d4:	00b1282d 	daddu	a1,a1,s1
    100003d8:	dca505a4 	ld	a1,1444\(a1\)
    100003dc:	df858038 	ld	a1,-32712\(gp\)
    100003e0:	00b1282d 	daddu	a1,a1,s1
    100003e4:	dca505b0 	ld	a1,1456\(a1\)
    100003e8:	df818038 	ld	at,-32712\(gp\)
    100003ec:	0025082d 	daddu	at,at,a1
    100003f0:	dc2505c6 	ld	a1,1478\(at\)
    100003f4:	df818038 	ld	at,-32712\(gp\)
    100003f8:	0025082d 	daddu	at,at,a1
    100003fc:	fc2505dc 	sd	a1,1500\(at\)
    10000400:	df818058 	ld	at,-32680\(gp\)
    10000404:	88250000 	lwl	a1,0\(at\)
    10000408:	98250003 	lwr	a1,3\(at\)
    1000040c:	df818060 	ld	at,-32672\(gp\)
    10000410:	88250000 	lwl	a1,0\(at\)
    10000414:	98250003 	lwr	a1,3\(at\)
    10000418:	df818058 	ld	at,-32680\(gp\)
    1000041c:	0031082d 	daddu	at,at,s1
    10000420:	88250000 	lwl	a1,0\(at\)
    10000424:	98250003 	lwr	a1,3\(at\)
    10000428:	df818060 	ld	at,-32672\(gp\)
    1000042c:	0031082d 	daddu	at,at,s1
    10000430:	88250000 	lwl	a1,0\(at\)
    10000434:	98250003 	lwr	a1,3\(at\)
    10000438:	df818070 	ld	at,-32656\(gp\)
    1000043c:	0025082d 	daddu	at,at,a1
d226 49
a274 37
    10000448:	df818078 	ld	at,-32648\(gp\)
    1000044c:	0025082d 	daddu	at,at,a1
    10000450:	a8250000 	swl	a1,0\(at\)
    10000454:	b8250003 	swr	a1,3\(at\)
    10000458:	df8580b0 	ld	a1,-32592\(gp\)
    1000045c:	df858080 	ld	a1,-32640\(gp\)
    10000460:	df9980b0 	ld	t9,-32592\(gp\)
    10000464:	df998080 	ld	t9,-32640\(gp\)
    10000468:	df9980b0 	ld	t9,-32592\(gp\)
    1000046c:	0320f809 	jalr	t9
    10000470:	00000000 	nop
    10000474:	df998080 	ld	t9,-32640\(gp\)
    10000478:	0320f809 	jalr	t9
    1000047c:	00000000 	nop
    10000480:	1000ff17 	b	100000e0 <fn>
    10000484:	df8580b8 	ld	a1,-32584\(gp\)
    10000488:	df8580c0 	ld	a1,-32576\(gp\)
    1000048c:	10000015 	b	100004e4 <fn2>
    10000490:	dca50000 	ld	a1,0\(a1\)
    10000494:	1000ff12 	b	100000e0 <fn>
    10000498:	df858020 	ld	a1,-32736\(gp\)
    1000049c:	df858060 	ld	a1,-32672\(gp\)
    100004a0:	10000010 	b	100004e4 <fn2>
    100004a4:	00000000 	nop
    100004a8:	df858030 	ld	a1,-32720\(gp\)
    100004ac:	1000ff0c 	b	100000e0 <fn>
    100004b0:	00000000 	nop
    100004b4:	df858038 	ld	a1,-32712\(gp\)
    100004b8:	1000000a 	b	100004e4 <fn2>
    100004bc:	dca505a4 	ld	a1,1444\(a1\)
    100004c0:	df858038 	ld	a1,-32712\(gp\)
    100004c4:	1000ff06 	b	100000e0 <fn>
    100004c8:	dca50538 	ld	a1,1336\(a1\)
    100004cc:	df818038 	ld	at,-32712\(gp\)
    100004d0:	0025082d 	daddu	at,at,a1
    100004d4:	10000003 	b	100004e4 <fn2>
    100004d8:	dc2505c6 	ld	a1,1478\(at\)
d277 1
a277 1
00000000100004e4 <fn2>:
d281 1
a281 1
00000000101004f0 <_fdata>:
d284 1
a284 1
000000001010052c <dg1>:
d287 1
a287 1
0000000010100568 <sp2>:
d290 1
a290 1
00000000101005a4 <dg2>:
d294 1
a294 1
00000000101005e0 <_GLOBAL_OFFSET_TABLE_>:
d296 28
a323 29
    101005e8:	80000000 	.*
    101005ec:	00000000 	.*
    101005f0:	00000000 	.*
    101005f4:	1010052c 	.*
    101005f8:	00000000 	.*
    101005fc:	10100538 	.*
    10100600:	00000000 	.*
    10100604:	1011e76c 	.*
    10100608:	00000000 	.*
    1010060c:	10100000 	.*
    10100610:	00000000 	.*
    10100614:	1010054e 	.*
    10100618:	00000000 	.*
    1010061c:	10100564 	.*
    10100620:	00000000 	.*
    10100624:	100000e0 	.*
    10100628:	00000000 	.*
    1010062c:	101005a4 	.*
    10100630:	00000000 	.*
    10100634:	101005b0 	.*
    10100638:	00000000 	.*
    1010063c:	1011e7e4 	.*
    10100640:	00000000 	.*
    10100644:	101005c6 	.*
    10100648:	00000000 	.*
    1010064c:	101005dc 	.*
    10100650:	00000000 	.*
    10100654:	100004e4 	.*
    10100658:	00000000 	.*
a324 7
    1010067c:	100000e0 	.*
    10100680:	00000000 	.*
    10100684:	100004e4 	.*
    10100688:	00000000 	.*
    1010068c:	1010052c 	.*
    10100690:	00000000 	.*
    10100694:	101005a4 	.*
@


1.3.18.1
log
@bfd/
2012-08-09  Maciej W. Rozycki  <macro@@codesourcery.com>

	* elfxx-mips.c (LA25_LUI_MICROMIPS_1, LA25_LUI_MICROMIPS_2):
	Remove macros, folding them into...
	(LA25_LUI_MICROMIPS): ... this new macro.
	(LA25_J_MICROMIPS_1, LA25_J_MICROMIPS_2): Likewise into...
	(LA25_J_MICROMIPS): ... this new macro.
	(LA25_ADDIU_MICROMIPS_1, LA25_ADDIU_MICROMIPS_2): Likewise
	into...
	(LA25_ADDIU_MICROMIPS): ... this new macro.
	(bfd_put_micromips_32, bfd_get_micromips_32): New functions.
	(mips_elf_create_la25_stub): Use them.
	(check_br32_dslot, check_br32, check_relocated_bzc): Likewise.
	(_bfd_mips_elf_relax_section): Likewise.

gas/
	* config/tc-mips.c (NO_ISA_COP, COP_INSN): Remove macros.
	(is_opcode_valid): Remove coprocessor instruction exclusions.
	Replace OPCODE_IS_MEMBER with opcode_is_member.
	(is_opcode_valid_16): Replace OPCODE_IS_MEMBER with
	opcode_is_member.
	(macro): Remove coprocessor instruction exclusions.

gas/
	* gas/mips/mips.exp: Set has_newabi for all Linux targets.
	* gas/mips/cfi-n64-1.d: Adjust for targets that do not infer the
	ISA from the ABI.
	* gas/mips/elf-rel-got-n32.d: Likewise.
	* gas/mips/elf-rel-got-n64.d: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Likewise.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel18.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.
	* gas/mips/elf-rel28-n64.d: Likewise.
	* gas/mips/jal-newabi.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/macro-warn-1-n32.d: Likewise.
	* gas/mips/macro-warn-2-n32.d: Likewise.
	* gas/mips/n32-consec.d: Likewise.

include/
2012-08-13  Richard Sandiford  <rdsandiford@@googlemail.com>
            Maciej W. Rozycki  <macro@@codesourcery.com>

	* mips.h (mips_opcode): Add the exclusions field.
	(OPCODE_IS_MEMBER): Remove macro.
	(cpu_is_member): New inline function.
	(opcode_is_member): Likewise.

ld/
	* emulparams/elf32bmip.sh: Make _gp hidden.
	* emulparams/elf32bmipn32-defs.sh: Likewise.
	* emulparams/elf32mipswindiss.sh: Likewise.
	* scripttempl/mips.sc: Likewise.

ld/
2012-08-28  Maciej W. Rozycki  <macro@@codesourcery.com>

	* ld-elf/export-class.sd: New test.
	* ld-elf/export-class.vd: New test.
	* ld-elf/export-class-def.s: New test source.
	* ld-elf/export-class-dep.s: New test source.
	* ld-elf/export-class-lib.s: New test source.
	* ld-elf/export-class-ref.s: New test source.
	* ld-elf/export-class-lib.ver: New test version script.
	* ld-elf/export-class.exp: New test script.
	* ld-arm/arm-export-class.rd: New test.
	* ld-arm/arm-export-class.xd: New test.
	* ld-arm/export-class.exp: New test script.
	* ld-i386/i386-export-class.rd: New test.
	* ld-i386/i386-export-class.xd: New test.
	* ld-i386/export-class.exp: New test script.
	* ld-mips-elf/mips-32-export-class.rd: New test.
	* ld-mips-elf/mips-32-export-class.xd: New test.
	* ld-mips-elf/mips-64-export-class.rd: New test.
	* ld-mips-elf/mips-64-export-class.xd: New test.
	* ld-mips-elf/export-class.exp: New test script.
	* ld-powerpc/powerpc-32-export-class.rd: New test.
	* ld-powerpc/powerpc-32-export-class.xd: New test.
	* ld-powerpc/powerpc-64-export-class.rd: New test.
	* ld-powerpc/powerpc-64-export-class.xd: New test.
	* ld-powerpc/export-class.exp: New test script.
	* ld-x86-64/x86-64-64-export-class.rd: New test.
	* ld-x86-64/x86-64-x32-export-class.rd: New test.
	* ld-x86-64/export-class.exp: New test script.

opcodes/
2012-08-14  Maciej W. Rozycki  <macro@@codesourcery.com>

	* mips-dis.c (print_insn_args): Add GET_OP and GET_OP_S local
	macros, use local variables for info struct member accesses,
	update the type of the variable used to hold the instruction
	word.
	(print_insn_mips, print_mips16_insn_arg): Likewise.
	(print_insn_mips16): Add GET_OP and GET_OP_S local macros, use
	local variables for info struct member accesses.
	(print_insn_micromips): Add GET_OP_S local macro.
	(_print_insn_mips): Update the type of the variable used to hold
	the instruction word.
@
text
@d2 1
a2 1
#as: -march=from-abi -EB -64 -KPIC
d4 1
a4 1
#ld:
d11 4
a14 4
00000000100000e8 <\.MIPS\.options>:
    100000e8:	01280000 	.*
    100000ec:	00000000 	.*
    100000f0:	92020022 	.*
d16 1
a16 1
    1000010c:	10018600 	.*
d19 101
a119 89
0000000010000110 <fn>:
    10000110:	df858020 	ld	a1,-32736\(gp\)
    10000114:	df858020 	ld	a1,-32736\(gp\)
    10000118:	64a5000c 	daddiu	a1,a1,12
    1000011c:	df858020 	ld	a1,-32736\(gp\)
    10000120:	3c010001 	lui	at,0x1
    10000124:	3421e240 	ori	at,at,0xe240
    10000128:	00a1282d 	daddu	a1,a1,at
    1000012c:	df858020 	ld	a1,-32736\(gp\)
    10000130:	00b1282d 	daddu	a1,a1,s1
    10000134:	df858020 	ld	a1,-32736\(gp\)
    10000138:	64a5000c 	daddiu	a1,a1,12
    1000013c:	00b1282d 	daddu	a1,a1,s1
    10000140:	df858020 	ld	a1,-32736\(gp\)
    10000144:	3c010001 	lui	at,0x1
    10000148:	3421e240 	ori	at,at,0xe240
    1000014c:	00a1282d 	daddu	a1,a1,at
    10000150:	00b1282d 	daddu	a1,a1,s1
    10000154:	df858028 	ld	a1,-32728\(gp\)
    10000158:	dca5055c 	ld	a1,1372\(a1\)
    1000015c:	df858028 	ld	a1,-32728\(gp\)
    10000160:	dca50568 	ld	a1,1384\(a1\)
    10000164:	df858028 	ld	a1,-32728\(gp\)
    10000168:	00b1282d 	daddu	a1,a1,s1
    1000016c:	dca5055c 	ld	a1,1372\(a1\)
    10000170:	df858028 	ld	a1,-32728\(gp\)
    10000174:	00b1282d 	daddu	a1,a1,s1
    10000178:	dca50568 	ld	a1,1384\(a1\)
    1000017c:	df818028 	ld	at,-32728\(gp\)
    10000180:	0025082d 	daddu	at,at,a1
    10000184:	dc25057e 	ld	a1,1406\(at\)
    10000188:	df818028 	ld	at,-32728\(gp\)
    1000018c:	0025082d 	daddu	at,at,a1
    10000190:	fc250594 	sd	a1,1428\(at\)
    10000194:	df818020 	ld	at,-32736\(gp\)
    10000198:	88250000 	lwl	a1,0\(at\)
    1000019c:	98250003 	lwr	a1,3\(at\)
    100001a0:	df818020 	ld	at,-32736\(gp\)
    100001a4:	6421000c 	daddiu	at,at,12
    100001a8:	88250000 	lwl	a1,0\(at\)
    100001ac:	98250003 	lwr	a1,3\(at\)
    100001b0:	df818020 	ld	at,-32736\(gp\)
    100001b4:	0031082d 	daddu	at,at,s1
    100001b8:	88250000 	lwl	a1,0\(at\)
    100001bc:	98250003 	lwr	a1,3\(at\)
    100001c0:	df818020 	ld	at,-32736\(gp\)
    100001c4:	6421000c 	daddiu	at,at,12
    100001c8:	0031082d 	daddu	at,at,s1
    100001cc:	88250000 	lwl	a1,0\(at\)
    100001d0:	98250003 	lwr	a1,3\(at\)
    100001d4:	df818020 	ld	at,-32736\(gp\)
    100001d8:	64210022 	daddiu	at,at,34
    100001dc:	0025082d 	daddu	at,at,a1
    100001e0:	88250000 	lwl	a1,0\(at\)
    100001e4:	98250003 	lwr	a1,3\(at\)
    100001e8:	df818020 	ld	at,-32736\(gp\)
    100001ec:	64210038 	daddiu	at,at,56
    100001f0:	0025082d 	daddu	at,at,a1
    100001f4:	a8250000 	swl	a1,0\(at\)
    100001f8:	b8250003 	swr	a1,3\(at\)
    100001fc:	df858020 	ld	a1,-32736\(gp\)
    10000200:	df858030 	ld	a1,-32720\(gp\)
    10000204:	df858038 	ld	a1,-32712\(gp\)
    10000208:	df858020 	ld	a1,-32736\(gp\)
    1000020c:	00b1282d 	daddu	a1,a1,s1
    10000210:	df858030 	ld	a1,-32720\(gp\)
    10000214:	00b1282d 	daddu	a1,a1,s1
    10000218:	df858038 	ld	a1,-32712\(gp\)
    1000021c:	00b1282d 	daddu	a1,a1,s1
    10000220:	df858028 	ld	a1,-32728\(gp\)
    10000224:	dca5055c 	ld	a1,1372\(a1\)
    10000228:	df858028 	ld	a1,-32728\(gp\)
    1000022c:	dca50568 	ld	a1,1384\(a1\)
    10000230:	df858028 	ld	a1,-32728\(gp\)
    10000234:	00b1282d 	daddu	a1,a1,s1
    10000238:	dca5055c 	ld	a1,1372\(a1\)
    1000023c:	df858028 	ld	a1,-32728\(gp\)
    10000240:	00b1282d 	daddu	a1,a1,s1
    10000244:	dca50568 	ld	a1,1384\(a1\)
    10000248:	df818028 	ld	at,-32728\(gp\)
    1000024c:	0025082d 	daddu	at,at,a1
    10000250:	dc25057e 	ld	a1,1406\(at\)
    10000254:	df818028 	ld	at,-32728\(gp\)
    10000258:	0025082d 	daddu	at,at,a1
    1000025c:	fc250594 	sd	a1,1428\(at\)
    10000260:	df818020 	ld	at,-32736\(gp\)
    10000264:	88250000 	lwl	a1,0\(at\)
    10000268:	98250003 	lwr	a1,3\(at\)
    1000026c:	df818030 	ld	at,-32720\(gp\)
d122 114
a235 114
    10000278:	df818020 	ld	at,-32736\(gp\)
    1000027c:	0031082d 	daddu	at,at,s1
    10000280:	88250000 	lwl	a1,0\(at\)
    10000284:	98250003 	lwr	a1,3\(at\)
    10000288:	df818030 	ld	at,-32720\(gp\)
    1000028c:	0031082d 	daddu	at,at,s1
    10000290:	88250000 	lwl	a1,0\(at\)
    10000294:	98250003 	lwr	a1,3\(at\)
    10000298:	df818040 	ld	at,-32704\(gp\)
    1000029c:	0025082d 	daddu	at,at,a1
    100002a0:	88250000 	lwl	a1,0\(at\)
    100002a4:	98250003 	lwr	a1,3\(at\)
    100002a8:	df818048 	ld	at,-32696\(gp\)
    100002ac:	0025082d 	daddu	at,at,a1
    100002b0:	a8250000 	swl	a1,0\(at\)
    100002b4:	b8250003 	swr	a1,3\(at\)
    100002b8:	df858050 	ld	a1,-32688\(gp\)
    100002bc:	df858050 	ld	a1,-32688\(gp\)
    100002c0:	df998050 	ld	t9,-32688\(gp\)
    100002c4:	df998050 	ld	t9,-32688\(gp\)
    100002c8:	df998050 	ld	t9,-32688\(gp\)
    100002cc:	0411ff90 	bal	10000110 <fn>
    100002d0:	00000000 	nop
    100002d4:	df998050 	ld	t9,-32688\(gp\)
    100002d8:	0411ff8d 	bal	10000110 <fn>
    100002dc:	00000000 	nop
    100002e0:	df858058 	ld	a1,-32680\(gp\)
    100002e4:	df858058 	ld	a1,-32680\(gp\)
    100002e8:	64a5000c 	daddiu	a1,a1,12
    100002ec:	df858058 	ld	a1,-32680\(gp\)
    100002f0:	3c010001 	lui	at,0x1
    100002f4:	3421e240 	ori	at,at,0xe240
    100002f8:	00a1282d 	daddu	a1,a1,at
    100002fc:	df858058 	ld	a1,-32680\(gp\)
    10000300:	00b1282d 	daddu	a1,a1,s1
    10000304:	df858058 	ld	a1,-32680\(gp\)
    10000308:	64a5000c 	daddiu	a1,a1,12
    1000030c:	00b1282d 	daddu	a1,a1,s1
    10000310:	df858058 	ld	a1,-32680\(gp\)
    10000314:	3c010001 	lui	at,0x1
    10000318:	3421e240 	ori	at,at,0xe240
    1000031c:	00a1282d 	daddu	a1,a1,at
    10000320:	00b1282d 	daddu	a1,a1,s1
    10000324:	df858028 	ld	a1,-32728\(gp\)
    10000328:	dca505d4 	ld	a1,1492\(a1\)
    1000032c:	df858028 	ld	a1,-32728\(gp\)
    10000330:	dca505e0 	ld	a1,1504\(a1\)
    10000334:	df858028 	ld	a1,-32728\(gp\)
    10000338:	00b1282d 	daddu	a1,a1,s1
    1000033c:	dca505d4 	ld	a1,1492\(a1\)
    10000340:	df858028 	ld	a1,-32728\(gp\)
    10000344:	00b1282d 	daddu	a1,a1,s1
    10000348:	dca505e0 	ld	a1,1504\(a1\)
    1000034c:	df818028 	ld	at,-32728\(gp\)
    10000350:	0025082d 	daddu	at,at,a1
    10000354:	dc2505f6 	ld	a1,1526\(at\)
    10000358:	df818028 	ld	at,-32728\(gp\)
    1000035c:	0025082d 	daddu	at,at,a1
    10000360:	fc25060c 	sd	a1,1548\(at\)
    10000364:	df818058 	ld	at,-32680\(gp\)
    10000368:	88250000 	lwl	a1,0\(at\)
    1000036c:	98250003 	lwr	a1,3\(at\)
    10000370:	df818058 	ld	at,-32680\(gp\)
    10000374:	6421000c 	daddiu	at,at,12
    10000378:	88250000 	lwl	a1,0\(at\)
    1000037c:	98250003 	lwr	a1,3\(at\)
    10000380:	df818058 	ld	at,-32680\(gp\)
    10000384:	0031082d 	daddu	at,at,s1
    10000388:	88250000 	lwl	a1,0\(at\)
    1000038c:	98250003 	lwr	a1,3\(at\)
    10000390:	df818058 	ld	at,-32680\(gp\)
    10000394:	6421000c 	daddiu	at,at,12
    10000398:	0031082d 	daddu	at,at,s1
    1000039c:	88250000 	lwl	a1,0\(at\)
    100003a0:	98250003 	lwr	a1,3\(at\)
    100003a4:	df818058 	ld	at,-32680\(gp\)
    100003a8:	64210022 	daddiu	at,at,34
    100003ac:	0025082d 	daddu	at,at,a1
    100003b0:	88250000 	lwl	a1,0\(at\)
    100003b4:	98250003 	lwr	a1,3\(at\)
    100003b8:	df818058 	ld	at,-32680\(gp\)
    100003bc:	64210038 	daddiu	at,at,56
    100003c0:	0025082d 	daddu	at,at,a1
    100003c4:	a8250000 	swl	a1,0\(at\)
    100003c8:	b8250003 	swr	a1,3\(at\)
    100003cc:	df858058 	ld	a1,-32680\(gp\)
    100003d0:	df858060 	ld	a1,-32672\(gp\)
    100003d4:	df858068 	ld	a1,-32664\(gp\)
    100003d8:	df858058 	ld	a1,-32680\(gp\)
    100003dc:	00b1282d 	daddu	a1,a1,s1
    100003e0:	df858060 	ld	a1,-32672\(gp\)
    100003e4:	00b1282d 	daddu	a1,a1,s1
    100003e8:	df858068 	ld	a1,-32664\(gp\)
    100003ec:	00b1282d 	daddu	a1,a1,s1
    100003f0:	df858028 	ld	a1,-32728\(gp\)
    100003f4:	dca505d4 	ld	a1,1492\(a1\)
    100003f8:	df858028 	ld	a1,-32728\(gp\)
    100003fc:	dca505e0 	ld	a1,1504\(a1\)
    10000400:	df858028 	ld	a1,-32728\(gp\)
    10000404:	00b1282d 	daddu	a1,a1,s1
    10000408:	dca505d4 	ld	a1,1492\(a1\)
    1000040c:	df858028 	ld	a1,-32728\(gp\)
    10000410:	00b1282d 	daddu	a1,a1,s1
    10000414:	dca505e0 	ld	a1,1504\(a1\)
    10000418:	df818028 	ld	at,-32728\(gp\)
    1000041c:	0025082d 	daddu	at,at,a1
    10000420:	dc2505f6 	ld	a1,1526\(at\)
    10000424:	df818028 	ld	at,-32728\(gp\)
    10000428:	0025082d 	daddu	at,at,a1
    1000042c:	fc25060c 	sd	a1,1548\(at\)
    10000430:	df818058 	ld	at,-32680\(gp\)
    10000434:	88250000 	lwl	a1,0\(at\)
    10000438:	98250003 	lwr	a1,3\(at\)
    1000043c:	df818060 	ld	at,-32672\(gp\)
d238 37
a274 49
    10000448:	df818058 	ld	at,-32680\(gp\)
    1000044c:	0031082d 	daddu	at,at,s1
    10000450:	88250000 	lwl	a1,0\(at\)
    10000454:	98250003 	lwr	a1,3\(at\)
    10000458:	df818060 	ld	at,-32672\(gp\)
    1000045c:	0031082d 	daddu	at,at,s1
    10000460:	88250000 	lwl	a1,0\(at\)
    10000464:	98250003 	lwr	a1,3\(at\)
    10000468:	df818070 	ld	at,-32656\(gp\)
    1000046c:	0025082d 	daddu	at,at,a1
    10000470:	88250000 	lwl	a1,0\(at\)
    10000474:	98250003 	lwr	a1,3\(at\)
    10000478:	df818078 	ld	at,-32648\(gp\)
    1000047c:	0025082d 	daddu	at,at,a1
    10000480:	a8250000 	swl	a1,0\(at\)
    10000484:	b8250003 	swr	a1,3\(at\)
    10000488:	df858080 	ld	a1,-32640\(gp\)
    1000048c:	df858080 	ld	a1,-32640\(gp\)
    10000490:	df998080 	ld	t9,-32640\(gp\)
    10000494:	df998080 	ld	t9,-32640\(gp\)
    10000498:	df998080 	ld	t9,-32640\(gp\)
    1000049c:	0411001d 	bal	10000514 <fn2>
    100004a0:	00000000 	nop
    100004a4:	df998080 	ld	t9,-32640\(gp\)
    100004a8:	0411001a 	bal	10000514 <fn2>
    100004ac:	00000000 	nop
    100004b0:	1000ff17 	b	10000110 <fn>
    100004b4:	df858020 	ld	a1,-32736\(gp\)
    100004b8:	df858028 	ld	a1,-32728\(gp\)
    100004bc:	10000015 	b	10000514 <fn2>
    100004c0:	dca505d4 	ld	a1,1492\(a1\)
    100004c4:	1000ff12 	b	10000110 <fn>
    100004c8:	df858020 	ld	a1,-32736\(gp\)
    100004cc:	df858060 	ld	a1,-32672\(gp\)
    100004d0:	10000010 	b	10000514 <fn2>
    100004d4:	00000000 	nop
    100004d8:	df858038 	ld	a1,-32712\(gp\)
    100004dc:	1000ff0c 	b	10000110 <fn>
    100004e0:	00000000 	nop
    100004e4:	df858028 	ld	a1,-32728\(gp\)
    100004e8:	1000000a 	b	10000514 <fn2>
    100004ec:	dca505d4 	ld	a1,1492\(a1\)
    100004f0:	df858028 	ld	a1,-32728\(gp\)
    100004f4:	1000ff06 	b	10000110 <fn>
    100004f8:	dca50568 	ld	a1,1384\(a1\)
    100004fc:	df818028 	ld	at,-32728\(gp\)
    10000500:	0025082d 	daddu	at,at,a1
    10000504:	10000003 	b	10000514 <fn2>
    10000508:	dc2505f6 	ld	a1,1526\(at\)
d277 1
a277 1
0000000010000514 <fn2>:
d281 1
a281 1
0000000010010520 <_fdata>:
d284 1
a284 1
000000001001055c <dg1>:
d287 1
a287 1
0000000010010598 <sp2>:
d290 1
a290 1
00000000100105d4 <dg2>:
d294 1
a294 1
0000000010010610 <_GLOBAL_OFFSET_TABLE_>:
d296 29
a324 28
    10010618:	80000000 	.*
	\.\.\.
    10010624:	1001055c 	.*
    10010628:	00000000 	.*
    1001062c:	10010000 	.*
    10010630:	00000000 	.*
    10010634:	10010568 	.*
    10010638:	00000000 	.*
    1001063c:	1002e79c 	.*
    10010640:	00000000 	.*
    10010644:	1001057e 	.*
    10010648:	00000000 	.*
    1001064c:	10010594 	.*
    10010650:	00000000 	.*
    10010654:	10000110 	.*
    10010658:	00000000 	.*
    1001065c:	100105d4 	.*
    10010660:	00000000 	.*
    10010664:	100105e0 	.*
    10010668:	00000000 	.*
    1001066c:	1002e814 	.*
    10010670:	00000000 	.*
    10010674:	100105f6 	.*
    10010678:	00000000 	.*
    1001067c:	1001060c 	.*
    10010680:	00000000 	.*
    10010684:	10000514 	.*
    10010688:	00000000 	.*
d326 7
@


1.2
log
@	* ld-mips-elf/elf-rel-got-n32.d, ld-mips-elf/elf-rel-got-n64-linux.d,
	ld-mips-elf/elf-rel-got-n64.d, ld-mips-elf/elf-rel-xgot-n32.d,
	ld-mips-elf/elf-rel-xgot-n64-linux.d, ld-mips-elf/elf-rel-xgot-n64.d,
	ld-mips-elf/jalbal.d: Force big-endian.
	* ld-mips-elf/multi-got-1.d: Make more flexible.
	* ld-mips-elf/rel32-n32.d, ld-mips-elf/rel32-o32.d,
	ld-mips-elf/rel64.d: Update offsets.
@
text
@d296 2
a297 1
    101005ec:	80000000 	.*
@


1.1
log
@* ld-mips-elf/elf-rel-got-n32.d,
ld-mips-elf/elf-rel-got-n64.d, ld-mips-elf/elf-rel-xgot-n32.d,
ld-mips-elf/elf-rel-xgot-n64.d: New.
* ld-mips-elf/mips-elf.exp (hasn32): Define as condition for
new tests to run.
@
text
@d2 1
a2 1
#as: -64 -KPIC
@

