head	1.9;
access;
symbols
	binutils-2_24-branch:1.9.0.2
	binutils-2_24-branchpoint:1.9
	binutils-2_21_1:1.7
	binutils-2_23_2:1.7.8.1
	binutils-2_23_1:1.7.8.1
	binutils-2_23:1.7.8.1
	binutils-2_23-branch:1.7.0.8
	binutils-2_23-branchpoint:1.7
	binutils-2_22_branch:1.7.0.6
	binutils-2_22:1.7
	binutils-2_22-branch:1.7.0.4
	binutils-2_22-branchpoint:1.7
	binutils-2_21:1.7
	binutils-2_21-branch:1.7.0.2
	binutils-2_21-branchpoint:1.7
	binutils-2_20_1:1.5.10.1
	binutils-2_20:1.5.10.1
	binutils-arc-20081103-branch:1.5.0.12
	binutils-arc-20081103-branchpoint:1.5
	binutils-2_20-branch:1.5.0.10
	binutils-2_20-branchpoint:1.5
	dje-cgen-play1-branch:1.5.0.8
	dje-cgen-play1-branchpoint:1.5
	arc-20081103-branch:1.5.0.6
	arc-20081103-branchpoint:1.5
	binutils-2_19_1:1.5
	binutils-2_19:1.5
	binutils-2_19-branch:1.5.0.4
	binutils-2_19-branchpoint:1.5
	binutils-2_18:1.5
	binutils-2_18-branch:1.5.0.2
	binutils-2_18-branchpoint:1.5
	binutils-csl-coldfire-4_1-32:1.4
	binutils-csl-sourcerygxx-4_1-32:1.4
	binutils-csl-innovasic-fido-3_4_4-33:1.4
	binutils-csl-sourcerygxx-3_4_4-32:1.4
	binutils-csl-coldfire-4_1-30:1.4
	binutils-csl-sourcerygxx-4_1-30:1.4
	binutils-csl-coldfire-4_1-28:1.4
	binutils-csl-sourcerygxx-4_1-29:1.4
	binutils-csl-sourcerygxx-4_1-28:1.4
	binutils-csl-arm-2006q3-27:1.4
	binutils-csl-sourcerygxx-4_1-27:1.4
	binutils-csl-arm-2006q3-26:1.4
	binutils-csl-sourcerygxx-4_1-26:1.4
	binutils-csl-sourcerygxx-4_1-25:1.4
	binutils-csl-sourcerygxx-4_1-24:1.4
	binutils-csl-sourcerygxx-4_1-23:1.4
	binutils-csl-sourcerygxx-4_1-21:1.4
	binutils-csl-arm-2006q3-21:1.4
	binutils-csl-sourcerygxx-4_1-22:1.4
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.4
	binutils-csl-sourcerygxx-4_1-20:1.4
	binutils-csl-arm-2006q3-19:1.4
	binutils-csl-sourcerygxx-4_1-19:1.4
	binutils-csl-sourcerygxx-4_1-18:1.4
	binutils-csl-renesas-4_1-9:1.4
	binutils-csl-sourcerygxx-3_4_4-25:1.4
	binutils-csl-renesas-4_1-8:1.4
	binutils-csl-renesas-4_1-7:1.4
	binutils-csl-renesas-4_1-6:1.4
	binutils-csl-sourcerygxx-4_1-17:1.4
	binutils-csl-sourcerygxx-4_1-14:1.4
	binutils-csl-sourcerygxx-4_1-15:1.4
	binutils-csl-sourcerygxx-4_1-13:1.4
	binutils-2_17:1.4
	binutils-csl-sourcerygxx-4_1-12:1.4
	binutils-csl-sourcerygxx-3_4_4-21:1.4
	binutils-csl-wrs-linux-3_4_4-24:1.4
	binutils-csl-wrs-linux-3_4_4-23:1.4
	binutils-csl-sourcerygxx-4_1-9:1.4
	binutils-csl-sourcerygxx-4_1-8:1.4
	binutils-csl-sourcerygxx-4_1-7:1.4
	binutils-csl-arm-2006q1-6:1.4
	binutils-csl-sourcerygxx-4_1-6:1.4
	binutils-csl-wrs-linux-3_4_4-22:1.4
	binutils-csl-coldfire-4_1-11:1.4
	binutils-csl-sourcerygxx-3_4_4-19:1.4
	binutils-csl-coldfire-4_1-10:1.4
	binutils-csl-sourcerygxx-4_1-5:1.4
	binutils-csl-sourcerygxx-4_1-4:1.4
	binutils-csl-wrs-linux-3_4_4-21:1.4
	binutils-csl-morpho-4_1-4:1.4
	binutils-csl-sourcerygxx-3_4_4-17:1.4
	binutils-csl-wrs-linux-3_4_4-20:1.4
	binutils-2_17-branch:1.4.0.10
	binutils-2_17-branchpoint:1.4
	binutils-csl-2_17-branch:1.4.0.8
	binutils-csl-2_17-branchpoint:1.4
	binutils-csl-gxxpro-3_4-branch:1.4.0.6
	binutils-csl-gxxpro-3_4-branchpoint:1.4
	binutils-2_16_1:1.4
	binutils-csl-arm-2005q1b:1.4
	binutils-2_16:1.4
	binutils-csl-arm-2005q1a:1.4
	binutils-csl-arm-2005q1-branch:1.4.0.4
	binutils-csl-arm-2005q1-branchpoint:1.4
	binutils-2_16-branch:1.4.0.2
	binutils-2_16-branchpoint:1.4
	csl-arm-2004-q3d:1.3
	csl-arm-2004-q3:1.3
	binutils-2_15:1.3
	binutils-2_15-branchpoint:1.3
	csl-arm-2004-q1a:1.3
	csl-arm-2004-q1:1.3
	binutils-2_15-branch:1.3.0.2
	cagney_bfdfile-20040213-branch:1.2.0.4
	cagney_bfdfile-20040213-branchpoint:1.2
	cagney_bigcore-20040122-branch:1.2.0.2
	cagney_bigcore-20040122-branchpoint:1.2
	csl-arm-2003-q4:1.2
	binutils-2_14:1.1
	binutils-2_14-branch:1.1.0.2
	binutils-2_14-branchpoint:1.1
	binutils_latest_snapshot:1.9;
locks; strict;
comment	@# @;


1.9
date	2012.08.06.21.28.45;	author macro;	state Exp;
branches;
next	1.8;

1.8
date	2012.08.06.21.05.54;	author macro;	state Exp;
branches;
next	1.7;

1.7
date	2010.09.19.10.26.28;	author rsandifo;	state Exp;
branches
	1.7.8.1;
next	1.6;

1.6
date	2009.09.13.18.56.03;	author rsandifo;	state Exp;
branches;
next	1.5;

1.5
date	2006.10.18.07.13.47;	author rsandifo;	state Exp;
branches
	1.5.10.1;
next	1.4;

1.4
date	2005.01.31.22.00.59;	author drow;	state Exp;
branches;
next	1.3;

1.3
date	2004.02.17.10.19.24;	author rsandifo;	state Exp;
branches;
next	1.2;

1.2
date	2003.06.21.21.38.04;	author ths;	state Exp;
branches;
next	1.1;

1.1
date	2003.04.11.01.56.49;	author aoliva;	state Exp;
branches;
next	;

1.7.8.1
date	2012.09.04.14.38.02;	author gingold;	state Exp;
branches;
next	;

1.5.10.1
date	2009.09.14.18.49.18;	author rsandifo;	state Exp;
branches;
next	;


desc
@@


1.9
log
@	gas/testsuite/
	* gas/mips/mips.exp: Set has_newabi for all Linux targets.
	* gas/mips/cfi-n64-1.d: Adjust for targets that do not infer the
	ISA from the ABI.
	* gas/mips/elf-rel-got-n32.d: Likewise.
	* gas/mips/elf-rel-got-n64.d: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Likewise.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel18.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.
	* gas/mips/elf-rel28-n64.d: Likewise.
	* gas/mips/jal-newabi.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/macro-warn-1-n32.d: Likewise.
	* gas/mips/macro-warn-2-n32.d: Likewise.
	* gas/mips/n32-consec.d: Likewise.

	ld/testsuite/
	* ld-mips-elf/mips-elf.exp: Set has_newabi for all Linux targets.
	Adjust abi_asflags for targets that do not infer the ISA from the
	ABI.
	* ld-mips-elf/eh-frame1-n32.d: Adjust for targets that do not
	infer the ISA from the ABI.
	* ld-mips-elf/eh-frame1-n64.d: Likewise.
	* ld-mips-elf/eh-frame2-n32.d: Likewise.
	* ld-mips-elf/eh-frame2-n64.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32-embed.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-embed.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32-embed.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-embed.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64.d: Likewise.
	* ld-mips-elf/emit-relocs-1.d: Likewise.
	* ld-mips-elf/got-page-2.d: Likewise.
	* ld-mips-elf/no-shared-1-n32.d: Likewise.
	* ld-mips-elf/no-shared-1-n64.d: Likewise.
	* ld-mips-elf/rel32-n32.d: Likewise.
	* ld-mips-elf/rel64.d: Likewise.
	* ld-mips-elf/relax-jalr-n32-shared.d: Likewise.
	* ld-mips-elf/relax-jalr-n32.d: Likewise.
	* ld-mips-elf/relax-jalr-n64-shared.d: Likewise.
	* ld-mips-elf/relax-jalr-n64.d: Likewise.
	* ld-mips-elf/reloc-1-n32.d: Likewise.
	* ld-mips-elf/reloc-1-n64.d: Likewise.
	* ld-mips-elf/textrel-1.d: Likewise.
@
text
@#name: MIPS ELF got reloc n32
#as: -march=from-abi -EB -n32 -KPIC
#source: ../../../gas/testsuite/gas/mips/elf-rel-got-n32.s
#ld:
#objdump: -D --show-raw-insn

.*: +file format elf32-n.*mips.*

Disassembly of section \.reginfo:

10000098 <\.reginfo>:
10000098:	92020022 	.*
	\.\.\.
100000ac:	100185a0 	.*

Disassembly of section \.text:

100000b0 <fn>:
100000b0:	8f858018 	lw	a1,-32744\(gp\)
100000b4:	8f858018 	lw	a1,-32744\(gp\)
100000b8:	24a5000c 	addiu	a1,a1,12
100000bc:	8f858018 	lw	a1,-32744\(gp\)
100000c0:	3c010001 	lui	at,0x1
100000c4:	3421e240 	ori	at,at,0xe240
100000c8:	00a12821 	addu	a1,a1,at
100000cc:	8f858018 	lw	a1,-32744\(gp\)
100000d0:	00b12821 	addu	a1,a1,s1
100000d4:	8f858018 	lw	a1,-32744\(gp\)
100000d8:	24a5000c 	addiu	a1,a1,12
100000dc:	00b12821 	addu	a1,a1,s1
100000e0:	8f858018 	lw	a1,-32744\(gp\)
100000e4:	3c010001 	lui	at,0x1
100000e8:	3421e240 	ori	at,at,0xe240
100000ec:	00a12821 	addu	a1,a1,at
100000f0:	00b12821 	addu	a1,a1,s1
100000f4:	8f85801c 	lw	a1,-32740\(gp\)
100000f8:	8ca504fc 	lw	a1,1276\(a1\)
100000fc:	8f85801c 	lw	a1,-32740\(gp\)
10000100:	8ca50508 	lw	a1,1288\(a1\)
10000104:	8f85801c 	lw	a1,-32740\(gp\)
10000108:	00b12821 	addu	a1,a1,s1
1000010c:	8ca504fc 	lw	a1,1276\(a1\)
10000110:	8f85801c 	lw	a1,-32740\(gp\)
10000114:	00b12821 	addu	a1,a1,s1
10000118:	8ca50508 	lw	a1,1288\(a1\)
1000011c:	8f81801c 	lw	at,-32740\(gp\)
10000120:	00250821 	addu	at,at,a1
10000124:	8c25051e 	lw	a1,1310\(at\)
10000128:	8f81801c 	lw	at,-32740\(gp\)
1000012c:	00250821 	addu	at,at,a1
10000130:	ac250534 	sw	a1,1332\(at\)
10000134:	8f818018 	lw	at,-32744\(gp\)
10000138:	88250000 	lwl	a1,0\(at\)
1000013c:	98250003 	lwr	a1,3\(at\)
10000140:	8f818018 	lw	at,-32744\(gp\)
10000144:	2421000c 	addiu	at,at,12
10000148:	88250000 	lwl	a1,0\(at\)
1000014c:	98250003 	lwr	a1,3\(at\)
10000150:	8f818018 	lw	at,-32744\(gp\)
10000154:	00310821 	addu	at,at,s1
10000158:	88250000 	lwl	a1,0\(at\)
1000015c:	98250003 	lwr	a1,3\(at\)
10000160:	8f818018 	lw	at,-32744\(gp\)
10000164:	2421000c 	addiu	at,at,12
10000168:	00310821 	addu	at,at,s1
1000016c:	88250000 	lwl	a1,0\(at\)
10000170:	98250003 	lwr	a1,3\(at\)
10000174:	8f818018 	lw	at,-32744\(gp\)
10000178:	24210022 	addiu	at,at,34
1000017c:	00250821 	addu	at,at,a1
10000180:	88250000 	lwl	a1,0\(at\)
10000184:	98250003 	lwr	a1,3\(at\)
10000188:	8f818018 	lw	at,-32744\(gp\)
1000018c:	24210038 	addiu	at,at,56
10000190:	00250821 	addu	at,at,a1
10000194:	a8250000 	swl	a1,0\(at\)
10000198:	b8250003 	swr	a1,3\(at\)
1000019c:	8f858018 	lw	a1,-32744\(gp\)
100001a0:	8f858020 	lw	a1,-32736\(gp\)
100001a4:	8f858024 	lw	a1,-32732\(gp\)
100001a8:	8f858018 	lw	a1,-32744\(gp\)
100001ac:	00b12821 	addu	a1,a1,s1
100001b0:	8f858020 	lw	a1,-32736\(gp\)
100001b4:	00b12821 	addu	a1,a1,s1
100001b8:	8f858024 	lw	a1,-32732\(gp\)
100001bc:	00b12821 	addu	a1,a1,s1
100001c0:	8f85801c 	lw	a1,-32740\(gp\)
100001c4:	8ca504fc 	lw	a1,1276\(a1\)
100001c8:	8f85801c 	lw	a1,-32740\(gp\)
100001cc:	8ca50508 	lw	a1,1288\(a1\)
100001d0:	8f85801c 	lw	a1,-32740\(gp\)
100001d4:	00b12821 	addu	a1,a1,s1
100001d8:	8ca504fc 	lw	a1,1276\(a1\)
100001dc:	8f85801c 	lw	a1,-32740\(gp\)
100001e0:	00b12821 	addu	a1,a1,s1
100001e4:	8ca50508 	lw	a1,1288\(a1\)
100001e8:	8f81801c 	lw	at,-32740\(gp\)
100001ec:	00250821 	addu	at,at,a1
100001f0:	8c25051e 	lw	a1,1310\(at\)
100001f4:	8f81801c 	lw	at,-32740\(gp\)
100001f8:	00250821 	addu	at,at,a1
100001fc:	ac250534 	sw	a1,1332\(at\)
10000200:	8f818018 	lw	at,-32744\(gp\)
10000204:	88250000 	lwl	a1,0\(at\)
10000208:	98250003 	lwr	a1,3\(at\)
1000020c:	8f818020 	lw	at,-32736\(gp\)
10000210:	88250000 	lwl	a1,0\(at\)
10000214:	98250003 	lwr	a1,3\(at\)
10000218:	8f818018 	lw	at,-32744\(gp\)
1000021c:	00310821 	addu	at,at,s1
10000220:	88250000 	lwl	a1,0\(at\)
10000224:	98250003 	lwr	a1,3\(at\)
10000228:	8f818020 	lw	at,-32736\(gp\)
1000022c:	00310821 	addu	at,at,s1
10000230:	88250000 	lwl	a1,0\(at\)
10000234:	98250003 	lwr	a1,3\(at\)
10000238:	8f818028 	lw	at,-32728\(gp\)
1000023c:	00250821 	addu	at,at,a1
10000240:	88250000 	lwl	a1,0\(at\)
10000244:	98250003 	lwr	a1,3\(at\)
10000248:	8f81802c 	lw	at,-32724\(gp\)
1000024c:	00250821 	addu	at,at,a1
10000250:	a8250000 	swl	a1,0\(at\)
10000254:	b8250003 	swr	a1,3\(at\)
10000258:	8f858030 	lw	a1,-32720\(gp\)
1000025c:	8f858030 	lw	a1,-32720\(gp\)
10000260:	8f998030 	lw	t9,-32720\(gp\)
10000264:	8f998030 	lw	t9,-32720\(gp\)
10000268:	8f998030 	lw	t9,-32720\(gp\)
1000026c:	0411ff90 	bal	100000b0 <fn>
10000270:	00000000 	nop
10000274:	8f998030 	lw	t9,-32720\(gp\)
10000278:	0411ff8d 	bal	100000b0 <fn>
1000027c:	00000000 	nop
10000280:	8f858034 	lw	a1,-32716\(gp\)
10000284:	8f858034 	lw	a1,-32716\(gp\)
10000288:	24a5000c 	addiu	a1,a1,12
1000028c:	8f858034 	lw	a1,-32716\(gp\)
10000290:	3c010001 	lui	at,0x1
10000294:	3421e240 	ori	at,at,0xe240
10000298:	00a12821 	addu	a1,a1,at
1000029c:	8f858034 	lw	a1,-32716\(gp\)
100002a0:	00b12821 	addu	a1,a1,s1
100002a4:	8f858034 	lw	a1,-32716\(gp\)
100002a8:	24a5000c 	addiu	a1,a1,12
100002ac:	00b12821 	addu	a1,a1,s1
100002b0:	8f858034 	lw	a1,-32716\(gp\)
100002b4:	3c010001 	lui	at,0x1
100002b8:	3421e240 	ori	at,at,0xe240
100002bc:	00a12821 	addu	a1,a1,at
100002c0:	00b12821 	addu	a1,a1,s1
100002c4:	8f85801c 	lw	a1,-32740\(gp\)
100002c8:	8ca50574 	lw	a1,1396\(a1\)
100002cc:	8f85801c 	lw	a1,-32740\(gp\)
100002d0:	8ca50580 	lw	a1,1408\(a1\)
100002d4:	8f85801c 	lw	a1,-32740\(gp\)
100002d8:	00b12821 	addu	a1,a1,s1
100002dc:	8ca50574 	lw	a1,1396\(a1\)
100002e0:	8f85801c 	lw	a1,-32740\(gp\)
100002e4:	00b12821 	addu	a1,a1,s1
100002e8:	8ca50580 	lw	a1,1408\(a1\)
100002ec:	8f81801c 	lw	at,-32740\(gp\)
100002f0:	00250821 	addu	at,at,a1
100002f4:	8c250596 	lw	a1,1430\(at\)
100002f8:	8f81801c 	lw	at,-32740\(gp\)
100002fc:	00250821 	addu	at,at,a1
10000300:	ac2505ac 	sw	a1,1452\(at\)
10000304:	8f818034 	lw	at,-32716\(gp\)
10000308:	88250000 	lwl	a1,0\(at\)
1000030c:	98250003 	lwr	a1,3\(at\)
10000310:	8f818034 	lw	at,-32716\(gp\)
10000314:	2421000c 	addiu	at,at,12
10000318:	88250000 	lwl	a1,0\(at\)
1000031c:	98250003 	lwr	a1,3\(at\)
10000320:	8f818034 	lw	at,-32716\(gp\)
10000324:	00310821 	addu	at,at,s1
10000328:	88250000 	lwl	a1,0\(at\)
1000032c:	98250003 	lwr	a1,3\(at\)
10000330:	8f818034 	lw	at,-32716\(gp\)
10000334:	2421000c 	addiu	at,at,12
10000338:	00310821 	addu	at,at,s1
1000033c:	88250000 	lwl	a1,0\(at\)
10000340:	98250003 	lwr	a1,3\(at\)
10000344:	8f818034 	lw	at,-32716\(gp\)
10000348:	24210022 	addiu	at,at,34
1000034c:	00250821 	addu	at,at,a1
10000350:	88250000 	lwl	a1,0\(at\)
10000354:	98250003 	lwr	a1,3\(at\)
10000358:	8f818034 	lw	at,-32716\(gp\)
1000035c:	24210038 	addiu	at,at,56
10000360:	00250821 	addu	at,at,a1
10000364:	a8250000 	swl	a1,0\(at\)
10000368:	b8250003 	swr	a1,3\(at\)
1000036c:	8f858034 	lw	a1,-32716\(gp\)
10000370:	8f858038 	lw	a1,-32712\(gp\)
10000374:	8f85803c 	lw	a1,-32708\(gp\)
10000378:	8f858034 	lw	a1,-32716\(gp\)
1000037c:	00b12821 	addu	a1,a1,s1
10000380:	8f858038 	lw	a1,-32712\(gp\)
10000384:	00b12821 	addu	a1,a1,s1
10000388:	8f85803c 	lw	a1,-32708\(gp\)
1000038c:	00b12821 	addu	a1,a1,s1
10000390:	8f85801c 	lw	a1,-32740\(gp\)
10000394:	8ca50574 	lw	a1,1396\(a1\)
10000398:	8f85801c 	lw	a1,-32740\(gp\)
1000039c:	8ca50580 	lw	a1,1408\(a1\)
100003a0:	8f85801c 	lw	a1,-32740\(gp\)
100003a4:	00b12821 	addu	a1,a1,s1
100003a8:	8ca50574 	lw	a1,1396\(a1\)
100003ac:	8f85801c 	lw	a1,-32740\(gp\)
100003b0:	00b12821 	addu	a1,a1,s1
100003b4:	8ca50580 	lw	a1,1408\(a1\)
100003b8:	8f81801c 	lw	at,-32740\(gp\)
100003bc:	00250821 	addu	at,at,a1
100003c0:	8c250596 	lw	a1,1430\(at\)
100003c4:	8f81801c 	lw	at,-32740\(gp\)
100003c8:	00250821 	addu	at,at,a1
100003cc:	ac2505ac 	sw	a1,1452\(at\)
100003d0:	8f818034 	lw	at,-32716\(gp\)
100003d4:	88250000 	lwl	a1,0\(at\)
100003d8:	98250003 	lwr	a1,3\(at\)
100003dc:	8f818038 	lw	at,-32712\(gp\)
100003e0:	88250000 	lwl	a1,0\(at\)
100003e4:	98250003 	lwr	a1,3\(at\)
100003e8:	8f818034 	lw	at,-32716\(gp\)
100003ec:	00310821 	addu	at,at,s1
100003f0:	88250000 	lwl	a1,0\(at\)
100003f4:	98250003 	lwr	a1,3\(at\)
100003f8:	8f818038 	lw	at,-32712\(gp\)
100003fc:	00310821 	addu	at,at,s1
10000400:	88250000 	lwl	a1,0\(at\)
10000404:	98250003 	lwr	a1,3\(at\)
10000408:	8f818040 	lw	at,-32704\(gp\)
1000040c:	00250821 	addu	at,at,a1
10000410:	88250000 	lwl	a1,0\(at\)
10000414:	98250003 	lwr	a1,3\(at\)
10000418:	8f818044 	lw	at,-32700\(gp\)
1000041c:	00250821 	addu	at,at,a1
10000420:	a8250000 	swl	a1,0\(at\)
10000424:	b8250003 	swr	a1,3\(at\)
10000428:	8f858048 	lw	a1,-32696\(gp\)
1000042c:	8f858048 	lw	a1,-32696\(gp\)
10000430:	8f998048 	lw	t9,-32696\(gp\)
10000434:	8f998048 	lw	t9,-32696\(gp\)
10000438:	8f998048 	lw	t9,-32696\(gp\)
1000043c:	0411001d 	bal	100004b4 <fn2>
10000440:	00000000 	nop
10000444:	8f998048 	lw	t9,-32696\(gp\)
10000448:	0411001a 	bal	100004b4 <fn2>
1000044c:	00000000 	nop
10000450:	1000ff17 	b	100000b0 <fn>
10000454:	8f858018 	lw	a1,-32744\(gp\)
10000458:	8f85801c 	lw	a1,-32740\(gp\)
1000045c:	10000015 	b	100004b4 <fn2>
10000460:	8ca50574 	lw	a1,1396\(a1\)
10000464:	1000ff12 	b	100000b0 <fn>
10000468:	8f858018 	lw	a1,-32744\(gp\)
1000046c:	8f858038 	lw	a1,-32712\(gp\)
10000470:	10000010 	b	100004b4 <fn2>
10000474:	00000000 	nop
10000478:	8f858024 	lw	a1,-32732\(gp\)
1000047c:	1000ff0c 	b	100000b0 <fn>
10000480:	00000000 	nop
10000484:	8f85801c 	lw	a1,-32740\(gp\)
10000488:	1000000a 	b	100004b4 <fn2>
1000048c:	8ca50574 	lw	a1,1396\(a1\)
10000490:	8f85801c 	lw	a1,-32740\(gp\)
10000494:	1000ff06 	b	100000b0 <fn>
10000498:	8ca50508 	lw	a1,1288\(a1\)
1000049c:	8f81801c 	lw	at,-32740\(gp\)
100004a0:	00250821 	addu	at,at,a1
100004a4:	10000003 	b	100004b4 <fn2>
100004a8:	8c250596 	lw	a1,1430\(at\)
	\.\.\.

100004b4 <fn2>:
	\.\.\.
Disassembly of section \.data:

100104c0 <_fdata>:
	\.\.\.

100104fc <dg1>:
	\.\.\.

10010538 <sp2>:
	\.\.\.

10010574 <dg2>:
	\.\.\.
Disassembly of section \.got:

100105b0 <_GLOBAL_OFFSET_TABLE_>:
100105b0:	00000000 	.*
100105b4:	80000000 	.*
100105b8:	100104fc 	.*
100105bc:	10010000 	.*
100105c0:	10010508 	.*
100105c4:	1002e73c 	.*
100105c8:	1001051e 	.*
100105cc:	10010534 	.*
100105d0:	100000b0 	.*
100105d4:	10010574 	.*
100105d8:	10010580 	.*
100105dc:	1002e7b4 	.*
100105e0:	10010596 	.*
100105e4:	100105ac 	.*
100105e8:	100004b4 	.*
100105ec:	00000000 	.*
	\.\.\.
#pass
@


1.8
log
@	gas/testsuite/
	* gas/mips/mips.exp: Set has_newabi for mips*-sde-elf* too.
	* gas/mips/elf-rel-got-n32.s: Adjust padding.
	* gas/mips/elf-rel-got-n64.s: Likewise.
	* gas/mips/elf-rel23.s: Likewise.
	* gas/mips/elf-rel28.s: Likewise.
	* gas/mips/n32-consec.s: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Adjust output expected.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel23.d: Likewise.
	* gas/mips/elf-rel23a.d: Likewise.
	* gas/mips/elf-rel23b.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.

	ld/testsuite/
	* lib/ld-lib.exp (run_dump_test): Implement the EXTRA_OPTIONS
	argument and the "dump" keyword.
	* ld-mips-elf/emit-relocs-1a.s: Make section alignment uniform
	across targets.
	* ld-mips-elf/emit-relocs-1b.s: Likewise.
	* ld-mips-elf/jalbal.s: Adjust padding.
	* ld-mips-elf/elf-rel-got-n32-embed.d: New test.
	* ld-mips-elf/elf-rel-got-n64-embed.d: New test.
	* ld-mips-elf/elf-rel-xgot-n32-embed.d: New test.
	* ld-mips-elf/elf-rel-xgot-n64-embed.d: New test.
	* ld-mips-elf/elf-rel-got-n32.d: Remove -melf32btsmipn32.
	* ld-mips-elf/elf-rel-got-n64.d: Remove -melf64btsmip.  Adjust
	output.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Remove -melf64btsmip.
	* ld-mips-elf/elf-rel-xgot-n32.d: Remove -melf32btsmipn32.
	Adjust output.
	* ld-mips-elf/elf-rel-xgot-n64.d: Remove -melf64btsmip.  Adjust
	output.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/reloc-1-n64.d: Remove -melf64btsmip.
	* ld-mips-elf/mips-elf.exp: Set has_newabi for mips*-sde-elf*
	too.  Move tool flags from o32_as_flags and o32_ld_flags
	variables into abi_asflags and abi_ldflags arrays.  Adjust test
	cases run to use them.  Run the new tests.
@
text
@d2 1
a2 1
#as: -EB -n32 -KPIC
@


1.7
log
@bfd/
	* elfxx-mips.c (mips_got_entry): Adjust commentary.
	(mips_elf_create_local_got_entry): If given a symbol, check that it
	has been assigned to the local part of the GOT.
	(mips_elf_count_got_symbols): Take the bfd_link_info as argument
	instead of the master GOT.  Put all locally-binding symbols in
	the local area.
	(mips_elf_make_got_per_bfd): Use global_got_area to decide whether
	a symbol lives in the local or global area.
	(mips_elf_local_relocation_p): Remove check_forced argument and
	retain only the !check_forced behavior.
	(mips_elf_calculate_relocation): Adjust call accordingly.
	Use global_got_area to decide whether an output relocation
	should be local or global.  Explicitly decay R_MIPS_GOT_PAGE
	into R_MIPS_GOT_DISP where appropriate.  Fix selection of
	local vs. global semantics for R_MIPS*_26.  Remove redundant
	reevaluation of what is stored in was_local_p.
	(mips_elf_create_dynamic_relocation): Use global_got_area to decide
	whether the relocation should be against a global or local symbol.
	(mips_elf_lay_out_got): Update the GOT traversal after the above
	change to mips_elf_count_got_symbols.
	(mips_elf_adjust_addend): Adjust call to mips_elf_local_relocation_p.
	(_bfd_mips_elf_relocate_section): Likewise.
	(_bfd_mips_elf_finish_dynamic_symbol): Use global_got_area to decide
	whether the symbol has a global got entry.
	(_bfd_mips_vxworks_finish_dynamic_symbol): Likewise.

ld/testsuite/
	* ld-mips-elf/elf-rel-got-n32.d: Swap two local GOT entries
	and remove some duplication between the global and local GOT
	entries.  Adjust GP offsets accordingly.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32.d: Reorder GOT entries and update
	GP offsets accordingly.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/mips16-pic-1.gd: Move all global GOT entries to
	the local GOT.
	* ld-mips-elf/mips16-pic-1.dd: Update GP offsets accordingly.
	* ld-mips-elf/multi-got-no-shared.d: Adjust GP setup for
	smaller GOT sizes.
@
text
@d4 1
a4 1
#ld: -melf32btsmipn32
@


1.7.8.1
log
@bfd/
2012-08-09  Maciej W. Rozycki  <macro@@codesourcery.com>

	* elfxx-mips.c (LA25_LUI_MICROMIPS_1, LA25_LUI_MICROMIPS_2):
	Remove macros, folding them into...
	(LA25_LUI_MICROMIPS): ... this new macro.
	(LA25_J_MICROMIPS_1, LA25_J_MICROMIPS_2): Likewise into...
	(LA25_J_MICROMIPS): ... this new macro.
	(LA25_ADDIU_MICROMIPS_1, LA25_ADDIU_MICROMIPS_2): Likewise
	into...
	(LA25_ADDIU_MICROMIPS): ... this new macro.
	(bfd_put_micromips_32, bfd_get_micromips_32): New functions.
	(mips_elf_create_la25_stub): Use them.
	(check_br32_dslot, check_br32, check_relocated_bzc): Likewise.
	(_bfd_mips_elf_relax_section): Likewise.

gas/
	* config/tc-mips.c (NO_ISA_COP, COP_INSN): Remove macros.
	(is_opcode_valid): Remove coprocessor instruction exclusions.
	Replace OPCODE_IS_MEMBER with opcode_is_member.
	(is_opcode_valid_16): Replace OPCODE_IS_MEMBER with
	opcode_is_member.
	(macro): Remove coprocessor instruction exclusions.

gas/
	* gas/mips/mips.exp: Set has_newabi for all Linux targets.
	* gas/mips/cfi-n64-1.d: Adjust for targets that do not infer the
	ISA from the ABI.
	* gas/mips/elf-rel-got-n32.d: Likewise.
	* gas/mips/elf-rel-got-n64.d: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Likewise.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel18.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.
	* gas/mips/elf-rel28-n64.d: Likewise.
	* gas/mips/jal-newabi.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/macro-warn-1-n32.d: Likewise.
	* gas/mips/macro-warn-2-n32.d: Likewise.
	* gas/mips/n32-consec.d: Likewise.

include/
2012-08-13  Richard Sandiford  <rdsandiford@@googlemail.com>
            Maciej W. Rozycki  <macro@@codesourcery.com>

	* mips.h (mips_opcode): Add the exclusions field.
	(OPCODE_IS_MEMBER): Remove macro.
	(cpu_is_member): New inline function.
	(opcode_is_member): Likewise.

ld/
	* emulparams/elf32bmip.sh: Make _gp hidden.
	* emulparams/elf32bmipn32-defs.sh: Likewise.
	* emulparams/elf32mipswindiss.sh: Likewise.
	* scripttempl/mips.sc: Likewise.

ld/
2012-08-28  Maciej W. Rozycki  <macro@@codesourcery.com>

	* ld-elf/export-class.sd: New test.
	* ld-elf/export-class.vd: New test.
	* ld-elf/export-class-def.s: New test source.
	* ld-elf/export-class-dep.s: New test source.
	* ld-elf/export-class-lib.s: New test source.
	* ld-elf/export-class-ref.s: New test source.
	* ld-elf/export-class-lib.ver: New test version script.
	* ld-elf/export-class.exp: New test script.
	* ld-arm/arm-export-class.rd: New test.
	* ld-arm/arm-export-class.xd: New test.
	* ld-arm/export-class.exp: New test script.
	* ld-i386/i386-export-class.rd: New test.
	* ld-i386/i386-export-class.xd: New test.
	* ld-i386/export-class.exp: New test script.
	* ld-mips-elf/mips-32-export-class.rd: New test.
	* ld-mips-elf/mips-32-export-class.xd: New test.
	* ld-mips-elf/mips-64-export-class.rd: New test.
	* ld-mips-elf/mips-64-export-class.xd: New test.
	* ld-mips-elf/export-class.exp: New test script.
	* ld-powerpc/powerpc-32-export-class.rd: New test.
	* ld-powerpc/powerpc-32-export-class.xd: New test.
	* ld-powerpc/powerpc-64-export-class.rd: New test.
	* ld-powerpc/powerpc-64-export-class.xd: New test.
	* ld-powerpc/export-class.exp: New test script.
	* ld-x86-64/x86-64-64-export-class.rd: New test.
	* ld-x86-64/x86-64-x32-export-class.rd: New test.
	* ld-x86-64/export-class.exp: New test script.

opcodes/
2012-08-14  Maciej W. Rozycki  <macro@@codesourcery.com>

	* mips-dis.c (print_insn_args): Add GET_OP and GET_OP_S local
	macros, use local variables for info struct member accesses,
	update the type of the variable used to hold the instruction
	word.
	(print_insn_mips, print_mips16_insn_arg): Likewise.
	(print_insn_mips16): Add GET_OP and GET_OP_S local macros, use
	local variables for info struct member accesses.
	(print_insn_micromips): Add GET_OP_S local macro.
	(_print_insn_mips): Update the type of the variable used to hold
	the instruction word.
@
text
@d2 1
a2 1
#as: -march=from-abi -EB -n32 -KPIC
d4 1
a4 1
#ld:
@


1.6
log
@gas/testsuite/
	* gas/mips/mips16-dwarf2-n32.d: Expect odd addresses.

ld/testsuite/
	* ld-mips-elf/eh-frame1-n32.d: Change "the section \.eh_frame"
	to "the \.eh_frame section".
	* ld-mips-elf/eh-frame1-n64.d: Likewise.
	* ld-mips-elf/eh-frame2-n32.d: Likewise.
	* ld-mips-elf/eh-frame2-n64.d: Likewise.
	* ld-mips-elf/eh-frame3.d: Likewise.
	* ld-mips-elf/eh-frame4.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32.d: Expect bals.
	* ld-mips-elf/elf-rel-xgot-n32.d: Likewise.
	* ld-mips-elf/mips-elf.exp: Force the MIPS16 PIC tests to use -mips1.
@
text
@d19 2
a20 2
100000b0:	8f858064 	lw	a1,-32668\(gp\)
100000b4:	8f858064 	lw	a1,-32668\(gp\)
d22 1
a22 1
100000bc:	8f858064 	lw	a1,-32668\(gp\)
d26 1
a26 1
100000cc:	8f858064 	lw	a1,-32668\(gp\)
d28 1
a28 1
100000d4:	8f858064 	lw	a1,-32668\(gp\)
d31 1
a31 1
100000e0:	8f858064 	lw	a1,-32668\(gp\)
d36 1
a36 1
100000f4:	8f858018 	lw	a1,-32744\(gp\)
d38 1
a38 1
100000fc:	8f858018 	lw	a1,-32744\(gp\)
d40 1
a40 1
10000104:	8f858018 	lw	a1,-32744\(gp\)
d43 1
a43 1
10000110:	8f858018 	lw	a1,-32744\(gp\)
d46 1
a46 1
1000011c:	8f818018 	lw	at,-32744\(gp\)
d49 1
a49 1
10000128:	8f818018 	lw	at,-32744\(gp\)
d52 1
a52 1
10000134:	8f818064 	lw	at,-32668\(gp\)
d55 1
a55 1
10000140:	8f818064 	lw	at,-32668\(gp\)
d59 1
a59 1
10000150:	8f818064 	lw	at,-32668\(gp\)
d63 1
a63 1
10000160:	8f818064 	lw	at,-32668\(gp\)
d68 1
a68 1
10000174:	8f818064 	lw	at,-32668\(gp\)
d73 1
a73 1
10000188:	8f818064 	lw	at,-32668\(gp\)
d78 1
a78 1
1000019c:	8f85801c 	lw	a1,-32740\(gp\)
d81 1
a81 1
100001a8:	8f85801c 	lw	a1,-32740\(gp\)
d87 1
a87 1
100001c0:	8f858018 	lw	a1,-32744\(gp\)
d89 1
a89 1
100001c8:	8f858018 	lw	a1,-32744\(gp\)
d91 1
a91 1
100001d0:	8f858018 	lw	a1,-32744\(gp\)
d94 1
a94 1
100001dc:	8f858018 	lw	a1,-32744\(gp\)
d97 1
a97 1
100001e8:	8f818018 	lw	at,-32744\(gp\)
d100 1
a100 1
100001f4:	8f818018 	lw	at,-32744\(gp\)
d103 1
a103 1
10000200:	8f81801c 	lw	at,-32740\(gp\)
d109 1
a109 1
10000218:	8f81801c 	lw	at,-32740\(gp\)
d125 1
a125 1
10000258:	8f85805c 	lw	a1,-32676\(gp\)
d127 1
a127 1
10000260:	8f99805c 	lw	t9,-32676\(gp\)
d129 1
a129 1
10000268:	8f99805c 	lw	t9,-32676\(gp\)
d135 2
a136 2
10000280:	8f858068 	lw	a1,-32664\(gp\)
10000284:	8f858068 	lw	a1,-32664\(gp\)
d138 1
a138 1
1000028c:	8f858068 	lw	a1,-32664\(gp\)
d142 1
a142 1
1000029c:	8f858068 	lw	a1,-32664\(gp\)
d144 1
a144 1
100002a4:	8f858068 	lw	a1,-32664\(gp\)
d147 1
a147 1
100002b0:	8f858068 	lw	a1,-32664\(gp\)
d152 1
a152 1
100002c4:	8f858018 	lw	a1,-32744\(gp\)
d154 1
a154 1
100002cc:	8f858018 	lw	a1,-32744\(gp\)
d156 1
a156 1
100002d4:	8f858018 	lw	a1,-32744\(gp\)
d159 1
a159 1
100002e0:	8f858018 	lw	a1,-32744\(gp\)
d162 1
a162 1
100002ec:	8f818018 	lw	at,-32744\(gp\)
d165 1
a165 1
100002f8:	8f818018 	lw	at,-32744\(gp\)
d168 1
a168 1
10000304:	8f818068 	lw	at,-32664\(gp\)
d171 1
a171 1
10000310:	8f818068 	lw	at,-32664\(gp\)
d175 1
a175 1
10000320:	8f818068 	lw	at,-32664\(gp\)
d179 1
a179 1
10000330:	8f818068 	lw	at,-32664\(gp\)
d184 1
a184 1
10000344:	8f818068 	lw	at,-32664\(gp\)
d189 1
a189 1
10000358:	8f818068 	lw	at,-32664\(gp\)
d203 1
a203 1
10000390:	8f858018 	lw	a1,-32744\(gp\)
d205 1
a205 1
10000398:	8f858018 	lw	a1,-32744\(gp\)
d207 1
a207 1
100003a0:	8f858018 	lw	a1,-32744\(gp\)
d210 1
a210 1
100003ac:	8f858018 	lw	a1,-32744\(gp\)
d213 1
a213 1
100003b8:	8f818018 	lw	at,-32744\(gp\)
d216 1
a216 1
100003c4:	8f818018 	lw	at,-32744\(gp\)
d241 1
a241 1
10000428:	8f858060 	lw	a1,-32672\(gp\)
d243 1
a243 1
10000430:	8f998060 	lw	t9,-32672\(gp\)
d245 1
a245 1
10000438:	8f998060 	lw	t9,-32672\(gp\)
d252 2
a253 2
10000454:	8f858064 	lw	a1,-32668\(gp\)
10000458:	8f858018 	lw	a1,-32744\(gp\)
d257 1
a257 1
10000468:	8f85801c 	lw	a1,-32740\(gp\)
d264 1
a264 1
10000484:	8f858018 	lw	a1,-32744\(gp\)
d267 1
a267 1
10000490:	8f858018 	lw	a1,-32744\(gp\)
d270 1
a270 1
1000049c:	8f818018 	lw	at,-32744\(gp\)
d296 2
a297 2
100105b8:	10010000 	.*
100105bc:	100104fc 	.*
a310 4
100105fc:	100000b0 	.*
10010600:	100004b4 	.*
10010604:	100104fc 	.*
10010608:	10010574 	.*
@


1.5
log
@ld/testsuite/
	* ld-mips-elf/elf-rel-got-n32.d: Adjust page gap from 0x100000
	to 0x10000.  Move .reginfo before .text and bump .text addresses
	by 0x10 to make room.  Move data segment down by 0x10 bytes to
	account for new size of text segment.
	* ld-mips-elf/elf-rel-xgot-n32.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Adjust page gap from
	0x100000 to 0x10000.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
@
text
@d130 1
a130 1
1000026c:	0320f809 	jalr	t9
d133 1
a133 1
10000278:	0320f809 	jalr	t9
d246 1
a246 1
1000043c:	0320f809 	jalr	t9
d249 1
a249 1
10000448:	0320f809 	jalr	t9
@


1.5.10.1
log
@gas/testsuite/
	* gas/mips/mips16-dwarf2-n32.d: Expect odd addresses.

ld/testsuite/
	* ld-mips-elf/eh-frame1-n32.d: Change "the section \.eh_frame"
	to "the \.eh_frame section".
	* ld-mips-elf/eh-frame1-n64.d: Likewise.
	* ld-mips-elf/eh-frame2-n32.d: Likewise.
	* ld-mips-elf/eh-frame2-n64.d: Likewise.
	* ld-mips-elf/eh-frame3.d: Likewise.
	* ld-mips-elf/eh-frame4.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32.d: Expect bals.
	* ld-mips-elf/elf-rel-xgot-n32.d: Likewise.
	* ld-mips-elf/mips-elf.exp: Force the MIPS16 PIC tests to use -mips1.
@
text
@d130 1
a130 1
1000026c:	0411ff90 	bal	100000b0 <fn>
d133 1
a133 1
10000278:	0411ff8d 	bal	100000b0 <fn>
d246 1
a246 1
1000043c:	0411001d 	bal	100004b4 <fn2>
d249 1
a249 1
10000448:	0411001a 	bal	100004b4 <fn2>
@


1.4
log
@	* ld-mips-elf/elf-rel-got-n32.d, ld-mips-elf/elf-rel-got-n64-linux.d,
	ld-mips-elf/elf-rel-got-n64.d, ld-mips-elf/elf-rel-xgot-n32.d,
	ld-mips-elf/elf-rel-xgot-n64-linux.d, ld-mips-elf/elf-rel-xgot-n64.d,
	ld-mips-elf/jalbal.d: Force big-endian.
	* ld-mips-elf/multi-got-1.d: Make more flexible.
	* ld-mips-elf/rel32-n32.d, ld-mips-elf/rel32-o32.d,
	ld-mips-elf/rel64.d: Update offsets.
@
text
@d9 7
d18 4
a21 8
100000a0 <fn>:
100000a0:	8f858064 	lw	a1,-32668\(gp\)
100000a4:	8f858064 	lw	a1,-32668\(gp\)
100000a8:	24a5000c 	addiu	a1,a1,12
100000ac:	8f858064 	lw	a1,-32668\(gp\)
100000b0:	3c010001 	lui	at,0x1
100000b4:	3421e240 	ori	at,at,0xe240
100000b8:	00a12821 	addu	a1,a1,at
d23 13
a35 13
100000c0:	00b12821 	addu	a1,a1,s1
100000c4:	8f858064 	lw	a1,-32668\(gp\)
100000c8:	24a5000c 	addiu	a1,a1,12
100000cc:	00b12821 	addu	a1,a1,s1
100000d0:	8f858064 	lw	a1,-32668\(gp\)
100000d4:	3c010001 	lui	at,0x1
100000d8:	3421e240 	ori	at,at,0xe240
100000dc:	00a12821 	addu	a1,a1,at
100000e0:	00b12821 	addu	a1,a1,s1
100000e4:	8f858018 	lw	a1,-32744\(gp\)
100000e8:	8ca5050c 	lw	a1,1292\(a1\)
100000ec:	8f858018 	lw	a1,-32744\(gp\)
100000f0:	8ca50518 	lw	a1,1304\(a1\)
d37 16
a52 16
100000f8:	00b12821 	addu	a1,a1,s1
100000fc:	8ca5050c 	lw	a1,1292\(a1\)
10000100:	8f858018 	lw	a1,-32744\(gp\)
10000104:	00b12821 	addu	a1,a1,s1
10000108:	8ca50518 	lw	a1,1304\(a1\)
1000010c:	8f818018 	lw	at,-32744\(gp\)
10000110:	00250821 	addu	at,at,a1
10000114:	8c25052e 	lw	a1,1326\(at\)
10000118:	8f818018 	lw	at,-32744\(gp\)
1000011c:	00250821 	addu	at,at,a1
10000120:	ac250544 	sw	a1,1348\(at\)
10000124:	8f818064 	lw	at,-32668\(gp\)
10000128:	88250000 	lwl	a1,0\(at\)
1000012c:	98250003 	lwr	a1,3\(at\)
10000130:	8f818064 	lw	at,-32668\(gp\)
10000134:	2421000c 	addiu	at,at,12
d56 1
a56 1
10000144:	00310821 	addu	at,at,s1
d60 19
a78 19
10000154:	2421000c 	addiu	at,at,12
10000158:	00310821 	addu	at,at,s1
1000015c:	88250000 	lwl	a1,0\(at\)
10000160:	98250003 	lwr	a1,3\(at\)
10000164:	8f818064 	lw	at,-32668\(gp\)
10000168:	24210022 	addiu	at,at,34
1000016c:	00250821 	addu	at,at,a1
10000170:	88250000 	lwl	a1,0\(at\)
10000174:	98250003 	lwr	a1,3\(at\)
10000178:	8f818064 	lw	at,-32668\(gp\)
1000017c:	24210038 	addiu	at,at,56
10000180:	00250821 	addu	at,at,a1
10000184:	a8250000 	swl	a1,0\(at\)
10000188:	b8250003 	swr	a1,3\(at\)
1000018c:	8f85801c 	lw	a1,-32740\(gp\)
10000190:	8f858020 	lw	a1,-32736\(gp\)
10000194:	8f858024 	lw	a1,-32732\(gp\)
10000198:	8f85801c 	lw	a1,-32740\(gp\)
1000019c:	00b12821 	addu	a1,a1,s1
d80 2
a81 2
100001a4:	00b12821 	addu	a1,a1,s1
100001a8:	8f858024 	lw	a1,-32732\(gp\)
d83 4
a86 4
100001b0:	8f858018 	lw	a1,-32744\(gp\)
100001b4:	8ca5050c 	lw	a1,1292\(a1\)
100001b8:	8f858018 	lw	a1,-32744\(gp\)
100001bc:	8ca50518 	lw	a1,1304\(a1\)
d88 19
a106 19
100001c4:	00b12821 	addu	a1,a1,s1
100001c8:	8ca5050c 	lw	a1,1292\(a1\)
100001cc:	8f858018 	lw	a1,-32744\(gp\)
100001d0:	00b12821 	addu	a1,a1,s1
100001d4:	8ca50518 	lw	a1,1304\(a1\)
100001d8:	8f818018 	lw	at,-32744\(gp\)
100001dc:	00250821 	addu	at,at,a1
100001e0:	8c25052e 	lw	a1,1326\(at\)
100001e4:	8f818018 	lw	at,-32744\(gp\)
100001e8:	00250821 	addu	at,at,a1
100001ec:	ac250544 	sw	a1,1348\(at\)
100001f0:	8f81801c 	lw	at,-32740\(gp\)
100001f4:	88250000 	lwl	a1,0\(at\)
100001f8:	98250003 	lwr	a1,3\(at\)
100001fc:	8f818020 	lw	at,-32736\(gp\)
10000200:	88250000 	lwl	a1,0\(at\)
10000204:	98250003 	lwr	a1,3\(at\)
10000208:	8f81801c 	lw	at,-32740\(gp\)
1000020c:	00310821 	addu	at,at,s1
d109 1
a109 1
10000218:	8f818020 	lw	at,-32736\(gp\)
d113 2
a114 2
10000228:	8f818028 	lw	at,-32728\(gp\)
1000022c:	00250821 	addu	at,at,a1
d117 1
a117 1
10000238:	8f81802c 	lw	at,-32724\(gp\)
d119 9
a127 9
10000240:	a8250000 	swl	a1,0\(at\)
10000244:	b8250003 	swr	a1,3\(at\)
10000248:	8f85805c 	lw	a1,-32676\(gp\)
1000024c:	8f858030 	lw	a1,-32720\(gp\)
10000250:	8f99805c 	lw	t9,-32676\(gp\)
10000254:	8f998030 	lw	t9,-32720\(gp\)
10000258:	8f99805c 	lw	t9,-32676\(gp\)
1000025c:	0320f809 	jalr	t9
10000260:	00000000 	nop
d129 9
a137 9
10000268:	0320f809 	jalr	t9
1000026c:	00000000 	nop
10000270:	8f858068 	lw	a1,-32664\(gp\)
10000274:	8f858068 	lw	a1,-32664\(gp\)
10000278:	24a5000c 	addiu	a1,a1,12
1000027c:	8f858068 	lw	a1,-32664\(gp\)
10000280:	3c010001 	lui	at,0x1
10000284:	3421e240 	ori	at,at,0xe240
10000288:	00a12821 	addu	a1,a1,at
d139 13
a151 13
10000290:	00b12821 	addu	a1,a1,s1
10000294:	8f858068 	lw	a1,-32664\(gp\)
10000298:	24a5000c 	addiu	a1,a1,12
1000029c:	00b12821 	addu	a1,a1,s1
100002a0:	8f858068 	lw	a1,-32664\(gp\)
100002a4:	3c010001 	lui	at,0x1
100002a8:	3421e240 	ori	at,at,0xe240
100002ac:	00a12821 	addu	a1,a1,at
100002b0:	00b12821 	addu	a1,a1,s1
100002b4:	8f858018 	lw	a1,-32744\(gp\)
100002b8:	8ca50584 	lw	a1,1412\(a1\)
100002bc:	8f858018 	lw	a1,-32744\(gp\)
100002c0:	8ca50590 	lw	a1,1424\(a1\)
d153 16
a168 16
100002c8:	00b12821 	addu	a1,a1,s1
100002cc:	8ca50584 	lw	a1,1412\(a1\)
100002d0:	8f858018 	lw	a1,-32744\(gp\)
100002d4:	00b12821 	addu	a1,a1,s1
100002d8:	8ca50590 	lw	a1,1424\(a1\)
100002dc:	8f818018 	lw	at,-32744\(gp\)
100002e0:	00250821 	addu	at,at,a1
100002e4:	8c2505a6 	lw	a1,1446\(at\)
100002e8:	8f818018 	lw	at,-32744\(gp\)
100002ec:	00250821 	addu	at,at,a1
100002f0:	ac2505bc 	sw	a1,1468\(at\)
100002f4:	8f818068 	lw	at,-32664\(gp\)
100002f8:	88250000 	lwl	a1,0\(at\)
100002fc:	98250003 	lwr	a1,3\(at\)
10000300:	8f818068 	lw	at,-32664\(gp\)
10000304:	2421000c 	addiu	at,at,12
d172 1
a172 1
10000314:	00310821 	addu	at,at,s1
d176 19
a194 19
10000324:	2421000c 	addiu	at,at,12
10000328:	00310821 	addu	at,at,s1
1000032c:	88250000 	lwl	a1,0\(at\)
10000330:	98250003 	lwr	a1,3\(at\)
10000334:	8f818068 	lw	at,-32664\(gp\)
10000338:	24210022 	addiu	at,at,34
1000033c:	00250821 	addu	at,at,a1
10000340:	88250000 	lwl	a1,0\(at\)
10000344:	98250003 	lwr	a1,3\(at\)
10000348:	8f818068 	lw	at,-32664\(gp\)
1000034c:	24210038 	addiu	at,at,56
10000350:	00250821 	addu	at,at,a1
10000354:	a8250000 	swl	a1,0\(at\)
10000358:	b8250003 	swr	a1,3\(at\)
1000035c:	8f858034 	lw	a1,-32716\(gp\)
10000360:	8f858038 	lw	a1,-32712\(gp\)
10000364:	8f85803c 	lw	a1,-32708\(gp\)
10000368:	8f858034 	lw	a1,-32716\(gp\)
1000036c:	00b12821 	addu	a1,a1,s1
d196 2
a197 2
10000374:	00b12821 	addu	a1,a1,s1
10000378:	8f85803c 	lw	a1,-32708\(gp\)
d199 4
a202 4
10000380:	8f858018 	lw	a1,-32744\(gp\)
10000384:	8ca50584 	lw	a1,1412\(a1\)
10000388:	8f858018 	lw	a1,-32744\(gp\)
1000038c:	8ca50590 	lw	a1,1424\(a1\)
d204 19
a222 19
10000394:	00b12821 	addu	a1,a1,s1
10000398:	8ca50584 	lw	a1,1412\(a1\)
1000039c:	8f858018 	lw	a1,-32744\(gp\)
100003a0:	00b12821 	addu	a1,a1,s1
100003a4:	8ca50590 	lw	a1,1424\(a1\)
100003a8:	8f818018 	lw	at,-32744\(gp\)
100003ac:	00250821 	addu	at,at,a1
100003b0:	8c2505a6 	lw	a1,1446\(at\)
100003b4:	8f818018 	lw	at,-32744\(gp\)
100003b8:	00250821 	addu	at,at,a1
100003bc:	ac2505bc 	sw	a1,1468\(at\)
100003c0:	8f818034 	lw	at,-32716\(gp\)
100003c4:	88250000 	lwl	a1,0\(at\)
100003c8:	98250003 	lwr	a1,3\(at\)
100003cc:	8f818038 	lw	at,-32712\(gp\)
100003d0:	88250000 	lwl	a1,0\(at\)
100003d4:	98250003 	lwr	a1,3\(at\)
100003d8:	8f818034 	lw	at,-32716\(gp\)
100003dc:	00310821 	addu	at,at,s1
d225 1
a225 1
100003e8:	8f818038 	lw	at,-32712\(gp\)
d229 2
a230 2
100003f8:	8f818040 	lw	at,-32704\(gp\)
100003fc:	00250821 	addu	at,at,a1
d233 1
a233 1
10000408:	8f818044 	lw	at,-32700\(gp\)
d235 9
a243 9
10000410:	a8250000 	swl	a1,0\(at\)
10000414:	b8250003 	swr	a1,3\(at\)
10000418:	8f858060 	lw	a1,-32672\(gp\)
1000041c:	8f858048 	lw	a1,-32696\(gp\)
10000420:	8f998060 	lw	t9,-32672\(gp\)
10000424:	8f998048 	lw	t9,-32696\(gp\)
10000428:	8f998060 	lw	t9,-32672\(gp\)
1000042c:	0320f809 	jalr	t9
10000430:	00000000 	nop
d245 29
a273 25
10000438:	0320f809 	jalr	t9
1000043c:	00000000 	nop
10000440:	1000ff17 	b	100000a0 <fn>
10000444:	8f858064 	lw	a1,-32668\(gp\)
10000448:	8f858018 	lw	a1,-32744\(gp\)
1000044c:	10000015 	b	100004a4 <fn2>
10000450:	8ca50584 	lw	a1,1412\(a1\)
10000454:	1000ff12 	b	100000a0 <fn>
10000458:	8f85801c 	lw	a1,-32740\(gp\)
1000045c:	8f858038 	lw	a1,-32712\(gp\)
10000460:	10000010 	b	100004a4 <fn2>
10000464:	00000000 	nop
10000468:	8f858024 	lw	a1,-32732\(gp\)
1000046c:	1000ff0c 	b	100000a0 <fn>
10000470:	00000000 	nop
10000474:	8f858018 	lw	a1,-32744\(gp\)
10000478:	1000000a 	b	100004a4 <fn2>
1000047c:	8ca50584 	lw	a1,1412\(a1\)
10000480:	8f858018 	lw	a1,-32744\(gp\)
10000484:	1000ff06 	b	100000a0 <fn>
10000488:	8ca50518 	lw	a1,1304\(a1\)
1000048c:	8f818018 	lw	at,-32744\(gp\)
10000490:	00250821 	addu	at,at,a1
10000494:	10000003 	b	100004a4 <fn2>
10000498:	8c2505a6 	lw	a1,1446\(at\)
d276 1
a276 6
100004a4 <fn2>:
	\.\.\.
Disassembly of section \.reginfo:

100004b0 <\.reginfo>:
100004b0:	92020022 	.*
a277 1
100004c4:	101085b0 	.*
d280 1
a280 1
101004d0 <_fdata>:
d283 1
a283 1
1010050c <dg1>:
d286 1
a286 1
10100548 <sp2>:
d289 1
a289 1
10100584 <dg2>:
d293 17
a309 17
101005c0 <_GLOBAL_OFFSET_TABLE_>:
101005c0:	00000000 	.*
101005c4:	80000000 	.*
101005c8:	10100000 	.*
101005cc:	1010050c 	.*
101005d0:	10100518 	.*
101005d4:	1011e74c 	.*
101005d8:	1010052e 	.*
101005dc:	10100544 	.*
101005e0:	100000a0 	.*
101005e4:	10100584 	.*
101005e8:	10100590 	.*
101005ec:	1011e7c4 	.*
101005f0:	101005a6 	.*
101005f4:	101005bc 	.*
101005f8:	100004a4 	.*
101005fc:	00000000 	.*
d311 4
a314 4
1010060c:	100000a0 	.*
10100610:	100004a4 	.*
10100614:	1010050c 	.*
10100618:	10100584 	.*
@


1.3
log
@bfd/
	* elfxx-mips.c (mips_elf_calculate_relocation): Use
	_bfd_elf_symbol_refs_local_p to decide whether to decay
	a GOT_PAGE/GOT_OFST pair to GOT_DISP/addend.
	(_bfd_mips_elf_check_relocs): Add a global GOT entry for GOT_PAGE
	relocs if the symbol wasn't defined by a regular object file.
	Don't check the symbol's dynindx.

ld/testsuite/
	* ld-mips/elf/elf-rel-xgot-{n32,n64-linux}.d: Update after 2004-02-02
	changes to the way large constants are added.
	* ld-mips/elf/elf-rel-got-{n32,n64-linux}.d: Likewise.  Adjust order
	of GOT entries after today's change to the handling of GOT_PAGE
	relocations.
@
text
@d2 1
a2 1
#as: -n32 -KPIC
@


1.2
log
@	* config/tc-mips.c (ADDRESS_ADD_INSN,ADDRESS_ADDI_INSN): Remove
	special handling for n32 ABI.
	(macro): Likewise.
	* gas/mips/elf-rel-got-n32.d: Remove special handling for n32 ABI.
	* gas/mips/elf-rel-xgot-n32.d: Likewise.
	* gas/mips/jal-newabi.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32.d: Remove special handling for n32 ABI.
	* ld-mips-elf/elf-rel-xgot-n32.d: Likewise.
@
text
@d16 2
a17 2
100000b0:	3c010002 	lui	at,0x2
100000b4:	2421e240 	addiu	at,at,-7616
d25 2
a26 2
100000d4:	3c010002 	lui	at,0x2
100000d8:	2421e240 	addiu	at,at,-7616
d29 5
a33 5
100000e4:	8f858064 	lw	a1,-32668\(gp\)
100000e8:	8ca50000 	lw	a1,0\(a1\)
100000ec:	8f858064 	lw	a1,-32668\(gp\)
100000f0:	8ca5000c 	lw	a1,12\(a1\)
100000f4:	8f858064 	lw	a1,-32668\(gp\)
d35 2
a36 2
100000fc:	8ca50000 	lw	a1,0\(a1\)
10000100:	8f858064 	lw	a1,-32668\(gp\)
d38 2
a39 2
10000108:	8ca5000c 	lw	a1,12\(a1\)
1000010c:	8f818064 	lw	at,-32668\(gp\)
d41 2
a42 2
10000114:	8c250022 	lw	a1,34\(at\)
10000118:	8f818064 	lw	at,-32668\(gp\)
d44 1
a44 1
10000120:	ac250038 	sw	a1,56\(at\)
d71 4
a74 4
1000018c:	8f858018 	lw	a1,-32744\(gp\)
10000190:	8f85801c 	lw	a1,-32740\(gp\)
10000194:	8f858020 	lw	a1,-32736\(gp\)
10000198:	8f858018 	lw	a1,-32744\(gp\)
d76 1
a76 1
100001a0:	8f85801c 	lw	a1,-32740\(gp\)
d78 1
a78 1
100001a8:	8f858020 	lw	a1,-32736\(gp\)
d80 1
a80 1
100001b0:	8f858024 	lw	a1,-32732\(gp\)
d82 1
a82 1
100001b8:	8f858024 	lw	a1,-32732\(gp\)
d84 1
a84 1
100001c0:	8f858024 	lw	a1,-32732\(gp\)
d87 1
a87 1
100001cc:	8f858024 	lw	a1,-32732\(gp\)
d90 1
a90 1
100001d8:	8f818024 	lw	at,-32732\(gp\)
d93 1
a93 1
100001e4:	8f818024 	lw	at,-32732\(gp\)
d96 1
a96 1
100001f0:	8f818018 	lw	at,-32744\(gp\)
d99 1
a99 1
100001fc:	8f81801c 	lw	at,-32740\(gp\)
d102 1
a102 1
10000208:	8f818018 	lw	at,-32744\(gp\)
d106 1
a106 1
10000218:	8f81801c 	lw	at,-32740\(gp\)
d132 2
a133 2
10000280:	3c010002 	lui	at,0x2
10000284:	2421e240 	addiu	at,at,-7616
d141 2
a142 2
100002a4:	3c010002 	lui	at,0x2
100002a8:	2421e240 	addiu	at,at,-7616
d145 5
a149 5
100002b4:	8f858068 	lw	a1,-32664\(gp\)
100002b8:	8ca50000 	lw	a1,0\(a1\)
100002bc:	8f858068 	lw	a1,-32664\(gp\)
100002c0:	8ca5000c 	lw	a1,12\(a1\)
100002c4:	8f858068 	lw	a1,-32664\(gp\)
d151 2
a152 2
100002cc:	8ca50000 	lw	a1,0\(a1\)
100002d0:	8f858068 	lw	a1,-32664\(gp\)
d154 2
a155 2
100002d8:	8ca5000c 	lw	a1,12\(a1\)
100002dc:	8f818068 	lw	at,-32664\(gp\)
d157 2
a158 2
100002e4:	8c250022 	lw	a1,34\(at\)
100002e8:	8f818068 	lw	at,-32664\(gp\)
d160 1
a160 1
100002f0:	ac250038 	sw	a1,56\(at\)
d196 1
a196 1
10000380:	8f858024 	lw	a1,-32732\(gp\)
d198 1
a198 1
10000388:	8f858024 	lw	a1,-32732\(gp\)
d200 1
a200 1
10000390:	8f858024 	lw	a1,-32732\(gp\)
d203 1
a203 1
1000039c:	8f858024 	lw	a1,-32732\(gp\)
d206 1
a206 1
100003a8:	8f818024 	lw	at,-32732\(gp\)
d209 1
a209 1
100003b4:	8f818024 	lw	at,-32732\(gp\)
d246 1
a246 1
10000448:	8f858068 	lw	a1,-32664\(gp\)
d248 1
a248 1
10000450:	8ca50000 	lw	a1,0\(a1\)
d250 1
a250 1
10000458:	8f858018 	lw	a1,-32744\(gp\)
d254 1
a254 1
10000468:	8f858020 	lw	a1,-32736\(gp\)
d257 1
a257 1
10000474:	8f858024 	lw	a1,-32732\(gp\)
d260 1
a260 1
10000480:	8f858024 	lw	a1,-32732\(gp\)
d263 1
a263 1
1000048c:	8f818024 	lw	at,-32732\(gp\)
d295 4
a298 4
101005c8:	1010050c 	.*
101005cc:	10100518 	.*
101005d0:	1011e74c 	.*
101005d4:	10100000 	.*
d314 1
@


1.1
log
@* ld-mips-elf/elf-rel-got-n32.d,
ld-mips-elf/elf-rel-got-n64.d, ld-mips-elf/elf-rel-xgot-n32.d,
ld-mips-elf/elf-rel-xgot-n64.d: New.
* ld-mips-elf/mips-elf.exp (hasn32): Define as condition for
new tests to run.
@
text
@d14 1
a14 1
100000a8:	20a5000c 	addi	a1,a1,12
d17 2
a18 2
100000b4:	2021e240 	addi	at,at,-7616
100000b8:	00a12820 	add	a1,a1,at
d20 1
a20 1
100000c0:	00b12820 	add	a1,a1,s1
d22 2
a23 2
100000c8:	20a5000c 	addi	a1,a1,12
100000cc:	00b12820 	add	a1,a1,s1
d26 3
a28 3
100000d8:	2021e240 	addi	at,at,-7616
100000dc:	00a12820 	add	a1,a1,at
100000e0:	00b12820 	add	a1,a1,s1
d34 1
a34 1
100000f8:	00b12820 	add	a1,a1,s1
d37 1
a37 1
10000104:	00b12820 	add	a1,a1,s1
d40 1
a40 1
10000110:	00250820 	add	at,at,a1
d43 1
a43 1
1000011c:	00250820 	add	at,at,a1
d49 1
a49 1
10000134:	2021000c 	addi	at,at,12
d53 1
a53 1
10000144:	00310820 	add	at,at,s1
d57 2
a58 2
10000154:	2021000c 	addi	at,at,12
10000158:	00310820 	add	at,at,s1
d62 2
a63 2
10000168:	20210022 	addi	at,at,34
1000016c:	00250820 	add	at,at,a1
d67 2
a68 2
1000017c:	20210038 	addi	at,at,56
10000180:	00250820 	add	at,at,a1
d75 1
a75 1
1000019c:	00b12820 	add	a1,a1,s1
d77 1
a77 1
100001a4:	00b12820 	add	a1,a1,s1
d79 1
a79 1
100001ac:	00b12820 	add	a1,a1,s1
d85 1
a85 1
100001c4:	00b12820 	add	a1,a1,s1
d88 1
a88 1
100001d0:	00b12820 	add	a1,a1,s1
d91 1
a91 1
100001dc:	00250820 	add	at,at,a1
d94 1
a94 1
100001e8:	00250820 	add	at,at,a1
d103 1
a103 1
1000020c:	00310820 	add	at,at,s1
d107 1
a107 1
1000021c:	00310820 	add	at,at,s1
d111 1
a111 1
1000022c:	00250820 	add	at,at,a1
d115 1
a115 1
1000023c:	00250820 	add	at,at,a1
d130 1
a130 1
10000278:	20a5000c 	addi	a1,a1,12
d133 2
a134 2
10000284:	2021e240 	addi	at,at,-7616
10000288:	00a12820 	add	a1,a1,at
d136 1
a136 1
10000290:	00b12820 	add	a1,a1,s1
d138 2
a139 2
10000298:	20a5000c 	addi	a1,a1,12
1000029c:	00b12820 	add	a1,a1,s1
d142 3
a144 3
100002a8:	2021e240 	addi	at,at,-7616
100002ac:	00a12820 	add	a1,a1,at
100002b0:	00b12820 	add	a1,a1,s1
d150 1
a150 1
100002c8:	00b12820 	add	a1,a1,s1
d153 1
a153 1
100002d4:	00b12820 	add	a1,a1,s1
d156 1
a156 1
100002e0:	00250820 	add	at,at,a1
d159 1
a159 1
100002ec:	00250820 	add	at,at,a1
d165 1
a165 1
10000304:	2021000c 	addi	at,at,12
d169 1
a169 1
10000314:	00310820 	add	at,at,s1
d173 2
a174 2
10000324:	2021000c 	addi	at,at,12
10000328:	00310820 	add	at,at,s1
d178 2
a179 2
10000338:	20210022 	addi	at,at,34
1000033c:	00250820 	add	at,at,a1
d183 2
a184 2
1000034c:	20210038 	addi	at,at,56
10000350:	00250820 	add	at,at,a1
d191 1
a191 1
1000036c:	00b12820 	add	a1,a1,s1
d193 1
a193 1
10000374:	00b12820 	add	a1,a1,s1
d195 1
a195 1
1000037c:	00b12820 	add	a1,a1,s1
d201 1
a201 1
10000394:	00b12820 	add	a1,a1,s1
d204 1
a204 1
100003a0:	00b12820 	add	a1,a1,s1
d207 1
a207 1
100003ac:	00250820 	add	at,at,a1
d210 1
a210 1
100003b8:	00250820 	add	at,at,a1
d219 1
a219 1
100003dc:	00310820 	add	at,at,s1
d223 1
a223 1
100003ec:	00310820 	add	at,at,s1
d227 1
a227 1
100003fc:	00250820 	add	at,at,a1
d231 1
a231 1
1000040c:	00250820 	add	at,at,a1
d264 1
a264 1
10000490:	00250820 	add	at,at,a1
@

