head	1.5;
access;
symbols
	sid-snapshot-20180601:1.5
	sid-snapshot-20180501:1.5
	sid-snapshot-20180401:1.5
	sid-snapshot-20180301:1.5
	sid-snapshot-20180201:1.5
	sid-snapshot-20180101:1.5
	sid-snapshot-20171201:1.5
	sid-snapshot-20171101:1.5
	sid-snapshot-20171001:1.5
	sid-snapshot-20170901:1.5
	sid-snapshot-20170801:1.5
	sid-snapshot-20170701:1.5
	sid-snapshot-20170601:1.5
	sid-snapshot-20170501:1.5
	sid-snapshot-20170401:1.5
	sid-snapshot-20170301:1.5
	sid-snapshot-20170201:1.5
	sid-snapshot-20170101:1.5
	sid-snapshot-20161201:1.5
	sid-snapshot-20161101:1.5
	sid-snapshot-20160901:1.5
	sid-snapshot-20160801:1.5
	sid-snapshot-20160701:1.5
	sid-snapshot-20160601:1.5
	sid-snapshot-20160501:1.5
	sid-snapshot-20160401:1.5
	sid-snapshot-20160301:1.5
	sid-snapshot-20160201:1.5
	sid-snapshot-20160101:1.5
	sid-snapshot-20151201:1.5
	sid-snapshot-20151101:1.5
	sid-snapshot-20151001:1.5
	sid-snapshot-20150901:1.5
	sid-snapshot-20150801:1.5
	sid-snapshot-20150701:1.5
	sid-snapshot-20150601:1.5
	sid-snapshot-20150501:1.5
	sid-snapshot-20150401:1.5
	sid-snapshot-20150301:1.5
	sid-snapshot-20150201:1.5
	sid-snapshot-20150101:1.5
	sid-snapshot-20141201:1.5
	sid-snapshot-20141101:1.5
	sid-snapshot-20141001:1.5
	sid-snapshot-20140901:1.5
	sid-snapshot-20140801:1.5
	sid-snapshot-20140701:1.5
	sid-snapshot-20140601:1.5
	sid-snapshot-20140501:1.5
	sid-snapshot-20140401:1.5
	sid-snapshot-20140301:1.5
	sid-snapshot-20140201:1.5
	sid-snapshot-20140101:1.5
	sid-snapshot-20131201:1.5
	sid-snapshot-20131101:1.5
	sid-snapshot-20131001:1.5
	sid-snapshot-20130901:1.5
	sid-snapshot-20130801:1.5
	sid-snapshot-20130701:1.5
	sid-snapshot-20130601:1.5
	insight_7_6-2013-04-10-branchpoint:1.5
	gdb_7_6-branch:1.5.0.28
	sid-snapshot-20130501:1.5
	sid-snapshot-20130401:1.5
	sid-snapshot-20130301:1.5
	sid-snapshot-20130201:1.5
	sid-snapshot-20130101:1.5
	sid-snapshot-20121201:1.5
	sid-snapshot-20121101:1.5
	sid-snapshot-20121001:1.5
	sid-snapshot-20120901:1.5
	gdb_7_5-branch:1.5.0.26
	sid-snapshot-20120801:1.5
	sid-snapshot-20120701:1.5
	sid-snapshot-20120601:1.5
	sid-snapshot-20120501:1.5
	sid-snapshot-20120401:1.5
	gdb_7_4-branch:1.5.0.24
	sid-snapshot-20120301:1.5
	sid-snapshot-20120201:1.5
	sid-snapshot-20120101:1.5
	sid-snapshot-20111201:1.5
	sid-snapshot-20111101:1.5
	sid-snapshot-20111001:1.5
	sid-snapshot-20110901:1.5
	gdb_7_3-branch:1.5.0.22
	sid-snapshot-20110801:1.5
	sid-snapshot-20110701:1.5
	sid-snapshot-20110601:1.5
	sid-snapshot-20110501:1.5
	sid-snapshot-20110401:1.5
	sid-snapshot-20110301:1.5
	sid-snapshot-20110201:1.5
	sid-snapshot-20110101:1.5
	sid-snapshot-20101201:1.5
	sid-snapshot-20101101:1.5
	sid-snapshot-20101001:1.5
	sid-snapshot-20100901:1.5
	sid-snapshot-20100801:1.5
	sid-snapshot-20100701:1.5
	sid-snapshot-20100601:1.5
	sid-snapshot-20100501:1.5
	sid-snapshot-20100401:1.5
	sid-snapshot-20100301:1.5
	gdb_7_1-branch:1.5.0.20
	gdb_7_0-branch:1.5.0.18
	sid-snapshot-20100201:1.5
	sid-snapshot-20100101:1.5
	sid-snapshot-20091201:1.5
	sid-snapshot-20091101:1.5
	sid-snapshot-20091001:1.5
	arc-sim-20090309:1.5
	sid-snapshot-20090901:1.5
	sid-snapshot-20090801:1.5
	sid-snapshot-20090701:1.5
	sid-snapshot-20090601:1.5
	sid-snapshot-20090501:1.5
	kevinb-pre-tk8_5_7_merge:1.5
	sid-snapshot-20090401:1.5
	arc-insight_6_8-branch:1.5.0.16
	arc-insight_6_8-branchpoint:1.5
	insight_6_8-branch:1.5.0.14
	insight_6_8-branchpoint:1.5
	sid-snapshot-20090301:1.5
	sid-snapshot-20090201:1.5
	sid-snapshot-20090101:1.5
	sid-snapshot-20081201:1.5
	sid-snapshot-20081101:1.5
	sid-snapshot-20081001:1.5
	sid-snapshot-20080901:1.5
	sid-snapshot-20080801:1.5
	sid-snapshot-20080701:1.5
	sid-snapshot-20080601:1.5
	sid-snapshot-20080501:1.5
	sid-snapshot-20080403:1.5
	sid-snapshot-20080401:1.5
	gdb_6_8-branch:1.5.0.12
	sid-snapshot-20080301:1.5
	sid-snapshot-20080201:1.5
	sid-snapshot-20080101:1.5
	sid-snapshot-20071201:1.5
	sid-snapshot-20071101:1.5
	sid-snapshot-20071001:1.5
	insight_6_6-20070208-release:1.5
	gdb_6_6-branch:1.5.0.10
	gdb_6_6-2006-11-15-branchpoint:1.5
	insight_6_5-20061003-release:1.5
	gdb_6_5-branch:1.5.0.8
	gdb_6_5-2006-05-14-branchpoint:1.5
	gdb_6_4-branch:1.5.0.6
	gdb_6_4-2005-11-01-branchpoint:1.5
	gdb_6_1-2004-04-05-release:1.5
	gdb_6_1-branch:1.5.0.4
	gdb_6_1-2004-03-01-gmt-branchpoint:1.5
	gdb_6_0-2003-10-04-release:1.5
	gdb_6_0-branch:1.5.0.2
	gdb_6_0-2003-06-23-branchpoint:1.5
	TK8_4_1:1.1.1.3
	gdb_5_3-2002-12-12-release:1.2
	tcltk840-20020924-branch:1.3.0.2
	tcltk840-20020924-branchpoint:1.3
	TK_8_4_0:1.1.1.3
	sid-20020905-branchpoint:1.2
	sid-20020905-branch:1.2.0.6
	gdb_5_3-branch:1.2.0.4
	gdb_5_3-2002-09-04-branchpoint:1.2
	gdb_5_2_1-2002-07-23-release:1.2
	gdb_5_2-2002-04-29-release:1.2
	gdb_5_2-branch:1.2.0.2
	gdb_5_2-2002-03-03-branchpoint:1.2
	gdb_5_1_1-2002-01-24-release:1.1.1.1
	cygnus_cvs_20020108_pre:1.2
	gdb_5_1_0_1-2002-01-03-branch:1.1.1.1.0.8
	gdb_5_1_0_1-2002-01-03-branchpoint:1.1.1.1
	gdb_5_1-2001-11-21-release:1.1.1.1
	gdb_s390-2001-09-26-branch:1.1.1.1.0.6
	gdb_s390-2001-09-26-branchpoint:1.1.1.1
	TK_8_3:1.1.1.2
	NET:1.1.1
	gdb_5_1-2001-07-29-branch:1.1.1.1.0.4
	gdb_5_1-2001-07-29-branchpoint:1.1.1.1
	insight-precleanup-2001-01-01:1.1.1.1
	gdb_5_0-2000-05-19-release:1.1.1.1
	gdb_4_18_2-2000-05-18-release:1.1.1.1
	gdb_4_95_1-2000-05-11-snapshot:1.1.1.1
	gdb_4_95_0-2000-04-27-snapshot:1.1.1.1
	gdb_5_0-2000-04-10-branch:1.1.1.1.0.2
	gdb_5_0-2000-04-10-branchpoint:1.1.1.1
	repo-unification-2000-02-06:1.1.1.1
	insight-2000-02-04:1.1.1.1
	SNAPSHOT:1.1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.5
date	2003.01.21.20.24.51;	author hunt;	state Exp;
branches;
next	1.4;

1.4
date	2003.01.21.19.53.16;	author hunt;	state Exp;
branches;
next	1.3;

1.3
date	2002.09.24.18.39.29;	author kseitz;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.10.01.16.54;	author irox;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.07.00.19.30;	author jsm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.02.07.00.19.30;	author jsm;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2001.09.10.00.22.36;	author irox;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2002.09.24.20.39.10;	author kseitz;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Updated to tk 8.4.1
@
text
@# This file is a Tcl script to test menus in Tk.  It is
# organized in the standard fashion for Tcl tests. This
# file tests the Macintosh-specific features of the menu
# system.
#
# Copyright (c) 1995-1996 Sun Microsystems, Inc.
# Copyright (c) 1998-1999 by Scriptics Corporation.
# All rights reserved.
#
# RCS: @@(#) $Id: unixMenu.test,v 1.7 2002/07/13 20:28:36 dgp Exp $

package require tcltest 2.1
namespace import -force tcltest::configure
namespace import -force tcltest::testsDirectory
configure -testdir [file join [pwd] [file dirname [info script]]]
configure -loadfile [file join [testsDirectory] constraints.tcl]
tcltest::loadTestedCommands

test unixMenu-1.1 {TkpNewMenu - normal menu} unix {
    catch {destroy .m1}
    list [catch {menu .m1} msg] $msg [destroy .m1]
} {0 .m1 {}}
test unixMenu-1.2 {TkpNewMenu - help menu} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    . configure -menu .m1
    .m1 add cascade -label Help -menu .m1.help
    list [catch {menu .m1.help} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 .m1.help {} {}}

test unixMenu-2.1 {TkpDestroyMenu - nothing to do} {} {}
test unixMenu-3.1 {TkpDestroymenuEntry - nothing to do} {} {}

test unixMenu-4.1 {TkpConfigureMenuEntry - non-cascade entry} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add command -label test
    list [catch {.m1 entryconfigure test -label foo} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-4.2 {TkpConfigureMenuEntry - cascade entry} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -menu .m2 -label test
    menu .m1.foo -tearoff 0
    list [catch {.m1 entryconfigure test -menu .m1.foo} msg] $msg [destroy .m1]
} {0 {} {}}

test unixMenu-5.1 {TkpMenuNewEntry - nothing to do} {} {}

test unixMenu-6.1 {TkpSetWindowMenuBar - null menu} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add cascade -label foo
    . configure -menu .m1
    list [catch {. configure -menu ""} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-6.2 {TkpSetWindowMenuBar - menu} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add cascade -label foo
    list [catch {. configure -menu .m1} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}

test unixMenu-7.1 {TkpSetMainMenubar - nothing to do} {} {}

test unixMenu-8.1 {GetMenuIndicatorGeometry - indicator off} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label foo -indicatoron 0
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}
test unixMenu-8.2 {GetMenuIndicatorGeometry - not checkbutton or radio} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}
test unixMenu-8.3 {GetMenuIndicatorGeometry - checkbutton image} {unix testImageType} {
    catch {destroy .m1}
    catch {image delete image1}
    menu .m1
    image create test image1
    .m1 add checkbutton -image image1 -label foo
    .m1 invoke foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1] [image delete image1]
} {0 {} {}}
test unixMenu-8.4 {GetMenuIndicatorGeometry - checkbutton bitmap} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -bitmap questhead -label foo
    .m1 invoke foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}
test unixMenu-8.5 {GetMenuIndicatorGeometry - checkbutton} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label foo
    .m1 invoke foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}
test unixMenu-8.6 {GetMenuIndicatorGeometry - radiobutton image} {unix testImageType} {
    catch {destroy .m1}
    catch {image delete image1}
    menu .m1
    image create test image1
    .m1 add radiobutton -image image1 -label foo
    .m1 invoke foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1] [image delete image1]
} {0 {} {}}
test unixMenu-8.7 {GetMenuIndicatorGeometry - radiobutton bitmap} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add radiobutton -bitmap questhead -label foo
    .m1 invoke foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}
test unixMenu-8.8 {GetMenuIndicatorGeometry - radiobutton} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add radiobutton -label foo
    .m1 invoke foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}
test unixMenu-8.9 {GetMenuIndicatorGeometry - hideMargin} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add radiobutton -label foo -hidemargin 1
    .m1 invoke foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}

test unixMenu-9.1 {GetMenuAccelGeometry - cascade entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add cascade -label foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}
test unixMenu-9.2 {GetMenuAccelGeometry - non-null label} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -accel "Ctrl+S"
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}
test unixMenu-9.3 {GetMenuAccelGeometry - null label} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}

test unixMenu-10.1 {DrawMenuEntryBackground - active menubar} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add cascade -label foo
    . configure -menu .m1
    .m1 activate 1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-10.2 {DrawMenuEntryBackground - active} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    $tearoff activate 0
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-10.3 {DrawMenuEntryBackground - non-active} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}

test unixMenu-11.1 {DrawMenuEntryAccelerator - menubar} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -accel "Ctrl+U"
    . configure -menu .m1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
# drawArrow parameter is never false under Unix
test unixMenu-11.2 {DrawMenuEntryAccelerator - cascade entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add cascade -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-11.3 {DrawMenuEntryAccelerator - normal entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -accel "Ctrl+U"
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-11.4 {DrawMenuEntryAccelerator - null entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}

test unixMenu-12.1 {DrawMenuEntryIndicator - non-check or radio} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-12.2 {DrawMenuEntryIndicator - checkbutton - indicator off} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label foo -indicatoron 0
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-12.3 {DrawMenuEntryIndicator - checkbutton - not selected} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-12.4 {DrawMenuEntryIndicator - checkbutton - selected} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label foo
    .m1 invoke 1
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-12.5 {DrawMenuEntryIndicator - radiobutton - indicator off} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add radiobutton -label foo -indicatoron 0
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-12.6 {DrawMenuEntryIndicator - radiobutton - not selected} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add radiobutton -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}
test unixMenu-12.7 {DrawMenuEntryIndicator - radiobutton - selected} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add radiobutton -label foo
    .m1 invoke 1
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}

test unixMenu-13.1 {DrawMenuSeparator - menubar case} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add separator
    . configure -menu .m1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-13.2 {DrawMenuSepartor - normal menu} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add separator
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}

test unixMenu-14.1 {DrawMenuEntryLabel} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}

test unixMenu-15.1 {DrawMenuUnderline - menubar} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -underline 0
    . configure -menu .m1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-15.2 {DrawMenuUnderline - no menubar} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -underline 0
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}

test unixMenu-16.1 {TkpPostMenu} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}

test unixMenu-17.1 {GetMenuSeparatorGeometry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add separator
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
} {0 {}}

test unixMenu-18.1 {GetTearoffEntryGeometry} unix {
    catch {destroy .m1}
    menubutton .mb -text "test" -menu .mb.m
    menu .mb.m
    .mb.m add command -label test
    pack .mb
    raise .
    list [catch {tk::MbPost .mb} msg] $msg [tk::MenuUnpost .mb.m] [destroy .mb]
} {0 {} {} {}}

# Don't know how to reproduce the case where the tkwin has been deleted.
test unixMenu-19.1 {TkpComputeMenubarGeometry - zero entries} unix {
    catch {destroy .m1}
    menu .m1
    . configure -menu .m1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
# Don't know how to generate one width windows
test unixMenu-19.2 {TkpComputeMenubarGeometry - one entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add cascade -label File
    . configure -menu .m1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.3 {TkpComputeMenubarGeometry - entry with different font} unix {
    catch {destroy .m1}
    menu .m1 -font "Courier 24"
    .m1 add cascade -label File -font "Helvetica 18"
    . configure -menu .m1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.4 {TkpComputeMenubarGeometry - separator} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add separator
    . configure -menu .m1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.5 {TkpComputeMenubarGeometry - First entry} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label File
    . configure -menu .m1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.6 {TkpComputeMenubarGeometry - First entry too wide} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label File -font "Times 72"
    . configure -menu .m1
    wm geometry . 10x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.7 {TkpComputeMenubarGeometry - two entries fit} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label File
    .m1 add cascade -label Edit
    . configure -menu .m1
    wm geometry . 200x200
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.8 {TkpComputeMenubarGeometry - two entries; 2nd don't fit} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label File
    .m1 add cascade -label Edit -font "Times 72"
    . configure -menu .m1
    wm geometry . 100x100
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.9 {TkpComputeMenubarGeometry - two entries; 1st dont fit} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label File -font "Times 72"
    .m1 add cascade -label Edit
    . configure -menu .m1
    wm geometry . 100x100
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.10 {TkpComputeMenubarGeometry - two entries; neither fit} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0 -font "Times 72"
    .m1 add cascade -label File
    .m1 add cascade -label Edit
    . configure -menu .m1
    wm geometry . 10x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
# ABC notation; capital A means first window fits, small a means it
# does not. capital B menu means second window fist, etc.
test unixMenu-19.11 {TkpComputeMenubarGeometry - abc} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0 -font "Times 72"
    .m1 add cascade -label "aaaaa"
    .m1 add cascade -label "bbbbb"
    .m1 add cascade -label "ccccc"
    . configure -menu .m1
    wm geometry . 10x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.12 {TkpComputeMenubarGeometry - abC} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label "aaaaa" -font "Times 72"
    .m1 add cascade -label "bbbbb" -font "Times 72"
    .m1 add cascade -label "C"
    . configure -menu .m1
    wm geometry . 10x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.13 {TkpComputeMenubarGeometry - aBc} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label "aaaaa" -font "Times 72"
    .m1 add cascade -label "B"
    .m1 add cascade -label "ccccc" -font "Times 72"
    . configure -menu .m1
    wm geometry . 10x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.14 {TkpComputeMenubarGeometry - aBC} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label "aaaaa" -font "Times 72"
    .m1 add cascade -label "B"
    .m1 add cascade -label "C"
    . configure -menu .m1
    wm geometry . 60x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.15 {TkpComputeMenubarGeometry - Abc} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label "A"
    .m1 add cascade -label "bbbbb" -font "Times 72"
    .m1 add cascade -label "ccccc" -font "Times 72"
    . configure -menu .m1
    wm geometry . 60x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.16 {TkpComputeMenubarGeometry - AbC} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label "A"
    .m1 add cascade -label "bbbbb" -font "Times 72"
    .m1 add cascade -label "C"
    . configure -menu .m1
    wm geometry . 60x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.17 {TkpComputeMenubarGeometry - ABc} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label "A"
    .m1 add cascade -label "B"
    .m1 add cascade -label "ccccc" -font "Times 72"
    . configure -menu .m1
    wm geometry . 60x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.18 {TkpComputeMenubarGeometry - ABC} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label "A"
    .m1 add cascade -label "B"
    .m1 add cascade -label "C"
    . configure -menu .m1
    wm geometry . 100x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.19 {TkpComputeMenubarGeometry - help menu in first position} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label Help -menu .m1.help
    menu .m1.help -tearoff 0
    .m1 add cascade -label File -menu .m1.file
    menu .m1.file -tearoff 0
    .m1 add cascade -label Edit -menu .m1.edit
    menu .m1.edit -tearoff 0
    . configure -menu .m1
    wm geometry . 100x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.20 {TkpComputeMenubarGeometry - help menu in middle} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label Edit -menu .m1.edit
    menu .m1.edit -tearoff 0
    .m1 add cascade -label Help -menu .m1.help
    menu .m1.help -tearoff 0
    .m1 add cascade -label File -menu .m1.file
    menu .m1.file -tearoff 0
    . configure -menu .m1
    wm geometry . 100x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.21 {TkpComputeMenubarGeometry - help menu in first position} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label File -menu .m1.file
    menu .m1.file -tearoff 0
    .m1 add cascade -label Edit -menu .m1.edit
    menu .m1.edit -tearoff 0
    .m1 add cascade -label Help -menu .m1.help
    menu .m1.help -tearoff 0
    . configure -menu .m1
    wm geometry . 100x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.22 {TkpComputeMenubarGeometry - help item fits} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label File -menu .m1.file
    menu .m1.file -tearoff 0
    .m1 add cascade -label Help -menu .m1.help
    menu .m1.help -tearoff 0
    . configure -menu .m1
    wm geometry . 100x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.23 {TkpComputeMenubarGeometry - help item does not fit} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label File -menu .m1.file
    menu .m1.file -tearoff 0
    .m1 add cascade -label Help -menu .m1.help -font "Helvetica 72"
    menu .m1.help -tearoff 0
    . configure -menu .m1
    wm geometry . 100x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-19.24 {TkpComputeMenubarGeometry - help item only one} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label Help -menu .m1.help
    menu .m1.help -tearoff 0
    . configure -menu .m1
    wm geometry . 100x10
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}

test unixMenu-20.1 {DrawTearoffEntry - menubar} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add cascade -label File
    . configure -menu .m1
    list [catch {update} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 {} {} {}}
test unixMenu-20.2 {DrawTearoffEntry - non-menubar} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    .m1 post 40 40
     list [catch {update} msg] $msg [destroy .m1]
} {0 {} {}}

test unixMenu-21.1 {TkpInitializeMenuBindings - nothing to do} {} {}

test unixMenu-22.1 {SetHelpMenu - no menubars} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add cascade -label test -menu .m1.test
    list [catch {menu .m1.test} msg] $msg [destroy .m1]
} {0 .m1.test {}}
# Don't know how to automate missing tkwins
test unixMenu-22.2 {SetHelpMenu - menubar but no help menu} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    . configure -menu .m1
    .m1 add cascade -label .m1.file
    list [catch {menu .m1.file} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 .m1.file {} {}}
test unixMenu-22.3 {SetHelpMenu - menubar with help menu} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    . configure -menu .m1
    .m1 add cascade -label .m1.help
    list [catch {menu .m1.help} msg] $msg [. configure -menu ""] [destroy .m1]
} {0 .m1.help {} {}}
test unixMenu-22.4 {SetHelpMenu - multiple menubars with same help menu} unix {
    catch {destroy .m1}
    catch {destroy .t2}
    toplevel .t2
    wm geometry .t2 +40+40
    menu .m1 -tearoff 0
    . configure -menu .m1
    .t2 configure -menu .m1
    .m1 add cascade -label .m1.help
    list [catch {menu .m1.help} msg] $msg [. configure -menu ""] [destroy .m1] [destroy .t2]
} {0 .m1.help {} {} {}}

test unixMenu-23.1 {TkpDrawMenuEntry - gc for active and not strict motif} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    .m1 entryconfigure 1 -state active
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.2 {TkpDrawMenuEntry - gc for active menu item with its own gc} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -activeforeground red
    set tearoff [tk::TearOffMenu .m1 40 40]
    .m1 entryconfigure 1 -state active
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.3 {TkpDrawMenuEntry - gc for active and strict motif} unix {
    catch {destroy .m1}
    menu .m1
    set tk_strictMotif 1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    .m1 entryconfigure 1 -state active
    list [update] [destroy .m1] [set tk_strictMotif 0]
} {{} {} 0}
test unixMenu-23.4 {TkpDrawMenuEntry - gc for disabled with disabledfg and custom entry} unix {
    catch {destroy .m1}
    menu .m1 -disabledforeground blue
    .m1 add command -label foo -state disabled -background red
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.5 {TkpDrawMenuEntry - gc for disabled with disabledFg} unix {
    catch {destroy .m1}
    menu .m1 -disabledforeground blue
    .m1 add command -label foo -state disabled
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.6 {TkpDrawMenuEntry - gc for disabled - no disabledFg} unix {
    catch {destroy .m1}
    menu .m1 -disabledforeground ""
    .m1 add command -label foo -state disabled
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.7 {TkpDrawMenuEntry - gc for normal - custom entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -foreground red
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.8 {TkpDrawMenuEntry - gc for normal} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.9 {TkpDrawMenuEntry - gc for indicator - custom entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label foo -selectcolor orange
    .m1 invoke 1
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.10 {TkpDrawMenuEntry - gc for indicator} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label foo
    .m1 invoke 1
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.11 {TkpDrawMenuEntry - border - custom entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -activebackground green
    set tearoff [tk::TearOffMenu .m1 40 40]
    .m1 entryconfigure 1 -state active
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.12 {TkpDrawMenuEntry - border} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    .m1 entryconfigure 1 -state active
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.13 {TkpDrawMenuEntry - active border - strict motif} unix {
    catch {destroy .m1}
    set tk_strictMotif 1
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    .m1 entryconfigure 1 -state active
    list [update] [destroy .m1] [set tk_strictMotif 0]
} {{} {} 0}
test unixMenu-23.14 {TkpDrawMenuEntry - active border - custom entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -activeforeground yellow
    set tearoff [tk::TearOffMenu .m1 40 40]
    .m1 entryconfigure 1 -state active
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.15 {TkpDrawMenuEntry - active border} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    .m1 entryconfigure 1 -state active
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.16 {TkpDrawMenuEntry - font - custom entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label foo -font "Helvectica 72"
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.17 {TkpDrawMenuEntry - font} unix {
    catch {destroy .m1}
    menu .m1 -font "Courier 72"
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.18 {TkpDrawMenuEntry - separator} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add separator
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.19 {TkpDrawMenuEntry - standard} unix {
    catch {destroy .mb}
    menu .m1
    .m1 add command -label foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.20 {TkpDrawMenuEntry - disabled cascade item} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add cascade -label File -menu .m1.file
    menu .m1.file
    .m1.file add command -label foo
    .m1 entryconfigure File -state disabled
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.21 {TkpDrawMenuEntry - indicator} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label Foo
    .m1 invoke Foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}
test unixMenu-23.22 {TkpDrawMenuEntry - hide margin} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label Foo -hidemargin 1
    .m1 invoke Foo
    set tearoff [tk::TearOffMenu .m1 40 40]
    list [update] [destroy .m1]
} {{} {}}

test unixMenu-24.1 {GetMenuLabelGeometry - image} {testImageType unix} {
    catch {destroy .m1}
    catch {image delete image1}
    menu .m1
    image create test image1
    .m1 add command -image image1
    list [update idletasks] [destroy .m1] [image delete image1]
} {{} {} {}}
test unixMenu-24.2 {GetMenuLabelGeometry - bitmap} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -bitmap questhead
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-24.3 {GetMenuLabelGeometry - no text} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-24.4 {GetMenuLabelGeometry - text} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label "This is a test."
    list [update idletasks] [destroy .m1]
} {{} {}}

test unixMenu-25.1 {TkpComputeStandardMenuGeometry - no entries} unix {
    catch {destroy .m1}
    menu .m1
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.2 {TkpComputeStandardMenuGeometry - one entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label "one"
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.3 {TkpComputeStandardMenuGeometry - more than one entry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label "one"
    .m1 add command -label "two"
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.4 {TkpComputeStandardMenuGeometry - separator} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add separator
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.5 {TkpComputeStandardMenuGeometry - tearoff entry} {unixOnly} {
    catch {destroy .m1}
    menubutton .mb -text "test" -menu .mb.m
    menu .mb.m
    .mb.m add command -label test
    pack .mb
    catch {tk::MbPost .mb}
    list [update] [tk::MenuUnpost .mb.m] [destroy .mb]
} {{} {} {}}
test unixMenu-25.6 {TkpComputeStandardMenuGeometry - standard label geometry} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label "test"
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.7 {TkpComputeStandardMenuGeometry - different font for entry} unix {
    catch {destroy .m1}
    menu .m1 -font "Helvetica 12"
    .m1 add command -label "test" -font "Courier 12"
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.8 {TkpComputeStandardMenuGeometry - second entry larger} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label "test"
    .m1 add command -label "test test"
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.9 {TkpComputeStandardMenuGeometry - first entry larger} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label "test test"
    .m1 add command -label "test"
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.10 {TkpComputeStandardMenuGeometry - accelerator} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label "test" -accel "Ctrl+S"
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.11 {TkpComputeStandardMenuGeometry - second accel larger} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label "test" -accel "1"
    .m1 add command -label "test" -accel "1 1"
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.12 {TkpComputeStandardMenuGeometry - second accel smaller} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label "test" -accel "1 1"
    .m1 add command -label "test" -accel "1"
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.13 {TkpComputeStandardMenuGeometry - indicator} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add checkbutton -label test
    .m1 invoke 1
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.14 {TkpComputeStandardMenuGeometry - second indicator less or equal } {unix testImageType} {
    catch {destroy .m1}
    catch {image delete image1}
    image create test image1
    menu .m1
    .m1 add checkbutton -image image1
    .m1 invoke 1
    .m1 add checkbutton -label test
    .m1 invoke 2
    list [update idletasks] [destroy .m1] [image delete image1]
} {{} {} {}}
test unixMenu-25.15 {TkpComputeStandardMenuGeometry - second indicator larger } {unixOnly testImageType} {
    catch {destroy .m1}
    catch {image delete image1}
    image create test image1
    menu .m1
    .m1 add checkbutton -image image1
    .m1 invoke 1
    .m1 add checkbutton -label test
    .m1 invoke 2
    list [update idletasks] [destroy .m1] [image delete image1]
} {{} {} {}}
test unixMenu-25.16 {TkpComputeStandardMenuGeometry - zero sized menus} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.17 {TkpComputeStandardMenuGeometry - first column bigger} unix {
    catch {destroy .m1}
    menu .m1
    .m1 add command -label one
    .m1 add command -label two
    .m1 add command -label three -columnbreak 1
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.18 {TkpComputeStandardMenuGeometry - second column bigger} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add command -label one
    .m1 add command -label two -columnbreak 1
    .m1 add command -label three
    list [update idletasks] [destroy .m1]
} {{} {}}
test unixMenu-25.19 {TkpComputeStandardMenuGeometry - three columns} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add command -label one
    .m1 add command -label two -columnbreak 1
    .m1 add command -label three
    .m1 add command -label four
    .m1 add command -label five -columnbreak 1
    .m1 add command -label six
    list [update idletasks] [destroy .m1]    
} {{} {}}
test unixMenu-25.20 {TkpComputeStandardMenuGeometry - hide margin} unix {
    catch {destroy .m1}
    menu .m1 -tearoff 0
    .m1 add checkbutton -label one -hidemargin 1
    list [update idletasks] [destroy .m1]
} {{} {}}

test unixMenu-26.1 {TkpMenuInit - nothing to do} {} {}

# cleanup
deleteWindows
::tcltest::cleanupTests
return
@


1.4
log
@touched all sources to ease next import
@
text
@d10 1
a10 1
# RCS: @@(#) $Id: unixMenu.test,v 1.7.6.1 2000/05/04 21:26:30 spolk Exp $
d12 6
a17 27
if {[lsearch [namespace children] ::tcltest] == -1} {
    source [file join [pwd] [file dirname [info script]] defs.tcl]
}

if {$tcl_platform(platform) != "unix"} {
    puts "skipping: Unix only tests..."
    ::tcltest::cleanupTests
    return
}

if {[lsearch [image types] test] < 0} {
    puts "This application hasn't been compiled with the \"test\" image"
    puts "type, so I can't run this test.  Are you sure you're using"
    puts "tktest instead of wish?"
    ::tcltest::cleanupTests
    return
}

proc deleteWindows {} {
    foreach i [winfo children .] {
    	catch [destroy $i]
    }
}

deleteWindows
wm geometry . {}
raise .
d19 1
a19 1
test unixMenu-1.1 {TkpNewMenu - normal menu} {
d23 1
a23 1
test unixMenu-1.2 {TkpNewMenu - help menu} {
d34 1
a34 1
test unixMenu-4.1 {TkpConfigureMenuEntry - non-cascade entry} {
d40 1
a40 1
test unixMenu-4.2 {TkpConfigureMenuEntry - cascade entry} {
d50 1
a50 1
test unixMenu-6.1 {TkpSetWindowMenuBar - null menu} {
d57 1
a57 1
test unixMenu-6.2 {TkpSetWindowMenuBar - menu} {
d66 1
a66 1
test unixMenu-8.1 {GetMenuIndicatorGeometry - indicator off} {
d70 1
a70 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d72 1
a72 1
test unixMenu-8.2 {GetMenuIndicatorGeometry - not checkbutton or radio} {
d76 1
a76 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d78 1
a78 1
test unixMenu-8.3 {GetMenuIndicatorGeometry - checkbutton image} {
d85 1
a85 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1] [image delete image1]
d87 1
a87 1
test unixMenu-8.4 {GetMenuIndicatorGeometry - checkbutton bitmap} {
d92 1
a92 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d94 1
a94 1
test unixMenu-8.5 {GetMenuIndicatorGeometry - checkbutton} {
d99 1
a99 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d101 1
a101 1
test unixMenu-8.6 {GetMenuIndicatorGeometry - radiobutton image} {
d108 1
a108 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1] [image delete image1]
d110 1
a110 1
test unixMenu-8.7 {GetMenuIndicatorGeometry - radiobutton bitmap} {
d115 1
a115 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d117 1
a117 1
test unixMenu-8.8 {GetMenuIndicatorGeometry - radiobutton} {
d122 1
a122 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d124 1
a124 1
test unixMenu-8.9 {GetMenuIndicatorGeometry - hideMargin} {
d129 1
a129 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d132 1
a132 1
test unixMenu-9.1 {GetMenuAccelGeometry - cascade entry} {
d136 1
a136 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d138 1
a138 1
test unixMenu-9.2 {GetMenuAccelGeometry - non-null label} {
d142 1
a142 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d144 1
a144 1
test unixMenu-9.3 {GetMenuAccelGeometry - null label} {
d148 1
a148 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d151 1
a151 1
test unixMenu-10.1 {DrawMenuEntryBackground - active menubar} {
d159 1
a159 1
test unixMenu-10.2 {DrawMenuEntryBackground - active} {
d163 1
a163 1
    set tearoff [tkTearOffMenu .m1 40 40]
d167 1
a167 1
test unixMenu-10.3 {DrawMenuEntryBackground - non-active} {
d171 1
a171 1
    set tearoff [tkTearOffMenu .m1 40 40]
d175 1
a175 1
test unixMenu-11.1 {DrawMenuEntryAccelerator - menubar} {
d183 1
a183 1
test unixMenu-11.2 {DrawMenuEntryAccelerator - cascade entry} {
d187 1
a187 1
    set tearoff [tkTearOffMenu .m1 40 40]
d190 1
a190 1
test unixMenu-11.3 {DrawMenuEntryAccelerator - normal entry} {
d194 1
a194 1
    set tearoff [tkTearOffMenu .m1 40 40]
d197 1
a197 1
test unixMenu-11.4 {DrawMenuEntryAccelerator - null entry} {
d201 1
a201 1
    set tearoff [tkTearOffMenu .m1 40 40]
d205 1
a205 1
test unixMenu-12.1 {DrawMenuEntryIndicator - non-check or radio} {
d209 1
a209 1
    set tearoff [tkTearOffMenu .m1 40 40]
d212 1
a212 1
test unixMenu-12.2 {DrawMenuEntryIndicator - checkbutton - indicator off} {
d216 1
a216 1
    set tearoff [tkTearOffMenu .m1 40 40]
d219 1
a219 1
test unixMenu-12.3 {DrawMenuEntryIndicator - checkbutton - not selected} {
d223 1
a223 1
    set tearoff [tkTearOffMenu .m1 40 40]
d226 1
a226 1
test unixMenu-12.4 {DrawMenuEntryIndicator - checkbutton - selected} {
d231 1
a231 1
    set tearoff [tkTearOffMenu .m1 40 40]
d234 1
a234 1
test unixMenu-12.5 {DrawMenuEntryIndicator - radiobutton - indicator off} {
d238 1
a238 1
    set tearoff [tkTearOffMenu .m1 40 40]
d241 1
a241 1
test unixMenu-12.6 {DrawMenuEntryIndicator - radiobutton - not selected} {
d245 1
a245 1
    set tearoff [tkTearOffMenu .m1 40 40]
d248 1
a248 1
test unixMenu-12.7 {DrawMenuEntryIndicator - radiobutton - selected} {
d253 1
a253 1
    set tearoff [tkTearOffMenu .m1 40 40]
d257 1
a257 1
test unixMenu-13.1 {DrawMenuSeparator - menubar case} {
d264 1
a264 1
test unixMenu-13.2 {DrawMenuSepartor - normal menu} {
d268 1
a268 1
    set tearoff [tkTearOffMenu .m1 40 40]
d272 1
a272 1
test unixMenu-14.1 {DrawMenuEntryLabel} {
d276 1
a276 1
    set tearoff [tkTearOffMenu .m1 40 40]
d280 1
a280 1
test unixMenu-15.1 {DrawMenuUnderline - menubar} {
d287 1
a287 1
test unixMenu-15.2 {DrawMenuUnderline - no menubar} {
d291 1
a291 1
    set tearoff [tkTearOffMenu .m1 40 40]
d295 1
a295 1
test unixMenu-16.1 {TkpPostMenu} {
d299 1
a299 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d302 1
a302 1
test unixMenu-17.1 {GetMenuSeparatorGeometry} {
d306 1
a306 1
    list [catch {tkTearOffMenu .m1 40 40}] [destroy .m1]
d309 1
a309 1
test unixMenu-18.1 {GetTearoffEntryGeometry} {
d316 1
a316 1
    list [catch {tkMbPost .mb} msg] $msg [tkMenuUnpost .mb.m] [destroy .mb]
d320 1
a320 1
test unixMenu-19.1 {TkpComputeMenubarGeometry - zero entries} {
d327 1
a327 1
test unixMenu-19.2 {TkpComputeMenubarGeometry - one entry} {
d334 1
a334 1
test unixMenu-19.3 {TkpComputeMenubarGeometry - entry with different font} {
d341 1
a341 1
test unixMenu-19.4 {TkpComputeMenubarGeometry - separator} {
d348 1
a348 1
test unixMenu-19.5 {TkpComputeMenubarGeometry - First entry} {
d355 1
a355 1
test unixMenu-19.6 {TkpComputeMenubarGeometry - First entry too wide} {
d363 1
a363 1
test unixMenu-19.7 {TkpComputeMenubarGeometry - two entries fit} {
d372 1
a372 1
test unixMenu-19.8 {TkpComputeMenubarGeometry - two entries; 2nd don't fit} {
d381 1
a381 1
test unixMenu-19.9 {TkpComputeMenubarGeometry - two entries; 1st dont fit} {
d390 1
a390 1
test unixMenu-19.10 {TkpComputeMenubarGeometry - two entries; neither fit} {
d401 1
a401 1
test unixMenu-19.11 {TkpComputeMenubarGeometry - abc} {
d411 1
a411 1
test unixMenu-19.12 {TkpComputeMenubarGeometry - abC} {
d421 1
a421 1
test unixMenu-19.13 {TkpComputeMenubarGeometry - aBc} {
d431 1
a431 1
test unixMenu-19.14 {TkpComputeMenubarGeometry - aBC} {
d441 1
a441 1
test unixMenu-19.15 {TkpComputeMenubarGeometry - Abc} {
d451 1
a451 1
test unixMenu-19.16 {TkpComputeMenubarGeometry - AbC} {
d461 1
a461 1
test unixMenu-19.17 {TkpComputeMenubarGeometry - ABc} {
d471 1
a471 1
test unixMenu-19.18 {TkpComputeMenubarGeometry - ABC} {
d481 1
a481 1
test unixMenu-19.19 {TkpComputeMenubarGeometry - help menu in first position} {
d494 1
a494 1
test unixMenu-19.20 {TkpComputeMenubarGeometry - help menu in middle} {
d507 1
a507 1
test unixMenu-19.21 {TkpComputeMenubarGeometry - help menu in first position} {
d520 1
a520 1
test unixMenu-19.22 {TkpComputeMenubarGeometry - help item fits} {
d531 1
a531 1
test unixMenu-19.23 {TkpComputeMenubarGeometry - help item does not fit} {
d542 1
a542 1
test unixMenu-19.24 {TkpComputeMenubarGeometry - help item only one} {
d552 1
a552 1
test unixMenu-20.1 {DrawTearoffEntry - menubar} {
d559 1
a559 1
test unixMenu-20.2 {DrawTearoffEntry - non-menubar} {
d569 1
a569 1
test unixMenu-22.1 {SetHelpMenu - no menubars} {
d576 1
a576 1
test unixMenu-22.2 {SetHelpMenu - menubar but no help menu} {
d583 1
a583 1
test unixMenu-22.3 {SetHelpMenu - menubar with help menu} {
d590 1
a590 1
test unixMenu-22.4 {SetHelpMenu - multiple menubars with same help menu} {
d602 1
a602 1
test unixMenu-23.1 {TkpDrawMenuEntry - gc for active and not strict motif} {
d606 1
a606 1
    set tearoff [tkTearOffMenu .m1 40 40]
d610 1
a610 1
test unixMenu-23.2 {TkpDrawMenuEntry - gc for active menu item with its own gc} {
d614 1
a614 1
    set tearoff [tkTearOffMenu .m1 40 40]
d618 1
a618 1
test unixMenu-23.3 {TkpDrawMenuEntry - gc for active and strict motif} {
d623 1
a623 1
    set tearoff [tkTearOffMenu .m1 40 40]
d627 1
a627 1
test unixMenu-23.4 {TkpDrawMenuEntry - gc for disabled with disabledfg and custom entry} {
d631 1
a631 1
    set tearoff [tkTearOffMenu .m1 40 40]
d634 1
a634 1
test unixMenu-23.5 {TkpDrawMenuEntry - gc for disabled with disabledFg} {
d638 1
a638 1
    set tearoff [tkTearOffMenu .m1 40 40]
d641 1
a641 1
test unixMenu-23.6 {TkpDrawMenuEntry - gc for disabled - no disabledFg} {
d645 1
a645 1
    set tearoff [tkTearOffMenu .m1 40 40]
d648 1
a648 1
test unixMenu-23.7 {TkpDrawMenuEntry - gc for normal - custom entry} {
d652 1
a652 1
    set tearoff [tkTearOffMenu .m1 40 40]
d655 1
a655 1
test unixMenu-23.8 {TkpDrawMenuEntry - gc for normal} {
d659 1
a659 1
    set tearoff [tkTearOffMenu .m1 40 40]
d662 1
a662 1
test unixMenu-23.9 {TkpDrawMenuEntry - gc for indicator - custom entry} {
d667 1
a667 1
    set tearoff [tkTearOffMenu .m1 40 40]
d670 1
a670 1
test unixMenu-23.10 {TkpDrawMenuEntry - gc for indicator} {
d675 1
a675 1
    set tearoff [tkTearOffMenu .m1 40 40]
d678 1
a678 1
test unixMenu-23.11 {TkpDrawMenuEntry - border - custom entry} {
d682 1
a682 1
    set tearoff [tkTearOffMenu .m1 40 40]
d686 1
a686 1
test unixMenu-23.12 {TkpDrawMenuEntry - border} {
d690 1
a690 1
    set tearoff [tkTearOffMenu .m1 40 40]
d694 1
a694 1
test unixMenu-23.13 {TkpDrawMenuEntry - active border - strict motif} {
d699 1
a699 1
    set tearoff [tkTearOffMenu .m1 40 40]
d703 1
a703 1
test unixMenu-23.14 {TkpDrawMenuEntry - active border - custom entry} {
d707 1
a707 1
    set tearoff [tkTearOffMenu .m1 40 40]
d711 1
a711 1
test unixMenu-23.15 {TkpDrawMenuEntry - active border} {
d715 1
a715 1
    set tearoff [tkTearOffMenu .m1 40 40]
d719 1
a719 1
test unixMenu-23.16 {TkpDrawMenuEntry - font - custom entry} {
d723 1
a723 1
    set tearoff [tkTearOffMenu .m1 40 40]
d726 1
a726 1
test unixMenu-23.17 {TkpDrawMenuEntry - font} {
d730 1
a730 1
    set tearoff [tkTearOffMenu .m1 40 40]
d733 1
a733 1
test unixMenu-23.18 {TkpDrawMenuEntry - separator} {
d737 1
a737 1
    set tearoff [tkTearOffMenu .m1 40 40]
d740 1
a740 1
test unixMenu-23.19 {TkpDrawMenuEntry - standard} {
d744 1
a744 1
    set tearoff [tkTearOffMenu .m1 40 40]
d747 1
a747 1
test unixMenu-23.20 {TkpDrawMenuEntry - disabled cascade item} {
d754 1
a754 1
    set tearoff [tkTearOffMenu .m1 40 40]
d757 1
a757 1
test unixMenu-23.21 {TkpDrawMenuEntry - indicator} {
d762 1
a762 1
    set tearoff [tkTearOffMenu .m1 40 40]
d765 1
a765 1
test unixMenu-23.22 {TkpDrawMenuEntry - hide margin} {
d770 1
a770 1
    set tearoff [tkTearOffMenu .m1 40 40]
d774 1
a774 1
test unixMenu-24.1 {GetMenuLabelGeometry - image} {
d782 1
a782 1
test unixMenu-24.2 {GetMenuLabelGeometry - bitmap} {
d788 1
a788 1
test unixMenu-24.3 {GetMenuLabelGeometry - no text} {
d794 1
a794 1
test unixMenu-24.4 {GetMenuLabelGeometry - text} {
d801 1
a801 1
test unixMenu-25.1 {TkpComputeStandardMenuGeometry - no entries} {
d806 1
a806 1
test unixMenu-25.2 {TkpComputeStandardMenuGeometry - one entry} {
d812 1
a812 1
test unixMenu-25.3 {TkpComputeStandardMenuGeometry - more than one entry} {
d819 1
a819 1
test unixMenu-25.4 {TkpComputeStandardMenuGeometry - separator} {
d831 2
a832 2
    catch {tkMbPost .mb}
    list [update] [tkMenuUnpost .mb.m] [destroy .mb]
d834 1
a834 1
test unixMenu-25.6 {TkpComputeStandardMenuGeometry - standard label geometry} {
d840 1
a840 1
test unixMenu-25.7 {TkpComputeStandardMenuGeometry - different font for entry} {
d846 1
a846 1
test unixMenu-25.8 {TkpComputeStandardMenuGeometry - second entry larger} {
d853 1
a853 1
test unixMenu-25.9 {TkpComputeStandardMenuGeometry - first entry larger} {
d860 1
a860 1
test unixMenu-25.10 {TkpComputeStandardMenuGeometry - accelerator} {
d866 1
a866 1
test unixMenu-25.11 {TkpComputeStandardMenuGeometry - second accel larger} {
d873 1
a873 1
test unixMenu-25.12 {TkpComputeStandardMenuGeometry - second accel smaller} {
d880 1
a880 1
test unixMenu-25.13 {TkpComputeStandardMenuGeometry - indicator} {
d887 1
a887 1
test unixMenu-25.14 {TkpComputeStandardMenuGeometry - second indicator less or equal } {
d898 1
a898 1
test unixMenu-25.15 {TkpComputeStandardMenuGeometry - second indicator larger } {unixOnly} {
d909 1
a909 1
test unixMenu-25.16 {TkpComputeStandardMenuGeometry - zero sized menus} {
d914 1
a914 1
test unixMenu-25.17 {TkpComputeStandardMenuGeometry - first column bigger} {
d922 1
a922 1
test unixMenu-25.18 {TkpComputeStandardMenuGeometry - second column bigger} {
d930 1
a930 1
test unixMenu-25.19 {TkpComputeStandardMenuGeometry - three columns} {
d941 1
a941 1
test unixMenu-25.20 {TkpComputeStandardMenuGeometry - hide margin} {
@


1.3
log
@touched all sources to ease next import
@
text
@@


1.2
log
@touched all tk files to ease next import
@
text
@@


1.1
log
@Initial revision
@
text
@d7 2
d10 5
a14 4
# See the file "license.terms" for information on usage and redistribution
# of this file, and for a DISCLAIMER OF ALL WARRANTIES.
#
# RCS: @@(#) $Id: unixMenu.test,v 1.2 1998/09/14 18:23:52 stanton Exp $
d17 2
d26 1
a29 4
if {[info procs test] != "test"} {
    source defs
}

d337 2
a338 2
    list [catch {tkMbPost .mb} msg] $msg [destroy .mb]
} {0 {} {}}
d853 2
a854 2
    list [update] [destroy .mb]
} {{} {}}
d971 1
d973 2
@


1.1.1.1
log
@import insight-2000-02-04 snapshot (2nd try)
@
text
@@


1.1.1.2
log
@Tk 8.3 upgrade
@
text
@a6 2
# Copyright (c) 1998-1999 by Scriptics Corporation.
# All rights reserved.
d8 4
a11 5
# RCS: @@(#) $Id: unixMenu.test,v 1.7.6.1 2000/05/04 21:26:30 spolk Exp $

if {[lsearch [namespace children] ::tcltest] == -1} {
    source [file join [pwd] [file dirname [info script]] defs.tcl]
}
a13 2
    puts "skipping: Unix only tests..."
    ::tcltest::cleanupTests
a20 1
    ::tcltest::cleanupTests
d24 4
d335 2
a336 2
    list [catch {tkMbPost .mb} msg] $msg [tkMenuUnpost .mb.m] [destroy .mb]
} {0 {} {} {}}
d851 2
a852 2
    list [update] [tkMenuUnpost .mb.m] [destroy .mb]
} {{} {} {}}
a968 1
# cleanup
a969 2
::tcltest::cleanupTests
return
@


1.1.1.3
log
@import tk 8.4.0
@
text
@d10 1
a10 1
# RCS: @@(#) $Id: unixMenu.test,v 1.7 2002/07/13 20:28:36 dgp Exp $
d12 27
a38 6
package require tcltest 2.1
namespace import -force tcltest::configure
namespace import -force tcltest::testsDirectory
configure -testdir [file join [pwd] [file dirname [info script]]]
configure -loadfile [file join [testsDirectory] constraints.tcl]
tcltest::loadTestedCommands
d40 1
a40 1
test unixMenu-1.1 {TkpNewMenu - normal menu} unix {
d44 1
a44 1
test unixMenu-1.2 {TkpNewMenu - help menu} unix {
d55 1
a55 1
test unixMenu-4.1 {TkpConfigureMenuEntry - non-cascade entry} unix {
d61 1
a61 1
test unixMenu-4.2 {TkpConfigureMenuEntry - cascade entry} unix {
d71 1
a71 1
test unixMenu-6.1 {TkpSetWindowMenuBar - null menu} unix {
d78 1
a78 1
test unixMenu-6.2 {TkpSetWindowMenuBar - menu} unix {
d87 1
a87 1
test unixMenu-8.1 {GetMenuIndicatorGeometry - indicator off} unix {
d91 1
a91 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d93 1
a93 1
test unixMenu-8.2 {GetMenuIndicatorGeometry - not checkbutton or radio} unix {
d97 1
a97 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d99 1
a99 1
test unixMenu-8.3 {GetMenuIndicatorGeometry - checkbutton image} {unix testImageType} {
d106 1
a106 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1] [image delete image1]
d108 1
a108 1
test unixMenu-8.4 {GetMenuIndicatorGeometry - checkbutton bitmap} unix {
d113 1
a113 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d115 1
a115 1
test unixMenu-8.5 {GetMenuIndicatorGeometry - checkbutton} unix {
d120 1
a120 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d122 1
a122 1
test unixMenu-8.6 {GetMenuIndicatorGeometry - radiobutton image} {unix testImageType} {
d129 1
a129 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1] [image delete image1]
d131 1
a131 1
test unixMenu-8.7 {GetMenuIndicatorGeometry - radiobutton bitmap} unix {
d136 1
a136 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d138 1
a138 1
test unixMenu-8.8 {GetMenuIndicatorGeometry - radiobutton} unix {
d143 1
a143 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d145 1
a145 1
test unixMenu-8.9 {GetMenuIndicatorGeometry - hideMargin} unix {
d150 1
a150 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d153 1
a153 1
test unixMenu-9.1 {GetMenuAccelGeometry - cascade entry} unix {
d157 1
a157 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d159 1
a159 1
test unixMenu-9.2 {GetMenuAccelGeometry - non-null label} unix {
d163 1
a163 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d165 1
a165 1
test unixMenu-9.3 {GetMenuAccelGeometry - null label} unix {
d169 1
a169 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d172 1
a172 1
test unixMenu-10.1 {DrawMenuEntryBackground - active menubar} unix {
d180 1
a180 1
test unixMenu-10.2 {DrawMenuEntryBackground - active} unix {
d184 1
a184 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d188 1
a188 1
test unixMenu-10.3 {DrawMenuEntryBackground - non-active} unix {
d192 1
a192 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d196 1
a196 1
test unixMenu-11.1 {DrawMenuEntryAccelerator - menubar} unix {
d204 1
a204 1
test unixMenu-11.2 {DrawMenuEntryAccelerator - cascade entry} unix {
d208 1
a208 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d211 1
a211 1
test unixMenu-11.3 {DrawMenuEntryAccelerator - normal entry} unix {
d215 1
a215 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d218 1
a218 1
test unixMenu-11.4 {DrawMenuEntryAccelerator - null entry} unix {
d222 1
a222 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d226 1
a226 1
test unixMenu-12.1 {DrawMenuEntryIndicator - non-check or radio} unix {
d230 1
a230 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d233 1
a233 1
test unixMenu-12.2 {DrawMenuEntryIndicator - checkbutton - indicator off} unix {
d237 1
a237 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d240 1
a240 1
test unixMenu-12.3 {DrawMenuEntryIndicator - checkbutton - not selected} unix {
d244 1
a244 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d247 1
a247 1
test unixMenu-12.4 {DrawMenuEntryIndicator - checkbutton - selected} unix {
d252 1
a252 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d255 1
a255 1
test unixMenu-12.5 {DrawMenuEntryIndicator - radiobutton - indicator off} unix {
d259 1
a259 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d262 1
a262 1
test unixMenu-12.6 {DrawMenuEntryIndicator - radiobutton - not selected} unix {
d266 1
a266 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d269 1
a269 1
test unixMenu-12.7 {DrawMenuEntryIndicator - radiobutton - selected} unix {
d274 1
a274 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d278 1
a278 1
test unixMenu-13.1 {DrawMenuSeparator - menubar case} unix {
d285 1
a285 1
test unixMenu-13.2 {DrawMenuSepartor - normal menu} unix {
d289 1
a289 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d293 1
a293 1
test unixMenu-14.1 {DrawMenuEntryLabel} unix {
d297 1
a297 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d301 1
a301 1
test unixMenu-15.1 {DrawMenuUnderline - menubar} unix {
d308 1
a308 1
test unixMenu-15.2 {DrawMenuUnderline - no menubar} unix {
d312 1
a312 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d316 1
a316 1
test unixMenu-16.1 {TkpPostMenu} unix {
d320 1
a320 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d323 1
a323 1
test unixMenu-17.1 {GetMenuSeparatorGeometry} unix {
d327 1
a327 1
    list [catch {tk::TearOffMenu .m1 40 40}] [destroy .m1]
d330 1
a330 1
test unixMenu-18.1 {GetTearoffEntryGeometry} unix {
d337 1
a337 1
    list [catch {tk::MbPost .mb} msg] $msg [tk::MenuUnpost .mb.m] [destroy .mb]
d341 1
a341 1
test unixMenu-19.1 {TkpComputeMenubarGeometry - zero entries} unix {
d348 1
a348 1
test unixMenu-19.2 {TkpComputeMenubarGeometry - one entry} unix {
d355 1
a355 1
test unixMenu-19.3 {TkpComputeMenubarGeometry - entry with different font} unix {
d362 1
a362 1
test unixMenu-19.4 {TkpComputeMenubarGeometry - separator} unix {
d369 1
a369 1
test unixMenu-19.5 {TkpComputeMenubarGeometry - First entry} unix {
d376 1
a376 1
test unixMenu-19.6 {TkpComputeMenubarGeometry - First entry too wide} unix {
d384 1
a384 1
test unixMenu-19.7 {TkpComputeMenubarGeometry - two entries fit} unix {
d393 1
a393 1
test unixMenu-19.8 {TkpComputeMenubarGeometry - two entries; 2nd don't fit} unix {
d402 1
a402 1
test unixMenu-19.9 {TkpComputeMenubarGeometry - two entries; 1st dont fit} unix {
d411 1
a411 1
test unixMenu-19.10 {TkpComputeMenubarGeometry - two entries; neither fit} unix {
d422 1
a422 1
test unixMenu-19.11 {TkpComputeMenubarGeometry - abc} unix {
d432 1
a432 1
test unixMenu-19.12 {TkpComputeMenubarGeometry - abC} unix {
d442 1
a442 1
test unixMenu-19.13 {TkpComputeMenubarGeometry - aBc} unix {
d452 1
a452 1
test unixMenu-19.14 {TkpComputeMenubarGeometry - aBC} unix {
d462 1
a462 1
test unixMenu-19.15 {TkpComputeMenubarGeometry - Abc} unix {
d472 1
a472 1
test unixMenu-19.16 {TkpComputeMenubarGeometry - AbC} unix {
d482 1
a482 1
test unixMenu-19.17 {TkpComputeMenubarGeometry - ABc} unix {
d492 1
a492 1
test unixMenu-19.18 {TkpComputeMenubarGeometry - ABC} unix {
d502 1
a502 1
test unixMenu-19.19 {TkpComputeMenubarGeometry - help menu in first position} unix {
d515 1
a515 1
test unixMenu-19.20 {TkpComputeMenubarGeometry - help menu in middle} unix {
d528 1
a528 1
test unixMenu-19.21 {TkpComputeMenubarGeometry - help menu in first position} unix {
d541 1
a541 1
test unixMenu-19.22 {TkpComputeMenubarGeometry - help item fits} unix {
d552 1
a552 1
test unixMenu-19.23 {TkpComputeMenubarGeometry - help item does not fit} unix {
d563 1
a563 1
test unixMenu-19.24 {TkpComputeMenubarGeometry - help item only one} unix {
d573 1
a573 1
test unixMenu-20.1 {DrawTearoffEntry - menubar} unix {
d580 1
a580 1
test unixMenu-20.2 {DrawTearoffEntry - non-menubar} unix {
d590 1
a590 1
test unixMenu-22.1 {SetHelpMenu - no menubars} unix {
d597 1
a597 1
test unixMenu-22.2 {SetHelpMenu - menubar but no help menu} unix {
d604 1
a604 1
test unixMenu-22.3 {SetHelpMenu - menubar with help menu} unix {
d611 1
a611 1
test unixMenu-22.4 {SetHelpMenu - multiple menubars with same help menu} unix {
d623 1
a623 1
test unixMenu-23.1 {TkpDrawMenuEntry - gc for active and not strict motif} unix {
d627 1
a627 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d631 1
a631 1
test unixMenu-23.2 {TkpDrawMenuEntry - gc for active menu item with its own gc} unix {
d635 1
a635 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d639 1
a639 1
test unixMenu-23.3 {TkpDrawMenuEntry - gc for active and strict motif} unix {
d644 1
a644 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d648 1
a648 1
test unixMenu-23.4 {TkpDrawMenuEntry - gc for disabled with disabledfg and custom entry} unix {
d652 1
a652 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d655 1
a655 1
test unixMenu-23.5 {TkpDrawMenuEntry - gc for disabled with disabledFg} unix {
d659 1
a659 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d662 1
a662 1
test unixMenu-23.6 {TkpDrawMenuEntry - gc for disabled - no disabledFg} unix {
d666 1
a666 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d669 1
a669 1
test unixMenu-23.7 {TkpDrawMenuEntry - gc for normal - custom entry} unix {
d673 1
a673 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d676 1
a676 1
test unixMenu-23.8 {TkpDrawMenuEntry - gc for normal} unix {
d680 1
a680 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d683 1
a683 1
test unixMenu-23.9 {TkpDrawMenuEntry - gc for indicator - custom entry} unix {
d688 1
a688 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d691 1
a691 1
test unixMenu-23.10 {TkpDrawMenuEntry - gc for indicator} unix {
d696 1
a696 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d699 1
a699 1
test unixMenu-23.11 {TkpDrawMenuEntry - border - custom entry} unix {
d703 1
a703 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d707 1
a707 1
test unixMenu-23.12 {TkpDrawMenuEntry - border} unix {
d711 1
a711 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d715 1
a715 1
test unixMenu-23.13 {TkpDrawMenuEntry - active border - strict motif} unix {
d720 1
a720 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d724 1
a724 1
test unixMenu-23.14 {TkpDrawMenuEntry - active border - custom entry} unix {
d728 1
a728 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d732 1
a732 1
test unixMenu-23.15 {TkpDrawMenuEntry - active border} unix {
d736 1
a736 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d740 1
a740 1
test unixMenu-23.16 {TkpDrawMenuEntry - font - custom entry} unix {
d744 1
a744 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d747 1
a747 1
test unixMenu-23.17 {TkpDrawMenuEntry - font} unix {
d751 1
a751 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d754 1
a754 1
test unixMenu-23.18 {TkpDrawMenuEntry - separator} unix {
d758 1
a758 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d761 1
a761 1
test unixMenu-23.19 {TkpDrawMenuEntry - standard} unix {
d765 1
a765 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d768 1
a768 1
test unixMenu-23.20 {TkpDrawMenuEntry - disabled cascade item} unix {
d775 1
a775 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d778 1
a778 1
test unixMenu-23.21 {TkpDrawMenuEntry - indicator} unix {
d783 1
a783 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d786 1
a786 1
test unixMenu-23.22 {TkpDrawMenuEntry - hide margin} unix {
d791 1
a791 1
    set tearoff [tk::TearOffMenu .m1 40 40]
d795 1
a795 1
test unixMenu-24.1 {GetMenuLabelGeometry - image} {testImageType unix} {
d803 1
a803 1
test unixMenu-24.2 {GetMenuLabelGeometry - bitmap} unix {
d809 1
a809 1
test unixMenu-24.3 {GetMenuLabelGeometry - no text} unix {
d815 1
a815 1
test unixMenu-24.4 {GetMenuLabelGeometry - text} unix {
d822 1
a822 1
test unixMenu-25.1 {TkpComputeStandardMenuGeometry - no entries} unix {
d827 1
a827 1
test unixMenu-25.2 {TkpComputeStandardMenuGeometry - one entry} unix {
d833 1
a833 1
test unixMenu-25.3 {TkpComputeStandardMenuGeometry - more than one entry} unix {
d840 1
a840 1
test unixMenu-25.4 {TkpComputeStandardMenuGeometry - separator} unix {
d852 2
a853 2
    catch {tk::MbPost .mb}
    list [update] [tk::MenuUnpost .mb.m] [destroy .mb]
d855 1
a855 1
test unixMenu-25.6 {TkpComputeStandardMenuGeometry - standard label geometry} unix {
d861 1
a861 1
test unixMenu-25.7 {TkpComputeStandardMenuGeometry - different font for entry} unix {
d867 1
a867 1
test unixMenu-25.8 {TkpComputeStandardMenuGeometry - second entry larger} unix {
d874 1
a874 1
test unixMenu-25.9 {TkpComputeStandardMenuGeometry - first entry larger} unix {
d881 1
a881 1
test unixMenu-25.10 {TkpComputeStandardMenuGeometry - accelerator} unix {
d887 1
a887 1
test unixMenu-25.11 {TkpComputeStandardMenuGeometry - second accel larger} unix {
d894 1
a894 1
test unixMenu-25.12 {TkpComputeStandardMenuGeometry - second accel smaller} unix {
d901 1
a901 1
test unixMenu-25.13 {TkpComputeStandardMenuGeometry - indicator} unix {
d908 1
a908 1
test unixMenu-25.14 {TkpComputeStandardMenuGeometry - second indicator less or equal } {unix testImageType} {
d919 1
a919 1
test unixMenu-25.15 {TkpComputeStandardMenuGeometry - second indicator larger } {unixOnly testImageType} {
d930 1
a930 1
test unixMenu-25.16 {TkpComputeStandardMenuGeometry - zero sized menus} unix {
d935 1
a935 1
test unixMenu-25.17 {TkpComputeStandardMenuGeometry - first column bigger} unix {
d943 1
a943 1
test unixMenu-25.18 {TkpComputeStandardMenuGeometry - second column bigger} unix {
d951 1
a951 1
test unixMenu-25.19 {TkpComputeStandardMenuGeometry - three columns} unix {
d962 1
a962 1
test unixMenu-25.20 {TkpComputeStandardMenuGeometry - hide margin} unix {
@


