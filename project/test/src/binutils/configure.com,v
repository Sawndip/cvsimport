head	1.7;
access;
symbols
	binutils-2_24-branch:1.7.0.2
	binutils-2_24-branchpoint:1.7
	binutils-2_21_1:1.5
	binutils-2_23_2:1.5
	binutils-2_23_1:1.5
	binutils-2_23:1.5
	binutils-2_23-branch:1.5.0.10
	binutils-2_23-branchpoint:1.5
	binutils-2_22_branch:1.5.0.8
	binutils-2_22:1.5
	binutils-2_22-branch:1.5.0.6
	binutils-2_22-branchpoint:1.5
	binutils-2_21:1.5
	binutils-2_21-branch:1.5.0.4
	binutils-2_21-branchpoint:1.5
	binutils-2_20_1:1.5
	binutils-2_20:1.5
	binutils-arc-20081103-branch:1.1.1.1.0.34
	binutils-arc-20081103-branchpoint:1.1.1.1
	binutils-2_20-branch:1.5.0.2
	binutils-2_20-branchpoint:1.5
	dje-cgen-play1-branch:1.3.0.2
	dje-cgen-play1-branchpoint:1.3
	arc-20081103-branch:1.1.1.1.0.32
	arc-20081103-branchpoint:1.1.1.1
	binutils-2_19_1:1.1.1.1
	binutils-2_19:1.1.1.1
	binutils-2_19-branch:1.1.1.1.0.30
	binutils-2_19-branchpoint:1.1.1.1
	binutils-2_18:1.1.1.1
	binutils-2_18-branch:1.1.1.1.0.28
	binutils-2_18-branchpoint:1.1.1.1
	binutils-csl-coldfire-4_1-32:1.1.1.1
	binutils-csl-sourcerygxx-4_1-32:1.1.1.1
	binutils-csl-innovasic-fido-3_4_4-33:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-32:1.1.1.1
	binutils-csl-coldfire-4_1-30:1.1.1.1
	binutils-csl-sourcerygxx-4_1-30:1.1.1.1
	binutils-csl-coldfire-4_1-28:1.1.1.1
	binutils-csl-sourcerygxx-4_1-29:1.1.1.1
	binutils-csl-sourcerygxx-4_1-28:1.1.1.1
	binutils-csl-arm-2006q3-27:1.1.1.1
	binutils-csl-sourcerygxx-4_1-27:1.1.1.1
	binutils-csl-arm-2006q3-26:1.1.1.1
	binutils-csl-sourcerygxx-4_1-26:1.1.1.1
	binutils-csl-sourcerygxx-4_1-25:1.1.1.1
	binutils-csl-sourcerygxx-4_1-24:1.1.1.1
	binutils-csl-sourcerygxx-4_1-23:1.1.1.1
	binutils-csl-sourcerygxx-4_1-21:1.1.1.1
	binutils-csl-arm-2006q3-21:1.1.1.1
	binutils-csl-sourcerygxx-4_1-22:1.1.1.1
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.1.1.1
	binutils-csl-sourcerygxx-4_1-20:1.1.1.1
	binutils-csl-arm-2006q3-19:1.1.1.1
	binutils-csl-sourcerygxx-4_1-19:1.1.1.1
	binutils-csl-sourcerygxx-4_1-18:1.1.1.1
	binutils-csl-renesas-4_1-9:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-25:1.1.1.1
	binutils-csl-renesas-4_1-8:1.1.1.1
	binutils-csl-renesas-4_1-7:1.1.1.1
	binutils-csl-renesas-4_1-6:1.1.1.1
	binutils-csl-sourcerygxx-4_1-17:1.1.1.1
	binutils-csl-sourcerygxx-4_1-14:1.1.1.1
	binutils-csl-sourcerygxx-4_1-15:1.1.1.1
	binutils-csl-sourcerygxx-4_1-13:1.1.1.1
	binutils-2_17:1.1.1.1
	binutils-csl-sourcerygxx-4_1-12:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-21:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-24:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-23:1.1.1.1
	binutils-csl-sourcerygxx-4_1-9:1.1.1.1
	binutils-csl-sourcerygxx-4_1-8:1.1.1.1
	binutils-csl-sourcerygxx-4_1-7:1.1.1.1
	binutils-csl-arm-2006q1-6:1.1.1.1
	binutils-csl-sourcerygxx-4_1-6:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-22:1.1.1.1
	binutils-csl-coldfire-4_1-11:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-19:1.1.1.1
	binutils-csl-coldfire-4_1-10:1.1.1.1
	binutils-csl-sourcerygxx-4_1-5:1.1.1.1
	binutils-csl-sourcerygxx-4_1-4:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-21:1.1.1.1
	binutils-csl-morpho-4_1-4:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-17:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-20:1.1.1.1
	binutils-2_17-branch:1.1.1.1.0.26
	binutils-2_17-branchpoint:1.1.1.1
	binutils-csl-2_17-branch:1.1.1.1.0.24
	binutils-csl-2_17-branchpoint:1.1.1.1
	binutils-csl-gxxpro-3_4-branch:1.1.1.1.0.22
	binutils-csl-gxxpro-3_4-branchpoint:1.1.1.1
	binutils-2_16_1:1.1.1.1
	binutils-csl-arm-2005q1b:1.1.1.1
	binutils-2_16:1.1.1.1
	binutils-csl-arm-2005q1a:1.1.1.1
	binutils-csl-arm-2005q1-branch:1.1.1.1.0.20
	binutils-csl-arm-2005q1-branchpoint:1.1.1.1
	binutils-2_16-branch:1.1.1.1.0.18
	binutils-2_16-branchpoint:1.1.1.1
	csl-arm-2004-q3d:1.1.1.1
	csl-arm-2004-q3:1.1.1.1
	binutils-2_15:1.1.1.1
	binutils-2_15-branchpoint:1.1.1.1
	csl-arm-2004-q1a:1.1.1.1
	csl-arm-2004-q1:1.1.1.1
	binutils-2_15-branch:1.1.1.1.0.16
	cagney_bfdfile-20040213-branch:1.1.1.1.0.14
	cagney_bfdfile-20040213-branchpoint:1.1.1.1
	cagney_bigcore-20040122-branch:1.1.1.1.0.12
	cagney_bigcore-20040122-branchpoint:1.1.1.1
	csl-arm-2003-q4:1.1.1.1
	binutils-2_14:1.1.1.1
	binutils-2_14-branch:1.1.1.1.0.10
	binutils-2_14-branchpoint:1.1.1.1
	binutils-2_13_2_1:1.1.1.1
	binutils-2_13_2:1.1.1.1
	binutils-2_13_1:1.1.1.1
	binutils-2_13:1.1.1.1
	binutils-2_13-branchpoint:1.1.1.1
	binutils-2_13-branch:1.1.1.1.0.8
	binutils-2_12_1:1.1.1.1
	binutils-2_12:1.1.1.1
	binutils-2_12-branch:1.1.1.1.0.6
	binutils-2_12-branchpoint:1.1.1.1
	cygnus_cvs_20020108_pre:1.1.1.1
	binutils-2_11_2:1.1.1.1
	binutils-2_11_1:1.1.1.1
	binutils-2_11:1.1.1.1
	x86_64versiong3:1.1.1.1
	binutils-2_11-branch:1.1.1.1.0.4
	binutils-2_10_1:1.1.1.1
	binutils-2_10:1.1.1.1
	binutils-2_10-branch:1.1.1.1.0.2
	binutils-2_10-branchpoint:1.1.1.1
	binutils_latest_snapshot:1.7
	repo-unification-2000-02-06:1.1.1.1
	binu_ss_19990721:1.1.1.1
	binu_ss_19990602:1.1.1.1
	binu_ss_19990502:1.1.1.1
	cygnus:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2013.07.09.07.32.14;	author gingold;	state Exp;
branches;
next	1.6;

1.6
date	2012.12.17.16.55.39;	author nickc;	state Exp;
branches;
next	1.5;

1.5
date	2009.09.02.14.14.49;	author gingold;	state Exp;
branches;
next	1.4;

1.4
date	2009.09.01.13.16.53;	author gingold;	state Exp;
branches;
next	1.3;

1.3
date	2009.05.25.13.03.24;	author gingold;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.14.09.57.33;	author gingold;	state Exp;
branches;
next	1.1;

1.1
date	99.05.03.07.29.09;	author rth;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.05.03.07.29.09;	author rth;	state Exp;
branches;
next	;


desc
@@


1.7
log
@binutils/
2013-07-09  Tristan Gingold  <gingold@@adacore.com>

	* configure.com: Add new defines to match changes in configure.


gas/
2013-07-09  Tristan Gingold  <gingold@@adacore.com>

	* configure.com: Define HAVE_SYS_TYPES_H and HAVE_UNISTD_H
@
text
@$!
$! This file configures binutils for use with openVMS/Alpha
$! We do not use the configure script, since we do not have /bin/sh
$! to execute it.
$!	
$!   Copyright 2012 Free Software Foundation
$!
$! This file is free software; you can redistribute it and/or modify
$! it under the terms of the GNU General Public License as published by
$! the Free Software Foundation; either version 3 of the License, or
$! (at your option) any later version.
$! 
$! This program is distributed in the hope that it will be useful,
$! but WITHOUT ANY WARRANTY; without even the implied warranty of
$! MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
$! GNU General Public License for more details.
$! 
$! You should have received a copy of the GNU General Public License
$! along with this program; see the file COPYING3.  If not see
$! <http://www.gnu.org/licenses/>.
$!
$! Written by Klaus K"ampf (kkaempf@@rmi.de)
$!
$ arch=F$GETSYI("ARCH_NAME")
$ arch=F$EDIT(arch,"LOWERCASE")
$ write sys$output "Configuring binutils for ''arch' target"
$!
$! Generate config.h
$!
$ create config.h
/* config.h.  Generated automatically by configure.com  */
/* Is the type time_t defined in <time.h>?  */
#define HAVE_TIME_T_IN_TIME_H 1
/* Is the type time_t defined in <sys/types.h>?  */
#define HAVE_TIME_T_IN_TYPES_H 1
/* Does <utime.h> define struct utimbuf?  */
#define HAVE_GOOD_UTIME_H 1
/* Whether fprintf must be declared even if <stdio.h> is included.  */
#define NEED_DECLARATION_FPRINTF 1
/* Do we need to use the b modifier when opening binary files?  */
/* #undef USE_BINARY_FOPEN */
/* Define if you have the utimes function.  */
#define HAVE_UTIMES 1
/* Define if you have the <fcntl.h> header file.  */
#define HAVE_FCNTL_H 1
/* Define if you have the <stdlib.h> header file.  */
#define HAVE_STDLIB_H 1
/* Define if you have the <string.h> header file.  */
#define HAVE_STRING_H 1
/* Define if you have the <strings.h> header file.  */
#define HAVE_STRINGS_H 1
/* Define if you have the <sys/file.h> header file.  */
#define HAVE_SYS_FILE_H 1
/* Define if you have the <unistd.h> header file.  */
#define HAVE_UNISTD_H 1

/* Alloca.  */
#ifdef __DECC
#include <builtins.h>
#define C_alloca(x) __ALLOCA(x)
#endif
/* Name of package */
#define PACKAGE "binutils"

/* Define to the address where bug reports for this package should be sent. */
#define PACKAGE_BUGREPORT ""

/* Define to the full name of this package. */
#define PACKAGE_NAME ""

/* Define to the full name and version of this package. */
#define PACKAGE_STRING ""

/* Define to the one symbol short name of this package. */
#define PACKAGE_TARNAME ""

/* Define to the home page for this package. */
#define PACKAGE_URL ""

/* Define to the version of this package. */
#define PACKAGE_VERSION ""
$!
$! Add TARGET.
$!
$ if arch .eqs. "ia64" then target = "elf64-ia64-vms"
$ if arch .eqs. "alpha" then target = "vms-alpha"
$ if arch .eqs. "vax" then target = "vms-vax"
$!
$ open/append tfile config.h
$ write tfile "#define TARGET """ + target + """"
$ close tfile
$ write sys$output "Created `config.h'"
$!
$ write sys$output "Generate binutils build.com"
$!
$ create build.com
$DECK
$ DEFS=""
$ OPT="/noopt/debug"
$ CFLAGS=OPT + "/include=([],""../include"",[-.bfd])" +-
 "/name=(as_is,shortened)" +-
 "/prefix=(all,exc=(""getopt"",""optarg"",""optopt"",""optind"",""opterr""))"
$ BFDLIB = ",[-.bfd]libbfd.olb/lib"
$ LIBIBERTY = ",[-.libiberty]libiberty.olb/lib"
$ OPCODES = ",[-.opcodes]libopcodes.olb/lib"
$ DEBUG_FILES = ",rddbg,debug,stabs,ieee,rdcoff,dwarf"
$ BULIBS_FILES = ",bucomm,version,filemode"
$ ALL_FILES="nm,strings,addr2line,size,objdump,prdbg" +-
   BULIBS_FILES + DEBUG_FILES
$!
$ write sys$output "CFLAGS=",CFLAGS
$ if p1.nes."LINK"
$ then
$   NUM = 0
$   LOOP:
$     F = F$ELEMENT(NUM,",",ALL_FILES)
$     IF F.EQS."," THEN GOTO END
$     write sys$output "Compiling ", F, ".c"
$     cc 'CFLAGS 'F.c
$     NUM = NUM + 1
$     GOTO LOOP
$   END:
$ endif
$ purge
$!
$ write sys$output "Building nm.exe"
$ NM_OBJS="nm.obj" + BULIBS_FILES + BFDLIB + LIBIBERTY
$ link/exe=nm 'NM_OBJS
$!
$ write sys$output "Building strings.exe"
$ STRINGS_OBJS="strings.obj" + BULIBS_FILES + BFDLIB + LIBIBERTY
$ link/exe=strings 'STRINGS_OBJS
$!
$ write sys$output "Building size.exe"
$ SIZE_OBJS="size.obj" + BULIBS_FILES + BFDLIB + LIBIBERTY
$ link/exe=size 'SIZE_OBJS
$!
$ write sys$output "Building addr2line.exe"
$ ADDR2LINE_OBJS="addr2line.obj" + BULIBS_FILES + BFDLIB + LIBIBERTY
$ link/exe=addr2line 'ADDR2LINE_OBJS
$!
$ write sys$output "Building objdump.exe"
$ OBJDUMP_OBJS="objdump.obj,prdbg.obj" + DEBUG_FILES + BULIBS_FILES +-
   BFDLIB + OPCODES + LIBIBERTY
$ link/exe=objdump 'OBJDUMP_OBJS
$EOD
@


1.6
log
@Add copyright notices
@
text
@d56 1
d62 20
@


1.5
log
@2009-09-02  Tristan Gingold  <gingold@@adacore.com>

	* configure.com: Do not copy makefile.vms-in to makefile.vms
	* makefile.vms-in: Renamed to...
	* makefile.vms: ... this usual name as it is not processed anymore.
	Remove WRITE_DEBUG_OBJS (unused) and reorder object files for
	objdump.exe.
@
text
@d5 16
@


1.4
log
@2009-09-01  Tristan Gingold  <gingold@@adacore.com>

	* makefile.vms: Ported to Itanium VMS.  Remove useless targets and
	dependencies.  Remove unused FORMAT variable.
	* configure.com: New file to create build.com DCL script for
	Itanium VMS or Alpha VMS.
@
text
@a56 3
$ copy makefile.vms-in makefile.vms
$ write sys$output "Created `makefile.vms'"
$!
@


1.3
log
@2009-05-25  Tristan Gingold  <gingold@@adacore.com>

	* makefile.vms-in: Fix CFLAGS, add addr2line.exe target.

	* configure.com: Fix it: handle alloca and define TARGET in config.h.
@
text
@d8 3
a10 2
$arch_indx = 1 + ((f$getsyi("CPU").ge.128).and.1)      ! vax==1, alpha==2
$arch = f$element(arch_indx,"|","|VAX|Alpha|")
d48 3
a50 6
$ if arch .eqs. "Alpha"
$ then
$   target = "vms-alpha"
$ else
$   target = "vms-vax"
$ endif
d59 54
@


1.2
log
@bfd/
2008-11-14  Tristan Gingold  <gingold@@adacore.com>

	* configure.com: Handle bfd_default_target_size, BFD_HOST_LONG_LONG,
	BFD_HOST_64BIT_LONG_LONG, BFD_HOSTPTR_T, bfd_file_ptr.
	Generate bfdver.h.
	* vms-hdr.c (_bfd_vms_write_hdr): Use strdup/free instead of alloca.
	* hosts/alphavms.h: Defines macros to bypass i18n.
	* makefile.vms (OBJS): Update file list.
	(DEFS): Remove VMS_DEBUG, const, add DEBUGDIR.
	(CFLAGS): Update flags.
	* bfdio.c (real_fopen): Add code specific to VMS: extract attributes
	from modes.

binutils/
2008-11-14  Tristan Gingold  <gingold@@adacore.com>

	* configure.com: Get version from configure.in of bfd.
	* makefile.vms-in (DEBUG_OBJS): Add dwarf.obj.
	(CFLAGS): Update flags.

include/
2008-11-14  Tristan Gingold  <gingold@@adacore.com>

	* fopen-vms.h (FOPEN_RB): Use a single string to match the
	standard prototype.
	(FOPEN_WB): Ditto.
	(FOPEN_AB): Ditto.
	(FOPEN_RUB): Ditto.
	(FOPEN_WUB): Ditto.
	(FOPEN_AUB): Ditto.

libiberty/
2008-11-14  Tristan Gingold  <gingold@@adacore.com>

	* makefile.vms (OBJS): Update objects list.
	(CFLAGS): Update.
	(libiberty.olb): Remove alloca-conf.h dependency.
	* config.h-vms: Use new macro sets, use builtin alloca.

opcodes/
2008-11-14  Tristan Gingold  <gingold@@adacore.com>

	* makefile.vms (OBJS): Update list of objects.
	(DEFS): Update
	(CFLAGS): Update.
@
text
@a10 1
$!
d13 2
a14 3
$ create []config.h
/* config.h.  Generated automatically by configure.  */
/* config.in.  Generated automatically from configure.in by autoheader.  */
a22 2
/* Whether sbrk must be declared even if <unistd.h> is included.  */
#undef NEED_DECLARATION_SBRK
a24 2
/* Define if you have the sbrk function.  */
/* #undef HAVE_SBRK 1 */
d39 7
a45 1
$ write sys$output "Generated `config.h'"
d47 6
d54 4
a57 1
$! Edit VERSION in makefile.vms-in
d59 1
a59 26
$ edit/tpu/nojournal/nosection/nodisplay/command=sys$input -
        []makefile.vms-in /output=[]makefile.vms
$DECK
!
! Get VERSION from configure.in
!
   mfile := CREATE_BUFFER("mfile", "[-.bfd]CONFIGURE.IN");
   rang := CREATE_RANGE(BEGINNING_OF(mfile), END_OF(mfile));
   match_pos := SEARCH_QUIETLY('AM_INIT_AUTOMAKE(bfd, ', FORWARD, EXACT, rang);
   IF match_pos <> 0 THEN;
     POSITION(BEGINNING_OF(match_pos));
     ERASE(match_pos);
     vers := CURRENT_LINE-")";
   ELSE;
     vers := "unknown";
   ENDIF;

   file := CREATE_BUFFER("file", GET_INFO(COMMAND_LINE, "file_name"));
   rang := CREATE_RANGE(BEGINNING_OF(file), END_OF(file));
   match_pos := SEARCH_QUIETLY('@@VERSION@@', FORWARD, EXACT, rang);
   POSITION(BEGINNING_OF(match_pos));
   ERASE(match_pos);
   COPY_TEXT(vers);
   WRITE_FILE(file, GET_INFO(COMMAND_LINE, "output_file"));
   QUIT
$  EOD
@


1.1
log
@Initial revision
@
text
@d56 1
a56 1
   mfile := CREATE_BUFFER("mfile", "CONFIGURE.IN");
d58 1
a58 1
   match_pos := SEARCH_QUIETLY('AM_INIT_AUTOMAKE(binutils, ', FORWARD, EXACT, rang);
@


1.1.1.1
log
@19990502 sourceware import
@
text
@@

