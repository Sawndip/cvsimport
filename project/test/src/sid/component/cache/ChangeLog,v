head	1.36;
access;
symbols
	sid-snapshot-20180601:1.36
	sid-snapshot-20180501:1.36
	sid-snapshot-20180401:1.36
	sid-snapshot-20180301:1.36
	sid-snapshot-20180201:1.36
	sid-snapshot-20180101:1.36
	sid-snapshot-20171201:1.36
	sid-snapshot-20171101:1.36
	sid-snapshot-20171001:1.36
	sid-snapshot-20170901:1.36
	sid-snapshot-20170801:1.36
	sid-snapshot-20170701:1.36
	sid-snapshot-20170601:1.36
	sid-snapshot-20170501:1.36
	sid-snapshot-20170401:1.36
	sid-snapshot-20170301:1.36
	sid-snapshot-20170201:1.36
	sid-snapshot-20170101:1.36
	sid-snapshot-20161201:1.36
	sid-snapshot-20161101:1.36
	sid-snapshot-20160901:1.36
	sid-snapshot-20160801:1.36
	sid-snapshot-20160701:1.36
	sid-snapshot-20160601:1.36
	sid-snapshot-20160501:1.36
	sid-snapshot-20160401:1.36
	sid-snapshot-20160301:1.36
	sid-snapshot-20160201:1.36
	sid-snapshot-20160101:1.36
	sid-snapshot-20151201:1.36
	sid-snapshot-20151101:1.36
	sid-snapshot-20151001:1.36
	sid-snapshot-20150901:1.36
	sid-snapshot-20150801:1.36
	sid-snapshot-20150701:1.36
	sid-snapshot-20150601:1.36
	sid-snapshot-20150501:1.36
	sid-snapshot-20150401:1.36
	sid-snapshot-20150301:1.36
	sid-snapshot-20150201:1.36
	sid-snapshot-20150101:1.36
	sid-snapshot-20141201:1.36
	sid-snapshot-20141101:1.36
	sid-snapshot-20141001:1.36
	sid-snapshot-20140901:1.36
	sid-snapshot-20140801:1.36
	sid-snapshot-20140701:1.36
	sid-snapshot-20140601:1.36
	sid-snapshot-20140501:1.36
	sid-snapshot-20140401:1.36
	sid-snapshot-20140301:1.36
	sid-snapshot-20140201:1.36
	sid-snapshot-20140101:1.36
	sid-snapshot-20131201:1.36
	sid-snapshot-20131101:1.36
	sid-snapshot-20131001:1.36
	sid-snapshot-20130901:1.35
	sid-snapshot-20130801:1.35
	sid-snapshot-20130701:1.35
	sid-snapshot-20130601:1.35
	sid-snapshot-20130501:1.35
	sid-snapshot-20130401:1.35
	sid-snapshot-20130301:1.35
	sid-snapshot-20130201:1.35
	sid-snapshot-20130101:1.35
	sid-snapshot-20121201:1.35
	sid-snapshot-20121101:1.35
	sid-snapshot-20121001:1.35
	sid-snapshot-20120901:1.35
	sid-snapshot-20120801:1.35
	sid-snapshot-20120701:1.35
	sid-snapshot-20120601:1.35
	sid-snapshot-20120501:1.35
	sid-snapshot-20120401:1.35
	sid-snapshot-20120301:1.35
	sid-snapshot-20120201:1.35
	sid-snapshot-20120101:1.35
	sid-snapshot-20111201:1.35
	sid-snapshot-20111101:1.35
	sid-snapshot-20111001:1.35
	sid-snapshot-20110901:1.35
	sid-snapshot-20110801:1.35
	sid-snapshot-20110701:1.35
	sid-snapshot-20110601:1.35
	sid-snapshot-20110501:1.35
	sid-snapshot-20110401:1.35
	sid-snapshot-20110301:1.35
	sid-snapshot-20110201:1.35
	sid-snapshot-20110101:1.35
	sid-snapshot-20101201:1.35
	sid-snapshot-20101101:1.35
	sid-snapshot-20101001:1.35
	sid-snapshot-20100901:1.35
	sid-snapshot-20100801:1.35
	sid-snapshot-20100701:1.35
	sid-snapshot-20100601:1.35
	sid-snapshot-20100501:1.35
	sid-snapshot-20100401:1.35
	sid-snapshot-20100301:1.35
	sid-snapshot-20100201:1.35
	sid-snapshot-20100101:1.35
	sid-snapshot-20091201:1.35
	sid-snapshot-20091101:1.35
	sid-snapshot-20091001:1.35
	sid-snapshot-20090901:1.35
	sid-snapshot-20090801:1.35
	sid-snapshot-20090701:1.35
	sid-snapshot-20090601:1.35
	sid-snapshot-20090501:1.35
	sid-snapshot-20090401:1.34
	sid-snapshot-20090301:1.34
	sid-snapshot-20090201:1.34
	sid-snapshot-20090101:1.34
	sid-snapshot-20081201:1.34
	sid-snapshot-20081101:1.34
	sid-snapshot-20081001:1.34
	sid-snapshot-20080901:1.34
	sid-snapshot-20080801:1.34
	sid-snapshot-20080701:1.34
	sid-snapshot-20080601:1.34
	sid-snapshot-20080501:1.34
	sid-snapshot-20080403:1.34
	sid-snapshot-20080401:1.34
	sid-snapshot-20080301:1.34
	sid-snapshot-20080201:1.34
	sid-snapshot-20080101:1.34
	sid-snapshot-20071201:1.34
	sid-snapshot-20071101:1.34
	sid-snapshot-20071001:1.34
	sid-20020905-branchpoint:1.22
	sid-20020905-branch:1.22.0.2
	cygnus_cvs_20020108_pre:1.18;
locks; strict;
comment	@# @;


1.36
date	2013.09.23.03.26.02;	author amodra;	state Exp;
branches;
next	1.35;

1.35
date	2009.04.18.02.03.38;	author dj;	state Exp;
branches;
next	1.34;

1.34
date	2007.02.05.20.28.39;	author brolley;	state Exp;
branches;
next	1.33;

1.33
date	2006.05.10.20.24.48;	author brolley;	state Exp;
branches;
next	1.32;

1.32
date	2006.01.12.21.22.31;	author brolley;	state Exp;
branches;
next	1.31;

1.31
date	2005.12.16.10.23.12;	author nathan;	state Exp;
branches;
next	1.30;

1.30
date	2005.06.04.03.23.00;	author jimb;	state Exp;
branches;
next	1.29;

1.29
date	2005.05.10.15.41.05;	author brolley;	state Exp;
branches;
next	1.28;

1.28
date	2004.07.20.17.10.48;	author brolley;	state Exp;
branches;
next	1.27;

1.27
date	2004.07.01.16.55.09;	author brolley;	state Exp;
branches;
next	1.26;

1.26
date	2004.05.10.21.51.10;	author brolley;	state Exp;
branches;
next	1.25;

1.25
date	2004.04.29.20.26.08;	author brolley;	state Exp;
branches;
next	1.24;

1.24
date	2003.01.31.17.10.59;	author fche;	state Exp;
branches;
next	1.23;

1.23
date	2003.01.08.02.51.57;	author bje;	state Exp;
branches;
next	1.22;

1.22
date	2002.07.16.19.14.46;	author brolley;	state Exp;
branches;
next	1.21;

1.21
date	2002.06.08.20.33.18;	author bje;	state Exp;
branches;
next	1.20;

1.20
date	2002.05.17.21.28.14;	author bje;	state Exp;
branches;
next	1.19;

1.19
date	2002.04.09.15.03.06;	author bje;	state Exp;
branches;
next	1.18;

1.18
date	2001.12.28.20.58.39;	author fche;	state Exp;
branches;
next	1.17;

1.17
date	2001.12.27.16.16.39;	author fche;	state Exp;
branches;
next	1.16;

1.16
date	2001.12.04.20.16.07;	author fche;	state Exp;
branches;
next	1.15;

1.15
date	2001.12.01.00.08.53;	author fche;	state Exp;
branches;
next	1.14;

1.14
date	2001.10.22.19.48.44;	author fche;	state Exp;
branches;
next	1.13;

1.13
date	2001.09.27.20.23.50;	author fche;	state Exp;
branches;
next	1.12;

1.12
date	2001.09.26.21.11.48;	author fche;	state Exp;
branches;
next	1.11;

1.11
date	2001.08.04.12.28.01;	author fche;	state Exp;
branches;
next	1.10;

1.10
date	2001.08.04.11.04.20;	author bje;	state Exp;
branches;
next	1.9;

1.9
date	2001.08.03.06.02.42;	author mrg;	state Exp;
branches;
next	1.8;

1.8
date	2001.07.17.01.24.25;	author bje;	state Exp;
branches;
next	1.7;

1.7
date	2001.07.13.15.39.45;	author mrg;	state Exp;
branches;
next	1.6;

1.6
date	2001.07.10.03.17.17;	author bje;	state Exp;
branches;
next	1.5;

1.5
date	2001.07.09.08.13.08;	author bje;	state Exp;
branches;
next	1.4;

1.4
date	2001.06.24.23.24.11;	author bje;	state Exp;
branches;
next	1.3;

1.3
date	2001.06.21.13.37.08;	author bje;	state Exp;
branches;
next	1.2;

1.2
date	2001.06.19.03.51.35;	author bje;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.15.04.19.50;	author bje;	state Exp;
branches;
next	;


desc
@@


1.36
log
@Pick up support for powerpc64le in top level libtool.m4 by deleting
sid/config files duplicating the top level files and modifying
AC_CONFIG_AUX_DIR and ACLOCAL_AMFLAGS appropriately.
Regenerate with automake-1.11.1 and autoconf-2.64.
@
text
@2013-09-23  Alan Modra  <amodra@@gmail.com>

	* Makefile.in: Regenerate.

2009-04-08  DJ Delorie  <dj@@redhat.com>

	* cache.cxx (cache_component::cache_component):
	Add write_hint_pin().  Attach it to write-hint.
	(cache_component::write_hint): New.
	* cache.h (write_hint_pin): New.
	(write_hint): New.

2007-02-05  Dave Brolley  <brolley@@redhat.com>

	* Contribute the following changes:
	2005-08-22  Dave Brolley  <brolley@@redhat.com>

	* mep-cache.cxx (configure): New virtual override in mep_cache.
	* mep-cache.h (configure): Likewise.

	2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* mep-cache.cxx (mep_cache): Inherit from blocking_cache_component.
	* mep-cache.h (mep_cache): Inherit from blocking_cache_component.

	2004-07-20  Dave Brolley  <brolley@@redhat.com>

	* mep-cache.h (clear_tag_pin): New member of mep_cache.
	(mep_cache::clear_tag): New method.
	(mep_cache_line::clear_tag): New method.
	* mep-cache.cxx (mep_cache): Initialize clear_tag_pin. Add clear-tag
	pin.
	(mep_cache::clear_tag): New method.
	(mep_cache_line::clear_tag): New method.

	2004-04-29  Dave Brolley  <brolley@@redhat.com>

	* mep-cache.cxx (mep_assoc_replacement_algorithm::expell): update the
	R bit here.
	(mep_assoc_replacement_algorithm::update): Removed.
	* mep-cache.h (mep_assoc_replacement_algorithm::update): Removed.

	2004-04-26  Dave Brolley  <brolley@@redhat.com>

	* cache.cxx (mep-cache.h): #include it.
	(mep_assoc_replacement): New mep_assoc_replacement_algorithm.
	(CacheListTypes): List hw-mep-cache-* types.
	(create_mep_cache): New static function.
	(CacheCreate): Call create_mep_cache.
	* Makefile.am (libcache_la_SOURCES): Add mep-cache.{cxx,h}.
	* Makefile.in: Regenerated.

2006-05-10  Dave Brolley  <brolley@@redhat.com>

	* cache.cxx (buffer_sizes): New static table.
	(CacheListTypes): List hw-cache-buffer-* using buffer_sizes. Same for
	hw-blocking-cache-buffer-*.
	(CacheCreate): Parse hw-cache-buffer-N and hw-blocking-cache-buffer-N
	in order to determine buffer size.

2005-12-16  Nathan Sidwell  <nathan@@codesourcery.com>

	Second part of ms1 to mt renaming.
	* Makefile.in: Rebuilt.

2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* hw-cache.xml: Input to flush-set, invalidate-set and
	* hw-cache.txt: Regenerated.
	flush-and-invalidate-set is now an address.
	* cacheutil.h (addr_to_tag): New method of cache.
	* cacheutil.cxx (addr_to_tag): New method of cache.
	* cache.cxx (cache_component::flush_set): Input argument is now an address.
	(cache_component::flush_and_invalidate_set): Likewise.
	(blocking_cache_component::flush_set): Likewise.
	(blocking_cache_component::flush_and_invalidate_set): Likewise.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* cache.cxx (cache_component): Initialize data_width. Add "data-width"
	attribute.
	(read_line): Access the data 4 or 8 bytes at a time, depending on
	data_width.
	(write_line): Ditto.
	(read_downstream, write_downstream): New methods of cache_component.
	* cache.h (read_downstream, write_downstream): New methods of
	cache_component.
	(data_width): New member of cache_component.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* cache.cxx (cache_component): Add "operation-status" pin.
	(cache_component::flush_all_lines): Accumulate latency and call
	report_status.
	(cache_component::flush_line): Ditto.
	(cache_component::flush_set): Ditto.
	(cache_component::flush_and_invalidate_set): Ditto.
	(cache_component::invalidate_all_lines): Call report_status.
	(cache_component::invalidate_line): Ditto.
	(cache_component::flush_and_invalidate_line): Ditto.
	(cache_component::invalidate_set): Ditto.
	(cache_component::prefetch_line): Ditto.
	(cache_component::lock_line): Ditto.
	(cache_component::unlock_line): Ditto.
	(blocking_cache_component::flush_all_lines): Call report_status if
	child is blocked.
	(blocking_cache_component::flush_line): Ditto.
	(blocking_cache_component::flush_set): Ditto.
	(blocking_cache_component::flush_and_invalidate_set): Ditto.
	(blocking_cache_component::flush_and_invalidate_line): Ditto.
	(blocking_cache_component::prefetch_line): Ditto.
	* cache.h (report_status): New method of cache_component.
	(operation_status_pin): New output pin.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* cache.h (flush_all_lines, flush_line, flush_set)
	(flush_and_invalidate_set, flush_and_invalidate_line)
	(prefetch_line): Now virtual. Also, new methods of
	blocking_cache_component.
	(setup_flush_all_transaction, setup_flush_line_transaction)
	(setup_flush_set_transaction)
	(setup_flush_and_invalidate_set_transaction)
	(setup_flush_and_invalidate_line_transaction)
	(perform_flush_all_transaction, perform_flush_line_transaction)
	(perform_flush_set_transaction)
	(perform_flush_and_invalidate_set_transaction)
	(perform_flush_and_invalidate_line_transaction): New methods of
	blocking_cache_component.
	* cache.cxx (blocking_cache_component::write): Remove log message. Don't
	need return code from continue_child_thread_and_wait.
	blocking_cache_component::read): Ditto.
	(flush_all_lines, flush_line, flush_set)
	(flush_and_invalidate_set, flush_and_invalidate_line)
	(prefetch_line): New methods of blocking_cache_component.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* cache.cxx (cache_component): Initialize total_latency_p. Add
	"total-latency?" attribute.
	(read_line): Return the total latency of all accesses if total_latency_p
	is set.
	(write_line): Ditto.
	(handle_bus_error): Copy the status, s, to transaction_status.
	(blocking_cache_component::read): Always return transaction_status.
	(blocking_cache_component::write): Ditto.
	* cache.h (total_latency_p): New member of cache_component.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* cache.h (cache_component::lock_downstream): New virtual method.
	(cache_component::unlock_downstream): New virutal method.
	(blocking_cache_component::lock_downstream): New virtual override.
	(blocking_cache_component::unlock_downstream): New virtual override.
	* cache.cxx (read_line): Return the maximum latency from the reads
	performed if refill latency is not requested. Call lock_downstream
	before the first read. Call unlock_downstream before the final read.
	(write_line): Ditto.
	(blocking_cache_component): Add downstream-lock pin.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* cache.cxx (blocking_cache_child_thread_root): Don't call
	child->child_wait_for_resume.
	(handle_bus_error): Ditto.
	(DEFN_METHOD): SID_SIG_CHILD_BLOCKED is now ctl_child_blocked.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* Makefile.am (AM_XXXFLAGS): Set it to $(TOP_CXXFLAGS).
	(AM_MAKEFLAGS): Pass along TOP_CXXFLAGS.
	* Makefile.in: Regenerated.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

	* cache.h (sidblockingutil.h): #include it.
	(namespace sid): Add "using" clause. Remove sid:: qualifier from
	declarations.
	(cache_component): Inhereit virtually from
	fixed_attribute_map_component and fixed_pin_map_component.
	(cache_component::write): Variants now virtual.
	(cache_component::read): Ditto.
	(cache_component::handle_read_error): New virtual method.
	(cache_component::handle_write_error): New virtual method.
	(cache_bus::write_any): Call cache.write.
	(cache_bus::read_any): Call cache.read.
	(blocking_cache_component): New class.
	* cache.cxx (cache_component::write_any): Call handle_write_error to
	handle bus errors.
	(cache_component::write_line): Ditto.
	(cache_component::read_any): Call handle_read_error as above.
	(cache_component::read_line): Ditto.
	(blocking_cache_child_thread_root): New function.
	(blocking_cache_component): New constructor.
	(handle_bus_error): New method.
	(blocking_cache_component:write): New methods.
	(blocking_cache_component::read): New methods.
	(CacheListTypes): Add hw-blocking-cache-basic and
	hw-blocking-cache-buffer-8, hw-blocking-cache-direct* and
	hw-blocking-cache/*kb*.
	(CacheCreate): Parse and construct the above.

2004-07-20  Dave Brolley  <brolley@@redhat.com>

	* cacheutil.cxx (find): Make sure cache line is valid before returning
	it.
	* cache.cxx (write_any): Move call to addr_to_tag to a later point when
	the result is actually needed. Make sure cache line is valid before
	flushing it.
	(read_any): Make sure cache line is valid before flushing it.

2004-07-01  Dave Brolley  <brolley@@redhat.com>

	* cache.cxx (write_any): Allow misaligned access. Return
	bus::misaligned for accesses which cross line boundary.
	(read_any): Ditto.

2004-05-10  Dave Brolley  <brolley@@redhat.com>

	* cacheutil.cxx (find_any_dirty): Make sure the line is valid before
	checking the dirty bit.
	(vacancy_p): Line is also vacant if it is not valid.

2004-04-29  Dave Brolley  <brolley@@redhat.com>

	* cacheutil.cxx (cache_set::expell_line): Don't update the set here.

2004-04-29  Dave Brolley  <brolley@@redhat.com>

	* cache.cxx: Update calls to cache::find.
	* cacheutil.cxx (cache_set::allocate_lines): Now takes cache index as
	an argument. Update all callers.
	(cache_set::find): Now returns a pointer to the line, if found. Update
	all callers.
	(cache::find): Ditto.
	(cache_set::expell_line): Update the status of the expelled line.
	* cacheutil.h (cache_line_factory::make_line): Now takes cache index as
	an argument. Update all callers.
	(cache_set::allocate_lines): Now takes cache index as
	an argument. Update all callers.
	(cache_set::find): Now returns a pointer to the line, if found. Update
	all callers.
	(cache::find): Ditto.

2004-04-29  Dave Brolley  <brolley@@redhat.com>

	* cacheutil.h (cache_line): Removed copy constructor. Now virtual base
	class.
	(cache_line::operator=): Removed.
	(internal_cache_line): New class implements former cache_line class.
	(cache_set): Now takes cache_line_factory.
	(allocate_lines): New method moves line allocation from the constructor.
	(cache_set::set_line): Now takes reference to cache_line.
	(cache_set::replace_line): Renamed to expell_line. Now returns a pointer
	to the expelled line.
	(cache): Now takes cache_line_factory argument.
	(cache::init): New method moves set allocation from the constructor.
	(cache_set::expell_line): Renamed to expell_line. Now returns a pointer
	to the expelled line.
	(cache_line_factory): New class.
	* cacheutil.cxx (cache_line): Removed copy constructor. Now virtual base
	class.
	(cache_line::operator=): Removed.
	(internal_cache_line): New class implements former cache_line class.
	(cache_set): Now takes cache_line_factory.
	(allocate_lines): New method moves line allocation from the constructor.
	(cache_set::set_line): Now takes reference to cache_line.
	(dummy): Now internal to cache_set::find.
	(cache_set::replace_line): Renamed to expell_line. Now returns a pointer
	to the expelled line.
	(cache): Now takes cache_line_factory argument.
	(cache::init): New method moves set allocation from the constructor.
	(cache_set::expell_line): Renamed to expell_line. Now returns a pointer
	to the expelled line.
	* cache.h (cache_replacement_algorithm::expell): Renamed from 'replace'.
	Returns a pointer to the expelled line. Update specializations.
	(cache_component): Now takes a cache_line_factory as an argument.
	Private data now protected.
	(line_factory): New member of cache_component.
	(~cache_component): Now virtual.
	(CacheCreate): Pass internal_line_factory to cache_component.
	* cache.cxx (line_sizes): Make it static.
	(line_sizes): Ditto.
	(replacement_algorithms): Ditto.
	(internal_line_factory): New static cache_line_factory.
	(cache_component): Now takes a cache_line_factory as an argument. Pass
	the cache line factory to the constructor for acache. Save a reference
	to the line factory. Call acache.init
	(write_any): Rewrite to use cache::expell_line instead of the former
	cache::replace.
	(read_any): Ditto.
	(cache_replacement_algorithm::expell): Renamed from 'replace'. Returns
	a pointer to the expelled line. Update all callers and specializations.
	(CacheCreate): Pass internal_line_factory to cache_component.

2003-01-31  Frank Ch. Eigler  <fche@@redhat.com>

	* log2.h: #undef log2, in case a macro collides with the function.

2002-07-16  Dave Brolley  <brolley@@redhat.com>

	* cache.h (cache): Add flush_and_invalidate_set_pin and
	flush_and_invalidate_pin.
	* cache.cxx (cache_component): Initialize flush_and_invalidate_set_pin
	and flush_and_invalidate_pin. Add flush-and-invalidate and
	flush-and-invalidate-set pins.
	(flush_set): Don't flush an invalid line.
	(flush_and_invalidate_set): New method.
	(flush_and_invalidate_line): New method.
	* hw-cache.xml, hw-cache.txt: Modified accordingly.

2002-06-08  Ben Elliston  <bje@@redhat.com>

	* cacheutil.h (cache_set::expunge): New method.
	(cache_set::operator[]): Likewise.
	(cache::invalidate): Likewise.
	(cache::operator[]): Likewise.
	* cacheutil.cxx (cache::invalidate): Implement.
	* cache.h (cache_component::flush_set_pin): New pin.
	(cache_component::flush_set): New callback method.
	(cache_component::invalidate_set_pin): New pin.
	(cache_component::invalidate_set): New method.
	* cache.cxx (cache_component constructor): Initialise and add
	"flush-set" and "invalidate-set" pins.
	(cache_component::flush_set): Implement.
	(cache_component::invalidate_set): Likewise.
	* hw-cache.xml: Update documentation.

2002-06-04  Graydon Hoare  <graydon@@redhat.com>

	* cache.h (cache_component::set_refill_latency): New method.
	(cache_component::get_refill_latency): New method.
	(cache_component::refill_latency_specified): New flag.
	(cache_component): Virtualize "refill-latency" attribute,
	note when it is set in "refill_latency_specified".
	* cache.cxx (read_line): Return either refill latency or
	downstream latencies, depending on whether explicit refill
	latency has been specified, not sum of both.

2002-05-17  Ben Elliston  <bje@@redhat.com>

	* Makefile.am (DEJAGNUTESTS): Add refill.exp.
	* cache.h (cache_component::refill_latency): New member.
	* cache.cxx (cache_component::read_line): Add refill latency.
	(cache_component::cache_component): Initialise it and add a
	corresponding "refill-latency" attribute.
	* hw-cache.xml (memory latency) : Document refill latency.

2002-04-09  Ben Elliston  <bje@@redhat.com>

	* cache.cxx (cache_component::read_line): Set the overall latency
	for a cache line fill to the latency of the first downstream read,
	not the last.

2001-12-27  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (CacheListTypes, CacheCreate): Support hw-cache-buffer-8
	component type.
	* hw-cache.xml, hw-cache.txt: Modified accordingly.

2001-12-27  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (cache_sizes): Add "1" and "2" kb support.
	* hw-cache.xml, hw-cache.txt: Modified accordingly.

2001-12-04  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (cache_sizes): Add "4" for "4kb".
	* hw-cache.xml, hw-cache.txt: Modified accordingly.

2001-11-30  Frank Ch. Eigler  <fche@@redhat.com>

	* cacheutil.cxx (hash_fn): Fix std:: namespace reference.

2001-10-22  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (flush_all): New function.  Associate with "flush-all" pin.
	* cacheutil.cxx (find_any_dirty): New functions.
	* cache.h, cacheutil.h: Relevant changes.
	Warning cleanups throughout.
	* hw-cache.xml (flush-all): Document new pin.
	* hw-cache-txt: Regenerated.

2001-09-27  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (emit_report): Remove extra blank line.
	(set_hash_mask, set_hash_shift): Exchange names to match functionality.
	* cacheutil.cxx (cache ctor): Compute good default hash_params.

2001-09-26  Frank Ch. Eigler  <fche@@redhat.com>

	* cacheutil.cxx (hash_fn): Detect index overflow.  Complain loudly.
	* cacheutil.h: Include some more headers.

2001-08-04  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (~cache_component): Define.

2001-08-03  matthew green  <mrg@@redhat.com>

	* cache.h (~cache_component): Add prototype.
	* cacheutil.cxx (std::operator==, operator==): Move this into the
	global name space.
	(std::cerr, std::hex, std::setw, std::setfill, std::endl, std::dec):
	Use these.
	* cacheutil.h (std::operator==, operator==): Move this into the
	global name space.

2001-07-13  Dave Brolley  <brolley@@redhat.com>

	* cache.h (cache:bus::DEFN_METHOD): Generate function prototypes only.
	(::DEFN_METHOD): Generate actual inline function bodies after
	cache_component is defined.

2001-07-13  Ben Elliston  <bje@@redhat.com>

	* Makefile.am (check-local): Rename target from "checkme".

2001-07-11  Frank Ch. Eigler  <fche@@redhat.com>

	* hw-cache.xml: Add <?xml ... ?> prefix.

2001-07-10  matthew green  <mrg@@redhat.com>

	* Makefile.in: Regenerate.

2001-07-10  Ben Elliston  <bje@@redhat.com>

	* cacheutil.h (class cache_line): Use std::vector, not vector.
	(class cache_set): Likewise.
	(class cache): Likewise.

2001-07-09  Ben Elliston  <bje@@redhat.com>

	* cache.cxx: Use std::cout and std::endl for C++ conformance.

2001-07-04  Ben Elliston  <bje@@redhat.com>

	* hw-cache.txt: Generate.

2001-07-02  Ben Elliston  <bje@@redhat.com>

	* hw-cache.xml: New file.

2001-06-24  Ben Elliston  <bje@@redhat.com>

	* cache.cxx (set_hash_mask): Validate parse_attribute result.
	(set_hash_shift): Ditto.

2001-06-21  Ben Elliston  <bje@@redhat.com>

	* cache.h (cache_component::hit_latency): New member.
	(cache_component::miss_latency): Likewise.
	* cache.cxx (cache_component ctor): Add attributes for these.
	(cache_component::write_any): Add miss latency for misaligned
	accesses. Set latency correctly for return.
	(cache_component::read_any): Add miss latency for misaligned
	accesses. Set latency correctly for return.
	(cache_component::read_line): Return the true result of reads.
	(cache_component::write_line): Likewise for writes.
	* hw-cache.txt: Document latency extensions.

2001-06-19  Ben Elliston  <bje@@redhat.com>

	* cache.cxx (CacheCreate): Re-work using sidutil::tokenize.

2001-06-15  Ben Elliston  <bje@@redhat.com>

	* cache.cxx: New file.
	* cache.h: Likewise.
	* cacheutil.cxx: Likewise.
	* cacheutil.h: Likewise.
	* log2.h: Likewise.
	* hw-cache.txt: Likewise.

2001-06-05  Ben Elliston  <bje@@redhat.com>

	* Makefile.am: New file.
	* Makefile.in: Generate.
@


1.35
log
@Add missing Changelog Entries:
* component/cache/cache.cxx (cache_component::cache_component):
Add write_hint_pin().  Attach it to write-hint.
(cache_component::write_hint): New.
* component/cache/cache.h (write_hint_pin): New.
(write_hint): New.
* component/cgen-cpu/mep/Makefile.am: Regenerate.
* component/cgen-cpu/mep/Makefile.in: Regenerate.
* component/cgen-cpu/mep/mep-core1-decode.cxx: Regenerate.
* component/cgen-cpu/mep/mep-core1-decode.h: Regenerate.
* component/cgen-cpu/mep/mep-core1-defs.h: Regenerate.
* component/cgen-cpu/mep/mep-core1-model.cxx: Regenerate.
* component/cgen-cpu/mep/mep-core1-model.h: Regenerate.
* component/cgen-cpu/mep/mep-core1-sem.cxx: Regenerate.
* component/cgen-cpu/mep/mep-decode.cxx: Regenerate.
* component/cgen-cpu/mep/mep-decode.h: Regenerate.
* component/cgen-cpu/mep/mep-defs.h: Regenerate.
* component/cgen-cpu/mep/mep-desc.h: Regenerate.
* component/cgen-cpu/mep/mep-model.cxx: Regenerate.
* component/cgen-cpu/mep/mep-model.h: Regenerate.
* component/cgen-cpu/mep/mep-sem.cxx: Regenerate.
* component/cgen-cpu/mep/mep.cxx (mep_cpu): Connect
write-hint pin.
(do_cache): Add C5 support.
(do_cache_prefetch): Likewise.
(do_casb3, do_cash3, do_casw3): New.
* component/cgen-cpu/mep/mep.h: Add C5 support and write-hint pin.
(do_casb3, do_cash3, do_casw3): New.
* component/families/mep/Makefile.in: Regenerate.
* component/families/mep/dsu.in: Add C5 support.
* main/dynamic/mainDynamic.cxx: Add C5 support.
* main/dynamic/mepCfg.cxx: Connect write-hint pin.
* main/dynamic/mepCfg.h: Add C5 support.
@
text
@d1 4
d121 2
a122 2
	* cache.h (flush_all_lines, flush_line, flush_set) 
	(flush_and_invalidate_set, flush_and_invalidate_line) 
d137 2
a138 2
	(flush_all_lines, flush_line, flush_set) 
	(flush_and_invalidate_set, flush_and_invalidate_line) 
d371 3
a373 3
 
 	* cache.cxx (cache_sizes): Add "4" for "4kb".
 	* hw-cache.xml, hw-cache.txt: Modified accordingly.
d415 1
a415 1
        * cache.h (cache:bus::DEFN_METHOD): Generate function prototypes only.
d473 1
a473 1
	* cache.cxx: New file. 
@


1.34
log
@Support for Toshiba MeP.
@
text
@d1 8
@


1.33
log
@2006-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (buffer_sizes): New static table.
        (CacheListTypes): List hw-cache-buffer-* using buffer_sizes. Same for
        hw-blocking-cache-buffer-*.
        (CacheCreate): Parse hw-cache-buffer-N and hw-blocking-cache-buffer-N
        in order to determine buffer size.
@
text
@d1 40
@


1.32
log
@Removed bogus ChangeLog entries.
@
text
@d1 8
@


1.31
log
@	Second part of ms1 to mt renaming.
	* bfd/archures.c (bfd_arch_mt): Renamed.
	(bfd_mt_arch): Renamed.
	(bfd_archures_list): Adjusted.
	* bfd/bfd-in2.h: Rebuilt.
	* bfd/config.bfd (mt): Remove special case targ_archs.
	(mt-*-elf): Rename bfd_elf32_mt_vec.
	* bfd/configure: Rebuilt.
	* bfd/configure.in (bfd_elf32_mt_vec): Renamed.
	(selarchs) Remove mt special case.
	* bfd/cpu-mt.c (arch_info_struct): Adjust.
	(bfd_mt_arch): Renamed, adjust.
	* bfd/elf32-mt.c (mt_reloc_type_lookup, mt_info_to_howto_rela,
	mt_elf_relocate_hi16, mt_final_link_relocate, mt_relocate_section,
	mt_elf_howto_table): Renamed, adjusted.
	(mt_elf_gc_mark_hook, mt_elf_gc_sweep_hook, mt_elf_check_relocs,
	elf32_mt_machine, mt_elf_object_p, mt_elf_set_private_flags,
	mt_elf_copy_private_bfd_data, mt_elf_merge_private_bfd_data,
	mt_elf_print_private_bfd_data): Renamed, adjusted.
	(TARGET_BIG_SYM, TARGET_BIG_NAME, ELF_ARCH, ELF_MACHINE_CODE,
	ELF_MAXPAGESIZE, elf_info_to_howto, elf_backend_relocate_section,
	bfd_elf32_bfd_reloc_type_lookup, elf_backend_gc_mark_hook,
	elf_backend_gc_sweep_hook, elf_backend_check_relocs,
	eld_backend_object_p, bfd_elf32_bfd_set_private_flags,
	bfd_elf32_bfd_copy_private_bfd_data,
	bfd_elf32_bfd_merge_private_bfd_data,
	bfd_elf32_bfd_print_private_bfd_data): Adjusted.
	* bfd/libbfd.h: Regenerated.
	* bfd/reloc.c (BFD_RELOC_MT_PC16, BFD_RELOC_MT_HI16,
	BFD_RELOC_MT_LO16, BFD_RELOC_MT_GNU_VTINHERIT,
	BFD_RELOC_MT_GNU_VTENTRY, BFD_RELOC_MT_PCINSN8): Renamed.
	* bfd/targets.c (bfd_elf32_mt_vec): Renamed.
	(_bfd_target_vector): Adjusted.
	* binutils/readelf.c (guess_is_rela): Use EM_MT.
	(dump_relocations, get_machine_name): Adjust.

	* cpu/mt.cpu (define-arch, define-isa): Set name to mt.
	(define-mach): Adjust.
	* cpu/mt.opc (CGEN_ASM_HASH): Update.
	(mt_asm_hash, mt_cgen_insn_supported): Renamed.
	(parse_loopsize, parse_imm16): Adjust.

	* gas/configure: Rebuilt.
	* gas/configure.in (mt): Remove special case.
	* gas/config/tc-mt.c (opcodes/mt-desc.h, opcodes/mt-opc.h): Change
	#includes.
	(mt_insn, mt_mach, mt_mach_bitmask, mt_flags, mt_architectures):
	Rename, adjust.
	(md_parse_option, md_show_usage, md_begin, md_assemble,
	md_cgen_lookup_reloc, md_atof): Adjust.
	(mt_force_relocation, mt_apply_fix, mt_fix_adjustable): Rename, adjust.
	* gas/config/tc-mt.h (TC_MT): Rename.
	(LISTING_HEADER, TARGET_ARCH, TARGET_FORMAT): Adjust.
	(md_apply_fix): Adjust.
	(mt_apply_fix, mt_fix_adjustable, mt_force_relocation): Rename.
	(TC_FORCE_RELOCATION, tc_fix_adjustable): Adjust.

	* gdb/mt-tdep.c (mt_arch_constants, mt_gdb_regnums): Rename, adjust.
	(mt_register_name, mt_register_type, mt_register_reggroup_p,
	mt_return_value, mt_skip_prologue, mt_breapoint_from_pc,
	mt_pseudo_register_read, mt_pseudo_register_write, mt_frame_align,
	mt_registers_info, mt_push_dummy_call, mt_unwind_cache,
	mt_frame_unwind_cache, mt_unwind_pc, mt_unwind_dummy_id,
	mt_frame_this_id, mt_frame_prev_register, mt_frame_base_address,
	mt_frame_unwind, mt_frame_sniffer, mt_frame_base, mt_gdbarch_init,
	_initialize_mt_tdep): Rename & adjust.

	* include/dis-asm.h (print_insn_mt): Renamed.

	* include/elf/common.h (EM_MT): Renamed.
	* include/elf/mt.h: Rename relocs, cpu & other defines.

	* ld/emulparams/elf32mt.sh (ARCH, OUTPUT_FORMAT): Adjust.

	* opcodes/Makefile.am (HFILES, CFILES, ALL_MACHINES): Adjust.
	(stamp-mt): Adjust rule.
	(mt-asm.lo, mt-desc.lo, mt-dis.lo, mt-ibld.lo, mt-opc.lo): Rename &
	adjust.
	* opcodes/Makefile.in: Rebuilt.
	* opcodes/configure: Rebuilt.
	* opcodes/configure.in (bfd_mt_arch): Rename & adjust.
	* opcodes/disassemble.c (ARCH_mt): Renamed.
	(disassembler): Adjust.
	* opcodes/mt-asm.c: Renamed, rebuilt.
	* opcodes/mt-desc.c: Renamed, rebuilt.
	* opcodes/mt-desc.h: Renamed, rebuilt.
	* opcodes/mt-dis.c: Renamed, rebuilt.
	* opcodes/mt-ibld.c: Renamed, rebuilt.
	* opcodes/mt-opc.c: Renamed, rebuilt.
	* opcodes/mt-opc.h: Renamed, rebuilt.

	* sid/Makefile.in: Rebuilt.
	* sid/aclocal.m4: Rebuilt.
	* sid/configure: Rebuilt.
	* sid/sid.spec: Adjust.
	* sid/bsp/Makefile.am: Adjust.
	* sid/bsp/Makefile.in: Rebuilt.
	* sid/bsp/aclocal.m4: Rebuilt.
	* sid/bsp/configrun-sid.in: Adjust.
	* sid/bsp/pregen/Makefile.in: Rebuilt.
	* sid/bsp/pregen/mt-gdb.conf: Renamed & rebuilt.
	* sid/bsp/pregen/mt-gloss.conf: Renamed & rebuilt.
	* sid/bsp/pregen/pregen-configs.in: Adjust.
	* sid/component/aclocal.m4: Rebuilt.
	* sid/component/configure: Rebuilt.
	* sid/component/tconfig.in: Adjust.
	* sid/component/bochs/aclocal.m4: Rebuilt.
	* sid/component/cache/Makefile.in: Rebuilt.
	* sid/component/cgen-cpu/Makefile.in: Rebuilt.
	* sid/component/cgen-cpu/aclocal.m4: Rebuilt.
	* sid/component/cgen-cpu/compCGEN.cxx: Adjust.
	* sid/component/cgen-cpu/configure: Rebuilt.
	* sid/component/cgen-cpu/configure.in: Rebult.
	* sid/component/cgen-cpu/mt/Makefile.am: Adjust.
	* sid/component/cgen-cpu/mt/Makefile.in: Rebuilt.
	* sid/component/cgen-cpu/mt/hw-cpu-mt.txt: Adjust.
	* sid/component/cgen-cpu/mt/mt-cpu.h: Rebuilt.
	* sid/component/cgen-cpu/mt/mt-decode.cxx: Rebuilt.
	* sid/component/cgen-cpu/mt/mt-decode.h: Rebuilt.
	* sid/component/cgen-cpu/mt/mt-defs.h: Rebuilt.
	* sid/component/cgen-cpu/mt/mt-desc.h: Rebuilt.
	* sid/component/cgen-cpu/mt/mt-sem.cxx: Rebuilt.
	* sid/component/cgen-cpu/mt/mt-write.cxx: Rebuilt.
	* sid/component/cgen-cpu/mt/mt.cxx: Adjust.
	* sid/component/cgen-cpu/mt/mt.h: Adjust.
	* sid/component/consoles/Makefile.in: Rebuilt.
	* sid/component/families/aclocal.m4: Rebuilt.
	* sid/component/families/configure: Rebuilt.
	* sid/component/gdb/Makefile.in: Rebuilt.
	* sid/component/gloss/Makefile.in: Rebuilt.
	* sid/component/glue/Makefile.in: Rebuilt.
	* sid/component/ide/Makefile.in: Rebuilt.
	* sid/component/interrupt/Makefile.in: Rebuilt.
	* sid/component/lcd/Makefile.in: Rebuilt.
	* sid/component/lcd/testsuite/Makefile.in: Rebuilt.
	* sid/component/loader/Makefile.am: Rebuilt.
	* sid/component/loader/Makefile.in: Rebuilt.
	* sid/component/mapper/Makefile.in: Rebuilt.
	* sid/component/mapper/testsuite/Makefile.in: Rebuilt.
	* sid/component/memory/Makefile.in: Rebuilt.
	* sid/component/mmu/Makefile.in: Rebuilt.
	* sid/component/parport/Makefile.in: Rebuilt.
	* sid/component/profiling/Makefile.in: Rebuilt.
	* sid/component/rtc/Makefile.in: Rebuilt.
	* sid/component/sched/Makefile.in: Rebuilt.
	* sid/component/testsuite/Makefile.in: Rebuilt.
	* sid/component/timers/aclocal.m4: Rebuilt.
	* sid/component/timers/configure: Rebuilt.
	* sid/component/uart/Makefile.in: Rebuilt.
	* sid/component/uart/testsuite/Makefile.in: Rebuilt.
	* sid/config/config.sub: Adjust.
	* sid/config/info.tcl.in: Adjust.
	* sid/config/sidtargets.m4: Adjust.
	* sid/doc/Makefile.in: Rebuilt.
	* sid/main/dynamic/Makefile.am: Rebuilt.
	* sid/main/dynamic/Makefile.in: Rebuilt.
	* sid/main/dynamic/aclocal.m4: Rebuilt.
	* sid/main/dynamic/configure: Rebuilt.
@
text
@a119 2
	* mep-cache.cxx (mep_cache): Inherit from blocking_cache_component.
	* mep-cache.h (mep_cache): Inherit from blocking_cache_component.
@


1.30
log
@sid/include/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* aclocal.m4, Makefile.in: Regenerated with Automake 1.9.5.

sid/bsp/pregen/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/bsp/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/demos/voice-pager/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* aclocal.m4, Makefile.in: Regenerated with Automake 1.9.5.

sid/demos/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

sid/samples/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated.

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

sid/component/testsuite/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/gdb/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/consoles/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/bochs/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* dma/Makefile.in, harddrv/Makefile.in, vga/Makefile.in,
	keyboard/Makefile.in, floppy/Makefile.in, unmapped/Makefile.in,
	pit/Makefile.in, cpu/fpu/Makefile.in, cpu/memory/Makefile.in,
	cpu/Makefile.in, gui/Makefile.in, cmos/Makefile.in,
	pic/Makefile.in: Regenerated with Automake 1.9.5.
	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* configure.in: Call m4_pattern_allow to reassure autoconf that
	the AS_DYNAMIC_OBJS and AS_DYNAMIC_INCS variables are not
	mistakes.
	* configure: Regenerated with autoconf 2.59.

sid/component/timers/arm7t/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/timers/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Apply AC_CONFIG_SUBDIRS only to literal strings.
	* configure: Regenerated.

sid/component/profiling/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/cfgroot/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* libltdl: Updated with files from libtool 1.5.18.

sid/component/tcl/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/cgen-cpu/arm7t/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/cgen-cpu/xstormy16/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/cgen-cpu/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Apply AC_CONFIG_SUBDIRS to literal strings only.
	* acinclude.m4 (gcc_AC_CHECK_DECL, gcc_AC_CHECK_DECLS): Properly
	quote macro names.
	* configure: Regenerated.

	* Makefile.am (LIBIBERTY): Link against the libiberty.a from
	libiberty/pic, not the non-PIC version in libiberty.
	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

sid/component/cgen-cpu/m32r/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/audio/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/uart/testsuite/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/uart/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/loader/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.am (LIBIBERTY): Link against the libiberty.a from
	libiberty/pic, not the non-PIC version in libiberty.
	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/sched/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/mapper/testsuite/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/mapper/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/parport/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/memory/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/cache/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/rtc/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/gloss/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/lcd/testsuite/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/lcd/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* families/configure.in: Apply AC_CONFIG_SUBDIRS to literal
	strings only.
	* families/configure: Regenerated.

	* families/Makefile.in, families/aclocal.m4: Regenerated with
	Automake 1.9.5.

sid/component/mmu/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/interrupt/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/glue/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/ide/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/doc/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

sid/config/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* config.guess, config.sub, install-sh, missing, mkinstalldirs:
	Update.

	* docbuild.m4 (RH_DOCBUILD_CHECK): Propery quote macro name.
	* libstdc++.m4 (CY_LIBSTDCXX_CHECK): Same.
	* sidtarget.m4 (CY_SIDTARGET_CHECK): Same.

	* sidtarget.m4 (CY_SIDTARGET_CHECK): No need to specify the shell
	when running $ac_config_sub; $ac_config_sub contains the shell
	itself now, and it's an error to specify it twice.

	* libtool.m4, ltdl.m4, ltmain.sh: Update from libtool 1.5.18.

sid/main/dynamic/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.am (LIBIBERTY): Link against the libiberty.a from
	libiberty/pic, not the non-PIC version in libiberty.
	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

sid/main/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/include/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* aclocal.m4, Makefile.in: Regenerated with Automake 1.9.5.

sid/bsp/pregen/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/bsp/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/demos/voice-pager/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* aclocal.m4, Makefile.in: Regenerated with Automake 1.9.5.

sid/demos/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

sid/samples/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated.

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

sid/component/testsuite/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/gdb/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/consoles/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/bochs/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* dma/Makefile.in, harddrv/Makefile.in, vga/Makefile.in,
	keyboard/Makefile.in, floppy/Makefile.in, unmapped/Makefile.in,
	pit/Makefile.in, cpu/fpu/Makefile.in, cpu/memory/Makefile.in,
	cpu/Makefile.in, gui/Makefile.in, cmos/Makefile.in,
	pic/Makefile.in: Regenerated with Automake 1.9.5.
	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* configure.in: Call m4_pattern_allow to reassure autoconf that
	the AS_DYNAMIC_OBJS and AS_DYNAMIC_INCS variables are not
	mistakes.
	* configure: Regenerated with autoconf 2.59.

sid/component/timers/arm7t/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/timers/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Apply AC_CONFIG_SUBDIRS only to literal strings.
	* configure: Regenerated.

sid/component/profiling/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/cfgroot/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* libltdl: Updated with files from libtool 1.5.18.

sid/component/tcl/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/cgen-cpu/arm7t/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/cgen-cpu/xstormy16/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/cgen-cpu/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Apply AC_CONFIG_SUBDIRS to literal strings only.
	* acinclude.m4 (gcc_AC_CHECK_DECL, gcc_AC_CHECK_DECLS): Properly
	quote macro names.
	* configure: Regenerated.

	* Makefile.am (LIBIBERTY): Link against the libiberty.a from
	libiberty/pic, not the non-PIC version in libiberty.
	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

sid/component/cgen-cpu/m32r/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/audio/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.

sid/component/uart/testsuite/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/uart/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/loader/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.am (LIBIBERTY): Link against the libiberty.a from
	libiberty/pic, not the non-PIC version in libiberty.
	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/sched/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/mapper/testsuite/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/mapper/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/parport/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/memory/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/cache/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/rtc/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/gloss/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/lcd/testsuite/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/lcd/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

	* families/configure.in: Apply AC_CONFIG_SUBDIRS to literal
	strings only.
	* families/configure: Regenerated.

	* families/Makefile.in, families/aclocal.m4: Regenerated with
	Automake 1.9.5.

sid/component/mmu/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/interrupt/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/glue/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/component/ide/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/doc/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in: Regenerated with Automake 1.9.5.

sid/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

sid/config/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* config.guess, config.sub, install-sh, missing, mkinstalldirs:
	Update.

	* docbuild.m4 (RH_DOCBUILD_CHECK): Propery quote macro name.
	* libstdc++.m4 (CY_LIBSTDCXX_CHECK): Same.
	* sidtarget.m4 (CY_SIDTARGET_CHECK): Same.

	* sidtarget.m4 (CY_SIDTARGET_CHECK): No need to specify the shell
	when running $ac_config_sub; $ac_config_sub contains the shell
	itself now, and it's an error to specify it twice.

	* libtool.m4, ltdl.m4, ltmain.sh: Update from libtool 1.5.18.

sid/main/dynamic/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.am (LIBIBERTY): Link against the libiberty.a from
	libiberty/pic, not the non-PIC version in libiberty.
	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.

	* configure.in: Remove call to AC_ARG_PROGRAM, to avoid autoconf
	warnings about multiple uses.
	* configure: Regenerated with autoconf 2.59.

sid/main/ChangeLog:
2005-06-03  Jim Blandy  <jimb@@redhat.com>

	* Makefile.in, aclocal.m4: Regenerated with Automake 1.9.5.
	* configure: Regenerated with autoconf 2.59.
@
text
@d1 5
@


1.29
log
@2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * hw-cache.xml: Input to flush-set, invalidate-set and
        * hw-cache.txt: Regenerated.
        flush-and-invalidate-set is now an address.
        * cacheutil.h (addr_to_tag): New method of cache.
        * cacheutil.cxx (addr_to_tag): New method of cache.
        * cache.cxx (cache_component::flush_set): Input argument is now an address.
        (cache_component::flush_and_invalidate_set): Likewise.
        (blocking_cache_component::flush_set): Likewise.
        (blocking_cache_component::flush_and_invalidate_set): Likewise.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (cache_component): Initialize data_width. Add "data-width"
        attribute.
        (read_line): Access the data 4 or 8 bytes at a time, depending on
        data_width.
        (write_line): Ditto.
        (read_downstream, write_downstream): New methods of cache_component.
        * cache.h (read_downstream, write_downstream): New methods of
        cache_component.
        (data_width): New member of cache_component.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (cache_component): Add "operation-status" pin.
        (cache_component::flush_all_lines): Accumulate latency and call
        report_status.
        (cache_component::flush_line): Ditto.
        (cache_component::flush_set): Ditto.
        (cache_component::flush_and_invalidate_set): Ditto.
        (cache_component::invalidate_all_lines): Call report_status.
        (cache_component::invalidate_line): Ditto.
        (cache_component::flush_and_invalidate_line): Ditto.
        (cache_component::invalidate_set): Ditto.
        (cache_component::prefetch_line): Ditto.
        (cache_component::lock_line): Ditto.
        (cache_component::unlock_line): Ditto.
        (blocking_cache_component::flush_all_lines): Call report_status if
        child is blocked.
        (blocking_cache_component::flush_line): Ditto.
        (blocking_cache_component::flush_set): Ditto.
        (blocking_cache_component::flush_and_invalidate_set): Ditto.
        (blocking_cache_component::flush_and_invalidate_line): Ditto.
        (blocking_cache_component::prefetch_line): Ditto.
        * cache.h (report_status): New method of cache_component.
        (operation_status_pin): New output pin.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.h (flush_all_lines, flush_line, flush_set)
        (flush_and_invalidate_set, flush_and_invalidate_line)
        (prefetch_line): Now virtual. Also, new methods of
        blocking_cache_component.
        (setup_flush_all_transaction, setup_flush_line_transaction)
        (setup_flush_set_transaction)
        (setup_flush_and_invalidate_set_transaction)
        (setup_flush_and_invalidate_line_transaction)
        (perform_flush_all_transaction, perform_flush_line_transaction)
        (perform_flush_set_transaction)
        (perform_flush_and_invalidate_set_transaction)
        (perform_flush_and_invalidate_line_transaction): New methods of
        blocking_cache_component.
        * cache.cxx (blocking_cache_component::write): Remove log message. Don't
        need return code from continue_child_thread_and_wait.
        blocking_cache_component::read): Ditto.
        (flush_all_lines, flush_line, flush_set)
        (flush_and_invalidate_set, flush_and_invalidate_line)
        (prefetch_line): New methods of blocking_cache_component.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (cache_component): Initialize total_latency_p. Add
        "total-latency?" attribute.
        (read_line): Return the total latency of all accesses if total_latency_p
        is set.
        (write_line): Ditto.
        (handle_bus_error): Copy the status, s, to transaction_status.
        (blocking_cache_component::read): Always return transaction_status.
        (blocking_cache_component::write): Ditto.
        * cache.h (total_latency_p): New member of cache_component.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.h (cache_component::lock_downstream): New virtual method.
        (cache_component::unlock_downstream): New virutal method.
        (blocking_cache_component::lock_downstream): New virtual override.
        (blocking_cache_component::unlock_downstream): New virtual override.
        * cache.cxx (read_line): Return the maximum latency from the reads
        performed if refill latency is not requested. Call lock_downstream
        before the first read. Call unlock_downstream before the final read.
        (write_line): Ditto.
        (blocking_cache_component): Add downstream-lock pin.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (blocking_cache_child_thread_root): Don't call
        child->child_wait_for_resume.
        (handle_bus_error): Ditto.
        (DEFN_METHOD): SID_SIG_CHILD_BLOCKED is now ctl_child_blocked.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * Makefile.am (AM_XXXFLAGS): Set it to $(TOP_CXXFLAGS).
        (AM_MAKEFLAGS): Pass along TOP_CXXFLAGS.
        * Makefile.in: Regenerated.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * mep-cache.cxx (mep_cache): Inherit from blocking_cache_component.
        * mep-cache.h (mep_cache): Inherit from blocking_cache_component.
        * cache.h (sidblockingutil.h): #include it.
        (namespace sid): Add "using" clause. Remove sid:: qualifier from
        declarations.
        (cache_component): Inhereit virtually from
        fixed_attribute_map_component and fixed_pin_map_component.
        (cache_component::write): Variants now virtual.
        (cache_component::read): Ditto.
        (cache_component::handle_read_error): New virtual method.
        (cache_component::handle_write_error): New virtual method.
        (cache_bus::write_any): Call cache.write.
        (cache_bus::read_any): Call cache.read.
        (blocking_cache_component): New class.
        * cache.cxx (cache_component::write_any): Call handle_write_error to
        handle bus errors.
        (cache_component::write_line): Ditto.
        (cache_component::read_any): Call handle_read_error as above.
        (cache_component::read_line): Ditto.
        (blocking_cache_child_thread_root): New function.
        (blocking_cache_component): New constructor.
        (handle_bus_error): New method.
        (blocking_cache_component:write): New methods.
        (blocking_cache_component::read): New methods.
        (CacheListTypes): Add hw-blocking-cache-basic and
        hw-blocking-cache-buffer-8, hw-blocking-cache-direct* and
        hw-blocking-cache/*kb*.
        (CacheCreate): Parse and construct the above.
@
text
@d1 4
@


1.28
log
@2004-07-20  Dave Brolley  <brolley@@redhat.com>

        * cacheutil.cxx (find): Make sure cache line is valid before returning
        it.
        * cache.cxx (write_any): Move call to addr_to_tag to a later point when
        the result is actually needed. Make sure cache line is valid before
        flushing it.
        (read_any): Make sure cache line is valid before flushing it.
@
text
@d1 139
@


1.27
log
@2004-07-01  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (write_any): Allow misaligned access. Return
        bus::misaligned for accesses which cross line boundary.
        (read_any): Ditto.
@
text
@d1 9
@


1.26
log
@2004-05-10  Dave Brolley  <brolley@@redhat.com>

        * cacheutil.cxx (find_any_dirty): Make sure the line is valid before
        checking the dirty bit.
        (vacancy_p): Line is also vacant if it is not valid.
@
text
@d1 6
@


1.25
log
@2004-04-29  Dave Brolley  <brolley@@redhat.com>

        * cacheutil.cxx (cache_set::expell_line): Don't update the set here.

2004-04-29  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx: Update calls to cache::find.
        * cacheutil.cxx (cache_set::allocate_lines): Now takes cache index as
        an argument. Update all callers.
        (cache_set::find): Now returns a pointer to the line, if found. Update
        all callers.
        (cache::find): Ditto.
        (cache_set::expell_line): Update the status of the expelled line.
        * cacheutil.h (cache_line_factory::make_line): Now takes cache index as
        an argument. Update all callers.
        (cache_set::allocate_lines): Now takes cache index as
        an argument. Update all callers.
        (cache_set::find): Now returns a pointer to the line, if found. Update
        all callers.
        (cache::find): Ditto.

2004-04-29  Dave Brolley  <brolley@@redhat.com>

        * cacheutil.h (cache_line): Removed copy constructor. Now virtual base
        class.
        (cache_line::operator=): Removed.
        (internal_cache_line): New class implements former cache_line class.
        (cache_set): Now takes cache_line_factory.
        (allocate_lines): New method moves line allocation from the constructor.
        (cache_set::set_line): Now takes reference to cache_line.
        (cache_set::replace_line): Renamed to expell_line. Now returns a pointer
        to the expelled line.
        (cache): Now takes cache_line_factory argument.
        (cache::init): New method moves set allocation from the constructor.
        (cache_set::expell_line): Renamed to expell_line. Now returns a pointer
        to the expelled line.
        (cache_line_factory): New class.
        * cacheutil.cxx (cache_line): Removed copy constructor. Now virtual base
        class.
        (cache_line::operator=): Removed.
        (internal_cache_line): New class implements former cache_line class.
        (cache_set): Now takes cache_line_factory.
        (allocate_lines): New method moves line allocation from the constructor.
        (cache_set::set_line): Now takes reference to cache_line.
        (dummy): Now internal to cache_set::find.
        (cache_set::replace_line): Renamed to expell_line. Now returns a pointer
        to the expelled line.
        (cache): Now takes cache_line_factory argument.
        (cache::init): New method moves set allocation from the constructor.
        (cache_set::expell_line): Renamed to expell_line. Now returns a pointer
        to the expelled line.
        * cache.h (cache_replacement_algorithm::expell): Renamed from 'replace'.
        Returns a pointer to the expelled line. Update specializations.
        (cache_component): Now takes a cache_line_factory as an argument.
        Private data now protected.
        (line_factory): New member of cache_component.
        (~cache_component): Now virtual.
        (CacheCreate): Pass internal_line_factory to cache_component.
        * cache.cxx (line_sizes): Make it static.
        (line_sizes): Ditto.
        (replacement_algorithms): Ditto.
        (internal_line_factory): New static cache_line_factory.
        (cache_component): Now takes a cache_line_factory as an argument. Pass
        the cache line factory to the constructor for acache. Save a reference
        to the line factory. Call acache.init
        (write_any): Rewrite to use cache::expell_line instead of the former
        cache::replace.
        (read_any): Ditto.
        (cache_replacement_algorithm::expell): Renamed from 'replace'. Returns
        a pointer to the expelled line. Update all callers and specializations.
        (CacheCreate): Pass internal_line_factory to cache_component.
@
text
@d1 6
@


1.24
log
@2003-01-31  Frank Ch. Eigler  <fche@@redhat.com>

	* log2.h: #undef log2, in case a macro collides with the function.
@
text
@d1 72
@


1.23
log
@* contribute Red Hat patch from 2002-06-04.

2002-06-04  Graydon Hoare  <graydon@@redhat.com>

	* cache.h (cache_component::set_refill_latency): New method.
	(cache_component::get_refill_latency): New method.
	(cache_component::refill_latency_specified): New flag.
	(cache_component): Virtualize "refill-latency" attribute,
	note when it is set in "refill_latency_specified".
	* cache.cxx (read_line): Return either refill latency or
	downstream latencies, depending on whether explicit refill
	latency has been specified, not sum of both.
@
text
@d1 4
@


1.22
log
@2002-07-16  Dave Brolley  <brolley@@redhat.com>

	* cache.h (cache): Add flush_and_invalidate_set_pin and
	flush_and_invalidate_pin.
	* cache.cxx (cache_component): Initialize flush_and_invalidate_set_pin
	and flush_and_invalidate_pin. Add flush-and-invalidate and
	flush-and-invalidate-set pins.
	(flush_set): Don't flush an invalid line.
	(flush_and_invalidate_set): New method.
	(flush_and_invalidate_line): New method.
	* hw-cache.xml, hw-cache.txt: Modified accordingly.
@
text
@d30 11
@


1.21
log
@2002-06-08  Ben Elliston  <bje@@redhat.com>

	* cacheutil.h (cache_set::expunge): New method.
	(cache_set::operator[]): Likewise.
	(cache::invalidate): Likewise.
	(cache::operator[]): Likewise.
	* cacheutil.cxx (cache::invalidate): Implement.
	* cache.h (cache_component::flush_set_pin): New pin.
	(cache_component::flush_set): New callback method.
	(cache_component::invalidate_set_pin): New pin.
	(cache_component::invalidate_set): New method.
	* cache.cxx (cache_component constructor): Initialise and add
	"flush-set" and "invalidate-set" pins.
	(cache_component::flush_set): Implement.
	(cache_component::invalidate_set): Likewise.
	* hw-cache.xml: Update documentation.
@
text
@d1 12
@


1.20
log
@2002-05-17  Ben Elliston  <bje@@redhat.com>

	* Makefile.am (DEJAGNUTESTS): Add refill.exp.
	* cache.h (cache_component::refill_latency): New member.
	* cache.cxx (cache_component::read_line): Add refill latency.
	(cache_component::cache_component): Initialise it and add a
	corresponding "refill-latency" attribute.
	* hw-cache.xml (memory latency) : Document refill latency.
@
text
@d1 17
@


1.19
log
@2002-04-09  Ben Elliston  <bje@@redhat.com>

	* cache.cxx (cache_component::read_line): Set the overall latency
	for a cache line fill to the latency of the first downstream read,
	not the last.
@
text
@d1 9
@


1.18
log
@2001-12-27  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (CacheListTypes, CacheCreate): Support hw-cache-buffer-8
	component type.
	* hw-cache.xml, hw-cache.txt: Modified accordingly.
@
text
@d1 6
@


1.17
log
@2001-12-27  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (cache_sizes): Add "1" and "2" kb support.
	* hw-cache.xml, hw-cache.txt: Modified accordingly.
@
text
@d3 6
@


1.16
log
@2001-12-04  Frank Ch. Eigler  <fche@@redhat.com>

        * cache.cxx (cache_sizes): Add "4" for "4kb".
        * hw-cache.xml, hw-cache.txt: Modified accordingly.
@
text
@d1 5
@


1.15
log
@2001-11-30  Frank Ch. Eigler  <fche@@redhat.com>

	* cacheutil.cxx (hash_fn): Fix std:: namespace reference.
@
text
@d1 5
@


1.14
log
@* function ++, cleanup

2001-10-22  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (flush_all): New function.  Associate with "flush-all" pin.
	* cacheutil.cxx (find_any_dirty): New functions.
	* cache.h, cacheutil.h: Relevant changes.
	Warning cleanups throughout.
	* hw-cache.xml (flush-all): Document new pin.
	* hw-cache-txt: Regenerated.
@
text
@d1 4
@


1.13
log
@* bug fix

2001-09-27  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (emit_report): Remove extra blank line.
	(set_hash_mask, set_hash_shift): Exchange names to match functionality.
	* cacheutil.cxx (cache ctor): Compute good default hash_params.
@
text
@d1 9
@


1.12
log
@2001-09-26  Frank Ch. Eigler  <fche@@redhat.com>

	* cacheutil.cxx (hash_fn): Detect index overflow.  Complain loudly.
	* cacheutil.h: Include some more headers.
@
text
@d1 6
@


1.11
log
@* build fix

[e.g., cache/ChangeLog]
2001-08-04  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (~cache_component): Define.
@
text
@d1 5
@


1.10
log
@2001-07-11  Frank Ch. Eigler  <fche@@redhat.com>

	* hw-cache.xml: Add <?xml ... ?> prefix.

2001-07-10  matthew green  <mrg@@redhat.com>

	* Makefile.in: Regenerate.

2001-07-04  Ben Elliston  <bje@@redhat.com>

	* hw-cache.txt: Generate.

2001-07-02  Ben Elliston  <bje@@redhat.com>

	* hw-cache.xml: New file.
@
text
@d1 4
@


1.9
log
@* make it compile with GCC 3.0:
        - missing throw() specifiers in bus & component dtors
	- `std::' vs `::' namespace issues
@
text
@d11 6
d21 5
a25 1
2001-07-13  Dave Brolley  <brolley@@redhat.com>
d27 1
a27 3
	* cache.h (cache:bus::DEFN_METHOD): Generate function prototypes only.
	(::DEFN_METHOD): Generate actual inline function bodies after
	cache_component is defined.
d38 8
@


1.8
log
@	* Makefile.am (check-local): Rename target from "checkme".
@
text
@d1 10
@


1.7
log
@* GCC 2.95.3 fixes.

[cache/ChangeLog]
	* cache.h (cache:bus::DEFN_METHOD): Generate function prototypes only.
	(::DEFN_METHOD): Generate actual inline function bodies after
	cache_component is defined.

[mapper/ChangeLog]
	* compMapper.cxx (generic_mapper_bus::write_any,
	generic_mapper_bus::read_any): Move function definition after
	generic_mapper is defined.
@
text
@d1 5
a5 1
2001-07-13    <brolley@@redhat.com>
@


1.6
log
@2001-07-10  Ben Elliston  <bje@@redhat.com>

	* cacheutil.h (class cache_line): Use std::vector, not vector.
	(class cache_set): Likewise.
	(class cache): Likewise.
@
text
@d1 6
@


1.5
log
@2001-07-09  Ben Elliston  <bje@@redhat.com>

	* cache.cxx: Use std::cout and std::endl for C++ conformance.
@
text
@d1 6
@


1.4
log
@2001-06-24  Ben Elliston  <bje@@redhat.com>

	* cache.cxx (set_hash_mask): Validate parse_attribute result.
	(set_hash_shift): Ditto.
@
text
@d1 4
@


1.3
log
@2001-06-21  Ben Elliston  <bje@@redhat.com>

	* cache.h (cache_component::hit_latency): New member.
	(cache_component::miss_latency): Likewise.
	* cache.cxx (cache_component ctor): Add attributes for these.
	(cache_component::write_any): Add miss latency for misaligned
	accesses. Set latency correctly for return.
	(cache_component::read_any): Add miss latency for misaligned
	accesses. Set latency correctly for return.
	(cache_component::read_line): Return the true result of reads.
	(cache_component::write_line): Likewise for writes.
	* hw-cache.txt: Document latency extensions.
@
text
@d1 5
@


1.2
log
@2001-06-19  Ben Elliston  <bje@@redhat.com>

	* cache.cxx (CacheCreate): Re-work using sidutil::tokenize.
@
text
@d1 13
@


1.1
log
@Index: component/ChangeLog
2001-06-12  Ben Elliston  <bje@@redhat.com>

	* CATALOG: Add hw-cache-basic and friends.
	* configure.in (make_subdirs): Add cache.
	* configure: Regenerate.
	* Makefile.in: Ditto.

Index: component/cache/ChangeLog
2001-06-15  Ben Elliston  <bje@@redhat.com>

	* cache.cxx: New file.
	* cache.h: Likewise.
	* cacheutil.cxx: Likewise.
	* cacheutil.h: Likewise.
	* log2.h: Likewise.
	* hw-cache.txt: Likewise.

Index: component/testsuite/ChangeLog
2001-06-05  Ben Elliston  <bje@@redhat.com>

	* Makefile.am: New file.
	* Makefile.in: Generate.

2001-06-15  Ben Elliston  <bje@@redhat.com>

	* sidcomp.cache/cache.exp: New test case.
	* sidcomp.cache/cachedocs.exp: Ditto.
	* sidcomp.cache/cachemonkey.exp: Ditto.
	* sidcomp.cache/coherency.exp: Ditto.
	* sidcomp.cache/fifo.exp: Ditto.
	* sidcomp.cache/flush.exp: Ditto.
	* sidcomp.cache/lock.exp: Ditto.
	* sidcomp.cache/lru.exp: Ditto.
	* sidcomp.cache/misaligned.exp: Ditto.
	* sidcomp.cache/prefetch.exp: Ditto.
	* sidcomp.cache/random.exp: Ditto.
	* sidcomp.cache/types.exp: Ditto.
	* sidcomp.cache/utils.exp: Ditto.
	* sidcomp.cache/writealloc.exp: Ditto.
	* sidcomp.cache/writethru.exp: Ditto.
@
text
@d1 4
@

