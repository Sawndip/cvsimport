head	1.10;
access;
symbols
	sid-snapshot-20180601:1.10
	sid-snapshot-20180501:1.10
	sid-snapshot-20180401:1.10
	sid-snapshot-20180301:1.10
	sid-snapshot-20180201:1.10
	sid-snapshot-20180101:1.10
	sid-snapshot-20171201:1.10
	sid-snapshot-20171101:1.10
	sid-snapshot-20171001:1.10
	sid-snapshot-20170901:1.10
	sid-snapshot-20170801:1.10
	sid-snapshot-20170701:1.10
	sid-snapshot-20170601:1.10
	sid-snapshot-20170501:1.10
	sid-snapshot-20170401:1.10
	sid-snapshot-20170301:1.10
	sid-snapshot-20170201:1.10
	sid-snapshot-20170101:1.10
	sid-snapshot-20161201:1.10
	sid-snapshot-20161101:1.10
	sid-snapshot-20160901:1.10
	sid-snapshot-20160801:1.10
	sid-snapshot-20160701:1.10
	sid-snapshot-20160601:1.10
	sid-snapshot-20160501:1.10
	sid-snapshot-20160401:1.10
	sid-snapshot-20160301:1.10
	sid-snapshot-20160201:1.10
	sid-snapshot-20160101:1.10
	sid-snapshot-20151201:1.10
	sid-snapshot-20151101:1.10
	sid-snapshot-20151001:1.10
	sid-snapshot-20150901:1.10
	sid-snapshot-20150801:1.10
	sid-snapshot-20150701:1.10
	sid-snapshot-20150601:1.10
	sid-snapshot-20150501:1.10
	sid-snapshot-20150401:1.10
	sid-snapshot-20150301:1.10
	sid-snapshot-20150201:1.10
	sid-snapshot-20150101:1.10
	sid-snapshot-20141201:1.10
	sid-snapshot-20141101:1.10
	sid-snapshot-20141001:1.10
	sid-snapshot-20140901:1.10
	sid-snapshot-20140801:1.10
	sid-snapshot-20140701:1.10
	sid-snapshot-20140601:1.10
	sid-snapshot-20140501:1.10
	sid-snapshot-20140401:1.10
	sid-snapshot-20140301:1.10
	sid-snapshot-20140201:1.10
	sid-snapshot-20140101:1.10
	sid-snapshot-20131201:1.10
	sid-snapshot-20131101:1.10
	sid-snapshot-20131001:1.10
	sid-snapshot-20130901:1.10
	sid-snapshot-20130801:1.10
	sid-snapshot-20130701:1.10
	sid-snapshot-20130601:1.10
	sid-snapshot-20130501:1.10
	sid-snapshot-20130401:1.10
	sid-snapshot-20130301:1.10
	sid-snapshot-20130201:1.10
	sid-snapshot-20130101:1.10
	sid-snapshot-20121201:1.10
	sid-snapshot-20121101:1.10
	sid-snapshot-20121001:1.10
	sid-snapshot-20120901:1.10
	sid-snapshot-20120801:1.10
	sid-snapshot-20120701:1.10
	sid-snapshot-20120601:1.10
	sid-snapshot-20120501:1.10
	sid-snapshot-20120401:1.10
	sid-snapshot-20120301:1.10
	sid-snapshot-20120201:1.10
	sid-snapshot-20120101:1.10
	sid-snapshot-20111201:1.10
	sid-snapshot-20111101:1.10
	sid-snapshot-20111001:1.10
	sid-snapshot-20110901:1.10
	sid-snapshot-20110801:1.10
	sid-snapshot-20110701:1.10
	sid-snapshot-20110601:1.10
	sid-snapshot-20110501:1.10
	sid-snapshot-20110401:1.10
	sid-snapshot-20110301:1.10
	sid-snapshot-20110201:1.10
	sid-snapshot-20110101:1.10
	sid-snapshot-20101201:1.10
	sid-snapshot-20101101:1.10
	sid-snapshot-20101001:1.10
	sid-snapshot-20100901:1.10
	sid-snapshot-20100801:1.10
	sid-snapshot-20100701:1.10
	sid-snapshot-20100601:1.10
	sid-snapshot-20100501:1.10
	sid-snapshot-20100401:1.10
	sid-snapshot-20100301:1.10
	sid-snapshot-20100201:1.10
	sid-snapshot-20100101:1.10
	sid-snapshot-20091201:1.10
	sid-snapshot-20091101:1.10
	sid-snapshot-20091001:1.10
	sid-snapshot-20090901:1.10
	sid-snapshot-20090801:1.10
	sid-snapshot-20090701:1.10
	sid-snapshot-20090601:1.10
	sid-snapshot-20090501:1.10
	sid-snapshot-20090401:1.10
	sid-snapshot-20090301:1.10
	sid-snapshot-20090201:1.10
	sid-snapshot-20090101:1.10
	sid-snapshot-20081201:1.10
	sid-snapshot-20081101:1.10
	sid-snapshot-20081001:1.10
	sid-snapshot-20080901:1.10
	sid-snapshot-20080801:1.10
	sid-snapshot-20080701:1.10
	sid-snapshot-20080601:1.10
	sid-snapshot-20080501:1.10
	sid-snapshot-20080403:1.10
	sid-snapshot-20080401:1.10
	sid-snapshot-20080301:1.10
	sid-snapshot-20080201:1.10
	sid-snapshot-20080101:1.10
	sid-snapshot-20071201:1.10
	sid-snapshot-20071101:1.10
	sid-snapshot-20071001:1.10
	sid-20020905-branchpoint:1.9
	sid-20020905-branch:1.9.0.2
	cygnus_cvs_20020108_pre:1.5;
locks; strict;
comment	@# @;


1.10
date	2005.05.10.15.41.05;	author brolley;	state Exp;
branches;
next	1.9;

1.9
date	2002.07.16.19.25.45;	author brolley;	state Exp;
branches;
next	1.8;

1.8
date	2002.07.16.19.14.46;	author brolley;	state Exp;
branches;
next	1.7;

1.7
date	2002.06.08.20.33.18;	author bje;	state Exp;
branches;
next	1.6;

1.6
date	2002.05.17.21.28.14;	author bje;	state Exp;
branches;
next	1.5;

1.5
date	2001.12.28.20.58.39;	author fche;	state Exp;
branches;
next	1.4;

1.4
date	2001.12.27.16.16.39;	author fche;	state Exp;
branches;
next	1.3;

1.3
date	2001.12.04.20.16.09;	author fche;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.22.19.48.44;	author fche;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.03.01.47.52;	author bje;	state Exp;
branches;
next	;


desc
@@


1.10
log
@2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * hw-cache.xml: Input to flush-set, invalidate-set and
        * hw-cache.txt: Regenerated.
        flush-and-invalidate-set is now an address.
        * cacheutil.h (addr_to_tag): New method of cache.
        * cacheutil.cxx (addr_to_tag): New method of cache.
        * cache.cxx (cache_component::flush_set): Input argument is now an address.
        (cache_component::flush_and_invalidate_set): Likewise.
        (blocking_cache_component::flush_set): Likewise.
        (blocking_cache_component::flush_and_invalidate_set): Likewise.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (cache_component): Initialize data_width. Add "data-width"
        attribute.
        (read_line): Access the data 4 or 8 bytes at a time, depending on
        data_width.
        (write_line): Ditto.
        (read_downstream, write_downstream): New methods of cache_component.
        * cache.h (read_downstream, write_downstream): New methods of
        cache_component.
        (data_width): New member of cache_component.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (cache_component): Add "operation-status" pin.
        (cache_component::flush_all_lines): Accumulate latency and call
        report_status.
        (cache_component::flush_line): Ditto.
        (cache_component::flush_set): Ditto.
        (cache_component::flush_and_invalidate_set): Ditto.
        (cache_component::invalidate_all_lines): Call report_status.
        (cache_component::invalidate_line): Ditto.
        (cache_component::flush_and_invalidate_line): Ditto.
        (cache_component::invalidate_set): Ditto.
        (cache_component::prefetch_line): Ditto.
        (cache_component::lock_line): Ditto.
        (cache_component::unlock_line): Ditto.
        (blocking_cache_component::flush_all_lines): Call report_status if
        child is blocked.
        (blocking_cache_component::flush_line): Ditto.
        (blocking_cache_component::flush_set): Ditto.
        (blocking_cache_component::flush_and_invalidate_set): Ditto.
        (blocking_cache_component::flush_and_invalidate_line): Ditto.
        (blocking_cache_component::prefetch_line): Ditto.
        * cache.h (report_status): New method of cache_component.
        (operation_status_pin): New output pin.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.h (flush_all_lines, flush_line, flush_set)
        (flush_and_invalidate_set, flush_and_invalidate_line)
        (prefetch_line): Now virtual. Also, new methods of
        blocking_cache_component.
        (setup_flush_all_transaction, setup_flush_line_transaction)
        (setup_flush_set_transaction)
        (setup_flush_and_invalidate_set_transaction)
        (setup_flush_and_invalidate_line_transaction)
        (perform_flush_all_transaction, perform_flush_line_transaction)
        (perform_flush_set_transaction)
        (perform_flush_and_invalidate_set_transaction)
        (perform_flush_and_invalidate_line_transaction): New methods of
        blocking_cache_component.
        * cache.cxx (blocking_cache_component::write): Remove log message. Don't
        need return code from continue_child_thread_and_wait.
        blocking_cache_component::read): Ditto.
        (flush_all_lines, flush_line, flush_set)
        (flush_and_invalidate_set, flush_and_invalidate_line)
        (prefetch_line): New methods of blocking_cache_component.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (cache_component): Initialize total_latency_p. Add
        "total-latency?" attribute.
        (read_line): Return the total latency of all accesses if total_latency_p
        is set.
        (write_line): Ditto.
        (handle_bus_error): Copy the status, s, to transaction_status.
        (blocking_cache_component::read): Always return transaction_status.
        (blocking_cache_component::write): Ditto.
        * cache.h (total_latency_p): New member of cache_component.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.h (cache_component::lock_downstream): New virtual method.
        (cache_component::unlock_downstream): New virutal method.
        (blocking_cache_component::lock_downstream): New virtual override.
        (blocking_cache_component::unlock_downstream): New virtual override.
        * cache.cxx (read_line): Return the maximum latency from the reads
        performed if refill latency is not requested. Call lock_downstream
        before the first read. Call unlock_downstream before the final read.
        (write_line): Ditto.
        (blocking_cache_component): Add downstream-lock pin.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * cache.cxx (blocking_cache_child_thread_root): Don't call
        child->child_wait_for_resume.
        (handle_bus_error): Ditto.
        (DEFN_METHOD): SID_SIG_CHILD_BLOCKED is now ctl_child_blocked.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * Makefile.am (AM_XXXFLAGS): Set it to $(TOP_CXXFLAGS).
        (AM_MAKEFLAGS): Pass along TOP_CXXFLAGS.
        * Makefile.in: Regenerated.

2005-05-10  Dave Brolley  <brolley@@redhat.com>

        * mep-cache.cxx (mep_cache): Inherit from blocking_cache_component.
        * mep-cache.h (mep_cache): Inherit from blocking_cache_component.
        * cache.h (sidblockingutil.h): #include it.
        (namespace sid): Add "using" clause. Remove sid:: qualifier from
        declarations.
        (cache_component): Inhereit virtually from
        fixed_attribute_map_component and fixed_pin_map_component.
        (cache_component::write): Variants now virtual.
        (cache_component::read): Ditto.
        (cache_component::handle_read_error): New virtual method.
        (cache_component::handle_write_error): New virtual method.
        (cache_bus::write_any): Call cache.write.
        (cache_bus::read_any): Call cache.read.
        (blocking_cache_component): New class.
        * cache.cxx (cache_component::write_any): Call handle_write_error to
        handle bus errors.
        (cache_component::write_line): Ditto.
        (cache_component::read_any): Call handle_read_error as above.
        (cache_component::read_line): Ditto.
        (blocking_cache_child_thread_root): New function.
        (blocking_cache_component): New constructor.
        (handle_bus_error): New method.
        (blocking_cache_component:write): New methods.
        (blocking_cache_component::read): New methods.
        (CacheListTypes): Add hw-blocking-cache-basic and
        hw-blocking-cache-buffer-8, hw-blocking-cache-direct* and
        hw-blocking-cache/*kb*.
        (CacheCreate): Parse and construct the above.
@
text
@<?xml version="1.0" ?>
<!DOCTYPE defcomplib SYSTEM "http://sources.redhat.com/sid/component.dtd">

<defcomplib lib="libcache.la" dlsym="cache_component_library">
  <defcomponent name="hw-cache-basic" type="concrete">
    
    <!-- buses -->
    <defbus name="upstream" addresses="unrestricted" accesses="unrestricted" behaviors="bus traffic" />

    <!-- accessors -->
    <defaccessor name="downstream" addresses="unrestricted" accesses="unrestricted" behaviors="bus traffic" />

    <!-- pins -->
    <defpin name="report!" direction="in" behaviors="statistics reporting" />
    <defpin name="flush" direction="in" legalvalues="32-bit address" behaviors="flushing" />
    <defpin name="flush-all" direction="in" legalvalues="any" behaviors="flushing" />
    <defpin name="flush-set" direction="in" legalvalues="any" behaviors="flushing" />
    <defpin name="invalidate" direction="in" legalvalues="32-bit address" behaviors="invalidating" />
    <defpin name="invalidate-all" direction="in" legalvalues="any" behaviors="invalidating" />
    <defpin name="invalidate-set" direction="in" legalvalues="any" behaviors="invalidating" />
    <defpin name="flush-and-invalidate" direction="in" legalvalues="32-bit address" behaviors="flushing, invalidating" />
    <defpin name="flush-and-invalidate-set" direction="in" legalvalues="any" behaviors="flushing, invalidating" />
    <defpin name="prefetch" direction="in" legalvalues="32-bit address" behaviors="prefetching" />
    <defpin name="lock" direction="in" legalvalues="32-bit address" behaviors="line locking" />
    <defpin name="unlock" direction="in" legalvalues="32-bit address" behaviors="line locking" />
    
    <!-- attributes -->
    <defattribute name="associativity" category="setting" legalvalues="string" behaviors="configuration" />
    <defattribute name="cache-size" category="setting" legalvalues="numeric" behaviors="configuration" />
    <defattribute name="line-size" category="setting" legalvalues="numeric" behaviors="configuration" />
    <defattribute name="hash-bit-mask" category="setting" legalvalues="numeric" defaultvalue="0xf" behaviors="configuration" />
    <defattribute name="hash-shift-amount" category="setting" legalvalues="0..31" defaultvalue="0" behaviors="configuration" />
    <defattribute name="write-through?" category="setting" legalvalues="boolean" defaultvalue="false" behaviors="write strategy" />
    <defattribute name="write-allocate?" category="setting" legalvalues="boolean" defaultvalue="false" behaviors="write strategy" />
    <defattribute name="read-accesses" category="register" legalvalues="numeric" defaultvalue="0" behaviors="statistics gathering" />
    <defattribute name="write-accesses" category="register" legalvalues="numeric" defaultvalue="0" behaviors="statistics gathering" />
    <defattribute name="misaligned-reads" category="register" legalvalues="numeric" defaultvalue="0" behaviors="statistics gathering" />
    <defattribute name="misaligned-writes" category="register" legalvalues="numeric" defaultvalue="0" behaviors="statistics gathering" />
    <defattribute name="flushes" category="register" legalvalues="numeric" defaultvalue="0" behaviors="statistics gathering" />
    <defattribute name="replacements" category="register" legalvalues="numeric" defaultvalue="0" behaviors="statistics gathering" />
    <defattribute name="read-hit-rate" category="register" legalvalues="percentage string" defaultvalue="0%" behaviors="statistics gathering" />
    <defattribute name="write-hit-rate" category="register" legalvalues="percentage string" defaultvalue="0%" behaviors="statistics gathering" />
    <defattribute name="collect-statistics?" category="setting" legalvalues="boolean" defaultvalue="true" behaviors="statistics reporting" />
    <defattribute name="report-heading" category="setting" legalvalues="string" defaultvalue="cache profile report" behaviors="statistics reporting" />
    <defattribute name="hit-latency" category="setting" legalvalues="numeric" defaultvalue="0" behaviors="memory latency" />
    <defattribute name="miss-latency" category="setting" legalvalues="numeric" defaultvalue="0" behaviors="memory latency" />
    <defattribute name="refill-latency" category="setting" legalvalues="numeric" defaultvalue="0" behaviors="memory latency" />
    <defattribute name="dump!" category="setting" legalvalues="empty string" defaultvalue="empty" behaviors="internal diagnostics" />

    <variants>
      <defcomponent name="hw-cache-buffer-8" type="concrete" />
    </variants>
  </defcomponent>

  <synop>
    <p>
      This component models a variety of memory cache designs.
      Many common parameter groups (size, associativity, line-size, etc.)
      are exposed as individual component types in this family, e.g., 
      <component>hw-cache-2way/16kb/32/random</component>,
      <component>hw-cache-direct/1kb/16</component>.
      The <component>hw-cache-buffer-8</component> type is a special case
      containing just one 8-byte cache line.
    </p>
  </synop>

  <func>
    <modelling>
      <p>
	This component models a memory cache suitable for use at
	different levels of the memory hierarchy.  It provides a bus
	interface and connects to another bus, providing a transparent
	pass-through.  In this documentation, "CPU" and "main memory"
	are synonymous for "upstream bus" and "downstream bus", as this
	is the most common usage (but not the only possible).</p>

      <p>
	The parameters of the cache are a matter of configuration.  At
	instantiation time, the following parameters are specified:

	<ul>
	  <li>cache size in KB (1, 2, 4, 8, 16, 32, 64, 128, 256, 512)</li>
	  <li>line size in bytes (16, 32, 64, 128)</li>
	  <li>associativity (<tt>direct</tt>, <tt>full</tt>,
	    <tt>2way</tt>, <tt>4way</tt>)</li>
	  <li>replacement policy for N-way and fully associative
	    caches (<tt>lru</tt>, <tt>fifo</tt>, <tt>random</tt>)</li>
	</ul>

	For a 16KB cache with a line size of 32 bytes, 2-way set
	associativity and a "least recently used" (LRU) replacement
	policy, the component name is
	<tt>hw-cache-2way/16kb/32/lru</tt>.

	For direct mapped caches, replacement policies are not
	applicable and should be omitted from the component name, such
	as <tt>hw-cache-direct/64kb/16</tt>. This particular 64KB
	direct-mapped cache configuration is also known by the type
	name of <tt>hw-cache-basic</tt>.</p>
    </modelling>

    <behavior name="tag calculation">
      <p>
	The size of a tag is dynamically computed based on the line
	size.  Unlike physical caches which economise on the number of
	tag bits to reduce hardware costs, the model uses a full
	address, but discards the redundant bits that can be inferred
	by a bytes position in the cache line.  For example, a 32
	(2^5) byte line uses 27 bits for the tag.</p>
    </behavior>

    <behavior name="hash algorithm">
      <p>
	A simple hashing algorithm is used to select a set from a
	target address.  The algorithm uses values from
	<attribute>hash-bit-mask</attribute> and
	<attribute>hash-shift-amount</attribute> to compute:
	
	These two values must be chosen carefully to ensure good cache
	utilisation.  In particular, the "all-ones" value of <tt>mask
	</tt> should not exceed the number of sets in the cache.</p>
    </behavior>

    <behavior name="misaligned accesses">
      <p>
	The component does not handle memory accesses that are not
	aligned on the natural boundary of the data being referenced.
	In such cases, the cache is bypassed and memory is accessed
	directly.</p>
    </behavior>

    <behavior name="write strategy">
      <p>
	When a write is made to the cache, the
	<attribute>write-through?</attribute> attribute determines if
	the data will be simultaneously written to the memory.
	Otherwise, writes will only be made to the cache and will not
	be synchronised with main memory until the line is flushed due
	to line replacement or an explicit flush (see Flushing).</p>
	
      <p>
	In the case of a write miss, the
	<attribute>write-allocate?</attribute> attribute specifies the
	component's action.  If this attribute is set to <tt>yes</tt>,
	then a miss will cause the missed line to be loaded into the
	cache in anticipation of future references.</p>
    </behavior>

    <behavior name="prefetching">
      <p>
	The component supports prefetching of data into the cache by
	driving <pin>prefetch</pin> with an address.  If, due to the
	line replacement policy, the prefetch cannot be performed,
	this operation has no effect.</p>
    </behavior>

    <behavior name="flushing">
      <p>
	If dirty lines are flushed from the cache, the component will
	ensure that their contents are synchronized with main memory.
	Some architectures provide a facility for explicitly flushing
	a line to memory.  For this purpose, the component provides
	<pin>flush</pin> which can be driven with an address.  If the
	address falls on a line that is present and dirty, it will be
	flushed to memory and marked as not dirty.  A line can be
	flushed and invalidated in one atomic operation by driving the
	<pin>flush-and-invalidate</pin> pin.  The entire cache
        can be flushed by driving <pin>flush-all</pin>.</p>
    </behavior>

    <behavior name="invalidating">
      <p>
	Lines in the cache that contain accurate contents are marked
	as valid.  Some architectures provide a facility for
	explicitly marking a line as invalid so that future accesses
	will cause a new memory access.  For this purpose, the
	component provides <pin>invalidate</pin> that can be driven
	with an address.  If the address falls on a line that is
	present, it will be invalidated.  No consideration is made for
	dirty lines, so a line should be flushed before being
	invalidated.  A line can be flushed and invalidated in one
	atomic operation by driving the <pin>flush-and-invalidate</pin>
	pin.  The entire cache can be invalidated by driving
	<pin>invalidate-all</pin>.</p>
    </behavior>

    <behavior name="line locking">
      <p>
	The component supports locking lines in the cache to prevent
	them from being removed to accommodate more recently
	referenced lines.  A line can be locked by driving
	<pin>lock</pin> with any address that falls on the line.
	Subsequently, a line can be unlocked by driving
	<pin>unlock</pin>.</p>
    </behavior>

    <behavior name="memory latency">
      <p>
	The component models the effects of memory latency.  The
	<attribute>hit-latency</attribute> and
	<attribute>miss-latency</attribute> values specify the
	cumulative latencies for hit and missed cache operations.  Any
	misaligned accesses are penalised as if they are a miss. Cache
	line refills incur an additional latency, specified by the
	<attribute>refill-latency</attribute> attribute.</p>

    </behavior>

    <behavior name="statistics gathering">
      <p>
	The component gathers statistics for a number of significant
	events and records them in read-only attributes.  The
	collection of statistics may be disabled using
	<attribute>collect-statistics?</attribute>.</p>
    </behavior>

    <behavior name="statistics reporting">
      <p>
	The component will write a summary report of the statistics it
	collects to standard error when <pin>report!</pin> is driven.
	The <attribute>report-heading</attribute> value, prepended to
	the report, allows reports from multiple caches to be
	distinguished.</p>
    </behavior>
    
    <convention name="functional" supported="true" />
    <convention name="latency" supported="true" />

  </func>
  <env>
    <title>Related components</title>
    <ul>
      <li>
	<p>
	  This component is typically used as a cache between a CPU
	  and main memory. A sample configiruation fragment is:
	  <code>
        new hw-cpu-arm7t cpu
        new hw-cache-basic cache
        connect-bus cpu insn-memory cache upstream
        connect-bus cpu data-memory cache upstream
	connect-bus cache downstream mem read-write-port</code></p></li>
      <li>
	<p>
	  More extensive modeling of the memory hierarchy could be
	  achieved by daisy-chaining two cache component instances:
	  <code>
        new hw-cpu-arm7t cpu
        new hw-cache-basic l1-cache
        new hw-cache-basic l2-cache
        connect-bus cpu insn-memory l1-cache upstream
        connect-bus cpu data-memory l1-cache upstream
	connect-bus l1-cache downstream l2-cache upstream
	connect-bus l2-cache downstream mem read-write-port</code></p></li>
      <li>
	<p>
          The cache can operate using virtual or physical addresses.
	  This is determined by the location of the cache in the
	  memory hierarchy.  The cache can manage physical addresses
	  by placing it "downstream" from an MMU or bus mapper (see
	  hw-mapper-basic).</p></li>
    </ul>
  </env>

  <refs>
    <ul>
      <li><em>Computer Architecture: A Quantitative Approach</em>, Hennessy and Patterson.</li>
      <li><em>Advanced Microprocessors</em>, D. Tabak.</li>
      <li><em>UNIX Systems for Modern Architectures</em>, C. Schimmel.</li>
    </ul>
  </refs>
</defcomplib>
@


1.9
log
@Correct typos.
@
text
@d17 1
a17 1
    <defpin name="flush-set" direction="in" legalvalues="set index" behaviors="flushing" />
d20 1
a20 1
    <defpin name="invalidate-set" direction="in" legalvalues="set index" behaviors="invalidating" />
d22 1
a22 1
    <defpin name="flush-and-invalidate-set" direction="in" legalvalues="set index" behaviors="flushing, invalidating" />
@


1.8
log
@2002-07-16  Dave Brolley  <brolley@@redhat.com>

	* cache.h (cache): Add flush_and_invalidate_set_pin and
	flush_and_invalidate_pin.
	* cache.cxx (cache_component): Initialize flush_and_invalidate_set_pin
	and flush_and_invalidate_pin. Add flush-and-invalidate and
	flush-and-invalidate-set pins.
	(flush_set): Don't flush an invalid line.
	(flush_and_invalidate_set): New method.
	(flush_and_invalidate_line): New method.
	* hw-cache.xml, hw-cache.txt: Modified accordingly.
@
text
@d22 1
a22 1
    <defpin name="fluish-and-invalidate-set" direction="in" legalvalues="set index" behaviors="flushing, invalidating" />
@


1.7
log
@2002-06-08  Ben Elliston  <bje@@redhat.com>

	* cacheutil.h (cache_set::expunge): New method.
	(cache_set::operator[]): Likewise.
	(cache::invalidate): Likewise.
	(cache::operator[]): Likewise.
	* cacheutil.cxx (cache::invalidate): Implement.
	* cache.h (cache_component::flush_set_pin): New pin.
	(cache_component::flush_set): New callback method.
	(cache_component::invalidate_set_pin): New pin.
	(cache_component::invalidate_set): New method.
	* cache.cxx (cache_component constructor): Initialise and add
	"flush-set" and "invalidate-set" pins.
	(cache_component::flush_set): Implement.
	(cache_component::invalidate_set): Likewise.
	* hw-cache.xml: Update documentation.
@
text
@d21 2
d165 3
a167 1
	flushed to memory and marked as not dirty.  The entire cache
d181 3
a183 1
	invalidated.  The entire cache can be invalidated by driving
@


1.6
log
@2002-05-17  Ben Elliston  <bje@@redhat.com>

	* Makefile.am (DEJAGNUTESTS): Add refill.exp.
	* cache.h (cache_component::refill_latency): New member.
	* cache.cxx (cache_component::read_line): Add refill latency.
	(cache_component::cache_component): Initialise it and add a
	corresponding "refill-latency" attribute.
	* hw-cache.xml (memory latency) : Document refill latency.
@
text
@d17 1
d20 1
@


1.5
log
@2001-12-27  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (CacheListTypes, CacheCreate): Support hw-cache-buffer-8
	component type.
	* hw-cache.xml, hw-cache.txt: Modified accordingly.
@
text
@d43 1
d195 4
a198 1
	misaligned accesses are penalised as if they are a miss.</p>
@


1.4
log
@2001-12-27  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (cache_sizes): Add "1" and "2" kb support.
	* hw-cache.xml, hw-cache.txt: Modified accordingly.
@
text
@d45 3
d52 8
a59 1
      This component models a variety of memory cache designs.</p>
@


1.3
log
@2001-12-04  Frank Ch. Eigler  <fche@@redhat.com>

        * cache.cxx (cache_sizes): Add "4" for "4kb".
        * hw-cache.xml, hw-cache.txt: Modified accordingly.
@
text
@d67 1
a67 1
	  <li>cache size in KB (4, 8, 16, 32, 64, 128, 256, 512)</li>
@


1.2
log
@* function ++, cleanup

2001-10-22  Frank Ch. Eigler  <fche@@redhat.com>

	* cache.cxx (flush_all): New function.  Associate with "flush-all" pin.
	* cacheutil.cxx (find_any_dirty): New functions.
	* cache.h, cacheutil.h: Relevant changes.
	Warning cleanups throughout.
	* hw-cache.xml (flush-all): Document new pin.
	* hw-cache-txt: Regenerated.
@
text
@d67 1
a67 1
	  <li>cache size in KB (8, 16, 32, 64, 128, 256, 512)</li>
@


1.1
log
@* new XML documentation.
* ChangeLog entries to follow later.
@
text
@d16 1
d150 2
a151 1
	flushed to memory and marked as not dirty.</p>
@

