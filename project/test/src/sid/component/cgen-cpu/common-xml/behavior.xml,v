head	1.6;
access;
symbols
	sid-snapshot-20180601:1.6
	sid-snapshot-20180501:1.6
	sid-snapshot-20180401:1.6
	sid-snapshot-20180301:1.6
	sid-snapshot-20180201:1.6
	sid-snapshot-20180101:1.6
	sid-snapshot-20171201:1.6
	sid-snapshot-20171101:1.6
	sid-snapshot-20171001:1.6
	sid-snapshot-20170901:1.6
	sid-snapshot-20170801:1.6
	sid-snapshot-20170701:1.6
	sid-snapshot-20170601:1.6
	sid-snapshot-20170501:1.6
	sid-snapshot-20170401:1.6
	sid-snapshot-20170301:1.6
	sid-snapshot-20170201:1.6
	sid-snapshot-20170101:1.6
	sid-snapshot-20161201:1.6
	sid-snapshot-20161101:1.6
	sid-snapshot-20160901:1.6
	sid-snapshot-20160801:1.6
	sid-snapshot-20160701:1.6
	sid-snapshot-20160601:1.6
	sid-snapshot-20160501:1.6
	sid-snapshot-20160401:1.6
	sid-snapshot-20160301:1.6
	sid-snapshot-20160201:1.6
	sid-snapshot-20160101:1.6
	sid-snapshot-20151201:1.6
	sid-snapshot-20151101:1.6
	sid-snapshot-20151001:1.6
	sid-snapshot-20150901:1.6
	sid-snapshot-20150801:1.6
	sid-snapshot-20150701:1.6
	sid-snapshot-20150601:1.6
	sid-snapshot-20150501:1.6
	sid-snapshot-20150401:1.6
	sid-snapshot-20150301:1.6
	sid-snapshot-20150201:1.6
	sid-snapshot-20150101:1.6
	sid-snapshot-20141201:1.6
	sid-snapshot-20141101:1.6
	sid-snapshot-20141001:1.6
	sid-snapshot-20140901:1.6
	sid-snapshot-20140801:1.6
	sid-snapshot-20140701:1.6
	sid-snapshot-20140601:1.6
	sid-snapshot-20140501:1.6
	sid-snapshot-20140401:1.6
	sid-snapshot-20140301:1.6
	sid-snapshot-20140201:1.6
	sid-snapshot-20140101:1.6
	sid-snapshot-20131201:1.6
	sid-snapshot-20131101:1.6
	sid-snapshot-20131001:1.6
	sid-snapshot-20130901:1.6
	sid-snapshot-20130801:1.6
	sid-snapshot-20130701:1.6
	sid-snapshot-20130601:1.6
	sid-snapshot-20130501:1.6
	sid-snapshot-20130401:1.6
	sid-snapshot-20130301:1.6
	sid-snapshot-20130201:1.6
	sid-snapshot-20130101:1.6
	sid-snapshot-20121201:1.6
	sid-snapshot-20121101:1.6
	sid-snapshot-20121001:1.6
	sid-snapshot-20120901:1.6
	sid-snapshot-20120801:1.6
	sid-snapshot-20120701:1.6
	sid-snapshot-20120601:1.6
	sid-snapshot-20120501:1.6
	sid-snapshot-20120401:1.6
	sid-snapshot-20120301:1.6
	sid-snapshot-20120201:1.6
	sid-snapshot-20120101:1.6
	sid-snapshot-20111201:1.6
	sid-snapshot-20111101:1.6
	sid-snapshot-20111001:1.6
	sid-snapshot-20110901:1.6
	sid-snapshot-20110801:1.6
	sid-snapshot-20110701:1.6
	sid-snapshot-20110601:1.6
	sid-snapshot-20110501:1.6
	sid-snapshot-20110401:1.6
	sid-snapshot-20110301:1.6
	sid-snapshot-20110201:1.6
	sid-snapshot-20110101:1.6
	sid-snapshot-20101201:1.6
	sid-snapshot-20101101:1.6
	sid-snapshot-20101001:1.6
	sid-snapshot-20100901:1.6
	sid-snapshot-20100801:1.6
	sid-snapshot-20100701:1.6
	sid-snapshot-20100601:1.6
	sid-snapshot-20100501:1.6
	sid-snapshot-20100401:1.6
	sid-snapshot-20100301:1.6
	sid-snapshot-20100201:1.6
	sid-snapshot-20100101:1.6
	sid-snapshot-20091201:1.6
	sid-snapshot-20091101:1.6
	sid-snapshot-20091001:1.6
	sid-snapshot-20090901:1.6
	sid-snapshot-20090801:1.6
	sid-snapshot-20090701:1.6
	sid-snapshot-20090601:1.6
	sid-snapshot-20090501:1.6
	sid-snapshot-20090401:1.6
	sid-snapshot-20090301:1.6
	sid-snapshot-20090201:1.6
	sid-snapshot-20090101:1.6
	sid-snapshot-20081201:1.6
	sid-snapshot-20081101:1.6
	sid-snapshot-20081001:1.6
	sid-snapshot-20080901:1.6
	sid-snapshot-20080801:1.6
	sid-snapshot-20080701:1.6
	sid-snapshot-20080601:1.6
	sid-snapshot-20080501:1.6
	sid-snapshot-20080403:1.6
	sid-snapshot-20080401:1.6
	sid-snapshot-20080301:1.6
	sid-snapshot-20080201:1.6
	sid-snapshot-20080101:1.6
	sid-snapshot-20071201:1.6
	sid-snapshot-20071101:1.6
	sid-snapshot-20071001:1.6
	sid-20020905-branchpoint:1.2
	sid-20020905-branch:1.2.0.2
	cygnus_cvs_20020108_pre:1.1;
locks; strict;
comment	@# @;


1.6
date	2006.06.26.21.10.27;	author brolley;	state Exp;
branches;
next	1.5;

1.5
date	2004.03.22.21.38.38;	author brolley;	state Exp;
branches;
next	1.4;

1.4
date	2002.11.29.06.05.57;	author bje;	state Exp;
branches;
next	1.3;

1.3
date	2002.10.03.21.00.02;	author brolley;	state Exp;
branches;
next	1.2;

1.2
date	2002.03.14.00.16.28;	author bje;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.03.02.03.39;	author bje;	state Exp;
branches;
next	;


desc
@@


1.6
log
@2006-06-26  Dave Brolley  <brolley@@redhat.com>

        * common-xml/behavior.xml (profiling): New behavior documented.
        * common-xml/interface.xml (pins): Document gprof-pc, gprof-pc-hi
        and sample-gprof pins.
@
text
@
<!-- this is the set of "standard CPU behaviors", to be included in a hw-cpu-*.xml file -->


    <behavior name="initialization">

      <p>The CPU performs a power-on-reset style of operation when the
      <pin>reset!</pin>  pin is driven.</p>  

      <p>Other mode settings may be controlled by pins and/or
      attributes: <pin>endian-set!</pin>/<attribute>endian</attribute>
      to set endianness, <pin>start-pc-set!</pin> to set the PC.
      These are useful if the standard powerup state of the CPU needs
      to be changed for running a program that expects an initialized
      environment.</p>
    </behavior>

    <behavior name="execution">

      <p>The component executes zero or more instructions when the
      <pin>step!</pin> pin is driven.  You can specify the maximum
      number of instructions to be executed via the
      <attribute>step-insn-count</attribute> attribute.  If the
      <pin>yield</pin> pin is driven in a reentrant fashion while the
      instruction loop is active, the loop will be exited at the next
      opportunity.  At the end of the loop, the <pin>step-cycles</pin>
      output pin is driven with the number of instructions actually
      executed, though this value is clamped to be at least 1.  The
      <attribute>insn-count</attribute> attribute accumulates the
      total number of instructions executed since reset.</p>

      <p>Each instruction is first fetched from memory via the
      <accessor>insn-memory</accessor> accessor, and its decoding
      traced if the <attribute>trace-extract?</attribute> attribute is
      set to a true value.  To prevent unwanted cache side effects,
      the <accessor>disassembler-memory</accessor> accessor can be
      used and connected directly to main memory, bypassing any memory
      caches.  The decoded form may be cached indefinitely afterwards,
      although this cache is flushed when the <pin>flush-icache</pin>
      pin is driven.</p>

      <p>The <attribute>engine-type</attribute> attribute specifies
      whether the "scache" ("semantic cache") or "pbb" ("pseudo basic
      block") dispatching mechanism is used during execution.  The
      "scache" mode executes each instruction in isolation and checks
      all triggerpoints after each.  If the
      <attribute>enable-step-trap?</attribute> attribute is set, after
      each instruction, a single-stepping trap is signalled as
      described in the <tt>exceptions/traps</tt> behavior below.</p>

      <p>The "pbb" mode executes a series of sequential instructions
      in one uninterruptible sequence, and is thus faster.  However,
      it cannot handle triggerpoints or single-stepping, nor can it
      respond to icache flushing as quickly.  The "pbb" mode is
      temporarily and transparently downgraded to the "scache" mode
      when needed.</p>

      <p>During the execution of an instruction, this component may
      make accesses using the <accessor>data-memory</accessor>
      accessor, may update its simulated registers, and may trigger an
      exception/trap.</p>
    </behavior>

    <behavior name="tracing">

      <p>The component can be configured to perform certain kinds of
      tracing as target programs execute.  These are controlled by the
      family of trace-* boolean attributes.  By default, trace output
      is directed to the standard output stream.  The
      <attribute>trace-filename</attribute> attribute allows the user
      to specify the name of a file where trace output will be
      collected.  A special filename of "-" is used to represent
      standard output.  Trace output files are not appended, but
      overwritten each time they are opened.  The
      <pin>print-insn-summary!</pin> pin can be driven to print a
      summary of instruction and cycle counts, usually at the end of
      the simulation. The <pin>trace</pin> pin can be driven with
      any value which will be output as a character into the trace
      stream.</p>
    </behavior>

    <behavior name="profiling">

      <p>The component can be configured to provide samples for use by the
      <component>sw-profile-gprof</component> component in creating
      a gmon output file. A sample is provided each time the
      <pin>sample-gprof</pin> is driven. Each time, before the
      <pin>sample-gprof</pin> is driven, the <pin>gprof-pc</pin> and
      <pin>gprof-pc-hi</pin> pins will be driven in order to provide the
      current program counter. <pin>gprof-pc</pin> represents the low order
      32 bits of the pc and <pin>gprof-pc-hi</pin> represents the high order
      32 bits of the pc (if any).
      </p>
    </behavior>

    <behavior name="exceptions/traps">

      <p>When encountering exception/trap conditions such as memory
      access errors or software interrupts, this component signals the
      event using the <pin>trap</pin> pin.  (For some traps, the
      <pin>trap-code</pin> pin is driven with extra information just
      beforehand.)  An external component may interpret the values in
      the table below, and declare a disposition for the condition.
      In the absence of input, the condition will be treated as the
      hardware would, that is by dispatching to exception vectors,
      switching processor modes, etc.</p>

      <p>The trap codes sent on the <pin>trap</pin> output pin are:</p>

      <table>
	<tr>      <td><pin>trap</pin></td>    <td>cause</td>                   <td><pin>trap-code</pin></td></tr>
	<tr>      <td>1</td>         <td>software trap</td>           <td>instruction bitmap</td></tr>
	<tr>      <td>2</td>         <td>breakpoint</td>              <td>bkpt number</td></tr>
	<tr>      <td>3</td>         <td>system call</td>             <td>syscall number</td></tr>
	<tr>      <td>4</td>         <td>invalid instruction</td>     <td>n/a</td></tr>
	<tr>      <td>5</td>         <td>memory fault</td>            <td>faulting address</td></tr>
	<tr>      <td>6</td>         <td>arithmetic overflow</td>     <td>faulting address</td></tr>
	<tr>      <td>7</td>         <td>stepped</td>                 <td>n/a</td></tr>
      </table>
      
      <p>The disposition codes returned on the <pin>trap</pin> input pin are:</p>
      <table>
	<tr>      <th><pin>trap</pin></th>    <th>effect</th></tr>
	<tr>      <td>0 or n/a</td>  <td>dispatch as hardware would</td></tr>
	<tr>      <td>1</td>         <td>handled; continue</td></tr>
	<tr>      <td>2</td>         <td>reissue</td></tr>
	<tr>      <td>3</td>         <td>handled; skip instruction and continue</td></tr>
      </table>      </behavior>


@


1.5
log
@2004-03-22  Dave Brolley  <brolley@@redhat.com>

        * common-xml/interface.xml: Document "trace" pin.
        * common-xml/behavior.xml: Document "trace" pin.
@
text
@d82 14
@


1.4
log
@2002-11-29  Ben Elliston  <bje@@redhat.com>

	* common-xml/interface.xml (print-insn-summary!): New pin.
	* common-xml/behavior.xml (tracing): Mention print-insn-summary!.
@
text
@d77 3
a79 1
      the simulation.</p>
@


1.3
log
@2002-10-03  Dave Brolley  <brolley@@redhat.com>
       From Ben Elliston  <bje@@redhat.com>

	* compCGEN.cxx (cgen_bi_endian_cpu::cgen_read_memory): Don't
	bother fiddling the latency values.  Have the disassembler read
	memory using the disassembler-memory accessor, if available.
	* common-xml/interface.xml: Document disassembler-memory accessor.
	* common-xml/behavior.xml (execution): Likewise.
@
text
@d74 4
a77 1
      overwritten each time they are opened.</p>
@


1.2
log
@* add "trace-filename" attribute to cgen-cpu components.

[include/ChangeLog]
2002-03-14  Ben Elliston  <bje@@redhat.com>

	* sidcpuutil.h (class basic_cpu): Add trace_filename member and a
	new cpu_trace_stream inner class, derived from an ofstream.
	(basic_cpu::trace_stream): Use a cpu_trace_stream.
	(basic_cpu::update_trace_destination): New method.
	(basic_cpu ctor): Initialise trace_stream and trace_filename. Add
	attribute "trace-filename" that notifies update_trace_destination.
	(operator <<): Add global function for cpu_trace_stream insertion.

[component/cgen-cpu/ChangeLog]
2002-03-14  Ben Elliston  <bje@@redhat.com>

	* common-xml/behavior.xml (tracing): New behavior section.
	* common-xml/interface.xml (trace-filename): New attribute.
	(trace-extract?): Associate with "tracing" behavior.
	(trace-result?): Likewise.
@
text
@d35 6
a40 3
      set to a true value.  The decoded form may be cached
      indefinitely afterwards, although this cache is flushed when the
      <pin>flush-icache</pin> pin is driven.</p>
@


1.1
log
@* more new XML files.
@
text
@d61 13
@

