head	1.3;
access;
symbols
	sid-snapshot-20180601:1.3
	sid-snapshot-20180501:1.3
	sid-snapshot-20180401:1.3
	sid-snapshot-20180301:1.3
	sid-snapshot-20180201:1.3
	sid-snapshot-20180101:1.3
	sid-snapshot-20171201:1.3
	sid-snapshot-20171101:1.3
	sid-snapshot-20171001:1.3
	sid-snapshot-20170901:1.3
	sid-snapshot-20170801:1.3
	sid-snapshot-20170701:1.3
	sid-snapshot-20170601:1.3
	sid-snapshot-20170501:1.3
	sid-snapshot-20170401:1.3
	sid-snapshot-20170301:1.3
	sid-snapshot-20170201:1.3
	sid-snapshot-20170101:1.3
	sid-snapshot-20161201:1.3
	sid-snapshot-20161101:1.3
	sid-snapshot-20160901:1.3
	sid-snapshot-20160801:1.3
	sid-snapshot-20160701:1.3
	sid-snapshot-20160601:1.3
	sid-snapshot-20160501:1.3
	sid-snapshot-20160401:1.3
	sid-snapshot-20160301:1.3
	sid-snapshot-20160201:1.3
	sid-snapshot-20160101:1.3
	sid-snapshot-20151201:1.3
	sid-snapshot-20151101:1.3
	sid-snapshot-20151001:1.3
	sid-snapshot-20150901:1.3
	sid-snapshot-20150801:1.3
	sid-snapshot-20150701:1.3
	sid-snapshot-20150601:1.3
	sid-snapshot-20150501:1.3
	sid-snapshot-20150401:1.3
	sid-snapshot-20150301:1.3
	sid-snapshot-20150201:1.3
	sid-snapshot-20150101:1.3
	sid-snapshot-20141201:1.3
	sid-snapshot-20141101:1.3
	sid-snapshot-20141001:1.3
	sid-snapshot-20140901:1.3
	sid-snapshot-20140801:1.3
	sid-snapshot-20140701:1.3
	sid-snapshot-20140601:1.3
	sid-snapshot-20140501:1.3
	sid-snapshot-20140401:1.3
	sid-snapshot-20140301:1.3
	sid-snapshot-20140201:1.3
	sid-snapshot-20140101:1.3
	sid-snapshot-20131201:1.3
	sid-snapshot-20131101:1.3
	sid-snapshot-20131001:1.3
	sid-snapshot-20130901:1.3
	sid-snapshot-20130801:1.3
	sid-snapshot-20130701:1.3
	sid-snapshot-20130601:1.3
	sid-snapshot-20130501:1.3
	sid-snapshot-20130401:1.3
	sid-snapshot-20130301:1.3
	sid-snapshot-20130201:1.3
	sid-snapshot-20130101:1.3
	sid-snapshot-20121201:1.3
	sid-snapshot-20121101:1.3
	sid-snapshot-20121001:1.3
	sid-snapshot-20120901:1.3
	sid-snapshot-20120801:1.3
	sid-snapshot-20120701:1.3
	sid-snapshot-20120601:1.3
	sid-snapshot-20120501:1.3
	sid-snapshot-20120401:1.3
	sid-snapshot-20120301:1.3
	sid-snapshot-20120201:1.3
	sid-snapshot-20120101:1.3
	sid-snapshot-20111201:1.3
	sid-snapshot-20111101:1.3
	sid-snapshot-20111001:1.3
	sid-snapshot-20110901:1.3
	sid-snapshot-20110801:1.3
	sid-snapshot-20110701:1.3
	sid-snapshot-20110601:1.3
	sid-snapshot-20110501:1.3
	sid-snapshot-20110401:1.3
	sid-snapshot-20110301:1.3
	sid-snapshot-20110201:1.3
	sid-snapshot-20110101:1.3
	sid-snapshot-20101201:1.3
	sid-snapshot-20101101:1.3
	sid-snapshot-20101001:1.3
	sid-snapshot-20100901:1.3
	sid-snapshot-20100801:1.3
	sid-snapshot-20100701:1.3
	sid-snapshot-20100601:1.3
	sid-snapshot-20100501:1.3
	sid-snapshot-20100401:1.3
	sid-snapshot-20100301:1.3
	sid-snapshot-20100201:1.3
	sid-snapshot-20100101:1.3
	sid-snapshot-20091201:1.3
	sid-snapshot-20091101:1.3
	sid-snapshot-20091001:1.3
	sid-snapshot-20090901:1.3
	sid-snapshot-20090801:1.3
	sid-snapshot-20090701:1.3
	sid-snapshot-20090601:1.3
	sid-snapshot-20090501:1.3
	sid-snapshot-20090401:1.3
	sid-snapshot-20090301:1.3
	sid-snapshot-20090201:1.3
	sid-snapshot-20090101:1.3
	sid-snapshot-20081201:1.3
	sid-snapshot-20081101:1.3
	sid-snapshot-20081001:1.3
	sid-snapshot-20080901:1.3
	sid-snapshot-20080801:1.3
	sid-snapshot-20080701:1.3
	sid-snapshot-20080601:1.3
	sid-snapshot-20080501:1.3
	sid-snapshot-20080403:1.3
	sid-snapshot-20080401:1.3
	sid-snapshot-20080301:1.3
	sid-snapshot-20080201:1.3
	sid-snapshot-20080101:1.3
	sid-snapshot-20071201:1.3
	sid-snapshot-20071101:1.3
	sid-snapshot-20071001:1.3
	sid-20020905-branchpoint:1.3
	sid-20020905-branch:1.3.0.2
	cygnus_cvs_20020108_pre:1.3;
locks; strict;
comment	@# @;


1.3
date	2001.08.03.01.30.22;	author bje;	state Exp;
branches;
next	1.2;

1.2
date	2001.04.04.23.54.05;	author fche;	state Exp;
branches;
next	1.1;

1.1
date	2000.12.07.19.30.56;	author fche;	state Exp;
branches;
next	;


desc
@@


1.3
log
@* Freshly generated documentation.
* ChangeLog entries to follow later.
@
text
@               hw-rtc-ds1x42 (librtc.la :: rtc_component_library)

Synopsis:

   The Dallas DS1642 and DS1742 are time-keeping NVRAM devices. The DS1742 is
   Y2K compliant as it maintains a century field in a section of NVRAM that
   was previously reserved by Dallas in the DS1642.

     ----------------------------------------------------------------------

Functionality:

  Modelling:

   The DS1x42 components model real time using a single pin that can be
   driven at a simulated interval representing one second. For modelling time
   in the target domain, a target scheduler may be used. For modelling real
   "wall-clock" time, the host scheduler may be used.

   The DS1x42 have a "frequency test" function that involves toggling the
   least significant bit of the "seconds" register at an idealized frequency
   of 512Hz. When managed by a sid scheduler component, the actual frequency
   is around 500Hz.

   +-------------------------------------------------+
   |                    Behaviors                    |
   |-------------------------------------------------|
   | timekeeping | Whenever the clock input is       |
   |             | driven, it is interpreted as a    |
   |             | signal that one second has        |
   |             | passed. An internal counter is    |
   |             | incremented and all the           |
   |             | time-related registers are        |
   |             | recomputed. The counter is        |
   |             | accessible by the epoch-time      |
   |             | attribute.                        |
   |-------------+-----------------------------------|
   |   frequency | When the clock-control and        |
   |     testing | clock-event pin-pair is connected |
   |             | to an external scheduler, the     |
   |             | DS1642 standard "test bit" is     |
   |             | toggled at an approximate         |
   |             | simulated frequency.              |
   |-------------+-----------------------------------|
   |    register | The DS1642/DS1742 control         |
   |      access | registers and 2048-byte NVRAM are |
   |             | accessed across the               |
   |             | read-write-port bus for byte-wide |
   |             | operations. The control registers |
   |             | are also exposed as attributes.   |
   |             |                                   |
   |             | This family of parts includes 2KB |
   |             | of non-volatile RAM. This         |
   |             | component does not explicitly     |
   |             | model this memory. Instead, it    |
   |             | interacts through the memory-bus  |
   |             | accessor with an external memory  |
   |             | like hw-memory-ram/rom-basic.     |
   +-------------------------------------------------+

   +----------------------------------------------------------+
   |                     SID Conventions                      |
   |----------------------------------------------------------|
   |   functional|supported|-                                 |
   |-------------+---------+----------------------------------|
   | save/restore|supported|-                                 |
   |-------------+---------+----------------------------------|
   |triggerpoints|supported|They support setting triggerpoints|
   |             |         |on the state of data with the     |
   |             |         |following names:                  |
   |             |         |                                  |
   |             |         |+--------------------------------+|
   |             |         ||               | Canonical      ||
   |             |         || "epoch-time"  | internal       ||
   |             |         ||               | representation ||
   |             |         ||               | of time.       ||
   |             |         ||---------------+----------------||
   |             |         || "oscillating" | The oscillator ||
   |             |         ||               | is connected.  ||
   |             |         ||---------------+----------------||
   |             |         ||               | The device is  ||
   |             |         || "write-mode"  | in write mode, ||
   |             |         ||               | for updates.   ||
   |             |         |+--------------------------------+|
   +----------------------------------------------------------+

     ----------------------------------------------------------------------

Environment:

   Related components
     * The 2KB of non-volatile memory included in these parts is not
       explicitly modeled by this component. Instead, it uses the
       "memory-bus" accessor to interact with an external memory like
       hw-memory-ram/rom-basic:

           new hw-memory-ram/rom-basic nvram
           set nvram size 2048
           connect-bus rtc memory-bus nvram read-write-port

     * In order to enable the "frequency test" function, you need to couple
       an external scheduler to this component. The following is an example
       of how to configure such a connection between a scheduler and the
       DS1742 component:

           new sid-sched-host-accurate sched
           new hw-rtc-ds1742 rtc
           set sched num-clients 2
           set sched 0-regular? 1
           set sched 0-time 1000 # 1 sec
           connect-pin sched 0-event -> rtc clock
           connect-pin rtc clock-control -> sched 1-control
           connect-pin rtc clock-event <- sched 1-event

     * The hw-visual-clock component is a candidate gui for this component.

           new hw-rtc-ds1742 rtc
           new hw-visual-clock rtc-gui
           relate rtc-gui "your rtc friend" rtc

   Host system
     * These components rely on the accuracy and integrity of UTC time
       maintained by the host, as the time and date are initialized when the
       component is instantiated. The UNIX time() system call is used to
       acquire the time.

     ----------------------------------------------------------------------

Component Reference:

  Component: hw-rtc-ds1x42 (Abstract)

   +-------------------------------------------------+
   |                      pins                       |
   |-------------------------------------------------|
   |    name     |direction|legalvalues|  behaviors  |
   |-------------+---------+-----------+-------------|
   |clock        |in       |-          |timekeeping  |
   |-------------+---------+-----------+-------------|
   |clock-control|out      |positive   |frequency    |
   |             |         |number     |testing      |
   |-------------+---------+-----------+-------------|
   |clock-event  |in       |-          |frequency    |
   |             |         |           |testing      |
   +-------------------------------------------------+

   +-------------------------------------------------+
   |                      buses                      |
   |-------------------------------------------------|
   |     name      |addresses|  accesses   |behaviors|
   |---------------+---------+-------------+---------|
   |read-write-port|0x0 -    |read/write   |register |
   |               |0x7FF    |byte-wide    |access   |
   +-------------------------------------------------+

   +---------------------------------------------------------------+
   |                          attributes                           |
   |---------------------------------------------------------------|
   |     name     |category|  legal values   |default| behaviors  ||
   |              |        |                 | value |            ||
   |--------------+--------+-----------------+-------+------------||
   |epoch-time    |-       |uint 32          |-      |timekeeping ||
   |--------------+--------+-----------------+-------+------------||
   |year          |register|0..99            |-      |register    ||
   |              |        |                 |       |access      ||
   |--------------+--------+-----------------+-------+------------||
   |month         |register|1..12            |-      |register    ||
   |              |        |                 |       |access      ||
   |--------------+--------+-----------------+-------+------------||
   |date          |register|1..31            |-      |register    ||
   |              |        |                 |       |access      ||
   |--------------+--------+-----------------+-------+------------||
   |day-of-week   |register|1..7             |-      |register    ||
   |              |        |                 |       |access      ||
   |--------------+--------+-----------------+-------+------------||
   |hour          |register|0..23            |-      |register    ||
   |              |        |                 |       |access      ||
   |--------------+--------+-----------------+-------+------------||
   |minute        |register|0..59            |-      |register    ||
   |              |        |                 |       |access      ||
   |--------------+--------+-----------------+-------+------------||
   |second        |register|0..59            |-      |register    ||
   |              |        |                 |       |access      ||
   |--------------+--------+-----------------+-------+------------||
   |state-snapshot|-       |opaque           |-      |state       ||
   |              |        |                 |       |save/restore||
   |--------------+--------+-----------------+-------+------------||
   |tk xclock     |-       |"hw-visual-clock"|-      |component   ||
   |clone         |        |                 |       |gui         ||
   +---------------------------------------------------------------+

   +-------------------------------------------------+
   |                    accessors                    |
   |-------------------------------------------------|
   |     name      |  accesses   |     behaviors     |
   |---------------+-------------+-------------------|
   | memory-bus    | byte-wide   | register access   |
   +-------------------------------------------------+

  Variant: hw-rtc-ds1642

   Same as hw-rtc-ds1x42

  Variant: hw-rtc-ds1742

   +-------------------------------------------------+
   |                   attributes                    |
   |-------------------------------------------------|
   | name  |category|  legal  | default | behaviors ||
   |       |        | values  |  value  |           ||
   |-------+--------+---------+---------+-----------||
   |century|register|19..25   |-        |register   ||
   |       |        |         |         |access     ||
   +-------------------------------------------------+

     ----------------------------------------------------------------------

References:

   Dallas Semiconductor DS1642 data sheet, revision 031698; DS1742 data
   sheet, revision 091498. Available online, or in our local archives.
@


1.2
log
@* function++
2001-04-04  Frank Ch. Eigler  <fche@@redhat.com>

        * sidrtc.cxx (get_{hours,minutes,seconds}_attribute): New getter fns
        for appropriate new attributes.
        (set_no_attribute): New dummy setter fn for same.
        (sidrtc ctor): Expose new attributes, component gui xref.
        * components.h: Corresponding changes.
        * hw-rtc-sid.txt: Document gui-compatibility.
        * hw-rtc-ds1x42.txt: Similar tweak.
@
text
@d1 1
a1 2
* Name
  hw-rtc-ds1642 hw-rtc-ds1742
d3 219
a221 136
* Synopsis
  The Dallas DS1642 and DS1742 are time-keeping NVRAM devices.  The
  DS1742 is Y2K compliant as it maintains a century field in a section
  of NVRAM that was previously reserved by Dallas in the DS1642.

  Pins: clock clock-control clock-event
  Buses: read-write-port
  Attributes: epoch-time year month date day-of-week hour minute second
	      state-snapshot "tk xclock clone"
	      century (ds1742 only)
  Accessors:  memory-bus
  Library: librtc.la
  Symbol name: rtc_component_library

* Functionality

  - Modelling

  The DS1x42 components model real time using a single pin that can be
  driven at a simulated interval representing one second.  For
  modelling time in the target domain, a target scheduler may be used.
  For modelling real "wall-clock" time, the host scheduler may be
  used.
  
  The DS1x42 have a "frequency test" function that involves toggling
  the least significant bit of the "seconds" register at an idealized
  frequency of 512Hz.  When managed by a sid scheduler component, the
  actual frequency is around 500Hz.

  - Behaviors

  * Timekeeping

    Whenever the "clock" input is driven, it is interpreted as a
    signal that one second has passed.  An internal counter is
    incremented and all the time-related registers are recomputed.
    The counter is accessible by the "epoch-time" attribute.

  * Frequency testing

    When the "clock-control" and "clock-event" pin-pair is connected
    to an external scheduler, the DS1642 standard "test bit" is
    toggled at an approximate simulated frequency.

  * Register access

    The DS1642/DS1742 control registers and 2048-byte NVRAM are
    accessed across the "read-write-port" bus for byte-wide
    operations.  The control registers are also exposed as attributes.

    This family of parts includes 2KB of non-volatile RAM.  This
    component does not explicitly model this memory.  Instead, it
    interacts through the "memory-bus" accessor with an external
    memory like hw-memory-ram/rom-basic.

  - SID conventions
    * These are functional components.
    * They support state save/restore.
    * They support setting triggerpoints on the state of data with the following
      names:
	- "epoch-time"		Canonical internal representation of time.
	- "oscillating"		The oscillator is connected.
	- "write-mode"		The device is in write mode, for updates.
    * It supports component GUIs.

* Environment
  - Related components

    * The 2KB of non-volatile memory included in these parts is not
      explicitly modeled by this component.  Instead, it uses the
      "memory-bus" accessor to interact with an external memory like
      hw-memory-ram/rom-basic:

	new hw-memory-ram/rom-basic nvram
	set nvram size 2048
	connect-bus rtc memory-bus nvram read-write-port

    * In order to enable the "frequency test" function, you need to
      couple an external scheduler to this component. The following is
      an example of how to configure such a connection between a
      scheduler and the DS1742 component:

	new sid-sched-host-accurate sched
	new hw-rtc-ds1742 rtc
	set sched num-clients 2
	set sched 0-regular? 1
	set sched 0-time 1000 # 1 sec
	connect-pin sched 0-event -> rtc clock
	connect-pin rtc clock-control -> sched 1-control
	connect-pin rtc clock-event <- sched 1-event

    * The "hw-visual-clock" component is a candidate gui for this
      component.

        new hw-rtc-ds1742 rtc
        new hw-visual-clock rtc-gui
	relate rtc-gui "your rtc friend" rtc

  - Host system

    * These components rely on the accuracy and integrity of UTC time
      maintained by the host, as the time and date are initialized
      when the component is instantiated. The UNIX time() system call
      is used to acquire the time.

* SID interface reference
  - low level:
    * pins
      - clock | input | any | timekeeping
      - clock-control | output | positive number | frequency testing
      - clock-event | input | any | frequency testing

    * buses
      - read-write-port | 0x0 - 0x7FF | read/write byte-wide | register access

    * attributes
      - epoch-time | | unsigned 32-bit integer | n/a | timekeeping
      - year | register | 0..99 | n/a | register access
      - month | register | 1..12 | n/a | register access
      - date | register | 1..31 | n/a | register access
      - day-of-week | register | 1..7 | n/a | regiser access
      - hour | register | 0..23 | n/a | register access
      - minute | register | 0..59 | n/a | register access
      - second | register | 0..59 | n/a | register access
      - century | register | 19..25 | n/a | register access (DS1742 only)
      - state-snapshot | | opaque string | n/a | state save/restore
      - "tk xclock clone" | gui | "hw-visual-clock" | (same) | component gui

    * accessors
      - memory-bus | byte-wide accesses | register access

* References

  Dallas Semiconductor DS1642 data sheet, revision 031698; DS1742 data
  sheet, revision 091498. Obtained from
  <http://www.dalsemi.com/Prod_info/Time_Keep/index.html>.
@


1.1
log
@* public snapshot of sid simulator
@
text
@d67 1
@

