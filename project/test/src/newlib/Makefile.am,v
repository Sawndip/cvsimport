head	1.51;
access;
symbols
	cygwin-1_7_35-release:1.51
	cygwin-1_7_34-release:1.51
	newlib-2_2_0:1.51.0.4
	cygwin-1_7_33-release:1.51
	cygwin-1_7_32-release:1.51
	cygwin-1_7_31-release:1.51
	cygwin-1_7_30-release:1.51
	cygwin-1_7_29-release:1.51
	cygwin-1_7_28-release:1.51
	newlib-2_1_0:1.51
	cygwin-1_7_27-release:1.51
	cygwin-1_7_26-release:1.51
	cygwin-1_7_25-release:1.51
	cygwin-1_7_24-release:1.51
	cygwin-1_7_23-release:1.51
	cygwin-1_7_22-release:1.51
	cygwin-1_7_21-release:1.51
	cygwin-1_7_20-release:1.51
	cygwin-1_7_19-release:1.51
	cygwin-64bit-postmerge:1.51
	cygwin-64bit-premerge-branch:1.51.0.2
	cygwin-64bit-premerge:1.51
	cygwin-1_7_18-release:1.51
	newlib-2_0_0:1.51
	cygwin-1_7_17-release:1.50
	cygwin-64bit-branch:1.50.0.2
	cygwin-1_7_16-release:1.50
	cygwin-1_7_15-release:1.50
	cygwin-1_7_14_2-release:1.50
	cygwin-1_7_14-release:1.50
	cygwin-1_7_12-release:1.50
	cygwin-1_7_11-release:1.50
	cygwin-1_7_10-release:1.50
	newlib-1_20_0:1.50
	cygwin-1_7_9-release:1.49
	cygwin-1_7_8-release:1.49
	newlib-1_19_0:1.47
	cygwin-1_7_7-release:1.45
	cygwin-1_7_5-release:1.45
	cygwin-1_7_4-release:1.45
	cygwin-1_7_3-release:1.45
	cygwin-1_7_2-release:1.45
	newlib-1_18_0:1.44
	cygwin-1_7_1-release:1.44
	newlib-1_17_0-arc:1.42.0.4
	binutils-arc-20080908-branch:1.42.0.2
	binutils-arc-20080908-branchpoint:1.42
	newlib-1_17_0:1.42
	newlib-1_16_0:1.41
	newlib-1_15_0:1.40
	newlib-csl-coldfire-4_1-32:1.38
	newlib-csl-sourcerygxx-4_1-32:1.38
	newlib-csl-innovasic-fido-3_4_4-33:1.38
	newlib-csl-coldfire-4_1-30:1.38
	newlib-csl-sourcerygxx-4_1-30:1.38
	newlib-csl-coldfire-4_1-28:1.38
	newlib-csl-sourcerygxx-4_1-28:1.38
	newlib-csl-arm-2006q3-27:1.38
	newlib-csl-sourcerygxx-4_1-27:1.38
	newlib-csl-arm-2006q3-26:1.38
	newlib-csl-sourcerygxx-4_1-26:1.38
	newlib-csl-sourcerygxx-4_1-24:1.38
	newlib-csl-sourcerygxx-4_1-23:1.38
	newlib-csl-sourcerygxx-4_1-21:1.38
	newlib-csl-arm-2006q3-21:1.38
	newlib-csl-arm-2006q3-19:1.38
	newlib-csl-sourcerygxx-4_1-19:1.38
	newlib-csl-sourcerygxx-4_1-18:1.38
	newlib-csl-sourcerygxx-3_4_4-25:1.40
	newlib-csl-sourcerygxx-4_1-17:1.38
	cr-0x5f1:1.40.0.2
	newlib-csl-sourcerygxx-4_1-14:1.38
	newlib-csl-sourcerygxx-4_1-13:1.38
	newlib-csl-sourcerygxx-4_1-12:1.38
	newlib-csl-sourcerygxx-4_1-9:1.38
	newlib-csl-sourcerygxx-4_1-8:1.38
	newlib-csl-sourcerygxx-4_1-7:1.38
	newlib-csl-arm-2006q1-6:1.38
	newlib-csl-sourcerygxx-4_1-6:1.38
	newlib-csl-sourcerygxx-4_1-5:1.38
	newlib-csl-sourcerygxx-4_1-4:1.38
	newlib-autotools-branch:1.38.0.4
	newlib-csl-20060320-branch:1.38.0.2
	newlib-csl-20060320-branchpoint:1.38
	newlib-1_14_0:1.35
	newlib-csl-arm-2005-q1b:1.33
	newlib-csl-arm-2005-q1a:1.33
	newlib-1_13_0:1.31
	csl-arm-2004-q3:1.29
	csl-arm-2004-q1a:1.29
	csl-arm-2004-q1:1.29
	newlib-1_12_0:1.29
	csl-arm-2003-q4:1.29
	w32api-2_2:1.28
	mingw-runtime-2_4:1.28
	newlib-1_11_0:1.28
	cygnus_cvs_20020108_pre:1.8
	newlib-1_10_0:1.7
	newlib-1_9_0:1.5
	newlib-2000-02-17:1.1.1.1
	SNAPSHOT:1.1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.51
date	2012.10.24.21.01.38;	author jjohnstn;	state Exp;
branches;
next	1.50;

1.50
date	2011.05.19.06.04.59;	author corinna;	state Exp;
branches
	1.50.2.1;
next	1.49;

1.49
date	2011.01.12.22.24.05;	author jjohnstn;	state Exp;
branches;
next	1.48;

1.48
date	2011.01.05.22.48.56;	author jjohnstn;	state Exp;
branches;
next	1.47;

1.47
date	2010.12.16.21.58.38;	author jjohnstn;	state Exp;
branches;
next	1.46;

1.46
date	2010.12.14.22.35.27;	author jjohnstn;	state Exp;
branches;
next	1.45;

1.45
date	2010.03.02.12.05.12;	author corinna;	state Exp;
branches;
next	1.44;

1.44
date	2009.08.18.21.48.05;	author jjohnstn;	state Exp;
branches;
next	1.43;

1.43
date	2009.06.23.16.04.33;	author jjohnstn;	state Exp;
branches;
next	1.42;

1.42
date	2008.01.21.18.29.17;	author jjohnstn;	state Exp;
branches;
next	1.41;

1.41
date	2007.05.24.17.33.29;	author sje;	state Exp;
branches;
next	1.40;

1.40
date	2006.06.05.17.42.57;	author jjohnstn;	state Exp;
branches;
next	1.39;

1.39
date	2006.04.11.19.02.03;	author jjohnstn;	state Exp;
branches;
next	1.38;

1.38
date	2006.02.27.23.51.28;	author jjohnstn;	state Exp;
branches
	1.38.4.1;
next	1.37;

1.37
date	2006.01.20.22.42.45;	author jjohnstn;	state Exp;
branches;
next	1.36;

1.36
date	2006.01.11.23.50.28;	author jjohnstn;	state Exp;
branches;
next	1.35;

1.35
date	2005.09.08.22.45.49;	author jjohnstn;	state Exp;
branches;
next	1.34;

1.34
date	2005.07.05.00.10.07;	author jjohnstn;	state Exp;
branches;
next	1.33;

1.33
date	2005.01.27.19.13.54;	author jjohnstn;	state Exp;
branches;
next	1.32;

1.32
date	2005.01.06.23.31.55;	author jjohnstn;	state Exp;
branches;
next	1.31;

1.31
date	2004.12.03.23.46.28;	author jjohnstn;	state Exp;
branches;
next	1.30;

1.30
date	2004.10.05.19.34.25;	author jjohnstn;	state Exp;
branches;
next	1.29;

1.29
date	2003.10.15.17.33.32;	author jjohnstn;	state Exp;
branches;
next	1.28;

1.28
date	2002.11.07.19.27.35;	author jjohnstn;	state Exp;
branches;
next	1.27;

1.27
date	2002.10.07.23.10.12;	author jjohnstn;	state Exp;
branches;
next	1.26;

1.26
date	2002.08.29.00.22.10;	author jjohnstn;	state Exp;
branches;
next	1.25;

1.25
date	2002.08.27.20.27.34;	author jjohnstn;	state Exp;
branches;
next	1.24;

1.24
date	2002.08.26.18.56.03;	author jjohnstn;	state Exp;
branches;
next	1.23;

1.23
date	2002.08.17.05.19.16;	author jjohnstn;	state Exp;
branches;
next	1.22;

1.22
date	2002.08.16.21.29.43;	author fitzsim;	state Exp;
branches;
next	1.21;

1.21
date	2002.06.20.19.51.12;	author fitzsim;	state Exp;
branches;
next	1.20;

1.20
date	2002.06.14.20.51.07;	author fitzsim;	state Exp;
branches;
next	1.19;

1.19
date	2002.06.07.21.59.34;	author fitzsim;	state Exp;
branches;
next	1.18;

1.18
date	2002.05.22.18.25.12;	author jjohnstn;	state Exp;
branches;
next	1.17;

1.17
date	2002.05.17.23.39.37;	author jjohnstn;	state Exp;
branches;
next	1.16;

1.16
date	2002.05.01.20.26.05;	author fitzsim;	state Exp;
branches;
next	1.15;

1.15
date	2002.05.01.17.05.42;	author fitzsim;	state Exp;
branches;
next	1.14;

1.14
date	2002.04.30.22.38.06;	author fitzsim;	state Exp;
branches;
next	1.13;

1.13
date	2002.04.26.20.18.52;	author jjohnstn;	state Exp;
branches;
next	1.12;

1.12
date	2002.04.24.20.49.43;	author fitzsim;	state Exp;
branches;
next	1.11;

1.11
date	2002.04.17.19.13.08;	author fitzsim;	state Exp;
branches;
next	1.10;

1.10
date	2002.04.04.22.41.10;	author jjohnstn;	state Exp;
branches;
next	1.9;

1.9
date	2002.04.03.22.46.11;	author jjohnstn;	state Exp;
branches;
next	1.8;

1.8
date	2001.12.18.22.52.52;	author fitzsim;	state Exp;
branches;
next	1.7;

1.7
date	2001.12.13.23.49.38;	author fitzsim;	state Exp;
branches;
next	1.6;

1.6
date	2001.08.29.19.55.20;	author jjohnstn;	state Exp;
branches;
next	1.5;

1.5
date	2000.12.13.19.32.45;	author jjohnstn;	state Exp;
branches;
next	1.4;

1.4
date	2000.12.08.21.31.08;	author jjohnstn;	state Exp;
branches;
next	1.3;

1.3
date	2000.09.06.20.46.27;	author cgf;	state Exp;
branches;
next	1.2;

1.2
date	2000.09.05.18.39.58;	author jjohnstn;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.17.19.39.46;	author cgf;	state Exp;
branches
	1.1.1.1;
next	;

1.50.2.1
date	2012.10.26.09.27.34;	author corinna;	state Exp;
branches;
next	;

1.38.4.1
date	2006.03.31.00.14.01;	author jjohnstn;	state Exp;
branches;
next	;

1.1.1.1
date	2000.02.17.19.39.46;	author cgf;	state Exp;
branches;
next	;


desc
@@


1.51
log
@
2012-10-24  Jeff Johnston  <jjohnstn@@redhat.com>

        * configure.in: Comment out the --enable-newlib-fp-hw option
        as the mathfp library is inaccurate and should not be used.
        * Makefile.am: Add comment regarding the mathfp directory.
        * configure: Regenerated.
        * Makefile.in: Ditto.
        * libm/mathfp/README: New file that details why the mathfp
        directory is not used.
@
text
@## Process this file with automake to generate Makefile.in

AUTOMAKE_OPTIONS = cygnus dejagnu
ACLOCAL_AMFLAGS = -I . -I ..

# Multilib support variables.
MULTISRCTOP =
MULTIBUILDTOP =
MULTIDIRS =
MULTISUBDIR =
MULTIDO = true
MULTICLEAN = true

LIBTOOL_VERSION_INFO = 0:0:0

# The newlib hardware floating-point routines have been disabled due to
# inaccuracy.  If you wish to work on them, you will need to edit the
# configure.in file to re-enable the configuration option.  By default,
# the NEWLIB_HW_FP variable will always be false.
if NEWLIB_HW_FP
MATHDIR = mathfp
else
MATHDIR = math
endif

# Work around what appears to be a GNU make bug handling MAKEFLAGS
# values defined in terms of make variables, as is the case for CC and
# friends when we are called from the top level Makefile.
AM_MAKEFLAGS = \
	"AR_FLAGS=$(AR_FLAGS)" \
	"CC_FOR_BUILD=$(CC_FOR_BUILD)" \
	"CFLAGS=$(CFLAGS)" \
	"CCASFLAGS=$(CCASFLAGS)" \
	"CFLAGS_FOR_BUILD=$(CFLAGS_FOR_BUILD)" \
	"CFLAGS_FOR_TARGET=$(CFLAGS_FOR_TARGET)" \
	"INSTALL=$(INSTALL)" \
	"LDFLAGS=$(LDFLAGS)" \
	"LIBCFLAGS=$(LIBCFLAGS)" \
	"LIBCFLAGS_FOR_TARGET=$(LIBCFLAGS_FOR_TARGET)" \
	"MAKE=$(MAKE)" \
	"MAKEINFO=$(MAKEINFO) $(MAKEINFOFLAGS)" \
	"PICFLAG=$(PICFLAG)" \
	"PICFLAG_FOR_TARGET=$(PICFLAG_FOR_TARGET)" \
	"SHELL=$(SHELL)" \
	"EXPECT=$(EXPECT)" \
	"RUNTEST=$(RUNTEST)" \
	"RUNTESTFLAGS=$(RUNTESTFLAGS)" \
	"exec_prefix=$(exec_prefix)" \
	"infodir=$(infodir)" \
	"libdir=$(libdir)" \
	"prefix=$(prefix)" \
	"tooldir=$(tooldir)" \
	"top_toollibdir=$(toollibdir)" \
	"AR=$(AR)" \
	"AS=$(AS)" \
	"CC=$(CC_FOR_NEWLIB)" \
	"LD=$(LD)" \
	"LIBCFLAGS=$(LIBCFLAGS)" \
	"NM=$(NM)" \
	"PICFLAG=$(PICFLAG)" \
	"RANLIB=$(RANLIB)" \
	"DESTDIR=$(DESTDIR)"

FLAGS_TO_PASS=$(AM_MAKEFLAGS)

if HAVE_DOC
DOCDIR = doc
else
DOCDIR =
endif

SUBDIRS = libc libm \
	$(DOCDIR) . $(EXTRA_DIRS)

tooldir = $(exec_prefix)/$(host_alias)
toollibdir = $(tooldir)/lib$(MULTISUBDIR)

AR_FLAGS = rc

if USE_LIBTOOL
toollib_LTLIBRARIES = libm.la \
	libc.la
else
toollib_LIBRARIES = libm.a \
	libc.a
endif

noinst_DATA = stmp-targ-include

toollib_DATA = $(CRT0) $(CRT1)


# The functions ldexp, frexp and modf are traditionally supplied in
# both libc.a and libm.a.  We build them in libm.a and copy them over,
# along with some required supporting routines.
MATHOBJS_IN_LIBC = \
	$(lpfx)s_fpclassify.$(oext) $(lpfx)sf_fpclassify.$(oext) \
	$(lpfx)s_isinf.$(oext) $(lpfx)sf_isinf.$(oext) \
	$(lpfx)s_isnan.$(oext) $(lpfx)sf_isnan.$(oext) \
	$(lpfx)s_isinfd.$(oext) $(lpfx)sf_isinff.$(oext) \
	$(lpfx)s_isnand.$(oext) $(lpfx)sf_isnanf.$(oext) \
	$(lpfx)s_nan.$(oext) $(lpfx)sf_nan.$(oext) \
	$(lpfx)s_ldexp.$(oext) $(lpfx)sf_ldexp.$(oext) \
	$(lpfx)s_frexp.$(oext) $(lpfx)sf_frexp.$(oext) \
	$(lpfx)s_modf.$(oext) \
	$(lpfx)sf_modf.$(oext) $(lpfx)s_scalbn.$(oext) \
	$(lpfx)sf_scalbn.$(oext) \
	$(lpfx)s_finite.$(oext) $(lpfx)sf_finite.$(oext) \
	$(lpfx)s_copysign.$(oext) $(lpfx)sf_copysign.$(oext) \
	$(lpfx)s_infconst.$(oext)

LIBC_OBJECTLISTS = \
	$(POSIX_OBJECTLIST) \
	$(SIGNAL_OBJECTLIST) \
	$(SYSCALL_OBJECTLIST) \
	$(UNIX_OBJECTLIST) \
	$(STDIO64_OBJECTLIST) \
	libc/argz/objectlist.awk.in \
	libc/stdlib/objectlist.awk.in \
	libc/time/objectlist.awk.in \
	libc/ctype/objectlist.awk.in \
	libc/search/objectlist.awk.in \
	libc/string/objectlist.awk.in \
	libc/locale/objectlist.awk.in \
	libc/misc/objectlist.awk.in \
	libc/reent/objectlist.awk.in \
	libc/errno/objectlist.awk.in \
	libc/stdio/objectlist.awk.in \
	$(MACHINE_OBJECTLIST) \
	$(SYS_OBJECTLIST) \
	$(SYS_MACH_OBJECTLIST)

LIBM_OBJECTLISTS = \
	libm/$(MATHDIR)/objectlist.awk.in \
	libm/common/objectlist.awk.in \
	$(LIBM_MACHINE_OBJECTLIST)

libm_la_LDFLAGS = -version-info $(LIBTOOL_VERSION_INFO) -release newlib -no-undefined -Xcompiler -nostdlib -Xlinker --version-script=$(srcdir)/libc/sys/linux/shared.ld -lgcc -objectlist libm-libtool-objectlist

libc_la_LDFLAGS = -version-info $(LIBTOOL_VERSION_INFO) -release newlib -no-undefined -Xcompiler -nostdlib -Xlinker --version-script=$(srcdir)/libc/sys/linux/shared.ld -lgcc -objectlist libc-libtool-objectlist

if USE_LIBTOOL
libm_la_SOURCES =
libm_la_DEPENDENCIES = libm-libtool-objectlist

# objects listed later in LIBM_OBJECTLISTS will override those listed earlier
libm-libtool-objectlist: $(LIBM_OBJECTLISTS)
	cat $(LIBM_OBJECTLISTS) | $(AWK) '{ libm[$$1] = $$2 }; END { for (x in libm) printf ("%s\n", libm[x]) }' > $@@

libc_la_SOURCES =
libc_la_DEPENDENCIES = libc-libtool-objectlist

# objects listed later in LIBM_OBJECTLISTS and LIBC_OBJECTLISTS will override those listed earlier
libc-libtool-objectlist: $(LIBM_OBJECTLISTS) $(LIBC_OBJECTLISTS)
	cat $(LIBM_OBJECTLISTS) $(LIBC_OBJECTLISTS) |  $(AWK) '{ libc[$$1] = $$2 }; END { for (x in libc) printf ("%s\n", libc[x]) }' > $@@

else

libc.a: libc/libc.a libm.a
	rm -rf libc.a libg.a tmp
	mkdir tmp
	cd tmp; \
	 $(AR) x ../libm.a $(MATHOBJS_IN_LIBC) ; \
	 $(AR) x ../libc/libc.a ; \
	 $(AR) $(AR_FLAGS) ../$@@ *.o
	$(RANLIB) libc.a
	ln libc.a libg.a >/dev/null 2>/dev/null || cp libc.a libg.a
	rm -rf tmp

libc/libc.a: ; @@true

libm.a: libm/libm.a
	rm -f $@@
	ln libm/libm.a $@@ >/dev/null 2>/dev/null || cp libm/libm.a $@@

libm/libm.a: ; @@true

endif # USE_LIBTOOL

crt0.o: $(CRT0_DIR)$(CRT0)
	rm -f $@@
	ln $(CRT0_DIR)$(CRT0) $@@ >/dev/null 2>/dev/null \
	 || cp $(CRT0_DIR)$(CRT0) $@@

$(CRT0_DIR)$(CRT0): ; @@true

crt1.o: $(CRT1_DIR)$(CRT1)
	rm -f $@@
	ln $< $@@ >/dev/null 2>/dev/null \
	 || cp $< $@@

$(CRT1_DIR)$(CRT1): ; @@true

$(srcdir)/newlib.hin:

all-recursive: stmp-targ-include

# The targ-include directory just holds the includes files for the
# particular system and machine we have been configured for.  It is
# used while building.
stmp-targ-include: config.status
	-rm -rf targ-include stmp-targ-include
	mkdir targ-include targ-include/sys targ-include/machine targ-include/bits
	cp newlib.h targ-include/newlib.h
	-for i in $(srcdir)/libc/machine/$(machine_dir)/machine/*.h; do \
	    if [ -f $$i ]; then \
	      cp $$i targ-include/machine/`basename $$i`; \
	    else true; fi ; \
	  done
	-for i in $(srcdir)/libc/machine/$(machine_dir)/sys/*.h; do \
	    if [ -f $$i ]; then \
	      cp $$i targ-include/sys/`basename $$i`; \
	    else true; fi ; \
	  done
	-for i in $(srcdir)/libc/machine/$(machine_dir)/include/*.h; do \
	    if [ -f $$i ]; then \
	      cp $$i targ-include/`basename $$i`; \
	    else true; fi ; \
	  done
	-for i in $(srcdir)/libc/sys/$(sys_dir)/include/*.h; do \
	    if [ -f $$i ]; then \
	      cp $$i targ-include/`basename $$i`; \
	    else true; fi ; \
	  done
	-for i in $(srcdir)/libc/sys/$(sys_dir)/include/*; do \
	    if [ -d $$i ]; then \
		for j in $$i/*.h; do \
		    if [ ! -d targ-include/`basename $$i` ]; then \
		    	mkdir targ-include/`basename $$i`; \
		    fi; \
	      	    cp $$j targ-include/`basename $$i`/`basename $$j`; \
		done \
	    else true; fi ; \
	  done
	-for i in $(srcdir)/libc/sys/$(sys_dir)/sys/*.h; do \
	    if [ -f $$i ]; then \
	      cp $$i targ-include/sys/`basename $$i`; \
	    else true; fi ; \
	  done
	-for i in $(srcdir)/libc/sys/$(sys_dir)/bits/*.h; do \
	    if [ -f $$i ]; then \
	      cp $$i targ-include/bits/`basename $$i`; \
	    else true; fi ; \
	  done
	-for i in $(srcdir)/libc/sys/$(sys_dir)/machine/*.h; do \
	    if [ -f $$i ]; then \
	      cp $$i targ-include/machine/`basename $$i`; \
	    else true; fi ; \
	  done
	-for i in $(srcdir)/libc/sys/$(sys_dir)/machine/$(machine_dir)/*.h; do \
	    if [ -f $$i ]; then \
	      cp $$i targ-include/machine/`basename $$i`; \
	    else true; fi ; \
	  done
	-for i in $(srcdir)/libc/sys/$(sys_dir)/machine/$(machine_dir)/include/*.h; do \
	    if [ -f $$i ]; then \
	      cp $$i targ-include/machine/`basename $$i`; \
	    else true; fi ; \
	  done
	touch $@@

CLEANFILES = stmp-targ-include

install-data-local:	install-toollibLIBRARIES
if USE_LIBTOOL
else
	rm -f $(DESTDIR)$(toollibdir)/libg.a
	ln $(DESTDIR)$(toollibdir)/libc.a $(DESTDIR)$(toollibdir)/libg.a >/dev/null 2>/dev/null || cp $(DESTDIR)$(toollibdir)/libc.a $(DESTDIR)$(toollibdir)/libg.a
endif
	$(MULTIDO) $(AM_MAKEFLAGS) DO=install multi-do # $(MAKE)
	-if [ -z "$(MULTISUBDIR)" ]; then \
	  $(mkinstalldirs) $(DESTDIR)$(tooldir)/include; \
	  for i in $(srcdir)/libc/include/*.h; do \
	   $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/`basename $$i`; \
	  done; \
	  $(INSTALL_DATA) newlib.h $(DESTDIR)$(tooldir)/include/newlib.h; \
	  $(mkinstalldirs) $(DESTDIR)$(tooldir)/include/machine; \
	  for i in $(srcdir)/libc/include/machine/*.h; do \
	   $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/machine/`basename $$i`; \
	  done; \
	  for i in $(srcdir)/libc/machine/$(machine_dir)/machine/*.h; do \
	    if [ -f $$i ]; then \
	     $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/machine/`basename $$i`; \
	    else true; fi ; \
	  done; \
	  $(mkinstalldirs) $(DESTDIR)$(tooldir)/include/rpc; \
	  for i in $(srcdir)/libc/include/rpc/*.h; do \
	   $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/rpc/`basename $$i`; \
	  done; \
	  $(mkinstalldirs) $(DESTDIR)$(tooldir)/include/sys; \
	  for i in $(srcdir)/libc/include/sys/*.h; do \
	   $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/sys/`basename $$i`; \
	  done; \
	  for i in $(srcdir)/libc/machine/$(machine_dir)/sys/*.h; do \
	    if [ -f $$i ]; then \
	     $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/sys/`basename $$i`; \
	    else true; fi ; \
	  done ; \
	  for i in $(srcdir)/libc/machine/$(machine_dir)/include/*.h; do \
	    if [ -f $$i ]; then \
	     $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/`basename $$i`; \
	    else true; fi ; \
	  done ; \
	  for i in $(srcdir)/libc/sys/$(sys_dir)/sys/*.h; do \
	    if [ -f $$i ]; then \
	     $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/sys/`basename $$i`; \
	    else true; fi ; \
	  done ; \
	  $(mkinstalldirs) $(DESTDIR)$(tooldir)/include/bits; \
	  for i in $(srcdir)/libc/sys/$(sys_dir)/bits/*.h; do \
	    if [ -f $$i ]; then \
	     $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/bits/`basename $$i`; \
	    else true; fi ; \
	  done ; \
	  for i in $(srcdir)/libc/sys/$(sys_dir)/machine/*.h; do \
	    if [ -f $$i ]; then \
	     $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/machine/`basename $$i`; \
	    else true; fi ; \
	  done ; \
	  for i in $(srcdir)/libc/sys/$(sys_dir)/include/*.h; do \
	    if [ -f $$i ]; then \
	     $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/`basename $$i`; \
	    else true; fi ; \
	  done ; \
	  for i in $(srcdir)/libc/sys/$(sys_dir)/include/*; do \
	    if [ -d $$i ]; then \
		for j in $$i/*.h; do \
	            $(INSTALL_DATA) $$j $(DESTDIR)$(tooldir)/include/`basename $$i`/`basename $$j`; \
		done ; \
	    else true; fi ; \
	  done ; \
	  for i in $(srcdir)/libc/sys/$(sys_dir)/machine/$(machine_dir)/include/*.h; do \
	    if [ -f $$i ]; then \
	     $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/machine/`basename $$i`; \
	    else true; fi ; \
	  done ; \
	  for i in $(NO_INCLUDE_LIST); do \
	    if [ -f $(DESTDIR)$(tooldir)/include/$$i ]; then \
		rm $(DESTDIR)$(tooldir)/include/$$i; \
	    else true; fi ; \
	  done ; \
	else true; fi

# Force makedoc to be built before building info files.
info-recursive: doc/makedoc
dvi-recursive: doc/makedoc
doc/makedoc:
	cd doc && $(MAKE) all

CONFIG_STATUS_DEPENDENCIES = $(newlib_basedir)/configure.host

# Multilib support.
.PHONY: all-multi check-multi mostlyclean-multi clean-multi distclean-multi \
	maintainer-clean-multi

all-recursive: all-multi
check-recursive: check-multi
mostlyclean-recursive: mostlyclean-multi
clean-recursive: clean-multi
distclean-recursive: distclean-multi
maintainer-clean-recursive: maintainer-clean-multi

# The $(MAKE) comments below are to enable parallel building.
all-multi:
	$(MULTIDO) $(AM_MAKEFLAGS) DO=all multi-do # $(MAKE)
check-multi:
	$(MULTIDO) $(AM_MAKEFLAGS) DO=check multi-do # $(MAKE)
mostlyclean-multi:
	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=mostlyclean multi-clean # $(MAKE)
clean-multi:
	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=clean multi-clean # $(MAKE)
distclean-multi:
	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=distclean multi-clean # $(MAKE)
maintainer-clean-multi:
	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=maintainer-clean multi-clean # $(MAKE)

MAKEOVERRIDES=

# dejagnu support

RUNTESTFLAGS=

site.exp: Makefile
	@@echo 'Making a new site.exp file...'
	@@test ! -f site.bak || rm -f site.bak
	@@echo '## these variables are automatically generated by make ##' > $@@-t
	@@echo '# Do not edit here.  If you wish to override these values' >> $@@-t
	@@echo '# edit the last section' >> $@@-t
	@@echo 'set tool $(DEJATOOL)' >> $@@-t
	@@echo 'set tool_version $(VERSION)' >> $@@-t
	@@echo 'set srcdir $(srcdir)/testsuite' >> $@@-t
	@@echo 'set objdir' `pwd` >> $@@-t
	@@echo 'set tmpdir' `pwd`/testsuite >> $@@-t
	@@echo 'set multibuildtop ./$(MULTIBUILDTOP)' >> $@@-t
	@@echo 'set host_alias $(build_alias)' >> $@@-t
	@@echo 'set host_triplet $(build_triplet)' >> $@@-t
	@@echo 'set target_alias $(host_alias)' >> $@@-t
	@@echo 'set target_triplet $(host_triplet)' >> $@@-t
	@@echo '## All variables above are generated by configure. Do Not Edit ##' >> $@@-t
	@@test ! -f site.exp || sed '1,/^## All variables above are.*##/ d' site.exp >> $@@-t
	@@test ! -f site.exp || mv site.exp site.bak
	@@mv $@@-t site.exp

check-DEJAGNU: site.exp
	@@if [ -d testsuite ] ; then \
	  true ; \
	else \
	  mkdir testsuite ; \
	fi
	@@rm -f testsuite/site.exp
	@@cp site.exp testsuite/site.exp
	@@rootme=`pwd` ; \
	export rootme ; \
	srcdir=`cd ${srcdir}; pwd` ; \
	export srcdir ; \
	EXPECT=`if [ -f $${rootme}/${MULTIBUILDTOP}../../expect/expect ] ; then \
	          echo $${rootme}/${MULTIBUILDTOP}../../expect/expect ; \
	        else \
	          echo expect ; \
	        fi` ; \
	export EXPECT ; \
	echo "Found expect: $${EXPECT}" ; \
	if [ -f $(top_builddir)/$(MULTIBUILDTOP)../../expect/expect ] ; then \
	  TCL_LIBRARY=`cd $(top_srcdir)/../tcl/library && pwd` ; \
	  export TCL_LIBRARY ; \
	  echo "Found TCL library directory: $${TCL_LIBRARY}" ; \
	fi ; \
	RUNTEST=`if [ -f $${srcdir}/../dejagnu/runtest ] ; then \
	           echo $${srcdir}/../dejagnu/runtest ; \
	         else \
	           echo runtest ; \
	         fi` ; \
	export RUNTEST ; \
	echo "Found runtest: $${RUNTEST}" ; \
	cd testsuite ; \
	if $(SHELL) -c "$$RUNTEST --version" > /dev/null 2>&1 ; then \
	   $$RUNTEST --tool $(DEJATOOL) --srcdir $${srcdir}/testsuite $(RUNTESTFLAGS) ; \
	   : ; \
	else \
	   echo "WARNING: could not find \`runtest'" 1>&2 ; \
	fi

clean-local:
	-rm -rf targ-include
@


1.50
log
@	* Makefile.am (install-data-local): Fix condition and rm call.
	* Makefile.in: Regenerate.
@
text
@d16 4
@


1.50.2.1
log
@Pull in changes from HEAD
@
text
@a15 4
# The newlib hardware floating-point routines have been disabled due to
# inaccuracy.  If you wish to work on them, you will need to edit the
# configure.in file to re-enable the configuration option.  By default,
# the NEWLIB_HW_FP variable will always be false.
@


1.49
log
@
2011-01-12  Jeff Johnston  <jjohnstn@@redhat.com>

        * configure.host: Add noinclude variable to allow specification
        of header files to remove from installation.
        * acinclude.m4: Provide NO_INCLUDE_LIST variable based on
        noinclude variable in configure.host.
        * configure: Regenerated.
        * Makefile.am: Remove all header files in NO_INCLUDE_LIST.
        * Makefile.in: Regenerated.
@
text
@d334 2
a335 2
	    if [ -f $(DESTDIR)$(tooldir)/include/$$i]; then \
		-rm $(DESTDIR)$(tooldir)/include/$$i; \
@


1.48
log
@
2011-01-05  Ralf Corsepius  <ralf.corsepius@@rtems.org>

        * Makefile.am: Move cleaning targ-include to clean-local.
        * Makefile.in: Regenerate.
@
text
@d333 5
@


1.47
log
@
2010-12-16  Jeff Johnston  <jjohnstn@@redhat.com>

        * NEWS: Update with 1.19.0 info.
        * README: Ditto.
        * MAINTAINERS: Update.
        * acinclude.m4: Change version number to 1.19.0.
        * aclocal.m4: Regenerated.
        * configure: Ditto.
        * Makefile.am: Fix stmp-targ-include target.
        * Makefile.in: Regenerated.
        * doc/aclocal.m4: Ditto.
        * doc/configure: Ditto.
        * libc/*/aclocal.m4: Ditto.
        * libc/*/configure: Ditto.
        * libc/libc.texinfo: Ditto.
        * libm/*/aclocal.m4: Ditto.
        * libm/*/configure: Ditto.
        * libm/libm.texinfo: Ditto.
        * libc/sys/linux/shared.ld: Add VERS_1.19
@
text
@d258 1
a258 1
CLEANFILES = targ-include stmp-targ-include
d433 3
@


1.46
log
@
2010-12-14  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am: Add support to copy all sub-directories of the
        sys/SYS_DIR/include directory, if they contain header files.
        * Makefile.in: Regenerated.
@
text
@d224 3
a226 1
		    -mkdir targ-include/`basename $$i`; \
@


1.45
log
@	Add eXtensible Data Record (XDR) support
	* configure.host: Build libc/xdr only on cygwin.
	* Makefile.am: Install xdr headers.
	* libc/configure.in: Support new libc/xdr subdirectory.
	* libc/Makefile.am: Support new libc/xdr subdirectory.
	* libc/include/rpc/types.h: New.
	* libc/include/rpc/xdr.h: New.
	* libc/xdr/README: New.
	* libc/xdr/Makefile.am: New.
	* libc/xdr/dummy.c: New.
	* libc/xdr/xdr.c: New.
	* libc/xdr/xdr_array.c: New.
	* libc/xdr/xdr_float.c: New.
	* libc/xdr/xdr_float_vax.c: New.
	* libc/xdr/xdr_mem.c: New.
	* libc/xdr/xdr_private.c: New.
	* libc/xdr/xdr_private.h: New.
	* libc/xdr/xdr_rec.c: New.
	* libc/xdr/xdr_reference.c: New.
	* libc/xdr/xdr_sizeof.c: New.
	* libc/xdr/xdr_stdio.c: New.

	Regenerate using ac-2.63 and am-1.11.1
	* libc/xdr/Makefile.in: New.
	* Makefile.in: Regenerate.
	* libc/configure: Regenerate.
	* libc/Makefile.in: Regenerate.
	* libc/argz/Makefile.in: Regenerate.
	* libc/ctype/Makefile.in: Regenerate.
	* libc/errno/Makefile.in: Regenerate.
	* libc/iconv/ccs/binary/Makefile.in: Regenerate.
	* libc/iconv/ccs/Makefile.in: Regenerate.
	* libc/iconv/ces/Makefile.in: Regenerate.
	* libc/iconv/lib/Makefile.in: Regenerate.
	* libc/iconv/Makefile.in: Regenerate.
	* libc/locale/Makefile.in: Regenerate.
	* libc/misc/Makefile.in: Regenerate.
	* libc/posix/Makefile.in: Regenerate.
	* libc/reent/Makefile.in: Regenerate.
	* libc/search/Makefile.in: Regenerate.
	* libc/signal/Makefile.in: Regenerate.
	* libc/stdio/Makefile.in: Regenerate.
	* libc/stdio64/Makefile.in: Regenerate.
	* libc/stdlib/Makefile.in: Regenerate.
	* libc/string/Makefile.in: Regenerate.
	* libc/syscalls/Makefile.in: Regenerate.
	* libc/time/Makefile.in: Regenerate.
	* libc/unix/Makefile.in: Regenerate.
@
text
@d221 8
d319 7
@


1.44
log
@
2009-08-18  Jeff Johnston  <jjohnstn@@redhat.com>

        * newlib.hin: Add comment regarding file being manually edited.
        * Makefile.am: Add no-op rule for newlib.hin.
        * Makefile.in: Regenerated.
@
text
@d272 4
@


1.43
log
@
2009-06-23  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am (MATHOBJS_IN_LIBC): Add s_fpclassify and
        sf_fpclassify as these are now used for infinity testing.
        * Makefile.in: Regenerated.
@
text
@d190 1
@


1.42
log
@
2008-01-21  Neal H. Walfield  <neal@@gnu.org>

        * Makefile.am (crt1.o): Use correct source.
        * Makefile.in: Regenerated.
@
text
@d93 1
@


1.41
log
@	* ltmain.sh: Update from GCC.
	* libtool.m4: Update from GCC.
	* ltsugar.m4: New. Update from GCC.
	* ltversion.m4: New. Update from GCC.
	* ltoptions.m4: New. Update from GCC.
	* ltconfig: Remove.
	* ltcf-c.sh: Remove.
	* ltcf-cxx.sh: Remove.
	* ltcf-gcj.sh: Remove.
	* src-release: Update with new libtool file list.
	* newlib/*/configure.in: invoke _LD_DECL_SED.
	* newlib/*/Makefile.am: Ensure toplevel is included in ACLOCAL_AMFLAGS.
	* Regenerate subdirectories
@
text
@d184 2
a185 2
	ln $(CRT0_DIR)$(CRT0) $@@ >/dev/null 2>/dev/null \
	 || cp $(CRT0_DIR)$(CRT0) $@@
@


1.40
log
@
2006-06-05  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am (AM_MAKEFLAGS): Pass CCASFLAGS.
        * Makefile.in: Regenerated.
        * libc/machine/sh/Makefile.am (AM_CCASFLAGS): Remove
        extraneous CFLAGS reference now that CCASFLAGS are being extended
        properly via multilib.
        * libc/machine/sh/Makefile.in: Regenerated.
@
text
@d4 1
a4 1
ACLOCAL_AMFLAGS = -I .
@


1.39
log
@
2006-04-11  Jeff Johnston  <jjohnstn@@redhat.com>

        * acinclude.m4: Properly add square brackets for
        AC_DEFUN macros.  Rewrite LIB_AC_PROG_CC to remove
        macros no longer available.  Add LIB_AM_PROG_AS to
        remove prereq of AC_PROG_CC.  Add LIB_AC_PROG_CC_GNU
        macro.  Substitute lpfx (library object prefix).
        * configure.host: Set lpfx depending on whether
        libtool is used or not.
        * configure.in: Individually specify libc and libm
        to AC_CONFIG_SUBDIRS.  Add square bracket quoting as
        necessary.
        * Makefile.am: Use $(lpfx) to get object names for
        math-library functions that should also be in libc.
        * libc/machine/configure.in: Use case statement to determine
        AC_CONFIG_SUBDIRS statement.
        * libc/sys/linux/linuxthreads/machine/configure.in: Ditto.
        * libc/sys/linux/machine/configure.in: Ditto.
        * libc/sys/configure.in: Ditto.
        * libm/machine/configure.in: Ditto.
        * libc/sys/linux/configure.in: Fix up AC_CONFIG_SUBDIRS.
        * libm/configure.in: Add AM_CONDITIONAL statement
        for HAVE_LIBM_MACHINE_DIR.
        * libc/machine/a29k/Makefile.am: Modified to work with
        latest automake.  Change includes setting AM_CCASFLAGS
        so building .S files will properly pick up flags used
        to build C files.
        * libc/machine/arm/Makefile.am: Ditto.
        * libc/machine/crx/Makefile.am: Ditto.
        * libc/machine/d10v/Makefile.am: Ditto.
        * libc/machine/d30v/Makefile.am: Ditto.
        * libc/machine/fr30/Makefile.am: Ditto.
        * libc/machine/frv/Makefile.am: Ditto.
        * libc/machine/h8300/Makefile.am: Ditto.
        * libc/machine/h8500/Makefile.am: Ditto.
        * libc/machine/hppa/Makefile.am: Ditto.
        * libc/machine/i386/Makefile.am: Ditto.
        * libc/machine/iq2000/Makefile.am: Ditto.
        * libc/machine/m32c/Makefile.am: Ditto.
        * libc/machine/m32r/Makefile.am: Ditto.
        * libc/machine/m68hc11/Makefile.am: Ditto.
        * libc/machine/m68k/Makefile.am: Ditto.
        * libc/machine/m88k/Makefile.am: Ditto.
        * libc/machine/mips/Makefile.am: Ditto.
        * libc/machine/mn10200/Makefile.am: Ditto.
        * libc/machine/mn10300/Makefile.am: Ditto.
        * libc/machine/mt/Makefile.am: Ditto.
        * libc/machine/necv70/Makefile.am: Ditto.
        * libc/machine/powerpc/Makefile.am: Ditto.
        * libc/machine/sh/Makefile.am: Ditto.
        * libc/machine/sparc/Makefile.am: Ditto.
        * libc/machine/tic4x/Makefile.am: Ditto.
        * libc/machine/tic80/Makefile.am: Ditto.
        * libc/machine/v850/Makefile.am: Ditto.
        * libc/machine/w65/Makefile.am: Ditto.
        * libc/machine/xscale/Makefile.am: Ditto.
        * libc/machine/xstormy16/Makefile.am: Ditto.
        * libc/machine/z8k/Makefile.am: Ditto.
        * libc/sys/a29khif/Makefile.am: Ditto.
        * libc/sys/arc/Makefile.am: Ditto.
        * libc/sys/arm/Makefile.am: Ditto.
        * libc/sys/d10v/Makefile.am: Ditto.
        * libc/sys/decstation/Makefile.am: Ditto.
        * libc/sys/h8300hms/Makefile.am: Ditto.
        * libc/sys/h8500hms/Makefile.am: Ditto.
        * libc/sys/linux/linuxthreads/machine/i386/Makefile.am: Ditto.
        * libc/sys/linux/machine/i386/Makefile.am: Ditto.
        * libc/sys/m88kbug/Makefile.am: Ditto.
        * libc/sys/mmixware/Makefile.am: Ditto.
        * libc/sys/netware/Makefile.am: Ditto.
        * libc/sys/rdos/Makefile.am: Ditto.
        * libc/sys/rtems/Makefile.am: Ditto.
        * libc/sys/sh/Makefile.am: Ditto.
        * libc/sys/sparc64/Makefile.am: Ditto.
        * libc/sys/sysmec/Makefile.am: Ditto.
        * libc/sys/sysnec810/Makefile.am: Ditto.
        * libc/sys/sysnecv850/Makefile.am: Ditto.
        * libc/sys/sysvi386/Makefile.am: Ditto.
        * libc/sys/sysvnecv70/Makefile.am: Ditto.
        * libc/sys/tic80/Makefile.am: Ditto.
        * libc/sys/w65/Makefile.am: Ditto.
        * libc/sys/z8ksim/Makefile.am: Ditto.
        * libm/machine/i386/Makefile.am: Ditto.
        * libc/sys/arm/Makefile.am: Ditto plus add EXTRA sources including
        trap.S so that automake will generate a .S.o suffix rule.
        * libc/argz/Makefile.am: Modified to work with
        latest automake.  Change includes adding lib_a_CFLAGS
        so automake doesn't complain about libtool and non-libtool
        libraries sharing objects.
        * libc/ctype/Makefile.am: Ditto.
        * libc/errno/Makefile.am: Ditto.
        * libc/iconv/ccs/Makefile.am: Ditto.
        * libc/iconv/ces/Makefile.am: Ditto.
        * libc/iconv/lib/Makefile.am: Ditto.
        * libc/locale/Makefile.am: Ditto.
        * libc/misc/Makefile.am: Ditto.
        * libc/posix/Makefile.am: Ditto.
        * libc/reent/Makefile.am: Ditto.
        * libc/search/Makefile.am: Ditto.
        * libc/signal/Makefile.am: Ditto.
        * libc/stdio/Makefile.am: Ditto.
        * libc/stdio64/Makefile.am: Ditto.
        * libc/stdlib/Makefile.am: Ditto.
        * libc/string/Makefile.am: Ditto.
        * libc/sys/linux/Makefile.am: Ditto.
        * libc/sys/linux/argp/Makefile.am: Ditto.
        * libc/sys/linux/cmath/Makefile.am: Ditto.
        * libc/sys/linux/dl/Makefile.am: Ditto.
        * libc/sys/linux/iconv/Makefile.am: Ditto.
        * libc/sys/linux/intl/Makefile.am: Ditto.
        * libc/sys/linux/linuxthreads/Makefile.am: Ditto.
        * libc/sys/linux/net/Makefile.am: Ditto.
        * libc/sys/linux/stdlib/Makefile.am: Ditto.
        * libc/syscalls/Makefile.am: Ditto.
        * libc/time/Makefile.am: Ditto.
        * libc/unix/Makefile.am: Ditto.
        * libm/Makefile.am: Ditto.
        * libm/common/Makefile.am: Ditto.
        * libm/math/Makefile.am: Ditto.
        * libm/mathfp/Makefile.am: Ditto.
        * Regenerate all aclocal.m4, Makefile.in, and configure files.
@
text
@d29 1
@


1.38
log
@
2006-02-27  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am (MATHOBJS_IN_LIBC): Add s_isinfd, sf_isinff,
        s_isnand, and sf_isnanf object files.
        * Makefile.in: Regenerated.
        * libc/include/ieeefp.h: Undef isnan and isinf to avoid
        conflict if <math.h> has previously been included.
        * libc/include/math.h
        * libm/common/Makefile.am: Add new s_isinfd, s_isnand, sf_isinff,
        and sf_isnanf files.  Also support s_isnan, sf_isnan, s_isinf, and
        sf_isinf files which have been moved from math/mathfp directories.
        * libm/common/Makefile.in: Regenerated.
        * libm/common/s_isinfd.c: New file.
        * libm/common/s_isnand.c: Ditto.
        * libm/common/sf_isinff.c: Ditto.
        * libm/common/sf_isnanf.c: Ditto.
        * libm/common/s_isinf.c: Moved from libm/math directory.
        * libm/common/s_isnan.c: Ditto.
        * libm/common/sf_isinf.c: Ditto.
        * libm/common/sf_isnan.c: Ditto.
        * libm/math/Makefile.am: Remove isinf and isnan family functions
        which have been moved into common directory.
        * libm/mathfp/Makefile.am: Ditto.
        * libm/math/Makefile.in: Regenerated.
        * libm/mathfp/Makefile.in: Ditto.
        * libm/math/s_isinf.c: Removed.
        * libm/math/s_isnan.c: Ditto.
        * libm/math/sf_isinf.c: Ditto.
        * libm/math/sf_isnan.c: Ditto.
        * libm/mathfp/s_isinf.c: Ditto.
        * libm/mathfp/s_isnan.c: Ditto.
        * libm/mathfp/sf_isinf.c: Ditto.
        * libm/mathfp/sf_isnan.c: Ditto.
@
text
@d92 13
a104 13
	s_isinf.$(oext) sf_isinf.$(oext) \
	s_isnan.$(oext) sf_isnan.$(oext) \
	s_isinfd.$(oext) sf_isinff.$(oext) \
	s_isnand.$(oext) sf_isnanf.$(oext) \
	s_nan.$(oext) sf_nan.$(oext) \
	s_ldexp.$(oext) sf_ldexp.$(oext) \
	s_frexp.$(oext) sf_frexp.$(oext) \
	s_modf.$(oext) \
	sf_modf.$(oext) s_scalbn.$(oext) \
	sf_scalbn.$(oext) \
	s_finite.$(oext) sf_finite.$(oext) \
	s_copysign.$(oext) sf_copysign.$(oext) \
	s_infconst.$(oext)
@


1.38.4.1
log
@
Fix machine/sys Makefile.am files to not recursively set AM_CCASFLAGS.  Properly include top-level Makefile.am which was missing fixes.
@
text
@d92 13
a104 13
	$(lpfx)s_isinf.$(oext) $(lpfx)sf_isinf.$(oext) \
	$(lpfx)s_isnan.$(oext) $(lpfx)sf_isnan.$(oext) \
	$(lpfx)s_isinfd.$(oext) $(lpfx)sf_isinff.$(oext) \
	$(lpfx)s_isnand.$(oext) $(lpfx)sf_isnanf.$(oext) \
	$(lpfx)s_nan.$(oext) $(lpfx)sf_nan.$(oext) \
	$(lpfx)s_ldexp.$(oext) $(lpfx)sf_ldexp.$(oext) \
	$(lpfx)s_frexp.$(oext) $(lpfx)sf_frexp.$(oext) \
	$(lpfx)s_modf.$(oext) \
	$(lpfx)sf_modf.$(oext) $(lpfx)s_scalbn.$(oext) \
	$(lpfx)sf_scalbn.$(oext) \
	$(lpfx)s_finite.$(oext) $(lpfx)sf_finite.$(oext) \
	$(lpfx)s_copysign.$(oext) $(lpfx)sf_copysign.$(oext) \
	$(lpfx)s_infconst.$(oext)
@


1.37
log
@
2006-01-20  Jeff Johnston  <jjohnstn@@redhat.com>

        * acconfig.h: New file to generate newlib.hin from.
        * newlib.hin: Regenerated.
        * stamp-h.in: Regenerated.
        * Makefile.am: Add ACLOCAL_AMFLAGS so aclocal can be
        called automatically.
        * Makefile.in: Regenerated.
        * acinclude.m4: Add proper comment for hack in previous change.
        * aclocal.m4 */aclocal.m4: Regenerated.
        * configure */configure: Regenerated.
@
text
@d94 2
@


1.36
log
@
2006-01-11  Jeff Johnston  <jjohnstn@@redhat.com>

        * acinclude.m4: Add hack to prevent INSTALL in subdirs
        from being set to "../".
        * Makefile.am: Pass INSTALL in AM_MAKEFLAGS.
        * aclocal.m4: Regenerated.
        * configure: Ditto.
        * Makefile.in: Ditto.
        * doc/aclocal.m4: Ditto.
        * doc/configure: Ditto.
        * iconvdata/aclocal.m4: Ditto.
        * iconvdata/configure: Ditto.
        * libc/*/aclocal.m4: Ditto.
        * libc/*/configure: Ditto.
        * libc/libc.texinfo: Ditto.
        * libm/*/aclocal.m4: Ditto.
        * libm/*/configure: Ditto.
@
text
@d4 1
@


1.35
log
@
2005-09-08  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am: Add include files under bits sub-directory.
        * Makefile.in: Regenerated.
        * libc/sys/linux/argp/argp-fs-xinl.c: Set __OPTIMIZE__ to
        actual value of 1 to be compatible with newer glibc headers.
        * libc/sys/linux/sys/cdefs.h: Fix to be compatible with newer
        glibc headers.
        * libc/sys/linux/sys/dirent.h: Ditto.
        * libc/sys/linux/argp/argp-xinl.c: Ditto.
        * libc/sys/linux/dl/dl-runtime.c: Make sure fixup and
        profile_fixup routines are marked used so they won't be
        optimized away.
        * libc/sys/linux/dl/dl-cache.c: Don't use weak_extern macro
        to mark functions as weak.
        * libc/sys/linux/dl/dl-open.c: Ditto.
        * libc/sys/linux/iconv/gconv_open.c: Fix to obey new gcc4
        rules about lvalues.
        * libc/sys/linux/iconv/gconv_simple.c: Ditto.
        * libc/sys/linux/linuxthreads/bits/libc-lock.h: Don't use
        weak_extern macro to mark functions as weak.  Instead always
        use #pragma weak.
        * iconvdata/jis0208.h: Fix to work with gcc4.
        * libc/sys/linux/dl/dl-load.c: Ditto.
        * libc/sys/linux/dl/dl-reloc.c: Ditto.
        * libc/sys/linux/dl/do-rel.h: Ditto.
        * libc/sys/linux/dl/dynamic-link.h: Ditto.
        * libc/sys/linux/include/ltdl.h: Ditto.
        * libc/sys/linux/machine/i386/dl-machine.h: Ditto.
        * libc/sys/linux/machine/i386/weakalias.h: Ditto.
        * libc/sys/linux/net/ns_ntoa.c: Ditto.
        * libc/sys/linux/bits/initspin.h: New file.
        * libc/sys/linux/bits/libc-lock.h: Ditto.
        * libc/sys/linux/bits/pthreadtypes.h: Ditto.
        * libc/sys/linux/bits/typesizes.h: Ditto.
@
text
@d30 1
@


1.34
log
@
2005-07-04  Mark Mitchell  <mark@@codesourcery.com>

        * Makefile.am (site.exp): Set tmpdir.
        * Makefile.in: Regenerated.
        * testsuite/lib/checkoutput.exp (newlib_check_output): Put
        executables in $tmpdir.
        * testsuite/lib/flags.exp (libgloss_link_flags): Use the original
        libgloss version if not running in the build directory.
        * testsuite/lib/newlib.exp (newlib_init): Put testglue.o in
        $tmpdir.
        * testsuite/lib/passfail.exp (newlib_pass_fail): Put executables
        in $tmpdir.
@
text
@d284 1
@


1.33
log
@
2005-01-27  Hans-Peter Nilsson  <hp@@axis.com>

        * Makefile.am (stmp-targ-include): Support include header files
        from machine directories.
        * Makefile.in: Regenerate.
@
text
@d192 1
a192 1
	mkdir targ-include targ-include/sys targ-include/machine
d219 5
d284 5
d355 1
@


1.32
log
@
2005-01-06  Jeff Johnston  <jjohnstn@@redhat.com>

        * libc/stdlib/strtod.c (_strtod_r): Add NaN support.
        * (strtof): Ditto.
        * libc/stdio/vfscanf.c (__svfscanf_r): Ditto.
        * Makefile.am (MATHOBJS_IN_LIBC): Add s_nan and sf_nan
        functions for use by strtod and strtof.
        * Makefile.in: Regenerated.
@
text
@d204 5
d269 5
@


1.31
log
@
2004-12-03  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am (libc_la_LDFLAGS): Add -lgcc to handle any
        libgcc dependencies.
        (libm_la_LDFLAGS): Ditto.
        * Makefile.in: Regenerated.
@
text
@d92 1
@


1.30
log
@
2004-10-05  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am (stmp-targ-include): Support sys header files
        from machine directories.
        * Makefile.in: Regenerated.
@
text
@d127 1
a127 1
libm_la_LDFLAGS = -version-info $(LIBTOOL_VERSION_INFO) -release newlib -no-undefined -Xcompiler -nostdlib -Xlinker --version-script=$(srcdir)/libc/sys/linux/shared.ld -objectlist libm-libtool-objectlist
d129 1
a129 1
libc_la_LDFLAGS = -version-info $(LIBTOOL_VERSION_INFO) -release newlib -no-undefined -Xcompiler -nostdlib -Xlinker --version-script=$(srcdir)/libc/sys/linux/shared.ld -objectlist libc-libtool-objectlist
@


1.29
log
@
2003-10-15  Alexandre Oliva  <aoliva@@redhat.com>

        * Makefile.am: Add $(MAKE) comments to multido and multiclean
        lines, to enable parallel make.
        * Makefile.in: Rebuilt.
@
text
@d198 5
d258 5
@


1.28
log
@
2002-11-07  Joel Sherrill <joel@@OARcorp.com>

        * libc/sys/rtems/machine: New directory.
        * libc/sys/rtems/machine/limits.h, libc/sys/rtems/machine/param.h,
        libc/sys/rtems/sys/param.h, libc/sys/rtems/sys/syslimits.h,
        libc/sys/rtems/sys/utime.h: New files added to make *-rtems newlib
        targets more BSD like when installed without requiring files to
        be overwritten at install point when RTEMS itself is installed.
        * Makefile.am: Pick up system dependent machine .h files such as
        might be found on a BSD-ish system.
        * Makefile.in: Regenerate.
        * libc/include/machine/types.h: When on an RTEMS target, define a
        few BSD flavor types.
@
text
@d233 1
a233 1
	$(MULTIDO) $(AM_MAKEFLAGS) DO=install multi-do
d294 1
d296 1
a296 1
	$(MULTIDO) $(AM_MAKEFLAGS) DO=all multi-do
d298 1
a298 1
	$(MULTIDO) $(AM_MAKEFLAGS) DO=check multi-do
d300 1
a300 1
	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=mostlyclean multi-clean
d302 1
a302 1
	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=clean multi-clean
d304 1
a304 1
	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=distclean multi-clean
d306 1
a306 1
	$(MULTICLEAN) $(AM_MAKEFLAGS) DO=maintainer-clean multi-clean
@


1.27
log
@
2002-10-07  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am: Add EXTRA_DIRS to allow future dependencies on
        the build library.
        * configure.in: Ditto.
        * Makefile.in: Regenerated.
        * configure: Ditto.
        * libc/sys/linux/Makefile.am: Add EXTRA_SUBDIRS and EXTRA_SUBLIBS
        for specifying configured libraries/directories.
        * libc/sys/linux/configure.in: Ditto.
        * libc/sys/linux/Makefile.in: Regenerated.
        * libc/sys/linux/configure: Ditto.
@
text
@d208 5
d256 5
@


1.26
log
@
2002-08-28  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am (install-data-local): Move install of build
        newlib.h after installing headers in libc/include so as to
        overwrite default newlib.h.
        * Makefile.in: Regenerated.
@
text
@d66 1
a66 1
	$(DOCDIR) .
@


1.25
log
@
2002-08-27  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am(stmp-targ-include): Copy newlib.h to targ-include.
        (install-data-local): Install newlib.h.
        * Makefile.in: Regenerated.
        * aclocal.m4: Ditto.
        * configure: Ditto.
        * configure.in: Add AM_CONFIG_HEADER to generate newlib.h based on
        newlib.hin.  Add AC_DEFINE_UNQUOTED entries for _ELIX_LEVEL
        and _NEWLIB_VERSION to fill in newlib.h header file entries.
        In AC_OUTPUT statement, unset ac_file so multilib support does
        not use last ac_file temporary used in newlib.h configuration.
        * libc/include/_ansi.h: Include <newlib.h>.
        * newlib.hin: New template file for newlib.h.
        * stamp-h.in: New file.
@
text
@a230 1
	  $(INSTALL_DATA) newlib.h $(DESTDIR)$(tooldir)/include/newlib.h; \
d234 1
@


1.24
log
@
2002-08-26  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am(LIBC_OBJECTLISTS): Add STDIO64_OBJECTLIST.
        * Makefile.in: Regenerated.
        * acinclude.m4: Add support for --enable-newlib-elix-level option.
        * aclocal.m4: Regenerated.
        * configure: Ditto.
        * configure.host: Add code to define _ELIX_LEVEL if
        --enable-newlib-elix-level option is used.
        * configure.in:
        * libc/aclocal.m4: Regenerated.
        * libc/configure: Ditto.
        * libc/argz/Makefile.am: Add EL/IX level checking.
        * libc/argz/Makefile.in: Regenerated.
        * libc/argz/dummy.c: New file.
        * libc/ctype/Makefile.am: Add EL/IX level checking.
        * libc/ctype/Makefile.in: Regenerated.
        * libc/locale/Makefile.am: Add EL/IX level checking.
        * libc/locale/Makefile.in: Regenerated.
        * libc/posix/Makefile.am: Add EL/IX level checking.
        * libc/posix/Makefile.in: Regenerated.
        * libc/posix/telldir.c: Add EL/IX level checking.
        * libc/reent/Makefile.am: Ditto.
        * libc/reent/fstat64r.c: Ditto.
        * libc/reent/lseek64r.c: Ditto.
        * libc/reent/open64r.c: Ditto.
        * libc/reent/Makefile.in: Regenerated.
        * libc/search/Makefile.am: Add EL/IX level checking.
        * libc/search/Makefile.in: Regenerated.
        * libc/stdio/Makefile.am: Add EL/IX level checking.
        * libc/stdio/Makefile.in: Regenerated.
        * libc/stdio64/Makefile.am: Add EL/IX level checking.
        * libc/stdio64/Makefile.in: Regenerated.
        * libc/stdio64/dummy.c: New file.
        * libc/stdio64/fgetpos64.c: Fix so _LARGEFILE_64 macro is checked
        after first include.
        * libc/stdio64/fopen64.c: Ditto.
        * libc/stdio64/freopen64.c: Ditto.
        * libc/stdio64/fseeko64.c: Ditto.
        * libc/stdio64/fsetpos64.c: Ditto.
        * libc/stdio64/ftello64.c: Ditto.
        * libc/stdio64/tmpfile64.c: Ditto.
        * libc/stdlib/Makefile.am: Add EL/IX level checking.
        * libc/stdlib/Makefile.in: Regenerated.
        * libc/stdlib/mstats.c: Add EL/IX level checking.
        * libc/string/Makefile.am: Ditto.
        * libc/string/Makefile.in: Regenerated.
        * libc/sys/linux/Makefile.am: Add EL/IX level checking.
        * libc/sys/linux/Makefile.in: Regenerated.
        * libc/sys/linux/aclocal.m4: Ditto.
        * libc/sys/linux/configure: Ditto.
        * libc/sys/linux/aio.c: Add EL/IX level checking.
        * libc/sys/linux/ftok.c: Ditto.
        * libc/sys/linux/getdate.c: Ditto.
        * libc/sys/linux/ids.c: Ditto.
        * libc/sys/linux/inode.c: Ditto.
        * libc/sys/linux/io.c: Ditto.
        * libc/sys/linux/process.c: Ditto.
        * libc/sys/linux/resource.c: Ditto.
        * libc/sys/linux/sched.c: Ditto.
        * libc/sys/linux/sig.c: Ditto.
        * libc/sys/linux/termios.c: Ditto.
        * libc/sys/linux/wait.c: Ditto plus add __waitpid and
        __libc___waitpid weak aliases.
        * libc/sys/linux/machine/i386/syscall.h: Add new _base macros
        that generate the code for a syscall, but do not create a
        weak alias.
        * libc/syscalls/Makefile.am: Add EL/IX level checking.
        * libc/syscalls/Makefile.in: Regenerated.
        * libc/time/tzset_r.c: Change to replace strdup with equivalent
        functionality.
        * libc/unix/Makefile.am: Add EL/IX level checking.
        * libc/unix/Makefile.in: Regenerated.
@
text
@d192 1
d231 1
@


1.23
log
@
2002-08-17  Jeff Johnston  <jjohnstn@@redhat.com>

        *  Makefile.am: Move cmath stuff into libc/sys/linux.
        *  Makefile.in: Regenerated.
        *  configure.host: Default -DMB_CAPABLE for x86-linux.
        *  libc/include/reent.h: Define _sbrk to take signed int argument.
        *  libc/include/sys/unistd.h: Ditto for _sbrk_r and sbrk.
        *  libc/locale/locale.c[MB_CAPABLE]: Add LC_MESSAGES support and
        make locale name checking more efficient.  Also allow "C-ISO-8859-1"
        locale for LC_CTYPE and LC_MESSAGES.
        *  libc/reent/sbrkr.c: Change prototype to take ptrdiff_t.
        *  libc/sys/linux/brk.c: Change sbrk prototype.
        *  libc/sys/linux/include/time.h: Remove Cygwin stuff and
        include <sys/features.h>.
        (CLOCK_THREAD_CPUTIME): Renamed to CLOCK_THREAD_CPUTIME_ID.
        (CLOCK_PROCESS_CPUTIME): Renamed to CLOCK_PROCESS_CPUTIME_ID.
        *  libc/sys/linux/sys/cdefs.h: Replace with glibc sys/cdefs.h
        with a few local additions.
        *  libc/sys/linux/sys/features.h: New file.
        *  libc/sys/linux/sys/unistd.h: Change _sbrk_r and sbrk prototypes
        to take signed argument.
        *  libc/syscalls/syssbrk.c: Change sbrk, _sbrk_r, and _sbrk
        prototypes to take signed size argument.
@
text
@d106 1
@


1.22
log
@	* libc/sys/linux/cmath: New directory.
	* libc/sys/linux/include/cmathcalls.h: New file.
	* libc/sys/linux/include/complex.h: New file.
	* libc/sys/linux/machine/i386/huge_val.h: New file
	* libm/math/w_sincos.c: New file
	* libm/math/wf_sincos.c: New file
	* libm/mathfp/s_sincos.c: New file
	* libm/mathfp/sf_sincos.c: New file
	* Makefile.am (LIBC_OBJECTLISTS): Add cmath/objectlist.awk.in.
	* libc/include/math.h: Add sincos and sincosf declarations.
	* libc/sys/linux/Makefile.am (SUBDIRS): Add cmath.
	(SUBLIBS): Likewise.
	* libc/sys/linux/configure.in (AC_OUTPUT): Add cmath.
	* libm/math/Makefile.am (src): Add w_sincos.c.
	(fsrc): Add wf_sincos.c.
	* libm/mathfp/Makefile.am (src): Add s_sincos.c
	(fsrc): Add sf_sincos.c.
@
text
@a116 1
	libc/sys/linux/cmath/objectlist.awk.in \
@


1.21
log
@	* Makefile.am (LIB_OBJECTLISTS): Add
	libc/search/objectlist.awk.in.
	* libc/Makefile.am (SUBDIRS): Add search.
	(SUBLIBS): Add search/libsearch.la.
	* libc/configure.in (AC_OUTPUT): Add search/Makefile.
	* libc/search: New directory.
	* libc/search/Makefile.am: New file.
	* libc/search/extern.h: New file.
	* libc/search/hash.c: New file.
	* libc/search/hash.h: New file.
	* libc/search/hash_bigkey.c: New file.
	* libc/search/hash_buf.c: New file.
	* libc/search/hash_func.c: New file.
	* libc/search/hash_log2.c: New file.
	* libc/search/hash_page.c: New file.
	* libc/search/hcreate.3: New file.
	* libc/search/hcreate.c: New file.
	* libc/search/hcreate.c~: New file.
	* libc/search/hcreate_r.c: New file.
	* libc/search/ndbm.c: New file.
	* libc/search/page.h: New file.
	* libc/search/tdelete.c: New file.
	* libc/search/tdestroy.c: New file.
	* libc/search/tfind.c: New file.
	* libc/search/tsearch.3: New file.
	* libc/search/tsearch.c: New file.
	* libc/search/twalk.c: New file.
	* libc/include/db.h: New file.
	* libc/include/ndbm.h: New file.
	* libc/include/search.h: New file.
	* libc/include/sys/queue.h: New file.
	* libc/include/sys/cdefs.h: New file.
	* libc/include/sys/param.h
	[__IEEE_LITTLE_ENDIAN,__IEEE_BIG_ENDIAN]: Set BYTE_ORDER to
	LITTLE_ENDIAN or BIG_ENDIAN.
	* libc/include/sys/errno.h (EFTYPE): New macro.
	* libc/search/bsearch.c: Move from libc/stdlib.
	* libc/search/qsort.c: Likewise.
	* libc/stdlib/Makefile.am (LIB_SOURCES): Remove bsearch.c and
	qsort.c.
	(CHEWOUT_FILES): Remove bsearch.def and qsort.def.
	* libc/stdlib/stdlib.tex: Remove references to bsearch and qsort.
@
text
@d117 1
@


1.20
log
@	* libc/argz: New directory.
	* libc/argz/*: New files.
	* libc/argz/argz_add.c: New file.
	* libc/argz/argz_add_sep.c: New file.
	* libc/argz/argz_append.c: New file.
	* libc/argz/argz_count.c: New file.
	* libc/argz/argz_create.c: New file.
	* libc/argz/argz_create_sep.c: New file.
	* libc/argz/argz_delete.c: New file.
	* libc/argz/argz_extract.c: New file.
	* libc/argz/argz_insert.c: New file.
	* libc/argz/argz_next.c: New file.
	* libc/argz/argz_replace.c: New file.
	* libc/argz/argz_stringify.c: New file.
	* libc/argz/buf_findstr.c: New file.
	* libc/argz/envz_add.c: New file.
	* libc/argz/envz_entry.c: New file.
	* libc/argz/envz_get.c: New file.
	* libc/argz/envz_merge.c: New file.
	* libc/argz/envz_remove.c: New file.
	* libc/argz/envz_strip.c: New file.
	* libc/include/argz.h: New file.
	* libc/include/envz.h: New file.
	* Makefile.am (LIBC_OBJECTLISTS): Add
	libc/argz/objectlist.awk.in.
	* libc/Makefile.am (SUBDIRS): Add argz.
	(SUBLIBS): Add argz/libargz.la.
	* libc/configure.in (AC_OUTPUT): Add argz/Makefile.
	* libc/include/errno.h: Add error_t typedef.
@
text
@d110 1
@


1.19
log
@	* libm/common/s_fdim.c: New file.
	* libm/common/s_fma.c: Likewise.
	* libm/common/s_fmax.c: Likewise.
	* libm/common/s_fmin.c: Likewise.
	* libm/common/s_fpclassify.c: Likewise.
	* libm/common/s_lrint.c: Likewise.
	* libm/common/s_lround.c: Likewise.
	* libm/common/s_nearbyint.c: Likewise.
	* libm/common/s_remquo.c: Likewise.
	* libm/common/s_round.c: Likewise.
	* libm/common/s_scalbln.c: Likewise.
	* libm/common/s_signbit.c: Likewise.
	* libm/common/s_trunc.c: Likewise.
	* libm/common/sf_fdim.c: Likewise.
	* libm/common/sf_fma.c: Likewise.
	* libm/common/sf_fmax.c: Likewise.
	* libm/common/sf_fmin.c: Likewise.
	* libm/common/sf_lrint.c: Likewise.
	* libm/common/sf_lround.c: Likewise.
	* libm/common/sf_nearbyint.c: Likewise.
	* libm/common/sf_remquo.c: Likewise.
	* libm/common/sf_round.c: Likewise.
	* libm/common/sf_scalbln.c: Likewise.
	* libm/common/sf_trunc.c: Likewise.
	* libm/math/w_exp2.c: Likewise.
	* libm/math/w_tgamma.c: Likewise.
	* libm/math/wf_exp2.c: Likewise.
	* libm/math/wf_tgamma.c: Likewise.
	* libm/mathfp/s_exp2.c: Likewise.
	* libm/mathfp/s_tgamma.c: Likewise.
	* libm/mathfp/sf_exp2.c: Likewise.
	* libm/mathfp/sf_tgamma.c: Likewise.
	* libm/math/er_gamma.c: Fix return value.
	* libm/math/erf_gamma.c: Likewise.
	* libm/mathfp/er_gamma.c: Likewise.
	* libm/mathfp/erf_gamma.c: Likewise.
	* libc/include/math.h (!__STRICT_ANSI__): Include ISOC99-specific
	declarations and macros.
	Regenerated all Makefile.in, aclocal.m4 and configure files to
	use new libtool macros in top-level libtool.m4
@
text
@d106 1
@


1.18
log
@
2002-05-22  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am: Don't pass $toollibdir down directly in
        AM_MAKEFLAGS as it causes all multilibs to use the same toollibdir.
        Pass it under the name: top_toollibdir.
        * Makefile.in: Regenerated.
@
text
@d124 1
a124 1
libm_la_LDFLAGS = -version-info $(LIBTOOL_VERSION_INFO) -release newlib -no-undefined -Xcompiler -nostdlib -Xlinker --version-script=$(srcdir)/libc/sys/linux/shared.ld `cat libm-libtool-objectlist`
d126 1
a126 1
libc_la_LDFLAGS = -version-info $(LIBTOOL_VERSION_INFO) -release newlib -no-undefined -Xcompiler -nostdlib -Xlinker --version-script=$(srcdir)/libc/sys/linux/shared.ld `cat libc-libtool-objectlist`
@


1.17
log
@
2002-05-17  Jeff Johnston  <jjohnstn@@redhat.com>

	* Makefile.am: Copy and install headers from sys/machine/include
	directory.  Also pass $toollibdir to lower-level directories.
	* Makefile.in: Regenerated.
	* libc/include/stdio.h[!_REENT_ONLY]: Change stdin, stdout, and
	stderr to use _REENT macro instead of _impure_ptr directly.
	* libc/include/sys/config.h[__i386__][__linux__]: Define
	__DYNAMIC_REENT__.
	* libc/include/sys/reent.h[!_REENT_ONLY]: Change _REENT macro to be
	call to __getreent() function if !__SINGLE_THREAD__ and
	__DYNAMIC_REENT__ is set.
	* libc/reent/Makefile.am: Add support for getreent.c.
	* libc/reent/Makefile.in: Regenerated.
	* libc/string/strerror.c: Add check if EOPNOTSUPP and ENOTSUP are same.
	* libc/sys/linux/Makefile.am: Add support for new files.
	* libc/sys/linux/configure.in: Add $EXTRA_DIRS variable.
	* libc/sys/linux/Makefile.in: Regenerated.
	* libc/sys/linux/configure: Ditto.
	* libc/sys/linux/io.c: Add poll syscall.  Also weak-alias
	__close, __read, __write, __poll, __open, __lseek, __fcntl from
	their __libc_ counterparts.
	* libc/sys/linux/io64.c: Add __libc_ prefix to lseek64 and open64
	and weak-alias to regular names.
	* libc/sys/linux/pread64.c: Rename to __libc_pread64 and weak-alias
	to pread64 and __pread64.
	* libc/sys/linux/process.c: Weak_alias __libc_getpid to __getpid.
	* libc/sys/linux/pwrite64.c: Rename to __libc_pwrite64 and
	weak-alias to pwrite64.
	* libc/sys/linux/sched.c: Weak-alias __libc_sched_getparam,
	__libc_sched_getscheduler, __libc_sched_get_priority_max,
	__libc_sched_get_priority_min, and __libc_sched_setschedule to
	name with __ instead of __libc_.
	* libc/sys/linux/siglongjmp.c: Include <machine/weakalias.h>.
	Rename siglongjmp to __libc_siglongjmp and weak-alias to siglongjmp.
	Call __libc_longjmp instead of longjmp, from __libc_siglongjmp.
	* libc/sys/linux/signal.c: Rename raise to __libc_raise and weak-alias
	to raise.
	* libc/sys/linux/socket.c: Weak-alias __libc_connect to __connect and
	__libc_send to __send.
	* libc/sys/linux/time.c: Weak-alias __libc_gettimeofday to
	__gettimeofday.
	* libc/sys/linux/wait.c: Rename wait to __libc_wait and weak-alias
	it to wait.  Rename wait3 to __libc_wait3 and weak-alias it to wait3.
	* libc/sys/linux/include/setjmp.h: Use __jmp_buf in sigjmp_buf
	type and typedef __jmp_buf to jmp_buf.
	* libc/sys/linux/machine/i386/Makefile.am: Add syscalls.c and
	setjmp.S.
	* libc/sys/linux/machine/i386/Makefile.in: Regenerated.
	* libc/sys/linux/machine/i386/crt0.c: Add support to clear .bss
	section.
	* libc/sys/linux/machine/i386/socketcall.h: Change to use __libc_
	prefix for function macros and then use weak_alias() to regular names.
	* libc/sys/linux/machine/i386/syscall.h: Ditto.
	* libc/sys/linux/sys/errno.h: Define EOPNOTSUP to be ENOTSUP.
	* libc/sys/linux/sys/stdio.h: Define _flockfile and _funlockfile
	to be flockfile() and funlockfile() respectively.
	* libc/sys/linux/sys/types.h
	* libc/reent/getreent.c: New file.
	* libc/sys/linux/flockfile.c: Ditto.
	* libc/sys/linux/funlockfile.c: Ditto.
	* libc/sys/linux/getreent.c: Ditto.
	* libc/sys/linux/pread.c: Ditto.
	* libc/sys/linux/pwrite.c: Ditto.
	* libc/sys/linux/raise.c: Ditto.
	* libc/sys/linux/system.c: Ditto.
	* libc/sys/linux/tcdrain.c: Ditto.
	* libc/sys/linux/machine/i386/i386mach.h: Ditto.
	* libc/sys/linux/machine/i386/setjmp.S: Ditto.
	* libc/sys/linux/machine/i386/syscalls.c: Ditto.
	* libc/sys/linux/machine/i386/weakalias.h: Ditto.
	* libc/sys/linux/machine/i386/include/setjmp.h: Ditto.
@
text
@d46 1
a46 1
	"toollibdir=$(toollibdir)" \
@


1.16
log
@	* Makefile.am: Add support for checking multilibs.
@
text
@d46 1
d209 5
d251 5
@


1.15
log
@	* Makefile.am (site.exp): Remove newlib_cflags.  Add
	multibuildtop.
	* testsuite/newlib.locale/UTF-8.c: Change fprintf's to printf's.
	* testsuite/lib/flags.exp: New file.
	* testsuite/lib/newlib.exp: Load flags.exp.
	(newlib_target_compile): Remove libgloss directory references.
	(newlib_init): Remove newlib_cflags references.
@
text
@d258 1
a258 1
.PHONY: all-multi mostlyclean-multi clean-multi distclean-multi \
d262 1
d270 2
d340 2
a341 1
	   $$RUNTEST --tool $(DEJATOOL) --srcdir $${srcdir}/testsuite $(RUNTESTFLAGS); \
@


1.14
log
@	* Makefile.am (site.exp): Change host_alias, host_triplet,
	target_alias, target_triplet to refer to gcc's host and target
	variables (newlib's build and host variables).
	* testsuite/lib/newlib.exp (newlib_init): Change build
	references to host references, host references to target
	references to reflect Makefile.am changes.
	(newlib_target_compile): Likewise.
	(newlib_finish): Likewise.
@
text
@d294 1
a294 1
	@@echo 'set newlib_cflags "$(NEWLIB_CFLAGS)"' >> $@@-t
@


1.13
log
@
2002-04-26  Jeff Johnston  <jjohnstn@@redhat.com>

        * configure.in (CC_FOR_NEWLIB): New variable that
        bases on $(CC) and adds targ-include and libc/include as
        -isystem directives if they are not already part of $(CC).
        * Makefile.am (AM_MAKEFLAGS): Change setting of CC to equal
        $(CC_FOR_NEWLIB).
        * configure: Regenerated.
        * Makefile.in: Ditto.
@
text
@d295 2
a296 4
	@@echo 'set build_alias $(build_alias)' >> $@@-t
	@@echo 'set build_triplet $(build_triplet)' >> $@@-t
	@@echo 'set host_alias $(host_alias)' >> $@@-t
	@@echo 'set host_triplet $(host_triplet)' >> $@@-t
@


1.12
log
@	* Makefile.am (check-DEJAGNU): New target.
	(site.exp): Likewise.
	* acinclude.m4 (NEWLIB_CONFIGURE): Replace AC_CANONICAL_HOST
	with AC_CANONICAL_SYSTEM.  Remove AC_CANONICAL_BUILD.
	* libc/locale/locale.c (_setlocale_r): Add UTF-8 support.
	* libc/stdlib/mbtowc_r.c (_mbtowc_r): Likewise.
	* libc/stdlib/wctomb_r.c (_wctomb_r): Likewise.
	* testsuite: New directory.
	* testsuite/config: Likewise.
	* testsuite/lib: Likewise.
	* testsuite/newlib.locale: Likewise.
	* testsuite/newlib.string: Likewise.
	* testsuite/config/default.exp: New file.
	* testsuite/lib/checkoutput.exp: New file.
	* testsuite/lib/newlib.exp: New file.
	* testsuite/lib/passfail.exp: New file.
	* testsuite/newlib.locale/UTF-8.c: New file.
	* testsuite/newlib.locale/UTF-8.exp: New file.
	* testsuite/newlib.locale/locale.exp: New file.
	* testsuite/newlib.string/string.exp: New file.
	* testsuite/newlib.string/tstring.c: New file.
@
text
@d48 1
a48 1
	"CC=$(CC)" \
@


1.11
log
@	* configure.in (CRT0_DIR): Set to libc/.
	(CRT1_DIR): Set to ${crt1_dir}/ if crt1_dir is non-empty.
	* Makefile.am: Change all occurrences of $(CRT0_DIR)/$(CRT0) to
	$(CRT0_DIR)$(CRT0) to prevent make warnings.  Likewise for
	$(CRT1_DIR)/$(CRT1).
	* libc/machine/xstormy16/Makefile.in: Regenerated.
	* libc/machine/xstormy16/aclocal.m4: Regenerated.
	* libc/machine/xstormy16/configure: Regenerated.
@
text
@d3 1
a3 1
AUTOMAKE_OPTIONS = cygnus
d279 64
@


1.10
log
@
2002-04-04  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am: Add support for installing crt1.o if one exists.
        * configure.host: Specify crt1.o for linux.
        * configure.in: Expose CRT1 and CRT1_DIR for Makefile.am to use.
        * Makefile.in: Regenerated.
        * configure: Ditto.
        * libc/include/sys/unistd.h (_SC_STREAM_MAX, _SC_PRIORITY_SCHEDULING):
        Added for non-Cygwin, non-RTEMS configurations.
        * libc/sys/linux/Makefile.am: Add support for crt1 and sysconf.
        * libc/sys/linux/Makefile.in: Regenerated.
        * libc/sys/linux/crt1.c: New empty file to override one defaulted
        by gcc.  This fixes problem with reconfiguring linux newlib build.
        * libc/sys/linux/sysconf.c: New file.
@
text
@d165 1
a165 1
crt0.o: $(CRT0_DIR)/$(CRT0)
d167 2
a168 2
	ln $(CRT0_DIR)/$(CRT0) $@@ >/dev/null 2>/dev/null \
	 || cp $(CRT0_DIR)/$(CRT0) $@@
d170 1
a170 1
$(CRT0_DIR)/$(CRT0): ; @@true
d172 1
a172 1
crt1.o: $(CRT1_DIR)/$(CRT1)
d174 2
a175 2
	ln $(CRT0_DIR)/$(CRT0) $@@ >/dev/null 2>/dev/null \
	 || cp $(CRT0_DIR)/$(CRT0) $@@
d177 1
a177 1
$(CRT1_DIR)/$(CRT1): ; @@true
@


1.9
log
@
2002-04-03  Jeff Johnston  <jjohnstn@@redhat.com>

	* configure.host: Add support for machine subdirectory of
	sys subdirectory.
	* configure.in: Add check for sys machine subdirectory.
	* Makefile.am: Ditto.
	* configure: Regenerated.
	* Makefile.in: Ditto.
	* libc/sys/linux/crt0.c: Moved to machine/i386 directory.
	* libc/sys/linux/sys/syscall.h: Ditto.
	* libc/sys/linux/sleep.c: New file.
	* libc/sys/linux/socket.c: Ditto.
	* libc/sys/linux/sockops.h: Ditto.
	* libc/sys/linux/stack.c: Ditto.
	* libc/sys/linux/usleep.c: Ditto.
	* libc/sys/linux/machine/Makefile.am: Ditto.
	* libc/sys/linux/machine/Makefile.in: Ditto.
	* libc/sys/linux/machine/aclocal.m4: Ditto.
	* libc/sys/linux/machine/configure: Ditto.
	* libc/sys/linux/machine/configure.in: Ditto.
	* libc/sys/linux/machine/i386/Makefile.am: Ditto.
	* libc/sys/linux/machine/i386/Makefile.in: Ditto.
	* libc/sys/linux/machine/i386/aclocal.m4: Ditto.
	* libc/sys/linux/machine/i386/configure: Ditto.
	* libc/sys/linux/machine/i386/configure.in: Ditto.
	* libc/sys/linux/machine/i386/crt0.c: Ditto.
	* libc/sys/linux/machine/i386/sigset.c: Ditto.
	* libc/sys/linux/machine/i386/sigstack.h: Ditto.
	* libc/sys/linux/machine/i386/socketcall.h: Ditto.
	* libc/sys/linux/machine/i386/syscall.h: Ditto.
	* libc/sys/linux/sys/select.h: Ditto.
	* libc/sys/linux/configure.in: Add support for machine directory.
	* libc/sys/linux/Makefile.am: Ditto plus add new files above.
	* libc/sys/linux/Makefile.in: Regenerated.
	* libc/sys/linux/configure: Ditto.
	* libc/sys/linux/brk.c: Use machine/syscall.h instead of sys/syscall.h.
	* libc/sys/linux/inode.c: Ditto.
	* libc/sys/linux/linux.c: Ditto.
	* libc/sys/linux/process.c: Ditto.
	* libc/sys/linux/systat.c: Ditto.
	* libc/sys/linux/time.c: Ditto.
	* libc/sys/linux/wait.c: Ditto.
	* libc/sys/linux/ids.c: Change header plus add setfsgid/setfsuid.
	* libc/sys/linux/io.c: Change header plus add readv/writev.
	* libc/sys/linux/signal.c: Change header plus change sigsuspend to
	use __sigsuspend syscall.
	* libc/sys/linux/select.c: Change header plus change select to
	use _newselect syscall.
	* libc/sys/linux/sys/cdefs.h: Add a number of standard definitions
	used by glibc header files.
	* libc/sys/linux/sys/types.h: Add __socklen_t and __useconds_t
	types.
@
text
@d82 1
a82 1
toollib_DATA = $(CRT0)
d171 8
@


1.8
log
@	* Makefile.am (DOCDIR): Force to empty string when doc
	directory is not present.
@
text
@d64 2
a65 1
SUBDIRS = libc libm $(DOCDIR) .
d73 2
a74 1
toollib_LTLIBRARIES = libm.la libc.la
d76 2
a77 1
toollib_LIBRARIES = libm.a libc.a
d115 2
a116 1
	$(SYS_OBJECTLIST)
d193 5
@


1.7
log
@	* Makefile.shared: New file.
	* libc/sys/linux/shared.ld: New file.
	* libm/machine/*: New files.
	* libm/machine/i386/*: New files.
	* Makefile.am: Add libtool support.  Change math and mathfp
	references to variables.
	* configure.host: Add variables for libtool support.  Add
	libm_machine_dir variable.
	* configure.in: Add objectlist variables, for libtool
	support.  Add CC_FOR_BUILD tests.
	* libc/Makefile.am: Add libtool support.  Change crt0.o
	reference to be a variable reference.
	* libc/configure.in: Add libtool support.  Change sublib
	names to be lib${subdir}.la when using libtool.
	* libc/ctype/Makefile.am: Add libtool support.
	* libc/errno/Makefile.am: Likewise.
	* libc/locale/Makefile.am: Likewise.
	* libc/machine/Makefile.am: Likewise.
	* libc/machine/configure.in: Likewise.
	* libc/machine/i386/Makefile.am: Likewise.
	* libc/machine/i386/configure.in: Likewise.
	* libc/misc/Makefile.am: Likewise.
	* libc/posix/Makefile.am: Likewise.
	* libc/reent/Makefile.am: Likewise.
	* libc/signal/Makefile.am: Likewise.
	* libc/stdio/Makefile.am: Likewise.
	* libc/stdlib/Makefile.am: Likewise.
	* libc/string/Makefile.am: Likewise.
	* libc/sys/Makefile.am: Likewise.
	* libc/sys/configure.in: Likewise.
	* libc/sys/linux/Makefile.am: Add libtool support.  Change
	awk reference to a variable reference.  Change signal.h
	reference to a variable reference.
	* libc/sys/linux/configure.in: Add libtool support.
	* libc/syscalls/Makefile.am: Likewise.
	* libc/time/Makefile.am: Likewise.
	* libc/unix/Makefile.am: Likewise.
	* libm/Makefile.am: Add libtool support.  Change math and
	mathfp references to variables.
	* libm/configure.in: Add libtool support.  Add
	LIBM_MACHINE_LIB variable.
	* libm/common/Makefile.am: Add libtool support.
	* libm/math/Makefile.am: Likewise.
	* libm/mathfp/Makefile.am: Likewise.
	Regenerate all Makefile.in, aclocal.m4, and configure.
@
text
@d60 2
@


1.6
log
@
2001-08-29  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am: Add check for ln failing when creating libg.a
        so that cp gets used as a backup.
        * Makefile.in: Regenerated.
@
text
@d13 8
d69 3
d73 4
d78 1
a78 1
noinst_DATA = stmp-targ-include
d84 53
a136 6
	s_isinf.o sf_isinf.o \
	s_isnan.o sf_isnan.o \
	s_ldexp.o sf_ldexp.o \
	s_frexp.o sf_frexp.o s_modf.o sf_modf.o \
	s_scalbn.o sf_scalbn.o s_finite.o sf_finite.o \
	s_copysign.o sf_copysign.o s_infconst.o
d157 2
d194 2
d198 1
@


1.5
log
@
2000-12-13  Jeff Johnston  <jjohnstn@@redhat.com>

        * Makefile.am: Fixed install-data-local target to use
        $(mkinstalldirs) for the installed header files to ensure
        the directories exist before copying.
        * Makefile.in: Regenerated.
@
text
@d84 1
a84 1
	ln libc.a libg.a
d131 1
a131 1
	ln $(DESTDIR)$(toollibdir)/libc.a $(DESTDIR)$(toollibdir)/libg.a
@


1.4
log
@
2000-12-08  Ralf Corsepius <corsepiu@@faw.uni-ulm.de>

        * Makefile.am: $(INSTALL), $(INSTALL_DATA), and $(INSTALL_PROGRAM)
        can be a relative path to $(top_srcdir)/install.sh so ensure the
        autoconf detected settings are properly passed recursively.
        Similarly, add AM_MAKEFLAGS to FLAGS_TO_PASS so they also get passed
        properly to subdirectories.
        * Makefile.in: Regenerated.
@
text
@d134 1
d138 1
d147 1
@


1.3
log
@* Makefile.am: Fix space vs. tab problem in install-data-local.
* Makefile.in: Regenerate.
* libc/include/_ansi.h (_EXFUN): Define specially for __CYGWIN__.
(_EXPARM): New macro for defining a function parameter.
* libc/include/stdlib.h: Use _EXPARM.
* libc/stdlib/mallocr.c: Don't build cfree for Cygwin.
@
text
@a21 4
	"INSTALL=$(INSTALL)" \
	"INSTALL_DATA=$(INSTALL_DATA)" \
	"INSTALL_PROGRAM=$(INSTALL_PROGRAM)" \
	"INSTALL_SCRIPT=$(INSTALL_SCRIPT)" \
d47 2
@


1.2
log
@
2000-08-31  Manfred Hollstein  <manfredh@@redhat.com>

        * Makefile.am (install-data-local): Use optional $(DESTDIR) where
        required, as documented in the gnu coding standards.
        * Makefile.in: Regenerate.
@
text
@d131 3
a133 3
install-data-local: install-toollibLIBRARIES
       rm -f $(DESTDIR)$(toollibdir)/libg.a
       ln $(DESTDIR)$(toollibdir)/libc.a $(DESTDIR)$(toollibdir)/libg.a
d137 1
a137 1
           $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/`basename $$i`; \
d140 1
a140 1
           $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/machine/`basename $$i`; \
d144 1
a144 1
             $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/machine/`basename $$i`; \
d148 1
a148 1
           $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/sys/`basename $$i`; \
d152 1
a152 1
             $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/sys/`basename $$i`; \
d157 1
a157 1
             $(INSTALL_DATA) $$i $(DESTDIR)$(tooldir)/include/`basename $$i`; \
@


1.1
log
@Initial revision
@
text
@d132 2
a133 2
	rm -f $(toollibdir)/libg.a
	ln $(toollibdir)/libc.a $(toollibdir)/libg.a
d137 1
a137 1
	    $(INSTALL_DATA) $$i $(tooldir)/include/`basename $$i`; \
d140 1
a140 1
	    $(INSTALL_DATA) $$i $(tooldir)/include/machine/`basename $$i`; \
d144 1
a144 1
	      $(INSTALL_DATA) $$i $(tooldir)/include/machine/`basename $$i`; \
d148 1
a148 1
	    $(INSTALL_DATA) $$i $(tooldir)/include/sys/`basename $$i`; \
d152 1
a152 1
	      $(INSTALL_DATA) $$i $(tooldir)/include/sys/`basename $$i`; \
d157 1
a157 1
	      $(INSTALL_DATA) $$i $(tooldir)/include/`basename $$i`; \
@


1.1.1.1
log
@import newlib-2000-02-17 snapshot
@
text
@@
