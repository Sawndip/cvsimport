head	1.3;
access;
symbols
	cygwin-1_7_35-release:1.3
	cygwin-1_7_34-release:1.3
	newlib-2_2_0:1.3.0.10
	cygwin-1_7_33-release:1.3
	cygwin-1_7_32-release:1.3
	cygwin-1_7_31-release:1.3
	cygwin-1_7_30-release:1.3
	cygwin-1_7_29-release:1.3
	cygwin-1_7_28-release:1.3
	newlib-2_1_0:1.3
	cygwin-1_7_27-release:1.3
	cygwin-1_7_26-release:1.3
	cygwin-1_7_25-release:1.3
	cygwin-1_7_24-release:1.3
	cygwin-1_7_23-release:1.3
	cygwin-1_7_22-release:1.3
	cygwin-1_7_21-release:1.3
	cygwin-1_7_20-release:1.3
	cygwin-1_7_19-release:1.3
	cygwin-64bit-postmerge:1.3
	cygwin-64bit-premerge-branch:1.3.0.8
	cygwin-64bit-premerge:1.3
	cygwin-1_7_18-release:1.3
	newlib-2_0_0:1.3
	cygwin-1_7_17-release:1.3
	cygwin-64bit-branch:1.3.0.6
	cygwin-1_7_16-release:1.3
	cygwin-1_7_15-release:1.3
	cygwin-1_7_14_2-release:1.3
	cygwin-1_7_14-release:1.3
	cygwin-1_7_12-release:1.3
	cygwin-1_7_11-release:1.3
	cygwin-1_7_10-release:1.3
	newlib-1_20_0:1.3
	cygwin-1_7_9-release:1.3
	cygwin-1_7_8-release:1.3
	newlib-1_19_0:1.3
	cygwin-1_7_7-release:1.3
	cygwin-1_7_5-release:1.3
	cygwin-1_7_4-release:1.3
	cygwin-1_7_3-release:1.3
	cygwin-1_7_2-release:1.3
	newlib-1_18_0:1.3
	cygwin-1_7_1-release:1.3
	newlib-1_17_0-arc:1.3.0.4
	binutils-arc-20080908-branch:1.3.0.2
	binutils-arc-20080908-branchpoint:1.3
	newlib-1_17_0:1.3
	newlib-1_16_0:1.2
	newlib-1_15_0:1.1.1.1
	newlib-csl-coldfire-4_1-32:1.1.1.1
	newlib-csl-sourcerygxx-4_1-32:1.1.1.1
	newlib-csl-innovasic-fido-3_4_4-33:1.1.1.1
	newlib-csl-coldfire-4_1-30:1.1.1.1
	newlib-csl-sourcerygxx-4_1-30:1.1.1.1
	newlib-csl-coldfire-4_1-28:1.1.1.1
	newlib-csl-sourcerygxx-4_1-28:1.1.1.1
	newlib-csl-arm-2006q3-27:1.1.1.1
	newlib-csl-sourcerygxx-4_1-27:1.1.1.1
	newlib-csl-arm-2006q3-26:1.1.1.1
	newlib-csl-sourcerygxx-4_1-26:1.1.1.1
	newlib-csl-sourcerygxx-4_1-24:1.1.1.1
	newlib-csl-sourcerygxx-4_1-23:1.1.1.1
	newlib-csl-sourcerygxx-4_1-21:1.1.1.1
	newlib-csl-arm-2006q3-21:1.1.1.1
	newlib-csl-arm-2006q3-19:1.1.1.1
	newlib-csl-sourcerygxx-4_1-19:1.1.1.1
	newlib-csl-sourcerygxx-4_1-18:1.1.1.1
	newlib-csl-sourcerygxx-3_4_4-25:1.1.1.1
	newlib-csl-sourcerygxx-4_1-17:1.1.1.1
	cr-0x5f1:1.1.1.1.0.6
	newlib-csl-sourcerygxx-4_1-14:1.1.1.1
	newlib-csl-sourcerygxx-4_1-13:1.1.1.1
	newlib-csl-sourcerygxx-4_1-12:1.1.1.1
	newlib-csl-sourcerygxx-4_1-9:1.1.1.1
	newlib-csl-sourcerygxx-4_1-8:1.1.1.1
	newlib-csl-sourcerygxx-4_1-7:1.1.1.1
	newlib-csl-arm-2006q1-6:1.1.1.1
	newlib-csl-sourcerygxx-4_1-6:1.1.1.1
	newlib-csl-sourcerygxx-4_1-5:1.1.1.1
	newlib-csl-sourcerygxx-4_1-4:1.1.1.1
	newlib-autotools-branch:1.1.1.1.0.4
	newlib-csl-20060320-branch:1.1.1.1.0.2
	newlib-csl-20060320-branchpoint:1.1.1.1
	newlib-1_14_0:1.1.1.1
	newlib-csl-arm-2005-q1b:1.1.1.1
	newlib-csl-arm-2005-q1a:1.1.1.1
	newlib-1_13_0:1.1.1.1
	csl-arm-2004-q3:1.1.1.1
	csl-arm-2004-q1a:1.1.1.1
	csl-arm-2004-q1:1.1.1.1
	newlib-1_12_0:1.1.1.1
	csl-arm-2003-q4:1.1.1.1
	w32api-2_2:1.1.1.1
	mingw-runtime-2_4:1.1.1.1
	newlib-1_11_0:1.1.1.1
	cygnus_cvs_20020108_pre:1.1.1.1
	newlib-1_10_0:1.1.1.1
	newlib-1_9_0:1.1.1.1
	newlib-2000-02-17:1.1.1.1
	SNAPSHOT:1.1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.3
date	2008.07.08.20.36.27;	author jjohnstn;	state Exp;
branches;
next	1.2;

1.2
date	2007.11.19.20.03.25;	author jjohnstn;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.17.19.39.47;	author cgf;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.02.17.19.39.47;	author cgf;	state Exp;
branches;
next	;


desc
@@


1.3
log
@
2008-07-08  Kenji Tanaka  <tanaka.ken2@@jp.panasonic.com>

        * libc/machine/mn10300/memset.S: Fix bug where return value is
        incorrectly set if number of bytes set is a multiple of 4.
@
text
@	.file "memset.S"

	.section .text
	.global  _memset
	.type	 _memset,@@function
_memset:
	movm  [d2,d3,a2,a3], (sp)
.Lend_of_prologue:
	mov   d0, d3
	mov   d1, d2
	mov   (28, sp),a1
	mov   d3, a0
#ifndef __OPTIMIZE_SIZE__
	cmp   3, a1
	bls   .L41
	btst  3, d3
	bne   .L41
	extbu d2
	mov   d2, d1
	asl   8, d1
	or    d2, d1
	mov   d1, d0
	asl   16, d0
	or    d0, d1
	cmp   15, a1
	bls   .L36
	setlb
	mov   d1, (a0)
	inc4  a0
	mov   d1, (a0)
	inc4  a0
	mov   d1, (a0)
	inc4  a0
	mov   d1, (a0)
	inc4  a0
	add  -16, a1
	cmp   15, a1
	lhi
.L36:
	cmp   3, a1
	bls   .L41
	setlb
	mov   d1, (a0)
	inc4  a0
	add   -4, a1
	cmp   3, a1
	lhi
.L41:
#endif
	cmp   0, a1
	beq   .Lepilogue
	setlb
	movbu d2, (a0)
	inc   a0
	sub   1, a1
	lne
.Lepilogue:
	mov d3,a0
	ret [d2,d3,a2,a3], 16
.Lend_of_memset:
	.size	 _memset, .Lend_of_memset - _memset

	.section	.debug_frame,"",@@progbits
.Lstart_of_debug_frame:
	# Common Information Entry (CIE)
	.4byte	.Lend_of_CIE - .Lstart_of_CIE	# CIE Length
.Lstart_of_CIE:
	.4byte	 0xffffffff			# CIE Identifier Tag
	.byte	 0x1				# CIE Version
	.ascii   "\0"				# CIE Augmentation
	.uleb128 0x1				# CIE Code Alignment Factor
	.sleb128 -4				# CIE Data Alignment Factor
	.byte	 0x32				# CIE RA Column
	.byte	 0xc				# DW_CFA_def_cfa
	.uleb128 0x9
	.uleb128 0x0
	.byte	 0xb2				# DW_CFA_offset, column 0x32
	.uleb128 0x0
	.align   2
.Lend_of_CIE:
	
	# Frame Description Entry (FDE)
	.4byte	.Lend_of_FDE - .Lstart_of_FDE	# FDE Length
.Lstart_of_FDE:
	.4byte	 .Lstart_of_debug_frame		# FDE CIE offset
	.4byte	 _memset			# FDE initial location
	.4byte	 .Lend_of_memset - _memset	# FDE address range
	.byte	 0x4				# DW_CFA_advance_loc4
	.4byte	 .Lend_of_prologue - _memset
	.byte	 0xe				# DW_CFA_def_cfa_offset
	.uleb128 0x4
	.byte	 0x87				# DW_CFA_offset, column 0x7
	.uleb128 0x1
	.align 2
.Lend_of_FDE:
@


1.2
log
@
2007-11-19  Nick Clifton  <nickc@@redhat.com>

        * libc/machine/mn10300/Makefile.am (CCASFLAGS): Add -Wa,--gdwarf-2.
        * libc/machine/mn10300/Makefile.in: Regenerate.
        * libc/machine/mn10300/memchar.S: Remove redundant labels.  Add
        .debug_frame section.
        * libc/machine/mn10300/memcmp.S: Likewise.
        * libc/machine/mn10300/memcpy.S: Likewise.
        * libc/machine/mn10300/memset.S: Likewise.
        * libc/machine/mn10300/strchr.S: Likewise.
        * libc/machine/mn10300/strcmp.S: Likewise.
        * libc/machine/mn10300/strcpy.S: Likewise.
        * libc/machine/mn10300/strlen.S: Likewise.
@
text
@d57 1
a58 1
.Lepilogue:
@


1.1
log
@Initial revision
@
text
@d4 1
a4 1
	.global _memset
d7 6
a12 5
	movm [d2,d3,a2,a3],(sp)
	mov d0,d3
	mov d1,d2
	mov (28,sp),a1
	mov d3,a0
d14 4
a17 4
	cmp 3,a1
	bls .L41
	btst 3,d3
	bne .L41
d19 8
a26 9
	mov d2,d1
	asl 8,d1
	or d2,d1
	mov d1,d0
	asl 16,d0
	or d0,d1
	cmp 15,a1
	bls .L36
.L33:
d28 10
a37 10
	mov d1,(a0)
	inc4 a0
	mov d1,(a0)
	inc4 a0
	mov d1,(a0)
	inc4 a0
	mov d1,(a0)
	inc4 a0
	add -16,a1
	cmp 15,a1
d40 2
a41 3
	cmp 3,a1
	bls .L41
.L37:
d43 4
a46 4
	mov d1,(a0)
	inc4 a0
	add -4,a1
	cmp 3,a1
d48 1
d50 2
a51 4
.L41:
	cmp 0,a1
	beq .L47
.L46:
d53 3
a55 3
	movbu d2,(a0)
	inc a0
	sub 1,a1
a56 1
.L47:
d58 38
a95 3
	ret [d2,d3,a2,a3],16
.Lfe1:
	.size	 _memset,.Lfe1-_memset
@


1.1.1.1
log
@import newlib-2000-02-17 snapshot
@
text
@@
