head	1.9;
access;
symbols
	sid-snapshot-20180601:1.9
	cgen-snapshot-20180601:1.9
	sid-snapshot-20180501:1.9
	cgen-snapshot-20180501:1.9
	sid-snapshot-20180401:1.9
	cgen-snapshot-20180401:1.9
	sid-snapshot-20180301:1.9
	cgen-snapshot-20180301:1.9
	sid-snapshot-20180201:1.9
	cgen-snapshot-20180201:1.9
	sid-snapshot-20180101:1.9
	cgen-snapshot-20180101:1.9
	sid-snapshot-20171201:1.9
	cgen-snapshot-20171201:1.9
	sid-snapshot-20171101:1.9
	cgen-snapshot-20171101:1.9
	sid-snapshot-20171001:1.9
	cgen-snapshot-20171001:1.9
	sid-snapshot-20170901:1.9
	cgen-snapshot-20170901:1.9
	sid-snapshot-20170801:1.9
	cgen-snapshot-20170801:1.9
	sid-snapshot-20170701:1.9
	cgen-snapshot-20170701:1.9
	sid-snapshot-20170601:1.9
	cgen-snapshot-20170601:1.9
	sid-snapshot-20170501:1.9
	cgen-snapshot-20170501:1.9
	sid-snapshot-20170401:1.9
	cgen-snapshot-20170401:1.9
	sid-snapshot-20170301:1.9
	cgen-snapshot-20170301:1.9
	sid-snapshot-20170201:1.9
	cgen-snapshot-20170201:1.9
	sid-snapshot-20170101:1.9
	cgen-snapshot-20170101:1.9
	sid-snapshot-20161201:1.9
	cgen-snapshot-20161201:1.9
	sid-snapshot-20161101:1.9
	cgen-snapshot-20161101:1.9
	sid-snapshot-20160901:1.9
	cgen-snapshot-20160901:1.9
	sid-snapshot-20160801:1.9
	cgen-snapshot-20160801:1.9
	sid-snapshot-20160701:1.9
	cgen-snapshot-20160701:1.9
	sid-snapshot-20160601:1.9
	cgen-snapshot-20160601:1.9
	sid-snapshot-20160501:1.9
	cgen-snapshot-20160501:1.9
	sid-snapshot-20160401:1.9
	cgen-snapshot-20160401:1.9
	sid-snapshot-20160301:1.9
	cgen-snapshot-20160301:1.9
	sid-snapshot-20160201:1.9
	cgen-snapshot-20160201:1.9
	sid-snapshot-20160101:1.9
	cgen-snapshot-20160101:1.9
	sid-snapshot-20151201:1.9
	cgen-snapshot-20151201:1.9
	sid-snapshot-20151101:1.9
	cgen-snapshot-20151101:1.9
	sid-snapshot-20151001:1.9
	cgen-snapshot-20151001:1.9
	sid-snapshot-20150901:1.9
	cgen-snapshot-20150901:1.9
	sid-snapshot-20150801:1.9
	cgen-snapshot-20150801:1.9
	sid-snapshot-20150701:1.9
	cgen-snapshot-20150701:1.9
	sid-snapshot-20150601:1.9
	cgen-snapshot-20150601:1.9
	sid-snapshot-20150501:1.9
	cgen-snapshot-20150501:1.9
	sid-snapshot-20150401:1.9
	cgen-snapshot-20150401:1.9
	cygwin-1_7_35-release:1.9
	sid-snapshot-20150301:1.9
	cgen-snapshot-20150301:1.9
	cygwin-1_7_34-release:1.9
	sid-snapshot-20150201:1.9
	cgen-snapshot-20150201:1.9
	sid-snapshot-20150101:1.9
	cgen-snapshot-20150101:1.9
	newlib-2_2_0:1.9.0.22
	sid-snapshot-20141201:1.9
	cgen-snapshot-20141201:1.9
	cygwin-1_7_33-release:1.9
	sid-snapshot-20141101:1.9
	cgen-snapshot-20141101:1.9
	sid-snapshot-20141001:1.9
	cgen-snapshot-20141001:1.9
	sid-snapshot-20140901:1.9
	cgen-snapshot-20140901:1.9
	cygwin-1_7_32-release:1.9
	sid-snapshot-20140801:1.9
	cgen-snapshot-20140801:1.9
	cygwin-1_7_31-release:1.9
	sid-snapshot-20140701:1.9
	cgen-snapshot-20140701:1.9
	sid-snapshot-20140601:1.9
	cgen-snapshot-20140601:1.9
	cygwin-1_7_30-release:1.9
	sid-snapshot-20140501:1.9
	cgen-snapshot-20140501:1.9
	cygwin-1_7_29-release:1.9
	sid-snapshot-20140401:1.9
	cgen-snapshot-20140401:1.9
	sid-snapshot-20140301:1.9
	cgen-snapshot-20140301:1.9
	cygwin-1_7_28-release:1.9
	sid-snapshot-20140201:1.9
	cgen-snapshot-20140201:1.9
	sid-snapshot-20140101:1.9
	cgen-snapshot-20140101:1.9
	newlib-2_1_0:1.9
	sid-snapshot-20131201:1.9
	cgen-snapshot-20131201:1.9
	cygwin-1_7_27-release:1.9
	cygwin-1_7_26-release:1.9
	sid-snapshot-20131101:1.9
	cgen-snapshot-20131101:1.9
	sid-snapshot-20131001:1.9
	cgen-snapshot-20131001:1.9
	binutils-2_24-branch:1.9.0.20
	binutils-2_24-branchpoint:1.9
	binutils-2_21_1:1.8
	sid-snapshot-20130901:1.9
	cgen-snapshot-20130901:1.9
	cygwin-1_7_25-release:1.9
	gdb_7_6_1-2013-08-30-release:1.9
	cygwin-1_7_24-release:1.9
	cygwin-1_7_23-release:1.9
	sid-snapshot-20130801:1.9
	cgen-snapshot-20130801:1.9
	cygwin-1_7_22-release:1.9
	cygwin-1_7_21-release:1.9
	sid-snapshot-20130701:1.9
	cgen-snapshot-20130701:1.9
	cygwin-1_7_20-release:1.9
	cygwin-1_7_19-release:1.9
	sid-snapshot-20130601:1.9
	cgen-snapshot-20130601:1.9
	sid-snapshot-20130501:1.9
	cgen-snapshot-20130501:1.9
	gdb_7_6-2013-04-26-release:1.9
	cygwin-64bit-postmerge:1.9
	cygwin-64bit-premerge-branch:1.9.0.18
	cygwin-64bit-premerge:1.9
	sid-snapshot-20130401:1.9
	cgen-snapshot-20130401:1.9
	binutils-2_23_2:1.9
	gdb_7_6-branch:1.9.0.16
	gdb_7_6-2013-03-12-branchpoint:1.9
	cygwin-1_7_18-release:1.9
	sid-snapshot-20130301:1.9
	cgen-snapshot-20130301:1.9
	sid-snapshot-20130201:1.9
	cgen-snapshot-20130201:1.9
	sid-snapshot-20130101:1.9
	cgen-snapshot-20130101:1.9
	newlib-2_0_0:1.9
	sid-snapshot-20121201:1.9
	cgen-snapshot-20121201:1.9
	gdb_7_5_1-2012-11-29-release:1.9
	binutils-2_23_1:1.9
	sid-snapshot-20121101:1.9
	cgen-snapshot-20121101:1.9
	binutils-2_23:1.9
	cygwin-1_7_17-release:1.9
	sid-snapshot-20121001:1.9
	cgen-snapshot-20121001:1.9
	sid-snapshot-20120901:1.9
	cgen-snapshot-20120901:1.9
	gdb_7_5-2012-08-17-release:1.9
	cygwin-64bit-branch:1.9.0.14
	sid-snapshot-20120801:1.9
	cgen-snapshot-20120801:1.9
	binutils-2_23-branch:1.9.0.12
	binutils-2_23-branchpoint:1.9
	cygwin-1_7_16-release:1.9
	gdb_7_5-branch:1.9.0.10
	gdb_7_5-2012-07-18-branchpoint:1.9
	sid-snapshot-20120701:1.9
	cgen-snapshot-20120701:1.9
	sid-snapshot-20120601:1.9
	cgen-snapshot-20120601:1.9
	cygwin-1_7_15-release:1.9
	sid-snapshot-20120501:1.9
	cgen-snapshot-20120501:1.9
	binutils-2_22_branch:1.9.0.8
	gdb_7_4_1-2012-04-26-release:1.9
	cygwin-1_7_14_2-release:1.9
	cygwin-1_7_14-release:1.9
	cygwin-1_7_12-release:1.9
	sid-snapshot-20120401:1.9
	cgen-snapshot-20120401:1.9
	sid-snapshot-20120301:1.9
	cgen-snapshot-20120301:1.9
	cygwin-1_7_11-release:1.9
	cygwin-1_7_10-release:1.9
	sid-snapshot-20120201:1.9
	cgen-snapshot-20120201:1.9
	gdb_7_4-2012-01-24-release:1.9
	sid-snapshot-20120101:1.9
	cgen-snapshot-20120101:1.9
	newlib-1_20_0:1.9
	gdb_7_4-branch:1.9.0.6
	gdb_7_4-2011-12-13-branchpoint:1.9
	sid-snapshot-20111201:1.9
	cgen-snapshot-20111201:1.9
	binutils-2_22:1.9
	sid-snapshot-20111101:1.9
	cgen-snapshot-20111101:1.9
	sid-snapshot-20111001:1.9
	cgen-snapshot-20111001:1.9
	binutils-2_22-branch:1.9.0.4
	binutils-2_22-branchpoint:1.9
	gdb_7_3_1-2011-09-04-release:1.9
	sid-snapshot-20110901:1.9
	cgen-snapshot-20110901:1.9
	sid-snapshot-20110801:1.9
	cgen-snapshot-20110801:1.9
	gdb_7_3-2011-07-26-release:1.9
	sid-snapshot-20110701:1.9
	cgen-snapshot-20110701:1.9
	sid-snapshot-20110601:1.9
	cgen-snapshot-20110601:1.9
	sid-snapshot-20110501:1.9
	cgen-snapshot-20110501:1.9
	gdb_7_3-branch:1.9.0.2
	gdb_7_3-2011-04-01-branchpoint:1.9
	sid-snapshot-20110401:1.9
	cgen-snapshot-20110401:1.9
	cygwin-1_7_9-release:1.9
	sid-snapshot-20110301:1.8
	cgen-snapshot-20110301:1.8
	cygwin-1_7_8-release:1.8
	sid-snapshot-20110201:1.8
	cgen-snapshot-20110201:1.8
	sid-snapshot-20110101:1.8
	cgen-snapshot-20110101:1.8
	newlib-1_19_0:1.8
	binutils-2_21:1.8
	sid-snapshot-20101201:1.8
	cgen-snapshot-20101201:1.8
	binutils-2_21-branch:1.8.0.4
	binutils-2_21-branchpoint:1.8
	sid-snapshot-20101101:1.8
	cgen-snapshot-20101101:1.8
	sid-snapshot-20101001:1.8
	cgen-snapshot-20101001:1.8
	binutils-2_20_1:1.6
	gdb_7_2-2010-09-02-release:1.8
	sid-snapshot-20100901:1.8
	cgen-snapshot-20100901:1.8
	cygwin-1_7_7-release:1.8
	sid-snapshot-20100801:1.8
	cgen-snapshot-20100801:1.8
	gdb_7_2-branch:1.8.0.2
	gdb_7_2-2010-07-07-branchpoint:1.8
	sid-snapshot-20100701:1.8
	cgen-snapshot-20100701:1.8
	sid-snapshot-20100601:1.6
	cgen-snapshot-20100601:1.6
	sid-snapshot-20100501:1.6
	cgen-snapshot-20100501:1.6
	cygwin-1_7_5-release:1.6
	cygwin-1_7_4-release:1.6
	sid-snapshot-20100401:1.6
	cgen-snapshot-20100401:1.6
	cygwin-1_7_3-release:1.6
	cygwin-1_7_2-release:1.6
	gdb_7_1-2010-03-18-release:1.6
	sid-snapshot-20100301:1.6
	cgen-snapshot-20100301:1.6
	gdb_7_1-branch:1.6.0.6
	gdb_7_1-2010-02-18-branchpoint:1.6
	sid-snapshot-20100201:1.6
	cgen-snapshot-20100201:1.6
	sid-snapshot-20100101:1.6
	cgen-snapshot-20100101:1.6
	gdb_7_0_1-2009-12-22-release:1.6
	newlib-1_18_0:1.6
	cygwin-1_7_1-release:1.6
	sid-snapshot-20091201:1.6
	cgen-snapshot-20091201:1.6
	sid-snapshot-20091101:1.6
	cgen-snapshot-20091101:1.6
	binutils-2_20:1.6
	gdb_7_0-2009-10-06-release:1.6
	sid-snapshot-20091001:1.6
	cgen-snapshot-20091001:1.6
	gdb_7_0-branch:1.6.0.4
	gdb_7_0-2009-09-16-branchpoint:1.6
	binutils-arc-20081103-branch:1.3.0.24
	binutils-arc-20081103-branchpoint:1.3
	newlib-1_17_0-arc:1.3.0.22
	binutils-2_20-branch:1.6.0.2
	binutils-2_20-branchpoint:1.6
	sid-snapshot-20090901:1.6
	cgen-snapshot-20090901:1.6
	sid-snapshot-20090801:1.4
	cgen-snapshot-20090801:1.4
	msnyder-checkpoint-072509-branch:1.3.0.20
	msnyder-checkpoint-072509-branchpoint:1.3
	sid-snapshot-20090701:1.3
	cgen-snapshot-20090701:1.3
	dje-cgen-play1-branch:1.3.0.18
	dje-cgen-play1-branchpoint:1.3
	cgen-1_1-branch:1.3.0.16
	cgen-1_1-branchpoint:1.3
	sid-snapshot-20090601:1.3
	cgen-snapshot-20090601:1.3
	sid-snapshot-20090501:1.3
	cgen-snapshot-20090501:1.3
	sid-snapshot-20090401:1.3
	cgen-snapshot-20090401:1.3
	binutils-arc-20080908-branch:1.3.0.14
	binutils-arc-20080908-branchpoint:1.3
	arc-20081103-branch:1.3.0.12
	arc-20081103-branchpoint:1.3
	sid-snapshot-20090301:1.3
	cgen-snapshot-20090301:1.3
	binutils-2_19_1:1.3
	sid-snapshot-20090201:1.3
	cgen-snapshot-20090201:1.3
	sid-snapshot-20090101:1.3
	cgen-snapshot-20090101:1.3
	reverse-20081226-branch:1.3.0.10
	reverse-20081226-branchpoint:1.3
	newlib-1_17_0:1.3
	sid-snapshot-20081201:1.3
	cgen-snapshot-20081201:1.3
	multiprocess-20081120-branch:1.3.0.8
	multiprocess-20081120-branchpoint:1.3
	sid-snapshot-20081101:1.3
	cgen-snapshot-20081101:1.3
	binutils-2_19:1.3
	sid-snapshot-20081001:1.3
	cgen-snapshot-20081001:1.3
	reverse-20080930-branch:1.3.0.6
	reverse-20080930-branchpoint:1.3
	binutils-2_19-branch:1.3.0.4
	binutils-2_19-branchpoint:1.3
	sid-snapshot-20080901:1.3
	cgen-snapshot-20080901:1.3
	sid-snapshot-20080801:1.3
	cgen-snapshot-20080801:1.3
	reverse-20080717-branch:1.3.0.2
	reverse-20080717-branchpoint:1.3
	sid-snapshot-20080701:1.3
	cgen-snapshot-20080701:1.3
	msnyder-reverse-20080609-branch:1.2.0.2
	msnyder-reverse-20080609-branchpoint:1.2
	sid-snapshot-20080601:1.2
	cgen-snapshot-20080601:1.2
	sid-snapshot-20080501:1.2
	cgen-snapshot-20080501:1.2
	binutils_latest_snapshot:1.9;
locks; strict;
comment	@# @;


1.9
date	2011.03.05.07.33.13;	author rwild;	state Exp;
branches;
next	1.8;

1.8
date	2010.06.10.16.09.45;	author bonzini;	state Exp;
branches;
next	1.7;

1.7
date	2010.06.03.06.33.10;	author rwild;	state Exp;
branches;
next	1.6;

1.6
date	2009.08.22.16.56.38;	author rwild;	state Exp;
branches;
next	1.5;

1.5
date	2009.08.19.22.21.10;	author rwild;	state Exp;
branches;
next	1.4;

1.4
date	2009.07.30.19.43.16;	author rwild;	state Exp;
branches;
next	1.3;

1.3
date	2008.06.17.23.14.40;	author rwild;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.23.10.24.41;	author bonzini;	state Exp;
branches;
next	1.1;

1.1
date	2008.04.18.11.07.31;	author bonzini;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Guard against M4 versions with a buggy strstr.

config/:
	* override.m4: Error out if a buggy M4 was detected, to
	avoid spurious diffs in generated files.
@
text
@dnl Fix Autoconf bugs by overriding broken internal Autoconf
dnl macros with backports of fixes from newer releases.
dnl
dnl The override bits of this file should be a no-op for the newest
dnl Autoconf version, which means they can be removed once the complete
dnl tree has moved to a new enough Autoconf version.
dnl
dnl The _GCC_AUTOCONF_VERSION_TEST ensures that exactly the desired
dnl Autoconf version is used.  It should be kept for consistency.

dnl Use ifdef/ifelse over m4_ifdef/m4_ifelse to be clean for 2.13.
ifdef([m4_PACKAGE_VERSION], [

dnl Provide m4_copy_force and m4_rename_force for old Autoconf versions.

m4_ifndef([m4_copy_force],
[m4_define([m4_copy_force],
[m4_ifdef([$2], [m4_undefine([$2])])m4_copy($@@)])])

m4_ifndef([m4_rename_force],
[m4_define([m4_rename_force],
[m4_ifdef([$2], [m4_undefine([$2])])m4_rename($@@)])])

dnl AC_DEFUN a commonly used macro so this file is picked up.
m4_copy([AC_PREREQ], [_AC_PREREQ])
AC_DEFUN([AC_PREREQ], [frob])
m4_copy_force([_AC_PREREQ], [AC_PREREQ])


dnl Ensure exactly this Autoconf version is used
m4_ifndef([_GCC_AUTOCONF_VERSION],
  [m4_define([_GCC_AUTOCONF_VERSION], [2.64])])

dnl Test for the exact version when AC_INIT is expanded.
dnl This allows to update the tree in steps (for testing)
dnl by putting
dnl   m4_define([_GCC_AUTOCONF_VERSION], [X.Y])
dnl in configure.ac before AC_INIT,
dnl without rewriting this file.
dnl Or for updating the whole tree at once with the definition above.
AC_DEFUN([_GCC_AUTOCONF_VERSION_CHECK],
[m4_if(m4_defn([_GCC_AUTOCONF_VERSION]),
  m4_defn([m4_PACKAGE_VERSION]), [],
  [m4_fatal([Please use exactly Autoconf ]_GCC_AUTOCONF_VERSION[ instead of ]m4_defn([m4_PACKAGE_VERSION])[.])])
])
m4_define([AC_INIT], m4_defn([AC_INIT])[
_GCC_AUTOCONF_VERSION_CHECK
])


dnl Ensure we do not use a buggy M4.
m4_if(m4_index([..wi.d.], [.d.]), [-1],
  [m4_fatal(m4_do([m4 with buggy strstr detected.  Please install
GNU M4 1.4.16 or newer and set the M4 environment variable]))])


dnl Fix 2.64 cross compile detection for AVR and RTEMS
dnl by not trying to compile fopen.
m4_if(m4_defn([m4_PACKAGE_VERSION]), [2.64],
  [m4_foreach([_GCC_LANG], [C, C++, Fortran, Fortran 77],
     [m4_define([_AC_LANG_IO_PROGRAM(]_GCC_LANG[)], m4_defn([AC_LANG_PROGRAM(]_GCC_LANG[)]))])])

m4_version_prereq([2.66],, [
dnl We need AC_CHECK_DECL which works for overloaded C++ functions.

# _AC_CHECK_DECL_BODY
# -------------------
# Shell function body for AC_CHECK_DECL.
m4_define([_AC_CHECK_DECL_BODY],
[  AS_LINENO_PUSH([$[]1])
  [as_decl_name=`echo $][2|sed 's/ *(.*//'`]
  [as_decl_use=`echo $][2|sed -e 's/(/((/' -e 's/)/) 0&/' -e 's/,/) 0& (/g'`]
  AC_CACHE_CHECK([whether $as_decl_name is declared], [$[]3],
  [AC_COMPILE_IFELSE([AC_LANG_PROGRAM([$[]4],
[@@%:@@ifndef $[]as_decl_name
@@%:@@ifdef __cplusplus
  (void) $[]as_decl_use;
@@%:@@else
  (void) $[]as_decl_name;
@@%:@@endif
@@%:@@endif
])],
		   [AS_VAR_SET([$[]3], [yes])],
		   [AS_VAR_SET([$[]3], [no])])])
  AS_LINENO_POP
])# _AC_CHECK_DECL_BODY

# _AC_CHECK_DECLS(SYMBOL, ACTION-IF_FOUND, ACTION-IF-NOT-FOUND,
#                 INCLUDES)
# -------------------------------------------------------------
# Helper to AC_CHECK_DECLS, which generates the check for a single
# SYMBOL with INCLUDES, performs the AC_DEFINE, then expands
# ACTION-IF-FOUND or ACTION-IF-NOT-FOUND.
m4_define([_AC_CHECK_DECLS],
[AC_CHECK_DECL([$1], [ac_have_decl=1], [ac_have_decl=0], [$4])]dnl
[AC_DEFINE_UNQUOTED(AS_TR_CPP(m4_bpatsubst(HAVE_DECL_[$1],[ *(.*])),
  [$ac_have_decl],
  [Define to 1 if you have the declaration of `$1',
   and to 0 if you don't.])]dnl
[m4_ifvaln([$2$3], [AS_IF([test $ac_have_decl = 1], [$2], [$3])])])

])

])
@


1.8
log
@2010-06-10  Paolo Bonzini  <bonzini@@gnu.org>

	* override.m4: Remove obsolete (<2.64) definitions.
@
text
@d51 6
@


1.7
log
@Import AC_CHECK_DECL for C++ fixes from git Autoconf.

config/:
	Sync from GCC:
	PR bootstrap/42798
	* override.m4 (_AC_CHECK_DECL_BODY, _AC_CHECK_DECLS): Import
	definitions from git Autoconf.
@
text
@d1 2
a2 6
dnl Fix Autoconf-2.59 bugs: by overriding broken internal
dnl Autoconf macros with backports of the 2.60+ fix.
dnl - AC_CONFIG_SUBDIRS whitespace mangling,
dnl - more lenient precious variable checks
dnl - better configure error message
dnl - reliance on non-Posix m4wrap (M4 1.6 or newer implement FIFO)
d11 3
d24 1
a24 11
dnl m4_PACKAGE_VERSION is an undocumented Autoconf macro.
dnl We use it because this fix is intended for 2.59 only.
dnl A feature test for the broken AC_CONFIG_SUBDIRS instead
dnl would be better but is tricky.
dnl
dnl Use ifdef/ifelse over m4_ifdef/m4_ifelse to be clean for 2.13.
dnl Redefine AC_CONFIG_SUBDIRS so aclocal pulls in this file
dnl when needed.

ifdef([m4_PACKAGE_VERSION],
[dnl AC_DEFUN a commonly used macro so this file is picked up.
a50 5
dnl Turn AC_DISABLE_OPTION_CHECKING into a no-op if not defined.
m4_ifndef([AC_DISABLE_OPTION_CHECKING],
  [m4_define([AC_DISABLE_OPTION_CHECKING])])


a56 203

m4_version_prereq([2.60],, [
dnl We use $ac_pwd in some of the overrides below; ensure its definition
m4_divert_push([PARSE_ARGS])dnl
ac_pwd=`pwd`
m4_divert_pop([PARSE_ARGS])dnl
])


m4_version_prereq([2.60],, [

# _AC_OUTPUT_SUBDIRS
# ------------------
# This is a subroutine of AC_OUTPUT, but it does not go into
# config.status, rather, it is called after running config.status.
m4_define([_AC_OUTPUT_SUBDIRS],
[
#
# CONFIG_SUBDIRS section, as fixed in confsubdir.m4.
#
if test "$no_recursion" != yes; then

  # Remove --cache-file and --srcdir arguments so they do not pile up.
  ac_sub_configure_args=
  ac_prev=
  eval "set x $ac_configure_args"
  shift
  for ac_arg
  do
    if test -n "$ac_prev"; then
      ac_prev=
      continue
    fi
    case $ac_arg in
    -cache-file | --cache-file | --cache-fil | --cache-fi \
    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
      ac_prev=cache_file ;;
    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* \
    | --c=*)
      ;;
    --config-cache | -C)
      ;;
    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
      ac_prev=srcdir ;;
    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
      ;;
    -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
      ac_prev=prefix ;;
    -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
      ;;
    *)
      case $ac_arg in
      *\'*) ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
      esac
      ac_sub_configure_args="$ac_sub_configure_args '$ac_arg'" ;;
    esac
  done

  # Always prepend --prefix to ensure using the same prefix
  # in subdir configurations.
  ac_arg="--prefix=$prefix"
  case $ac_arg in
  *\'*) ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
  esac
  ac_sub_configure_args="$ac_arg $ac_sub_configure_args"

  ac_popdir=`pwd`
  for ac_dir in : $subdirs; do test "x$ac_dir" = x: && continue

    # Do not complain, so a configure script can configure whichever
    # parts of a large source tree are present.
    test -d "$srcdir/$ac_dir" || continue

    AC_MSG_NOTICE([configuring in $ac_dir])
    AS_MKDIR_P(["$ac_dir"])
    _AC_SRCPATHS(["$ac_dir"])

    cd "$ac_dir"

    # Check for guested configure; otherwise get Cygnus style configure.
    if test -f "$ac_srcdir/configure.gnu"; then
      ac_sub_configure=$ac_srcdir/configure.gnu
    elif test -f "$ac_srcdir/configure"; then
      ac_sub_configure=$ac_srcdir/configure
    elif test -f "$ac_srcdir/configure.in"; then
      # This should be Cygnus configure.
      ac_sub_configure=$ac_aux_dir/configure
    else
      AC_MSG_WARN([no configuration information is in $ac_dir])
      ac_sub_configure=
    fi

    # The recursion is here.
    if test -n "$ac_sub_configure"; then
      # Make the cache file name correct relative to the subdirectory.
      case $cache_file in
      [[\\/]]* | ?:[[\\/]]* ) ac_sub_cache_file=$cache_file ;;
      *) # Relative path.
	ac_sub_cache_file=$ac_top_builddir$cache_file ;;
      esac

      AC_MSG_NOTICE([running $SHELL $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir])
      # The eval makes quoting arguments work.
      eval "\$SHELL \"\$ac_sub_configure\" $ac_sub_configure_args \
	   --cache-file=\"\$ac_sub_cache_file\" --srcdir=\"\$ac_srcdir\"" ||
	AC_MSG_ERROR([$ac_sub_configure failed for $ac_dir])
    fi

    cd "$ac_popdir"
  done
fi
])# _AC_OUTPUT_SUBDIRS
])

m4_version_prereq([2.63],, [

# _AC_ARG_VAR_VALIDATE
# --------------------
# The code is the same as autoconf 2.59, but with a more lenient check
# on precious variables and an output of pwd that have been added in
# autoconf 2.62.
m4_define([_AC_ARG_VAR_VALIDATE],
[m4_divert_text([INIT_PREPARE],
[# Check that the precious variables saved in the cache have kept the same
# value.
ac_cache_corrupted=false
for ac_var in `(set) 2>&1 |
	       sed -n 's/^ac_env_\([[a-zA-Z_0-9]]*\)_set=.*/\1/p'`; do
  eval ac_old_set=\$ac_cv_env_${ac_var}_set
  eval ac_new_set=\$ac_env_${ac_var}_set
  eval ac_old_val="\$ac_cv_env_${ac_var}_value"
  eval ac_new_val="\$ac_env_${ac_var}_value"
  case $ac_old_set,$ac_new_set in
    set,)
      AS_MESSAGE([error: `$ac_var' was set to `$ac_old_val' in the previous run], 2)
      ac_cache_corrupted=: ;;
    ,set)
      AS_MESSAGE([error: `$ac_var' was not set in the previous run], 2)
      ac_cache_corrupted=: ;;
    ,);;
    *)
      if test "x$ac_old_val" != "x$ac_new_val"; then
        # differences in whitespace do not lead to failure.
        ac_old_val_w=`echo x $ac_old_val`
        ac_new_val_w=`echo x $ac_new_val`
        if test "$ac_old_val_w" != "$ac_new_val_w"; then
          AS_MESSAGE([error: `$ac_var' has changed since the previous run:], 2)
          ac_cache_corrupted=:
        else
          AS_MESSAGE([warning: ignoring whitespace changes in `$ac_var' since the previous run:], 2)
          eval $ac_var=\$ac_old_val
        fi
        AS_MESSAGE([  former value:  `$ac_old_val'], 2)
        AS_MESSAGE([  current value: `$ac_new_val'], 2)
      fi;;
  esac
  # Pass precious variables to config.status.
  if test "$ac_new_set" = set; then
    case $ac_new_val in
dnl If you change this globbing pattern, test it on an old shell --
dnl it's sensitive.  Putting any kind of quote in it causes syntax errors.
[    *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)]
      ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
    *) ac_arg=$ac_var=$ac_new_val ;;
    esac
    case " $ac_configure_args " in
      *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
      *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
    esac
  fi
done
if $ac_cache_corrupted; then
  AS_MESSAGE([error: in `$ac_pwd':], 2)
  AS_MESSAGE([error: changes in the environment can compromise the build], 2)
  AS_ERROR([run `make distclean' and/or `rm $cache_file' and start over])
fi])dnl
])# _AC_ARG_VAR_VALIDATE
])

m4_version_prereq([2.63],, [

# AC_MSG_FAILURE(ERROR, [EXIT-STATUS = 1])
# ----------------------------------------
# This is the same code as in 2.59 and 2.61, except it also outputs pwd.
m4_define([AC_MSG_FAILURE],
[{ AS_MESSAGE([error: in `$ac_pwd':], 2)
AC_MSG_ERROR([$1
See `config.log' for more details.], [$2]); }])
])
])

m4_version_prereq([2.60],, [
dnl M4 1.6 and newer implement m4wrap using FIFO semantics, as required
dnl by Posix; earlier versions used LIFO semantics.  Unfortunately,
dnl Autoconf versions before 2.60 require those LIFO semantics, so
dnl make sure to give it to them.
m4_define([m4_wrap], [m4_ifdef([_$0_text],
  [m4_define([_$0_text], [$1]m4_defn([_$0_text]))],
  [m4_define([_$0_text], [$1])m4_builtin([m4wrap],
    [m4_default(m4_defn([_$0_text])m4_undefine([_$0_text]))])])])
])

d97 2
@


1.6
log
@Regenerate tree using Autoconf 2.64 and Automake 1.11.

config/:
	* override.m4 (_GCC_AUTOCONF_VERSION): Bump to 2.64.

/:
	* configure: Regenerate.

etc/:
	* configure: Regenerate.

sim/common/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/iq2000/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/d10v/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/igen/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/m32r/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/frv/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/:
	* avr/config.in: Regenerate.
	* avr/configure: Likewise.
	* configure: Likewise.
	* cris/config.in: Likewise.
	* cris/configure: Likewise.

sim/h8300/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/mn10300/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/ppc/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/erc32/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/arm/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/m68hc11/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/lm32/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/sh64/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/v850/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/cr16/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/moxie/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/m32c/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/mips/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/mcore/:
	* config.in: Regenerate.
	* configure: Likewise.

sim/testsuite/d10v-elf/:
	* configure: Regenerate.

sim/testsuite/:
	* configure: Regenerate.

sim/testsuite/frv-elf/:
	* configure: Regenerate.

sim/testsuite/m32r-elf/:
	* configure: Regenerate.

sim/testsuite/mips64el-elf/:
	* configure: Regenerate.

sim/sh/:
	* config.in: Regenerate.
	* configure: Likewise.

gold/:
	* Makefile.in: Regenerate.
	* aclocal.m4: Likewise.
	* config.in: Likewise.
	* configure: Likewise.
	* testsuite/Makefile.in: Likewise.

gprof/:
	* Makefile.in: Regenerate.
	* aclocal.m4: Likewise.
	* configure: Likewise.
	* gconfig.in: Likewise.

opcodes/:
	* Makefile.in: Regenerate.
	* aclocal.m4: Likewise.
	* config.in: Likewise.
	* configure: Likewise.

gas/:
	* Makefile.in: Regenerate.
	* aclocal.m4: Likewise.
	* config.in: Likewise.
	* configure: Likewise.
	* doc/Makefile.in: Likewise.

ld/:
	* Makefile.in: Regenerate.
	* aclocal.m4: Likewise.
	* config.in: Likewise.
	* configure: Likewise.

gdb/:
	* aclocal.m4: Regenerate.
	* config.in: Likewise.
	* configure: Likewise.
	* gnulib/Makefile.in: Likewise.

gdb/doc/:
	* configure: Regenerate.

gdb/gdbserver/:
	* aclocal.m4: Regenerate.
	* config.in: Likewise.
	* configure: Likewise.

gdb/testsuite/:
	* configure: Regenerate.
	* gdb.hp/configure: Likewise.
	* gdb.hp/gdb.aCC/configure: Likewise.
	* gdb.hp/gdb.base-hp/configure: Likewise.
	* gdb.hp/gdb.compat/configure: Likewise.
	* gdb.hp/gdb.defects/configure: Likewise.
	* gdb.hp/gdb.objdbg/configure: Likewise.
	* gdb.stabs/configure: Likewise.

binutils/:
	* Makefile.in: Regenerate.
	* aclocal.m4: Likewise.
	* config.in: Likewise.
	* configure: Likewise.
	* doc/Makefile.in: Likewise.

bfd/:
	* Makefile.in: Regenerate.
	* aclocal.m4: Likewise.
	* config.in: Likewise.
	* configure: Likewise.

bfd/doc/:
	* Makefile.in: Regenerate.

readline/:
	* configure: Regenerate.

readline/examples/rlfe/:
	* configure: Regenerate.
@
text
@d275 41
@


1.5
log
@Disable option checking in the toplevel, avoid 2.64 fopen glitch.

/:
	* configure.ac: Call AC_DISABLE_OPTION_CHECKING.
	(baseargs): Add --disable-option-checking.
	* configure: Regenerate.

config/:
	* override.m4 (AC_DISABLE_OPTION_CHECKING): Define to be
	empty if not defined, to avoid error with 2.59.
	(_AC_LANG_IO_PROGRAM): When the Autoconf version is exactly
	2.64, avoid per-language instances to drop fopen from test
	program.
@
text
@d43 1
a43 1
  [m4_define([_GCC_AUTOCONF_VERSION], [2.59])])
@


1.4
log
@config/
	* extensions.m4 (AC_USE_SYSTEM_EXTENSIONS): Do not expand
	for Autoconf 2.62 or newer.
	* tls.m4 (GCC_CHECK_TLS): Fix m4 quotation.
	* no-executables.m4 (_AC_COMPILER_EXEEXT): Fix m4 quotation.
	* override.m4 (m4_copy_force, m4_rename_force): Provide
	macros if not defined.
	(AC_PREREQ): Use m4_copy_force.

readline/examples/rlfe/
	* configure.in: Correctly quote AC_PROGRAM_SOURCE definition.
@
text
@d61 13
@


1.3
log
@	* configure: Regenerate.

config/
	* override.m4: Use m4_version_prereq throughout.
	(_AC_ARG_VAR_VALIDATE, AC_MSG_FAILURE): Backport from git
	Autoconf: output pwd along with fatal errors, so the right
	config.log file is hinted at more prominently.
	(PARSE_ARGS): Push setting of ac_pwd in this diversion.
	(_GCC_AUTOCONF_VERSION): New, define to 2.59 if not defined.
	(_GCC_AUTOCONF_VERSION_CHECK): New macro, require use of Autoconf
	version _GCC_AUTOCONF_VERSION throughout the tree.
	(m4_wrap): New override, fix for Posix semantics of m4wrap.

binutils/
	* configure: Regenerate.

opcodes/
	* configure: Regenerate.

bfd/
	* configure: Regenerate.

gas/
	* configure: Regenerate.

gprof/
	* configure: Regenerate.

ld/
	* config.in: Regenerate.
	* configure: Regenerate.
@
text
@d15 10
d38 1
a38 1
m4_copy([_AC_PREREQ], [AC_PREREQ])
@


1.2
log
@2008-04-23  Paolo Bonzini  <bonzini@@gnu.org>

	* confsubdir.m4: Remove.
	* override.m4: Apply _AC_ARG_VALIDATE fix to all versions
	but 2.62.
@
text
@d5 2
d8 6
a13 3
dnl This file should be a no-op for Autoconf versions != 2.59.
dnl It can be removed once the complete tree has moved to a
dnl newer Autoconf version.
d30 30
a59 1
ifelse(m4_PACKAGE_VERSION, [2.59], [
d165 1
a165 1
ifelse(m4_PACKAGE_VERSION, [2.62],, [
d170 2
a171 1
# on precious variables that has been added in autoconf 2.62.
d173 1
d223 1
d226 1
a226 1
fi
d228 24
a251 1
])])
@


1.1
log
@2008-04-18  Paolo Bonzini  <bonzini@@gnu.org>

	Sync with gcc:
	2008-04-18  Paolo Bonzini  <bonzini@@gnu.org>

	PR bootstrap/35457
	* configure.ac: Include override.m4.
	* configure: Regenerate.

	2008-04-18  Paolo Bonzini  <bonzini@@gnu.org>

        * Makefile.tpl (restrap): Call `make all' using double-colon rules.
        * Makefile.in: Regenerate.

	2008-04-11  Eric B. Weddington  <eweddington@@cso.atmel.com>

        * configure.ac: Do not build libssp for the AVR.
        * configure: Regenerate.

config:
2008-04-18  Paolo Bonzini  <bonzini@@gnu.org>

	PR bootstrap/35457

	* override.m4: Add this.  Make sure aclocal always picks it.
	Add more lenient precious variable check, backported from
	autoconf trunk.
@
text
@d20 1
a20 3
[ifelse(m4_PACKAGE_VERSION, [2.59], [

dnl AC_DEFUN a commonly used macro so this file is picked up.
d25 2
a26 1
dnl Override the broken macro.
d129 3
@

