head	1.5;
access;
symbols
	sid-snapshot-20180601:1.5
	cgen-snapshot-20180601:1.5
	sid-snapshot-20180501:1.5
	cgen-snapshot-20180501:1.5
	sid-snapshot-20180401:1.5
	cgen-snapshot-20180401:1.5
	sid-snapshot-20180301:1.5
	cgen-snapshot-20180301:1.5
	sid-snapshot-20180201:1.5
	cgen-snapshot-20180201:1.5
	sid-snapshot-20180101:1.5
	cgen-snapshot-20180101:1.5
	sid-snapshot-20171201:1.5
	cgen-snapshot-20171201:1.5
	sid-snapshot-20171101:1.5
	cgen-snapshot-20171101:1.5
	sid-snapshot-20171001:1.5
	cgen-snapshot-20171001:1.5
	sid-snapshot-20170901:1.5
	cgen-snapshot-20170901:1.5
	sid-snapshot-20170801:1.5
	cgen-snapshot-20170801:1.5
	sid-snapshot-20170701:1.5
	cgen-snapshot-20170701:1.5
	sid-snapshot-20170601:1.5
	cgen-snapshot-20170601:1.5
	sid-snapshot-20170501:1.5
	cgen-snapshot-20170501:1.5
	sid-snapshot-20170401:1.5
	cgen-snapshot-20170401:1.5
	sid-snapshot-20170301:1.5
	cgen-snapshot-20170301:1.5
	sid-snapshot-20170201:1.5
	cgen-snapshot-20170201:1.5
	sid-snapshot-20170101:1.5
	cgen-snapshot-20170101:1.5
	sid-snapshot-20161201:1.5
	cgen-snapshot-20161201:1.5
	sid-snapshot-20161101:1.5
	cgen-snapshot-20161101:1.5
	sid-snapshot-20160901:1.5
	cgen-snapshot-20160901:1.5
	sid-snapshot-20160801:1.5
	cgen-snapshot-20160801:1.5
	sid-snapshot-20160701:1.5
	cgen-snapshot-20160701:1.5
	sid-snapshot-20160601:1.5
	cgen-snapshot-20160601:1.5
	sid-snapshot-20160501:1.5
	cgen-snapshot-20160501:1.5
	sid-snapshot-20160401:1.5
	cgen-snapshot-20160401:1.5
	sid-snapshot-20160301:1.5
	cgen-snapshot-20160301:1.5
	sid-snapshot-20160201:1.5
	cgen-snapshot-20160201:1.5
	sid-snapshot-20160101:1.5
	cgen-snapshot-20160101:1.5
	sid-snapshot-20151201:1.5
	cgen-snapshot-20151201:1.5
	sid-snapshot-20151101:1.5
	cgen-snapshot-20151101:1.5
	sid-snapshot-20151001:1.5
	cgen-snapshot-20151001:1.5
	sid-snapshot-20150901:1.5
	cgen-snapshot-20150901:1.5
	sid-snapshot-20150801:1.5
	cgen-snapshot-20150801:1.5
	sid-snapshot-20150701:1.5
	cgen-snapshot-20150701:1.5
	sid-snapshot-20150601:1.5
	cgen-snapshot-20150601:1.5
	sid-snapshot-20150501:1.5
	cgen-snapshot-20150501:1.5
	sid-snapshot-20150401:1.5
	cgen-snapshot-20150401:1.5
	sid-snapshot-20150301:1.5
	cgen-snapshot-20150301:1.5
	sid-snapshot-20150201:1.5
	cgen-snapshot-20150201:1.5
	sid-snapshot-20150101:1.5
	cgen-snapshot-20150101:1.5
	sid-snapshot-20141201:1.5
	cgen-snapshot-20141201:1.5
	sid-snapshot-20141101:1.5
	cgen-snapshot-20141101:1.5
	sid-snapshot-20141001:1.5
	cgen-snapshot-20141001:1.5
	sid-snapshot-20140901:1.5
	cgen-snapshot-20140901:1.5
	sid-snapshot-20140801:1.5
	cgen-snapshot-20140801:1.5
	sid-snapshot-20140701:1.5
	cgen-snapshot-20140701:1.5
	sid-snapshot-20140601:1.5
	cgen-snapshot-20140601:1.5
	sid-snapshot-20140501:1.5
	cgen-snapshot-20140501:1.5
	sid-snapshot-20140401:1.5
	cgen-snapshot-20140401:1.5
	sid-snapshot-20140301:1.5
	cgen-snapshot-20140301:1.5
	sid-snapshot-20140201:1.5
	cgen-snapshot-20140201:1.5
	sid-snapshot-20140101:1.5
	cgen-snapshot-20140101:1.5
	sid-snapshot-20131201:1.5
	cgen-snapshot-20131201:1.5
	sid-snapshot-20131101:1.5
	cgen-snapshot-20131101:1.5
	sid-snapshot-20131001:1.5
	cgen-snapshot-20131001:1.5
	binutils-2_24-branch:1.5.0.22
	binutils-2_24-branchpoint:1.5
	binutils-2_21_1:1.5
	sid-snapshot-20130901:1.5
	cgen-snapshot-20130901:1.5
	gdb_7_6_1-2013-08-30-release:1.5
	sid-snapshot-20130801:1.5
	cgen-snapshot-20130801:1.5
	sid-snapshot-20130701:1.5
	cgen-snapshot-20130701:1.5
	sid-snapshot-20130601:1.5
	cgen-snapshot-20130601:1.5
	sid-snapshot-20130501:1.5
	cgen-snapshot-20130501:1.5
	gdb_7_6-2013-04-26-release:1.5
	sid-snapshot-20130401:1.5
	cgen-snapshot-20130401:1.5
	binutils-2_23_2:1.5
	gdb_7_6-branch:1.5.0.20
	gdb_7_6-2013-03-12-branchpoint:1.5
	sid-snapshot-20130301:1.5
	cgen-snapshot-20130301:1.5
	sid-snapshot-20130201:1.5
	cgen-snapshot-20130201:1.5
	sid-snapshot-20130101:1.5
	cgen-snapshot-20130101:1.5
	sid-snapshot-20121201:1.5
	cgen-snapshot-20121201:1.5
	gdb_7_5_1-2012-11-29-release:1.5
	binutils-2_23_1:1.5
	sid-snapshot-20121101:1.5
	cgen-snapshot-20121101:1.5
	binutils-2_23:1.5
	sid-snapshot-20121001:1.5
	cgen-snapshot-20121001:1.5
	sid-snapshot-20120901:1.5
	cgen-snapshot-20120901:1.5
	gdb_7_5-2012-08-17-release:1.5
	sid-snapshot-20120801:1.5
	cgen-snapshot-20120801:1.5
	binutils-2_23-branch:1.5.0.18
	binutils-2_23-branchpoint:1.5
	gdb_7_5-branch:1.5.0.16
	gdb_7_5-2012-07-18-branchpoint:1.5
	sid-snapshot-20120701:1.5
	cgen-snapshot-20120701:1.5
	sid-snapshot-20120601:1.5
	cgen-snapshot-20120601:1.5
	sid-snapshot-20120501:1.5
	cgen-snapshot-20120501:1.5
	binutils-2_22_branch:1.5.0.14
	gdb_7_4_1-2012-04-26-release:1.5
	sid-snapshot-20120401:1.5
	cgen-snapshot-20120401:1.5
	sid-snapshot-20120301:1.5
	cgen-snapshot-20120301:1.5
	sid-snapshot-20120201:1.5
	cgen-snapshot-20120201:1.5
	gdb_7_4-2012-01-24-release:1.5
	sid-snapshot-20120101:1.5
	cgen-snapshot-20120101:1.5
	gdb_7_4-branch:1.5.0.12
	gdb_7_4-2011-12-13-branchpoint:1.5
	sid-snapshot-20111201:1.5
	cgen-snapshot-20111201:1.5
	binutils-2_22:1.5
	sid-snapshot-20111101:1.5
	cgen-snapshot-20111101:1.5
	sid-snapshot-20111001:1.5
	cgen-snapshot-20111001:1.5
	binutils-2_22-branch:1.5.0.10
	binutils-2_22-branchpoint:1.5
	gdb_7_3_1-2011-09-04-release:1.5
	sid-snapshot-20110901:1.5
	cgen-snapshot-20110901:1.5
	sid-snapshot-20110801:1.5
	cgen-snapshot-20110801:1.5
	gdb_7_3-2011-07-26-release:1.5
	sid-snapshot-20110701:1.5
	cgen-snapshot-20110701:1.5
	sid-snapshot-20110601:1.5
	cgen-snapshot-20110601:1.5
	sid-snapshot-20110501:1.5
	cgen-snapshot-20110501:1.5
	gdb_7_3-branch:1.5.0.8
	gdb_7_3-2011-04-01-branchpoint:1.5
	sid-snapshot-20110401:1.5
	cgen-snapshot-20110401:1.5
	sid-snapshot-20110301:1.5
	cgen-snapshot-20110301:1.5
	sid-snapshot-20110201:1.5
	cgen-snapshot-20110201:1.5
	sid-snapshot-20110101:1.5
	cgen-snapshot-20110101:1.5
	binutils-2_21:1.5
	sid-snapshot-20101201:1.5
	cgen-snapshot-20101201:1.5
	binutils-2_21-branch:1.5.0.6
	binutils-2_21-branchpoint:1.5
	sid-snapshot-20101101:1.5
	cgen-snapshot-20101101:1.5
	sid-snapshot-20101001:1.5
	cgen-snapshot-20101001:1.5
	binutils-2_20_1:1.4
	gdb_7_2-2010-09-02-release:1.5
	sid-snapshot-20100901:1.5
	cgen-snapshot-20100901:1.5
	sid-snapshot-20100801:1.5
	cgen-snapshot-20100801:1.5
	gdb_7_2-branch:1.5.0.4
	gdb_7_2-2010-07-07-branchpoint:1.5
	sid-snapshot-20100701:1.5
	cgen-snapshot-20100701:1.5
	sid-snapshot-20100601:1.5
	cgen-snapshot-20100601:1.5
	sid-snapshot-20100501:1.5
	cgen-snapshot-20100501:1.5
	sid-snapshot-20100401:1.5
	cgen-snapshot-20100401:1.5
	gdb_7_1-2010-03-18-release:1.5
	sid-snapshot-20100301:1.5
	cgen-snapshot-20100301:1.5
	gdb_7_1-branch:1.5.0.2
	gdb_7_1-2010-02-18-branchpoint:1.5
	sid-snapshot-20100201:1.4
	cgen-snapshot-20100201:1.4
	sid-snapshot-20100101:1.4
	cgen-snapshot-20100101:1.4
	gdb_7_0_1-2009-12-22-release:1.4
	sid-snapshot-20091201:1.4
	cgen-snapshot-20091201:1.4
	sid-snapshot-20091101:1.4
	cgen-snapshot-20091101:1.4
	binutils-2_20:1.4
	gdb_7_0-2009-10-06-release:1.4
	sid-snapshot-20091001:1.4
	cgen-snapshot-20091001:1.4
	gdb_7_0-branch:1.4.0.4
	gdb_7_0-2009-09-16-branchpoint:1.4
	arc-sim-20090309:1.3
	binutils-arc-20081103-branch:1.3.0.32
	binutils-arc-20081103-branchpoint:1.3
	binutils-2_20-branch:1.4.0.2
	binutils-2_20-branchpoint:1.4
	sid-snapshot-20090901:1.3
	cgen-snapshot-20090901:1.3
	sid-snapshot-20090801:1.3
	cgen-snapshot-20090801:1.3
	msnyder-checkpoint-072509-branch:1.3.0.30
	msnyder-checkpoint-072509-branchpoint:1.3
	sid-snapshot-20090701:1.3
	cgen-snapshot-20090701:1.3
	dje-cgen-play1-branch:1.3.0.28
	dje-cgen-play1-branchpoint:1.3
	cgen-1_1-branch:1.3.0.26
	cgen-1_1-branchpoint:1.3
	sid-snapshot-20090601:1.3
	cgen-snapshot-20090601:1.3
	sid-snapshot-20090501:1.3
	cgen-snapshot-20090501:1.3
	sid-snapshot-20090401:1.3
	cgen-snapshot-20090401:1.3
	arc-20081103-branch:1.3.0.24
	arc-20081103-branchpoint:1.3
	arc-insight_6_8-branch:1.3.0.22
	arc-insight_6_8-branchpoint:1.3
	insight_6_8-branch:1.3.0.20
	insight_6_8-branchpoint:1.3
	sid-snapshot-20090301:1.3
	cgen-snapshot-20090301:1.3
	binutils-2_19_1:1.3
	sid-snapshot-20090201:1.3
	cgen-snapshot-20090201:1.3
	sid-snapshot-20090101:1.3
	cgen-snapshot-20090101:1.3
	reverse-20081226-branch:1.3.0.18
	reverse-20081226-branchpoint:1.3
	sid-snapshot-20081201:1.3
	cgen-snapshot-20081201:1.3
	multiprocess-20081120-branch:1.3.0.16
	multiprocess-20081120-branchpoint:1.3
	sid-snapshot-20081101:1.3
	cgen-snapshot-20081101:1.3
	binutils-2_19:1.3
	sid-snapshot-20081001:1.3
	cgen-snapshot-20081001:1.3
	reverse-20080930-branch:1.3.0.14
	reverse-20080930-branchpoint:1.3
	binutils-2_19-branch:1.3.0.12
	binutils-2_19-branchpoint:1.3
	sid-snapshot-20080901:1.3
	cgen-snapshot-20080901:1.3
	sid-snapshot-20080801:1.3
	cgen-snapshot-20080801:1.3
	reverse-20080717-branch:1.3.0.10
	reverse-20080717-branchpoint:1.3
	sid-snapshot-20080701:1.3
	cgen-snapshot-20080701:1.3
	msnyder-reverse-20080609-branch:1.3.0.8
	msnyder-reverse-20080609-branchpoint:1.3
	drow-reverse-20070409-branch:1.2.0.20
	drow-reverse-20070409-branchpoint:1.2
	sid-snapshot-20080601:1.3
	cgen-snapshot-20080601:1.3
	sid-snapshot-20080501:1.3
	cgen-snapshot-20080501:1.3
	sid-snapshot-20080403:1.3
	sid-snapshot-20080401:1.3
	cgen-snapshot-20080401:1.3
	gdb_6_8-2008-03-27-release:1.3
	sid-snapshot-20080301:1.3
	cgen-snapshot-20080301:1.3
	gdb_6_8-branch:1.3.0.6
	gdb_6_8-2008-02-26-branchpoint:1.3
	sid-snapshot-20080201:1.3
	cgen-snapshot-20080201:1.3
	sid-snapshot-20080101:1.3
	cgen-snapshot-20080101:1.3
	sid-snapshot-20071201:1.3
	cgen-snapshot-20071201:1.3
	sid-snapshot-20071101:1.3
	cgen-snapshot-20071101:1.3
	gdb_6_7_1-2007-10-29-release:1.3
	gdb_6_7-2007-10-10-release:1.3
	sid-snapshot-20071001:1.3
	cgen-snapshot-20071001:1.3
	gdb_6_7-branch:1.3.0.4
	gdb_6_7-2007-09-07-branchpoint:1.3
	binutils-2_18:1.3
	binutils-2_18-branch:1.3.0.2
	binutils-2_18-branchpoint:1.3
	insight_6_6-20070208-release:1.2
	binutils-csl-coldfire-4_1-32:1.2
	binutils-csl-sourcerygxx-4_1-32:1.2
	gdb_6_6-2006-12-18-release:1.2
	binutils-csl-innovasic-fido-3_4_4-33:1.2
	binutils-csl-coldfire-4_1-30:1.2
	binutils-csl-sourcerygxx-4_1-30:1.2
	binutils-csl-coldfire-4_1-28:1.2
	binutils-csl-sourcerygxx-4_1-29:1.2
	binutils-csl-sourcerygxx-4_1-28:1.2
	gdb_6_6-branch:1.2.0.18
	gdb_6_6-2006-11-15-branchpoint:1.2
	binutils-csl-arm-2006q3-27:1.2
	binutils-csl-sourcerygxx-4_1-27:1.2
	binutils-csl-arm-2006q3-26:1.2
	binutils-csl-sourcerygxx-4_1-26:1.2
	binutils-csl-sourcerygxx-4_1-25:1.2
	binutils-csl-sourcerygxx-4_1-24:1.2
	binutils-csl-sourcerygxx-4_1-23:1.2
	insight_6_5-20061003-release:1.2
	gdb-csl-symbian-6_4_50_20060226-12:1.1
	binutils-csl-sourcerygxx-4_1-21:1.2
	binutils-csl-arm-2006q3-21:1.2
	binutils-csl-sourcerygxx-4_1-22:1.2
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.2
	binutils-csl-sourcerygxx-4_1-20:1.2
	binutils-csl-arm-2006q3-19:1.2
	binutils-csl-sourcerygxx-4_1-19:1.2
	binutils-csl-sourcerygxx-4_1-18:1.2
	binutils-csl-renesas-4_1-9:1.2
	nickrob-async-20060828-mergepoint:1.2
	gdb-csl-symbian-6_4_50_20060226-11:1.1
	binutils-csl-renesas-4_1-8:1.2
	binutils-csl-renesas-4_1-7:1.2
	binutils-csl-renesas-4_1-6:1.2
	gdb-csl-sourcerygxx-4_1-17:1.1
	binutils-csl-sourcerygxx-4_1-17:1.2
	gdb-csl-20060226-branch-local-2:1.1
	gdb-csl-sourcerygxx-4_1-14:1.1
	binutils-csl-sourcerygxx-4_1-14:1.2
	binutils-csl-sourcerygxx-4_1-15:1.2
	gdb-csl-sourcerygxx-4_1-13:1.1
	binutils-csl-sourcerygxx-4_1-13:1.2
	binutils-2_17:1.2
	gdb-csl-sourcerygxx-4_1-12:1.1
	binutils-csl-sourcerygxx-4_1-12:1.2
	gdb-csl-sourcerygxx-3_4_4-21:1.1
	binutils-csl-sourcerygxx-3_4_4-21:1.2
	gdb_6_5-20060621-release:1.2
	gdb-csl-sourcerygxx-4_1-9:1.1
	binutils-csl-sourcerygxx-4_1-9:1.2
	gdb-csl-sourcerygxx-4_1-8:1.1
	binutils-csl-sourcerygxx-4_1-8:1.2
	gdb-csl-sourcerygxx-4_1-7:1.1
	binutils-csl-sourcerygxx-4_1-7:1.2
	gdb-csl-arm-2006q1-6:1.1
	binutils-csl-arm-2006q1-6:1.2
	gdb-csl-sourcerygxx-4_1-6:1.1
	binutils-csl-sourcerygxx-4_1-6:1.2
	gdb-csl-symbian-6_4_50_20060226-10:1.1
	gdb-csl-symbian-6_4_50_20060226-9:1.1
	gdb-csl-symbian-6_4_50_20060226-8:1.1
	gdb-csl-coldfire-4_1-11:1.1
	binutils-csl-coldfire-4_1-11:1.2
	gdb-csl-sourcerygxx-3_4_4-19:1.1
	binutils-csl-sourcerygxx-3_4_4-19:1.2
	gdb-csl-coldfire-4_1-10:1.1
	gdb_6_5-branch:1.2.0.16
	gdb_6_5-2006-05-14-branchpoint:1.2
	binutils-csl-coldfire-4_1-10:1.2
	gdb-csl-sourcerygxx-4_1-5:1.1
	binutils-csl-sourcerygxx-4_1-5:1.2
	nickrob-async-20060513-branch:1.2.0.14
	nickrob-async-20060513-branchpoint:1.2
	gdb-csl-sourcerygxx-4_1-4:1.1
	binutils-csl-sourcerygxx-4_1-4:1.2
	msnyder-reverse-20060502-branch:1.2.0.12
	msnyder-reverse-20060502-branchpoint:1.2
	gdb-csl-morpho-4_1-4:1.1
	binutils-csl-morpho-4_1-4:1.2
	gdb-csl-sourcerygxx-3_4_4-17:1.1
	binutils-csl-sourcerygxx-3_4_4-17:1.2
	readline_5_1-import-branch:1.2.0.10
	readline_5_1-import-branchpoint:1.2
	gdb-csl-20060226-branch-merge-to-csl-symbian-1:1.1
	binutils-2_17-branch:1.2.0.8
	binutils-2_17-branchpoint:1.2
	gdb-csl-symbian-20060226-branch:1.1.0.4
	gdb-csl-symbian-20060226-branchpoint:1.1
	gdb-csl-20060226-branch-merge-to-csl-local-1:1.1
	msnyder-reverse-20060331-branch:1.2.0.6
	msnyder-reverse-20060331-branchpoint:1.2
	binutils-csl-2_17-branch:1.2.0.4
	binutils-csl-2_17-branchpoint:1.2
	gdb-csl-available-20060303-branch:1.2.0.2
	gdb-csl-available-20060303-branchpoint:1.2
	gdb-csl-20060226-branch:1.1.0.2
	gdb-csl-20060226-branchpoint:1.1
	binutils_latest_snapshot:1.5;
locks; strict;
comment	@# @;


1.5
date	2010.02.12.04.38.21;	author devans;	state Exp;
branches;
next	1.4;

1.4
date	2009.09.02.07.21.03;	author amodra;	state Exp;
branches;
next	1.3;

1.3
date	2007.07.05.09.49.03;	author nickc;	state Exp;
branches;
next	1.2;

1.2
date	2006.03.03.15.57.43;	author nickc;	state Exp;
branches;
next	1.1;

1.1
date	2006.02.17.14.36.22;	author nickc;	state Exp;
branches;
next	;


desc
@@


1.5
log
@	* m32r.cpu (HASH-PREFIX): Delete.
	(duhpo, dshpo): New pmacros.
	(simm8, simm16): Delete HASH-PREFIX attribute, define with dshpo.
	(uimm3, uimm4, uimm5, uimm8, uimm16, imm1): Delete HASH-PREFIX
	attribute, define with dshpo.
	(uimm24): Delete HASH-PREFIX attribute.
	* m32r.opc (CGEN_PRINT_NORMAL): Delete.
	(print_signed_with_hash_prefix): New function.
	(print_unsigned_with_hash_prefix): New function.
	* xc16x.cpu (dowh): New pmacro.
	(upof16): Define with dowh, specify print handler.
	(qbit, qlobit, qhibit): Ditto.
	(upag16): Ditto.
	* xc16x.opc (CGEN_PRINT_NORMAL): Delete.
	(print_with_dot_prefix): New functions.
	(print_with_pof_prefix, print_with_pag_prefix): New functions.
@
text
@/* XC16X opcode support.  -*- C -*-

   Copyright 2006, 2007, 2009 Free Software Foundation, Inc.

   Contributed by KPIT Cummins Infosystems Ltd.; developed under contract 
   from Infineon Systems, GMBH , Germany.

   This file is part of the GNU Binutils.

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, 51 Franklin Street - Fifth Floor, Boston, MA
   02110-1301, USA.  */


/* This file is an addendum to xc16x.cpu.  Heavy use of C code isn't
   appropriate in .cpu files, so it resides here.  This especially applies
   to assembly/disassembly where parsing/printing can be quite involved.
   Such things aren't really part of the specification of the cpu, per se,
   so .cpu files provide the general framework and .opc files handle the
   nitty-gritty details as necessary.

   Each section is delimited with start and end markers.

   <arch>-opc.h additions use: "-- opc.h"
   <arch>-opc.c additions use: "-- opc.c"
   <arch>-asm.c additions use: "-- asm.c"
   <arch>-dis.c additions use: "-- dis.c"
   <arch>-ibd.h additions use: "-- ibd.h"  */

/* -- opc.h */

#define CGEN_DIS_HASH_SIZE 8
#define CGEN_DIS_HASH(buf,value) (((* (unsigned char*) (buf)) >> 3) % CGEN_DIS_HASH_SIZE)

/* -- */

/* -- opc.c */
                                                                                
/* -- */

/* -- asm.c */
/* Handle '#' prefixes (i.e. skip over them).  */

static const char *
parse_hash (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	    const char **strp,
	    int opindex ATTRIBUTE_UNUSED,
	    long *valuep ATTRIBUTE_UNUSED)
{
  if (**strp == '#')
    {
      ++*strp;
      return NULL;
    }
  return _("Missing '#' prefix");
}

/* Handle '.' prefixes (i.e. skip over them).  */

static const char *
parse_dot (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   const char **strp,
	   int opindex ATTRIBUTE_UNUSED,
	   long *valuep ATTRIBUTE_UNUSED)
{
  if (**strp == '.')
    {
      ++*strp;
      return NULL;
    }
  return _("Missing '.' prefix");
}

/* Handle 'pof:' prefixes (i.e. skip over them).  */

static const char *
parse_pof (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   const char **strp,
	   int opindex ATTRIBUTE_UNUSED,
	   long *valuep ATTRIBUTE_UNUSED)
{
  if (strncasecmp (*strp, "pof:", 4) == 0)
    {
      *strp += 4;
      return NULL;
    }
  return _("Missing 'pof:' prefix");  
}

/* Handle 'pag:' prefixes (i.e. skip over them).  */

static const char *
parse_pag (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   const char **strp,
	   int opindex ATTRIBUTE_UNUSED,
	   long *valuep ATTRIBUTE_UNUSED)
{
  if (strncasecmp (*strp, "pag:", 4) == 0)
    {
      *strp += 4;
      return NULL;
    }
  return _("Missing 'pag:' prefix");
}

/* Handle 'sof' prefixes (i.e. skip over them).  */

static const char *
parse_sof (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   const char **strp,
	   int opindex ATTRIBUTE_UNUSED,
	   long *valuep ATTRIBUTE_UNUSED)
{
  if (strncasecmp (*strp, "sof:", 4) == 0)
    {
      *strp += 4;
      return NULL;
    }
  return _("Missing 'sof:' prefix");
}

/* Handle 'seg' prefixes (i.e. skip over them).  */

static const char *
parse_seg (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   const char **strp,
	   int opindex ATTRIBUTE_UNUSED,
	   long *valuep ATTRIBUTE_UNUSED)
{
  if (strncasecmp (*strp, "seg:", 4) == 0)
    {
      *strp += 4;
      return NULL;
    }
  return _("Missing 'seg:' prefix");
}
/* -- */

/* -- dis.c */

/* Print an operand with a "." prefix.
   NOTE: This prints the operand in hex.
   ??? This exists to maintain disassembler compatibility with previous
   versions.  Ideally we'd print the "." in print_dot.  */

static void
print_with_dot_prefix (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
		       void * dis_info,
		       long value,
		       unsigned attrs ATTRIBUTE_UNUSED,
		       bfd_vma pc ATTRIBUTE_UNUSED,
		       int length ATTRIBUTE_UNUSED)
{
  disassemble_info *info = (disassemble_info *) dis_info;

  info->fprintf_func (info->stream, ".");
  info->fprintf_func (info->stream, "0x%lx", value);
}

/* Print an operand with a "#pof:" prefix.
   NOTE: This prints the operand as an address.
   ??? This exists to maintain disassembler compatibility with previous
   versions.  Ideally we'd print "#pof:" in print_pof.  */

static void
print_with_pof_prefix (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
		       void * dis_info,
		       bfd_vma value,
		       unsigned attrs ATTRIBUTE_UNUSED,
		       bfd_vma pc ATTRIBUTE_UNUSED,
		       int length ATTRIBUTE_UNUSED)
{
  disassemble_info *info = (disassemble_info *) dis_info;

  info->fprintf_func (info->stream, "#pof:");
  info->fprintf_func (info->stream, "0x%lx", (long) value);
}

/* Print an operand with a "#pag:" prefix.
   NOTE: This prints the operand in hex.
   ??? This exists to maintain disassembler compatibility with previous
   versions.  Ideally we'd print "#pag:" in print_pag.  */

static void
print_with_pag_prefix (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
		       void * dis_info,
		       long value,
		       unsigned attrs ATTRIBUTE_UNUSED,
		       bfd_vma pc ATTRIBUTE_UNUSED,
		       int length ATTRIBUTE_UNUSED)
{
  disassemble_info *info = (disassemble_info *) dis_info;

  info->fprintf_func (info->stream, "#pag:");
  info->fprintf_func (info->stream, "0x%lx", value);
}

/* Print a 'pof:' prefix to an operand.  */

static void
print_pof (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   void * dis_info ATTRIBUTE_UNUSED,
	   long value ATTRIBUTE_UNUSED,
	   unsigned int attrs ATTRIBUTE_UNUSED,
	   bfd_vma pc ATTRIBUTE_UNUSED,
	   int length ATTRIBUTE_UNUSED)
{
}

/* Print a 'pag:' prefix to an operand.  */

static void
print_pag (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   void * dis_info ATTRIBUTE_UNUSED,
	   long value ATTRIBUTE_UNUSED,
	   unsigned int attrs ATTRIBUTE_UNUSED,
	   bfd_vma pc ATTRIBUTE_UNUSED,
	   int length ATTRIBUTE_UNUSED)
{
}

/* Print a 'sof:' prefix to an operand.  */

static void
print_sof (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   void * dis_info,
	   long value ATTRIBUTE_UNUSED,
	   unsigned int attrs ATTRIBUTE_UNUSED,
	   bfd_vma pc ATTRIBUTE_UNUSED,
	   int length ATTRIBUTE_UNUSED)
{
  disassemble_info *info = (disassemble_info *) dis_info;

  info->fprintf_func (info->stream, "sof:");
}

/* Print a 'seg:' prefix to an operand.  */

static void
print_seg (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   void * dis_info,
	   long value ATTRIBUTE_UNUSED,
	   unsigned int attrs ATTRIBUTE_UNUSED,
	   bfd_vma pc ATTRIBUTE_UNUSED,
	   int length ATTRIBUTE_UNUSED)
{
  disassemble_info *info = (disassemble_info *) dis_info;

  info->fprintf_func (info->stream, "seg:");
}

/* Print a '#' prefix to an operand.  */

static void
print_hash (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	    void * dis_info,
	    long value ATTRIBUTE_UNUSED,
	    unsigned int attrs ATTRIBUTE_UNUSED,
	    bfd_vma pc ATTRIBUTE_UNUSED,
	    int length ATTRIBUTE_UNUSED)
{
  disassemble_info *info = (disassemble_info *) dis_info;

  info->fprintf_func (info->stream, "#");
}

/* Print a '.' prefix to an operand.  */

static void
print_dot (CGEN_CPU_DESC cd ATTRIBUTE_UNUSED,
	   void * dis_info ATTRIBUTE_UNUSED,
	   long value ATTRIBUTE_UNUSED,
	   unsigned int attrs ATTRIBUTE_UNUSED,
	   bfd_vma pc ATTRIBUTE_UNUSED,
	   int length ATTRIBUTE_UNUSED)
{
}

/* -- */
@


1.4
log
@update copyright dates
@
text
@d152 56
a207 11
#define CGEN_PRINT_NORMAL(cd, info, value, attrs, pc, length)	\
  do								\
    {								\
      if (CGEN_BOOL_ATTR ((attrs), CGEN_OPERAND_DOT_PREFIX))	\
        info->fprintf_func (info->stream, ".");			\
      if (CGEN_BOOL_ATTR ((attrs), CGEN_OPERAND_POF_PREFIX))	\
        info->fprintf_func (info->stream, "#pof:");		\
      if (CGEN_BOOL_ATTR ((attrs), CGEN_OPERAND_PAG_PREFIX))	\
        info->fprintf_func (info->stream, "#pag:");		\
    }								\
  while (0)
@


1.3
log
@Change source files over to GPLv3.
@
text
@d3 1
a3 1
   Copyright 2006, 2007 Free Software Foundation, Inc.
@


1.2
log
@Fix parseing functions to return an error message if the parse failed
@
text
@d3 1
a3 1
   Copyright 2006 Free Software Foundation, Inc.
d12 1
a12 1
   the Free Software Foundation; either version 2 of the License, or
@


1.1
log
@Add support for the Infineon XC16X.
@
text
@d62 5
a66 2
    ++*strp;
  return NULL;
d78 5
a82 2
    ++*strp;
  return NULL;
d85 1
a85 1
/* Handle '.' prefixes (i.e. skip over them).  */
d93 6
a98 3
  if (!strncasecmp (*strp, "pof:", 4))
    *strp += 4;
  return NULL;
d101 1
a101 1
/* Handle '.' prefixes (i.e. skip over them).  */
d109 6
a114 3
  if (!strncasecmp (*strp, "pag:", 4))
    *strp += 4;
  return NULL;
d118 1
d125 6
a130 3
  if (!strncasecmp (*strp, "sof:", 4))
    *strp += 4;
  return NULL;
d134 1
d141 6
a146 3
  if (!strncasecmp (*strp, "seg:", 4))
    *strp += 4;
  return NULL;
d164 1
a164 1
/* Handle '.' prefixes as operands.  */
d176 1
a176 1
/* Handle '.' prefixes as operands.  */
d188 1
a188 1
/* Handle '.' prefixes as operands.  */
d203 1
a203 1
/* Handle '.' prefixes as operands.  */
d218 1
a218 1
/* Handle '#' prefixes as operands.  */
d233 1
a233 1
/* Handle '.' prefixes as operands.  */
@

