head	1.334;
access;
symbols
	newlib-2_2_0:1.334.0.40
	newlib-2_1_0:1.334
	binutils-2_24-branch:1.334.0.38
	binutils-2_24-branchpoint:1.334
	gdb_7_6-branch:1.334.0.36
	gdb_7_6-2013-03-12-branchpoint:1.334
	newlib-2_0_0:1.334
	binutils-2_23-branch:1.334.0.34
	binutils-2_23-branchpoint:1.334
	gdb_7_5-branch:1.334.0.32
	gdb_7_5-2012-07-18-branchpoint:1.334
	newlib-1_20_0:1.334
	gdb_7_4-branch:1.334.0.30
	gdb_7_4-2011-12-13-branchpoint:1.334
	binutils-2_22-branch:1.334.0.28
	binutils-2_22-branchpoint:1.334
	gdb_7_3-branch:1.334.0.26
	gdb_7_3-2011-04-01-branchpoint:1.334
	newlib-1_19_0:1.334
	binutils-2_21-branch:1.334.0.24
	binutils-2_21-branchpoint:1.334
	gdb_7_2-branch:1.334.0.22
	gdb_7_2-2010-07-07-branchpoint:1.334
	gdb_7_1-branch:1.334.0.20
	gdb_7_1-2010-02-18-branchpoint:1.334
	newlib-1_18_0:1.334
	gdb_7_0-branch:1.334.0.18
	gdb_7_0-2009-09-16-branchpoint:1.334
	binutils-arc-20081103-branch:1.334.0.16
	binutils-arc-20081103-branchpoint:1.334
	newlib-1_17_0-arc:1.334.0.14
	binutils-2_20-branch:1.334.0.12
	binutils-2_20-branchpoint:1.334
	binutils-arc-20080908-branch:1.334.0.10
	binutils-arc-20080908-branchpoint:1.334
	newlib-1_17_0:1.334
	binutils-2_19-branch:1.334.0.8
	binutils-2_19-branchpoint:1.334
	gdb_6_8-branch:1.334.0.6
	gdb_6_8-2008-02-26-branchpoint:1.334
	newlib-1_16_0:1.334
	gdb_6_7-branch:1.334.0.4
	gdb_6_7-2007-09-07-branchpoint:1.334
	binutils-2_18-branch:1.334.0.2
	binutils-2_18-branchpoint:1.334
	insight_6_6-20070208-release:1.320
	newlib-1_15_0:1.323
	newlib-csl-coldfire-4_1-32:1.301
	binutils-csl-coldfire-4_1-32:1.301.2.4
	newlib-csl-sourcerygxx-4_1-32:1.301
	binutils-csl-sourcerygxx-4_1-32:1.301.2.4
	gdb_6_6-2006-12-18-release:1.320
	newlib-csl-innovasic-fido-3_4_4-33:1.301
	binutils-csl-innovasic-fido-3_4_4-33:1.301.2.4
	binutils-csl-sourcerygxx-3_4_4-32:1.260
	newlib-csl-coldfire-4_1-30:1.301
	binutils-csl-coldfire-4_1-30:1.301.2.4
	newlib-csl-sourcerygxx-4_1-30:1.301
	binutils-csl-sourcerygxx-4_1-30:1.301.2.4
	newlib-csl-coldfire-4_1-28:1.301
	binutils-csl-coldfire-4_1-28:1.301.2.4
	binutils-csl-sourcerygxx-4_1-29:1.301.2.4
	newlib-csl-sourcerygxx-4_1-28:1.301
	binutils-csl-sourcerygxx-4_1-28:1.301.2.4
	gdb_6_6-branch:1.320.0.2
	gdb_6_6-2006-11-15-branchpoint:1.320
	newlib-csl-arm-2006q3-27:1.301
	binutils-csl-arm-2006q3-27:1.301.2.4
	newlib-csl-sourcerygxx-4_1-27:1.301
	binutils-csl-sourcerygxx-4_1-27:1.301.2.4
	newlib-csl-arm-2006q3-26:1.301
	binutils-csl-arm-2006q3-26:1.301.2.4
	newlib-csl-sourcerygxx-4_1-26:1.301
	binutils-csl-sourcerygxx-4_1-26:1.301.2.4
	binutils-csl-sourcerygxx-4_1-25:1.301.2.4
	newlib-csl-sourcerygxx-4_1-24:1.301
	binutils-csl-sourcerygxx-4_1-24:1.301.2.4
	newlib-csl-sourcerygxx-4_1-23:1.301
	binutils-csl-sourcerygxx-4_1-23:1.301.2.4
	insight_6_5-20061003-release:1.305
	gdb-csl-symbian-6_4_50_20060226-12:1.300.2.1
	newlib-csl-sourcerygxx-4_1-21:1.301
	binutils-csl-sourcerygxx-4_1-21:1.301.2.4
	newlib-csl-arm-2006q3-21:1.301
	binutils-csl-arm-2006q3-21:1.301.2.4
	binutils-csl-sourcerygxx-4_1-22:1.301.2.4
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.301.2.4
	binutils-csl-sourcerygxx-4_1-20:1.301.2.4
	newlib-csl-arm-2006q3-19:1.301
	binutils-csl-arm-2006q3-19:1.301.2.4
	newlib-csl-sourcerygxx-4_1-19:1.301
	binutils-csl-sourcerygxx-4_1-19:1.301.2.4
	newlib-csl-sourcerygxx-4_1-18:1.301
	binutils-csl-sourcerygxx-4_1-18:1.301.2.3
	binutils-csl-renesas-4_1-9:1.301.2.3
	newlib-csl-sourcerygxx-3_4_4-25:1.315
	gdb-csl-sourcerygxx-3_4_4-25:1.290
	binutils-csl-sourcerygxx-3_4_4-25:1.260
	nickrob-async-20060828-mergepoint:1.315
	gdb-csl-symbian-6_4_50_20060226-11:1.300.2.1
	binutils-csl-renesas-4_1-8:1.301.2.2
	binutils-csl-renesas-4_1-7:1.301.2.2
	binutils-csl-renesas-4_1-6:1.301.2.2
	newlib-csl-sourcerygxx-4_1-17:1.301
	gdb-csl-sourcerygxx-4_1-17:1.300.2.1
	binutils-csl-sourcerygxx-4_1-17:1.301.2.2
	gdb-csl-20060226-branch-local-2:1.300.2.1
	cr-0x5f1:1.315.0.2
	newlib-csl-sourcerygxx-4_1-14:1.301
	gdb-csl-sourcerygxx-4_1-14:1.300.2.1
	binutils-csl-sourcerygxx-4_1-14:1.301.2.2
	binutils-csl-sourcerygxx-4_1-15:1.301.2.2
	newlib-csl-sourcerygxx-4_1-13:1.301
	gdb-csl-sourcerygxx-4_1-13:1.300.2.1
	binutils-csl-sourcerygxx-4_1-13:1.301.2.2
	binutils-2_17:1.303
	newlib-csl-sourcerygxx-4_1-12:1.301
	gdb-csl-sourcerygxx-4_1-12:1.300.2.1
	binutils-csl-sourcerygxx-4_1-12:1.301.2.2
	gdb-csl-sourcerygxx-3_4_4-21:1.300.2.1
	binutils-csl-sourcerygxx-3_4_4-21:1.301.2.2
	gdb_6_5-20060621-release:1.305
	binutils-csl-wrs-linux-3_4_4-24:1.260
	binutils-csl-wrs-linux-3_4_4-23:1.260
	newlib-csl-sourcerygxx-4_1-9:1.301
	gdb-csl-sourcerygxx-4_1-9:1.300.2.1
	binutils-csl-sourcerygxx-4_1-9:1.301.2.2
	newlib-csl-sourcerygxx-4_1-8:1.301
	gdb-csl-sourcerygxx-4_1-8:1.300.2.1
	binutils-csl-sourcerygxx-4_1-8:1.301.2.2
	newlib-csl-sourcerygxx-4_1-7:1.301
	gdb-csl-sourcerygxx-4_1-7:1.300.2.1
	binutils-csl-sourcerygxx-4_1-7:1.301.2.2
	newlib-csl-arm-2006q1-6:1.301
	gdb-csl-arm-2006q1-6:1.300.2.1
	binutils-csl-arm-2006q1-6:1.301.2.2
	newlib-csl-sourcerygxx-4_1-6:1.301
	gdb-csl-sourcerygxx-4_1-6:1.300.2.1
	binutils-csl-sourcerygxx-4_1-6:1.301.2.2
	binutils-csl-wrs-linux-3_4_4-22:1.260
	gdb-csl-symbian-6_4_50_20060226-10:1.300.2.1
	gdb-csl-symbian-6_4_50_20060226-9:1.300.2.1
	gdb-csl-symbian-6_4_50_20060226-8:1.300.2.1
	gdb-csl-coldfire-4_1-11:1.300.2.1
	binutils-csl-coldfire-4_1-11:1.301.2.2
	gdb-csl-sourcerygxx-3_4_4-19:1.300.2.1
	binutils-csl-sourcerygxx-3_4_4-19:1.301.2.2
	gdb-csl-coldfire-4_1-10:1.300.2.1
	gdb_6_5-branch:1.305.0.4
	gdb_6_5-2006-05-14-branchpoint:1.305
	binutils-csl-coldfire-4_1-10:1.301.2.2
	newlib-csl-sourcerygxx-4_1-5:1.301
	gdb-csl-sourcerygxx-4_1-5:1.300.2.1
	binutils-csl-sourcerygxx-4_1-5:1.301.2.2
	nickrob-async-20060513-branch:1.305.0.2
	nickrob-async-20060513-branchpoint:1.305
	newlib-csl-sourcerygxx-4_1-4:1.301
	gdb-csl-sourcerygxx-4_1-4:1.300.2.1
	binutils-csl-sourcerygxx-4_1-4:1.301.2.1
	msnyder-reverse-20060502-branch:1.304.0.4
	msnyder-reverse-20060502-branchpoint:1.304
	binutils-csl-wrs-linux-3_4_4-21:1.260
	gdb-csl-morpho-4_1-4:1.300.2.1
	binutils-csl-morpho-4_1-4:1.301.2.1
	gdb-csl-sourcerygxx-3_4_4-17:1.300.2.1
	binutils-csl-sourcerygxx-3_4_4-17:1.301.2.1
	binutils-csl-wrs-linux-3_4_4-20:1.260
	readline_5_1-import-branch:1.304.0.2
	readline_5_1-import-branchpoint:1.304
	gdb-csl-20060226-branch-merge-to-csl-symbian-1:1.300.2.1
	binutils-2_17-branch:1.303.0.2
	binutils-2_17-branchpoint:1.303
	gdb-csl-symbian-20060226-branch:1.300.2.1.0.2
	gdb-csl-symbian-20060226-branchpoint:1.300.2.1
	gdb-csl-20060226-branch-merge-to-csl-local-1:1.300.2.1
	msnyder-reverse-20060331-branch:1.301.0.8
	msnyder-reverse-20060331-branchpoint:1.301
	newlib-autotools-branch:1.301.0.6
	newlib-csl-20060320-branch:1.301.0.4
	newlib-csl-20060320-branchpoint:1.301
	binutils-csl-2_17-branch:1.301.0.2
	binutils-csl-2_17-branchpoint:1.301
	gdb-csl-available-20060303-branch:1.300.0.4
	gdb-csl-available-20060303-branchpoint:1.300
	gdb-csl-20060226-branch:1.300.0.2
	gdb-csl-20060226-branchpoint:1.300
	newlib-1_14_0:1.293
	gdb_6_4-20051202-release:1.289
	msnyder-fork-checkpoint-branch:1.290.0.4
	msnyder-fork-checkpoint-branchpoint:1.290
	gdb-csl-gxxpro-6_3-branch:1.290.0.2
	gdb-csl-gxxpro-6_3-branchpoint:1.290
	gdb_6_4-branch:1.289.0.4
	gdb_6_4-2005-11-01-branchpoint:1.289
	gdb-csl-arm-20051020-branch:1.289.0.2
	gdb-csl-arm-20051020-branchpoint:1.289
	binutils-csl-gxxpro-3_4-branch:1.260.0.6
	binutils-csl-gxxpro-3_4-branchpoint:1.260
	binutils-2_16_1:1.260
	msnyder-tracepoint-checkpoint-branch:1.267.0.2
	msnyder-tracepoint-checkpoint-branchpoint:1.267
	gdb-csl-arm-20050325-2005-q1b:1.262
	binutils-csl-arm-2005q1b:1.260
	newlib-csl-arm-2005-q1b:1.265
	binutils-2_16:1.260
	newlib-csl-arm-2005-q1a:1.264
	gdb-csl-arm-20050325-2005-q1a:1.262
	binutils-csl-arm-2005q1a:1.260
	csl-arm-20050325-branch:1.262.0.2
	csl-arm-20050325-branchpoint:1.262
	binutils-csl-arm-2005q1-branch:1.260.0.4
	binutils-csl-arm-2005q1-branchpoint:1.260
	binutils-2_16-branch:1.260.0.2
	binutils-2_16-branchpoint:1.260
	newlib-1_13_0:1.256
	csl-arm-2004-q3d:1.247
	gdb_6_3-20041109-release:1.242
	jimb-rda-nptl-branch:1.244.0.2
	jimb-rda-nptl-branchpoint:1.244
	gdb_6_3-branch:1.242.0.2
	gdb_6_3-20041019-branchpoint:1.242
	csl-arm-2004-q3:1.241
	drow_intercu-merge-20040921:1.237
	drow_intercu-merge-20040915:1.237
	jimb-gdb_6_2-e500-branch:1.225.0.6
	jimb-gdb_6_2-e500-branchpoint:1.225
	gdb_6_2-20040730-release:1.225
	gdb_6_2-branch:1.225.0.2
	gdb_6_2-2004-07-10-gmt-branchpoint:1.225
	gdb_6_1_1-20040616-release:1.198
	binutils-2_15:1.198.4.1
	binutils-2_15-branchpoint:1.198
	csl-arm-2004-q1a:1.210
	csl-arm-2004-q1:1.208
	gdb_6_1-2004-04-05-release:1.198
	drow_intercu-merge-20040402:1.207
	drow_intercu-merge-20040327:1.207
	ezannoni_pie-20040323-branch:1.206.0.2
	ezannoni_pie-20040323-branchpoint:1.206
	cagney_tramp-20040321-mergepoint:1.205
	cagney_tramp-20040309-branch:1.199.0.2
	cagney_tramp-20040309-branchpoint:1.199
	gdb_6_1-branch:1.198.0.8
	gdb_6_1-2004-03-01-gmt-branchpoint:1.198
	drow_intercu-20040221-branch:1.198.0.6
	drow_intercu-20040221-branchpoint:1.198
	binutils-2_15-branch:1.198.0.4
	cagney_bfdfile-20040213-branch:1.198.0.2
	cagney_bfdfile-20040213-branchpoint:1.198
	drow-cplus-merge-20040208:1.195
	newlib-1_12_0:1.194
	carlton_dictionary-20040126-merge:1.194
	cagney_bigcore-20040122-branch:1.194.0.2
	cagney_bigcore-20040122-branchpoint:1.194
	drow-cplus-merge-20040113:1.194
	csl-arm-2003-q4:1.190
	drow-cplus-merge-20031224:1.190
	drow-cplus-merge-20031220:1.189
	carlton_dictionary-20031215-merge:1.189
	drow-cplus-merge-20031214:1.189
	carlton-dictionary-20031111-merge:1.188
	gdb_6_0-2003-10-04-release:1.169
	kettenis_sparc-20030918-branch:1.185.0.2
	kettenis_sparc-20030918-branchpoint:1.185
	carlton_dictionary-20030917-merge:1.184
	ezannoni_pie-20030916-branchpoint:1.184
	ezannoni_pie-20030916-branch:1.184.0.2
	cagney_x86i386-20030821-branch:1.180.0.2
	cagney_x86i386-20030821-branchpoint:1.180
	carlton_dictionary-20030805-merge:1.178
	carlton_dictionary-20030627-merge:1.171
	gdb_6_0-branch:1.169.0.2
	gdb_6_0-2003-06-23-branchpoint:1.169
	jimb-ppc64-linux-20030613-branch:1.168.0.2
	jimb-ppc64-linux-20030613-branchpoint:1.168
	binutils-2_14:1.160.4.1
	cagney_convert-20030606-branch:1.167.0.2
	cagney_convert-20030606-branchpoint:1.167
	cagney_writestrings-20030508-branch:1.160.0.8
	cagney_writestrings-20030508-branchpoint:1.160
	jimb-ppc64-linux-20030528-branch:1.166.0.4
	jimb-ppc64-linux-20030528-branchpoint:1.166
	carlton_dictionary-20030523-merge:1.166
	cagney_fileio-20030521-branch:1.166.0.2
	cagney_fileio-20030521-branchpoint:1.166
	kettenis_i386newframe-20030517-mergepoint:1.162
	jimb-ppc64-linux-20030509-branch:1.160.0.6
	jimb-ppc64-linux-20030509-branchpoint:1.160
	kettenis_i386newframe-20030504-mergepoint:1.160
	carlton_dictionary-20030430-merge:1.160
	binutils-2_14-branch:1.160.0.4
	binutils-2_14-branchpoint:1.160
	kettenis_i386newframe-20030419-branch:1.160.0.2
	kettenis_i386newframe-20030419-branchpoint:1.160
	carlton_dictionary-20030416-merge:1.158
	cagney_frameaddr-20030409-mergepoint:1.158
	kettenis_i386newframe-20030406-branch:1.158.0.10
	kettenis_i386newframe-20030406-branchpoint:1.158
	cagney_frameaddr-20030403-branchpoint:1.158
	cagney_frameaddr-20030403-branch:1.158.0.8
	cagney_framebase-20030330-mergepoint:1.158
	cagney_framebase-20030326-branch:1.158.0.6
	cagney_framebase-20030326-branchpoint:1.158
	cagney_lazyid-20030317-branch:1.158.0.4
	cagney_lazyid-20030317-branchpoint:1.158
	kettenis-i386newframe-20030316-mergepoint:1.158
	offbyone-20030313-branch:1.158.0.2
	offbyone-20030313-branchpoint:1.158
	kettenis-i386newframe-20030308-branch:1.156.0.2
	kettenis-i386newframe-20030308-branchpoint:1.156
	carlton_dictionary-20030305-merge:1.156
	cagney_offbyone-20030303-branch:1.154.0.2
	cagney_offbyone-20030303-branchpoint:1.154
	w32api-2_2:1.151
	mingw-runtime-2_4:1.151
	carlton_dictionary-20030207-merge:1.151
	interps-20030202-branch:1.150.0.2
	interps-20030202-branchpoint:1.150
	cagney-unwind-20030108-branch:1.141.0.2
	cagney-unwind-20030108-branchpoint:1.141
	binutils-2_13_2_1:1.99
	binutils-2_13_2:1.99
	carlton_dictionary-20021223-merge:1.130
	newlib-1_11_0:1.130
	gdb_5_3-2002-12-12-release:1.103
	carlton_dictionary-20021115-merge:1.115
	binutils-2_13_1:1.99
	kseitz_interps-20021105-merge:1.115
	kseitz_interps-20021103-merge:1.114
	drow-cplus-merge-20021020:1.113
	drow-cplus-merge-20021025:1.114
	carlton_dictionary-20021025-merge:1.114
	carlton_dictionary-20021011-merge:1.113
	drow-cplus-branch:1.112.0.2
	drow-cplus-branchpoint:1.112
	kseitz_interps-20020930-merge:1.110
	carlton_dictionary-20020927-merge:1.108
	tcltk840-20020924-branch:1.107.0.2
	tcltk840-20020924-branchpoint:1.107
	carlton_dictionary-branch:1.103.0.10
	carlton_dictionary-20020920-branchpoint:1.103
	sid-20020905-branchpoint:1.103
	sid-20020905-branch:1.103.0.8
	gdb_5_3-branch:1.103.0.6
	gdb_5_3-2002-09-04-branchpoint:1.103
	kseitz_interps-20020829-merge:1.103
	cagney_sysregs-20020825-branch:1.103.0.4
	cagney_sysregs-20020825-branchpoint:1.103
	readline_4_3-import-branch:1.103.0.2
	readline_4_3-import-branchpoint:1.103
	binutils-2_13:1.99
	gdb_5_2_1-2002-07-23-release:1.51
	binutils-2_13-branchpoint:1.99
	binutils-2_13-branch:1.99.0.2
	kseitz_interps-20020528-branch:1.77.0.2
	kseitz_interps-20020528-branchpoint:1.77
	cagney_regbuf-20020515-branch:1.71.0.4
	cagney_regbuf-20020515-branchpoint:1.71
	binutils-2_12_1:1.50
	jimb-macro-020506-branch:1.71.0.2
	jimb-macro-020506-branchpoint:1.71
	gdb_5_2-2002-04-29-release:1.51
	binutils-2_12:1.50
	gdb_5_2-branch:1.51.0.2
	gdb_5_2-2002-03-03-branchpoint:1.51
	binutils-2_12-branch:1.50.0.2
	binutils-2_12-branchpoint:1.50
	gdb_5_1_1-2002-01-24-release:1.40
	gdb_5_1_0_1-2002-01-03-release:1.40
	cygnus_cvs_20020108_pre:1.46
	gdb_5_1_0_1-2002-01-03-branch:1.40.0.6
	gdb_5_1_0_1-2002-01-03-branchpoint:1.40
	newlib-1_10_0:1.45
	gdb_5_1-2001-11-21-release:1.40
	gdb_s390-2001-09-26-branch:1.40.0.4
	gdb_s390-2001-09-26-branchpoint:1.40
	gdb_5_1-2001-07-29-branch:1.40.0.2
	gdb_5_1-2001-07-29-branchpoint:1.40
	binutils-2_11_2:1.31
	binutils-2_11_1:1.31
	binutils-2_11:1.31
	x86_64versiong3:1.33
	binutils-2_11-branch:1.31.0.2
	insight-precleanup-2001-01-01:1.30
	newlib-1_9_0:1.30
	binutils-2_10_1:1.11
	binutils-2_10:1.11
	gdb-premipsmulti-2000-06-06-branch:1.14.0.2
	gdb-premipsmulti-2000-06-06-branchpoint:1.14
	gdb_5_0-2000-05-19-release:1.11
	gdb_4_18_2-2000-05-18-release:1.11
	cygwin-1_1_1:1.12
	gdb_4_95_1-2000-05-11-snapshot:1.11
	gdb_4_95_0-2000-04-27-snapshot:1.11
	gdb_5_0-2000-04-10-branch:1.11.0.4
	gdb_5_0-2000-04-10-branchpoint:1.11
	binutils-2_10-branch:1.11.0.2
	binutils-2_10-branchpoint:1.11
	binutils_latest_snapshot:1.333
	repo-unification-2000-02-06:1.6
	binu_ss_19990721:1.3
	binu_ss_19990602:1.1.1.1
	binu_ss_19990502:1.1.1.1
	cygnus:1.1.1;
locks; strict;
comment	@# @;


1.334
date	2007.02.09.15.15.38;	author drow;	state dead;
branches;
next	1.333;

1.333
date	2007.02.05.19.10.45;	author brolley;	state Exp;
branches;
next	1.332;

1.332
date	2007.01.11.15.23.40;	author bonzini;	state Exp;
branches;
next	1.331;

1.331
date	2007.01.11.11.22.52;	author bonzini;	state Exp;
branches;
next	1.330;

1.330
date	2007.01.09.14.09.57;	author nickc;	state Exp;
branches;
next	1.329;

1.329
date	2007.01.09.07.36.09;	author nickc;	state Exp;
branches;
next	1.328;

1.328
date	2007.01.04.09.12.28;	author bonzini;	state Exp;
branches;
next	1.327;

1.327
date	2007.01.04.04.32.36;	author drow;	state Exp;
branches;
next	1.326;

1.326
date	2006.12.29.17.09.59;	author bonzini;	state Exp;
branches;
next	1.325;

1.325
date	2006.12.27.23.46.00;	author ian;	state Exp;
branches;
next	1.324;

1.324
date	2006.12.19.12.52.58;	author bonzini;	state Exp;
branches;
next	1.323;

1.323
date	2006.12.12.01.38.04;	author amodra;	state Exp;
branches;
next	1.322;

1.322
date	2006.12.11.06.47.55;	author amodra;	state Exp;
branches;
next	1.321;

1.321
date	2006.12.11.00.25.59;	author bje;	state Exp;
branches;
next	1.320;

1.320
date	2006.11.14.23.26.39;	author dj;	state Exp;
branches;
next	1.319;

1.319
date	2006.11.08.20.28.29;	author jjohnstn;	state Exp;
branches;
next	1.318;

1.318
date	2006.09.27.16.20.49;	author brolley;	state Exp;
branches;
next	1.317;

1.317
date	2006.09.20.12.33.49;	author ths;	state Exp;
branches;
next	1.316;

1.316
date	2006.08.30.13.14.18;	author corinna;	state Exp;
branches;
next	1.315;

1.315
date	2006.07.25.08.39.57;	author bonzini;	state Exp;
branches;
next	1.314;

1.314
date	2006.07.23.03.47.43;	author drow;	state Exp;
branches;
next	1.313;

1.313
date	2006.07.03.11.22.03;	author bonzini;	state Exp;
branches;
next	1.312;

1.312
date	2006.07.03.09.26.24;	author bonzini;	state Exp;
branches;
next	1.311;

1.311
date	2006.07.03.07.58.12;	author bonzini;	state Exp;
branches;
next	1.310;

1.310
date	2006.06.20.08.45.35;	author ayers;	state Exp;
branches;
next	1.309;

1.309
date	2006.06.13.23.06.42;	author danglin;	state Exp;
branches;
next	1.308;

1.308
date	2006.06.13.14.46.59;	author ayers;	state Exp;
branches;
next	1.307;

1.307
date	2006.06.07.22.33.16;	author carlos;	state Exp;
branches;
next	1.306;

1.306
date	2006.05.24.13.55.10;	author shinwell;	state Exp;
branches;
next	1.305;

1.305
date	2006.05.02.00.16.50;	author dj;	state Exp;
branches;
next	1.304;

1.304
date	2006.04.19.00.57.59;	author dj;	state Exp;
branches;
next	1.303;

1.303
date	2006.04.06.21.49.25;	author carlos;	state Exp;
branches;
next	1.302;

1.302
date	2006.03.31.02.32.20;	author bje;	state Exp;
branches;
next	1.301;

1.301
date	2006.03.14.16.10.08;	author bonzini;	state Exp;
branches
	1.301.2.1;
next	1.300;

1.300
date	2006.02.20.08.34.53;	author bonzini;	state Exp;
branches
	1.300.2.1
	1.300.4.1;
next	1.299;

1.299
date	2006.02.14.09.29.42;	author bonzini;	state Exp;
branches;
next	1.298;

1.298
date	2006.01.26.18.56.01;	author bonzini;	state Exp;
branches;
next	1.297;

1.297
date	2006.01.04.13.11.22;	author bonzini;	state Exp;
branches;
next	1.296;

1.296
date	2005.12.27.17.42.44;	author nickc;	state Exp;
branches;
next	1.295;

1.295
date	2005.12.20.17.21.57;	author bonzini;	state Exp;
branches;
next	1.294;

1.294
date	2005.12.19.17.33.45;	author bonzini;	state Exp;
branches;
next	1.293;

1.293
date	2005.12.14.18.00.22;	author bonzini;	state Exp;
branches;
next	1.292;

1.292
date	2005.12.12.11.24.58;	author nathan;	state Exp;
branches;
next	1.291;

1.291
date	2005.12.05.15.16.05;	author bonzini;	state Exp;
branches;
next	1.290;

1.290
date	2005.11.11.21.45.22;	author drow;	state Exp;
branches;
next	1.289;

1.289
date	2005.10.17.12.54.34;	author bernds;	state Exp;
branches;
next	1.288;

1.288
date	2005.10.09.16.35.55;	author kazu;	state Exp;
branches;
next	1.287;

1.287
date	2005.10.06.15.24.36;	author drow;	state Exp;
branches;
next	1.286;

1.286
date	2005.10.05.07.30.22;	author bonzini;	state Exp;
branches;
next	1.285;

1.285
date	2005.10.03.15.11.13;	author clm;	state Exp;
branches;
next	1.284;

1.284
date	2005.09.30.14.50.57;	author hjl;	state Exp;
branches;
next	1.283;

1.283
date	2005.09.29.01.00.26;	author geoffk;	state Exp;
branches;
next	1.282;

1.282
date	2005.09.20.03.13.02;	author dje;	state Exp;
branches;
next	1.281;

1.281
date	2005.09.01.21.03.00;	author dj;	state Exp;
branches;
next	1.280;

1.280
date	2005.08.12.14.22.30;	author bonzini;	state Exp;
branches;
next	1.279;

1.279
date	2005.08.08.09.20.58;	author bonzini;	state Exp;
branches;
next	1.278;

1.278
date	2005.07.27.18.00.57;	author mmitchel;	state Exp;
branches;
next	1.277;

1.277
date	2005.07.16.02.36.38;	author kcook;	state Exp;
branches;
next	1.276;

1.276
date	2005.07.14.22.51.39;	author jimb;	state Exp;
branches;
next	1.275;

1.275
date	2005.07.14.00.12.07;	author echristo;	state Exp;
branches;
next	1.274;

1.274
date	2005.07.11.16.48.34;	author dj;	state Exp;
branches;
next	1.273;

1.273
date	2005.07.07.02.24.02;	author kazu;	state Exp;
branches;
next	1.272;

1.272
date	2005.07.07.01.14.34;	author geoffk;	state Exp;
branches;
next	1.271;

1.271
date	2005.06.07.09.33.44;	author hp;	state Exp;
branches;
next	1.270;

1.270
date	2005.06.07.00.04.14;	author hp;	state Exp;
branches;
next	1.269;

1.269
date	2005.06.06.18.36.50;	author dj;	state Exp;
branches;
next	1.268;

1.268
date	2005.06.02.19.56.31;	author aldyh;	state Exp;
branches;
next	1.267;

1.267
date	2005.05.19.20.25.24;	author pbrook;	state Exp;
branches;
next	1.266;

1.266
date	2005.05.05.01.36.31;	author mrs;	state Exp;
branches;
next	1.265;

1.265
date	2005.04.29.14.00.02;	author bonzini;	state Exp;
branches;
next	1.264;

1.264
date	2005.03.30.18.36.33;	author amylaar;	state Exp;
branches;
next	1.263;

1.263
date	2005.03.30.08.39.16;	author bonzini;	state Exp;
branches;
next	1.262;

1.262
date	2005.03.25.09.02.30;	author bonzini;	state Exp;
branches;
next	1.261;

1.261
date	2005.03.22.00.49.17;	author zack;	state Exp;
branches;
next	1.260;

1.260
date	2005.02.28.14.07.01;	author bonzini;	state Exp;
branches;
next	1.259;

1.259
date	2005.02.22.09.16.10;	author nickc;	state Exp;
branches;
next	1.258;

1.258
date	2005.02.21.12.29.05;	author ebotcazou;	state Exp;
branches;
next	1.257;

1.257
date	2005.01.29.04.24.22;	author hp;	state Exp;
branches;
next	1.256;

1.256
date	2004.12.16.19.51.28;	author amylaar;	state Exp;
branches;
next	1.255;

1.255
date	2004.12.03.10.47.07;	author rsandifo;	state Exp;
branches;
next	1.254;

1.254
date	2004.12.03.10.30.05;	author rsandifo;	state Exp;
branches;
next	1.253;

1.253
date	2004.12.02.14.08.00;	author rsandifo;	state Exp;
branches;
next	1.252;

1.252
date	2004.12.02.11.09.33;	author rsandifo;	state Exp;
branches;
next	1.251;

1.251
date	2004.11.26.23.57.58;	author danglin;	state Exp;
branches;
next	1.250;

1.250
date	2004.11.12.19.38.13;	author geoffk;	state Exp;
branches;
next	1.249;

1.249
date	2004.11.08.22.14.59;	author hp;	state Exp;
branches;
next	1.248;

1.248
date	2004.11.05.05.26.34;	author geoffk;	state Exp;
branches;
next	1.247;

1.247
date	2004.11.04.17.07.08;	author hjl;	state Exp;
branches;
next	1.246;

1.246
date	2004.11.04.15.54.22;	author drow;	state Exp;
branches;
next	1.245;

1.245
date	2004.10.28.19.43.35;	author aaronwl;	state Exp;
branches;
next	1.244;

1.244
date	2004.10.26.20.39.00;	author aaronwl;	state Exp;
branches;
next	1.243;

1.243
date	2004.10.23.20.30.02;	author drow;	state Exp;
branches;
next	1.242;

1.242
date	2004.10.12.23.40.03;	author dj;	state Exp;
branches;
next	1.241;

1.241
date	2004.09.30.16.34.36;	author nickc;	state Exp;
branches;
next	1.240;

1.240
date	2004.09.29.11.43.26;	author rsandifo;	state Exp;
branches;
next	1.239;

1.239
date	2004.09.24.00.40.21;	author hjl;	state Exp;
branches;
next	1.238;

1.238
date	2004.09.23.19.54.48;	author dj;	state Exp;
branches;
next	1.237;

1.237
date	2004.09.10.02.19.35;	author dberlin;	state Exp;
branches;
next	1.236;

1.236
date	2004.09.03.19.09.39;	author rth;	state Exp;
branches;
next	1.235;

1.235
date	2004.09.01.07.48.05;	author bonzini;	state Exp;
branches;
next	1.234;

1.234
date	2004.08.31.10.16.19;	author bonzini;	state Exp;
branches;
next	1.233;

1.233
date	2004.08.30.08.05.42;	author bonzini;	state Exp;
branches;
next	1.232;

1.232
date	2004.08.18.06.51.38;	author bonzini;	state Exp;
branches;
next	1.231;

1.231
date	2004.08.17.22.09.16;	author wilson;	state Exp;
branches;
next	1.230;

1.230
date	2004.08.12.22.59.53;	author neroden;	state Exp;
branches;
next	1.229;

1.229
date	2004.08.11.17.32.55;	author dj;	state Exp;
branches;
next	1.228;

1.228
date	2004.08.04.16.12.06;	author mmitchel;	state Exp;
branches;
next	1.227;

1.227
date	2004.08.03.20.54.18;	author neroden;	state Exp;
branches;
next	1.226;

1.226
date	2004.07.12.12.03.42;	author bonzini;	state Exp;
branches;
next	1.225;

1.225
date	2004.07.07.17.37.19;	author nickc;	state Exp;
branches;
next	1.224;

1.224
date	2004.07.07.17.28.43;	author nickc;	state Exp;
branches;
next	1.223;

1.223
date	2004.07.02.07.56.07;	author bonzini;	state Exp;
branches;
next	1.222;

1.222
date	2004.06.22.01.38.35;	author cgf;	state Exp;
branches;
next	1.221;

1.221
date	2004.06.17.07.56.45;	author corinna;	state Exp;
branches;
next	1.220;

1.220
date	2004.06.09.08.32.34;	author bonzini;	state Exp;
branches;
next	1.219;

1.219
date	2004.06.03.04.57.38;	author cgf;	state Exp;
branches;
next	1.218;

1.218
date	2004.06.01.07.54.42;	author bonzini;	state Exp;
branches;
next	1.217;

1.217
date	2004.06.01.07.42.22;	author bonzini;	state Exp;
branches;
next	1.216;

1.216
date	2004.05.27.18.22.27;	author drow;	state Exp;
branches;
next	1.215;

1.215
date	2004.05.24.11.08.48;	author bonzini;	state Exp;
branches;
next	1.214;

1.214
date	2004.05.24.10.45.13;	author bonzini;	state Exp;
branches;
next	1.213;

1.213
date	2004.05.21.19.08.54;	author bonzini;	state Exp;
branches;
next	1.212;

1.212
date	2004.05.18.02.00.47;	author zack;	state Exp;
branches;
next	1.211;

1.211
date	2004.05.13.18.14.27;	author dj;	state Exp;
branches;
next	1.210;

1.210
date	2004.04.27.18.25.01;	author dj;	state Exp;
branches;
next	1.209;

1.209
date	2004.04.19.15.38.50;	author ro;	state Exp;
branches;
next	1.208;

1.208
date	2004.04.09.05.17.44;	author neroden;	state Exp;
branches;
next	1.207;

1.207
date	2004.03.24.22.34.31;	author neroden;	state Exp;
branches;
next	1.206;

1.206
date	2004.03.22.11.59.20;	author neroden;	state Exp;
branches;
next	1.205;

1.205
date	2004.03.17.19.26.07;	author neroden;	state Exp;
branches;
next	1.204;

1.204
date	2004.03.16.22.21.55;	author neroden;	state Exp;
branches;
next	1.203;

1.203
date	2004.03.16.00.04.59;	author neroden;	state Exp;
branches;
next	1.202;

1.202
date	2004.03.13.05.54.47;	author neroden;	state Exp;
branches;
next	1.201;

1.201
date	2004.03.11.18.30.52;	author dj;	state Exp;
branches;
next	1.200;

1.200
date	2004.03.11.05.15.16;	author neroden;	state Exp;
branches;
next	1.199;

1.199
date	2004.03.01.19.34.14;	author rsandifo;	state Exp;
branches
	1.199.2.1;
next	1.198;

1.198
date	2004.02.11.17.52.06;	author dj;	state Exp;
branches
	1.198.4.1
	1.198.6.1;
next	1.197;

1.197
date	2004.02.11.17.50.38;	author dj;	state Exp;
branches;
next	1.196;

1.196
date	2004.02.10.17.57.02;	author dj;	state Exp;
branches;
next	1.195;

1.195
date	2004.02.06.00.50.48;	author dj;	state Exp;
branches;
next	1.194;

1.194
date	2004.01.05.04.38.54;	author neroden;	state Exp;
branches;
next	1.193;

1.193
date	2004.01.05.00.50.42;	author neroden;	state Exp;
branches;
next	1.192;

1.192
date	2004.01.03.18.24.38;	author neroden;	state Exp;
branches;
next	1.191;

1.191
date	2004.01.01.00.07.51;	author dj;	state Exp;
branches;
next	1.190;

1.190
date	2003.12.22.00.59.55;	author dj;	state Exp;
branches;
next	1.189;

1.189
date	2003.12.08.21.19.41;	author fitzsim;	state Exp;
branches;
next	1.188;

1.188
date	2003.10.20.21.53.45;	author dj;	state Exp;
branches;
next	1.187;

1.187
date	2003.10.08.21.29.04;	author dj;	state Exp;
branches;
next	1.186;

1.186
date	2003.09.21.19.31.18;	author drow;	state Exp;
branches;
next	1.185;

1.185
date	2003.09.17.20.03.04;	author drow;	state Exp;
branches;
next	1.184;

1.184
date	2003.09.04.12.33.44;	author nickc;	state Exp;
branches;
next	1.183;

1.183
date	2003.09.02.23.21.43;	author dj;	state Exp;
branches;
next	1.182;

1.182
date	2003.08.27.21.17.54;	author drow;	state Exp;
branches;
next	1.181;

1.181
date	2003.08.27.03.05.51;	author neroden;	state Exp;
branches;
next	1.180;

1.180
date	2003.08.21.02.21.21;	author geoffk;	state Exp;
branches;
next	1.179;

1.179
date	2003.08.20.00.51.25;	author geoffk;	state Exp;
branches;
next	1.178;

1.178
date	2003.08.01.21.35.02;	author cagney;	state Exp;
branches;
next	1.177;

1.177
date	2003.07.30.20.12.58;	author dj;	state Exp;
branches;
next	1.176;

1.176
date	2003.07.28.03.27.46;	author neroden;	state Exp;
branches;
next	1.175;

1.175
date	2003.07.13.20.49.42;	author neroden;	state Exp;
branches;
next	1.174;

1.174
date	2003.07.10.05.04.24;	author aoliva;	state Exp;
branches;
next	1.173;

1.173
date	2003.07.10.05.00.47;	author bwilson;	state Exp;
branches;
next	1.172;

1.172
date	2003.06.27.17.34.33;	author neroden;	state Exp;
branches;
next	1.171;

1.171
date	2003.06.26.20.19.41;	author neroden;	state Exp;
branches;
next	1.170;

1.170
date	2003.06.23.00.40.23;	author hp;	state Exp;
branches;
next	1.169;

1.169
date	2003.06.18.02.25.31;	author dj;	state Exp;
branches;
next	1.168;

1.168
date	2003.06.12.16.06.52;	author dj;	state Exp;
branches;
next	1.167;

1.167
date	2003.06.03.20.44.31;	author neroden;	state Exp;
branches;
next	1.166;

1.166
date	2003.05.20.21.09.44;	author macro;	state Exp;
branches;
next	1.165;

1.165
date	2003.05.20.01.05.38;	author neroden;	state Exp;
branches;
next	1.164;

1.164
date	2003.05.19.18.12.19;	author dj;	state Exp;
branches;
next	1.163;

1.163
date	2003.05.18.15.49.05;	author neroden;	state Exp;
branches;
next	1.162;

1.162
date	2003.05.13.06.34.57;	author aj;	state Exp;
branches;
next	1.161;

1.161
date	2003.05.12.13.59.16;	author corinna;	state Exp;
branches;
next	1.160;

1.160
date	2003.04.19.00.19.40;	author dj;	state Exp;
branches
	1.160.2.1
	1.160.4.1;
next	1.159;

1.159
date	2003.04.17.21.30.52;	author dj;	state Exp;
branches;
next	1.158;

1.158
date	2003.03.12.20.47.07;	author neroden;	state Exp;
branches;
next	1.157;

1.157
date	2003.03.09.18.43.06;	author dj;	state Exp;
branches;
next	1.156;

1.156
date	2003.03.05.01.50.52;	author neroden;	state Exp;
branches
	1.156.2.1;
next	1.155;

1.155
date	2003.03.04.07.48.05;	author neroden;	state Exp;
branches;
next	1.154;

1.154
date	2003.02.24.16.47.04;	author nickc;	state Exp;
branches;
next	1.153;

1.153
date	2003.02.19.23.40.12;	author aoliva;	state Exp;
branches;
next	1.152;

1.152
date	2003.02.16.01.24.56;	author geoffk;	state Exp;
branches;
next	1.151;

1.151
date	2003.02.06.20.36.19;	author kseitz;	state Exp;
branches;
next	1.150;

1.150
date	2003.01.27.19.47.23;	author aoliva;	state Exp;
branches;
next	1.149;

1.149
date	2003.01.24.00.39.51;	author neroden;	state Exp;
branches;
next	1.148;

1.148
date	2003.01.23.22.33.55;	author neroden;	state Exp;
branches;
next	1.147;

1.147
date	2003.01.23.19.55.19;	author neroden;	state Exp;
branches;
next	1.146;

1.146
date	2003.01.19.23.45.39;	author neroden;	state Exp;
branches;
next	1.145;

1.145
date	2003.01.17.08.00.16;	author jakub;	state Exp;
branches;
next	1.144;

1.144
date	2003.01.16.16.27.47;	author jakub;	state Exp;
branches;
next	1.143;

1.143
date	2003.01.15.11.24.46;	author aoliva;	state Exp;
branches;
next	1.142;

1.142
date	2003.01.10.21.43.31;	author neroden;	state Exp;
branches;
next	1.141;

1.141
date	2003.01.09.20.45.29;	author aoliva;	state Exp;
branches;
next	1.140;

1.140
date	2003.01.07.21.58.19;	author cgf;	state Exp;
branches;
next	1.139;

1.139
date	2003.01.06.18.36.08;	author cagney;	state Exp;
branches;
next	1.138;

1.138
date	2003.01.04.22.36.41;	author danglin;	state Exp;
branches;
next	1.137;

1.137
date	2002.12.31.18.00.11;	author schwab;	state Exp;
branches;
next	1.136;

1.136
date	2002.12.31.03.28.41;	author drow;	state Exp;
branches;
next	1.135;

1.135
date	2002.12.29.19.05.04;	author aoliva;	state Exp;
branches;
next	1.134;

1.134
date	2002.12.28.17.58.05;	author aoliva;	state Exp;
branches;
next	1.133;

1.133
date	2002.12.28.09.13.56;	author neroden;	state Exp;
branches;
next	1.132;

1.132
date	2002.12.28.07.09.15;	author neroden;	state Exp;
branches;
next	1.131;

1.131
date	2002.12.23.17.53.40;	author neroden;	state Exp;
branches;
next	1.130;

1.130
date	2002.12.19.20.27.11;	author neroden;	state Exp;
branches;
next	1.129;

1.129
date	2002.12.19.11.05.14;	author schwab;	state Exp;
branches;
next	1.128;

1.128
date	2002.12.19.00.50.33;	author hjl;	state Exp;
branches;
next	1.127;

1.127
date	2002.12.17.04.31.04;	author hp;	state Exp;
branches;
next	1.126;

1.126
date	2002.12.13.22.59.14;	author neroden;	state Exp;
branches;
next	1.125;

1.125
date	2002.12.05.22.45.33;	author neroden;	state Exp;
branches;
next	1.124;

1.124
date	2002.12.05.18.34.48;	author neroden;	state Exp;
branches;
next	1.123;

1.123
date	2002.12.03.23.34.20;	author neroden;	state Exp;
branches;
next	1.122;

1.122
date	2002.12.03.22.54.00;	author neroden;	state Exp;
branches;
next	1.121;

1.121
date	2002.12.03.21.13.06;	author neroden;	state Exp;
branches;
next	1.120;

1.120
date	2002.12.03.04.46.25;	author neroden;	state Exp;
branches;
next	1.119;

1.119
date	2002.12.02.03.28.43;	author neroden;	state Exp;
branches;
next	1.118;

1.118
date	2002.12.02.03.24.13;	author neroden;	state Exp;
branches;
next	1.117;

1.117
date	2002.12.01.12.01.26;	author neroden;	state Exp;
branches;
next	1.116;

1.116
date	2002.11.29.21.38.33;	author neroden;	state Exp;
branches;
next	1.115;

1.115
date	2002.11.04.18.41.14;	author kevinb;	state Exp;
branches;
next	1.114;

1.114
date	2002.10.24.23.31.47;	author hp;	state Exp;
branches;
next	1.113;

1.113
date	2002.10.07.16.40.56;	author nickc;	state Exp;
branches;
next	1.112;

1.112
date	2002.10.03.19.08.53;	author neroden;	state Exp;
branches
	1.112.2.1;
next	1.111;

1.111
date	2002.10.02.05.22.11;	author neroden;	state Exp;
branches;
next	1.110;

1.110
date	2002.09.29.15.59.34;	author neroden;	state Exp;
branches;
next	1.109;

1.109
date	2002.09.28.01.44.34;	author geoffk;	state Exp;
branches;
next	1.108;

1.108
date	2002.09.25.17.25.27;	author neroden;	state Exp;
branches;
next	1.107;

1.107
date	2002.09.24.23.01.30;	author neroden;	state Exp;
branches;
next	1.106;

1.106
date	2002.09.23.23.36.54;	author thorpej;	state Exp;
branches;
next	1.105;

1.105
date	2002.09.21.16.35.47;	author neroden;	state Exp;
branches;
next	1.104;

1.104
date	2002.09.20.21.03.04;	author neroden;	state Exp;
branches;
next	1.103;

1.103
date	2002.08.20.03.04.03;	author aoliva;	state Exp;
branches
	1.103.10.1;
next	1.102;

1.102
date	2002.08.06.09.18.28;	author nickc;	state Exp;
branches;
next	1.101;

1.101
date	2002.08.04.23.15.52;	author hjl;	state Exp;
branches;
next	1.100;

1.100
date	2002.07.30.23.15.26;	author dj;	state Exp;
branches;
next	1.99;

1.99
date	2002.07.11.20.14.41;	author dj;	state Exp;
branches;
next	1.98;

1.98
date	2002.07.11.19.38.34;	author dj;	state Exp;
branches;
next	1.97;

1.97
date	2002.07.08.22.18.40;	author dj;	state Exp;
branches;
next	1.96;

1.96
date	2002.07.08.20.43.20;	author dj;	state Exp;
branches;
next	1.95;

1.95
date	2002.07.08.17.14.04;	author dj;	state Exp;
branches;
next	1.94;

1.94
date	2002.07.03.23.35.31;	author dj;	state Exp;
branches;
next	1.93;

1.93
date	2002.07.03.03.23.47;	author dj;	state Exp;
branches;
next	1.92;

1.92
date	2002.07.02.18.57.43;	author dj;	state Exp;
branches;
next	1.91;

1.91
date	2002.07.01.23.12.32;	author dj;	state Exp;
branches;
next	1.90;

1.90
date	2002.06.24.17.41.28;	author bje;	state Exp;
branches;
next	1.89;

1.89
date	2002.06.21.22.20.17;	author dj;	state Exp;
branches;
next	1.88;

1.88
date	2002.06.19.23.57.41;	author dj;	state Exp;
branches;
next	1.87;

1.87
date	2002.06.19.23.53.30;	author dj;	state Exp;
branches;
next	1.86;

1.86
date	2002.06.19.23.47.55;	author dj;	state Exp;
branches;
next	1.85;

1.85
date	2002.06.19.23.39.41;	author dj;	state Exp;
branches;
next	1.84;

1.84
date	2002.06.19.23.24.18;	author dj;	state Exp;
branches;
next	1.83;

1.83
date	2002.06.19.23.07.26;	author dj;	state Exp;
branches;
next	1.82;

1.82
date	2002.06.19.17.39.26;	author dj;	state Exp;
branches;
next	1.81;

1.81
date	2002.06.18.21.09.32;	author brolley;	state Exp;
branches;
next	1.80;

1.80
date	2002.06.09.01.32.19;	author thorpej;	state Exp;
branches;
next	1.79;

1.79
date	2002.05.31.19.42.41;	author dj;	state Exp;
branches;
next	1.78;

1.78
date	2002.05.30.02.47.47;	author thorpej;	state Exp;
branches;
next	1.77;

1.77
date	2002.05.28.20.06.27;	author marekm;	state Exp;
branches
	1.77.2.1;
next	1.76;

1.76
date	2002.05.22.09.21.25;	author nickc;	state Exp;
branches;
next	1.75;

1.75
date	2002.05.13.21.19.04;	author dj;	state Exp;
branches;
next	1.74;

1.74
date	2002.05.13.21.16.43;	author dj;	state Exp;
branches;
next	1.73;

1.73
date	2002.05.13.21.11.50;	author dj;	state Exp;
branches;
next	1.72;

1.72
date	2002.05.13.20.55.25;	author dj;	state Exp;
branches;
next	1.71;

1.71
date	2002.05.05.18.58.17;	author aoliva;	state Exp;
branches
	1.71.4.1;
next	1.70;

1.70
date	2002.05.03.18.24.32;	author aoliva;	state Exp;
branches;
next	1.69;

1.69
date	2002.05.03.16.13.21;	author fitzsim;	state Exp;
branches;
next	1.68;

1.68
date	2002.05.01.21.32.32;	author fitzsim;	state Exp;
branches;
next	1.67;

1.67
date	2002.05.01.20.42.00;	author fitzsim;	state Exp;
branches;
next	1.66;

1.66
date	2002.04.30.03.30.22;	author dj;	state Exp;
branches;
next	1.65;

1.65
date	2002.04.30.03.17.27;	author dj;	state Exp;
branches;
next	1.64;

1.64
date	2002.04.30.02.49.33;	author dj;	state Exp;
branches;
next	1.63;

1.63
date	2002.04.30.02.42.31;	author dj;	state Exp;
branches;
next	1.62;

1.62
date	2002.04.30.02.28.43;	author dj;	state Exp;
branches;
next	1.61;

1.61
date	2002.04.30.02.19.55;	author dj;	state Exp;
branches;
next	1.60;

1.60
date	2002.04.30.02.14.16;	author dj;	state Exp;
branches;
next	1.59;

1.59
date	2002.04.19.17.36.40;	author dj;	state Exp;
branches;
next	1.58;

1.58
date	2002.04.19.17.27.59;	author dj;	state Exp;
branches;
next	1.57;

1.57
date	2002.04.17.20.45.12;	author dj;	state Exp;
branches;
next	1.56;

1.56
date	2002.04.17.20.24.22;	author dj;	state Exp;
branches;
next	1.55;

1.55
date	2002.04.15.21.53.07;	author dj;	state Exp;
branches;
next	1.54;

1.54
date	2002.04.15.21.18.09;	author dj;	state Exp;
branches;
next	1.53;

1.53
date	2002.04.10.02.13.43;	author dj;	state Exp;
branches;
next	1.52;

1.52
date	2002.03.07.17.47.03;	author hjl;	state Exp;
branches;
next	1.51;

1.51
date	2002.03.01.00.52.59;	author aoliva;	state Exp;
branches;
next	1.50;

1.50
date	2002.02.09.03.15.34;	author aoliva;	state Exp;
branches;
next	1.49;

1.49
date	2002.01.27.02.14.43;	author thorpej;	state Exp;
branches;
next	1.48;

1.48
date	2002.01.23.16.40.51;	author nickc;	state Exp;
branches;
next	1.47;

1.47
date	2002.01.11.09.29.18;	author nickc;	state Exp;
branches;
next	1.46;

1.46
date	2002.01.07.18.14.04;	author msalter;	state Exp;
branches;
next	1.45;

1.45
date	2001.12.13.23.57.00;	author fitzsim;	state Exp;
branches;
next	1.44;

1.44
date	2001.11.28.19.55.01;	author dj;	state Exp;
branches;
next	1.43;

1.43
date	2001.11.09.02.21.21;	author dj;	state Exp;
branches;
next	1.42;

1.42
date	2001.09.19.06.07.36;	author bje;	state Exp;
branches;
next	1.41;

1.41
date	2001.09.03.19.47.48;	author jeffh;	state Exp;
branches;
next	1.40;

1.40
date	2001.05.24.21.06.16;	author trix;	state Exp;
branches;
next	1.39;

1.39
date	2001.05.03.20.31.54;	author aoliva;	state Exp;
branches;
next	1.38;

1.38
date	2001.04.26.05.42.15;	author aoliva;	state Exp;
branches;
next	1.37;

1.37
date	2001.04.26.05.32.29;	author aoliva;	state Exp;
branches;
next	1.36;

1.36
date	2001.04.25.21.41.21;	author aoliva;	state Exp;
branches;
next	1.35;

1.35
date	2001.04.02.01.32.45;	author aoliva;	state Exp;
branches;
next	1.34;

1.34
date	2001.03.28.01.19.29;	author aoliva;	state Exp;
branches;
next	1.33;

1.33
date	2001.02.17.00.53.44;	author nickc;	state Exp;
branches;
next	1.32;

1.32
date	2001.02.10.00.55.46;	author nickc;	state Exp;
branches;
next	1.31;

1.31
date	2001.01.15.00.19.42;	author bje;	state Exp;
branches;
next	1.30;

1.30
date	2000.12.12.20.33.05;	author aoliva;	state Exp;
branches;
next	1.29;

1.29
date	2000.11.25.00.21.33;	author nickc;	state Exp;
branches;
next	1.28;

1.28
date	2000.10.30.21.12.29;	author nickc;	state Exp;
branches;
next	1.27;

1.27
date	2000.09.02.07.24.51;	author aoliva;	state Exp;
branches;
next	1.26;

1.26
date	2000.08.20.22.56.17;	author devans;	state Exp;
branches;
next	1.25;

1.25
date	2000.08.16.18.37.42;	author aoliva;	state Exp;
branches;
next	1.24;

1.24
date	2000.08.15.08.01.29;	author aoliva;	state Exp;
branches;
next	1.23;

1.23
date	2000.08.12.00.49.39;	author jason;	state Exp;
branches;
next	1.22;

1.22
date	2000.08.07.15.02.09;	author dj;	state Exp;
branches;
next	1.21;

1.21
date	2000.08.03.23.54.09;	author aoliva;	state Exp;
branches;
next	1.20;

1.20
date	2000.08.03.02.22.11;	author aoliva;	state Exp;
branches;
next	1.19;

1.19
date	2000.08.02.18.56.20;	author dj;	state Exp;
branches;
next	1.18;

1.18
date	2000.07.28.02.10.36;	author aoliva;	state Exp;
branches;
next	1.17;

1.17
date	2000.07.24.04.34.08;	author aoliva;	state Exp;
branches;
next	1.16;

1.16
date	2000.07.22.08.20.10;	author jason;	state Exp;
branches;
next	1.15;

1.15
date	2000.06.20.13.59.03;	author twall;	state Exp;
branches;
next	1.14;

1.14
date	2000.05.18.16.58.06;	author law;	state Exp;
branches;
next	1.13;

1.13
date	2000.05.18.14.28.32;	author dje;	state Exp;
branches;
next	1.12;

1.12
date	2000.05.11.04.27.08;	author wilson;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.30.02.19.55;	author jason;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.06.18.09.38;	author nickc;	state Exp;
branches;
next	1.9;

1.9
date	2000.02.28.04.20.22;	author ian;	state Exp;
branches;
next	1.8;

1.8
date	2000.02.23.13.52.19;	author amodra;	state Exp;
branches;
next	1.7;

1.7
date	2000.02.23.01.26.59;	author nickc;	state Exp;
branches;
next	1.6;

1.6
date	2000.01.12.18.56.45;	author geoffk;	state Exp;
branches;
next	1.5;

1.5
date	99.08.27.10.42.58;	author nickc;	state Exp;
branches;
next	1.4;

1.4
date	99.08.08.23.32.46;	author ian;	state Exp;
branches;
next	1.3;

1.3
date	99.07.08.11.35.04;	author law;	state Exp;
branches;
next	1.2;

1.2
date	99.06.30.21.00.58;	author mmitchel;	state Exp;
branches;
next	1.1;

1.1
date	99.05.03.07.28.40;	author rth;	state Exp;
branches
	1.1.1.1;
next	;

1.301.2.1
date	2006.04.03.15.44.45;	author carlos;	state Exp;
branches;
next	1.301.2.2;

1.301.2.2
date	2006.05.05.12.21.51;	author nathan;	state Exp;
branches;
next	1.301.2.3;

1.301.2.3
date	2006.08.22.15.08.28;	author jsm28;	state Exp;
branches;
next	1.301.2.4;

1.301.2.4
date	2006.09.08.08.15.18;	author nathan;	state Exp;
branches;
next	;

1.300.2.1
date	2006.04.03.00.47.35;	author drow;	state Exp;
branches;
next	;

1.300.4.1
date	2006.03.03.20.46.34;	author drow;	state Exp;
branches;
next	;

1.199.2.1
date	2004.03.21.23.57.22;	author cagney;	state Exp;
branches;
next	;

1.198.4.1
date	2004.04.19.15.41.36;	author ro;	state Exp;
branches;
next	;

1.198.6.1
date	2004.03.27.17.37.28;	author drow;	state Exp;
branches;
next	1.198.6.2;

1.198.6.2
date	2004.09.16.17.00.06;	author drow;	state Exp;
branches;
next	;

1.160.2.1
date	2003.05.18.09.43.34;	author kettenis;	state Exp;
branches;
next	;

1.160.4.1
date	2003.05.15.19.21.47;	author drow;	state Exp;
branches;
next	;

1.156.2.1
date	2003.03.16.14.01.40;	author kettenis;	state Exp;
branches;
next	;

1.112.2.1
date	2002.10.26.17.11.54;	author drow;	state Exp;
branches;
next	1.112.2.2;

1.112.2.2
date	2003.12.14.20.26.31;	author drow;	state Exp;
branches;
next	1.112.2.3;

1.112.2.3
date	2003.12.24.22.08.37;	author drow;	state Exp;
branches;
next	1.112.2.4;

1.112.2.4
date	2004.01.13.16.11.31;	author drow;	state Exp;
branches;
next	1.112.2.5;

1.112.2.5
date	2004.02.09.19.43.22;	author drow;	state Exp;
branches;
next	;

1.103.10.1
date	2002.09.27.20.02.47;	author carlton;	state Exp;
branches;
next	1.103.10.2;

1.103.10.2
date	2002.10.11.22.22.44;	author carlton;	state Exp;
branches;
next	1.103.10.3;

1.103.10.3
date	2002.10.25.23.49.45;	author carlton;	state Exp;
branches;
next	1.103.10.4;

1.103.10.4
date	2002.11.15.19.18.20;	author carlton;	state Exp;
branches;
next	1.103.10.5;

1.103.10.5
date	2002.12.23.19.37.16;	author carlton;	state Exp;
branches;
next	1.103.10.6;

1.103.10.6
date	2003.02.07.19.17.34;	author carlton;	state Exp;
branches;
next	1.103.10.7;

1.103.10.7
date	2003.03.06.00.56.11;	author carlton;	state Exp;
branches;
next	1.103.10.8;

1.103.10.8
date	2003.04.16.19.56.39;	author carlton;	state Exp;
branches;
next	1.103.10.9;

1.103.10.9
date	2003.05.01.00.46.36;	author carlton;	state Exp;
branches;
next	1.103.10.10;

1.103.10.10
date	2003.05.23.18.40.18;	author carlton;	state Exp;
branches;
next	1.103.10.11;

1.103.10.11
date	2003.06.27.21.49.03;	author carlton;	state Exp;
branches;
next	1.103.10.12;

1.103.10.12
date	2003.08.05.17.12.41;	author carlton;	state Exp;
branches;
next	1.103.10.13;

1.103.10.13
date	2003.09.17.21.27.46;	author carlton;	state Exp;
branches;
next	1.103.10.14;

1.103.10.14
date	2003.11.11.23.50.02;	author carlton;	state Exp;
branches;
next	1.103.10.15;

1.103.10.15
date	2003.12.15.23.59.06;	author carlton;	state Exp;
branches;
next	1.103.10.16;

1.103.10.16
date	2004.01.26.19.11.01;	author carlton;	state Exp;
branches;
next	;

1.77.2.1
date	2002.06.20.01.29.26;	author kseitz;	state Exp;
branches;
next	1.77.2.2;

1.77.2.2
date	2002.07.22.21.46.36;	author kseitz;	state Exp;
branches;
next	1.77.2.3;

1.77.2.3
date	2002.08.09.18.34.08;	author kseitz;	state Exp;
branches;
next	1.77.2.4;

1.77.2.4
date	2002.08.30.22.52.33;	author kseitz;	state Exp;
branches;
next	1.77.2.5;

1.77.2.5
date	2002.10.01.00.45.39;	author kseitz;	state Exp;
branches;
next	1.77.2.6;

1.77.2.6
date	2002.11.03.22.20.50;	author ezannoni;	state Exp;
branches;
next	;

1.71.4.1
date	2002.06.15.16.42.33;	author cagney;	state Exp;
branches;
next	1.71.4.2;

1.71.4.2
date	2002.06.21.16.18.44;	author cagney;	state Exp;
branches;
next	;

1.1.1.1
date	99.05.03.07.28.40;	author rth;	state Exp;
branches;
next	;


desc
@@


1.334
log
@	* Makefile.tpl (build_alias, host_alias, target_alias): Use
	noncanonical equivalents.
	* configure.in: Rename to...
	* configure.ac: ...this.  Update AC_PREREQ.  Prevent error for
	AS_FOR_TARGET.  Set build_noncanonical, host_noncanonical, and
	target_noncanonical.  Use them.  Rewrite removal of configure
	arguments for autoconf 2.59.  Discard variable settings.  Force
	program_transform_name for native tools.

	* Makefile.in: Regenerated.
	* configure: Regenerated with autoconf 2.59.

	* src-release (DEVO_SUPPORT, do-proto-toplev): Expect configure.ac.

	* acx.m4 (ACX_CHECK_INSTALLED_TARGET_TOOL): Avoid AC_PATH_PROG
	with an empty path.
@
text
@#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
#   2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
#
# This file is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.

##############################################################################
### WARNING: this file contains embedded tabs.  Do not run untabify on this file.

sinclude(config/acx.m4)

AC_INIT(move-if-change)
AC_PREREQ(2.13)
AC_CANONICAL_SYSTEM
AC_ARG_PROGRAM

# Get 'install' or 'install-sh' and its variants.
AC_PROG_INSTALL
ACX_PROG_LN
AC_PROG_LN_S

### we might need to use some other shell than /bin/sh for running subshells
### If we are on Windows, search for the shell.  This will permit people
### to not have /bin/sh, but to be able to see /SOME/PATH/sh configure
### without also having to set CONFIG_SHELL.  This code will work when
### using bash, which sets OSTYPE.
case "${OSTYPE}" in
*win32*)
  if test x${CONFIG_SHELL} = x ; then
    if test ! -f /bin/sh ; then
      if test x${SHELL} != x && test -f ${SHELL} ; then
	CONFIG_SHELL=${SHELL}
	export CONFIG_SHELL
      else
	for prog in sh sh.exe bash bash.exe; do
	  IFS="${IFS=	}"; save_ifs="$IFS"; IFS="${IFS}:"
	  for dir in $PATH; do
	    test -z "$dir" && dir=.
	    if test -f $dir/$prog; then
	      CONFIG_SHELL=$dir/$prog
	      export CONFIG_SHELL
	      break
	    fi
	  done
	  IFS="$save_ifs"
	  test -n "${CONFIG_SHELL}" && break
	done
      fi
    fi
  fi
  ;;
esac

config_shell=${CONFIG_SHELL-/bin/sh}

progname=$0
# if PWD already has a value, it is probably wrong.
if test -n "$PWD" ; then PWD=`${PWDCMD-pwd}`; fi

# Export original configure arguments for use by sub-configures.  These
# will be expanded by make, so quote '$'.
tmp="$progname $@@"
sed -e 's,\$,$$,g' <<EOF_SED > conftestsed.out
$tmp
EOF_SED
TOPLEVEL_CONFIGURE_ARGUMENTS=`cat conftestsed.out`
rm -f conftestsed.out
AC_SUBST(TOPLEVEL_CONFIGURE_ARGUMENTS)

moveifchange=${srcdir}/move-if-change

srcpwd=`cd ${srcdir} ; ${PWDCMD-pwd}`

# We pass INSTALL explicitly to sub-makes.  Make sure that it is not
# a relative path.
if test "$INSTALL" = "${srcdir}/install-sh -c"; then
  INSTALL="${srcpwd}/install-sh -c"
fi

# Set srcdir to "." if that's what it is.
# This is important for multilib support.
pwd=`${PWDCMD-pwd}`
if test "${pwd}" = "${srcpwd}" ; then
  srcdir=.
fi

topsrcdir=$srcpwd

extra_host_args=

### To add a new directory to the tree, first choose whether it is a target
### or a host dependent tool.  Then put it into the appropriate list
### (library or tools, host or target), doing a dependency sort.

# Subdirs will be configured in the order listed in build_configdirs, 
# configdirs, or target_configdirs; see the serialization section below.

# Dependency sorting is only needed when *configuration* must be done in 
# a particular order.  In all cases a dependency should be specified in 
# the Makefile, whether or not it's implicitly specified here.

# Double entries in build_configdirs, configdirs, or target_configdirs may
# cause circular dependencies and break everything horribly.

# these library is used by various programs built for the build
# environment
#
build_libs="build-libiberty"

# these tools are built for the build environment
build_tools="build-texinfo build-byacc build-flex build-bison build-m4 build-fixincludes"

# these libraries are used by various programs built for the host environment
#
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl libgui zlib libcpp libdecnumber gmp mpfr"

# these tools are built for the host environment
# Note, the powerpc-eabi build depends on sim occurring before gdb in order to
# know that we are building the simulator.
# binutils, gas and ld appear in that order because it makes sense to run
# "make check" in that particular order.
host_tools="texinfo byacc flex bison binutils gas ld fixincludes gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils gettext zip fastjar gnattools"

# libgcj represents the runtime libraries only used by gcj.
libgcj="target-libffi \
	target-zlib \
	target-qthreads \
	target-libjava"

# these libraries are built for the target environment, and are built after
# the host libraries and the host tools (which may be a cross compiler)
#
target_libraries="target-libiberty \
		target-libgcc \
		target-libgloss \
		target-newlib \
		target-libstdc++-v3 \
		target-libmudflap \
		target-libssp \
		target-libgfortran \
		target-boehm-gc \
		${libgcj} \
		target-libobjc \
		target-libada \
		target-libgomp"

# these tools are built using the target libraries, and are intended to
# run only in the target environment
#
# note: any program that *uses* libraries that are in the "target_libraries"
# list belongs in this list.  those programs are also very likely
# candidates for the "native_only" list which follows
#
target_tools="target-examples target-groff target-gperf target-rda"

################################################################################

## All tools belong in one of the four categories, and are assigned above
## We assign ${configdirs} this way to remove all embedded newlines.  This
## is important because configure will choke if they ever get through.
## ${configdirs} is directories we build using the host tools.
## ${target_configdirs} is directories we build using the target tools.
configdirs=`echo ${host_libs} ${host_tools}`
target_configdirs=`echo ${target_libraries} ${target_tools}`
build_configdirs=`echo ${build_libs} ${build_tools}`

################################################################################

srcname="gnu development package"

# This gets set non-empty for some net releases of packages.
appdirs=""

# Define is_cross_compiler to save on calls to 'test'.
is_cross_compiler=
if test x"${host}" = x"${target}" ; then
  is_cross_compiler=no
else
  is_cross_compiler=yes
fi	

# Find the build and target subdir names.
GCC_TOPLEV_SUBDIRS

# Skipdirs are removed silently.
skipdirs=
# Noconfigdirs are removed loudly.
noconfigdirs=""

use_gnu_ld=
# Make sure we don't let GNU ld be added if we didn't want it.
if test x$with_gnu_ld = xno ; then
  use_gnu_ld=no
  noconfigdirs="$noconfigdirs ld"
fi

use_gnu_as=
# Make sure we don't let GNU as be added if we didn't want it.
if test x$with_gnu_as = xno ; then
  use_gnu_as=no
  noconfigdirs="$noconfigdirs gas"
fi

# some tools are so dependent upon X11 that if we're not building with X, 
# it's not even worth trying to configure, much less build, that tool.

case ${with_x} in
  yes | "") ;; # the default value for this tree is that X11 is available
  no)
    skipdirs="${skipdirs} tk itcl libgui"
    # We won't be able to build gdbtk without X.
    enable_gdbtk=no 
    ;;
  *)  echo "*** bad value \"${with_x}\" for -with-x flag; ignored" 1>&2 ;;
esac

# Some tools are only suitable for building in a "native" situation.
# Remove these if host!=target.  
native_only="autoconf automake libtool fileutils find gawk gettext gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff target-groff guile perl time ash bash bzip2 prms gnuserv target-gperf"

# Similarly, some are only suitable for cross toolchains.
# Remove these if host=target.
cross_only="target-libgloss target-newlib target-opcodes"

case $is_cross_compiler in
  no) skipdirs="${skipdirs} ${cross_only}" ;;
  yes) skipdirs="${skipdirs} ${native_only}" ;;
esac

# If both --with-headers and --with-libs are specified, default to
# --without-newlib.
if test x"${with_headers}" != x && test x"${with_headers}" != xno \
   && test x"${with_libs}" != x && test x"${with_libs}" != xno ; then
  if test x"${with_newlib}" = x ; then
    with_newlib=no
  fi
fi

# Recognize --with-newlib/--without-newlib.
case ${with_newlib} in
  no) skipdirs="${skipdirs} target-newlib" ;;
  yes) skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'` ;;
esac

# Configure extra directories which are host specific

case "${host}" in
  *-cygwin*)
    configdirs="$configdirs libtermcap" ;;
esac

# A target can indicate whether a language isn't supported for some reason.
# Only spaces may be used in this macro; not newlines or tabs.
unsupported_languages=

# Remove more programs from consideration, based on the host or 
# target this usually means that a port of the program doesn't
# exist yet.

case "${host}" in
  hppa*64*-*-*)
    noconfigdirs="$noconfigdirs byacc"
    ;;
  i[[3456789]]86-*-vsta)
    noconfigdirs="$noconfigdirs tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl itcl gnuserv gettext"
    ;;
  i[[3456789]]86-*-go32* | i[[3456789]]86-*-msdosdjgpp*)
    noconfigdirs="$noconfigdirs tcl tk expect dejagnu send-pr uudecode guile itcl gnuserv libffi"
    ;;
  x86_64-*-mingw*)
    noconfigdirs="$noconfigdirs expect dejagnu autoconf automake send-pr rcs guile perl texinfo libtool newlib"
    ;;
  i[[3456789]]86-*-mingw32*)
    # noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl itcl gnuserv"
    noconfigdirs="$noconfigdirs expect dejagnu autoconf automake send-pr rcs guile perl texinfo libtool newlib"
    ;;
  i[[3456789]]86-*-beos*)
    noconfigdirs="$noconfigdirs tk itcl libgui gdb"
    ;;
  *-*-cygwin*)
    noconfigdirs="$noconfigdirs autoconf automake send-pr rcs guile perl"
    ;;
  *-*-netbsd*)
    noconfigdirs="$noconfigdirs rcs"
    ;;
  ppc*-*-pe)
    noconfigdirs="$noconfigdirs patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl gnuserv"
    ;;
  powerpc-*-beos*)
    noconfigdirs="$noconfigdirs tk itcl libgui gdb dejagnu readline"
    ;;
esac


AC_ARG_ENABLE(libada,
[  --enable-libada        Builds libada directory],
ENABLE_LIBADA=$enableval,
ENABLE_LIBADA=yes)
if test "${ENABLE_LIBADA}" != "yes" ; then
  noconfigdirs="$noconfigdirs gnattools"
fi

AC_ARG_ENABLE(libssp,
[  --enable-libssp        Builds libssp directory],
ENABLE_LIBSSP=$enableval,
ENABLE_LIBSSP=yes)

# Save it here so that, even in case of --enable-libgcj, if the Java
# front-end isn't enabled, we still get libgcj disabled.
libgcj_saved=$libgcj
case $enable_libgcj in
yes)
  # If we reset it here, it won't get added to noconfigdirs in the
  # target-specific build rules, so it will be forcibly enabled
  # (unless the Java language itself isn't enabled).
  libgcj=
  ;;
no)
  # Make sure we get it printed in the list of not supported target libs.
  noconfigdirs="$noconfigdirs ${libgcj}"
  ;;
esac


# Disable libmudflap on some systems.
if test x$enable_libmudflap = x ; then
    case "${target}" in
    *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
        # Enable libmudflap by default in GNU and friends.
	;;
    *-*-freebsd*)
        # Enable libmudflap by default in FreeBSD.
	;;
    *)
        # Disable it by default everywhere else.
	noconfigdirs="$noconfigdirs target-libmudflap"
	;;
    esac
fi

# Disable libgomp on non POSIX hosted systems.
if test x$enable_libgomp = x ; then
    # Enable libgomp by default on hosted POSIX systems.
    case "${target}" in
    *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
	;;
    *-*-netbsd* | *-*-freebsd* | *-*-openbsd*)
	;;
    *-*-solaris2* | *-*-sysv4* | *-*-irix6* | *-*-osf* | *-*-hpux11*)
	;;
    *-*-darwin* | *-*-aix*)
	;;
    *)
	noconfigdirs="$noconfigdirs target-libgomp"
	;;
    esac
fi


case "${target}" in
  *-*-chorusos)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;;
  powerpc-*-darwin* | i[[3456789]]86-*-darwin*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb gprof"
    noconfigdirs="$noconfigdirs sim target-rda"
    ;;
  *-*-darwin*)
    noconfigdirs="$noconfigdirs ld gas gdb gprof"
    noconfigdirs="$noconfigdirs sim target-rda"
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  *-*-freebsd[[12]] | *-*-freebsd[[12]].* | *-*-freebsd*aout*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;;
  *-*-freebsd*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    if test "x$with_gmp" = x && test "x$with_gmp_dir" = x \
	&& test -f /usr/local/include/gmp.h; then
      with_gmp=/usr/local
    fi

    # Skip some stuff that's unsupported on some FreeBSD configurations.
    case "${target}" in
      i*86-*-*) ;;
      alpha*-*-*) ;;
      *)
	noconfigdirs="$noconfigdirs ${libgcj}"
	;;
    esac
    ;;
  *-*-kaos*)
    # Remove unsupported stuff on all kaOS configurations.
    skipdirs="target-libiberty ${libgcj} target-libstdc++-v3 target-librx"
    skipdirs="$skipdirs target-libobjc target-examples target-groff target-gperf"
    skipdirs="$skipdirs zlib fastjar target-libjava target-boehm-gc target-zlib"
    noconfigdirs="$noconfigdirs target-libgloss"
    ;;
  *-*-netbsd*)
    # Skip some stuff on all NetBSD configurations.
    noconfigdirs="$noconfigdirs target-newlib target-libiberty target-libgloss"

    # Skip some stuff that's unsupported on some NetBSD configurations.
    case "${target}" in
      i*86-*-netbsdelf*) ;;
      arm*-*-netbsdelf*) ;;
      *)
	noconfigdirs="$noconfigdirs ${libgcj}"
	;;
    esac
    ;;
  *-*-netware*)
    noconfigdirs="$noconfigdirs target-newlib target-libiberty target-libgloss ${libgcj} target-libmudflap"
    ;;
  *-*-rtems*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
    # The tpf target doesn't support gdb yet.
  *-*-tpf*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libiberty ${libgcj} target-libmudflap gdb tcl tk libgui itcl"
    ;;
  *-*-uclinux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-rda ${libgcj}"
    ;;
  *-*-vxworks*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libiberty target-libstdc++-v3 ${libgcj}"
    ;;
  alpha*-dec-osf*)
    # ld works, but does not support shared libraries.
    # newlib is not 64 bit ready.  I'm not sure about fileutils.
    # gas doesn't generate exception information.
    noconfigdirs="$noconfigdirs gas ld fileutils target-newlib target-libgloss"
    ;;
  alpha*-*-*vms*)
    noconfigdirs="$noconfigdirs gdb ld target-newlib target-libgloss ${libgcj}"
    ;;
  alpha*-*-linux*)
    # newlib is not 64 bit ready
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
  alpha*-*-*)
    # newlib is not 64 bit ready
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;;
  am33_2.0-*-linux*)
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
    ;;
  sh-*-linux*)
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
    ;;    
  sh*-*-pe|mips*-*-pe|*arm-wince-pe)
    noconfigdirs="$noconfigdirs ${libgcj}"
    noconfigdirs="$noconfigdirs target-examples"
    noconfigdirs="$noconfigdirs target-libiberty texinfo send-pr"
    noconfigdirs="$noconfigdirs tcl tk itcl libgui sim"
    noconfigdirs="$noconfigdirs expect dejagnu"
    # the C++ libraries don't build on top of CE's C libraries
    noconfigdirs="$noconfigdirs target-libstdc++-v3"
    noconfigdirs="$noconfigdirs target-newlib"
    case "${host}" in
      *-*-cygwin*) ;; # keep gdb and readline
      *) noconfigdirs="$noconfigdirs gdb readline"
	 ;;
    esac
    ;;
  arc-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  arm-semi-aof )
    ;;
  arm-*-coff | strongarm-*-coff | xscale-*-coff)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  arm-*-elf* | strongarm-*-elf* | xscale-*-elf* | arm*-*-eabi* )
    noconfigdirs="$noconfigdirs target-libffi target-qthreads"
    ;;
  arm*-*-linux-gnueabi)
    noconfigdirs="$noconfigdirs target-libffi target-qthreads"
    noconfigdirs="$noconfigdirs target-libjava target-libobjc"
    ;;
  arm*-*-symbianelf*)
    noconfigdirs="$noconfigdirs ${libgcj} target-libiberty"
    ;;
  arm-*-pe*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  thumb-*-coff)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  thumb-*-elf)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  thumb-*-pe)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  arm-*-riscix*)
    noconfigdirs="$noconfigdirs ld target-libgloss ${libgcj}"
    ;;
  avr-*-*)
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
    ;;
  bfin-*-*)
    noconfigdirs="$noconfigdirs gdb"
    if test x${is_cross_compiler} != xno ; then
      target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
    ;;
  c4x-*-* | tic4x-*-*)
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
    ;;
  c54x*-*-* | tic54x-*-*)
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj} gcc gdb newlib"
    ;;
  cris-*-* | crisv32-*-*)
    unsupported_languages="$unsupported_languages java"
    case "${target}" in
      *-*-aout)
	unsupported_languages="$unsupported_languages fortran"
	noconfigdirs="$noconfigdirs target-libffi target-boehm-gc";;
      *-*-elf)
	unsupported_languages="$unsupported_languages fortran"
	noconfigdirs="$noconfigdirs target-boehm-gc";;
      *-*-linux*)
	noconfigdirs="$noconfigdirs target-newlib target-libgloss";;
      *)
	unsupported_languages="$unsupported_languages fortran"
	noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss";;
    esac
    ;;
  crx-*-*)
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-mudflap ${libgcj}"
    ;;
  d10v-*-*)
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
    ;;
  d30v-*-*)
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
    ;;
  fr30-*-elf*)
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
    ;;
  frv-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  h8300*-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  h8500-*-*)
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
    ;;
  hppa1.1-*-osf* | hppa1.1-*-bsd* )
    ;;
  hppa*64*-*-linux* | parisc*64*-*-linux*)
    # In this case, it's because the hppa64-linux target is for
    # the kernel only at this point and has no libc, and thus no
    # headers, crt*.o, etc., all of which are needed by these.
    noconfigdirs="$noconfigdirs target-zlib"
    ;;
  parisc*-*-linux* | hppa*-*-linux*)
    ;;
  hppa*-*-*elf* | \
  hppa*-*-lites* | \
  hppa*-*-openbsd* | \
  hppa*64*-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  hppa*-hp-hpux11*)
    noconfigdirs="$noconfigdirs ld shellutils"
    ;;
  hppa*-*-*)
    # According to Alexandre Oliva <aoliva@@redhat.com>, libjava won't
    # build on HP-UX 10.20.
    noconfigdirs="$noconfigdirs ld shellutils ${libgcj}"
    ;;
  i960-*-*)
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
    ;;
  ia64*-*-elf*)
    # No gdb support yet.
    noconfigdirs="$noconfigdirs readline mmalloc libgui itcl gdb"
    ;;
  ia64*-**-hpux*)
    # No gdb or ld support yet.
    noconfigdirs="$noconfigdirs ${libgcj} readline mmalloc libgui itcl gdb ld"
    ;;
  i370-*-opened*)
    ;;
  i[[3456789]]86-*-coff | i[[3456789]]86-*-elf)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  i[[3456789]]86-*-linux*)
    # The GCC port for glibc1 has no MD_FALLBACK_FRAME_STATE_FOR, so let's
    # not build java stuff by default.
    case "${target}" in
      *-*-*libc1*)
	noconfigdirs="$noconfigdirs ${libgcj}";;
    esac

    # This section makes it possible to build newlib natively on linux.
    # If we are using a cross compiler then don't configure newlib.
    if test x${is_cross_compiler} != xno ; then
      noconfigdirs="$noconfigdirs target-newlib"
    fi
    noconfigdirs="$noconfigdirs target-libgloss"
    # If we are not using a cross compiler, do configure newlib.
    # Note however, that newlib will only be configured in this situation
    # if the --with-newlib option has been given, because otherwise
    # 'target-newlib' will appear in skipdirs.
    ;;
  i[[3456789]]86-*-mingw32*)
    target_configdirs="$target_configdirs target-winsup"
    noconfigdirs="$noconfigdirs expect target-libgloss target-newlib ${libgcj}"
    ;;    
  x86_64-*-mingw*)
    target_configdirs="$target_configdirs target-winsup"
    noconfigdirs="$noconfigdirs expect target-libgloss target-newlib ${libgcj}"
    ;;    
  *-*-cygwin*)
    target_configdirs="$target_configdirs target-libtermcap target-winsup"
    noconfigdirs="$noconfigdirs target-gperf target-libgloss ${libgcj}"
    # always build newlib if winsup directory is present.
    if test -d "$srcdir/winsup/cygwin"; then
      skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'`
    elif test -d "$srcdir/newlib"; then
      echo "Warning: winsup/cygwin is missing so newlib can't be built."
    fi
    ;;    
  i[[3456789]]86-moss-msdos | i[[3456789]]86-*-moss* | \
  i[[3456789]]86-*-uwin* | i[[3456789]]86-*-interix* )
    ;;
  i[[3456789]]86-*-pe)
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
    ;;
  i[[3456789]]86-*-sco3.2v5*)
    # The linker does not yet know about weak symbols in COFF,
    # and is not configured to handle mixed ELF and COFF.
    noconfigdirs="$noconfigdirs ld target-libgloss ${libgcj}"
    ;;
  i[[3456789]]86-*-sco*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
    ;;
  i[[3456789]]86-*-solaris2*)
    noconfigdirs="$noconfigdirs target-libgloss"
    ;;
  i[[3456789]]86-*-sysv4*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  i[[3456789]]86-*-beos*)
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
    ;;
  i[[3456789]]86-*-rdos*)
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss"
    ;;
  m32r-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  m68hc11-*-*|m6811-*-*|m68hc12-*-*|m6812-*-*)
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
    ;;
  m68k-*-elf*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  m68k-*-coff*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  mcore-*-pe*)
  # The EPOC C++ environment does not support exceptions or rtti,
  # and so building libstdc++-v3 tends not to always work.
    noconfigdirs="$noconfigdirs target-libstdc++-v3"
    ;;
  mmix-*-*)
    noconfigdirs="$noconfigdirs target-libffi target-boehm-gc gdb libgloss"
    unsupported_languages="$unsupported_languages fortran java"
    ;;
  mn10200-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  mn10300-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  mt-*-*)
    noconfigdirs="$noconfigdirs sim"
    ;;
  powerpc-*-aix*)
    # copied from rs6000-*-* entry
    noconfigdirs="$noconfigdirs gprof target-libgloss target-libssp ${libgcj}"
    ;;
  powerpc*-*-winnt* | powerpc*-*-pe* | ppc*-*-pe)
    target_configdirs="$target_configdirs target-winsup"
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl gnuserv ${libgcj}"
    # always build newlib.
    skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'`
    ;;
    # This is temporary until we can link against shared libraries
  powerpcle-*-solaris*)
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl gnuserv ${libgcj}"
    ;;
  powerpc-*-beos*)
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
    ;;
  powerpc-*-eabi)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  powerpc-*-eabi* | powerpcle-*-eabi* | powerpc-*-rtems* )
    ;;
  rs6000-*-lynxos*)
    noconfigdirs="$noconfigdirs target-newlib gprof ${libgcj}"
    ;;
  rs6000-*-aix*)
    noconfigdirs="$noconfigdirs gprof target-libgloss target-libssp ${libgcj}"
    ;;
  rs6000-*-*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
    ;;
  m68k-apollo-*)
    noconfigdirs="$noconfigdirs ld binutils gprof target-libgloss ${libgcj}"
    ;;
  mips*-*-irix5*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
    ;;
  mips*-*-irix6*)
    # Linking libjava exceeds command-line length limits on at least
    # IRIX 6.2, but not on IRIX 6.5.
    # Also, boehm-gc won't build on IRIX 6.5, according to Jeffrey Oldham
    # <oldham@@codesourcery.com>
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
    ;;
  mips*-*-bsd*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
    ;;
  mips64*-*-linux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;;
  mips*-*-linux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
  mips*-*-*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
    ;;
  romp-*-*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes target-libgloss ${libgcj}"
    ;;
  sh-*-* | sh64-*-*)
    case "${host}" in
      i[[3456789]]86-*-vsta) ;; # don't add gprof back in
      i[[3456789]]86-*-go32*) ;; # don't add gprof back in
      i[[3456789]]86-*-msdosdjgpp*) ;; # don't add gprof back in
      *) skipdirs=`echo " ${skipdirs} " | sed -e 's/ gprof / /'` ;;
    esac
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  sparc-*-elf*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  sparc64-*-elf*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  sparclite-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  sparc-*-sunos4*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
           noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss"
    else
           use_gnu_ld=no
    fi
    ;;
  sparc-*-solaris2.[[0-6]] | sparc-*-solaris2.[[0-6]].*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  sparc-*-solaris* | sparc64-*-solaris* | sparcv9-*-solaris*)
    ;;
  spu-*-*)
    skipdirs="target-libssp"
    ;;
  v810-*-*)
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld target-libstdc++-v3 opcodes target-libgloss ${libgcj}"
    ;;
  v850-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  v850e-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  v850ea-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  vax-*-vms)
    noconfigdirs="$noconfigdirs bfd binutils gdb ld target-newlib opcodes target-libgloss ${libgcj}"
    ;;
  vax-*-*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;;
  xtensa-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  ip2k-*-*)
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
    ;;
  *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
  *-*-lynxos*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;; 
  *-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
esac

# If we aren't building newlib, then don't build libgloss, since libgloss
# depends upon some newlib header files.
case "${noconfigdirs}" in
  *target-libgloss*) ;;
  *target-newlib*) noconfigdirs="$noconfigdirs target-libgloss" ;;
esac

# Work in distributions that contain no compiler tools, like Autoconf.
tentative_cc=""
host_makefile_frag=/dev/null
if test -d ${srcdir}/config ; then
case "${host}" in
  m68k-hp-hpux*)
    # Avoid "too much defining" errors from HPUX compiler.
    tentative_cc="cc -Wp,-H256000"
    # If "ar" in $PATH is GNU ar, the symbol table may need rebuilding.
    # If it's HP/UX ar, this should be harmless.
    RANLIB="ar ts"
    ;;
  m68k-apollo-sysv*)
    tentative_cc="cc -A ansi -A runtype,any -A systype,any -U__STDC__ -DUSG"
    ;;
  m68k-apollo-bsd*)
    #None of the Apollo compilers can compile gas or binutils.  The preprocessor
    # chokes on bfd, the compiler won't let you assign integers to enums, and
    # other problems.  Defining CC to gcc is a questionable way to say "don't use
    # the apollo compiler" (the preferred version of GCC could be called cc,
    # or whatever), but I'm not sure leaving CC as cc is any better...
    #CC=cc -A ansi -A runtype,any -A systype,any -U__STDC__ -DNO_STDARG
    # Used to have BISON=yacc.
    tentative_cc=gcc
    ;;
  m88k-dg-dgux*)
    tentative_cc="gcc -Wall -ansi -D__using_DGUX"
    ;;
  m88k-harris-cxux*)
    # Under CX/UX, we want to tell the compiler to use ANSI mode.
    tentative_cc="cc -Xa"
    host_makefile_frag="config/mh-cxux"
    ;;
  m88k-motorola-sysv*)
    ;;
  mips*-dec-ultrix*)
    tentative_cc="cc -Wf,-XNg1000"
    host_makefile_frag="config/mh-decstation"
    ;;
  mips*-nec-sysv4*)
    # The C compiler on NEC MIPS SVR4 needs bigger tables.
    tentative_cc="cc -ZXNd=5000 -ZXNg=1000"
    host_makefile_frag="config/mh-necv4"
    ;;
  mips*-sgi-irix4*)
    # Tell compiler to use K&R C.  We can't compile under the SGI Ansi
    # environment.  Also bump switch table size so that cp-parse will
    # compile.  Bump string length limit so linker builds.
    tentative_cc="cc -cckr -Wf,-XNg1500 -Wf,-XNk1000 -Wf,-XNh2000 -Wf,-XNl8192"
    ;;
  mips*-*-sysv4*)
    host_makefile_frag="config/mh-sysv4"
    ;;
  mips*-*-sysv*)
    # This is for a MIPS running RISC/os 4.52C.

    # This is needed for GDB, but needs to be in the top-level make because
    # if a library is compiled with the bsd headers and gets linked with the
    # sysv system libraries all hell can break loose (e.g. a jmp_buf might be
    # a different size).
    # ptrace(2) apparently has problems in the BSD environment.  No workaround is
    # known except to select the sysv environment.  Could we use /proc instead?
    # These "sysv environments" and "bsd environments" often end up being a pain.
    #
    # This is not part of CFLAGS because perhaps not all C compilers have this
    # option.
    tentative_cc="cc -systype sysv"
    ;;
  i370-ibm-opened*)
    tentative_cc="c89"
    ;;
  i[[3456789]]86-*-sysv5*)
    host_makefile_frag="config/mh-sysv5"
    ;;
  i[[3456789]]86-*-dgux*)
    tentative_cc="gcc -Wall -ansi -D__using_DGUX"
    host_makefile_frag="config/mh-dgux386"
    ;;
  i[[3456789]]86-ncr-sysv4.3*)
    # The MetaWare compiler will generate a copyright message unless you
    # turn it off by adding the -Hnocopyr flag.
    tentative_cc="cc -Hnocopyr"
    ;;
  i[[3456789]]86-ncr-sysv4*)
    # for an NCR 3000 (i486/SVR4) system.
    # The NCR 3000 ships with a MetaWare compiler installed as /bin/cc.
    # This compiler not only emits obnoxious copyright messages every time
    # you run it, but it chokes and dies on a whole bunch of GNU source
    # files.  Default to using the AT&T compiler installed in /usr/ccs/ATT/cc.
    tentative_cc="/usr/ccs/ATT/cc"
    host_makefile_frag="config/mh-ncr3000"
    ;;
  i[[3456789]]86-*-sco3.2v5*)
    ;;
  i[[3456789]]86-*-sco*)
    # The native C compiler botches some simple uses of const.  Unfortunately,
    # it doesn't defined anything like "__sco__" for us to test for in ansidecl.h.
    tentative_cc="cc -Dconst="
    host_makefile_frag="config/mh-sco"
    ;;
  i[[3456789]]86-*-udk*)
    host_makefile_frag="config/mh-sysv5"
    ;;
  i[[3456789]]86-*-solaris2*)
    host_makefile_frag="config/mh-sysv4"
    ;;
  i[[3456789]]86-*-msdosdjgpp*)
    host_makefile_frag="config/mh-djgpp"
    ;;
  *-cygwin*)
    host_makefile_frag="config/mh-cygwin"
    ;;
  *-mingw32*)
    ;;
  *-mingw64*)
    ;;
  *-interix*)
    host_makefile_frag="config/mh-interix"
    ;;
  vax-*-ultrix2*)
    # The old BSD pcc isn't up to compiling parts of gdb so use gcc
    tentative_cc=gcc
    ;;
  *-*-solaris2*)
    host_makefile_frag="config/mh-solaris"
    ;;
  m68k-sun-sunos*)
    # Sun's C compiler needs the -J flag to be able to compile cp-parse.c
    # without overflowing the jump tables (-J says to use a 32 bit table)
    tentative_cc="cc -J"
    ;;
  *-hp-hpux*)
    tentative_cc="cc -Wp,-H256000"
    ;;
  *-*-hiux*)
    tentative_cc="cc -Wp,-H256000"
    ;;
  rs6000-*-lynxos*)
    # /bin/cc is less than useful for our purposes.  Always use GCC
    tentative_cc="/usr/cygnus/progressive/bin/gcc"
    host_makefile_frag="config/mh-lynxrs6k"
    ;;
  powerpc-*-darwin*)
    host_makefile_frag="config/mh-ppc-darwin"
    ;;
  powerpc-*-aix*)
    host_makefile_frag="config/mh-ppc-aix"
    ;;
  rs6000-*-aix*)
    host_makefile_frag="config/mh-ppc-aix"
    ;;
  *-*-lynxos*)
    # /bin/cc is less than useful for our purposes.  Always use GCC
    tentative_cc="/bin/gcc"
    ;;
  *-*-sysv4*)
    host_makefile_frag="config/mh-sysv4"
    ;;
  # This is placed last to prevent interfering with the cases above.
  i[[3456789]]86-*-*)
    # Build the stage2 and stage3 compilers with -fomit-frame-pointer.
    host_makefile_frag="config/mh-x86omitfp"
    ;;
esac
fi

# If we aren't going to be using gcc, see if we can extract a definition
# of CC from the fragment.
# Actually, use the 'pre-extracted' version above.
if test -z "${CC}" && test "${build}" = "${host}" ; then
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  found=
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/gcc; then
      found=yes
      break
    fi
  done
  IFS="$save_ifs"
  if test -z "${found}" && test -n "${tentative_cc}" ; then
    CC=$tentative_cc
  fi
fi

if test "${build}" != "${host}" ; then
  # If we are doing a Canadian Cross, in which the host and build systems
  # are not the same, we set reasonable default values for the tools.

  CC=${CC-${host_alias}-gcc}
  CFLAGS=${CFLAGS-"-g -O2"}
  CXX=${CXX-${host_alias}-c++}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
  CC_FOR_BUILD=${CC_FOR_BUILD-gcc}

else
  # Set reasonable default values for some tools even if not Canadian.
  # Of course, these are different reasonable default values, originally
  # specified directly in the Makefile.
  # We don't export, so that autoconf can do its job.
  # Note that all these settings are above the fragment inclusion point
  # in Makefile.in, so can still be overridden by fragments.
  # This is all going to change when we autoconfiscate...

  CC_FOR_BUILD="\$(CC)"
  AC_PROG_CC

  # We must set the default linker to the linker used by gcc for the correct
  # operation of libtool.  If LD is not defined and we are using gcc, try to
  # set the LD default to the ld used by gcc.
  if test -z "$LD"; then
    if test "$GCC" = yes; then
      case $build in
      *-*-mingw*)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\015'` ;;
      *)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;
      esac
      case $gcc_prog_ld in
      # Accept absolute paths.
      [[\\/]* | [A-Za-z]:[\\/]*)]
        LD="$gcc_prog_ld" ;;
      esac
    fi
  fi

  CXX=${CXX-"c++"}
  CFLAGS=${CFLAGS-"-g"}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
fi

ACX_PROG_GNAT
ACX_PROG_CMP_IGNORE_INITIAL

# Check for GMP and MPFR
gmplibs="-lmpfr -lgmp"
gmpinc=
have_gmp=no

# Specify a location for mpfr
# check for this first so it ends up on the link line before gmp.
AC_ARG_WITH(mpfr-dir, [  --with-mpfr-dir=PATH    This option has been REMOVED],
  AC_MSG_ERROR([The --with-mpfr-dir=PATH option has been removed.
Use --with-mpfr=PATH or --with-mpfr-include=PATH plus --with-mpfr-lib=PATH]))

AC_ARG_WITH(mpfr, [  --with-mpfr=PATH        Specify prefix directory for installed MPFR package
                          Equivalent to --with-mpfr-include=PATH/include
                          plus --with-mpfr-lib=PATH/lib])
AC_ARG_WITH(mpfr_include, [  --with-mpfr-include=PATH
                          Specify directory for installed MPFR include files])
AC_ARG_WITH(mpfr_lib, [  --with-mpfr-lib=PATH    Specify the directory for the installed MPFR library])

if test "x$with_mpfr" != x; then
  gmplibs="-L$with_mpfr/lib $gmplibs"
  gmpinc="-I$with_mpfr/include"
fi
if test "x$with_mpfr_include" != x; then
  gmpinc="-I$with_mpfr_include"
fi
if test "x$with_mpfr_lib" != x; then
  gmplibs="-L$with_mpfr_lib $gmplibs"
fi
if test "x$with_mpfr$with_mpfr_include$with_mpfr_lib" = x && test -d ${srcdir}/mpfr; then
  gmplibs='-L$$r/$(HOST_SUBDIR)/mpfr/.libs -L$$r/$(HOST_SUBDIR)/mpfr/_libs '"$gmplibs"
  gmpinc='-I$$r/$(HOST_SUBDIR)/mpfr -I$$s/mpfr '"$gmpinc"
  # Do not test the mpfr version.  Assume that it is sufficient, since
  # it is in the source tree, and the library has not been built yet
  # but it would be included on the link line in the version check below
  # hence making the test fail.
  have_gmp=yes
fi

# Specify a location for gmp
AC_ARG_WITH(gmp-dir, [  --with-gmp-dir=PATH     This option has been REMOVED],
  AC_MSG_ERROR([The --with-gmp-dir=PATH option has been removed.
Use --with-gmp=PATH or --with-gmp-include=PATH plus --with-gmp-lib=PATH]))

AC_ARG_WITH(gmp, [  --with-gmp=PATH         Specify prefix directory for the installed GMP package
                          Equivalent to --with-gmp-include=PATH/include
                          plus --with-gmp-lib=PATH/lib])
AC_ARG_WITH(gmp_include, [  --with-gmp-include=PATH Specify directory for installed GMP include files])
AC_ARG_WITH(gmp_lib, [  --with-gmp-lib=PATH     Specify the directory for the installed GMP library])


if test "x$with_gmp" != x; then
  gmplibs="-L$with_gmp/lib $gmplibs"
  gmpinc="-I$with_gmp/include $gmpinc"
fi
if test "x$with_gmp_include" != x; then
  gmpinc="-I$with_gmp_include $gmpinc"
fi
if test "x$with_gmp_lib" != x; then
  gmplibs="-L$with_gmp_lib $gmplibs"
fi
if test "x$with_gmp$with_gmp_include$with_gmp_lib" = x && test -d ${srcdir}/gmp; then
  gmplibs='-L$$r/$(HOST_SUBDIR)/gmp/.libs -L$$r/$(HOST_SUBDIR)/gmp/_libs '"$gmplibs"
  gmpinc='-I$$r/$(HOST_SUBDIR)/gmp -I$$s/gmp '"$gmpinc"
  # Do not test the gmp version.  Assume that it is sufficient, since
  # it is in the source tree, and the library has not been built yet
  # but it would be included on the link line in the version check below
  # hence making the test fail.
  have_gmp=yes
fi

if test -d ${srcdir}/gcc && test "x$have_gmp" = xno; then
  have_gmp=yes
  saved_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS $gmpinc"
  # Check GMP actually works
  AC_MSG_CHECKING([for correct version of gmp.h])
  AC_TRY_COMPILE([#include "gmp.h"],[
  #if __GNU_MP_VERSION < 4 || (__GNU_MP_VERSION == 4 && __GNU_MP_VERSION_MINOR < 1)
  choke me
  #endif
  ], [AC_MSG_RESULT([yes])], [AC_MSG_RESULT([no]); have_gmp=no])

  if test x"$have_gmp" = xyes; then
    saved_LIBS="$LIBS"
    LIBS="$LIBS $gmplibs"
    dnl MPFR 2.2.0 is acceptable but buggy, MPFR 2.2.1 is better.
    AC_MSG_CHECKING([for correct version of mpfr.h])
    AC_TRY_LINK([#include <gmp.h>
    #include <mpfr.h>],[
    #if MPFR_VERSION < MPFR_VERSION_NUM(2,2,0)
    choke me
    #endif
    mpfr_t n; mpfr_init(n);
    mpfr_t x; mpfr_init(x);
    int t;
    mpfr_atan2 (n, n, x, GMP_RNDN);
    mpfr_erfc (n, x, GMP_RNDN);
    mpfr_subnormalize (x, t, GMP_RNDN);
    ], [AC_TRY_LINK([#include <gmp.h>
    #include <mpfr.h>],[
    #if MPFR_VERSION < MPFR_VERSION_NUM(2,2,1)
    choke me
    #endif
    mpfr_t n; mpfr_init(n);
    ], [AC_MSG_RESULT([yes])], [AC_MSG_RESULT([buggy but acceptable])])],
     [AC_MSG_RESULT([no]); have_gmp=no])
      LIBS="$saved_LIBS"
  fi
  CFLAGS="$saved_CFLAGS"

  if test x$have_gmp != xyes; then
    AC_MSG_ERROR([Building GCC requires GMP 4.1+ and MPFR 2.2.1+.
Try the --with-gmp and/or --with-mpfr options to specify their locations.
Copies of these libraries' source code can be found at their respective
hosting sites as well as at ftp://gcc.gnu.org/pub/gcc/infrastructure/.
See also http://gcc.gnu.org/install/prerequisites.html for additional info.
If you obtained GMP and/or MPFR from a vendor distribution package, make
sure that you have installed both the libraries and the header files.
They may be located in separate packages.])
  fi
fi

# Flags needed for both GMP and/or MPFR
AC_SUBST(gmplibs)
AC_SUBST(gmpinc)

# By default, C is the only stage 1 language.
stage1_languages=,c,

# Figure out what language subdirectories are present.
# Look if the user specified --enable-languages="..."; if not, use
# the environment variable $LANGUAGES if defined. $LANGUAGES might
# go away some day.
# NB:  embedded tabs in this IF block -- do not untabify
if test -d ${srcdir}/gcc; then
  if test x"${enable_languages+set}" != xset; then
    if test x"${LANGUAGES+set}" = xset; then
      enable_languages="${LANGUAGES}"
        echo configure.in: warning: setting LANGUAGES is deprecated, use --enable-languages instead 1>&2
    else
      enable_languages=all
    fi
  else
    if test x"${enable_languages}" = x ||
       test x"${enable_languages}" = xyes;
       then
      echo configure.in: --enable-languages needs at least one language argument 1>&2
      exit 1
    fi
  fi
  enable_languages=`echo "${enable_languages}" | sed -e 's/[[ 	,]][[ 	,]]*/,/g' -e 's/,$//'`

  # 'f95' is the old name for the 'fortran' language. We issue a warning
  # and make the substitution.
  case ,${enable_languages}, in
    *,f95,*)
      echo configure.in: warning: 'f95' as language name is deprecated, use 'fortran' instead 1>&2
      enable_languages=`echo "${enable_languages}" | sed -e 's/f95/fortran/g'`
      ;;
  esac

  # First scan to see if an enabled language requires some other language.
  # We assume that a given config-lang.in will list all the language
  # front ends it requires, even if some are required indirectly.
  for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
    case ${lang_frag} in
      ..) ;;
      # The odd quoting in the next line works around
      # an apparent bug in bash 1.12 on linux.
      ${srcdir}/gcc/[[*]]/config-lang.in) ;;
      *)
        # From the config-lang.in, get $language, $lang_requires
        language=
        lang_requires=
        . ${lang_frag}
        for other in ${lang_requires} ; do
          case ,${enable_languages}, in
	    *,$other,*) ;;
	    *,all,*) ;;
	    *,$language,*)
	      echo " \`$other' language required by \`$language'; enabling" 1>&2
	      enable_languages="${enable_languages},${other}"
	      ;;
	  esac
        done
        ;;
    esac
  done

  new_enable_languages=,c,
  missing_languages=`echo ",$enable_languages," | sed -e s/,all,/,/ -e s/,c,/,/ `
  potential_languages=,c,

  for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
    case ${lang_frag} in
      ..) ;;
      # The odd quoting in the next line works around
      # an apparent bug in bash 1.12 on linux.
      ${srcdir}/gcc/[[*]]/config-lang.in) ;;
      *)
        # From the config-lang.in, get $language, $target_libs, 
        # $lang_dirs, $boot_language, and $build_by_default
        language=
        target_libs=
        lang_dirs=
        subdir_requires=
        boot_language=no
        build_by_default=yes
        . ${lang_frag}
        if test x${language} = x; then
          echo "${lang_frag} doesn't set \$language." 1>&2
          exit 1
        fi

        case ,${enable_languages}, in
          *,${language},*)
            # Language was explicitly selected; include it.
            add_this_lang=yes
            ;;
          *,all,*)
            # 'all' was selected, select it if it is a default language
            add_this_lang=${build_by_default}
            ;;
          *)
            add_this_lang=no
            ;;
        esac

        # Disable languages that need other directories if these aren't available.
	for i in $subdir_requires; do
	  test -f "$srcdir/gcc/$i/config-lang.in" && continue
	  case ,${enable_languages}, in
            *,${language},*)
              # Specifically requested language; tell them.
              AC_MSG_ERROR([The gcc/$i directory contains parts of $language but is missing])
              ;;
            *)
              # Silently disable.
              add_this_lang=unsupported
              ;;
          esac
	done

        # Disable Ada if no preexisting GNAT is available.
        case ,${enable_languages},:${language}:${have_gnat} in
          *,${language},*:ada:no)
            # Specifically requested language; tell them.
            AC_MSG_ERROR([GNAT is required to build $language])
            ;;
          *:ada:no)
            # Silently disable.
            add_this_lang=unsupported
            ;;
        esac

	# Disable a language that is unsupported by the target.
	case " $unsupported_languages " in
	  *" $language "*)
	    add_this_lang=unsupported
	    ;;
	esac

	case $add_this_lang in
	  unsupported)
            # Remove language-dependent dirs.
            eval noconfigdirs='"$noconfigdirs "'\"$target_libs $lang_dirs\"
	    ;;
	  no)
            # Remove language-dependent dirs; still show language as supported.
            eval noconfigdirs='"$noconfigdirs "'\"$target_libs $lang_dirs\"
            potential_languages="${potential_languages}${language},"
	    ;;
          yes)
	    new_enable_languages="${new_enable_languages}${language},"
            potential_languages="${potential_languages}${language},"
	    missing_languages=`echo "$missing_languages" | sed "s/,$language,/,/"`
	    case ${boot_language} in
	      yes)
		# Add to (comma-separated) list of stage 1 languages.
		stage1_languages="${stage1_languages}${language},"
		;;
	    esac
	    ;;
        esac
        ;;
    esac
  done

  AC_ARG_ENABLE(stage1-languages,
[  --enable-stage1-languages[=all]   choose additional languages to build during
                          stage1.  Mostly useful for compiler development.],
  [case ,${enable_stage1_languages}, in
    ,no,|,,)
      # Set it to something that will have no effect in the loop below
      enable_stage1_languages=c ;;
    ,yes,)
      enable_stage1_languages=`echo $new_enable_languages | \
	sed -e "s/^,//" -e "s/,$//" ` ;;
    *,all,*)
      enable_stage1_languages=`echo ,$enable_stage1_languages, | \
	sed -e "s/,all,/$new_enable_languages/" -e "s/^,//" -e "s/,$//" ` ;;
  esac

  # Add "good" languages from enable_stage1_languages to stage1_languages,
  # while "bad" languages go in missing_languages.  Leave no duplicates.
  for i in `echo $enable_stage1_languages | sed 's/,/ /g' `; do
    case $potential_languages in
      *,$i,*)
        case $stage1_languages in
          *,$i,*) ;;
          *) stage1_languages="$stage1_languages$i," ;;
        esac ;;
      *)
        case $missing_languages in
          *,$i,*) ;;
          *) missing_languages="$missing_languages$i," ;;
        esac ;;
     esac
  done])

  # Remove leading/trailing commas that were added for simplicity
  potential_languages=`echo "$potential_languages" | sed -e "s/^,//" -e "s/,$//"`
  missing_languages=`echo "$missing_languages" | sed -e "s/^,//" -e "s/,$//"`
  stage1_languages=`echo "$stage1_languages" | sed -e "s/^,//" -e "s/,$//"`
  new_enable_languages=`echo "$new_enable_languages" | sed -e "s/^,//" -e "s/,$//"`

  if test "x$missing_languages" != x; then
    AC_MSG_ERROR([
The following requested languages could not be built: ${missing_languages}
Supported languages are: ${potential_languages}])
  fi
  if test "x$new_enable_languages" != "x$enable_languages"; then
    echo The following languages will be built: ${new_enable_languages}
    enable_languages="$new_enable_languages"
  fi

  AC_SUBST(stage1_languages)
  ac_configure_args=`echo " $ac_configure_args" | sed -e 's/ --enable-languages=[[^ ]]*//' -e 's/$/ --enable-languages='"$enable_languages"/ `
fi

# Handle --disable-<component> generically.
for dir in $configdirs $build_configdirs $target_configdirs ; do
  dirname=`echo $dir | sed -e s/target-//g -e s/build-//g -e s/-/_/g`
  if eval test x\${enable_${dirname}} "=" xno ; then
    noconfigdirs="$noconfigdirs $dir"
  fi
done

# Check for Boehm's garbage collector
AC_ARG_ENABLE(objc-gc,
[  --enable-objc-gc       enable the use of Boehm's garbage collector with
                          the GNU Objective-C runtime.],
[case ,${enable_languages},:${enable_objc_gc}:${noconfigdirs} in
  *,objc,*:*:yes:*target-boehm-gc*)
    AC_MSG_ERROR([Boehm's garbage collector was requested yet not supported in this configuration])
    ;;
esac])

# Make sure we only build Boehm's garbage collector if required.
case ,${enable_languages},:${enable_objc_gc} in
  *,objc,*:yes)
    # Keep target-boehm-gc if requested for Objective-C.
    ;;
  *)
    # Otherwise remove target-boehm-gc depending on target-libjava.
    if echo " ${noconfigdirs} " | grep "target-libjava" >/dev/null 2>&1; then
      noconfigdirs="$noconfigdirs target-boehm-gc"
    fi
    ;;
esac

# Remove the entries in $skipdirs and $noconfigdirs from $configdirs,
# $build_configdirs and $target_configdirs.
# If we have the source for $noconfigdirs entries, add them to $notsupp.

notsupp=""
for dir in . $skipdirs $noconfigdirs ; do
  dirname=`echo $dir | sed -e s/target-//g -e s/build-//g`
  if test $dir != .  && echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    configdirs=`echo " ${configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
  if test $dir != .  && echo " ${build_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    build_configdirs=`echo " ${build_configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
  if test $dir != . && echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    target_configdirs=`echo " ${target_configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
done

# Sometimes the tools are distributed with libiberty but with no other
# libraries.  In that case, we don't want to build target-libiberty.
# Don't let libgcc imply libiberty either.
if test -n "${target_configdirs}" ; then
  libgcc=
  others=
  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do
    if test "$i" = "libgcc"; then
      libgcc=target-libgcc
    elif test "$i" != "libiberty" ; then
      if test -r $srcdir/$i/configure ; then
	others=yes;
	break;
      fi
    fi
  done
  if test -z "${others}" ; then
    target_configdirs=$libgcc
  fi
fi

# Quietly strip out all directories which aren't configurable in this tree.
# This relies on all configurable subdirectories being autoconfiscated, which
# is now the case.
build_configdirs_all="$build_configdirs"
build_configdirs=
for i in ${build_configdirs_all} ; do
  j=`echo $i | sed -e s/build-//g` 
  if test -f ${srcdir}/$j/configure ; then
    build_configdirs="${build_configdirs} $i"
  fi
done

configdirs_all="$configdirs"
configdirs=
for i in ${configdirs_all} ; do
  if test -f ${srcdir}/$i/configure ; then
    configdirs="${configdirs} $i"
  fi
done

target_configdirs_all="$target_configdirs"
target_configdirs=
for i in ${target_configdirs_all} ; do
  j=`echo $i | sed -e s/target-//g` 
  if test -f ${srcdir}/$j/configure ; then
    target_configdirs="${target_configdirs} $i"
  fi
done

# Produce a warning message for the subdirs we can't configure.
# This isn't especially interesting in the Cygnus tree, but in the individual
# FSF releases, it's important to let people know when their machine isn't
# supported by the one or two programs in a package.

if test -n "${notsupp}" && test -z "${norecursion}" ; then
  # If $appdirs is non-empty, at least one of those directories must still
  # be configured, or we error out.  (E.g., if the gas release supports a
  # specified target in some subdirs but not the gas subdir, we shouldn't
  # pretend that all is well.)
  if test -n "$appdirs" ; then
    for dir in $appdirs ; do
      if test -r $dir/Makefile.in ; then
	if echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
	if echo " ${target_configdirs} " | grep " target-${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
      fi
    done
    if test -n "$appdirs" ; then
      echo "*** This configuration is not supported by this package." 1>&2
      exit 1
    fi
  fi
  # Okay, some application will build, or we don't care to check.  Still
  # notify of subdirs not getting built.
  echo "*** This configuration is not supported in the following subdirectories:" 1>&2
  echo "    ${notsupp}" 1>&2
  echo "    (Any other directories should still work fine.)" 1>&2
fi

case "$host" in
  *msdosdjgpp*)
    enable_gdbtk=no ;;
esac

copy_dirs=

AC_ARG_WITH([build-sysroot], 
  [  --with-build-sysroot=sysroot
                          use sysroot as the system root during the build],
  [if test x"$withval" != x ; then
     SYSROOT_CFLAGS_FOR_TARGET="--sysroot=$withval"
   fi],
  [SYSROOT_CFLAGS_FOR_TARGET=])
AC_SUBST(SYSROOT_CFLAGS_FOR_TARGET)

# Handle --with-headers=XXX.  If the value is not "yes", the contents of
# the named directory are copied to $(tooldir)/sys-include.
if test x"${with_headers}" != x && test x"${with_headers}" != xno ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-headers is only supported when cross compiling
    exit 1
  fi
  if test x"${with_headers}" != xyes ; then
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    copy_dirs="${copy_dirs} ${with_headers} $x/${target_alias}/sys-include"
  fi
fi

# Handle --with-libs=XXX.  If the value is not "yes", the contents of
# the name directories are copied to $(tooldir)/lib.  Multiple directories
# are permitted.
if test x"${with_libs}" != x && test x"${with_libs}" != xno ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-libs is only supported when cross compiling
    exit 1
  fi
  if test x"${with_libs}" != xyes ; then
    # Copy the libraries in reverse order, so that files in the first named
    # library override files in subsequent libraries.
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    for l in ${with_libs}; do
      copy_dirs="$l $x/${target_alias}/lib ${copy_dirs}"
    done
  fi
fi

# Set with_gnu_as and with_gnu_ld as appropriate.
#
# This is done by determining whether or not the appropriate directory
# is available, and by checking whether or not specific configurations
# have requested that this magic not happen.
# 
# The command line options always override the explicit settings in 
# configure.in, and the settings in configure.in override this magic.
#
# If the default for a toolchain is to use GNU as and ld, and you don't 
# want to do that, then you should use the --without-gnu-as and
# --without-gnu-ld options for the configure script.

if test x${use_gnu_as} = x &&
   echo " ${configdirs} " | grep " gas " > /dev/null 2>&1 ; then
  with_gnu_as=yes
  extra_host_args="$extra_host_args --with-gnu-as"
fi

if test x${use_gnu_ld} = x &&
   echo " ${configdirs} " | grep " ld " > /dev/null 2>&1 ; then
  with_gnu_ld=yes
  extra_host_args="$extra_host_args --with-gnu-ld"
fi

# If using newlib, add --with-newlib to the extra_host_args so that gcc/configure
# can detect this case.

if test x${with_newlib} != xno && echo " ${target_configdirs} " | grep " target-newlib " > /dev/null 2>&1 ; then
  with_newlib=yes
  extra_host_args="$extra_host_args --with-newlib"
fi

# Handle ${copy_dirs}
set fnord ${copy_dirs}
shift
while test $# != 0 ; do
  if test -f $2/COPIED && test x"`cat $2/COPIED`" = x"$1" ; then
    :
  else
    echo Copying $1 to $2

    # Use the install script to create the directory and all required
    # parent directories.
    if test -d $2 ; then
      :
    else
      echo >config.temp
      ${srcdir}/install-sh -c -m 644 config.temp $2/COPIED
    fi

    # Copy the directory, assuming we have tar.
    # FIXME: Should we use B in the second tar?  Not all systems support it.
    (cd $1; tar -cf - .) | (cd $2; tar -xpf -)

    # It is the responsibility of the user to correctly adjust all
    # symlinks.  If somebody can figure out how to handle them correctly
    # here, feel free to add the code.

    echo $1 > $2/COPIED
  fi
  shift; shift
done

# Determine a target-dependent exec_prefix that the installed
# gcc will search in.  Keep this list sorted by triplet, with
# the *-*-osname triplets last.
md_exec_prefix=
case "${target}" in
  alpha*-*-*vms*)
    md_exec_prefix=/gnu/lib/gcc-lib
    ;;
  i[34567]86-pc-msdosdjgpp*)
    md_exec_prefix=/dev/env/DJDIR/bin
    ;;
  i[34567]86-*-sco3.2v5*)
    if test $with_gnu_as = yes; then
      md_exec_prefix=/usr/gnu/bin
    else
      md_exec_prefix=/usr/ccs/bin/elf
    fi
    ;;

  mn10300-*-* | \
  powerpc-*-chorusos* | \
  powerpc*-*-eabi* | \
  powerpc*-*-sysv* | \
  powerpc*-*-kaos* | \
  s390x-ibm-tpf*)
    md_exec_prefix=/usr/ccs/bin
    ;;
  sparc64-*-elf*)
    ;;
  v850*-*-*)
    md_exec_prefix=/usr/ccs/bin
    ;;
  xtensa-*-elf*)
    ;;

  *-*-beos* | \
  *-*-elf* | \
  *-*-hpux* | \
  *-*-netware* | \
  *-*-nto-qnx* | \
  *-*-rtems* | \
  *-*-solaris2* | \
  *-*-sysv[45]* | \
  *-*-vxworks* | \
  *-wrs-windiss)
    md_exec_prefix=/usr/ccs/bin
    ;;
esac

extra_arflags_for_target=
extra_nmflags_for_target=
extra_ranlibflags_for_target=
target_makefile_frag=/dev/null
case "${target}" in
  mep*-*-*)
    target_makefile_frag="config/mt-mep"
    ;;
  spu-*-*)
    target_makefile_frag="config/mt-spu"
    ;;
  *-*-netware*)
    target_makefile_frag="config/mt-netware"
    ;;
  *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
    target_makefile_frag="config/mt-gnu"
    ;;
  *-*-aix4.[[3456789]]* | *-*-aix[[56789]].*)
    # nm and ar from AIX 4.3 and above require -X32_64 flag to all ar and nm 
    # commands to handle both 32-bit and 64-bit objects.  These flags are
    # harmless if we're using GNU nm or ar.
    extra_arflags_for_target=" -X32_64"
    extra_nmflags_for_target=" -B -X32_64"
    ;;
  *-*-darwin*)
    # ranlib from Darwin requires the -c flag to look at common symbols.
    extra_ranlibflags_for_target=" -c"
    ;;
  mips*-*-pe | sh*-*-pe | *arm-wince-pe)
    target_makefile_frag="config/mt-wince"
    ;;
esac

alphaieee_frag=/dev/null
case $target in
  alpha*-*-*)
    # This just makes sure to use the -mieee option to build target libs.
    # This should probably be set individually by each library.
    alphaieee_frag="config/mt-alphaieee"
    ;;
esac

# If --enable-target-optspace always use -Os instead of -O2 to build
# the target libraries, similarly if it is not specified, use -Os
# on selected platforms.
ospace_frag=/dev/null
case "${enable_target_optspace}:${target}" in
  yes:*)
    ospace_frag="config/mt-ospace"
    ;;
  :d30v-*)
    ospace_frag="config/mt-d30v"
    ;;
  :m32r-* | :d10v-* | :fr30-*)
    ospace_frag="config/mt-ospace"
    ;;
  no:* | :*)
    ;;
  *)
    echo "*** bad value \"${enable_target_optspace}\" for --enable-target-optspace flag; ignored" 1>&2
    ;;
esac

# Default to using --with-stabs for certain targets.
if test x${with_stabs} = x ; then
  case "${target}" in
  mips*-*-irix[[56]]*)
    ;;
  mips*-*-* | alpha*-*-osf*)
    with_stabs=yes;
    extra_host_args="${extra_host_args} --with-stabs"
    ;;
  esac
fi

# hpux11 in 64bit mode has libraries in a weird place.  Arrange to find
# them automatically.
case "${host}" in
  hppa*64*-*-hpux11*)	
    extra_host_args="$extra_host_args -x-libraries=/usr/lib/pa20_64 -x-includes=/usr/X11R6/include"
    ;;
esac

# Some systems (e.g., one of the i386-aix systems the gas testers are
# using) don't handle "\$" correctly, so don't use it here.
tooldir='${exec_prefix}'/${target_alias}
build_tooldir=${tooldir}

# Create a .gdbinit file which runs the one in srcdir
# and tells GDB to look there for source files.

if test -r ${srcdir}/.gdbinit ; then
  case ${srcdir} in
    .) ;;
    *) cat > ./.gdbinit <<EOF
# ${NO_EDIT}
dir ${srcdir}
dir .
source ${srcdir}/.gdbinit
EOF
    ;;
  esac
fi

# Make sure that the compiler is able to generate an executable.  If it
# can't, we are probably in trouble.  We don't care whether we can run the
# executable--we might be using a cross compiler--we only care whether it
# can be created.  At this point the main configure script has set CC.
we_are_ok=no
echo "int main () { return 0; }" > conftest.c
${CC} -o conftest ${CFLAGS} ${CPPFLAGS} ${LDFLAGS} conftest.c
if test $? = 0 ; then
  if test -s conftest || test -s conftest.exe ; then
    we_are_ok=yes
  fi
fi 
case $we_are_ok in
  no)
    echo 1>&2 "*** The command '${CC} -o conftest ${CFLAGS} ${CPPFLAGS} ${LDFLAGS} conftest.c' failed."
    echo 1>&2 "*** You must set the environment variable CC to a working compiler."
    rm -f conftest*
    exit 1
    ;;
esac
rm -f conftest*

# The Solaris /usr/ucb/cc compiler does not appear to work.
case "${host}" in
  sparc-sun-solaris2*)
      CCBASE="`echo ${CC-cc} | sed 's/ .*$//'`"
      if test "`type $CCBASE | sed 's/^[[^/]]*//'`" = "/usr/ucb/cc" ; then
          could_use=
          test -d /opt/SUNWspro/bin && could_use="/opt/SUNWspro/bin"
          if test -d /opt/cygnus/bin ; then
              if test "$could_use" = "" ; then
                  could_use="/opt/cygnus/bin"
              else
                  could_use="$could_use or /opt/cygnus/bin"
              fi
          fi
        if test "$could_use" = "" ; then
            echo "Warning: compilation may fail because you're using"
            echo "/usr/ucb/cc.  You should change your PATH or CC "
            echo "variable and rerun configure."
        else
            echo "Warning: compilation may fail because you're using"
            echo "/usr/ucb/cc, when you should use the C compiler from"
            echo "$could_use.  You should change your"
            echo "PATH or CC variable and rerun configure."
        fi
      fi
  ;;
esac

case "${host}" in
  *-*-hpux*) RPATH_ENVVAR=SHLIB_PATH ;;
  *-*-darwin* | *-*-rhapsody* ) RPATH_ENVVAR=DYLD_LIBRARY_PATH ;;
  *) RPATH_ENVVAR=LD_LIBRARY_PATH ;;
esac

# Record target_configdirs and the configure arguments for target and
# build configuration in Makefile.
target_configdirs=`echo "${target_configdirs}" | sed -e 's/target-//g'`
build_configdirs=`echo "${build_configdirs}" | sed -e 's/build-//g'`

# Determine whether gdb needs tk/tcl or not.
# Use 'maybe' since enable_gdbtk might be true even if tk isn't available
# and in that case we want gdb to be built without tk.  Ugh!
# In fact I believe gdb is the *only* package directly dependent on tk,
# so we should be able to put the 'maybe's in unconditionally and
# leave out the maybe dependencies when enable_gdbtk is false.  I'm not
# 100% sure that that's safe though.

gdb_tk="maybe-all-tcl maybe-all-tk maybe-all-itcl maybe-all-libgui"
case "$enable_gdbtk" in
  no)
    GDB_TK="" ;;
  yes)
    GDB_TK="${gdb_tk}" ;;
  *)
    # Only add the dependency on gdbtk when GDBtk is part of the gdb
    # distro.  Eventually someone will fix this and move Insight, nee
    # gdbtk to a separate directory.
    if test -d ${srcdir}/gdb/gdbtk ; then
      GDB_TK="${gdb_tk}"
    else
      GDB_TK=""
    fi
    ;;
esac
CONFIGURE_GDB_TK=`echo ${GDB_TK} | sed s/-all-/-configure-/g`
INSTALL_GDB_TK=`echo ${GDB_TK} | sed s/-all-/-install-/g`

# Strip out unwanted targets.

# While at that, we remove Makefiles if we were started for recursive
# configuration, so that the top-level Makefile reconfigures them,
# like we used to do when configure itself was recursive.

# Loop over modules.  $extrasub must be used with care, limiting as
# much as possible the usage of range addresses.  That's because autoconf
# splits the sed script to overcome limits in the number of commands,
# and relying on carefully-timed sed passes may turn out to be very hard
# to maintain later.  In this particular case, you just have to be careful
# not to nest @@if/@@endif pairs, because configure will not warn you at all.

AC_ARG_ENABLE([bootstrap],
[  --enable-bootstrap           Enable bootstrapping [yes if native build]],,
enable_bootstrap=default)

# Issue errors and warnings for invalid/strange bootstrap combinations.
case "$configdirs" in
  *gcc*) have_compiler=yes ;;
  *) have_compiler=no ;;
esac

case "$have_compiler:$host:$target:$enable_bootstrap" in
  *:*:*:no) ;;

  # Default behavior.  Enable bootstrap if we have a compiler
  # and we are in a native configuration.
  yes:$build:$build:default)
    enable_bootstrap=yes ;;

  *:*:*:default)
    enable_bootstrap=no ;;

  # We have a compiler and we are in a native configuration, bootstrap is ok
  yes:$build:$build:yes)
    ;;

  # Other configurations, but we have a compiler.  Assume the user knows
  # what he's doing.
  yes:*:*:yes)
    AC_MSG_WARN([trying to bootstrap a cross compiler])
    ;;

  # No compiler: if they passed --enable-bootstrap explicitly, fail
  no:*:*:yes)
    AC_MSG_ERROR([cannot bootstrap without a compiler]) ;;

  # Fail if wrong command line
  *)
    AC_MSG_ERROR([invalid option for --enable-bootstrap])
    ;;
esac

# Adjust the toplevel makefile according to whether bootstrap was selected.
case "$enable_bootstrap" in
  yes)
    bootstrap_suffix=bootstrap ;;
  no)
    bootstrap_suffix=no-bootstrap ;;
esac

for module in ${build_configdirs} ; do
  if test -z "${no_recursion}" \
     && test -f ${build_subdir}/${module}/Makefile; then
    echo 1>&2 "*** removing ${build_subdir}/${module}/Makefile to force reconfigure"
    rm -f ${build_subdir}/${module}/Makefile
  fi
  extrasub="$extrasub
/^@@if build-$module\$/d
/^@@endif build-$module\$/d
/^@@if build-$module-$bootstrap_suffix\$/d
/^@@endif build-$module-$bootstrap_suffix\$/d"
done
for module in ${configdirs} ; do
  if test -z "${no_recursion}"; then
    for file in stage*-${module}/Makefile prev-${module}/Makefile ${module}/Makefile; do
      if test -f ${file}; then
	echo 1>&2 "*** removing ${file} to force reconfigure"
	rm -f ${file}
      fi
    done
  fi
  extrasub="$extrasub
/^@@if $module\$/d
/^@@endif $module\$/d
/^@@if $module-$bootstrap_suffix\$/d
/^@@endif $module-$bootstrap_suffix\$/d"
done
for module in ${target_configdirs} ; do
  if test -z "${no_recursion}" \
     && test -f ${target_subdir}/${module}/Makefile; then
    echo 1>&2 "*** removing ${target_subdir}/${module}/Makefile to force reconfigure"
    rm -f ${target_subdir}/${module}/Makefile
  fi
  extrasub="$extrasub
/^@@if target-$module\$/d
/^@@endif target-$module\$/d
/^@@if target-$module-$bootstrap_suffix\$/d
/^@@endif target-$module-$bootstrap_suffix\$/d"
done

extrasub="$extrasub
/^@@if /,/^@@endif /d"

# Create the serialization dependencies.  This uses a temporary file.

AC_ARG_ENABLE([serial-configure],
[  --enable-serial-[{host,target,build}-]configure
                          Force sequential configuration of
                          sub-packages for the host, target or build
			  machine, or all sub-packages])

case ${enable_serial_configure} in
  yes)
    enable_serial_build_configure=yes
    enable_serial_host_configure=yes
    enable_serial_target_configure=yes
    ;;
esac

# These force 'configure's to be done one at a time, to avoid problems
# with contention over a shared config.cache.
rm -f serdep.tmp
echo '# serdep.tmp' > serdep.tmp
olditem=
test "x${enable_serial_build_configure}" = xyes &&
for item in ${build_configdirs} ; do
  case ${olditem} in
    "") ;;
    *) echo "configure-build-${item}: configure-build-${olditem}" >> serdep.tmp ;;
  esac
  olditem=${item}
done
olditem=
test "x${enable_serial_host_configure}" = xyes &&
for item in ${configdirs} ; do
  case ${olditem} in
    "") ;;
    *) echo "configure-${item}: configure-${olditem}" >> serdep.tmp ;;
  esac
  olditem=${item}
done
olditem=
test "x${enable_serial_target_configure}" = xyes &&
for item in ${target_configdirs} ; do
  case ${olditem} in
    "") ;;
    *) echo "configure-target-${item}: configure-target-${olditem}" >> serdep.tmp ;;
  esac
  olditem=${item}
done
serialization_dependencies=serdep.tmp
AC_SUBST_FILE(serialization_dependencies)

# Base args.  Strip norecursion, cache-file, srcdir, host, build,
# target and nonopt.  These are the ones we might not want to pass
# down to subconfigures.  Also strip program-prefix, program-suffix,
# and program-transform-name, so that we can pass down a consistent
# program-transform-name.  If autoconf has put single quotes around
# any of these arguments (because they contain shell metacharacters)
# then this will fail; in practice this only happens for
# --program-transform-name, so be sure to override --program-transform-name
# at the end of the argument list.
# These will be expanded by make, so quote '$'.
cat <<\EOF_SED > conftestsed
s/ --no[[^ ]]*/ /g
s/ --c[[a-z-]]*[[= ]][[^ ]]*//g
s/ --sr[[a-z-]]*[[= ]][[^ ]]*//g
s/ --ho[[a-z-]]*[[= ]][[^ ]]*//g
s/ --bu[[a-z-]]*[[= ]][[^ ]]*//g
s/ --t[[a-z-]]*[[= ]][[^ ]]*//g
s/ --program-[[pst]][[a-z-]]*[[= ]][[^ ]]*//g
s/ -cache-file[[= ]][[^ ]]*//g
s/ -srcdir[[= ]][[^ ]]*//g
s/ -host[[= ]][[^ ]]*//g
s/ -build[[= ]][[^ ]]*//g
s/ -target[[= ]][[^ ]]*//g
s/ -program-prefix[[= ]][[^ ]]*//g
s/ -program-suffix[[= ]][[^ ]]*//g
s/ -program-transform-name[[= ]][[^ ]]*//g
s/ [[^' -][^ ]*] / /
s/^ *//;s/ *$//
s,\$,$$,g
EOF_SED
sed -f conftestsed <<EOF_SED > conftestsed.out
 ${ac_configure_args} 
EOF_SED
baseargs=`cat conftestsed.out`
rm -f conftestsed conftestsed.out

# Add in --program-transform-name, after --program-prefix and
# --program-suffix have been applied to it.  Autoconf has already
# doubled dollar signs and backslashes in program_transform_name; we want
# the backslashes un-doubled, and then the entire thing wrapped in single
# quotes, because this will be expanded first by make and then by the shell. 
# Also, because we want to override the logic in subdir configure scripts to
# choose program_transform_name, replace any s,x,x, with s,y,y,.
sed -e "s,\\\\\\\\,\\\\,g; s,','\\\\'',g; s/s,x,x,/s,y,y,/" <<EOF_SED > conftestsed.out
${program_transform_name}
EOF_SED
gcc_transform_name=`cat conftestsed.out`
rm -f conftestsed.out
baseargs="$baseargs --program-transform-name='${gcc_transform_name}'"

# For the build-side libraries, we just need to pretend we're native,
# and not use the same cache file.  Multilibs are neither needed nor
# desired.
build_configargs="--cache-file=../config.cache ${baseargs}"

# For host modules, accept cache file option, or specification as blank.
case "${cache_file}" in
"") # empty
  cache_file_option="" ;;
/* | [[A-Za-z]]:[[\\/]]* ) # absolute path
  cache_file_option="--cache-file=${cache_file}" ;;
*) # relative path
  cache_file_option="--cache-file=../${cache_file}" ;;
esac

# Host dirs don't like to share a cache file either, horribly enough.
# This seems to be due to autoconf 2.5x stupidity.
host_configargs="--cache-file=./config.cache ${extra_host_args} ${baseargs}"

target_configargs=${baseargs}

# Passing a --with-cross-host argument lets the target libraries know
# whether they are being built with a cross-compiler or being built
# native.  However, it would be better to use other mechanisms to make the
# sorts of decisions they want to make on this basis.  Please consider
# this option to be deprecated.  FIXME.
if test x${is_cross_compiler} = xyes ; then
  target_configargs="--with-cross-host=${host_alias} ${target_configargs}"
fi

# Default to --enable-multilib.
if test x${enable_multilib} = x ; then
  target_configargs="--enable-multilib ${target_configargs}"
fi

# Pass --with-newlib if appropriate.  Note that target_configdirs has
# changed from the earlier setting of with_newlib.
if test x${with_newlib} != xno && echo " ${target_configdirs} " | grep " newlib " > /dev/null 2>&1 && test -d ${srcdir}/newlib ; then
  target_configargs="--with-newlib ${target_configargs}"
fi

# Different target subdirs use different values of certain variables
# (notably CXX).  Worse, multilibs use *lots* of different values.
# Worse yet, autoconf 2.5x makes some of these 'precious', meaning that
# it doesn't automatically accept command-line overrides of them.
# This means it's not safe for target subdirs to share a cache file,
# which is disgusting, but there you have it.  Hopefully this can be
# fixed in future.  It's still worthwhile to use a cache file for each
# directory.  I think.

# Pass the appropriate --build, --host, --target and --cache-file arguments.
# We need to pass --target, as newer autoconf's requires consistency
# for target_alias and gcc doesn't manage it consistently.
target_configargs="--cache-file=./config.cache ${target_configargs}"

FLAGS_FOR_TARGET=
case " $target_configdirs " in
 *" newlib "*)
  case " $target_configargs " in
  *" --with-newlib "*)
   case "$target" in
   *-cygwin*)
     FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/$(TARGET_SUBDIR)/winsup -L$$r/$(TARGET_SUBDIR)/winsup/cygwin -L$$r/$(TARGET_SUBDIR)/winsup/w32api/lib -isystem $$s/winsup/include -isystem $$s/winsup/cygwin/include -isystem $$s/winsup/w32api/include' ;;
   esac

   # If we're not building GCC, don't discard standard headers.
   if test -d ${srcdir}/gcc; then
     FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -nostdinc'

     if test "${build}" != "${host}"; then
       # On Canadian crosses, CC_FOR_TARGET will have already been set
       # by `configure', so we won't have an opportunity to add -Bgcc/
       # to it.  This is right: we don't want to search that directory
       # for binaries, but we want the header files in there, so add
       # them explicitly.
       FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -isystem $$r/$(HOST_SUBDIR)/gcc/include'

       # Someone might think of using the pre-installed headers on
       # Canadian crosses, in case the installed compiler is not fully
       # compatible with the compiler being built.  In this case, it
       # would be better to flag an error than risking having
       # incompatible object files being constructed.  We can't
       # guarantee that an error will be flagged, but let's hope the
       # compiler will do it, when presented with incompatible header
       # files.
     fi
   fi

   case "${target}-${is_cross_compiler}" in
   i[[3456789]]86-*-linux*-no)
      # Here host == target, so we don't need to build gcc,
      # so we don't want to discard standard headers.
      FLAGS_FOR_TARGET=`echo " $FLAGS_FOR_TARGET " | sed -e 's/ -nostdinc / /'`
      ;;
   *)
      # If we're building newlib, use its generic headers last, but search
      # for any libc-related directories first (so make it the last -B
      # switch).
      FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -B$$r/$(TARGET_SUBDIR)/newlib/ -isystem $$r/$(TARGET_SUBDIR)/newlib/targ-include -isystem $$s/newlib/libc/include'
      ;;
   esac
   ;;
  esac
  ;;
esac
case "$target" in
*-mingw*)
  # Can't be handled as Cygwin above since Mingw does not use newlib.
  FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/$(TARGET_SUBDIR)/winsup/mingw -L$$r/$(TARGET_SUBDIR)/winsup/w32api/lib -isystem $$s/winsup/mingw/include -isystem $$s/winsup/w32api/include' ;;
esac

# Allow the user to override the flags for
# our build compiler if desired.
CFLAGS_FOR_BUILD=${CFLAGS_FOR_BUILD-${CFLAGS}}

# On Canadian crosses, we'll be searching the right directories for
# the previously-installed cross compiler, so don't bother to add
# flags for directories within the install tree of the compiler
# being built; programs in there won't even run.
if test "${build}" = "${host}" && test -d ${srcdir}/gcc; then
  # Search for pre-installed headers if nothing else fits.
  FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -B$(build_tooldir)/bin/ -B$(build_tooldir)/lib/ -isystem $(build_tooldir)/include -isystem $(build_tooldir)/sys-include'
fi

if test "x${use_gnu_ld}" = x &&
   echo " ${configdirs} " | grep " ld " > /dev/null ; then
  # Arrange for us to find uninstalled linker scripts.
  FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/$(HOST_SUBDIR)/ld'
fi

# Search for other target-specific linker scripts and such.
case "${target}" in
  m32c-*-* )
    if test -d ${srcdir}/libgloss/m32c; then
      # This is for crt0.o
      FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -B$$r/$(TARGET_SUBDIR)/libgloss/m32c'
      # This is for r8c.ld
      FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/$(TARGET_SUBDIR)/libgloss/m32c'
      # This is for libnosys.a
      FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/$(TARGET_SUBDIR)/libgloss/libnosys'
    fi
    ;;
esac

case $target in
  mep*)
    FLAGS_FOR_TARGET="$FLAGS_FOR_TARGET -mlibrary"
    ;;
esac

# Makefile fragments.
for frag in host_makefile_frag target_makefile_frag alphaieee_frag ospace_frag;
do
  eval fragval=\$$frag
  if test $fragval != /dev/null; then
    eval $frag=${srcdir}/$fragval
  fi
done
AC_SUBST_FILE(host_makefile_frag)
AC_SUBST_FILE(target_makefile_frag)
AC_SUBST_FILE(alphaieee_frag)
AC_SUBST_FILE(ospace_frag)

# Miscellanea: directories, flags, etc.
AC_SUBST(RPATH_ENVVAR)
AC_SUBST(tooldir)
AC_SUBST(build_tooldir)
AC_SUBST(CONFIGURE_GDB_TK)
AC_SUBST(GDB_TK)
AC_SUBST(INSTALL_GDB_TK)

# Build module lists & subconfigure args.
AC_SUBST(build_configargs)
AC_SUBST(build_configdirs)

# Host module lists & subconfigure args.
AC_SUBST(host_configargs)
AC_SUBST(configdirs)

# Target module lists & subconfigure args.
AC_SUBST(target_configargs)


# Build tools.
AC_SUBST(CC_FOR_BUILD)
AC_SUBST(config_shell)

# Generate default definitions for YACC, M4, LEX and other programs that run
# on the build machine.  These are used if the Makefile can't locate these
# programs in objdir.
MISSING=`cd $ac_aux_dir && ${PWDCMD-pwd}`/missing

AC_CHECK_PROGS([YACC], ['bison -y' byacc yacc], [$MISSING bison -y])
case " $build_configdirs " in
  *" bison "*) YACC='$$r/$(BUILD_SUBDIR)/bison/tests/bison -y' ;;
  *" byacc "*) YACC='$$r/$(BUILD_SUBDIR)/byacc/byacc' ;;
esac

AC_CHECK_PROGS([BISON], [bison], [$MISSING bison])
case " $build_configdirs " in
  *" bison "*) BISON='$$r/$(BUILD_SUBDIR)/bison/tests/bison' ;;
esac

AC_CHECK_PROGS([M4], [gm4 gnum4 m4], [$MISSING m4])
case " $build_configdirs " in
  *" m4 "*) M4='$$r/$(BUILD_SUBDIR)/m4/m4' ;;
esac

AC_CHECK_PROGS([LEX], [flex lex], [$MISSING flex])
case " $build_configdirs " in
  *" flex "*) LEX='$$r/$(BUILD_SUBDIR)/flex/flex' ;;
  *" lex "*) LEX='$$r/$(BUILD_SUBDIR)/lex/lex' ;;
esac

AC_CHECK_PROGS([FLEX], [flex], [$MISSING flex])
case " $build_configdirs " in
  *" flex "*) FLEX='$$r/$(BUILD_SUBDIR)/flex/flex' ;;
esac

AC_CHECK_PROGS([MAKEINFO], makeinfo, [$MISSING makeinfo])
case " $build_configdirs " in
  *" texinfo "*) MAKEINFO='$$r/$(BUILD_SUBDIR)/texinfo/makeinfo/makeinfo' ;;
  *)
changequote(,)
    # For an installed makeinfo, we require it to be from texinfo 4.4 or
    # higher, else we use the "missing" dummy.
    if ${MAKEINFO} --version \
       | egrep 'texinfo[^0-9]*([1-3][0-9]|4\.[4-9]|[5-9])' >/dev/null 2>&1; then
      :
    else
      MAKEINFO="$MISSING makeinfo"
    fi
    ;;
changequote([,])
esac

# FIXME: expect and dejagnu may become build tools?

AC_CHECK_PROGS(EXPECT, expect, expect)
case " $configdirs " in
  *" expect "*)
    test $host = $build && EXPECT='$$r/$(HOST_SUBDIR)/expect/expect'
    ;;
esac

AC_CHECK_PROGS(RUNTEST, runtest, runtest)
case " $configdirs " in
  *" dejagnu "*)
    test $host = $build && RUNTEST='$$s/$(HOST_SUBDIR)/dejagnu/runtest'
    ;;
esac


# Host tools.
NCN_STRICT_CHECK_TOOLS(AR, ar)
NCN_STRICT_CHECK_TOOLS(AS, as)
NCN_STRICT_CHECK_TOOLS(DLLTOOL, dlltool)
NCN_STRICT_CHECK_TOOLS(LD, ld)
NCN_STRICT_CHECK_TOOLS(LIPO, lipo)
NCN_STRICT_CHECK_TOOLS(NM, nm)
NCN_STRICT_CHECK_TOOLS(RANLIB, ranlib, :)
NCN_STRICT_CHECK_TOOLS(STRIP, strip, :)
NCN_STRICT_CHECK_TOOLS(WINDRES, windres)
NCN_STRICT_CHECK_TOOLS(OBJCOPY, objcopy)
NCN_STRICT_CHECK_TOOLS(OBJDUMP, objdump)
AC_SUBST(CC)
AC_SUBST(CXX)
AC_SUBST(CFLAGS)
AC_SUBST(CFLAGS_FOR_BUILD)
AC_SUBST(CXXFLAGS)

# Target tools.
AC_ARG_WITH([build-time-tools], 
  [  --with-build-time-tools=path
                          use given path to find target tools during the build],
  [case x"$withval" in
     x/*) ;;
     *)
       with_build_time_tools=
       AC_MSG_WARN([argument to --with-build-time-tools must be an absolute path])
       ;;
   esac],
  [with_build_time_tools=])

NCN_STRICT_CHECK_TARGET_TOOLS(CC_FOR_TARGET, cc gcc)
NCN_STRICT_CHECK_TARGET_TOOLS(CXX_FOR_TARGET, c++ g++ cxx gxx)
NCN_STRICT_CHECK_TARGET_TOOLS(GCC_FOR_TARGET, gcc, ${CC_FOR_TARGET})
NCN_STRICT_CHECK_TARGET_TOOLS(GCJ_FOR_TARGET, gcj)
NCN_STRICT_CHECK_TARGET_TOOLS(GFORTRAN_FOR_TARGET, gfortran)

ACX_CHECK_INSTALLED_TARGET_TOOL(AR_FOR_TARGET, ar)
ACX_CHECK_INSTALLED_TARGET_TOOL(AS_FOR_TARGET, as)
ACX_CHECK_INSTALLED_TARGET_TOOL(DLLTOOL_FOR_TARGET, dlltool)
ACX_CHECK_INSTALLED_TARGET_TOOL(LD_FOR_TARGET, ld)
ACX_CHECK_INSTALLED_TARGET_TOOL(LIPO_FOR_TARGET, lipo)
ACX_CHECK_INSTALLED_TARGET_TOOL(NM_FOR_TARGET, nm)
ACX_CHECK_INSTALLED_TARGET_TOOL(OBJDUMP_FOR_TARGET, objdump)
ACX_CHECK_INSTALLED_TARGET_TOOL(RANLIB_FOR_TARGET, ranlib, :)
ACX_CHECK_INSTALLED_TARGET_TOOL(STRIP_FOR_TARGET, strip)
ACX_CHECK_INSTALLED_TARGET_TOOL(WINDRES_FOR_TARGET, windres)

RAW_CXX_FOR_TARGET="$CXX_FOR_TARGET"

GCC_TARGET_TOOL(ar, AR_FOR_TARGET, AR, [binutils/ar])
GCC_TARGET_TOOL(as, AS_FOR_TARGET, AS, [gas/as-new])
GCC_TARGET_TOOL(cc, CC_FOR_TARGET, CC, [gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/])
GCC_TARGET_TOOL(c++, CXX_FOR_TARGET, CXX,
		[gcc/g++ -B$$r/$(HOST_SUBDIR)/gcc/ -nostdinc++ `test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags --build-includes` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs],
		c++)
GCC_TARGET_TOOL(c++ for libstdc++, RAW_CXX_FOR_TARGET, CXX,
		[gcc/xgcc -shared-libgcc -B$$r/$(HOST_SUBDIR)/gcc -nostdinc++ -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs],
		c++)
GCC_TARGET_TOOL(dlltool, DLLTOOL_FOR_TARGET, DLLTOOL, [binutils/dlltool])
GCC_TARGET_TOOL(gcc, GCC_FOR_TARGET, , [gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/])
GCC_TARGET_TOOL(gcj, GCJ_FOR_TARGET, GCJ,
		[gcc/gcj -B$$r/$(HOST_SUBDIR)/gcc/], java)
GCC_TARGET_TOOL(gfortran, GFORTRAN_FOR_TARGET, GFORTRAN,
		[gcc/gfortran -B$$r/$(HOST_SUBDIR)/gcc/], fortran)
GCC_TARGET_TOOL(ld, LD_FOR_TARGET, LD, [ld/ld-new])
GCC_TARGET_TOOL(lipo, LIPO_FOR_TARGET, LIPO)
GCC_TARGET_TOOL(nm, NM_FOR_TARGET, NM, [binutils/nm-new])
GCC_TARGET_TOOL(objdump, OBJDUMP_FOR_TARGET, OBJDUMP, [binutils/objdump])
GCC_TARGET_TOOL(ranlib, RANLIB_FOR_TARGET, RANLIB, [binutils/ranlib])
GCC_TARGET_TOOL(strip, STRIP_FOR_TARGET, STRIP, [binutils/strip])
GCC_TARGET_TOOL(windres, WINDRES_FOR_TARGET, WINDRES, [binutils/windres])

AC_SUBST(FLAGS_FOR_TARGET)
AC_SUBST(RAW_CXX_FOR_TARGET)

# Certain tools may need extra flags.
AR_FOR_TARGET=${AR_FOR_TARGET}${extra_arflags_for_target}
RANLIB_FOR_TARGET=${RANLIB_FOR_TARGET}${extra_ranlibflags_for_target}
NM_FOR_TARGET=${NM_FOR_TARGET}${extra_nmflags_for_target}

# When building target libraries, except in a Canadian cross, we use
# the same toolchain as the compiler we just built.
COMPILER_AS_FOR_TARGET='$(AS_FOR_TARGET)'
COMPILER_LD_FOR_TARGET='$(LD_FOR_TARGET)'
COMPILER_NM_FOR_TARGET='$(NM_FOR_TARGET)'
if test $host = $build; then
  case " $configdirs " in
    *" gcc "*)
      COMPILER_AS_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/as'
      COMPILER_LD_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/collect-ld'
      COMPILER_NM_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/nm'${extra_nmflags_for_target}
      ;;
  esac
fi

AC_SUBST(COMPILER_AS_FOR_TARGET)
AC_SUBST(COMPILER_LD_FOR_TARGET)
AC_SUBST(COMPILER_NM_FOR_TARGET)

AC_MSG_CHECKING([whether to enable maintainer-specific portions of Makefiles])
AC_ARG_ENABLE(maintainer-mode,
[  --enable-maintainer-mode enable make rules and dependencies not useful
                          (and sometimes confusing) to the casual installer],
      USE_MAINTAINER_MODE=$enableval,
      USE_MAINTAINER_MODE=no)
AC_MSG_RESULT($USE_MAINTAINER_MODE)
AC_SUBST(MAINTAINER_MODE_TRUE)
AC_SUBST(MAINTAINER_MODE_FALSE)
if test "$USE_MAINTAINER_MODE" = yes; then
  MAINTAINER_MODE_TRUE=
  MAINTAINER_MODE_FALSE='#'
else
  MAINTAINER_MODE_TRUE='#'
  MAINTAINER_MODE_FALSE=
fi	
MAINT=$MAINTAINER_MODE_TRUE
AC_SUBST(MAINT)dnl

# ---------------------
# GCC bootstrap support
# ---------------------

# Stage specific cflags for build.
stage1_cflags="-g"
case $build in
  vax-*-*)
    case ${GCC} in
      yes) stage1_cflags="-g -Wa,-J" ;;
      *) stage1_cflags="-g -J" ;;
    esac ;;
esac

# This is aimed to mimic bootstrap with a non-GCC compiler to catch problems.
if test "$GCC" = yes; then
  saved_CFLAGS="$CFLAGS"

  # Pass -fkeep-inline-functions for stage 1 if the GCC version supports it.
  CFLAGS="$CFLAGS -fkeep-inline-functions"
  AC_MSG_CHECKING([whether -fkeep-inline-functions is supported])
  AC_TRY_COMPILE(,,
    [AC_MSG_RESULT([yes]); stage1_cflags="$stage1_cflags -fkeep-inline-functions"],
    [AC_MSG_RESULT([no])])

  CFLAGS="$saved_CFLAGS"
fi

AC_SUBST(stage1_cflags)

# Enable --enable-checking in stage1 of the compiler.
AC_ARG_ENABLE(stage1-checking,
[  --enable-stage1-checking[=all]   choose additional checking for stage1
                          of the compiler.],
[stage1_checking=--enable-checking=${enable_stage1_checking}],
[if test "x$enable_checking" = xno; then
  stage1_checking=--enable-checking
else
  stage1_checking=--enable-checking${enable_checking+=}$enable_checking
fi])
AC_SUBST(stage1_checking)

# Enable -Werror in bootstrap stage2 and later.
AC_ARG_ENABLE(werror,
[  --enable-werror         enable -Werror in bootstrap stage2 and later], [],
[if test -d gcc && test x"`cat $srcdir/gcc/DEV-PHASE`" = xexperimental; then
  enable_werror=yes
else
  enable_werror=no
fi])
case ${enable_werror} in
  yes) stage2_werror_flag="--enable-werror-always" ;;
  *) stage2_werror_flag="" ;;
esac
AC_SUBST(stage2_werror_flag)

# Flags needed to enable html installing and building
AC_ARG_WITH(datarootdir,
[  --with-datarootdir	Use datarootdir as the data root directory.],
[datarootdir="\${prefix}/${withval}"],
[datarootdir="\${prefix}/share"])

AC_ARG_WITH(docdir,
[  --with-docdir	Install documentation in this directory.],
[docdir="\${prefix}/${withval}"],
[docdir="\${datarootdir}/doc"])

AC_ARG_WITH(htmldir,
[  --with-htmldir	Install html in this directory.],
[htmldir="\${prefix}/${withval}"],
[htmldir="\${docdir}"])

AC_SUBST(datarootdir)
AC_SUBST(docdir)
AC_SUBST(htmldir)

AC_OUTPUT(Makefile)
@


1.333
log
@2007-02-05  Dave Brolley  <brolley@@redhat.com>

        * Contribute the following changes:
        2006-11-28  DJ Delorie  <dj@@redhat.com>

        * configure.in: Fix typo for mep's target_makefile_frag.
        * configure: Regenerated.

        2005-04-22  Richard Sandiford  <rsandifo@@redhat.com>

        * configure.in (mep*): Add -mlibrary to FLAGS_FOR_TARGET.
        * configure: Regenerate.

        2001-09-19  DJ Delorie  <dj@@redhat.com>

        * configure.in (target_makefile_frag): use mt-mep

        2001-06-12  Don Howard  <dhoward@@redhat.com>

        * configure.in: Remove gdb from MeP skip list.

        2001-04-05  DJ Delorie  <dj@@redhat.com>

        * configure.in (noconfigdirs): Remove gcc from MeP skip list.

        2001-03-20  Ben Elliston  <bje@@redhat.com>

        * configure.in (noconfigdirs): Add gcc and gdb for MeP.

        2001-03-19  Ben Elliston  <bje@@redhat.com>

        * config.sub (mep, mep-*): Add.
@
text
@@


1.332
log
@2007-01-11  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Change == to = in test command.
        * configure: Regenerate.

2007-01-11  Paolo Bonzini  <bonzini@@gnu.org>

        * warnings.m4: Use m4_expand_once to clear the AC_SUBST'ed variable.
        (ACX_PROG_CC_WARNINGS_ARE_ERRORS): Fix typo.  Add optional 2nd argument.
@
text
@d1730 3
d2267 6
@


1.331
log
@2007-01-11  Paolo Bonzini  <bonzini@@gnu.org>
            Nick Clifton  <nickc@@redhat.com>
            Kaveh R. Ghazi  <ghazi@@caip.rutgets.edu>

        * configure.in (build_configargs, host_configargs, target_configargs):
        Remove build/host/target parameters.
        (host_libs): Add gmp and mpfr.
        (GMP tests): Reorganize to allow in-tree GMP/MPFR.
        * Makefile.def (gmp, mpfr): New.
        (gcc): Remove target.
        * Makefile.tpl (build_os, build_vendor, host_os, host_vendor,
        target_os, target_vendor): New.
        (configure): Add host_alias/target_alias arguments.  Adjust invocations.
        * configure: Regenerate.
        * Makefile.in: Regenerate.

2007-01-11  Matt Fago  <fago@@earthlink.net>

	* configure.in: Try to link to functions only in mpfr 2.2.x
        to improve robustness of configure tests.
	* configure: Regenerate.
@
text
@d1134 1
a1134 1
if test -d ${srcdir}/gcc && test "x$have_gmp" == xno; then
@


1.330
log
@* Makefile.tpl (all-target): Correct @@if conditional for target modules.
* configure.in: Omit libiberty if building only target libgcc.
* configure, Makefile.in: Regenerated.
@
text
@d126 1
a126 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl libgui zlib libcpp libdecnumber"
d1065 1
a1065 1
gmplibs="-lmpfr"
d1067 2
a1068 1
have_gmp=yes
d1092 9
a1106 2
gmplibs="$gmplibs -lgmp"

d1124 9
d1134 8
a1141 18
saved_CFLAGS="$CFLAGS"
CFLAGS="$CFLAGS $gmpinc"
# Check GMP actually works
AC_MSG_CHECKING([for correct version of gmp.h])
AC_TRY_COMPILE([#include "gmp.h"],[
#if __GNU_MP_VERSION < 4 || (__GNU_MP_VERSION == 4 && __GNU_MP_VERSION_MINOR < 1)
choke me
#endif
], [AC_MSG_RESULT([yes])], [AC_MSG_RESULT([no]); have_gmp=no])

if test x"$have_gmp" = xyes; then
  saved_LIBS="$LIBS"
  LIBS="$LIBS $gmplibs"
  dnl MPFR 2.2.0 is acceptable but buggy, MPFR 2.2.1 is better.
  AC_MSG_CHECKING([for correct version of mpfr.h])
  AC_TRY_LINK([#include <gmp.h>
#include <mpfr.h>],[
#if MPFR_VERSION < MPFR_VERSION_NUM(2,2,0)
d1143 30
a1172 13
#endif
  mpfr_t n; mpfr_init(n);
], [AC_TRY_LINK([#include <gmp.h>
#include <mpfr.h>],[
#if MPFR_VERSION < MPFR_VERSION_NUM(2,2,1)
  choke me
#endif
  mpfr_t n; mpfr_init(n);
], [AC_MSG_RESULT([yes])], [AC_MSG_RESULT([buggy but acceptable])])],
   [AC_MSG_RESULT([no]); have_gmp=no])
  LIBS="$saved_LIBS"
fi
CFLAGS="$saved_CFLAGS"
d1174 2
a1175 2
if test -d ${srcdir}/gcc && test x$have_gmp != xyes; then
  AC_MSG_ERROR([Building GCC requires GMP 4.1+ and MPFR 2.2.1+.
d1183 1
d2123 1
a2123 1
build_configargs="--cache-file=../config.cache --build=${build_alias} --host=${build_alias} --target=${target_alias} ${baseargs}"
d2137 1
a2137 1
host_configargs="--cache-file=./config.cache --build=${build_alias} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"
d2173 1
a2173 1
target_configargs="--cache-file=./config.cache --build=${build_alias} --host=${target_alias} --target=${target_alias} ${target_configargs}"
@


1.329
log
@* configure.in: Add support for an x86_64-mingw* target.
* configure: Regenerate.
@
text
@d1451 1
d1453 1
d1456 3
a1458 1
    if test "$i" != "libiberty" ; then
d1466 1
a1466 1
    target_configdirs=
@


1.328
log
@2007-01-04  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Use DEV-PHASE to detect the default for --enable-werror.
	* configure: Regenerate.
@
text
@d281 3
d625 4
d944 2
@


1.327
log
@Sync with gcc:
	* Makefile.def (target_modules): Add libgcc.
	(lang_env_dependencies): Remove default items.  Use no_c and no_gcc.
	* Makefile.tpl (clean-target-libgcc): Delete.
	(configure-target-[+module+]): Emit --disable-bootstrap dependencies
	on gcc even for bootstrapped modules.  Rewrite handling of
	lang_env_dependencies to loop over target_modules.
	* configure.in (target_libraries): Add target-libgcc.
	* Makefile.in, configure: Regenerated.
@
text
@a2490 1
# Change the default to "no" on release branches.
d2493 5
a2497 1
[enable_werror=yes])
@


1.326
log
@2006-12-29  Paolo Bonzini  <bonzini@@gnu.org>

	Sync with gcc:
	2006-12-29  Paolo Bonzini  <bonzini@@gnu.org>

        * configure.in: Reorganize recognition of languages.  Add
        --enable-stage1-languages.  Show supported languages for the chosen
        target rather than all recognized languages.
        * configure: Regenerate.

	2006-12-29  Paolo Bonzini  <bonzini@@gnu.org>

        * Makefile.tpl (GCC_STRAP_TARGETS, all-prebootstrap): Remove.
        * Makefile.in: Regenerate.

	2006-12-29  Kaveh R. Ghazi  <ghazi@@caip.rutgers.edu>

        * configure.in: Warn that MPFR 2.2.0 is buggy.
        * configure: Regenerate.

config:
2006-12-29  Paolo Bonzini  <bonzini@@gnu.org>

	* acx.m4: Sync with gcc.
@
text
@d145 1
@


1.325
log
@	* configure.in: When removing Makefiles to force a reconfigure, also
	remove prev-DIR*/Makefile.
	* configure: Regenerate.
@
text
@d1120 1
d1124 1
a1124 1
#if MPFR_VERSION_MAJOR < 2 || (MPFR_VERSION_MAJOR == 2 && MPFR_VERSION_MINOR < 2)
d1128 8
a1135 1
], [AC_MSG_RESULT([yes])], [AC_MSG_RESULT([no]); have_gmp=no])
d1156 1
a1156 2
stage1_languages=c
AC_SUBST(stage1_languages)
d1218 1
a1218 1
  new_enable_languages=c
d1220 1
a1220 1
  potential_languages=c
d1235 2
a1236 2
        boot_language=
        build_by_default=
d1238 7
a1244 12
        potential_languages="${potential_languages},${language}"
        # This is quite sensitive to the ordering of the case statement arms.
        case ,${enable_languages},:${language}:${have_gnat}:${build_by_default} in
          *::*:*)
            echo "${lang_frag} doesn't set \$language." 1>&2
            exit 1
            ;;
          *:ada:no:*)
            # Ada was requested with no preexisting GNAT.  Disable unconditionally.
            add_this_lang=no
            ;;
          *,${language},*:*:*:*)
d1248 3
a1250 8
          *,all,*:*:*:no)
            # 'all' was selected, but this is not a default language
            # so do not include it.
            add_this_lang=no
            ;;
          *,all,*:*:*:*)
            # 'all' was selected and this is a default language; include it.
            add_this_lang=yes
d1267 1
a1267 1
              add_this_lang=no
d1272 12
d1287 1
a1287 1
	    add_this_lang=no
d1292 4
d1297 1
a1297 1
            # Remove language-dependent dirs.
d1299 1
d1301 3
a1303 2
          *)
	    new_enable_languages="$new_enable_languages,$language"
d1308 1
a1308 1
		stage1_languages="${stage1_languages},${language}"
d1317 34
d1352 3
d1358 1
a1358 1
Recognised languages are: ${potential_languages}])
a1359 1

d1362 1
d1364 2
a1365 1
  enable_languages="$new_enable_languages"
@


1.324
log
@2006-12-19  Paolo Bonzini  <bonzini@@gnu.org>

	Sync with gcc:

	2006-12-19  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Remove "$build" case for powerpc-*-darwin* since
	it only affects bootstrap and could be tested on "$host" as well.
	* configure: Regenerate.
	* config/mh-ppc-darwin: Add to the stage1 cflags here.

	2006-12-19  Paolo Bonzini  <bonzini@@gnu.org>

	PR bootstrap/29544
	* Makefile.def (flags_to_pass): Add STAGE1_CHECKING.
	(bootstrap_stage): Add STAGE1_CHECKING to stage1 configure flags,
	move here comment from Makefile.tpl.
	* Makefile.tpl: Move some definitions higher in the file.
	(STAGE1_CHECKING): New.
	* configure.in: Add --enable-stage1-checking.
	* configure: Regenerate.
	* Makefile.in: Regenerate.

	2006-12-03  Kaveh R. Ghazi  <ghazi@@caip.rutgers.edu>

	* configure.in: Update error message for missing GMP/MPFR.

	* configure: Regenerate.

	2006-12-02  Kaveh R. Ghazi  <ghazi@@caip.rutgers.edu>

	* configure.in: Update MPFR version in error message.

	* configure: Regenerate.

	2006-11-26  Kaveh R. Ghazi  <ghazi@@caip.rutgers.edu>

	* configure.in (--with-mpfr-dir, --with-gmp-dir): Remove flags.
	(--with-mpfr-include, --with-mpfr-lib, --with-gmp-include,
	--with-gmp-lib): New flags.

	* configure: Regenerate.

config:
2006-12-04  Eric Botcazou  <ebotcazou@@libertysurf.fr>

	* tls.m4 (GCC_CHECK_TLS): Do not test TLS with static linking
	if static linking doesn't even work.
@
text
@d1899 1
a1899 1
    for file in stage*-${module}/Makefile ${module}/Makefile; do
@


1.323
log
@sync a change from gcc
@
text
@d1055 1
a1055 1
gmplibs=
d1060 10
a1069 10
AC_ARG_WITH(mpfr-dir, [  --with-mpfr-dir=PATH    Specify source directory for MPFR library])

if test "x$with_mpfr_dir" != x; then
  gmpinc="-I$with_mpfr_dir"
  gmplibs="$with_mpfr_dir/libmpfr.a"
else
  gmplibs="-lmpfr"
fi

AC_ARG_WITH(mpfr, [  --with-mpfr=PATH        Specify directory for installed MPFR library])
d1075 6
d1083 11
a1093 1
AC_ARG_WITH(gmp-dir, [  --with-gmp-dir=PATH     Specify source directory for GMP library])
a1094 13
if test "x$with_gmp_dir" != x; then
  gmpinc="$gmpinc -I$with_gmp_dir"
  if test -f "$with_gmp_dir/.libs/libgmp.a"; then
    gmplibs="$gmplibs $with_gmp_dir/.libs/libgmp.a"
  elif test -f "$with_gmp_dir/_libs/libgmp.a"; then
    gmplibs="$gmplibs $with_gmp_dir/_libs/libgmp.a"
  fi
  # One of the later tests will catch the error if neither library is present.
else
  gmplibs="$gmplibs -lgmp"
fi

AC_ARG_WITH(gmp, [  --with-gmp=PATH         Specify directory for installed GMP library])
d1100 6
d1133 1
a1133 1
  AC_MSG_ERROR([Building GCC requires GMP 4.1+ and MPFR 2.2+.
d1137 4
a1140 1
See also http://gcc.gnu.org/install/prerequisites.html for additional info.])
a2405 7
  powerpc-*-darwin*)
    # The spiffy cpp-precomp chokes on some legitimate constructs in GCC
    # sources; use -no-cpp-precomp to get to GNU cpp.
    # Apple's GCC has bugs in designated initializer handling, so disable
    # that too.
    stage1_cflags="-g -no-cpp-precomp -DHAVE_DESIGNATED_INITIALIZERS=0"
    ;;
d2424 12
@


1.322
log
@	* configure.in:  Handle spu makefile frag.
	* config/mt-spu: New file.
	* Makefile.tpl (MAINT): Define
	(MAINTAINER_MODE_FALSE, MAINTAINER_MODE_TRUE): Define.
	* configure: Regenerate.
	* Makefile.in: Regenerate.
@
text
@d371 1
a371 1
  powerpc-*-darwin*)
@


1.321
log
@	* configure.in: Sync with GCC (spu-*-*).
	* configure: Sync with GCC.
@
text
@d1626 3
@


1.320
log
@* Makefile.tpl (clean-stage*): Sync with GCC (clean).
* Makefile.in: Sync with GCC.
* configure.in: Sync with GCC (mpfr, gmp).
* configure: Sync with GCC.
@
text
@d777 3
@


1.319
log
@
2006-11-08  Jie Zhang  <jzhang918@@gmail.com>

        * configure.in: Remove target-libgloss from noconfigdirs for
        bfin-*-*.
        * configure: Regenerated.
@
text
@d1100 1
a1100 1
#if __GNU_MP_VERSION < 3
d1103 1
a1103 2
], [AC_MSG_RESULT([yes])],
  [AC_MSG_RESULT([no]); have_gmp=no])
a1105 2
  AC_MSG_CHECKING([for MPFR])

d1108 1
d1110 6
a1115 2
#include <mpfr.h>], [mpfr_t n; mpfr_init(n);],
    [AC_MSG_RESULT([yes])],  [AC_MSG_RESULT([no]); have_gmp=no])
d1120 8
a1214 1
        need_gmp=
a1259 12
        # Disable languages that need GMP if it isn't available.
        case ,${enable_languages},:${have_gmp}:${need_gmp} in
          *,${language},*:no:yes)
            # Specifically requested language; tell them.
            AC_MSG_ERROR([GMP with MPFR support is required to build $language])
            ;;
          *:no:yes)
            # Silently disable.
            add_this_lang=no
            ;;
        esac

@


1.318
log
@2006-09-27  Dave Brolley  <brolley@@redhat.com>

        * configure.in (RUNTEST): Look for 'runtest' in the source tree by using
        $s instead of $r.
        * configure: Regenerated.
@
text
@d510 1
a510 1
    noconfigdirs="$noconfigdirs target-libgloss gdb"
@


1.317
log
@	* configure.in: Remove redundant handling of mips*-dec-bsd*. Likewise
	for mipstx39-*-*. Disable libgloss for mips64*-*-linux*.
	* configure: Regenerate.
@
text
@d2255 1
a2255 1
    test $host = $build && RUNTEST='$$r/$(HOST_SUBDIR)/dejagnu/runtest'
@


1.316
log
@	* configure.in: Never build newlib for a Mingw host.
	Never build newlib as Mingw target library.
	Test the existence of winsup/cygwin for building a Cygwin newlib,
	rather than just winsup.
	Add winsup/mingw and winsup/w32api paths to FLAGS_FOR_TARGET if
	building a Mingw target.
	* configure: Regenerate.
@
text
@a730 3
  mips*-dec-bsd*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
    ;;
a733 3
  mipstx39-*-*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"   # same as generic mips
    ;;
d735 1
a735 1
    noconfigdirs="$noconfigdirs target-newlib ${libgcj}"
@


1.315
log
@Sync from GCC

2006-07-04  Eric Botcazou  <ebotcazou@@libertysurf.fr>

        PR bootstrap/18058
        * configure.in: Add -fkeep-inline-functions to CFLAGS for stage 1
        if the bootstrap compiler is a GCC version that supports it.
        * configure: Regenerate.

config:
2006-07-21  David Daney  <ddaney@@avtrex.com>

        PR libgcj/28426
        * gxx-include-dir.m4: Use target_alias in path for cross build.
@
text
@d282 1
a282 1
    noconfigdirs="$noconfigdirs expect dejagnu autoconf automake send-pr rcs guile perl texinfo libtool"
d618 2
a619 2
    target_configdirs="$target_configdirs target-mingw"
    noconfigdirs="$noconfigdirs expect target-libgloss ${libgcj}"
d625 1
a625 1
    if test -d "$srcdir/winsup"; then
d628 1
a628 1
      echo "Warning: winsup is missing so newlib can't be built."
d2124 5
@


1.314
log
@	* configure.in: Allow mingw32 and cygwin targets to build cross-gdb.
	* configure: Regenerated.
gdb/
	* config/i386/cygwin.mt (DEPRECATED_TM_FILE): Delete.
	* config/i386/nm-cygwin.h: Add contents of tm-cygwin.h.
	* config/i386/tm-cygwin.h: Delete file.
@
text
@d2400 15
@


1.313
log
@2006-07-03  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Fix thinkos in previous check-in.
	* configure: Regenerate.
@
text
@a619 7

    # Can't build gdb for mingw32 if not native.
    case "${host}" in
      i[[3456789]]86-*-mingw32) ;; # keep gdb tcl tk expect etc.
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl gnuserv"
         ;;
    esac
a629 7

    # Can't build gdb for Cygwin if not native.
    case "${host}" in
      *-*-cygwin*) ;; # keep gdb tcl tk expect etc.
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl libgui gnuserv"
         ;;
    esac
@


1.312
log
@2006-07-03  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Fix thinko in previous check-in.
	* configure: Regenerate.
@
text
@d1257 1
a1257 1
	for i in $subdir_requires .; do
@


1.311
log
@2006-07-03  Paolo Bonzini  <bonzini@@gnu.org>

	Sync from gcc:

	2007-07-03  Paolo Bonzini  <bonzini@@gnu.org>

	PR other/27063
	* configure.in: Test subdir_requires and give an appropriate
	error message.
	* configure: Regenerate.

	2006-06-16  Rainer Orth  <ro@@TechFak.Uni-Bielefeld.DE>

	PR target/27540
	* configure.in: Only enable libgomp on IRIX 6.
	* configure: Regenerate.
@
text
@d1258 1
a1258 1
	  test -d gcc/$i && continue
@


1.310
log
@2006-06-20  David Ayers  <d.ayers@@inode.at>

	PR bootstrap/28072
	* configure.in: Add target-boehm-gc to noconfigdirs depending on
	whether target-libjava is being configured instead of whether the
	java front end is enabled.
	* configure: Regenerate.
@
text
@d356 1
a356 1
    *-*-solaris2* | *-*-sysv4* | *-*-irix* | *-*-osf* | *-*-hpux11*)
d1222 1
d1256 15
@


1.309
log
@	Sync from gcc:
	2006-06-12  John David Anglin  <dave.anglin@@nrc-cnrc.gc.ca>

	* configure.in: Don't enable libgomp on hpux10.
	* configure: Rebuilt.
@
text
@d1327 2
a1328 2
case ,${enable_languages},:${enable_libgcj}:${enable_objc_gc} in
  *,objc,*:*:yes)
a1330 7
  *,java,*:no:*)
    # Remove target-boehm-gc if libgcj has been disabled explicitly.
    noconfigdirs="$noconfigdirs target-boehm-gc"
    ;;
  *,java,*:*:*)
    # Keep target-boehm-gc by default for Java.
    ;;
d1332 4
a1335 2
    # Otherwise remove target-boehm-gc.
    noconfigdirs="$noconfigdirs target-boehm-gc"
@


1.308
log
@2006-06-13  David Ayers  <d.ayers@@inode.at>

	Sync from gcc:

	2006-06-12  David Ayers  <d.ayers@@inode.at>

	PR bootstrap/27963
	PR target/19970
	* configure.in:	Remove target-boehm-gc from noconfigdirs where
	${libgcj} is specified.
	* configure: Regenerate.
@
text
@d356 1
a356 1
    *-*-solaris2* | *-*-sysv4* | *-*-irix* | *-*-osf* | *-*-hpux*)
@


1.307
log
@
2006-06-07  Carlos O'Donell  <carlos@@codesourcery.com>

	Sync from gcc:

	2006-06-06  David Ayers  <d.ayers@@inode.at>

	PR libobjc/13946
	* Makefile.def: Add dependencies for libobjc which boehm-gc.
	* Makefile.in: Regenerate.
	* configure.in: Add --enable-objc-gc at toplevel and have it
	enable boehm-gc for Objective-C.
	Remove target-boehm-gc from libgcj.
	Add target-boehm-gc to target_libraries.
	Add target-boehm-gc to noconfigdirs where ${libgcj}
	is specified.
	Assert that boehm-gc is supported when requested for Objective-C.
	Only build boehm-gc if needed either for Java or Objective-C.
	* configure: Regenerate.

	2006-06-05  Paolo Bonzini  <bonzini@@gnu.org>

	PR 27674
	* Makefile.tpl (configure-[+prefix+][+module+],
	all-[+prefix+][+module+]): Depend on stage_current if bootstrapping.
	Remove rule to unstage bootstrapped modules.
	(stage_current): New.
	* Makefile.in: Regenerate.

	2006-05-20  John David Anglin  <dave.anglin@@nrc-cnrc.gc.ca>
	Andreas Tobler  <a.tobler@@schweiz.ch>

	* configure.in:  Enable libgcj for hppa*-hp-hpux11*.
	* configure: Rebuilt.

	Revert
	2006-01-31  Richard Guenther  <rguenther@@suse.de>
	Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.def (target_modules): Add libgcc-math target module.
	* configure.in (target_libraries): Add libgcc-math target library.
	(--enable-libgcc-math): New configure switch.
	* Makefile.in: Re-generate.
	* configure: Re-generate.
@
text
@d369 1
a369 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-boehm-gc ${libgcj}"
d378 1
a378 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d381 1
a381 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-boehm-gc ${libgcj}"
d395 1
a395 1
	noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d401 1
a401 1
    skipdirs="target-libiberty target-boehm-gc ${libgcj} target-libstdc++-v3 target-librx"
d415 1
a415 1
	noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d420 1
a420 1
    noconfigdirs="$noconfigdirs target-newlib target-libiberty target-libgloss target-boehm-gc ${libgcj} target-libmudflap"
d423 1
a423 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d427 1
a427 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libiberty target-boehm-gc ${libgcj} target-libmudflap gdb tcl tk libgui itcl"
d430 1
a430 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-rda target-boehm-gc ${libgcj}"
d433 1
a433 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libiberty target-libstdc++-v3 target-boehm-gc ${libgcj}"
d442 1
a442 1
    noconfigdirs="$noconfigdirs gdb ld target-newlib target-libgloss target-boehm-gc ${libgcj}"
d450 1
a450 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-boehm-gc ${libgcj}"
d453 1
a453 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj} target-newlib target-libgloss"
d456 1
a456 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj} target-newlib target-libgloss"
d459 1
a459 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d474 1
a474 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d479 1
a479 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d489 1
a489 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj} target-libiberty"
d492 1
a492 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d495 1
a495 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d498 1
a498 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d501 1
a501 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d504 1
a504 1
    noconfigdirs="$noconfigdirs ld target-libgloss target-boehm-gc ${libgcj}"
d507 1
a507 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 target-boehm-gc ${libgcj}"
d516 1
a516 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss target-boehm-gc ${libgcj}"
d519 1
a519 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss target-boehm-gc ${libgcj} gcc gdb newlib"
d534 1
a534 1
	noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj} target-newlib target-libgloss";;
d538 1
a538 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-mudflap target-boehm-gc ${libgcj}"
d541 1
a541 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss target-boehm-gc ${libgcj}"
d544 1
a544 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj} gdb"
d547 1
a547 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj} gdb"
d550 1
a550 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d553 1
a553 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d556 1
a556 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss target-boehm-gc ${libgcj}"
d572 1
a572 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d580 1
a580 1
    noconfigdirs="$noconfigdirs ld shellutils target-boehm-gc ${libgcj}"
d583 1
a583 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj} gdb"
d591 1
a591 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj} readline mmalloc libgui itcl gdb ld"
d596 1
a596 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d603 1
a603 1
	noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}";;
d619 1
a619 1
    noconfigdirs="$noconfigdirs expect target-libgloss target-boehm-gc ${libgcj}"
d630 1
a630 1
    noconfigdirs="$noconfigdirs target-gperf target-libgloss target-boehm-gc ${libgcj}"
d649 1
a649 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss target-boehm-gc ${libgcj}"
d654 1
a654 1
    noconfigdirs="$noconfigdirs ld target-libgloss target-boehm-gc ${libgcj}"
d657 1
a657 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-boehm-gc ${libgcj}"
d663 1
a663 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d666 1
a666 1
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss target-boehm-gc ${libgcj}"
d672 1
a672 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d675 1
a675 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 target-boehm-gc ${libgcj}"
d678 1
a678 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d681 1
a681 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d693 1
a693 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d696 1
a696 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d703 1
a703 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-libssp target-boehm-gc ${libgcj}"
d707 1
a707 1
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl gnuserv target-boehm-gc ${libgcj}"
d713 1
a713 1
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl gnuserv target-boehm-gc ${libgcj}"
d716 1
a716 1
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss target-boehm-gc ${libgcj}"
d719 1
a719 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d724 1
a724 1
    noconfigdirs="$noconfigdirs target-newlib gprof target-boehm-gc ${libgcj}"
d727 1
a727 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-libssp target-boehm-gc ${libgcj}"
d730 1
a730 1
    noconfigdirs="$noconfigdirs gprof target-boehm-gc ${libgcj}"
d733 1
a733 1
    noconfigdirs="$noconfigdirs ld binutils gprof target-libgloss target-boehm-gc ${libgcj}"
d736 1
a736 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-boehm-gc ${libgcj}"
d743 1
a743 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-boehm-gc ${libgcj}"
d746 1
a746 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-boehm-gc ${libgcj}"
d749 1
a749 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-boehm-gc ${libgcj}"
d752 1
a752 1
    noconfigdirs="$noconfigdirs gprof target-boehm-gc ${libgcj}"   # same as generic mips
d755 1
a755 1
    noconfigdirs="$noconfigdirs target-newlib target-boehm-gc ${libgcj}"
d761 1
a761 1
    noconfigdirs="$noconfigdirs gprof target-boehm-gc ${libgcj}"
d764 1
a764 1
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes target-libgloss target-boehm-gc ${libgcj}"
d773 1
a773 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d776 1
a776 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d779 1
a779 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d782 1
a782 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d785 1
a785 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d793 1
a793 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d798 1
a798 1
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld target-libstdc++-v3 opcodes target-libgloss target-boehm-gc ${libgcj}"
d801 1
a801 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d804 1
a804 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d807 1
a807 1
    noconfigdirs="$noconfigdirs target-libgloss target-boehm-gc ${libgcj}"
d810 1
a810 1
    noconfigdirs="$noconfigdirs bfd binutils gdb ld target-newlib opcodes target-libgloss target-boehm-gc ${libgcj}"
d813 1
a813 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-boehm-gc ${libgcj}"
d816 1
a816 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
d819 1
a819 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 target-boehm-gc ${libgcj}"
d825 1
a825 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-boehm-gc ${libgcj}"
d828 1
a828 1
    noconfigdirs="$noconfigdirs target-boehm-gc ${libgcj}"
@


1.306
log
@Enable gprof for cross builds.
@
text
@a136 1
	target-boehm-gc \
a149 1
		target-libgcc-math \
d151 1
a314 12
# Set the default so we build libgcc-math for ix86 and x86_64
AC_ARG_ENABLE(libgcc-math,
[  --enable-libgcc-math   Builds libgcc-math directory],,
[
case "${target}" in
  i?86-* | x86_64-* )
    enable_libgcc_math=yes ;;
  *)
    enable_libgcc_math=no ;;
esac
])

d369 1
a369 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d378 1
a378 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d381 1
a381 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d395 1
a395 1
	noconfigdirs="$noconfigdirs ${libgcj}"
d401 1
a401 1
    skipdirs="target-libiberty ${libgcj} target-libstdc++-v3 target-librx"
d415 1
a415 1
	noconfigdirs="$noconfigdirs ${libgcj}"
d420 1
a420 1
    noconfigdirs="$noconfigdirs target-newlib target-libiberty target-libgloss ${libgcj} target-libmudflap"
d423 1
a423 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d427 1
a427 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libiberty ${libgcj} target-libmudflap gdb tcl tk libgui itcl"
d430 1
a430 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-rda ${libgcj}"
d433 1
a433 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libiberty target-libstdc++-v3 ${libgcj}"
d442 1
a442 1
    noconfigdirs="$noconfigdirs gdb ld target-newlib target-libgloss ${libgcj}"
d450 1
a450 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d453 1
a453 1
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
d456 1
a456 1
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
d459 1
a459 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d474 1
a474 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d479 1
a479 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d489 1
a489 1
    noconfigdirs="$noconfigdirs ${libgcj} target-libiberty"
d492 1
a492 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d495 1
a495 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d498 1
a498 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d501 1
a501 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d504 1
a504 1
    noconfigdirs="$noconfigdirs ld target-libgloss ${libgcj}"
d507 1
a507 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
d516 1
a516 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d519 1
a519 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj} gcc gdb newlib"
d534 1
a534 1
	noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss";;
d538 1
a538 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-mudflap ${libgcj}"
d541 1
a541 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d544 1
a544 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
d547 1
a547 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
d550 1
a550 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d553 1
a553 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d556 1
a556 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d572 4
a575 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d580 1
a580 1
    noconfigdirs="$noconfigdirs ld shellutils ${libgcj}"
d583 1
a583 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
d591 1
a591 1
    noconfigdirs="$noconfigdirs ${libgcj} readline mmalloc libgui itcl gdb ld"
d596 1
a596 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d603 1
a603 1
	noconfigdirs="$noconfigdirs ${libgcj}";;
d619 1
a619 1
    noconfigdirs="$noconfigdirs expect target-libgloss ${libgcj}"
d630 1
a630 1
    noconfigdirs="$noconfigdirs target-gperf target-libgloss ${libgcj}"
d649 1
a649 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d654 1
a654 1
    noconfigdirs="$noconfigdirs ld target-libgloss ${libgcj}"
d657 1
a657 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d663 1
a663 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d666 1
a666 1
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
d672 1
a672 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d675 1
a675 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
d678 1
a678 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d681 1
a681 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d693 1
a693 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d696 1
a696 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d703 1
a703 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-libssp ${libgcj}"
d707 1
a707 1
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl gnuserv ${libgcj}"
d713 1
a713 1
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl gnuserv ${libgcj}"
d716 1
a716 1
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
d719 1
a719 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d724 1
a724 1
    noconfigdirs="$noconfigdirs target-newlib gprof ${libgcj}"
d727 1
a727 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-libssp ${libgcj}"
d730 1
a730 1
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
d733 1
a733 1
    noconfigdirs="$noconfigdirs ld binutils gprof target-libgloss ${libgcj}"
d736 1
a736 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d743 1
a743 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d746 1
a746 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d749 1
a749 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d752 1
a752 1
    noconfigdirs="$noconfigdirs gprof ${libgcj}"   # same as generic mips
d755 1
a755 1
    noconfigdirs="$noconfigdirs target-newlib ${libgcj}"
d761 1
a761 1
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
d764 1
a764 1
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes target-libgloss ${libgcj}"
d773 1
a773 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d776 1
a776 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d779 1
a779 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d782 1
a782 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d785 1
a785 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d793 1
a793 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d798 1
a798 1
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld target-libstdc++-v3 opcodes target-libgloss ${libgcj}"
d801 1
a801 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d804 1
a804 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d807 1
a807 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d810 1
a810 1
    noconfigdirs="$noconfigdirs bfd binutils gdb ld target-newlib opcodes target-libgloss ${libgcj}"
d813 1
a813 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d816 1
a816 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d819 1
a819 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
d825 1
a825 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d828 1
a828 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d1316 28
@


1.305
log
@* configure.in: Restore CFLAGS if GM P isn't present.
* configure: Regenerate.
@
text
@d230 1
a230 1
native_only="autoconf automake libtool fileutils find gawk gettext gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms gnuserv target-gperf"
@


1.304
log
@* configure.in (m32c): Build libstdc++-v3.  Pass flags to
reference libgloss so that libssp can be built in a combined
tree.
* configure: Regenerate.
@
text
@a1144 1
  CFLAGS="$saved_CFLAGS"
d1146 1
@


1.303
log
@
2006-04-06  Carlos O'Donell <carlos@@codesourcery.com>

	* Makefile.tpl: Add install-html target.
	* Makefile.def: Add install-html target.
	* Makefile.in: Regenerate.
	* configure.in: Add --with-datarootdir, --with-docdir,
	and --with-htmldir options.
	* configure: Regenerate.

bfd/

2006-04-06  Carlos O'Donell  <carlos@@codesourcery.com>

	* po/Make-in: Add install-html target.
	* Makefile.am: Rename docdir to bfddocdir. Add datarootdir, docdir
	htmldir. Add install-html and install-html-recursive targets.
	* Makefile.in: Regenerate.
	* configure.in: AC_SUBST for datarootdir, docdir and htmldir.
	* configure: Regenerate.

bfd/doc/

2006-04-06  Carlos O'Donell  <carlos@@codesourcery.com>

	* Makefile.am: Add install-html and install-html-am targets.
	Define datarootdir, docdir and htmldir.
	* Makefile.in: Regenerate.

binutils/

2006-04-06  Carlos O'Donell  <carlos@@codesourcery.com>

	* po/Make-in: Add install-html target.
	* Makefile.am: Add install-html and install-html-recursive targets.
	* Makefile.in: Regenerate.
	* configure.in: AC_SUBST datarootdir, docdir and htmldir.
	* configure: Regenerate.
	* doc/Makefile.am: Add install-html and install-html-am targets.
	* doc/Makefile.in: Regenerate.

etc/

2006-04-06  Carlos O'Donell  <carlos@@codesourcery.com>

	* Makefile.in: Add install-html target. Add htmldir,
	docdir and datarootdir.
	* configure.texi: Document install-html target.
	* configure.in: AC_SUBST datarootdir, docdir, htmldir.
	* configure: Regenerate.

gas/

2006-04-06  Carlos O'Donell  <carlos@@codesourcery.com>

	* po/Make-in: Add install-html target.
	* Makefile.am: Add install-html and install-html-recursive targets.
	* Makefile.in: Regenerate.
	* configure.in: AC_SUBST datarootdir, docdir, htmldir.
	* configure: Regenerate.
	* doc/Makefile.am: Add install-html and install-html-am targets.
	* doc/Makefile.in: Regenerate.

gprof/

2006-04-06  Carlos O'Donell  <carlos@@codesourcery.com>

	* po/Make-in: Add install-html target.
	* Makefile.am: Add install-html, install-html-am and
	install-html-recursive targets.
	* Makefile.in: Regenerate.
	* configure.in: AC_SUBST datarootdir, docdir, htmldir.
	* configure: Regenerate.

intl/

2006-04-06  Carlos O'Donell  <carlos@@codesourcery.com>

	* intl/Makefile.in: Add html info and dvi and install-html to .PHONY
	Add install-html target.

ld/

2006-04-06  Carlos O'Donell  <carlos@@codesourcery.com>

	* Makefile.am: Add install-html, install-html-am, and
	install-html-recursive targets.
	* Makefile.in: Regenerate.
	* configure.in: AC_SUBST datarootdir, docdir, htmldir.
	* configure: Regenerate.
	* po/Make-in: Add install-html target.

opcodes/

2006-04-06  Carlos O'Donell  <carlos@@codesourcery.com>

	* Makefile.am: Add install-html target.
	* Makefile.in: Regenerate.
@
text
@a447 3
  m32c-*-*)
    noconfigdirs="$noconfigdirs target-libstdc++-v3"
    ;;
d2129 14
@


1.302
log
@	PR binutils/1860
	* configure.in: Require makeinfo 4.4 or higher.
	* configure: Regenerate.
@
text
@d2387 20
@


1.301
log
@2006-03-14  Paolo Bonzini  <bonzini@@gnu.org>

	Sync with gcc:
	2006-03-10  Aldy Hernandez  <aldyh@@redhat.com>

        * configure.in: Handle --disable-<component> generically.
        * configure: Regenerate.

	2006-02-21 Rafael Avila de Espindola <rafael.espindola@@gmail.com>

        * Makefile.tpl  (BUILD_CONFIGDIRS): Remove.
        (TARGET_CONFIGDIRS): Remove.
        * configure.in: Remove AC_SUBST(target_configdirs).
        * Makefile.in, configure: Regenerated.
@
text
@d2206 1
a2206 1
    # For an installed makeinfo, we require it to be from texinfo 4.2 or
d2209 1
a2209 1
       | egrep 'texinfo[^0-9]*([1-3][0-9]|4\.[2-9]|[5-9])' >/dev/null 2>&1; then
@


1.301.2.1
log
@
2006-04-03  Carlos O'Donell <carlos@@codesourcery.com>

	* Makefile.tpl: Add install-html target.
	* Makefile.def: Add install-html target.
	* Makefile.in: Regenerate.
	* configure.in: Add --with-datarootdir, --with-docdir,
	and --with-htmldir options.
	* configure: Regenerate.
	* opcodes/Makefile.am: Add install-html target.
	* opcodes/Makefile.in: Regenerate.
	* libiberty/Makefile.in: Add install-html, install-html-am, and
	install-html-recursive targets. Define mkdir_p and
	NORMAL_INSTALL.
	* libiberty/configure.ac: AC_SUBST datarootdir, docdir, htmldir.
	* libiberty/configure: Regenerate.
	* libiberty/testsuite/Makefile.in: Add install-html and html targets.
	* ld/Makefile.am: Add install-html, install-html-am, and
	install-html-recursive targets.
	* ld/Makefile.in: Regenerate.
	* ld/configure.in: AC_SUBST datarootdir, docdir, htmldir.
	* ld/configure: Regenerate.
	* ld/po/Make-in: Add install-html target.
	* intl/Makefile.in: Add html info and dvi and install-html to .PHONY
	Add install-html target.
	* gprof/po/Make-in: Add install-html target.
	* gprof/Makefile.am: Add install-html, install-html-am and
	install-html-recursive targets.
	* gprof/Makefile.in: Regenerate.
	* gprof/configure.in: AC_SUBST datarootdir, docdir, htmldir.
	* gprof/configure: Regenerate.
	* gas/po/Make-in: Add install-html target.
	* gas/Makefile.am: Add install-html and install-html-recursive targets.
	* gas/Makefile.in: Regenerate.
	* gas/configure.in: AC_SUBST datarootdir, docdir, htmldir.
	* gas/configure: Regenerate.
	* gas/doc/Makefile.am: Add install-html and install-html-am targets.
	* gas/doc/Makefile.in: Regenerate.
	* binutils/po/Make-in: Add install-html target.
	* binutils/Makefile.am: Add install-html and install-html-recursive targets.
	* binutils/Makefile.in: Regenerate.
	* binutils/configure.in: AC_SUBST datarootdir, docdir and htmldir.
	* binutils/configure: Regenerate.
	* binutils/doc/Makefile.am: Add install-html and install-html-am targets.
	* binutils/doc/Makefile.in: Regenerate.
	* bfd/po/Make-in: Add install-html target.
	* bfd/Makefile.am: Rename docdir to bfddocdir. Add datarootdir, docdir
	htmldir. Add install-html and install-html-recursive targets.
	* bfd/Makefile.in: Regenerate.
	* bfd/configure.in: AC_SUBST for datarootdir, docdir and htmldir.
	* bfd/configure: Regenerate.
	* bfd/doc/Makefile.am: Add install-html and install-html-am targets.
	Define datarootdir, docdir and htmldir.
	* bfd/doc/Makefile.in: Regenerate.
	* etc/Makefile.in: Add install-html target. Add htmldir,
	docdir and datarootdir.
	* etc/configure.texi: Document install-html target.
	* etc/configure.in: AC_SUBST datarootdir, docdir, htmldir.
	* etc/configure: Regenerate.
@
text
@a2386 20
# Flags needed to enable html installing and building
AC_ARG_WITH(datarootdir,
[  --with-datarootdir	Use datarootdir as the data root directory.],
[datarootdir="\${prefix}/${withval}"],
[datarootdir="\${prefix}/share"])

AC_ARG_WITH(docdir,
[  --with-docdir	Install documentation in this directory.],
[docdir="\${prefix}/${withval}"],
[docdir="\${datarootdir}/doc"])

AC_ARG_WITH(htmldir,
[  --with-htmldir	Install html in this directory.],
[htmldir="\${prefix}/${withval}"],
[htmldir="\${docdir}"])

AC_SUBST(datarootdir)
AC_SUBST(docdir)
AC_SUBST(htmldir)

@


1.301.2.2
log
@	* configure: Regenerate.
	* configure.in: Enable gprof for cross builds.
@
text
@d230 1
a230 1
native_only="autoconf automake libtool fileutils find gawk gettext gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff target-groff guile perl time ash bash bzip2 prms gnuserv target-gperf"
@


1.301.2.3
log
@Merge changes between binutils-csl-2_17-branchpoint and
binutils-2_17, except for the addition of generated files to CVS.
@
text
@d2206 1
a2206 1
    # For an installed makeinfo, we require it to be from texinfo 4.4 or
d2209 1
a2209 1
       | egrep 'texinfo[^0-9]*([1-3][0-9]|4\.[4-9]|[5-9])' >/dev/null 2>&1; then
@


1.301.2.4
log
@    * configure.in (TOPLEVEL_CONFIGURE_ARGUMENTS, baseargs): Fix
        quoting.
        * configure: Regenerated.
@
text
@d71 8
a78 17
# Export original configure arguments for use by sub-configures.
# Quote arguments with shell meta charatcers.
TOPLEVEL_CONFIGURE_ARGUMENTS=
set -- "$progname" "$@@"
for ac_arg; do
  case "$ac_arg" in
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
    # if the argument is of the form -foo=baz, quote the baz part only
    ac_arg="`echo "'$ac_arg'" | sed "s/^'\([[-a-zA-Z0-9]]*=\)/\\1'/"`" ;;
  *) ;;
  esac
  # Add the quoted argument to the list.
  TOPLEVEL_CONFIGURE_ARGUMENTS="$TOPLEVEL_CONFIGURE_ARGUMENTS $ac_arg"
done
# Remove the initial space we just introduced and, as these will be
# expanded by make, quote '$'.
TOPLEVEL_CONFIGURE_ARGUMENTS=`echo "x$TOPLEVEL_CONFIGURE_ARGUMENTS" | sed -e 's/^x *//' -e 's,\\$,$$,g'`
d1961 31
a1991 35
# program-transform-name. 
baseargs=
eval "set -- $ac_configure_args"
for ac_arg; do
  case "$ac_arg" in
    --no* | \
    --c* | \
    --sr* | \
    --ho* | \
    --bu* | \
    --t* | \
    --program-* | \
    -cache_file* | \
    -srcdir* | \
    -host* | \
    -build* | \
    -target* | \
    -program-prefix* | \
    -program-suffix* | \
    -program-transform-name* )
      continue
      ;;
    *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
      # Quote the argument, using the same trick that autoconf itself
      # uses. if the argument is of the form -foo=baz, quote the baz part only
  	baseargs="$baseargs `echo "'$ac_arg'" | sed "s/^'\([[-a-zA-Z0-9]]*=\)/\\1'/"`" ;;
    *) 
      # Add the quoted argument to the list.
      baseargs="$baseargs $ac_arg"
      ;;
  esac
done
# Remove the initial space we just introduced and, as these will be
# expanded by make, quote '$'.
baseargs=`echo "x$baseargs" | sed -e 's/^x *//' -e 's,\\$,$$,g'`
@


1.300
log
@2006-02-20  Paolo Bonzini  <bonzini@@gnu.org>

	PR bootstrap/25670

	* Makefile.tpl ([+compare-target+]): Print explanation messages.

	* Makefile.def (ADAFLAGS, BOOT_ADAFLAGS, LANGUAGES): New flags_to_pass.
	* Makefile.tpl (BASE_FLAGS_TO_PASS): Support optional flags_to_pass.
	(EXTRA_GCC_FLAGS): Remove ADAFLAGS, BOOT_ADAFLAGS, LANGUAGES,
	BUILD_PREFIX, BUILD_PREFIX_1.
	* configure.in: (BUILD_PREFIX, BUILD_PREFIX_1): Don't substitute.

	* Makefile.def (bootstrap stage 1): Pass LIBCFLAGS too.
	* Makefile.tpl (POSTSTAGE1_FLAGS_TO_PASS): Override LIBCFLAGS too.

	* Makefile.tpl (configure-stage[+id+]-[+prefix+][+module+],
	all-stage[+id+]-[+prefix+][+module+], : Use $(current_stage) instead
	of `cat stage_current`.  Always provide the `r' and `s' variables.
	(clean-stage[+id+]-[+prefix+][+module+]): Likewise, and make it into
	a single shell execution.
	(configure-[+prefix+][+module+], all-[+prefix+][+module+]): For
	bootstrapped modules, make the stage1 module if the build was not
	started yet, else build the current stage.
	(all-host, all-target): Omit bootstrapped modules (if bootstrapping).
	(all-build, all-host, all-target, [+make_target+]-host,
	[+make_target+]-target): Do not use \-continued lines.
	(target modules): Depend on stage_last, not all-gcc, if bootstrapping.
	(current_stage, restrap, stage_last): New.

	* Makefile.in: Regenerate.
	* configure: Regenerate.
@
text
@a307 1
  noconfigdirs="$noconfigdirs target-libada"
a314 3
if test "${ENABLE_LIBSSP}" != "yes" ; then
  noconfigdirs="$noconfigdirs target-libssp"
fi
a326 3
if test "${enable_libgcc_math}" != "yes"; then
  noconfigdirs="$noconfigdirs target-libgcc-math"
fi
d345 2
a346 8
# Allow --disable-libmudflap to exclude target-libmudflap
case $enable_libmudflap in
yes)
    ;;
no)
    noconfigdirs="$noconfigdirs target-libmudflap"
    ;;
"")
d359 1
a359 1
esac
d361 2
a362 8
# Allow --disable-libgomp to exclude target-libgomp
case $enable_libgomp in
yes)
    ;;
no)
    noconfigdirs="$noconfigdirs target-libgomp"
    ;;
"")
d377 1
a377 1
esac
d1321 8
d2163 1
a2163 1
AC_SUBST(target_configdirs)
@


1.300.2.1
log
@Merge XML and VFP support to this branch.
@
text
@d126 1
a126 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl libgui zlib libcpp libdecnumber expat"
@


1.300.4.1
log
@Initial version of available features support.
@
text
@d126 1
a126 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl libgui zlib libcpp libdecnumber expat"
@


1.299
log
@2006-02-14  Paolo Bonzini  <bonzini@@gnu.org>

	Sync from gcc:

	2006-01-31  Richard Guenther  <rguenther@@suse.de>
		    Paolo Bonzini  <bonzini@@gnu.org>

        * Makefile.def (target_modules): Add libgcc-math target module.
        * configure.in (target_libraries): Add libgcc-math target library.
        (--enable-libgcc-math): New configure switch.
        * Makefile.in: Re-generate.
        * configure: Re-generate.
        * libgcc-math: New toplevel directory.

	2006-01-18  Richard Henderson  <rth@@redhat.com>
	            Jakub Jelinek  <jakub@@redhat.com>
	            Diego Novillo  <dnovillo@@redhat.com>

        * libgomp: New directory.
        * Makefile.def: Add target_module libgomp.
        * Makefile.in: Regenerate.
        * configure.in (target_libraries): Add target-libgomp.
        * configure: Regenerate.
@
text
@a1062 2
  BUILD_PREFIX=${build_alias}-
  BUILD_PREFIX_1=${build_alias}-
a1073 3
  BUILD_PREFIX=
  BUILD_PREFIX_1=loser-

a2157 2
AC_SUBST(BUILD_PREFIX)
AC_SUBST(BUILD_PREFIX_1)
@


1.298
log
@2006-01-16  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Set with_gnu_as, with_gnu_ld, with_newlib earlier.
	Set md_exec_prefix.  Use ACX_CHECK_INSTALLED_TARGET_TOOL to find
	the assembler, linker and binutils.
	* configure: Regenerate.

config:
2006-01-16  Paolo Bonzini  <bonzini@@gnu.org>

	* acx.m4 (NCN_STRICT_CHECK_TARGET_TOOLS): Test $with_build_time_tools.
	(ACX_PATH_SEP): New.
	(ACX_TOOL_DIRS): Move here from the gcc directory.
	(ACX_CHECK_INSTALLED_TARGET_TOOL): New.
	(GCC_TARGET_TOOL): Do not use a host tool if we found a target tool
	with a complete path in either $with_build_time_tools or $exec_prefix.
@
text
@d151 1
d155 2
a156 1
		target-libada"
d320 15
d361 1
a361 1
    *-*-linux*-gnu | *-*-gnu* | *-*-k*bsd*-gnu)
d374 24
@


1.297
log
@2006-01-04  Paolo Bonzini  <bonzini@@gnu.org>

	Sync from gcc:

	2006-01-04  Paolo Bonzini  <bonzini@@gnu.org>

        PR bootstrap/24252

        * Makefile.def (flags_to_pass): Add STAGE1_CFLAGS and STAGE1_LANGUAGES.
        * Makefile.tpl (OBJDUMP): New.
        (EXTRA_HOST_FLAGS): Add it.
        (EXTRA_GCC_FLAGS): Remove flags already specified in flags_to_pass.

        * Makefile.tpl (stage[+id+]-start, stage[+id+]-end): Do not try
        to use symbolic links between directories.  Avoid race conditions
        or make them harmless.
        * configure.in: Do not try to use symbolic links between directories.

        * Makefile.def (LEAN): Pass.
        * Makefile.tpl (LEAN): Define.
        (stage[+id+]-start): Accept that the previous directory does not
        exist, if the bootstrap is lean.
        (stage[+id+]-bubble): Invoke lean bootstrap commands after
        stage[+id+]-start.  Use a makefile variable and an `if' instead of a
        configure substitution.
        ([+compare-target+]): Likewise.
        ([+bootstrap-target+]-lean): New.
        * configure.in: Remove lean bootstrap support from here.

        * Makefile.in: Regenerate.
        * configure: Regenerate.

	2006-01-02  Andreas Schwab  <schwab@@suse.de>

        * configure.in: When reconfiguring remove Makefile in
        all stage directories.
        * configure: Regenerate.
@
text
@d1477 33
d1541 49
a1646 33
# Set with_gnu_as and with_gnu_ld as appropriate.
#
# This is done by determining whether or not the appropriate directory
# is available, and by checking whether or not specific configurations
# have requested that this magic not happen.
# 
# The command line options always override the explicit settings in 
# configure.in, and the settings in configure.in override this magic.
#
# If the default for a toolchain is to use GNU as and ld, and you don't 
# want to do that, then you should use the --without-gnu-as and
# --without-gnu-ld options for the configure script.

if test x${use_gnu_as} = x &&
   echo " ${configdirs} " | grep " gas " > /dev/null 2>&1 ; then
  with_gnu_as=yes
  extra_host_args="$extra_host_args --with-gnu-as"
fi

if test x${use_gnu_ld} = x &&
   echo " ${configdirs} " | grep " ld " > /dev/null 2>&1 ; then
  with_gnu_ld=yes
  extra_host_args="$extra_host_args --with-gnu-ld"
fi

# If using newlib, add --with-newlib to the extra_host_args so that gcc/configure
# can detect this case.

if test x${with_newlib} != xno && echo " ${target_configdirs} " | grep " target-newlib " > /dev/null 2>&1 ; then
  with_newlib=yes
  extra_host_args="$extra_host_args --with-newlib"
fi

d2231 12
a2242 2
NCN_STRICT_CHECK_TARGET_TOOLS(AR_FOR_TARGET, ar)
NCN_STRICT_CHECK_TARGET_TOOLS(AS_FOR_TARGET, as)
a2244 1
NCN_STRICT_CHECK_TARGET_TOOLS(DLLTOOL_FOR_TARGET, dlltool)
d2248 11
a2258 7
NCN_STRICT_CHECK_TARGET_TOOLS(LD_FOR_TARGET, ld)
NCN_STRICT_CHECK_TARGET_TOOLS(LIPO_FOR_TARGET, lipo)
NCN_STRICT_CHECK_TARGET_TOOLS(NM_FOR_TARGET, nm)
NCN_STRICT_CHECK_TARGET_TOOLS(OBJDUMP_FOR_TARGET, objdump)
NCN_STRICT_CHECK_TARGET_TOOLS(RANLIB_FOR_TARGET, ranlib, :)
NCN_STRICT_CHECK_TARGET_TOOLS(STRIP_FOR_TARGET, strip)
NCN_STRICT_CHECK_TARGET_TOOLS(WINDRES_FOR_TARGET, windres)
@


1.296
log
@Add support for RDOS targets.
@
text
@d1 2
a2 2
#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998,
#   1999, 2000, 2001, 2002, 2003, 2004 Free Software Foundation, Inc.
d660 2
a661 2
   noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss"
     ;;
d1742 1
a1742 1
[  --enable-bootstrap[=lean]     Enable bootstrapping [no]],,
d1763 1
a1763 1
  yes:$build:$build:yes | yes:$build:$build:lean)
d1768 1
a1768 1
  yes:*:*:yes | yes:*:*:lean)
d1773 1
a1773 1
  no:*:*:yes | no:*:*:lean)
a1784 4
    bootstrap_lean='#'
    bootstrap_suffix=bootstrap ;;
  lean)
    bootstrap_lean=''
a1788 1
AC_SUBST(bootstrap_lean)
d1803 7
a1809 4
  if test -z "${no_recursion}" \
     && test -f ${module}/Makefile; then
    echo 1>&2 "*** removing ${module}/Makefile to force reconfigure"
    rm -f ${module}/Makefile
a2290 30
# It makes debugging easier if we create as symlinks the stage directories
# gcc for stageN-gcc and stagePREV-gcc for stage(N-1).  In case this is not
# possible, however, we can resort to mv.
AC_CACHE_CHECK([if symbolic links between directories work],
[gcc_cv_prog_ln_s_dir],
[if test "${LN_S}" = "ln -s" \
   && mkdir confdir.s1 \
   && ln -s confdir.s1 confdir.s2 \
   && echo timestamp1 > confdir.s1/conftest.1 \
   && cmp confdir.s1/conftest.1 confdir.s2/conftest.1 \
   && echo timestamp2 > confdir.s2/conftest.2 \
   && cmp confdir.s1/conftest.2 confdir.s1/conftest.2 \
   && rm -f confdir.s2; then
  gcc_cv_prog_ln_s_dir=yes
else
  gcc_cv_prog_ln_s_dir=no
fi
rm -rf confdir.s1 confdir.s2])

case ${gcc_cv_prog_ln_s_dir} in
  yes)
    CREATE_LINK_TO_DIR='ln -s $$1 $$2'
    UNDO_LINK_TO_DIR='rm -f $$1' ;;
  *)
    CREATE_LINK_TO_DIR='mv $$1 $$2'
    UNDO_LINK_TO_DIR='mv $$1 $$2' ;;
esac
AC_SUBST(CREATE_LINK_TO_DIR)
AC_SUBST(UNDO_LINK_TO_DIR)

@


1.295
log
@2005-12-20  Paolo Bonzini  <bonzini@@gnu.org>

	Revert Ada-related part of the previous change.

	* Makefile.def (ADAFLAGS, BOOT_ADAFLAGS, ADAFLAGS_FOR_TARGET):
	Do not pass.
	* Makefile.tpl (BOOT_ADAFLAGS): Do not define.
	* Makefile.in: Regenerate.
	* configure.in: Do not include mt-ppc-aix target fragment.
	* configure: Regenerate.

config:
2005-12-20  Paolo Bonzini  <bonzini@@gnu.org>

	Revert Ada-related part of the previous change.

	* mt-ppc-aix: Delete.
@
text
@d659 3
@


1.294
log
@2005-12-19  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Select appropriate fragments for PowerPC/AIX.
	* configure: Regenerate.

	* Makefile.def (flags_to_pass): Add ADAFLAGS, BOOT_ADAFLAGS,
	BOOT_CFLAGS, BOOT_LDFLAGS.
	* Makefile.tpl (POSTSTAGE1_FLAGS_TO_PASS): Handle BOOT_ADAFLAGS,
	BOOT_CFLAGS, BOOT_LDFLAGS.
	(TARGET_FLAGS_TO_PASS): Handle ADAFLAGS_FOR_TARGET.
	(stage[+id+]-bubble): Pass flags recursively to the comparison target.
	(stage): Fail if we cannot complete the work.

config:
2005-12-19  Paolo Bonzini  <bonzini@@gnu.org>

        * mt-ppc-aix, mh-ppc-aix: New.
@
text
@a1521 1
    target_makefile_frag="config/mt-ppc-aix"
@


1.293
log
@2005-12-14  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Flip the top-level bootstrap switch.
	* configure: Regenerate.

	Merge from gcc:

	2005-12-14  Daniel Jacobowitz  <dan@@codesourcery.com>

        * Makefile.tpl: Throughout the file, use : $(MAKE) along with
        $(stage) and $(unstage).
        (EXTRA_TARGET_FLAGS): Correct double-quoting.
        (all): Remove stray semicolon.
        (local-distclean): Don't handle multilib.tmp and multilib.out.
        (install.all): Set $s for consistency.
        (configure-[+prefix+][+module+]): Instead of [+deps+], handle
        check_multilibs setting.  Always make the install directory.
        (configure-stage[+id+]-[+prefix+][+module+]): Likewise.
        Correct @@if/@@endif.
        (all-stage[+id+]-[+prefix+][+module+]): Correct @@if/@@endif.
        ($(TARGET_SUBDIR)/[+module+]/multilib.out): Remove.
        (stage[+id+]-start, stage[+id+]-end): Stage $(TARGET_SUBDIR).
        (multilib.out): Remove.
        * Makefile.in: Regenerated.
@
text
@d970 6
d1522 1
@


1.292
log
@
	Rename ms1 to mt, part 1
	* config.sub: Replace ms1 arch with mt.  Allow ms1 as alias.
	* configure.in: Replace ms1 arch with mt.
	* configure: Rebuilt.

	* bfd/Makefile.am (ALL_MACHINES, ALL_MACHINES_CFILES,
	BFD32_BACKENDS, BFD32_BACKENDS_CFILES): Replace ms1 with mt.
	(cpu_mt.lo, elf32-mt.lo): Update target and dependency names.
	* bfd/Makefile.in: Rebuilt.
	* bfd/config.bfd: Replace ms1 arch with mt.
	* bfd/configure.in: Replace ms1 files with mt files.
	* bfd/configure: Rebuilt.
	* bfd/elf32-mt.c: Renamed from elf32-ms1.c.  Update include files.
	* bfd/cpu-mt.c: Renamed from cpu-ms1.c.

	* cpu/mt.cpu: Rename from ms1.cpu.
	* cpu/mt.opc: Rename from ms1.opc.

	* binutils/Makefile.am: Replace ms1 files with mt files.
	* binutils/Makefile.in: Rebuilt.
	* binutils/readelf.c (elf/mt.h): Adjust #include.

	* gas/configure.in: Replace ms1 arch with mt arch.
	* gas/configure: Rebuilt.
	* gas/configure.tgt: Replace ms1 arch with mt arch.
	* gas/config/tc-mt.c: Renamed from tc-ms1.c: Update include files.

	* gas/doc/Makefile.am (CPU_DOCS): Replace ms1 files with mt files.
	* gas/doc/Makefile.in: Rebuilt.

	* gas/testsuite/gas/mt: Renamed from ms1 dir.  Update file names as
	needed.
	* gas/testsuite/gas/mt/errors.exp: Replace ms1 arch with mt arch.
	* gas/testsuite/gas/mt/mt.exp: Replace ms1 arch with mt arch.
	* gas/testsuite/gas/mt/relocs.exp: Replace ms1 arch with mt arch.

	* gdb/configure.tgt: Replace ms1 arch with mt arch.
	* gdb/config/mt: Renamed from ms1 dir.  Update file names as needed.
	* gdb/config/mt/mt.mt (TDEPFILES): Replace ms1 file with mt file.

	* include/elf/mt.h: Renamed from ms1.h

	* ld/Makefile.am (ALL_EMULATIONS): Replace ms1 files with mt files.
	(eelf32mt.c): Update target name and dependencies.
	* ld/Makefile.in: Rebuilt.
	* ld/configure.tgt: Replace ms1 arch with mt arch.
	* ld/emulparams/elf32mt.sh: Renamed from elf32ms1.sh. Update
	comment.

	* libgloss/configure.in: Replace ms1 arch with mt arch.
	* libgloss/configure: Rebuilt.
	* libgloss/mt: Renamed from ms1 dir.

	* newlib/configure.host: Replace ms1 arch with mt arch.
	* newlib/libc/machine/mt: Renamed from ms1 dir.

	* opcodes/Makefile.am (CLEANFILES, CGEN_CPUS, MT_DEPS): Replace ms1
	with mt.
	* opcodes/Makefile.in: Rebuilt.
	* opcodes/configure.in: Replace ms1 files with mt files.
	* opcodes/configure: Rebuilt.

	* sid/component/cgen-cpu/mt: Renamed from ms1 dir.  Update file
	names as appropriate.
	* sid/component/cgen-cpu/mt/Makefile.am: Replace ms1 files with mt
	files.
	* sid/component/cgen-cpu/mt/Makefile.in: Rebuilt.
@
text
@d1745 1
a1745 1
  # Default behavior.  (We'll) enable bootstrap if we have a compiler
d1748 1
a1748 2
    # This will become 'yes'
    enable_bootstrap=no ;;
@


1.291
log
@toplevel:
2005-12-05  Paolo Bonzini  <bonzini@@gnu.org>

	Sync with gcc:

	2005-12-05  Paolo Bonzini  <bonzini@@gnu.org>

        * configure.in (CONFIGURED_BISON, CONFIGURED_YACC, CONFIGURED_M4,
        CONFIGURED_FLEX, CONFIGURED_LEX, CONFIGURED_MAKEINFO): Remove
        "CONFIGURED_" from the AC_CHECK_PROGS invocation.  Move below.
        Find in-tree tools if available.
        (EXPECT, RUNTEST, LIPO, STRIP): Find them and substitute them.
        (CONFIGURED_*_FOR_TARGET): Don't set nor substitute.
        (*_FOR_TARGET): Set them with GCC_TARGET_TOOL.
        (COMPILER_*_FOR_TARGET): New.
        * Makefile.tpl (HOST_EXPORTS): Add *_FOR_TARGET symbols that gcc needs.
        (BASE_TARGET_EXPORTS): Use COMPILER_*_FOR_TARGET symbols.
        (CONFIGURED_*, USUAL_*): Remove.
        (BISON, YACC, FLEX, LEX, M4, MAKEINFO, EXPECT, RUNTEST, LIPO,
        STRIP): Use autoconf substitutions.
        (COMPILER_AS_FOR_TARGET, COMPILER_LD_FOR_TARGET,
        COMPILER_NM_FOR_TARGET): New.
        (EXTRA_HOST_FLAGS): Pass LIPO and STRIP.

        (all): Make all-host and all-target in parallel.
        (do-[+make_target+], do-check, install, [+compare-target+]): Ensure
        that $$r and $$s are set before invoking a recursive make.
        (stage[+id+]-bubble): Likewise, and invoke the comparison at the end.
        ([+bootstrap-target+]): Inline most of the `all' target.

	2005-11-29  Ben Elliston  <bje@@au.ibm.com>

        * Makefile.tpl (clean-target-libgcc): Invoke clean-target-libgcc
        from the gcc build directory.
        * Makefile.in: Regenerate.

	2005-11-29  Ben Elliston  <bje@@au.ibm.com>

        * Makefile.def: Add new libdecnumber host_module.  Make all-gcc
        depend on all-libdecnumber.
        * configure.in (host_libs): Include libdecnumber.
        * Makefile.in: Regenerate.
        * configure: Likewise.

	2005-11-21  Kean Johnston  <jkj@@sco.com>

        * config.sub, config.guess: Sync from upstream sources.

config:
2005-12-05  Paolo Bonzini  <bonzini@@gnu.org>

	* acx.m4 (GCC_TARGET_TOOL): New.
@
text
@d686 1
a686 1
  ms1-*-*)
@


1.290
log
@	* Makefile.def: Remove gdb dependencies for gdbtk.
	* Makefile.tpl (CONFIGURE_GDB_TK, INSTALL_GDB_TK): New variables.
	(configure-gdb, install-gdb): New rules.
	* configure.in: Set CONFIGURE_GDB_TK and INSTALL_GDB_TK.
	* Makefile.in, configure: Regenerated.
@
text
@d126 1
a126 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl libgui zlib libcpp"
a1613 11
# Generate default definitions for YACC, M4, LEX and other programs that run
# on the build machine.  These are used if the Makefile can't locate these
# programs in objdir.
MISSING=`cd $ac_aux_dir && ${PWDCMD-pwd}`/missing
AC_CHECK_PROGS([CONFIGURED_BISON], [bison], [$MISSING bison])
AC_CHECK_PROGS([CONFIGURED_YACC], ['bison -y' byacc yacc], [$MISSING bison -y])
AC_CHECK_PROGS([CONFIGURED_M4], [gm4 gnum4 m4], [$MISSING m4])
AC_CHECK_PROGS([CONFIGURED_FLEX], [flex], [$MISSING flex])
AC_CHECK_PROGS([CONFIGURED_LEX], [flex lex], [$MISSING flex])
AC_CHECK_PROGS([CONFIGURED_MAKEINFO], makeinfo, [$MISSING makeinfo])

d2091 66
d2162 1
d2165 1
d2175 1
a2175 2
# Target tools.  Do the tests using the names they may have passed in
# the environment, then move it to CONFIGURED_*_FOR_TARGET.
d2192 1
a2192 32
CONFIGURED_AR_FOR_TARGET="$AR_FOR_TARGET"
CONFIGURED_AS_FOR_TARGET="$AS_FOR_TARGET"
CONFIGURED_CC_FOR_TARGET="$CC_FOR_TARGET"
CONFIGURED_CXX_FOR_TARGET="$CXX_FOR_TARGET"
CONFIGURED_DLLTOOL_FOR_TARGET="$DLLTOOL_FOR_TARGET"
CONFIGURED_GCC_FOR_TARGET="$GCC_FOR_TARGET"
CONFIGURED_GCJ_FOR_TARGET="$GCJ_FOR_TARGET"
CONFIGURED_GFORTRAN_FOR_TARGET="$GFORTRAN_FOR_TARGET"
CONFIGURED_LD_FOR_TARGET="$LD_FOR_TARGET"
CONFIGURED_LIPO_FOR_TARGET="$LIPO_FOR_TARGET"
CONFIGURED_NM_FOR_TARGET="$NM_FOR_TARGET"
CONFIGURED_OBJDUMP_FOR_TARGET="$OBJDUMP_FOR_TARGET"
CONFIGURED_RANLIB_FOR_TARGET="$RANLIB_FOR_TARGET"
CONFIGURED_STRIP_FOR_TARGET="$STRIP_FOR_TARGET"
CONFIGURED_WINDRES_FOR_TARGET="$WINDRES_FOR_TARGET"

AC_SUBST(CONFIGURED_AR_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_AS_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_CC_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_CXX_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_DLLTOOL_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_GCC_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_GCJ_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_GFORTRAN_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_LD_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_LIPO_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_NM_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_OBJDUMP_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_RANLIB_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_STRIP_FOR_TARGET)dnl
AC_SUBST(CONFIGURED_WINDRES_FOR_TARGET)dnl
AC_SUBST(FLAGS_FOR_TARGET)
d2194 22
a2215 43
# Fix up target tools.
if test "x${build}" = "x${host}" ; then
  # In this case, the newly built tools can and should be used,
  # so we override the results of the autoconf tests.
  # This should really only happen when the tools are actually being built,
  # but that's a further refinement.  The new build scheme, where
  # tools are built into a structure paralleling where they're installed,
  # should also eliminate all of this cleanly.
  AR_FOR_TARGET="\$(USUAL_AR_FOR_TARGET)"
  AS_FOR_TARGET="\$(USUAL_AS_FOR_TARGET)"
  CC_FOR_TARGET="\$(USUAL_CC_FOR_TARGET)"
  CXX_FOR_TARGET="\$(USUAL_CXX_FOR_TARGET)"
  RAW_CXX_FOR_TARGET="\$(USUAL_RAW_CXX_FOR_TARGET)"
  DLLTOOL_FOR_TARGET="\$(USUAL_DLLTOOL_FOR_TARGET)"
  GCC_FOR_TARGET="\$(USUAL_GCC_FOR_TARGET)"
  GCJ_FOR_TARGET="\$(USUAL_GCJ_FOR_TARGET)"
  GFORTRAN_FOR_TARGET="\$(USUAL_GFORTRAN_FOR_TARGET)"
  LD_FOR_TARGET="\$(USUAL_LD_FOR_TARGET)"
  LIPO_FOR_TARGET="\$(USUAL_LIPO_FOR_TARGET)"
  NM_FOR_TARGET="\$(USUAL_NM_FOR_TARGET)"
  OBJDUMP_FOR_TARGET="\$(USUAL_OBJDUMP_FOR_TARGET)"
  RANLIB_FOR_TARGET="\$(USUAL_RANLIB_FOR_TARGET)"
  STRIP_FOR_TARGET="\$(USUAL_STRIP_FOR_TARGET)"
  WINDRES_FOR_TARGET="\$(USUAL_WINDRES_FOR_TARGET)"
else
  # Just use the ones we found.
  AR_FOR_TARGET="\$(CONFIGURED_AR_FOR_TARGET)"
  AS_FOR_TARGET="\$(CONFIGURED_AS_FOR_TARGET)"
  CC_FOR_TARGET="\$(CONFIGURED_CC_FOR_TARGET)"
  CXX_FOR_TARGET="\$(CONFIGURED_CXX_FOR_TARGET)"
  RAW_CXX_FOR_TARGET="\$(CONFIGURED_CXX_FOR_TARGET)"
  DLLTOOL_FOR_TARGET="\$(CONFIGURED_DLLTOOL_FOR_TARGET)"
  GCC_FOR_TARGET="\$(CONFIGURED_GCC_FOR_TARGET)"
  GCJ_FOR_TARGET="\$(CONFIGURED_GCJ_FOR_TARGET)"
  GFORTRAN_FOR_TARGET="\$(CONFIGURED_GFORTRAN_FOR_TARGET)"
  LD_FOR_TARGET="\$(CONFIGURED_LD_FOR_TARGET)"
  LIPO_FOR_TARGET="\$(CONFIGURED_LIPO_FOR_TARGET)"
  NM_FOR_TARGET="\$(CONFIGURED_NM_FOR_TARGET)"
  OBJDUMP_FOR_TARGET="\$(CONFIGURED_OBJDUMP_FOR_TARGET)"
  RANLIB_FOR_TARGET="\$(CONFIGURED_RANLIB_FOR_TARGET)"
  STRIP_FOR_TARGET="\$(CONFIGURED_STRIP_FOR_TARGET)"
  WINDRES_FOR_TARGET="\$(CONFIGURED_WINDRES_FOR_TARGET)"  
fi
d2217 1
d2225 19
@


1.289
log
@	* configure.in (bfin-*-*): Use test, not brackets, in if statement.
	* configure: Regenerate.
@
text
@d1727 2
d2082 1
d2084 1
@


1.288
log
@	* configure.in (arm-*-linux-gnueabi): Add to noconfigdirs
	target-libffi, target-qthreads, target-libjava, and
	targetlibobjc.
	* configure: Regenerate.
@
text
@d505 1
a505 1
    if [ x${is_cross_compiler} != xno ] ; then
@


1.287
log
@	* Makefile.def (flags_to_pass): Add OBJDUMP_FOR_TARGET.
	* Makefile.tpl (BASE_TARGET_EXPORTS): Add OBJDUMP.
	(OBJDUMP_FOR_TARGET, CONFIGURED_OBJDUMP_FOR_TARGET)
	(USUAL_OBJDUMP_FOR_TARGET): New.
	(EXTRA_TARGET_FLAGS): Add OBJDUMP.
	* configure.in: Check for $OBJDUMP_FOR_TARGET.
	* configure, Makefile: Regenerated.
@
text
@d478 4
@


1.286
log
@2005-10-05  Paolo Bonzini  <bonzini@@gnu.org>

	PR bootstrap/22340

	* configure.in (default_target): Remove.
	* Makefile.tpl (all): Do not use prerequisites as subroutines
	(all) [gcc-bootstrap]: Bootstrap gcc first if it was not done yet.
	(do-[+make_target+], check, install, [+bootstrap_target+]): Do not
	use prerequisites as subroutines.
	(check-host, check-target): New.
	(bootstrap configure & all targets): Do not use stage*-start
	if the directory layout is already ok.
	(non-bootstrap configure & all targets): Prepend a $(unstage).
	(stage[+id+]-bubble): Do that here.  Do not use NOTPARALLEL.
	(NOTPARALLEL): Remove.
	(unstage, stage variables): New variables.
	(unstage, stage targets): Simply expand to those variables.

	* configure: Regenerate.
	* Makefile.in: Regenerate.
@
text
@d2123 1
d2139 1
d2155 1
d2181 1
d2199 1
@


1.285
log
@	* configure.in (bfin-*-*): Support bfin.
	* configure: Regenerated.
@
text
@a1782 1
    default_target=bootstrap
a1785 1
    default_target=bootstrap
a1787 1
    default_target=all
a1790 1
AC_SUBST(default_target)
@


1.284
log
@2005-09-30  H.J. Lu  <hongjiu.lu@@intel.com>

	* configure.in (*-*-darwin*): Build bfd, binutils and opcodes.
	* configure: Regenerated.
@
text
@d499 6
@


1.283
log
@Index: ChangeLog
2005-09-28  Geoffrey Keating  <geoffk@@apple.com>

	* Makefile.tpl (BASE_TARGET_EXPORTS): Add LIPO, STRIP.
	(LIPO_FOR_TARGET): New.
	(CONFIGURED_LIPO_FOR_TARGET): New.
	(USUAL_LIPO_FOR_TARGET): New.
	(STRIP_FOR_TARGET): New.
	(CONFIGURED_STRIP_FOR_TARGET): New.
	(USUAL_STRIP_FOR_TARGET): New.
	* Makefile.def (flags_to_pass): Add LIPO_FOR_TARGET and
	STRIP_FOR_TARGET.
	* configure.in: Set LIPO_FOR_TARGET, STRIP_FOR_TARGET,
	CONFIGURED_LIPO_FOR_TARGET, CONFIGURED_STRIP_FOR_TARGET.
	* Makefile.in: Regenerate.
	* configure.in: Regenerate.

Index: gcc/ChangeLog
2005-09-28  Geoffrey Keating  <geoffk@@apple.com>

	* Makefile.in: Export LIPO_FOR_TARGET, STRIP_FOR_TARGET.
	(stage1-start): Delete old libgcc and libunwind before moving
	anything into the stage directory.
	(stage2-start): Likewise.
	(stage3-start): Likewise.
	(stage4-start): Likewise.
	(stageprofile-start): Likewise.
	(stagefeedback-start): Likewise.
	* config.gcc (*-*-darwin*): Automatically use CPU-specific darwin.h
	header in tm_file and CPU-specific t-darwin in tmake_file.
	(i[34567]86-*-darwin*): Don't change tm_file.
	(powerpc-*-darwin*): Don't change tm_file or tmake_file.
	* config/darwin.h (REAL_LIBGCC_SPEC): Rewrite to use proper libgcc
	shared library stub for target OS version.
	* config/t-slibgcc-darwin (SHLIB_SOLINK): Delete.
	(SHLIB_LINK): Don't make SHLIB_SOLINK.
	(SHLIB_INSTALL): Don't install SHLIB_SOLINK.
	(libgcc_s.%.dylib): New.
	(LIBGCC): Define.
	(install-darwin-libgcc-stubs): New.
	(INSTALL_LIBGCC): New append.
	* config/i386/darwin-libgcc.10.4.ver: New.
	* config/i386/darwin-libgcc.10.5.ver: New.
	* config/i386/t-darwin: New.
	* config/rs6000/darwin-libgcc.10.4.ver: New.
	* config/rs6000/darwin-libgcc.10.5.ver: New.
	* config/rs6000/darwin.h (REAL_LIBGCC_SPEC): Delete.
	* config/rs6000/t-darwin (SHLIB_VERPFX): Define.
@
text
@d367 1
a367 1
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb gprof"
@


1.282
log
@2005-09-19  David Edelsohn  <edelsohn@@gnu.org>

        * configure.in (powerpc-*-aix*): Add target-libssp to noconfigdirs.
        (rs6000-*-aix*): Same.
        * configure: Regenerate.

2005-09-14  Francois-Xavier Coudert  <coudert@@clipper.ens.fr>

        * configure.in: Recognize f95 in the --enable-languages option,
        and substitute it for fortran, issuing a warning.
        * configure: Regenerate.
@
text
@d2119 1
d2122 1
d2134 1
d2137 1
d2149 1
d2152 1
d2174 1
d2177 1
d2191 1
d2194 1
@


1.281
log
@2005-08-30  Phil Edwards  <phil@@codesourcery.com>

* configure.in (*-*-vxworks*):  Add target-libstdc++-v3 to noconfigdirs.
* configure:  Regenerated.
@
text
@d509 1
a509 1
	unsupported_languages="$unsupported_languages f95"
d512 1
a512 1
	unsupported_languages="$unsupported_languages f95"
d517 1
a517 1
	unsupported_languages="$unsupported_languages f95"
d668 1
a668 1
    unsupported_languages="$unsupported_languages f95 java"
d681 1
a681 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d705 1
a705 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d1146 9
@


1.280
log
@toplevel:
2005-08-12  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Replace NCN_STRICT_CHECK_TOOL with
	NCN_STRICT_CHECK_TOOLS, and likewise for NCN_STRICT_CHECK_TARGET_TOOLS.
	Look for alternate names of the target cc and c++

config:
2005-08-12  Paolo Bonzini  <bonzini@@gnu.org>

	* config/acx.m4 (NCN_CHECK_TARGET_TOOL, NCN_STRICT_CHECK_TOOL,
	NCN_STRICT_CHECK_TARGET_TOOL): Remove.
	(NCN_STRICT_CHECK_TOOLS, NCN_STRICT_CHECK_TARGET_TOOLS): New,
@
text
@d424 1
a424 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libiberty ${libgcj}"
@


1.279
log
@2005-08-08  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in (CC_FOR_TARGET, CXX_FOR_TARGET, GCJ_FOR_TARGET,
	GCC_FOR_TARGET, RAW_CXX_FOR_TARGET, GFORTRAN_FOR_TARGET): Find
	them with NCN_STRICT_CHECK_TARGET_TOOL, like the other target
	tools; remove code to manually set them.
	(Target tools): Look in the environment for them.
	* Makefile.tpl (CC_FOR_TARGET, CXX_FOR_TARGET, GCJ_FOR_TARGET,
	GCC_FOR_TARGET, RAW_CXX_FOR_TARGET, GFORTRAN_FOR_TARGET): Redefine.
	(AS_FOR_TARGET, LD_FOR_TARGET, NM_FOR_TARGET): Look into gcc
	build directory.
	(CONFIGURED_CC_FOR_TARGET, CONFIGURED_CXX_FOR_TARGET,
	CONFIGURED_GCJ_FOR_TARGET, CONFIGURED_GCC_FOR_TARGET,
	CONFIGURED_GFORTRAN_FOR_TARGET, USUAL_CC_FOR_TARGET,
	USUAL_CXX_FOR_TARGET, USUAL_GCJ_FOR_TARGET, USUAL_GCC_FOR_TARGET,
	USUAL_RAW_CXX_FOR_TARGET, USUAL_GFORTRAN_FOR_TARGET): New.
	(CXX_FOR_TARGET_FOR_RECURSIVE_MAKE,
	RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE, RECURSE_FLAGS): Delete.
	* configure: Regenerate.
	* Makefile.in: Regenerate.
@
text
@d2084 9
a2092 9
NCN_STRICT_CHECK_TOOL(AR, ar)
NCN_STRICT_CHECK_TOOL(AS, as)
NCN_STRICT_CHECK_TOOL(DLLTOOL, dlltool)
NCN_STRICT_CHECK_TOOL(LD, ld)
NCN_STRICT_CHECK_TOOL(NM, nm)
NCN_STRICT_CHECK_TOOL(RANLIB, ranlib, :)
NCN_STRICT_CHECK_TOOL(WINDRES, windres)
NCN_STRICT_CHECK_TOOL(OBJCOPY, objcopy)
NCN_STRICT_CHECK_TOOL(OBJDUMP, objdump)
d2101 12
a2112 12
NCN_STRICT_CHECK_TARGET_TOOL(AR_FOR_TARGET, ar)
NCN_STRICT_CHECK_TARGET_TOOL(AS_FOR_TARGET, as)
NCN_STRICT_CHECK_TARGET_TOOL(CC_FOR_TARGET, cc)
NCN_STRICT_CHECK_TARGET_TOOL(CXX_FOR_TARGET, c++)
NCN_STRICT_CHECK_TARGET_TOOL(DLLTOOL_FOR_TARGET, dlltool)
NCN_STRICT_CHECK_TARGET_TOOL(GCC_FOR_TARGET, gcc, ${CC_FOR_TARGET})
NCN_STRICT_CHECK_TARGET_TOOL(GCJ_FOR_TARGET, gcj)
NCN_STRICT_CHECK_TARGET_TOOL(GFORTRAN_FOR_TARGET, gfortran)
NCN_STRICT_CHECK_TARGET_TOOL(LD_FOR_TARGET, ld)
NCN_STRICT_CHECK_TARGET_TOOL(NM_FOR_TARGET, nm)
NCN_STRICT_CHECK_TARGET_TOOL(RANLIB_FOR_TARGET, ranlib, :)
NCN_STRICT_CHECK_TARGET_TOOL(WINDRES_FOR_TARGET, windres)
@


1.278
log
@	* config/mt-gnu (CXXFLAGS): Include SYSROOT_CFLAGS_FOR_TARGET.

	* Makefile.tpl (SYSROOT_CFLAGS_FOR_TARGET): New variable.
	(CFLAGS_FOR_TARGET): Use it.
	(CXXFLAGS_FOR_TARGET): Likewise.
	* Makefile.in: Regenerated.
	* configure.in (--with-build-sysroot): New option.
	* configure: Regenerated.
@
text
@a1002 4
  CC_FOR_TARGET=${CC_FOR_TARGET-${target_alias}-gcc}
  CXX_FOR_TARGET=${CXX_FOR_TARGET-${target_alias}-c++}
  GCJ_FOR_TARGET=${GCJ_FOR_TARGET-${target_alias}-gcj}
  GCC_FOR_TARGET=${GCC_FOR_TARGET-${CC_FOR_TARGET-${target_alias}-gcc}}
a1015 1
  GCC_FOR_TARGET="\$(USUAL_GCC_FOR_TARGET)"
a2045 83
if test "x${CC_FOR_TARGET+set}" = xset; then
  :
elif test -d ${srcdir}/gcc; then
  CC_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/xgcc -B$$r/$(HOST_SUBDIR)/gcc/'
elif test "$host" = "$target"; then
  CC_FOR_TARGET='$(CC)'
else
  CC_FOR_TARGET=`echo gcc | sed "${program_transform_name}"`
fi
CC_FOR_TARGET=$CC_FOR_TARGET' $(FLAGS_FOR_TARGET)'

if test "x${GCJ_FOR_TARGET+set}" = xset; then
  :
elif test -d ${srcdir}/gcc; then
  GCJ_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/gcj -B$$r/$(HOST_SUBDIR)/gcc/'
elif test "$host" = "$target"; then
  GCJ_FOR_TARGET='gcj'
else
  GCJ_FOR_TARGET=`echo gcj | sed "${program_transform_name}"`
fi
GCJ_FOR_TARGET=$GCJ_FOR_TARGET' $(FLAGS_FOR_TARGET)'

if test "x${GFORTRAN_FOR_TARGET+set}" = xset; then
  :
elif test -d ${srcdir}/gcc; then
  GFORTRAN_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/gfortran -B$$r/$(HOST_SUBDIR)/gcc/'
elif test "$host" = "$target"; then
  GFORTRAN_FOR_TARGET='gfortran'
else
  GFORTRAN_FOR_TARGET=`echo gfortran | sed "${program_transform_name}"`
fi
case $GFORTRAN_FOR_TARGET in
*' $(FLAGS_FOR_TARGET)') ;;
*) GFORTRAN_FOR_TARGET=$GFORTRAN_FOR_TARGET' $(FLAGS_FOR_TARGET)' ;;
esac

# Don't use libstdc++-v3's flags to configure/build itself.
libstdcxx_flags='`test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags --build-includes` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
raw_libstdcxx_flags='-L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'

if test "x${CXX_FOR_TARGET+set}" = xset; then
  if test "x${RAW_CXX_FOR_TARGET+set}" != xset; then
    RAW_CXX_FOR_TARGET=${CXX_FOR_TARGET}
  fi
elif test -d ${srcdir}/gcc; then
  # We add -shared-libgcc to CXX_FOR_TARGET whenever we use xgcc instead
  # of g++ for linking C++ or Java, because g++ has -shared-libgcc by
  # default whereas gcc does not.
  # RAW_CXX_FOR_TARGET is for linking C++ or java; CXX_FOR_TARGET is for
  # all other cases.
  CXX_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/g++ -B$$r/$(HOST_SUBDIR)/gcc/ -nostdinc++ '$libstdcxx_flags
  RAW_CXX_FOR_TARGET='$$r/$(HOST_SUBDIR)/gcc/xgcc -shared-libgcc -B$$r/$(HOST_SUBDIR)/gcc/ -nostdinc++ '$raw_libstdcxx_flags
elif test "$host" = "$target"; then
  CXX_FOR_TARGET='$(CXX)'
  RAW_CXX_FOR_TARGET=${CXX_FOR_TARGET}
else
  CXX_FOR_TARGET=`echo c++ | sed "${program_transform_name}"`
  RAW_CXX_FOR_TARGET=${CXX_FOR_TARGET}
fi
CXX_FOR_TARGET=$CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)'
RAW_CXX_FOR_TARGET=$RAW_CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)'

qCXX_FOR_TARGET=`echo "$CXX_FOR_TARGET" | sed 's,[[&%]],\\\&,g'`
qRAW_CXX_FOR_TARGET=`echo "$RAW_CXX_FOR_TARGET" | sed 's,[[&%]],\\\&,g'`

# We want to defer the evaluation of `cmd`s and shell variables in
# CXX_FOR_TARGET when recursing in the top-level Makefile, such as for
# bootstrap.  We'll enclose CXX_FOR_TARGET_FOR_RECURSIVE_MAKE in single
# quotes, but we still have to duplicate `$'s so that shell variables
# can be expanded by the nested make as shell variables, not as make
# macros.
qqCXX_FOR_TARGET=`echo "$qCXX_FOR_TARGET" | sed -e 's,[[$]][[$]],$$$$,g'`
qqRAW_CXX_FOR_TARGET=`echo "$qRAW_CXX_FOR_TARGET" | sed -e 's,[[$]][[$]],$$$$,g'`

# Wrap CC_FOR_TARGET and friends, for certain types of builds.
CC_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${CC_FOR_TARGET}"
GCJ_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${GCJ_FOR_TARGET}"
GFORTRAN_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${GFORTRAN_FOR_TARGET}"
CXX_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${qCXX_FOR_TARGET}"
RAW_CXX_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${qRAW_CXX_FOR_TARGET}"
CXX_FOR_TARGET_FOR_RECURSIVE_MAKE="\$(STAGE_CC_WRAPPER) ${qqCXX_FOR_TARGET}"
RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE="\$(STAGE_CC_WRAPPER) ${qqRAW_CXX_FOR_TARGET}"

d2099 40
a2138 10
# Target tools.
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_AR_FOR_TARGET, ar)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_AS_FOR_TARGET, as)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_DLLTOOL_FOR_TARGET, dlltool)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_LD_FOR_TARGET, ld)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_NM_FOR_TARGET, nm)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_RANLIB_FOR_TARGET, ranlib, :)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_WINDRES_FOR_TARGET, windres)

AC_SUBST(GCC_FOR_TARGET)
a2139 7
AC_SUBST(CC_FOR_TARGET)
AC_SUBST(GCJ_FOR_TARGET)
AC_SUBST(GFORTRAN_FOR_TARGET)
AC_SUBST(CXX_FOR_TARGET)
AC_SUBST(RAW_CXX_FOR_TARGET)
AC_SUBST(CXX_FOR_TARGET_FOR_RECURSIVE_MAKE)
AC_SUBST(RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE)
d2151 3
d2155 3
d2166 3
d2170 3
d2178 2
a2179 7
AC_SUBST(AR_FOR_TARGET)
AC_SUBST(AS_FOR_TARGET)
AC_SUBST(DLLTOOL_FOR_TARGET)
AC_SUBST(LD_FOR_TARGET)
AC_SUBST(NM_FOR_TARGET)
AC_SUBST(RANLIB_FOR_TARGET)
AC_SUBST(WINDRES_FOR_TARGET)
@


1.277
log
@2005-07-16  Kelley Cook  <kcook@@gcc.gnu.org>

	* all files: Update FSF address.
@
text
@d1408 9
@


1.276
log
@ChangeLog:
2005-07-14  Jim Blandy  <jimb@@redhat.com>

	* configure.in: Add cases for Renesas m32c.
	* configure: Regenerated.

bfd/ChangeLog:
2005-07-14  Jim Blandy  <jimb@@redhat.com>

	Add support for m32c-*-elf (Renesas m32c and m16c).
	* Makefile.am (ALL_MACHINES): Add cpu-m32c.lo.
	(ALL_MACHINES_CFILES): Add cpu-m32c.c.
	(BFD32_BACKENDS): Add elf32-m32c.lo.
	(BFD32_BACKENDS_CFILES): Add elf32-m32c.c.
	(cpu-m32c.lo, elf32-m32c.lo): New rules, generated by 'make dep-am'.
	* Makefile.in: Regenerated.
	* archures.c (bfd_arch_m32c, bfd_mach_m16c, bfd_mach_m32c): New
	arch and mach codes.
	(bfd_m32c_arch): New arch info object.
	(bfd_archures_list): List bfd_m32c_arch.
	* bfd-in2.h: Regenerated.
	* config.bfd: Add case for the m32c.
	* configure.in: Add case for the m32c.
	* configure: Regenerated.
	* cpu-m32c.c, elf32-m32c.c: New files.
	* libbfd.h: Regenerated.
	* targets.c (bfd_elf32_m32c_vec): Declare.
	(_bfd_target_vector): List bfd_elf32_m32c_vec.

binutils/ChangeLog:
2005-07-14  Jim Blandy  <jimb@@redhat.com>

	* readelf.c: #include "elf/m32c.h"
	(guess_is_rela, dump_relocations, get_machine_name): Add cases for
	EM_M32C.
	* Makefile.am (readelf.o): Update dependencies.
	* Makefile.in: Regenerated.

cpu/ChangeLog:
2005-07-14  Jim Blandy  <jimb@@redhat.com>

	* m32c.cpu, m32c.opc: Machine description for the Renesas M32C.

gas/ChangeLog:
2005-07-14  Jim Blandy  <jimb@@redhat.com>

	Add support for the Renesas M32C.
	* Makefile.am (CPU_TYPES): List m32c.
	(TARGET_CPU_CFILES): List config/tc-m32c.c.
	(TARGET_CPU_HFILES): List config/tc-m32c.h.
	* configure.in: Add case for m32c.
	* configure.tgt: Add cases for m32c and m32c-*-elf.
	* configure: Regenerated.
	* config/tc-m32c.c, config/tc-m32c.h: New files.
	* doc/Makefile.am (CPU_DOCS): Add c-m32c.texi.
	* doc/Makefile.in: Regenerated.
	* doc/all.texi: Set M32C.
	* doc/as.texinfo: Add text for the M32C-specific options and line
	comment characters, and refer to c-m32c.texi.
	* doc/c-m32c.texi: New file.

include/ChangeLog:
2005-07-14  Jim Blandy  <jimb@@redhat.com>

	* dis-asm.h (print_insn_m32c): New declaration.

include/elf/ChangeLog:
2005-07-14  Jim Blandy  <jimb@@redhat.com>

	Add support for Renesas M32C and M16C.
	* common.h (EM_M32C): New machine number.
	* m32c.h: New file.

ld/ChangeLog:
2005-07-14  Jim Blandy  <jimb@@redhat.com>

	Add support for the Renesas M32C and M16C.
	* Makefile.am (ALL_EMULATIONS): Add eelf32m32c.o.
	(eelf32m32c.c): New target.
	* Makefile.in: Regenerated.
	* configure.tgt: Add case for m32c-*-elf.
	* emulparams/elf32m32c.sh: New file.

opcodes/ChangeLog:
2005-07-14  Jim Blandy  <jimb@@redhat.com>

	Add support for the Renesas M32C and M16C.
	* m32c-asm.c, m32c-desc.c, m32c-dis.c, m32c-ibld.c, m32c-opc.c: New.
	* m32c-desc.h, m32c-opc.h: New.
	* Makefile.am (HFILES): List m32c-desc.h and m32c-opc.h.
	(CFILES): List m32c-asm.c, m32c-desc.c, m32c-dis.c, m32c-ibld.c,
	m32c-opc.c.
	(ALL_MACHINES): List m32c-asm.lo, m32c-desc.lo, m32c-dis.lo,
	m32c-ibld.lo, m32c-opc.lo.
	(CLEANFILES): List stamp-m32c.
	(M32C_DEPS): List stamp-m32c, if CGEN_MAINT.
	(CGEN_CPUS): Add m32c.
	(m32c-asm.c, m32c-desc.c, m32c-dis.c, m32c-ibld.c, m32c-opc.c)
	(m32c-desc.h, m32c-opc.h): Depend on M32C_DEPS.
	(m32c_opc_h): New variable.
	(stamp-m32c, m32c-asm.lo, m32c-desc.lo, m32c-dis.lo, m32c-ibld.lo)
	(m32c-opc.lo): New rules.
	* Makefile.in: Regenerated.
	* configure.in: Add case for bfd_m32c_arch.
	* configure: Regenerated.
	* disassemble.c (ARCH_m32c): New.
	[ARCH_m32c]: #include "m32c-desc.h".
	(disassembler) [ARCH_m32c]: Add case for bfd_arch_m32c.
	(disassemble_init_for_target) [ARCH_m32c]: Same.

	* cgen-ops.h, cgen-types.h: New files.
	* Makefile.am (HFILES): List them.
	* Makefile.in: Regenerated.
@
text
@d16 1
a16 1
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
@


1.275
log
@2005-07-13  Eric Christopher  <echristo@@redhat.com>

	* configure.in: Add toplevel noconfigdir support for tpf.
	* configure: Regenerate.
@
text
@d426 3
@


1.274
log
@merge from gcc:
2005-07-11  Jakub Jelinek  <jakub@@redhat.com>

	* Makefile.def (target_modules): Add libssp.
	* configure.in (target_libraries): Add target-libssp.
	* configure: Rebuilt.
	* Makefile.in: Rebuilt.
@
text
@d416 4
@


1.273
log
@	* configure.in: Add --enable-libssp and --disable-libssp.
	* configure: Regenerate with autoconf-2.13.
@
text
@d150 1
d315 1
a315 1
  noconfigdirs="$noconfigdirs configure-target-libssp target-libssp"
@


1.272
log
@	* configure.in: Don't build sim or rda when targetting darwin.
	* configure: Regenerate.
@
text
@d309 8
@


1.271
log
@	* configure.in <cris-*, crisv32-*>: Enable target-libffi again for
	*-*-linux* and *-*-elf.
	* configure: Regenerate.
@
text
@d355 1
d359 1
@


1.270
log
@	* configure.in (unsupported_languages): New macro.
	<mmix-knuth-mmixware>: Set unsupported_languages.  Name explicit
	non-ported target libraries in noconfigdirs.
	<cris-*, crisv32-*> Ditto, except for non-aout, non-elf,
	non-linux-gnu.  Remove libgcj_ex_libffi.
 	<lang_frag loop>: Set add_this_lang=no if the language is in
	unsupported_languages.
	* configure: Regenerate.
@
text
@d495 1
a495 1
	noconfigdirs="$noconfigdirs target-libffi target-boehm-gc";;
d497 1
a497 1
	noconfigdirs="$noconfigdirs target-libffi target-newlib target-libgloss";;
@


1.269
log
@* configure.in: Fix typo in handling of --with-mpfr-dir.
* configure: Regenerate.
@
text
@d260 4
d488 1
a488 1
    libgcj_ex_libffi=`echo ${libgcj} | sed -e 's/target-libffi//'`
d491 2
a492 1
	noconfigdirs="$noconfigdirs ${libgcj}";;
d494 2
a495 1
	noconfigdirs="$noconfigdirs ${libgcj_ex_libffi}";;
d497 1
a497 1
	noconfigdirs="$noconfigdirs ${libgcj_ex_libffi} target-newlib target-libgloss";;
d499 1
d649 2
a650 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb libgloss target-libgfortran"
d1221 8
a1228 1
        
@


1.268
log
@        * configure.in: Set noconfigdirs for ms1.

        * configure: Regenerate.
@
text
@d1036 1
a1036 1
  gmpinc="-I$with_mpfr_dir/mpfr"
@


1.267
log
@2005-05-19  Paul Brook  <paul@@codesourcery.com>

	* configure.in: Rewrite misleading error message when requested
	language cannot be built.
	* configure: Regenerate.
@
text
@d650 3
@


1.266
log
@        * configure.in: Always pass --target to target configures as
        otherwise rebuilds that do --recheck will fail.
        * confiugure: Rebuilt.
@
text
@d1234 2
a1235 2
The following requested languages were not found: ${missing_languages}
The available languages are: ${potential_languages}])
@


1.265
log
@2005-04-29  Paolo Bonzini  <bonzini@@gnu.org>

	Sync from gcc:

	2005-04-22  Bernd Schmidt  <bernd.schmidt@@analog.com>

        * config.sub: Update from master copy.

	2005-04-19  Hans-Peter Nilsson  <hp@@axis.com>

        * configure.in <crisv32-*-*, cris-*-*>: New local variable
        libgcj_ex_libffi.  Have specific match for *-*-linux*.  Separate
        matches for "*-*-aout" and "*-*-elf".  Don't disable libffi for
        "*-*-elf" and "*-*-linux*".
        * configure: Regenerate.

config:
2005-04-29  Paolo Bonzini  <bonzini@@gnu.org>

	* acx.m4 (ACX_PROG_GNAT): Remove stray break.
@
text
@d1931 4
a1934 2
# Pass the appropriate --host, --build, and --cache-file arguments.
target_configargs="--cache-file=./config.cache --host=${target_alias} --build=${build_alias} ${target_configargs}"
@


1.264
log
@	* config/mh-mingw32: Delete.
	* configure.in: Don't use it.
	* configure: Regenerate.
@
text
@d484 1
d486 1
a486 1
      *-*-elf | *-*-aout)
d488 4
@


1.263
log
@2005-02-28  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.def (bfd, opcodes, libstdc++-v3, libmudflap): Set lib_path.
	* Makefile.tpl (SET_LIB_PATH, REALLY_SET_LIB_PATH): Remove.
	(HOST_EXPORTS, STAGE_HOST_EXPORTS, TARGET_EXPORTS): Set $(RPATH_ENVVAR).
	(HOST_LIB_PATH): Generate from Makefile.def.
	(TARGET_LIB_PATH): Likewise.
	(Old bootstrap targets): Include TARGET_LIB_PATH into RPATH_ENVVAR.
	* Makefile.in: Regenerate.
	* configure.in (set_lib_path, SET_LIB_PATH, SET_GCC_LIB_PATH): Remove.
	(RPATH_ENVVAR): Include Darwin case.
	* configure: Regenerate.

config:
2005-02-28  Paolo Bonzini  <bonzini@@gnu.org>

	* config/gcc-lib-path.m4: Remove.
@
text
@a895 1
    host_makefile_frag="config/mh-mingw32"
@


1.262
log
@2005-03-25  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in (RPATH_ENVVAR): Set to DYLD_LIBRARY_PATH on Darwin.
	* configure: Regenerate.
@
text
@a1627 22
# If no --enable-shared nor --disable-shared is specified, we set up
# LD_LIBRARY_PATH when we build for gcc.
case $enable_shared in
"")
  if test -d ${srcdir}/gcc; then
    set_lib_path=yes
  else 
    set_lib_path=no
  fi
  ;;
*)
  set_lib_path=$enable_shared
  ;;
esac

# If --enable-shared was set, we must set LD_LIBRARY_PATH so that the
# binutils tools will find libbfd.so.
case "${set_lib_path}" in
  no) SET_LIB_PATH= ;;
  *) SET_LIB_PATH="\$(REALLY_SET_LIB_PATH)" ;;
esac

a2096 1
AC_SUBST(SET_LIB_PATH)
a2274 20
# If gcc is built natively with shared library enabled, set
# $RPATH_ENVVAR to make sure the newly built gcc shared librares are
# used.
SET_GCC_LIB_PATH=
if test -d ${srcdir}/gcc && test x${is_cross_compiler} = xno; then
  case "${set_lib_path}" in
    no) ;;
    *)
      eval "d=\$$RPATH_ENVVAR"
      if test x"$d" != x; then
	d="$pwd/gcc:$d"
      else
	d="$pwd/gcc"
    fi
    SET_GCC_LIB_PATH="\$(RPATH_ENVVAR)=$d; export \$(RPATH_ENVVAR);"
    ;;
  esac
fi
AC_SUBST(SET_GCC_LIB_PATH)

@


1.261
log
@top:
	* Makefile.def: Remove libstdcxx_incdir, libsubdir, gxx_include_dir,
	gcc_version, and gcc_version_trigger from set of flags to pass.
	* Makefile.tpl: Remove definitions of above variables.
	(config.status): Remove dependency on $(gcc_version_trigger).
	* Makefile.in: Regenerate.
	* configure.in: Do not reference config/gcc-version.m4 nor
	config/gxx-include-dir.m4.  Do not invoke TL_AC_GCC_VERSION nor
	TL_AC_GXX_INCLUDE_DIR.  Do not set gcc_version_trigger.
	* configure: Regenerate.
config:
	* gxx-include-dir.m4: In all substitutions, leave $(gcc_version)
	to be expanded by the Makefile.
@
text
@d1652 1
@


1.260
log
@2005-02-28  Paolo Bonzini  <bonzini@@gnu.org>

	Sync from gcc.

	2005-02-28  Paolo Bonzini  <bonzini@@gnu.org>

	PR bootstrap/17383
	* Makefile.def (target_modules): Remove "stage", now unnecessary.
	* Makefile.tpl (HOST_SUBDIR): New substitution.
	(STAGE_HOST_EXPORTS, EXPECT, HOST_LIB_PATH, USUAL_AR_FOR_TARGET,
	USUAL_AS_FOR_TARGET, USUAL_DLLTOOL_FOR_TARGET, USUAL_GCC_FOR_TARGET,
	USUAL_LD_FOR_TARGET, USUAL_NM_FOR_TARGET, USUAL_OBJDUMP_FOR_TARGET,
	USUAL_RANLIB_FOR_TARGET, USUAL_WINDRES_FOR_TARGET): Use it.
	(Host modules, Bootstrapped modules): Use it.
	(Build modules, Target modules): Do not create symlink trees,
	always configure out-of-srcdir.
	(distclean): Try removing $(host_subdir) with rm before using rm -rf.
	* configure.in (FLAGS_FOR_TARGET, CC_FOR_TARGET, GCJ_FOR_TARGET,
	GFORTRAN_FOR_TARGET, CXX_FOR_TARGET, RAW_CXX_FOR_TARGET): Use
	$(HOST_SUBDIR).  Create a symlink for host_subdir.

	* Makefile.in: Regenerate.
	* configure: Regenerate.

	Merged from libada-gnattools-branch:
	2004-11-28  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Makefile.def: Add gnattools as a module, depending on target-libada.
	* Makefile.in: Regenerate.
	* configure.in: Include gnattools in host_tools; disable it if ada
	is disabled.
	* configure: Regenerate.

config:
2005-02-28  Paolo Bonzini  <bonzini@@gnu.org>

	PR bootstrap/17383
	* acx.m4 (GCC_TOPLEV_SUBDIRS): Set HOST_SUBDIR if an in-src
	gcc build is going.
@
text
@a21 2
sinclude(config/gcc-version.m4)
sinclude(config/gxx-include-dir.m4)
a101 16
# Define the trigger file to make sure configure will re-run whenever
# the gcc version number changes.
TL_AC_GCC_VERSION([$topsrcdir])
if test -f $gcc_version_trigger ; then
  case "$ac_configure_args" in
    *--with-gcc-version-trigger=$gcc_version_trigger* )
      ;;
    * )
      # Add to all subconfigure arguments: build, host, and target.
      ac_configure_args="$ac_configure_args --with-gcc-version-trigger=$gcc_version_trigger"
      ;;
  esac
else
  gcc_version_trigger=
fi

a1950 3
# provide a proper gxx_include_dir.
TL_AC_GXX_INCLUDE_DIR

@


1.259
log
@Allow darwin targeted ports to build tk, itcl and libgui.
@
text
@d151 1
a151 1
host_tools="texinfo byacc flex bison binutils gas ld fixincludes gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils gettext zip fastjar"
d320 1
d1992 1
a1992 1
       FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -isystem $$r/gcc/include'
d2039 1
a2039 1
  FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/ld'
d2045 1
a2045 1
  CC_FOR_TARGET='$$r/gcc/xgcc -B$$r/gcc/'
d2056 1
a2056 1
  GCJ_FOR_TARGET='$$r/gcc/gcj -B$$r/gcc/'
d2067 1
a2067 1
  GFORTRAN_FOR_TARGET='$$r/gcc/gfortran -B$$r/gcc/'
d2092 2
a2093 2
  CXX_FOR_TARGET='$$r/gcc/g++ -B$$r/gcc/ -nostdinc++ '$libstdcxx_flags
  RAW_CXX_FOR_TARGET='$$r/gcc/xgcc -shared-libgcc -B$$r/gcc/ -nostdinc++ '$raw_libstdcxx_flags
d2292 1
a2292 1
  gcc_cv_prog_ln_s_dir=yes
@


1.258
log
@	PR libgcj/10353
	* configure.in (noconfigdirs) <sparc-*-solaris2.[0-6]>: Add libgcj.
	* configure: Regenerate.
@
text
@a310 3
  *-*-darwin*)
    noconfigdirs="$noconfigdirs tk itcl libgui"
    ;;
@


1.257
log
@	* configure.in (noconfigdirs) <crisv32-*-*>: Match like cris-*-*.
	<crisv32-*-*, cris-*-*>: Only disable target-newlib and
	target-libgloss when not *-*-elf and *-*-aout.
	* configure: Regenerate.
@
text
@d756 3
@


1.256
log
@2004-12-16  Andrew Stubbs  <andrew.stubbs@@st.com>

	* configure.in (sh64-*-*): Reenable gprof.
	* configure: Regenerate.
@
text
@d503 7
a509 2
  cris-*-*)
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
@


1.255
log
@Introduce config/gxx-include-dir.m4.
@
text
@d725 1
a725 1
  sh-*-*)
a733 3
  sh64-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
@


1.254
log
@Remove config.if.
@
text
@d23 1
d1967 1
a1967 16
# Note, if you change the default, make sure to fix both here and in
# the gcc and libstdc++-v3 subdirectories.
# Check whether --with-gxx-include-dir or --without-gxx-include-dir was given.
case "${with_gxx_include_dir}" in
  yes)
    AC_MSG_ERROR([--with-gxx-include-dir=[[dir]] requires a directory])
    ;;
  no | "")
    case "${enable_version_specific_runtime_libs}" in
      yes) gxx_include_dir='${libsubdir}/include/c++' ;;
      *)
	libstdcxx_incdir=c++/${gcc_version}
        gxx_include_dir='${prefix}/include/'${libstdcxx_incdir} ;;
    esac ;;
  *) gxx_include_dir=${with_gxx_include_dir} ;;
esac
a2142 2
AC_SUBST(gxx_include_dir)
AC_SUBST(libstdcxx_incdir)
@


1.253
log
@	* configure.in: Clear gcc_version_trigger if the file doesn't exist.
	* configure: Regenerate.
@
text
@d1977 1
a1977 1
        . ${srcdir}/config.if
@


1.252
log
@Introduce and use config/gcc-version.m4.
@
text
@d115 2
@


1.251
log
@	* configure.in (hppa*-*-linux*): Don't add libgcj to noconfigdirs.
	(hppa*64*-*-*): Delete incorrect comment.
	* configure: Rebuilt.
@
text
@d22 1
d102 1
d105 10
a114 17
if test "${with_gcc_version_trigger+set}" = set ; then
  gcc_version_trigger="$with_gcc_version_trigger"
  gcc_version=`grep version_string ${with_gcc_version_trigger} | sed -e 's/.*\"\([[^ \"]]*\)[[ \"]].*/\1/'`
else
  # If gcc's sources are available, define the trigger file.
  if test -f ${topsrcdir}/gcc/version.c ; then
    gcc_version_trigger=${topsrcdir}/gcc/version.c
    gcc_version=`grep version_string ${gcc_version_trigger} | sed -e 's/.*\"\([[^ \"]]*\)[[ \"]].*/\1/'`
    case "$ac_configure_args" in
      *--with-gcc-version-trigger=$gcc_version_trigger* )
        ;;
      * )
        # Add to all subconfigure arguments: build, host, and target.
        ac_configure_args="$ac_configure_args --with-gcc-version-trigger=$gcc_version_trigger"
        ;;
    esac
  fi
a2151 2
AC_SUBST(gcc_version_trigger)
AC_SUBST(gcc_version)
@


1.250
log
@	PR 18423
	* configure.in: Remove all instances of build-fixincludes from
	noconfigdirs.
	(build_configargs): Supply --target to subdirectories.
	* configure: Regenerate.

	* Makefile.def: Make gcc install depend on fixincludes install.
	* Makefile.in: Regenerate.
@
text
@d537 2
a539 1
  parisc*-*-linux* | hppa*-*-linux* | \
a543 1
    # Do configure ld/binutils/gas for this case.
@


1.249
log
@	* configure.in (noconfigdirs) [mmix-*-*]: Disable
	target-libgfortran.
	* configure: Regenerate.
@
text
@d436 1
a436 1
    noconfigdirs="$noconfigdirs gdb ld target-newlib target-libgloss build-fixincludes ${libgcj}"
a470 1
    noconfigdirs="$noconfigdirs build-fixincludes"
d497 1
a497 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 build-fixincludes ${libgcj}"
a529 1
    noconfigdirs="$noconfigdirs build-fixincludes"
a561 1
    noconfigdirs="$noconfigdirs build-fixincludes"
d587 1
a587 1
    noconfigdirs="$noconfigdirs expect target-libgloss ${libgcj} build-fixincludes"
d598 1
a598 1
    noconfigdirs="$noconfigdirs target-gperf target-libgloss build-fixincludes ${libgcj}"
a614 1
    noconfigdirs="$noconfigdirs build-fixincludes"
d617 1
a617 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj} build-fixincludes"
d680 1
a680 1
    noconfigdirs="$noconfigdirs ${libgcj} build-fixincludes"
a682 1
    noconfigdirs="$noconfigdirs build-fixincludes"
d1918 1
a1918 1
build_configargs="--cache-file=../config.cache --build=${build_alias} --host=${build_alias} ${baseargs}"
@


1.248
log
@Merge from GCC versions
@
text
@d658 1
a658 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb libgloss"
@


1.247
log
@2004-11-04  H.J. Lu  <hongjiu.lu@@intel.com>

	PR other/17783
	* configure.in: Set up LD_LIBRARY_PATH by default for gcc.
	* configure: Regenerated.
@
text
@d153 1
a153 1
host_tools="texinfo byacc flex bison binutils gas ld gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils gettext zip fastjar"
@


1.246
log
@./
	* configure.in (arm-*-oabi*, thumb-*-oabi*): Remove.
	* configure: Regenerated.
bfd/
	* Makefile.am (BFD32_BACKENDS, BFD32_BACKENDS_CFILES): Replace
	elfarm-nabi with elf32-arm.  Remove elfarm-oabi.
	(elf32-arm.lo): Replace elfarm-nabi.lo rule.  Remove elf32-arm.h
	dependency.
	* config.bfd: Move arm-*-oabi* and thumb-*-oabi* from obsolete list
	to a new removed list.  Remove normal configuration stanzas.
	* configure.in: (bfd_elf32_bigarm_vec, bfd_elf32_bigarm_symbian_vec)
	(bfd_elf32_littlearm_symbian_vec, bfd_elf32_littlearm_vec): Replace
	elfarm-nabi.lo with elf32-arm.lo.
	(bfd_elf32_bigarm_oabi_vec, bfd_elf32_littlearm_oabi_vec): Remove.
	* elf32-arm.c: Renamed from elfarm-nabi.c.  Inline elf32-arm.h.
	* elf32-arm.h: Remove.
	* elfarm-oabi.c: Remove.
	* targets.c (_bfd_target_vector): Remove bfd_elf32_bigarm_oabi_vec
	and bfd_elf32_littlearm_oabi_vec.
	* aclocal.m4, Makefile.in, configure, doc/Makefile.in: Regenerated.
gas/
	* configure.in: Remove arm-*-oabi and thumb-*-oabi.
	* config/tc-arm.c (target_oabi): Delete.
	(md_apply_fix3, elf32_arm_target_format): Remove target_oabi checks.
	(arm_opts): Remove moabi.
	* doc/as.texinfo (Overview): Remove documentation of -moabi.
	* doc/c-arm.texi (ARM Options): Likewise.
	* configure: Regenerated.
ld/
	* Makefile.am (ALL_EMULATIONS): Remove earmelf_oabi.o.
	(earmelf_oabi.c): Remove rule.
	* configure.tgt: Remove arm-*-oabi and thumb-*-oabi.
	* emulparams/armelf_oabi.sh, emultempl/armelf_oabi.em: Delete files.
	* Makefile.in: Regenerated.
@
text
@d1650 15
d1667 2
a1668 2
case "${enable_shared}" in
  no | "") SET_LIB_PATH= ;;
d2346 2
a2347 2
  case "${enable_shared}" in
    no | "") ;;
@


1.245
log
@       PR target/18151
       * configure.in (case ${target}): Do not build fixincludes for avr.
       * configure: Regenerated.
@
text
@a484 3
  arm-*-oabi*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
a490 3
  thumb-*-oabi)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
@


1.244
log
@	* configure.in (case ${target}): Do not build fixincludes
	on platforms where it is not used.
	* configure: Regenerated.
----------------------------------------------------------------------
@
text
@d504 1
a504 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
@


1.243
log
@	* configure.in: Use an absolute path to install-sh.
	* configure: Regenerated.
@
text
@d436 1
a436 1
    noconfigdirs="$noconfigdirs gdb ld target-newlib target-libgloss ${libgcj}"
d470 3
d536 3
d569 3
d596 1
a596 1
    noconfigdirs="$noconfigdirs expect target-libgloss ${libgcj}"
d607 1
a607 1
    noconfigdirs="$noconfigdirs target-gperf target-libgloss ${libgcj}"
d622 4
d627 1
a627 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d690 4
a693 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d1269 2
a1270 2
# Remove the entries in $skipdirs and $noconfigdirs from $configdirs and
# $target_configdirs.
d1275 1
a1275 1
  dirname=`echo $dir | sed -e s/target-//g`
d1286 10
@


1.242
log
@merge from gcc
	2004-10-12  Kelley Cook  <kcook@@gcc.gnu.org>
	* configure.in (*-*-cygwin*): Supress warning if newlib not present.
	* configure: Regenerate.
@
text
@d83 8
a93 1
srcpwd=`cd ${srcdir} ; ${PWDCMD-pwd}`
@


1.241
log
@Enable target-libgloss for crx-*-*.
@
text
@d593 1
a593 2
    if test -d "$srcdir/winsup"
    then
d595 1
a595 1
    else
@


1.240
log
@	* configure.in (--without-headers): Add missing double quotes.
	* configure: Regenerate.
@
text
@d506 1
a506 1
    noconfigdirs="$noconfigdirs target-libgloss target-libstdc++-v3 target-mudflap ${libgcj}"
@


1.239
log
@2004-09-23  H.J. Lu  <hongjiu.lu@@intel.com>

	* Makefile.tpl (REALLY_SET_LIB_PATH): Add @@SET_GCC_LIB_PATH@@.
	(HOST_EXPORTS]): Add @@SET_GCC_LIB_PATH@@. Set and export
	SET_GCC_LIB_PATH_CMD.
	(BASE_TARGET_EXPORTS): Likewise.
	* Makefile.in: Regenerated.

	* configure.in (SET_GCC_LIB_PATH): Set and substitute.
	* configure: Regenerated.

config/

2004-09-23  H.J. Lu  <hongjiu.lu@@intel.com>

	* gcc-lib-path.m4: New file.
@
text
@d253 2
a254 2
if test x"${with_headers}" != x && test x"${with_headers} != xno \
   && test x"${with_libs}" != x && test x"${with_libs} != xno ; then
@


1.238
log
@Merge from gcc:
	2004-09-23  Kelley Cook  <kcook@@gcc.gnu.org>
	* config.guess: New upstream version
	* compile, depcomp, install-sh, ylwrap: Likewise.

	2004-09-19  Roger Sayle  <roger@@eyesopen.com>
	* config/mh-x86omitfp: New host makefile fragment.  Add
	-fomit-frame-pointer to the default BOOT_CFLAGS.
	* configure.in: Use it to speed up bootstrap on some IA-32 hosts.
	* configure: Regenerate.

	2004-09-15  Andrew Pinski  <pinskia@@physics.uc.edu>
	PR target/11572
	* configure.in (*-*-darwin*): Renable libobjc.
	* configure: Regenerate.
@
text
@d2300 20
@


1.237
log
@2004-09-09  Daniel Berlin  <dberlin@@dberlin.org>

	* Makefile.def: Remove libbanshee.
	* Makefile.tpl: Ditto.
	* configure.in: Ditto.
	* Makefile.in: Regen.
	* configure: Ditto.
@
text
@a365 1
    noconfigdirs="$noconfigdirs target-libobjc"
d369 1
a369 1
    noconfigdirs="$noconfigdirs target-libobjc ${libgcj}"
d940 5
@


1.236
log
@        * configure.in: Remove target-libstdc++-v3 from noconfigdirs for
        *-*-netware, but add target-libmudflap.
        Consolidate *-*-netware targets (of which really only i?86 exists)
        into a single entry.
        * configure: Likewise.
@
text
@d139 1
a139 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl libgui zlib libbanshee libcpp"
a310 11
AC_ARG_WITH(libbanshee,
[  --without-libbanshee   Don't build with libbanshee])
case ${with_libbanshee} in
  no)
    noconfigdirs="$noconfigdirs libbanshee" ;;
  yes|"")
    with_libbanshee=yes
    ;;
  *)
    AC_MSG_ERROR([--with-libbanshee can only be empty, "yes" or "no" (empty defaults to "yes".])
esac
a1517 4
if test x${with_libbanshee} = xyes && echo " ${configdirs} " | grep " libbanshee " >/dev/null 2>&1; then
  extra_host_args="$extra_host_args --with-libbanshee"
fi

@


1.235
log
@2004-09-01  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.tpl (sorry): Remove.
	(clean-stage[+id+], clean-stage[+id+]-module): New targets.
	(cleanstrap targets): Depend on distclean, not distclean-stage1.
	(do-clean): Clean per-stage directories too.
	(do-distclean): Run distclean-stage1 too.
	(.NOTPARALLEL): Enable during toplevel bootstrap.
	(stage[+id+]-bubble): Enable parallel execution during
	the recursive invocation.
	* Makefile.in: Regenerate.

	Sync from gcc (moving the Makefile.in change to Makefile.tpl):

	2004-08-31  Robert Bowdidge <bowdidge@@apple.com>

	* Makefile.in: Move BOOT_CFLAGS above host makefile fragment include.
	* configure.in: add test for powerpc-*-darwin* to specify makefile frag
	* configure: regenerate
	* config/mh-ppc-darwin: create file, override BOOT_CFLAGS for
        -mdynamic-no-pic
@
text
@d422 2
a423 2
  *-*-netware)
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-newlib target-libiberty target-libgloss ${libgcj}"
d1444 1
a1444 4
  i[[3456789]]86-*-netware*)
    target_makefile_frag="config/mt-netware"
    ;;
  powerpc-*-netware*)
@


1.234
log
@2004-08-31  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.def (build_modules): Add fixincludes.
	(dependencies): Make gcc depend on fixincludes.
	* configure.in (build_tools): Add fixincludes.
	(build_configdirs): Always include build_libs.
	* Makefile.in: Regenerate.
	* configure: Regenerate.
@
text
@d942 3
@


1.233
log
@2004-08-26  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.def (bootstrap stages): Add 'lean' parameter.
	* Makefile.tpl (configure-stageN-*, all-stageN-*): Turned into
	phony targets; do not generate timestamp files.
	(distclean-stageN): Remove references to their timestamp files.
	(restageN, touch-stageN): Remove.
	(stageN-bubble): Rewritten.
	(compare): Support lean bootstraps.
	* Makefile.in: Regenerate.

	* configure.in: Only warn when bootstrapping but
	build != host or build != target.  Support lean bootstraps.
	* configure: Regenerate.

	Sync from gcc:
	2004-08-26  Phil Edwards  <phil@@codesourcery.com>

	* configure.in:  Give a better error message if GMP/MPFR are missing
	and a language needing them has been requested.
	* configure:  Regenerated.

	2004-08-25  Phil Edwards  <phil@@codesourcery.com>

	* configure.in:  Print a list of available language front-ends if
	a requested one is missing.  Tidy stray tab characters.
	* configure:  Regenerated.
@
text
@d135 1
a135 1
build_tools="build-texinfo build-byacc build-flex build-bison build-m4"
d186 1
a186 7

# Only make build libraries if build != host.
if test ${host_alias} != ${build_alias} ; then
  build_configdirs=`echo ${build_libs} ${build_tools}`
else
  build_configdirs=`echo ${build_tools}`
fi
@


1.232
log
@2004-08-17  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.in: Regenerate.
	* configure: Regenerate.

	* Makefile.def (bootstrap-stage): Rename extra_*_flags to
	stage_*_flags.
	* Makefile.tpl (configure-[+module+], all-[+module+]): Exit
	for bootstrapped modules if toplevel bootstrap is going.
	(GCC bootstrap): Generate per-stage targets for all bootstrapped
	modules.  Adjust for changes in Makefile.def.  Enable several
	rules even in non-bootstrap mode, just to avoid peppering the
	template with unnecessary "@@if/@@endif gcc-bootstrap" pairs.
	(stage-[+prev+]-bubble): Remove.

	* Makefile.def (Dependencies): Depend on all-build-bison,
	all-build-flex, all-build-byacc, all-build-texinfo, rather
	than the host variations.
	* Makefile.tpl (BUILD_DIR_PREFIX): Remove.  Replace throughout
	with BUILD_SUBDIR.
	(BISON): Update for recent Bisons.
	(YACC): Fix typo.
	(cross): Depend on all-build.
	(all): Do not depend on all-build.
	(prebootstrap): Remove.
	(dep-kind): Accept separate prefixes for MODULE and ON variables.
	(Prebootstrap dependencies): Add them to the per-stage targets
	and to all-prebootstrap.
	* configure.in (build_configdirs): Always enable build_tools.
	(BUILD_DIR_PREFIX): Remove.

	* Makefile.def (gcc): Add target variable.
	(gdb, expect, guile, tk, tix): Replace with_x with extra_make_flags.
	* Makefile.tpl (Autogenerated `all-*' targets): Invoke $(TARGET-*)
	in the recursive `make', instead of hardwiring `all'.
	(Autogenerated TARGET-* variables): New.
@
text
@d1164 1
d1180 1
a1180 1
	need_gmp=
d1182 1
d1188 1
a1188 1
	    ;;
d1199 1
a1199 1
	    # so do not include it.
d1201 1
a1201 1
	    ;;
d1211 11
a1221 4
	# Disable language that need GMP if it isn't available.
	if test  x"$need_gmp" = xyes && test x"$have_gmp" = xno; then
	  add_this_lang=no
	fi
d1246 2
a1247 1
The following requested languages were not found: ${missing_languages}])
d1698 40
a1737 13
[  --enable-bootstrap     Enable bootstrapping [no]],,
enable_bootstrap=no)
if test -d ${srcdir}/gcc; then
  case "$host:$target:$enable_bootstrap" in
    $build:$build:yes | *:no) ;;
    *:yes) AC_MSG_ERROR([cannot bootstrap a cross-compiler]) ;;
    *) AC_MSG_ERROR([invalid option for --enable-bootstrap]) ;;
  esac
else
  if test $enable_bootstrap = yes; then
    AC_MSG_ERROR([cannot bootstrap without a compiler])
  fi
fi
d1739 1
d1742 5
d1753 1
d2277 1
a2277 1
# gcc for stageN-gcc and stage-prev for stage(N-1).  In case this is not
@


1.231
log
@Patch from Robert Millan for knetbsd-gnu/kfreebsd-gnu.
* configure.in: In noconfigdirs check, match GNU/k*BSD with GNU/Linux
(instead of FreeBSD).
* configure: Regenerate.
@
text
@d187 1
a187 1
# Only make build modules if build != host.
d190 2
a989 1
  BUILD_DIR_PREFIX=${build_subdir}
a1003 1
  BUILD_DIR_PREFIX=
a2091 1
AC_SUBST(BUILD_DIR_PREFIX)
@


1.230
log
@	* Makefile.def, configure.in, src-release: Remove useless, bogus
	references to tix.
	* Makefile.in, configure: Regenerate.
@
text
@d390 1
a390 1
  *-*-freebsd* | *-*-kfreebsd*-gnu)
d787 1
a787 1
  *-*-linux*)
@


1.229
log
@merge from gcc:
2004-08-09  Mark Mitchell  <mark@@codesourcery.com>

	* configure.in (arm*-*-eabi*): New target.
	* configure: Regenerate.

2004-08-03  Paul Brook  <paul@@codesourcery.com>

	* configure.in: Check for MPFR as well as GMP.
	* configure: Regenerate.
@
text
@d139 1
a139 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl tix libgui zlib libbanshee libcpp"
d235 1
a235 1
    skipdirs="${skipdirs} tk tix itcl libgui"
d286 1
a286 1
    noconfigdirs="$noconfigdirs tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl itcl tix gnuserv gettext"
d289 1
a289 1
    noconfigdirs="$noconfigdirs tcl tk expect dejagnu send-pr uudecode guile itcl tix gnuserv libffi"
d292 1
a292 1
    # noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl itcl tix gnuserv"
d296 1
a296 1
    noconfigdirs="$noconfigdirs tk itcl tix libgui gdb"
d305 1
a305 1
    noconfigdirs="$noconfigdirs patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl tix gnuserv"
d308 1
a308 1
    noconfigdirs="$noconfigdirs tk itcl tix libgui gdb dejagnu readline"
d311 1
a311 1
    noconfigdirs="$noconfigdirs tk itcl tix libgui"
d465 1
a465 1
    noconfigdirs="$noconfigdirs tcl tix tk itcl libgui sim"
d566 1
a566 1
    noconfigdirs="$noconfigdirs tix readline mmalloc libgui itcl gdb"
d570 1
a570 1
    noconfigdirs="$noconfigdirs ${libgcj} tix readline mmalloc libgui itcl gdb ld"
d601 1
a601 1
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix gnuserv"
d619 1
a619 1
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix libgui gnuserv"
d675 1
a675 1
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl tix gnuserv ${libgcj}"
d681 1
a681 1
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl tix gnuserv ${libgcj}"
d1656 1
a1656 1
gdb_tk="maybe-all-tcl maybe-all-tk maybe-all-itcl maybe-all-tix maybe-all-libgui"
@


1.228
log
@	* configure.in (arm*-*-symbianelf*): Add ${libgcj} and
	target-libiberty to noconfigdirs.
@
text
@d482 1
a482 1
  arm-*-elf* | strongarm-*-elf* | xscale-*-elf*)
d1036 1
a1036 1
# Check for GMP
d1040 18
d1061 2
a1062 2
if test "x$with_gmp_dir" != x && test -f "$with_gmp_dir/gmp.h"; then
  gmpinc="-I$with_gmp_dir"
d1064 1
a1064 1
    gmplibs="$with_gmp_dir/.libs/libgmp.a"
d1066 1
a1066 1
    gmplibs="$with_gmp_dir/_libs/libgmp.a"
d1069 2
d1075 3
a1077 8
if test "x$with_gmp" != x && test -d "$with_gmp"; then
  gmplibs="-L$with_gmp/lib -lgmp"
  gmpinc="-I$with_gmp/include"
fi

# Use system gmp if nothing else specified
if test "x$gmplibs" = x; then
  gmplibs="-lgmp"
d1092 1
a1092 1
  AC_MSG_CHECKING([for mpf_init in -lgmp])
d1096 2
a1097 1
  AC_TRY_LINK([#include <gmp.h>], [mpf_t n; mpf_init(n);],
d1103 1
@


1.227
log
@ChangeLog:

2004-08-01  Robert Millan  <robertmh@@gnu.org>

	* configure.in: Turn mt-linux into mt-gnu. Use mt-gnu and enable
	libmudflap for all GNU-based systems (with Glibc).
	* configure: Regenerate.

config/ChangeLog:

2004-08-01  Robert Millan  <robertmh@@gnu.org>

	* mt-linux: Rename to ...
	* mt-gnu: ... this.
@
text
@d485 3
@


1.226
log
@2004-07-12  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Add noconfigdirs for crx-*-*.
	* configure: Regenerate.

2004-07-09  Loren J. Rittle <ljrittle@@acm.org>

	* configure.in: Build libmudflap by default on FreeBSD.
	* configure: Regenerated.

2004-07-09  Mark Mitchell  <mark@@codesourcery.com>

	* configure.in: Do not build libmudflap by default on non-GNU/Linux
	systems.
	* configure: Regenerated.

2004-07-08 John David Anglin  <dave.anglin@@nrc-cnrc.gc.ca>

	PR target/16344
	* Makefile.tpl (profiledbootstrap): Build runtime libraries with
	feedback based compiler.
	* Makefile.in: Rebuilt.

2004-07-05  Phil Edwards  <phil@@codesourcery.com>

	* configure.in:  Do not prepend $srcdir to /dev/null in
	makefile fragments.
	* configure:  Regenerate.
@
text
@d361 2
a362 2
    *-*-linux*)
        # Enable libmudflap by default in GNU/Linux.
d1423 2
a1424 2
  *-*-linux*)
    target_makefile_frag="config/mt-linux"
@


1.225
log
@Undo accidental commit whilst adding crx-elf port
@
text
@d354 1
a354 2
yes | "")
    # By default it's enabled
d359 13
d518 3
d2057 7
a2063 4
host_makefile_frag=${srcdir}/${host_makefile_frag}
target_makefile_frag=${srcdir}/${target_makefile_frag}
alphaieee_frag=${srcdir}/${alphaieee_frag}
ospace_frag=${srcdir}/${ospace_frag}
@


1.224
log
@Add new port: crx-elf
@
text
@a505 3
  crx-*-*)
    noconfigdirs="$noconfigdirs target-libgloss target-libstdc++-v3 target-libmudflap ${libgcj}"
    ;;
@


1.223
log
@2004-07-01  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.def (build_modules): Add bison, byacc, flex,
	m4, texinfo.
	(flags_to_pass): Add FLEX.
	* Makefile.tpl (BUILD_DIR_PREFIX, BASE_EXPORTS): New.
	(BUILD_EXPORTS, HOST_EXPORTS, BASE_TARGET_EXPORTS): Include it.
	(DEFAULT_YACC, USUAL_YACC, DEFAULT_LEX, USUAL_LEX, DEFAULT_M4,
	DEFAULT_MAKEINFO): Remove.
	(CONFIGURED_YACC, CONFIGURED_FLEX, CONFIGURED_BISON,
	CONFIGURED_LEX, CONFIGURED_M4, CONFIGURED_MAKEINFO): Substitute.
	(YACC, FLEX, BISON, LEX, M4, MAKEINFO): Define to look into
	objdir or else use configured tool.
	(all-build): New.
	(all): Depend on it.
	(Build module dependencies): Add.
	* Makefile.in: Regenerate.
	* configure.in: Better support for multiple build modules,
	matching what is done for host/target modules.  Do not look
	for "plausible" locations of build tools if Canadian cross.
	Use autoconf's AC_PROG_CC to find a C compiler.  Define
	BUILD_DIR_PREFIX.  Look for flex, makeinfo and m4.
	* configure: Regenerate.
@
text
@d506 3
@


1.222
log
@* configure.in: Check for srcdir/winsup rather than build directory winsup.
* configure: Regenerate.
@
text
@d129 8
a183 1
#
a187 1
# This should be done more generally, but at the moment it doesn't matter.
d189 1
a189 4
  # This is the only build module.
  build_modules=libiberty
else
  build_modules=
a191 1

a960 1
  BISON=${BISON-bison}
d970 1
a972 41
  MAKEINFO=${MAKEINFO-makeinfo}

  if test -z "${YACC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/bison; then
	YACC="bison -y"
	break
      fi
      if test -f $dir/byacc; then
	YACC=byacc
	break
      fi
      if test -f $dir/yacc; then
	YACC=yacc
	break
      fi
    done
    IFS="$save_ifs"
    if test -z "${YACC}" ; then
      YACC="bison -y"
    fi
  fi

  if test -z "${LEX}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/flex; then
	LEX=flex
	break
      fi
      if test -f $dir/lex; then
	LEX=lex
	break
      fi
    done
    IFS="$save_ifs"
    LEX=${LEX-flex}
  fi
a982 1
  BISON="\$(USUAL_BISON)"
d985 1
d988 2
a989 54
  MAKEINFO="\$(USUAL_MAKEINFO)"
  LEX="\$(USUAL_LEX)"
  YACC="\$(USUAL_YACC)"

  # If CC is still not set, try to get gcc.
  cc_prog_is_gcc=
  if test -z "${CC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/gcc; then
	CC="gcc"
	cc_prog_is_gcc=yes
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
	break
      fi
    done
    IFS="$save_ifs"
    CC=${CC-cc}
  else
    # Determine if we are using gcc.
    cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
    if ${CC} -E conftest.c | grep yes >/dev/null 2>&1; then
      cc_prog_is_gcc=yes
    fi
    rm -f conftest.c
    if test -z "${CFLAGS}"; then
      # Here CC is set but CFLAGS is not.  Use a quick hack to use -O2 if CC
      # is set to a version of gcc.
      if test "$cc_prog_is_gcc" = yes; then
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
      fi
    fi
  fi
d995 1
a995 1
    if test "$cc_prog_is_gcc" = yes; then
d1261 9
d1277 1
d1304 1
a1304 1
	if echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
d1519 3
a1521 2
# Generate default definitions for YACC, M4, LEX.  These are used if the
# Makefile can't locate these programs in objdir.
d1523 6
a1528 3
AC_CHECK_PROGS([DEFAULT_YACC], ['bison -y' byacc yacc], [$MISSING bison])
AC_CHECK_PROGS([DEFAULT_M4], [gm4 gnum4 m4], [$MISSING m4])
AC_CHECK_PROGS([DEFAULT_LEX], [flex lex], [$MISSING flex])
d1611 1
a1611 11

# This is the final value for target_configdirs.  configdirs already
# has its final value, as does build_modules.  It's time to create some 
# lists of valid targets.

all_build_modules=
configure_build_modules=
for module in ${build_modules} ; do
  all_build_modules=all-build-${module}
  configure_build_modules=configure-build-${module}
done
d1677 1
a1677 1
for module in ${build_modules} ; do
d2054 1
d2067 1
a2067 2
AC_SUBST(configure_build_modules)
AC_SUBST(all_build_modules)
a2077 1
AC_SUBST(BISON)
a2078 3
AC_SUBST(LEX)
AC_SUBST(MAKEINFO)
AC_SUBST(YACC)
a2095 3
AC_SUBST(DEFAULT_YACC)
AC_SUBST(DEFAULT_LEX)
AC_SUBST(DEFAULT_M4)
@


1.221
log
@	* configure.in: Don't build Cygwin native newlib if winsup
	directory is missing.  Emit warning instead.
	* configure: Regenerate.
@
text
@d589 1
a589 1
    if test -d winsup
@


1.220
log
@2004-06-09  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.tpl (touch-stage[+id+]): New.
	(restage[+prev+]): Depend on touch-stage[+id+].

	* Makefile.tpl (RECURSE_FLAGS_TO_PASS): New.
	Use it throughout.

	* Makefile.def: Add profile and feedback bootstrap stages.
	Remove next field from bootstrap stages.
	* Makefile.tpl (LN, LN_S): Substitute.
	(stageN-start, stageN-end): Use double-colon rules, to
	provide a hook for additional setup commands.
	(distclean-stageN-gcc, restageN): Create dependencies from
	[+prev+], not from [+next+].
	(stageN-bubble): Add commands for successive stages from
	[+prev+], using double-colon rules.
	(all-stageN-gcc): Fix typo.
	(stagefeedback-start, profiledbootstrap): New.
	* Makefile.in: Regenerate.
	* configure.in: Call ACX_PROG_LN.
	* configure: Regenerate.

config/ChangeLog:
2004-06-09  Paolo Bonzini  <bonzini@@gnu.org>

	* acx.m4 (ACX_PROG_LN): From gcc, modified to
	accept a parameter.
@
text
@d588 7
a594 2
    # always build newlib.
    skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'`
@


1.219
log
@* configure.in: Fix --enable-bootstrap breakage introduced in trees without
gcc.
* configure: Regenerate.
@
text
@d21 2
d30 1
a32 2
sinclude(config/acx.m4)

@


1.218
log
@2004-06-01  Paolo Bonzini <bonzini@@gnu.org>

	* configure.in: Remove new- prefix from toplevel
	bootstrap targets.
	* configure: Regenerate.
@
text
@d1733 25
d1766 3
a1768 1
/^@@endif build-$module\$/d"
d1778 3
a1780 1
/^@@endif $module\$/d"
d1790 3
a1792 1
/^@@endif target-$module\$/d"
a1794 29
AC_ARG_ENABLE([bootstrap],
[  --enable-bootstrap     Enable bootstrapping [no]],,
enable_bootstrap=no)
if test -d ${srcdir}/gcc; then
  case "$host:$target:$enable_bootstrap" in
    $build:$build:yes | *:no) ;;
    *:yes) AC_MSG_ERROR([cannot bootstrap a cross-compiler]) ;;
    *) AC_MSG_ERROR([invalid option for --enable-bootstrap]) ;;
  esac
else
  if test $enable_bootstrap = yes; then
    AC_MSG_ERROR([cannot bootstrap without a compiler])
  fi
fi

case "$enable_bootstrap" in
  yes)
    default_target=bootstrap
    extrasub="$extrasub
/^@@if gcc-bootstrap\$/d
/^@@endif gcc-bootstrap\$/d" ;;
  no)
    default_target=all
    extrasub="$extrasub
/^@@if gcc-no-bootstrap\$/d
/^@@endif gcc-no-bootstrap\$/d" ;;
esac
AC_SUBST(default_target)

@


1.217
log
@2004-06-01  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.tpl (all.normal): Rename to all.
	(all): Replace with a rule to pick the default
	target from configure.
	(all-gcc, configure-gcc): Use conditionals to
	do nothing when toplevel bootstrap is going on.
	(GCC directory bootstrap) [gcc-bootstrap]: Disable.
	(Toplevel bootstrap) [gcc-no-bootstrap]: Disable.
	* configure.in: Support --enable-bootstrap.

	* Makefile.def: Remove new- prefix from toplevel
	bootstrap targets.
	* Makefile.tpl: Likewise.

	* Makefile.def: Add bootstrap_stage 4.  Add bootstrap2
	target.

	* Makefile.tpl (Toplevel bootstrap): Pass $(BASE_FLAGS_TO_PASS)
	$(RECURSE_FLAGS) to recursive invocation of make.

	* Makefile.in: Regenerate.
	* configure: Regenerate.
@
text
@d1781 1
a1781 1
    default_target=new-bootstrap
@


1.216
log
@	* configure.in: Fix sed invocation for GFORTRAN_FOR_TARGET.
	* configure: Regenerate.
@
text
@d1763 30
@


1.215
log
@2005-05-24  Paolo Bonzini <bonzini@@gnu.org>

	* configure.in: Test the ability to symlink directories.
	* configure: Regenerate.

	* Makefile.def (bootstrap-stage): New definitions.
	* Makefile.tpl (configure-stage1-gcc,
	configure-stage2-gcc, configure-stage3-gcc,
	all-stage1-gcc, all-stage2-gcc, all-stage3-gcc,
	new-bootstrap, new-cleanstrap, new-restage1, new-restage2,
	new-restage3, compare): Autogenerate, see Makefile.in
	entry for behavioral changes.
	(distclean-stage1, new-stage1-start, new-stage1-end,
	new-stage1-bubble, distclean-stage2, new-stage2-start,
	new-stage2-end, new-stage2-bubble, distclean-stage3,
	new-stage3-start, new-stage3-end): New autogenerated targets.
	(objext, prebootstrap, BOOT_CFLAGS,
	POSTSTAGE1_FLAGS_TO_PASS): Move above the autogenerated
	targets.

	* Makefile.in: Regenerate.
	(distclean-stage1, new-stage1-start, new-stage1-end,
	new-stage1-bubble, distclean-stage2, new-stage2-start,
	new-stage2-end, new-stage2-bubble, distclean-stage3,
	new-stage3-start, new-stage3-end): New targets.
	(all-stage1-gcc): Move prebootstrap dependency from here...
	(configure-stage1-gcc): ...to here.
	(new-bootstrap): Use bubble targets.
	(new-cleanstrap, new-restage1, new-restage2, new-restage3):
	Use per-stage distclean targets.
	(configure-stage1-gcc, configure-stage2-gcc,
	configure-stage3-gcc, all-stage1-gcc,
	all-stage2-gcc, all-stage3-gcc, new-bootstrap):
	Use new-stageN-start to prepare the tree.
@
text
@d2036 1
a2036 1
  GFORTRAN_FOR_TARGET=`echo gfortran | sed -e 's/x/x/' ${program_transform_name}`
@


1.214
log
@2004-05-23  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.def (host_modules): add libcpp.
	* Makefile.tpl: Add dependencies on and for libcpp.
	* Makefile.in: Regenerate.
	* configure.in: Add libcpp host module.
	* configure: Regenerate.

config/ChangeLog:

2004-05-23  Paolo Bonzini  <bonzini@@gnu.org>

	* acx.m4 (ACX_HEADER_STDBOOL, ACX_HEADER_STRING):
	From gcc.
@
text
@d28 1
d2250 30
@


1.213
log
@2004-05-21  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.tpl: Whenever a recursive target is defined, wrap
	it in a special @@if/@@endif block, and prepare its maybe
	dependency in the @@if/@@endif block
	* configure.in: Instead of writing maybe dependencies, remove
	the @@if/@@endif statements, and remove the @@if/@@endif blocks
	that remain.
	* configure: Regenerate.
	* Makefile.in: Regenerate.
@
text
@d129 1
a129 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl tix libgui zlib libbanshee"
@


1.212
log
@	* Makefile.def, Makefile.tpl, configure.in: Remove all mention
	of libf2c.
	* configure, Makefile.in: Regenerate.
@
text
@d1719 1
a1719 1
# Create the 'maybe dependencies'.  This uses a temporary file.
a1723 2
rm -f maybedep.tmp
echo '# maybedep.tmp' > maybedep.tmp
d1725 6
a1730 3
# Make-targets which may need maybe dependencies.
mts="configure all install check clean distclean dvi info install-info"
mts="${mts} installcheck mostlyclean maintainer-clean TAGS"
a1731 1
# Loop over modules and make-targets.
d1738 3
a1740 6
  for mt in ${mts} ; do
    case ${mt} in
      install) ;; # No installing build modules.
      *) echo "maybe-${mt}-build-${module}: ${mt}-build-${module}" >> maybedep.tmp ;;
    esac
  done
d1748 3
a1750 3
  for mt in ${mts} ; do
    echo "maybe-${mt}-${module}: ${mt}-${module}" >> maybedep.tmp
  done
d1758 3
a1760 3
  for mt in ${mts} ; do
    echo "maybe-${mt}-target-${module}: ${mt}-target-${module}" >> maybedep.tmp
  done
d1762 2
a1763 2
maybe_dependencies=maybedep.tmp
AC_SUBST_FILE(maybe_dependencies)
@


1.211
log
@merge from gcc
@
text
@a152 1
		target-libf2c \
d392 1
a392 1
    skipdirs="target-libiberty ${libgcj} target-libstdc++-v3 target-libf2c target-librx"
a414 6
    case ${target} in
	h8300*-*-* | h8500-*-*)
	  noconfigdirs="$noconfigdirs target-libf2c"
          ;;
        *) ;;
    esac
d515 1
a515 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj} target-libf2c"
d518 1
a518 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj} target-libf2c"
@


1.210
log
@merge from gcc:
2004-04-27  Paolo Bonzini  <bonzini@@gnu.org>

	Revert:
	2004-04-26  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.def (flags_to_pass): Remove *dir variables that
	are passed to the modules via TOPLEVEL_CONFIGURE_ARGUMENTS,
	as well as prefix and exec_prefix.
	* Makefile.in: Regenerate.

2004-04-26  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.def (host_modules): Mark with the bootstrap
	flag packages on which gcc depends.
	* Makefile.tpl (all-bootstrap): Use it.
	* Makefile.in: Regenerate.

2004-04-26  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.def (flags_to_pass): Remove *dir variables that
	are passed to the modules via TOPLEVEL_CONFIGURE_ARGUMENTS,
	as well as prefix and exec_prefix.
	* Makefile.in: Regenerate.

2004-04-26  Paolo Bonzini  <bonzini@@gnu.org>

        * configure.in: Invoke ACX_PROG_CMP_IGNORE_INITIAL.
        * configure: Regenerate.
        * config/acx.m4: Mutuate ACX_PROG_CMP_IGNORE_INITIAL from gcc.
        * gcc/Makefile.tpl (compare): Use the result of the test.
        * gcc/Makefile.in: Regenerate.

2004-04-23  Paolo Bonzini  <bonzini@@gnu.org>

	* Makefile.tpl (all-stage1-gcc, all-stage2-gcc, all-stage3-gcc):
	Always relocate gcc and prev-gcc to the original names, even
	if the build fails.
	(new-cleanstrap, new-restage1, new-restage2, new-restage3):
	New targets.
@
text
@d129 1
a129 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl tix libgui zlib"
d152 1
d154 1
d312 12
d348 12
d375 16
a441 3
  alpha*-*-freebsd* | alpha*-*-kfreebsd*-gnu)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
a559 3
  i[[3456789]]86-*-freebsd* | i[[3456789]]86-*-kfreebsd*-gnu)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
d1109 54
d1235 1
d1264 7
a1270 1
        case $add_this_lang in
d1571 3
d2038 14
d2093 1
d2175 1
@


1.209
log
@	* configure.in (mips*-*-irix5*): Enable ld.
	* configure: Regenerate.
@
text
@d1071 1
@


1.208
log
@2004-04-09  Nathanael Nerode  <neroden@@gcc.gnu.org>

	PR bootstrap/14871
	* Makefile.tpl: If we don't have built-in-tree target tools,
	use the ones found by configure rather than hacking around with
	program_transform_name.
	* configure.in: Give Makefile.tpl the information necessary
	to do that.
	* Makefile.in: Regenerate.
	* configure: Regenerate.

2004-04-06  Nathanael Nerode  <neroden@@gcc.gnu.org>

	PR bootstrap/14760
	* configure.in: When computing baseargs, strip *all* copies of
	offending options.  Also, don't match/substitute the trailing space,
	so that this actually works when two similar options are separated by
	only one space.
	* configure: Regenerate.

2004-04-06  David Edelsohn  <edelsohn@@gnu.org>

        * configure.in (powerpc-*-aix*): Remove target-libada from noconfigdirs.
        (rs6000-*-aix*): Same.
        * configure: Regenerate.
@
text
@d646 1
a646 2
    # The GNU linker does not support shared libraries.
    noconfigdirs="$noconfigdirs ld gprof target-libgloss ${libgcj}"
@


1.207
log
@	* configure.in (top level bootstrap support): Rework --enable-werror
	to set @@stage2_werror_flag@@.
	* configure: Regenerate.
	* Makefile.tpl (top level bootstrap support): Pass
	@@stage2_werror_flag@@ down to configure in stages 2 and 3.
	* Makefile.in: Regenerate.
@
text
@d615 1
a615 1
    noconfigdirs="$noconfigdirs gprof target-libada target-libgloss ${libgcj}"
d637 1
a637 1
    noconfigdirs="$noconfigdirs gprof target-libada target-libgloss ${libgcj}"
d1736 15
a1750 15
s/ --no[[^ ]]* / /
s/ --c[[a-z-]]*[[= ]][[^ ]]* / /
s/ --sr[[a-z-]]*[[= ]][[^ ]]* / /
s/ --ho[[a-z-]]*[[= ]][[^ ]]* / /
s/ --bu[[a-z-]]*[[= ]][[^ ]]* / /
s/ --t[[a-z-]]*[[= ]][[^ ]]* / /
s/ --program-[[pst]][[a-z-]]*[[= ]][[^ ]]* / /
s/ -cache-file[[= ]][[^ ]]* / /
s/ -srcdir[[= ]][[^ ]]* / /
s/ -host[[= ]][[^ ]]* / /
s/ -build[[= ]][[^ ]]* / /
s/ -target[[= ]][[^ ]]* / /
s/ -program-prefix[[= ]][[^ ]]* / /
s/ -program-suffix[[= ]][[^ ]]* / /
s/ -program-transform-name[[= ]][[^ ]]* / /
d2048 7
a2054 7
NCN_STRICT_CHECK_TARGET_TOOL(AR_FOR_TARGET, ar)
NCN_STRICT_CHECK_TARGET_TOOL(AS_FOR_TARGET, as)
NCN_STRICT_CHECK_TARGET_TOOL(DLLTOOL_FOR_TARGET, dlltool)
NCN_STRICT_CHECK_TARGET_TOOL(LD_FOR_TARGET, ld)
NCN_STRICT_CHECK_TARGET_TOOL(NM_FOR_TARGET, nm)
NCN_STRICT_CHECK_TARGET_TOOL(RANLIB_FOR_TARGET, ranlib, :)
NCN_STRICT_CHECK_TARGET_TOOL(WINDRES_FOR_TARGET, windres)
d2080 18
a2097 1
fi
@


1.206
log
@	* Makefile.tpl: Rearrange by moving recursive_targets rules
	into their proper sections.
	* Makefile.tpl (top level bootstrap support): Move disabling
	of coverage flags from 'make' to 'configure'; improve comments.
	* Makefile.in: Regenerate.

	* Makefile.tpl (experimental top level bootstrap) Move stage1
	language setting from all- target to configure- target; disable
	intermodule optimization in stage 1; prevent gratuitous rebuilds
	of stage 1.
	* Makefile.in: Regenerate.
	* configure.in: Comma-separate stage 1 language list for top
	level bootstrap.
	* configure: Regenerate.

	* Makefile.tpl: Clean up experimental top level bootstrap support:
	note known problems; set CONFIG_SHELL; don't set BUILD_CC; relocate
	prev-gcc in configure- targets as well as all- targets.
	* Makefile.in: Regenerate.
@
text
@d2132 3
a2134 3
case ${enable_error} in
  yes) WERROR=-Werror ;;
  *) WERROR= ;;
d2136 1
a2136 1
AC_SUBST(WERROR)
@


1.205
log
@2004-03-17  Paolo Bonzini  <bonzini@@gnu.org>

	* configure.in: Remove symbolic link section.
	* configure: Regenerate.
	* Makefile.tpl (links): Remove.
	* Makefile.in: Regenerate.
@
text
@d1183 2
a1184 2
		# Add to (space-separated) list of stage 1 languages.
		stage1_languages="${stage1_languages} ${language}"
@


1.204
log
@2004-03-15  Paolo Bonzini  <bonzini@@gnu.org>
            Nathanael Nerode  <neroden@@gcc.gnu.org>

	* configure.in (DEFAULT_YACC, DEFAULT_M4, DEFAULT_LEX):
        Set with AC_CHECK_PROGS.
	* configure.in: Fix comment typo from last patch.
	* configure: Regenerate.
@
text
@a1506 44
# FIXME Should this be done recursively ??? (Useful for e.g. gdbtest)
# Set up the list of links to be made.
# ${links} is the list of link names, and ${files} is the list of names to link to.

# Make the links.
configlinks="${links}"
if test -r ./config.status  ; then
  mv -f ./config.status ./config.back
fi
while test -n "${files}" ; do
  # set file to car of files, files to cdr of files
  set ${files}; file=$1; shift; files=$*
  set ${links}; link=$1; shift; links=$*

  if test ! -r ${srcdir}/${file} ; then
    if test ! -r ${file} ; then
      echo '***' "${progname}: cannot create a link \"${link}\"," 1>&2
      echo '***' "since the file \"${srcdir}/${file}\" does not exist." 1>&2
      exit 1
    else
      srcfile=${file}
    fi
  else
    srcfile=${srcdir}/${file}
  fi

  ${remove} -f ${link}
  # Make a symlink if possible, otherwise try a hard link
  if ${symbolic_link} ${srcfile} ${link} >/dev/null 2>&1 ; then
    true
  else
    # We need to re-remove the file because Lynx leaves a 
    # very strange directory there when it fails an NFS symlink.
    ${remove} -r -f ${link}
    ${hard_link} ${srcfile} ${link}
  fi
  if test ! -r ${link} ; then
    echo '***' "${progname}: unable to link \"${link}\" to \"${srcfile}\"." 1>&2
    exit 1
  fi

  echo "Linked \"${link}\" to \"${srcfile}\"."
done

a1998 1
AC_SUBST(configlinks)
@


1.203
log
@2004-03-15  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Makefile.tpl: Introduce experimental top level bootstrap support.
	* Makefile.in: Regenerate.
	* configure.in: Introduce support for top level bootstrap.
	* configure: Regenerate.
@
text
@d1073 1
a1073 1
# By default, C is the only stage 1 langauge.
d1500 6
a1505 56
# Generate a default definition for YACC.  This is used if the makefile can't
# locate bison or byacc in objdir.

for prog in 'bison -y' byacc yacc
do
  set dummy $prog; tmp=$2
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/$tmp; then
      DEFAULT_YACC="$prog"
      break
    fi
  done
  IFS="$save_ifs"

  test -n "$DEFAULT_YACC" && break
done

# Generate a default definition for M4.  This is used if the makefile can't
# locate m4 in objdir.

for prog in gm4 gnum4 m4
do
  set dummy $prog; tmp=$2
  IFS="${IFS=   }"; save_ifs="$IFS"; IFS="${IFS}:"
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/$tmp; then
      DEFAULT_M4="$prog"
      break
    fi
  done
  IFS="$save_ifs"

  test -n "$DEFAULT_M4" && break
done

# Generate a default definition for LEX.  This is used if the makefile can't
# locate flex in objdir.

for prog in flex lex
do
  set dummy $prog; tmp=$2
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/$tmp; then
      DEFAULT_LEX="$prog"
      break
    fi
  done
  IFS="$save_ifs"

  test -n "$DEFAULT_LEX" && break
done
@


1.202
log
@2004-03-12  Eric Botcazou  <ebotcazou@@gcc.gnu.org>
            Paolo Bonzini  <bonzini@@gnu.org>

	PR bootstrap/14522
	* configure.in: Cope with shells that do not support unquoted ^
	* configure: Regenerate.
@
text
@d1073 4
d1139 1
a1139 1
        # $lang_dirs, and $build_by_default
d1143 1
d1176 2
a1177 1
            eval noconfigdirs='"$noconfigdirs "'\"$target_libs $lang_dirs\" ;;
d1180 8
a1187 1
	    missing_languages=`echo "$missing_languages" | sed "s/,$language,/,/"` ;;
d2199 33
@


1.201
log
@2004-03-11  Eric Botcazou  <ebotcazou@@gcc.gnu.org>
            Paolo Bonzini  <bonzini@@gnu.org>

	PR bootstrap/14522
	* configure.in: Cope with shell that do not support nesting
	quotes inside quoted backquote substitutions.
	* configure: Regenerate.

2004-03-10  Andrew Pinski  <pinskia@@physics.uc.edu>

	PR bootstrap/14522
	* configure.in: Fix escaping of $.
	* configure: Regenerate.
@
text
@d1180 1
a1180 1
  missing_languages=`echo "$missing_languages" | sed -e s/^,// -e s/,\$//`
@


1.200
log
@(top level)
2004-03-11  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* configure: Regenerate.

2004-03-08  Paolo Bonzini  <bonzini@@gnu.org>

	PR ada/14131
	Move language detection to the top level.
	* configure.in: Find default values for the tools as
	soon as possible.  Disable ada if GNAT is not found.
	Emit error message about missing languages.  Expand
	--enable-languages=all for the gcc subdirectory.

(config)
2004-03-08  Paolo Bonzini  <bonzini@@gnu.org>

	PR ada/14131
	Move language detection to the top level.
	* acx.m4 (ACX_PROG_GNAT): New macro, moved here
	from the gcc subdirectory.

2004-03-09  Hans-Peter Nilsson  <hp@@axis.com>

	* accross.m4 (AC_C_BIGENDIAN_CROSS): Compile endian probe with
	"-c".  Properly quote parameter for AC_MSG_ERROR.
@
text
@d1174 1
a1174 1
	    missing_languages="`echo "$missing_languages" | sed "s/,$language,/,/"`" ;;
d1180 1
a1180 1
  missing_languages="`echo "$missing_languages" | sed -e s/^,// -e s/,$//`"
d1190 1
a1190 1
  ac_configure_args="`echo " $ac_configure_args" | sed -e 's/ --enable-languages=[[^ ]]*//' -e 's/$/ --enable-languages='"$enable_languages"/ `"
@


1.199
log
@	* configure.in (mips64*-*-linux*): Override mips*-*-linux* case
	and disable libgcj.
	* configure: Regenerated.
@
text
@a749 267
# Figure out what language subdirectories are present.
# Look if the user specified --enable-languages="..."; if not, use
# the environment variable $LANGUAGES if defined. $LANGUAGES might
# go away some day.
# NB:  embedded tabs in this IF block -- do not untabify
if test x"${enable_languages+set}" != xset; then
  if test x"${LANGUAGES+set}" = xset; then
    enable_languages="${LANGUAGES}"
      echo configure.in: warning: setting LANGUAGES is deprecated, use --enable-languages instead 1>&2
  else
    enable_languages=all
  fi
else
  if test x"${enable_languages}" = x ||
     test x"${enable_languages}" = xyes;
     then
    echo configure.in: --enable-languages needs at least one language argument 1>&2
    exit 1
  fi
fi
enable_languages=`echo "${enable_languages}" | sed -e 's/[[ 	,]][[ 	,]]*/,/g' -e 's/,$//'`

# First scan to see if an enabled language requires some other language.
# We assume that a given config-lang.in will list all the language
# front ends it requires, even if some are required indirectly.
for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
  case ${lang_frag} in
    ..) ;;
    # The odd quoting in the next line works around
    # an apparent bug in bash 1.12 on linux.
    ${srcdir}/gcc/[[*]]/config-lang.in) ;;
    *)
      # From the config-lang.in, get $language, $lang_requires
      language=
      lang_requires=
      . ${lang_frag}
      for other in ${lang_requires} ; do
        case ,${enable_languages}, in
	  *,$other,*) ;;
	  *,all,*) ;;
	  *,$language,*)
	    echo " \`$other' language required by \`$language'; enabling" 1>&2
	    enable_languages="${enable_languages},${other}"
	    ;;
	esac
      done
      ;;
  esac
done

for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
  case ${lang_frag} in
    ..) ;;
    # The odd quoting in the next line works around
    # an apparent bug in bash 1.12 on linux.
    ${srcdir}/gcc/[[*]]/config-lang.in) ;;
    *)
      # From the config-lang.in, get $language, $target_libs, 
      # $lang_dirs, and $build_by_default
      language=
      target_libs=
      lang_dirs=
      build_by_default=
      . ${lang_frag}
      if test "x$language" = x ; then
        echo "${lang_frag} doesn't set \$language." 1>&2
        exit 1
      fi
      case ,${enable_languages}, in
        *,${language},*)
          # Language was explicitly selected; include it.
          add_this_lang=yes
          ;;
        *,all,*)
          # 'all' was selected; include 'default' languages.
          case ${build_by_default} in
            no) add_this_lang=no ;;
            *) add_this_lang=yes ;;
          esac 
          ;;
        *) add_this_lang=no ;;
      esac
      case ${add_this_lang} in
        no)
          # Remove language-dependent dirs.
          eval noconfigdirs='"$noconfigdirs "'\"$target_libs $lang_dirs\"
          ;;
      esac
      ;;
  esac
done

# Remove the entries in $skipdirs and $noconfigdirs from $configdirs and
# $target_configdirs.
# If we have the source for $noconfigdirs entries, add them to $notsupp.

notsupp=""
for dir in . $skipdirs $noconfigdirs ; do
  dirname=`echo $dir | sed -e s/target-//g`
  if test $dir != .  && echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    configdirs=`echo " ${configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
  if test $dir != . && echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    target_configdirs=`echo " ${target_configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
done

# Sometimes the tools are distributed with libiberty but with no other
# libraries.  In that case, we don't want to build target-libiberty.
if test -n "${target_configdirs}" ; then
  others=
  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do
    if test "$i" != "libiberty" ; then
      if test -r $srcdir/$i/configure ; then
	others=yes;
	break;
      fi
    fi
  done
  if test -z "${others}" ; then
    target_configdirs=
  fi
fi

# Quietly strip out all directories which aren't configurable in this tree.
# This relies on all configurable subdirectories being autoconfiscated, which
# is now the case.
configdirs_all="$configdirs"
configdirs=
for i in ${configdirs_all} ; do
  if test -f ${srcdir}/$i/configure ; then
    configdirs="${configdirs} $i"
  fi
done
target_configdirs_all="$target_configdirs"
target_configdirs=
for i in ${target_configdirs_all} ; do
  j=`echo $i | sed -e s/target-//g` 
  if test -f ${srcdir}/$j/configure ; then
    target_configdirs="${target_configdirs} $i"
  fi
done

# Produce a warning message for the subdirs we can't configure.
# This isn't especially interesting in the Cygnus tree, but in the individual
# FSF releases, it's important to let people know when their machine isn't
# supported by the one or two programs in a package.

if test -n "${notsupp}" && test -z "${norecursion}" ; then
  # If $appdirs is non-empty, at least one of those directories must still
  # be configured, or we error out.  (E.g., if the gas release supports a
  # specified target in some subdirs but not the gas subdir, we shouldn't
  # pretend that all is well.)
  if test -n "$appdirs" ; then
    for dir in $appdirs ; do
      if test -r $dir/Makefile.in ; then
	if echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
	if echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
      fi
    done
    if test -n "$appdirs" ; then
      echo "*** This configuration is not supported by this package." 1>&2
      exit 1
    fi
  fi
  # Okay, some application will build, or we don't care to check.  Still
  # notify of subdirs not getting built.
  echo "*** This configuration is not supported in the following subdirectories:" 1>&2
  echo "    ${notsupp}" 1>&2
  echo "    (Any other directories should still work fine.)" 1>&2
fi

case "$host" in
  *msdosdjgpp*)
    enable_gdbtk=no ;;
esac

copy_dirs=

# Handle --with-headers=XXX.  If the value is not "yes", the contents of
# the named directory are copied to $(tooldir)/sys-include.
if test x"${with_headers}" != x && test x"${with_headers}" != xno ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-headers is only supported when cross compiling
    exit 1
  fi
  if test x"${with_headers}" != xyes ; then
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    copy_dirs="${copy_dirs} ${with_headers} $x/${target_alias}/sys-include"
  fi
fi

# Handle --with-libs=XXX.  If the value is not "yes", the contents of
# the name directories are copied to $(tooldir)/lib.  Multiple directories
# are permitted.
if test x"${with_libs}" != x && test x"${with_libs}" != xno ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-libs is only supported when cross compiling
    exit 1
  fi
  if test x"${with_libs}" != xyes ; then
    # Copy the libraries in reverse order, so that files in the first named
    # library override files in subsequent libraries.
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    for l in ${with_libs}; do
      copy_dirs="$l $x/${target_alias}/lib ${copy_dirs}"
    done
  fi
fi

# Handle ${copy_dirs}
set fnord ${copy_dirs}
shift
while test $# != 0 ; do
  if test -f $2/COPIED && test x"`cat $2/COPIED`" = x"$1" ; then
    :
  else
    echo Copying $1 to $2

    # Use the install script to create the directory and all required
    # parent directories.
    if test -d $2 ; then
      :
    else
      echo >config.temp
      ${srcdir}/install-sh -c -m 644 config.temp $2/COPIED
    fi

    # Copy the directory, assuming we have tar.
    # FIXME: Should we use B in the second tar?  Not all systems support it.
    (cd $1; tar -cf - .) | (cd $2; tar -xpf -)

    # It is the responsibility of the user to correctly adjust all
    # symlinks.  If somebody can figure out how to handle them correctly
    # here, feel free to add the code.

    echo $1 > $2/COPIED
  fi
  shift; shift
done

d881 415
a1295 17
    tentative_cc="cc -Wp,-H256000"
    ;;
  *-*-hiux*)
    tentative_cc="cc -Wp,-H256000"
    ;;
  rs6000-*-lynxos*)
    # /bin/cc is less than useful for our purposes.  Always use GCC
    tentative_cc="/usr/cygnus/progressive/bin/gcc"
    host_makefile_frag="config/mh-lynxrs6k"
    ;;
  *-*-lynxos*)
    # /bin/cc is less than useful for our purposes.  Always use GCC
    tentative_cc="/bin/gcc"
    ;;
  *-*-sysv4*)
    host_makefile_frag="config/mh-sysv4"
    ;;
d1297 38
d1337 31
a1481 19
# If we aren't going to be using gcc, see if we can extract a definition
# of CC from the fragment.
# Actually, use the 'pre-extracted' version above.
if test -z "${CC}" && test "${build}" = "${host}" ; then
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  found=
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/gcc; then
      found=yes
      break
    fi
  done
  IFS="$save_ifs"
  if test -z "${found}" && test -n "${tentative_cc}" ; then
    CC=$tentative_cc
  fi
fi

a1542 151

if test "${build}" != "${host}" ; then
  # If we are doing a Canadian Cross, in which the host and build systems
  # are not the same, we set reasonable default values for the tools.

  BISON=${BISON-bison}
  CC=${CC-${host_alias}-gcc}
  CFLAGS=${CFLAGS-"-g -O2"}
  CXX=${CXX-${host_alias}-c++}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
  CC_FOR_BUILD=${CC_FOR_BUILD-gcc}
  CC_FOR_TARGET=${CC_FOR_TARGET-${target_alias}-gcc}
  CXX_FOR_TARGET=${CXX_FOR_TARGET-${target_alias}-c++}
  GCJ_FOR_TARGET=${GCJ_FOR_TARGET-${target_alias}-gcj}
  GCC_FOR_TARGET=${GCC_FOR_TARGET-${CC_FOR_TARGET-${target_alias}-gcc}}
  BUILD_PREFIX=${build_alias}-
  BUILD_PREFIX_1=${build_alias}-
  MAKEINFO=${MAKEINFO-makeinfo}

  if test -z "${YACC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/bison; then
	YACC="bison -y"
	break
      fi
      if test -f $dir/byacc; then
	YACC=byacc
	break
      fi
      if test -f $dir/yacc; then
	YACC=yacc
	break
      fi
    done
    IFS="$save_ifs"
    if test -z "${YACC}" ; then
      YACC="bison -y"
    fi
  fi

  if test -z "${LEX}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/flex; then
	LEX=flex
	break
      fi
      if test -f $dir/lex; then
	LEX=lex
	break
      fi
    done
    IFS="$save_ifs"
    LEX=${LEX-flex}
  fi

else
  # Set reasonable default values for some tools even if not Canadian.
  # Of course, these are different reasonable default values, originally
  # specified directly in the Makefile.
  # We don't export, so that autoconf can do its job.
  # Note that all these settings are above the fragment inclusion point
  # in Makefile.in, so can still be overridden by fragments.
  # This is all going to change when we autoconfiscate...

  BISON="\$(USUAL_BISON)"
  CC_FOR_BUILD="\$(CC)"
  GCC_FOR_TARGET="\$(USUAL_GCC_FOR_TARGET)"
  BUILD_PREFIX=
  BUILD_PREFIX_1=loser-
  MAKEINFO="\$(USUAL_MAKEINFO)"
  LEX="\$(USUAL_LEX)"
  YACC="\$(USUAL_YACC)"

  # If CC is still not set, try to get gcc.
  cc_prog_is_gcc=
  if test -z "${CC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/gcc; then
	CC="gcc"
	cc_prog_is_gcc=yes
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
	break
      fi
    done
    IFS="$save_ifs"
    CC=${CC-cc}
  else
    # Determine if we are using gcc.
    cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
    if ${CC} -E conftest.c | grep yes >/dev/null 2>&1; then
      cc_prog_is_gcc=yes
    fi
    rm -f conftest.c
    if test -z "${CFLAGS}"; then
      # Here CC is set but CFLAGS is not.  Use a quick hack to use -O2 if CC
      # is set to a version of gcc.
      if test "$cc_prog_is_gcc" = yes; then
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
      fi
    fi
  fi

  # We must set the default linker to the linker used by gcc for the correct
  # operation of libtool.  If LD is not defined and we are using gcc, try to
  # set the LD default to the ld used by gcc.
  if test -z "$LD"; then
    if test "$cc_prog_is_gcc" = yes; then
      case $build in
      *-*-mingw*)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\015'` ;;
      *)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;
      esac
      case $gcc_prog_ld in
      # Accept absolute paths.
      [[\\/]* | [A-Za-z]:[\\/]*)]
        LD="$gcc_prog_ld" ;;
      esac
    fi
  fi

  CXX=${CXX-"c++"}
  CFLAGS=${CFLAGS-"-g"}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
fi
@


1.199.2.1
log
@Merge with mainline cagney_tramp-20040321-mergepoint.
@
text
@d750 267
a1167 480
# If we aren't going to be using gcc, see if we can extract a definition
# of CC from the fragment.
# Actually, use the 'pre-extracted' version above.
if test -z "${CC}" && test "${build}" = "${host}" ; then
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  found=
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/gcc; then
      found=yes
      break
    fi
  done
  IFS="$save_ifs"
  if test -z "${found}" && test -n "${tentative_cc}" ; then
    CC=$tentative_cc
  fi
fi

if test "${build}" != "${host}" ; then
  # If we are doing a Canadian Cross, in which the host and build systems
  # are not the same, we set reasonable default values for the tools.

  BISON=${BISON-bison}
  CC=${CC-${host_alias}-gcc}
  CFLAGS=${CFLAGS-"-g -O2"}
  CXX=${CXX-${host_alias}-c++}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
  CC_FOR_BUILD=${CC_FOR_BUILD-gcc}
  CC_FOR_TARGET=${CC_FOR_TARGET-${target_alias}-gcc}
  CXX_FOR_TARGET=${CXX_FOR_TARGET-${target_alias}-c++}
  GCJ_FOR_TARGET=${GCJ_FOR_TARGET-${target_alias}-gcj}
  GCC_FOR_TARGET=${GCC_FOR_TARGET-${CC_FOR_TARGET-${target_alias}-gcc}}
  BUILD_PREFIX=${build_alias}-
  BUILD_PREFIX_1=${build_alias}-
  MAKEINFO=${MAKEINFO-makeinfo}

  if test -z "${YACC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/bison; then
	YACC="bison -y"
	break
      fi
      if test -f $dir/byacc; then
	YACC=byacc
	break
      fi
      if test -f $dir/yacc; then
	YACC=yacc
	break
      fi
    done
    IFS="$save_ifs"
    if test -z "${YACC}" ; then
      YACC="bison -y"
    fi
  fi

  if test -z "${LEX}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/flex; then
	LEX=flex
	break
      fi
      if test -f $dir/lex; then
	LEX=lex
	break
      fi
    done
    IFS="$save_ifs"
    LEX=${LEX-flex}
  fi

else
  # Set reasonable default values for some tools even if not Canadian.
  # Of course, these are different reasonable default values, originally
  # specified directly in the Makefile.
  # We don't export, so that autoconf can do its job.
  # Note that all these settings are above the fragment inclusion point
  # in Makefile.in, so can still be overridden by fragments.
  # This is all going to change when we autoconfiscate...

  BISON="\$(USUAL_BISON)"
  CC_FOR_BUILD="\$(CC)"
  GCC_FOR_TARGET="\$(USUAL_GCC_FOR_TARGET)"
  BUILD_PREFIX=
  BUILD_PREFIX_1=loser-
  MAKEINFO="\$(USUAL_MAKEINFO)"
  LEX="\$(USUAL_LEX)"
  YACC="\$(USUAL_YACC)"

  # If CC is still not set, try to get gcc.
  cc_prog_is_gcc=
  if test -z "${CC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/gcc; then
	CC="gcc"
	cc_prog_is_gcc=yes
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
	break
      fi
    done
    IFS="$save_ifs"
    CC=${CC-cc}
  else
    # Determine if we are using gcc.
    cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
    if ${CC} -E conftest.c | grep yes >/dev/null 2>&1; then
      cc_prog_is_gcc=yes
    fi
    rm -f conftest.c
    if test -z "${CFLAGS}"; then
      # Here CC is set but CFLAGS is not.  Use a quick hack to use -O2 if CC
      # is set to a version of gcc.
      if test "$cc_prog_is_gcc" = yes; then
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
      fi
    fi
  fi

  # We must set the default linker to the linker used by gcc for the correct
  # operation of libtool.  If LD is not defined and we are using gcc, try to
  # set the LD default to the ld used by gcc.
  if test -z "$LD"; then
    if test "$cc_prog_is_gcc" = yes; then
      case $build in
      *-*-mingw*)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\015'` ;;
      *)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;
      esac
      case $gcc_prog_ld in
      # Accept absolute paths.
      [[\\/]* | [A-Za-z]:[\\/]*)]
        LD="$gcc_prog_ld" ;;
      esac
    fi
  fi

  CXX=${CXX-"c++"}
  CFLAGS=${CFLAGS-"-g"}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
fi

ACX_PROG_GNAT

# By default, C is the only stage 1 language.
stage1_languages=c
AC_SUBST(stage1_languages)

# Figure out what language subdirectories are present.
# Look if the user specified --enable-languages="..."; if not, use
# the environment variable $LANGUAGES if defined. $LANGUAGES might
# go away some day.
# NB:  embedded tabs in this IF block -- do not untabify
if test -d ${srcdir}/gcc; then
  if test x"${enable_languages+set}" != xset; then
    if test x"${LANGUAGES+set}" = xset; then
      enable_languages="${LANGUAGES}"
        echo configure.in: warning: setting LANGUAGES is deprecated, use --enable-languages instead 1>&2
    else
      enable_languages=all
    fi
  else
    if test x"${enable_languages}" = x ||
       test x"${enable_languages}" = xyes;
       then
      echo configure.in: --enable-languages needs at least one language argument 1>&2
      exit 1
    fi
  fi
  enable_languages=`echo "${enable_languages}" | sed -e 's/[[ 	,]][[ 	,]]*/,/g' -e 's/,$//'`

  # First scan to see if an enabled language requires some other language.
  # We assume that a given config-lang.in will list all the language
  # front ends it requires, even if some are required indirectly.
  for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
    case ${lang_frag} in
      ..) ;;
      # The odd quoting in the next line works around
      # an apparent bug in bash 1.12 on linux.
      ${srcdir}/gcc/[[*]]/config-lang.in) ;;
      *)
        # From the config-lang.in, get $language, $lang_requires
        language=
        lang_requires=
        . ${lang_frag}
        for other in ${lang_requires} ; do
          case ,${enable_languages}, in
	    *,$other,*) ;;
	    *,all,*) ;;
	    *,$language,*)
	      echo " \`$other' language required by \`$language'; enabling" 1>&2
	      enable_languages="${enable_languages},${other}"
	      ;;
	  esac
        done
        ;;
    esac
  done

  new_enable_languages=c
  missing_languages=`echo ",$enable_languages," | sed -e s/,all,/,/ -e s/,c,/,/ `

  for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
    case ${lang_frag} in
      ..) ;;
      # The odd quoting in the next line works around
      # an apparent bug in bash 1.12 on linux.
      ${srcdir}/gcc/[[*]]/config-lang.in) ;;
      *)
        # From the config-lang.in, get $language, $target_libs, 
        # $lang_dirs, $boot_language, and $build_by_default
        language=
        target_libs=
        lang_dirs=
        boot_language=
        build_by_default=
        . ${lang_frag}
        # This is quite sensitive to the ordering of the case statement arms.
        case ,${enable_languages},:${language}:${have_gnat}:${build_by_default} in
          *::*:*)
            echo "${lang_frag} doesn't set \$language." 1>&2
            exit 1
	    ;;
          *:ada:no:*)
            # Ada was requested with no preexisting GNAT.  Disable unconditionally.
            add_this_lang=no
            ;;
          *,${language},*:*:*:*)
            # Language was explicitly selected; include it.
            add_this_lang=yes
            ;;
          *,all,*:*:*:no)
            # 'all' was selected, but this is not a default language
	    # so do not include it.
            add_this_lang=no
	    ;;
          *,all,*:*:*:*)
            # 'all' was selected and this is a default language; include it.
            add_this_lang=yes
            ;;
          *)
            add_this_lang=no
            ;;
        esac
        case $add_this_lang in
	  no)
            # Remove language-dependent dirs.
            eval noconfigdirs='"$noconfigdirs "'\"$target_libs $lang_dirs\"
	    ;;
          *)
	    new_enable_languages="$new_enable_languages,$language"
	    missing_languages=`echo "$missing_languages" | sed "s/,$language,/,/"`
	    case ${boot_language} in
	      yes)
		# Add to (space-separated) list of stage 1 languages.
		stage1_languages="${stage1_languages} ${language}"
		;;
	    esac
	    ;;
        esac
        ;;
    esac
  done

  missing_languages=`echo "$missing_languages" | sed -e "s/^,//" -e "s/,$//"`
  if test "x$missing_languages" != x; then
    AC_MSG_ERROR([
The following requested languages were not found: ${missing_languages}])
  fi

  if test "x$new_enable_languages" != "x$enable_languages"; then
    echo The following languages will be built: ${new_enable_languages}
  fi
  enable_languages="$new_enable_languages"
  ac_configure_args=`echo " $ac_configure_args" | sed -e 's/ --enable-languages=[[^ ]]*//' -e 's/$/ --enable-languages='"$enable_languages"/ `
fi

# Remove the entries in $skipdirs and $noconfigdirs from $configdirs and
# $target_configdirs.
# If we have the source for $noconfigdirs entries, add them to $notsupp.

notsupp=""
for dir in . $skipdirs $noconfigdirs ; do
  dirname=`echo $dir | sed -e s/target-//g`
  if test $dir != .  && echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    configdirs=`echo " ${configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
  if test $dir != . && echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    target_configdirs=`echo " ${target_configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
done

# Sometimes the tools are distributed with libiberty but with no other
# libraries.  In that case, we don't want to build target-libiberty.
if test -n "${target_configdirs}" ; then
  others=
  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do
    if test "$i" != "libiberty" ; then
      if test -r $srcdir/$i/configure ; then
	others=yes;
	break;
      fi
    fi
  done
  if test -z "${others}" ; then
    target_configdirs=
  fi
fi

# Quietly strip out all directories which aren't configurable in this tree.
# This relies on all configurable subdirectories being autoconfiscated, which
# is now the case.
configdirs_all="$configdirs"
configdirs=
for i in ${configdirs_all} ; do
  if test -f ${srcdir}/$i/configure ; then
    configdirs="${configdirs} $i"
  fi
done
target_configdirs_all="$target_configdirs"
target_configdirs=
for i in ${target_configdirs_all} ; do
  j=`echo $i | sed -e s/target-//g` 
  if test -f ${srcdir}/$j/configure ; then
    target_configdirs="${target_configdirs} $i"
  fi
done

# Produce a warning message for the subdirs we can't configure.
# This isn't especially interesting in the Cygnus tree, but in the individual
# FSF releases, it's important to let people know when their machine isn't
# supported by the one or two programs in a package.

if test -n "${notsupp}" && test -z "${norecursion}" ; then
  # If $appdirs is non-empty, at least one of those directories must still
  # be configured, or we error out.  (E.g., if the gas release supports a
  # specified target in some subdirs but not the gas subdir, we shouldn't
  # pretend that all is well.)
  if test -n "$appdirs" ; then
    for dir in $appdirs ; do
      if test -r $dir/Makefile.in ; then
	if echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
	if echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
      fi
    done
    if test -n "$appdirs" ; then
      echo "*** This configuration is not supported by this package." 1>&2
      exit 1
    fi
  fi
  # Okay, some application will build, or we don't care to check.  Still
  # notify of subdirs not getting built.
  echo "*** This configuration is not supported in the following subdirectories:" 1>&2
  echo "    ${notsupp}" 1>&2
  echo "    (Any other directories should still work fine.)" 1>&2
fi

case "$host" in
  *msdosdjgpp*)
    enable_gdbtk=no ;;
esac

copy_dirs=

# Handle --with-headers=XXX.  If the value is not "yes", the contents of
# the named directory are copied to $(tooldir)/sys-include.
if test x"${with_headers}" != x && test x"${with_headers}" != xno ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-headers is only supported when cross compiling
    exit 1
  fi
  if test x"${with_headers}" != xyes ; then
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    copy_dirs="${copy_dirs} ${with_headers} $x/${target_alias}/sys-include"
  fi
fi

# Handle --with-libs=XXX.  If the value is not "yes", the contents of
# the name directories are copied to $(tooldir)/lib.  Multiple directories
# are permitted.
if test x"${with_libs}" != x && test x"${with_libs}" != xno ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-libs is only supported when cross compiling
    exit 1
  fi
  if test x"${with_libs}" != xyes ; then
    # Copy the libraries in reverse order, so that files in the first named
    # library override files in subsequent libraries.
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    for l in ${with_libs}; do
      copy_dirs="$l $x/${target_alias}/lib ${copy_dirs}"
    done
  fi
fi

# Handle ${copy_dirs}
set fnord ${copy_dirs}
shift
while test $# != 0 ; do
  if test -f $2/COPIED && test x"`cat $2/COPIED`" = x"$1" ; then
    :
  else
    echo Copying $1 to $2

    # Use the install script to create the directory and all required
    # parent directories.
    if test -d $2 ; then
      :
    else
      echo >config.temp
      ${srcdir}/install-sh -c -m 644 config.temp $2/COPIED
    fi

    # Copy the directory, assuming we have tar.
    # FIXME: Should we use B in the second tar?  Not all systems support it.
    (cd $1; tar -cf - .) | (cd $2; tar -xpf -)

    # It is the responsibility of the user to correctly adjust all
    # symlinks.  If somebody can figure out how to handle them correctly
    # here, feel free to add the code.

    echo $1 > $2/COPIED
  fi
  shift; shift
done

d1282 19
d1306 251
a1556 6
# Generate default definitions for YACC, M4, LEX.  These are used if the
# Makefile can't locate these programs in objdir.
MISSING=`cd $ac_aux_dir && ${PWDCMD-pwd}`/missing
AC_CHECK_PROGS([DEFAULT_YACC], ['bison -y' byacc yacc], [$MISSING bison])
AC_CHECK_PROGS([DEFAULT_M4], [gm4 gnum4 m4], [$MISSING m4])
AC_CHECK_PROGS([DEFAULT_LEX], [flex lex], [$MISSING flex])
d2050 1
a2155 33

# ---------------------
# GCC bootstrap support
# ---------------------

# Stage specific cflags for build.
stage1_cflags="-g"
case $build in
  vax-*-*)
    case ${GCC} in
      yes) stage1_cflags="-g -Wa,-J" ;;
      *) stage1_cflags="-g -J" ;;
    esac ;;
  powerpc-*-darwin*)
    # The spiffy cpp-precomp chokes on some legitimate constructs in GCC
    # sources; use -no-cpp-precomp to get to GNU cpp.
    # Apple's GCC has bugs in designated initializer handling, so disable
    # that too.
    stage1_cflags="-g -no-cpp-precomp -DHAVE_DESIGNATED_INITIALIZERS=0"
    ;;
esac
AC_SUBST(stage1_cflags)

# Enable -Werror in bootstrap stage2 and later.
# Change the default to "no" on release branches.
AC_ARG_ENABLE(werror,
[  --enable-werror         enable -Werror in bootstrap stage2 and later], [],
[enable_werror=yes])
case ${enable_error} in
  yes) WERROR=-Werror ;;
  *) WERROR= ;;
esac
AC_SUBST(WERROR)
@


1.198
log
@* configure.in (powerpc-*-aix*): Add target-libada to noconfigdirs.
(rs6000-*-aix*): Same.
* configure: Regenerate.
@
text
@d665 3
@


1.198.4.1
log
@	* configure.in (mips*-*-irix5*): Enable ld.
	* configure: Regenerate.
@
text
@d646 2
a647 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
@


1.198.6.1
log
@Merge mainline to intercu branch.
@
text
@a664 3
  mips64*-*-linux*)
    noconfigdirs="$noconfigdirs target-newlib ${libgcj}"
    ;;
d747 267
a1164 480
# If we aren't going to be using gcc, see if we can extract a definition
# of CC from the fragment.
# Actually, use the 'pre-extracted' version above.
if test -z "${CC}" && test "${build}" = "${host}" ; then
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  found=
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/gcc; then
      found=yes
      break
    fi
  done
  IFS="$save_ifs"
  if test -z "${found}" && test -n "${tentative_cc}" ; then
    CC=$tentative_cc
  fi
fi

if test "${build}" != "${host}" ; then
  # If we are doing a Canadian Cross, in which the host and build systems
  # are not the same, we set reasonable default values for the tools.

  BISON=${BISON-bison}
  CC=${CC-${host_alias}-gcc}
  CFLAGS=${CFLAGS-"-g -O2"}
  CXX=${CXX-${host_alias}-c++}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
  CC_FOR_BUILD=${CC_FOR_BUILD-gcc}
  CC_FOR_TARGET=${CC_FOR_TARGET-${target_alias}-gcc}
  CXX_FOR_TARGET=${CXX_FOR_TARGET-${target_alias}-c++}
  GCJ_FOR_TARGET=${GCJ_FOR_TARGET-${target_alias}-gcj}
  GCC_FOR_TARGET=${GCC_FOR_TARGET-${CC_FOR_TARGET-${target_alias}-gcc}}
  BUILD_PREFIX=${build_alias}-
  BUILD_PREFIX_1=${build_alias}-
  MAKEINFO=${MAKEINFO-makeinfo}

  if test -z "${YACC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/bison; then
	YACC="bison -y"
	break
      fi
      if test -f $dir/byacc; then
	YACC=byacc
	break
      fi
      if test -f $dir/yacc; then
	YACC=yacc
	break
      fi
    done
    IFS="$save_ifs"
    if test -z "${YACC}" ; then
      YACC="bison -y"
    fi
  fi

  if test -z "${LEX}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/flex; then
	LEX=flex
	break
      fi
      if test -f $dir/lex; then
	LEX=lex
	break
      fi
    done
    IFS="$save_ifs"
    LEX=${LEX-flex}
  fi

else
  # Set reasonable default values for some tools even if not Canadian.
  # Of course, these are different reasonable default values, originally
  # specified directly in the Makefile.
  # We don't export, so that autoconf can do its job.
  # Note that all these settings are above the fragment inclusion point
  # in Makefile.in, so can still be overridden by fragments.
  # This is all going to change when we autoconfiscate...

  BISON="\$(USUAL_BISON)"
  CC_FOR_BUILD="\$(CC)"
  GCC_FOR_TARGET="\$(USUAL_GCC_FOR_TARGET)"
  BUILD_PREFIX=
  BUILD_PREFIX_1=loser-
  MAKEINFO="\$(USUAL_MAKEINFO)"
  LEX="\$(USUAL_LEX)"
  YACC="\$(USUAL_YACC)"

  # If CC is still not set, try to get gcc.
  cc_prog_is_gcc=
  if test -z "${CC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/gcc; then
	CC="gcc"
	cc_prog_is_gcc=yes
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
	break
      fi
    done
    IFS="$save_ifs"
    CC=${CC-cc}
  else
    # Determine if we are using gcc.
    cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
    if ${CC} -E conftest.c | grep yes >/dev/null 2>&1; then
      cc_prog_is_gcc=yes
    fi
    rm -f conftest.c
    if test -z "${CFLAGS}"; then
      # Here CC is set but CFLAGS is not.  Use a quick hack to use -O2 if CC
      # is set to a version of gcc.
      if test "$cc_prog_is_gcc" = yes; then
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
      fi
    fi
  fi

  # We must set the default linker to the linker used by gcc for the correct
  # operation of libtool.  If LD is not defined and we are using gcc, try to
  # set the LD default to the ld used by gcc.
  if test -z "$LD"; then
    if test "$cc_prog_is_gcc" = yes; then
      case $build in
      *-*-mingw*)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\015'` ;;
      *)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;
      esac
      case $gcc_prog_ld in
      # Accept absolute paths.
      [[\\/]* | [A-Za-z]:[\\/]*)]
        LD="$gcc_prog_ld" ;;
      esac
    fi
  fi

  CXX=${CXX-"c++"}
  CFLAGS=${CFLAGS-"-g"}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
fi

ACX_PROG_GNAT

# By default, C is the only stage 1 language.
stage1_languages=c
AC_SUBST(stage1_languages)

# Figure out what language subdirectories are present.
# Look if the user specified --enable-languages="..."; if not, use
# the environment variable $LANGUAGES if defined. $LANGUAGES might
# go away some day.
# NB:  embedded tabs in this IF block -- do not untabify
if test -d ${srcdir}/gcc; then
  if test x"${enable_languages+set}" != xset; then
    if test x"${LANGUAGES+set}" = xset; then
      enable_languages="${LANGUAGES}"
        echo configure.in: warning: setting LANGUAGES is deprecated, use --enable-languages instead 1>&2
    else
      enable_languages=all
    fi
  else
    if test x"${enable_languages}" = x ||
       test x"${enable_languages}" = xyes;
       then
      echo configure.in: --enable-languages needs at least one language argument 1>&2
      exit 1
    fi
  fi
  enable_languages=`echo "${enable_languages}" | sed -e 's/[[ 	,]][[ 	,]]*/,/g' -e 's/,$//'`

  # First scan to see if an enabled language requires some other language.
  # We assume that a given config-lang.in will list all the language
  # front ends it requires, even if some are required indirectly.
  for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
    case ${lang_frag} in
      ..) ;;
      # The odd quoting in the next line works around
      # an apparent bug in bash 1.12 on linux.
      ${srcdir}/gcc/[[*]]/config-lang.in) ;;
      *)
        # From the config-lang.in, get $language, $lang_requires
        language=
        lang_requires=
        . ${lang_frag}
        for other in ${lang_requires} ; do
          case ,${enable_languages}, in
	    *,$other,*) ;;
	    *,all,*) ;;
	    *,$language,*)
	      echo " \`$other' language required by \`$language'; enabling" 1>&2
	      enable_languages="${enable_languages},${other}"
	      ;;
	  esac
        done
        ;;
    esac
  done

  new_enable_languages=c
  missing_languages=`echo ",$enable_languages," | sed -e s/,all,/,/ -e s/,c,/,/ `

  for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
    case ${lang_frag} in
      ..) ;;
      # The odd quoting in the next line works around
      # an apparent bug in bash 1.12 on linux.
      ${srcdir}/gcc/[[*]]/config-lang.in) ;;
      *)
        # From the config-lang.in, get $language, $target_libs, 
        # $lang_dirs, $boot_language, and $build_by_default
        language=
        target_libs=
        lang_dirs=
        boot_language=
        build_by_default=
        . ${lang_frag}
        # This is quite sensitive to the ordering of the case statement arms.
        case ,${enable_languages},:${language}:${have_gnat}:${build_by_default} in
          *::*:*)
            echo "${lang_frag} doesn't set \$language." 1>&2
            exit 1
	    ;;
          *:ada:no:*)
            # Ada was requested with no preexisting GNAT.  Disable unconditionally.
            add_this_lang=no
            ;;
          *,${language},*:*:*:*)
            # Language was explicitly selected; include it.
            add_this_lang=yes
            ;;
          *,all,*:*:*:no)
            # 'all' was selected, but this is not a default language
	    # so do not include it.
            add_this_lang=no
	    ;;
          *,all,*:*:*:*)
            # 'all' was selected and this is a default language; include it.
            add_this_lang=yes
            ;;
          *)
            add_this_lang=no
            ;;
        esac
        case $add_this_lang in
	  no)
            # Remove language-dependent dirs.
            eval noconfigdirs='"$noconfigdirs "'\"$target_libs $lang_dirs\"
	    ;;
          *)
	    new_enable_languages="$new_enable_languages,$language"
	    missing_languages=`echo "$missing_languages" | sed "s/,$language,/,/"`
	    case ${boot_language} in
	      yes)
		# Add to (comma-separated) list of stage 1 languages.
		stage1_languages="${stage1_languages},${language}"
		;;
	    esac
	    ;;
        esac
        ;;
    esac
  done

  missing_languages=`echo "$missing_languages" | sed -e "s/^,//" -e "s/,$//"`
  if test "x$missing_languages" != x; then
    AC_MSG_ERROR([
The following requested languages were not found: ${missing_languages}])
  fi

  if test "x$new_enable_languages" != "x$enable_languages"; then
    echo The following languages will be built: ${new_enable_languages}
  fi
  enable_languages="$new_enable_languages"
  ac_configure_args=`echo " $ac_configure_args" | sed -e 's/ --enable-languages=[[^ ]]*//' -e 's/$/ --enable-languages='"$enable_languages"/ `
fi

# Remove the entries in $skipdirs and $noconfigdirs from $configdirs and
# $target_configdirs.
# If we have the source for $noconfigdirs entries, add them to $notsupp.

notsupp=""
for dir in . $skipdirs $noconfigdirs ; do
  dirname=`echo $dir | sed -e s/target-//g`
  if test $dir != .  && echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    configdirs=`echo " ${configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
  if test $dir != . && echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    target_configdirs=`echo " ${target_configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
done

# Sometimes the tools are distributed with libiberty but with no other
# libraries.  In that case, we don't want to build target-libiberty.
if test -n "${target_configdirs}" ; then
  others=
  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do
    if test "$i" != "libiberty" ; then
      if test -r $srcdir/$i/configure ; then
	others=yes;
	break;
      fi
    fi
  done
  if test -z "${others}" ; then
    target_configdirs=
  fi
fi

# Quietly strip out all directories which aren't configurable in this tree.
# This relies on all configurable subdirectories being autoconfiscated, which
# is now the case.
configdirs_all="$configdirs"
configdirs=
for i in ${configdirs_all} ; do
  if test -f ${srcdir}/$i/configure ; then
    configdirs="${configdirs} $i"
  fi
done
target_configdirs_all="$target_configdirs"
target_configdirs=
for i in ${target_configdirs_all} ; do
  j=`echo $i | sed -e s/target-//g` 
  if test -f ${srcdir}/$j/configure ; then
    target_configdirs="${target_configdirs} $i"
  fi
done

# Produce a warning message for the subdirs we can't configure.
# This isn't especially interesting in the Cygnus tree, but in the individual
# FSF releases, it's important to let people know when their machine isn't
# supported by the one or two programs in a package.

if test -n "${notsupp}" && test -z "${norecursion}" ; then
  # If $appdirs is non-empty, at least one of those directories must still
  # be configured, or we error out.  (E.g., if the gas release supports a
  # specified target in some subdirs but not the gas subdir, we shouldn't
  # pretend that all is well.)
  if test -n "$appdirs" ; then
    for dir in $appdirs ; do
      if test -r $dir/Makefile.in ; then
	if echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
	if echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
      fi
    done
    if test -n "$appdirs" ; then
      echo "*** This configuration is not supported by this package." 1>&2
      exit 1
    fi
  fi
  # Okay, some application will build, or we don't care to check.  Still
  # notify of subdirs not getting built.
  echo "*** This configuration is not supported in the following subdirectories:" 1>&2
  echo "    ${notsupp}" 1>&2
  echo "    (Any other directories should still work fine.)" 1>&2
fi

case "$host" in
  *msdosdjgpp*)
    enable_gdbtk=no ;;
esac

copy_dirs=

# Handle --with-headers=XXX.  If the value is not "yes", the contents of
# the named directory are copied to $(tooldir)/sys-include.
if test x"${with_headers}" != x && test x"${with_headers}" != xno ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-headers is only supported when cross compiling
    exit 1
  fi
  if test x"${with_headers}" != xyes ; then
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    copy_dirs="${copy_dirs} ${with_headers} $x/${target_alias}/sys-include"
  fi
fi

# Handle --with-libs=XXX.  If the value is not "yes", the contents of
# the name directories are copied to $(tooldir)/lib.  Multiple directories
# are permitted.
if test x"${with_libs}" != x && test x"${with_libs}" != xno ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-libs is only supported when cross compiling
    exit 1
  fi
  if test x"${with_libs}" != xyes ; then
    # Copy the libraries in reverse order, so that files in the first named
    # library override files in subsequent libraries.
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    for l in ${with_libs}; do
      copy_dirs="$l $x/${target_alias}/lib ${copy_dirs}"
    done
  fi
fi

# Handle ${copy_dirs}
set fnord ${copy_dirs}
shift
while test $# != 0 ; do
  if test -f $2/COPIED && test x"`cat $2/COPIED`" = x"$1" ; then
    :
  else
    echo Copying $1 to $2

    # Use the install script to create the directory and all required
    # parent directories.
    if test -d $2 ; then
      :
    else
      echo >config.temp
      ${srcdir}/install-sh -c -m 644 config.temp $2/COPIED
    fi

    # Copy the directory, assuming we have tar.
    # FIXME: Should we use B in the second tar?  Not all systems support it.
    (cd $1; tar -cf - .) | (cd $2; tar -xpf -)

    # It is the responsibility of the user to correctly adjust all
    # symlinks.  If somebody can figure out how to handle them correctly
    # here, feel free to add the code.

    echo $1 > $2/COPIED
  fi
  shift; shift
done

d1279 19
d1303 251
a1553 6
# Generate default definitions for YACC, M4, LEX.  These are used if the
# Makefile can't locate these programs in objdir.
MISSING=`cd $ac_aux_dir && ${PWDCMD-pwd}`/missing
AC_CHECK_PROGS([DEFAULT_YACC], ['bison -y' byacc yacc], [$MISSING bison])
AC_CHECK_PROGS([DEFAULT_M4], [gm4 gnum4 m4], [$MISSING m4])
AC_CHECK_PROGS([DEFAULT_LEX], [flex lex], [$MISSING flex])
d2047 1
a2152 33

# ---------------------
# GCC bootstrap support
# ---------------------

# Stage specific cflags for build.
stage1_cflags="-g"
case $build in
  vax-*-*)
    case ${GCC} in
      yes) stage1_cflags="-g -Wa,-J" ;;
      *) stage1_cflags="-g -J" ;;
    esac ;;
  powerpc-*-darwin*)
    # The spiffy cpp-precomp chokes on some legitimate constructs in GCC
    # sources; use -no-cpp-precomp to get to GNU cpp.
    # Apple's GCC has bugs in designated initializer handling, so disable
    # that too.
    stage1_cflags="-g -no-cpp-precomp -DHAVE_DESIGNATED_INITIALIZERS=0"
    ;;
esac
AC_SUBST(stage1_cflags)

# Enable -Werror in bootstrap stage2 and later.
# Change the default to "no" on release branches.
AC_ARG_ENABLE(werror,
[  --enable-werror         enable -Werror in bootstrap stage2 and later], [],
[enable_werror=yes])
case ${enable_werror} in
  yes) stage2_werror_flag="--enable-werror-always" ;;
  *) stage2_werror_flag="" ;;
esac
AC_SUBST(stage2_werror_flag)
@


1.198.6.2
log
@Merge mainline to intercu branch - 2004-09-15
@
text
@a20 2
sinclude(config/acx.m4)

d28 2
a29 2
ACX_PROG_LN
AC_PROG_LN_S
a126 8
# these library is used by various programs built for the build
# environment
#
build_libs="build-libiberty"

# these tools are built for the build environment
build_tools="build-texinfo build-byacc build-flex build-bison build-m4 build-fixincludes"

d129 1
a129 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl libgui zlib libcpp"
d152 1
a152 2
		target-libmudflap \
		target-libgfortran \
d173 1
d176 10
a185 1
build_configdirs=`echo ${build_libs} ${build_tools}`
d230 1
a230 1
    skipdirs="${skipdirs} tk itcl libgui"
d281 1
a281 1
    noconfigdirs="$noconfigdirs tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl itcl gnuserv gettext"
d284 1
a284 1
    noconfigdirs="$noconfigdirs tcl tk expect dejagnu send-pr uudecode guile itcl gnuserv libffi"
d287 1
a287 1
    # noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl itcl gnuserv"
d291 1
a291 1
    noconfigdirs="$noconfigdirs tk itcl libgui gdb"
d300 1
a300 1
    noconfigdirs="$noconfigdirs patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl gnuserv"
d303 1
a303 1
    noconfigdirs="$noconfigdirs tk itcl libgui gdb dejagnu readline"
d306 1
a306 1
    noconfigdirs="$noconfigdirs tk itcl libgui"
a309 1

a333 24

# Allow --disable-libmudflap to exclude target-libmudflap
case $enable_libmudflap in
yes)
    ;;
no)
    noconfigdirs="$noconfigdirs target-libmudflap"
    ;;
"")
    case "${target}" in
    *-*-linux*-gnu | *-*-gnu* | *-*-k*bsd*-gnu)
        # Enable libmudflap by default in GNU and friends.
	;;
    *-*-freebsd*)
        # Enable libmudflap by default in FreeBSD.
	;;
    *)
        # Disable it by default everywhere else.
	noconfigdirs="$noconfigdirs target-libmudflap"
	;;
    esac
esac


a348 16
  *-*-freebsd*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    if test "x$with_gmp" = x && test "x$with_gmp_dir" = x \
	&& test -f /usr/local/include/gmp.h; then
      with_gmp=/usr/local
    fi

    # Skip some stuff that's unsupported on some FreeBSD configurations.
    case "${target}" in
      i*86-*-*) ;;
      alpha*-*-*) ;;
      *)
	noconfigdirs="$noconfigdirs ${libgcj}"
	;;
    esac
    ;;
d351 1
a351 1
    skipdirs="target-libiberty ${libgcj} target-libstdc++-v3 target-librx"
d369 2
a370 2
  *-*-netware*)
    noconfigdirs="$noconfigdirs target-newlib target-libiberty target-libgloss ${libgcj} target-libmudflap"
d374 6
d400 3
d417 1
a417 1
    noconfigdirs="$noconfigdirs tcl tk itcl libgui sim"
d434 1
a434 1
  arm-*-elf* | strongarm-*-elf* | xscale-*-elf* | arm*-*-eabi* )
a436 3
  arm*-*-symbianelf*)
    noconfigdirs="$noconfigdirs ${libgcj} target-libiberty"
    ;;
a469 3
  crx-*-*)
    noconfigdirs="$noconfigdirs target-libgloss target-libstdc++-v3 target-mudflap ${libgcj}"
    ;;
d483 1
a483 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d486 1
a486 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d512 1
a512 1
    noconfigdirs="$noconfigdirs readline mmalloc libgui itcl gdb"
d516 1
a516 1
    noconfigdirs="$noconfigdirs ${libgcj} readline mmalloc libgui itcl gdb ld"
d521 3
d550 1
a550 1
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl gnuserv"
d557 2
a558 7
    # always build newlib if winsup directory is present.
    if test -d "$srcdir/winsup"
    then
      skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'`
    else
      echo "Warning: winsup is missing so newlib can't be built."
    fi
d563 1
a563 1
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl libgui gnuserv"
d615 1
a615 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d619 1
a619 1
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl gnuserv ${libgcj}"
d625 1
a625 1
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl gnuserv ${libgcj}"
d637 1
a637 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d646 2
a647 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d732 1
a732 1
  *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
a890 3
  powerpc-*-darwin*)
    host_makefile_frag="config/mh-ppc-darwin"
    ;;
d924 1
d936 41
d987 1
d992 54
a1045 2

  AC_PROG_CC
d1051 1
a1051 1
    if test "$GCC" = yes; then
a1071 72
ACX_PROG_CMP_IGNORE_INITIAL

# Check for GMP and MPFR
gmplibs=
gmpinc=
have_gmp=yes
# Specify a location for mpfr
# check for this first so it ends up on the link line before gmp.
AC_ARG_WITH(mpfr-dir, [  --with-mpfr-dir=PATH    Specify source directory for MPFR library])

if test "x$with_mpfr_dir" != x; then
  gmpinc="-I$with_mpfr_dir/mpfr"
  gmplibs="$with_mpfr_dir/libmpfr.a"
else
  gmplibs="-lmpfr"
fi

AC_ARG_WITH(mpfr, [  --with-mpfr=PATH        Specify directory for installed MPFR library])

if test "x$with_mpfr" != x; then
  gmplibs="-L$with_mpfr/lib $gmplibs"
  gmpinc="-I$with_mpfr/include"
fi

# Specify a location for gmp
AC_ARG_WITH(gmp-dir, [  --with-gmp-dir=PATH     Specify source directory for GMP library])

if test "x$with_gmp_dir" != x; then
  gmpinc="$gmpinc -I$with_gmp_dir"
  if test -f "$with_gmp_dir/.libs/libgmp.a"; then
    gmplibs="$gmplibs $with_gmp_dir/.libs/libgmp.a"
  elif test -f "$with_gmp_dir/_libs/libgmp.a"; then
    gmplibs="$gmplibs $with_gmp_dir/_libs/libgmp.a"
  fi
  # One of the later tests will catch the error if neither library is present.
else
  gmplibs="$gmplibs -lgmp"
fi

AC_ARG_WITH(gmp, [  --with-gmp=PATH         Specify directory for installed GMP library])

if test "x$with_gmp" != x; then
  gmplibs="-L$with_gmp/lib $gmplibs"
  gmpinc="-I$with_gmp/include $gmpinc"
fi

saved_CFLAGS="$CFLAGS"
CFLAGS="$CFLAGS $gmpinc"
# Check GMP actually works
AC_MSG_CHECKING([for correct version of gmp.h])
AC_TRY_COMPILE([#include "gmp.h"],[
#if __GNU_MP_VERSION < 3
choke me
#endif
], [AC_MSG_RESULT([yes])],
  [AC_MSG_RESULT([no]); have_gmp=no])

if test x"$have_gmp" = xyes; then
  AC_MSG_CHECKING([for MPFR])

  saved_LIBS="$LIBS"
  LIBS="$LIBS $gmplibs"
  AC_TRY_LINK([#include <gmp.h>
#include <mpfr.h>], [mpfr_t n; mpfr_init(n);],
    [AC_MSG_RESULT([yes])],  [AC_MSG_RESULT([no]); have_gmp=no])
  LIBS="$saved_LIBS"
  CFLAGS="$saved_CFLAGS"
fi

# Flags needed for both GMP and/or MPFR
AC_SUBST(gmplibs)
AC_SUBST(gmpinc)
a1129 1
  potential_languages=c
a1144 1
        need_gmp=
a1145 1
        potential_languages="${potential_languages},${language}"
d1151 1
a1151 1
            ;;
d1162 1
a1162 1
            # so do not include it.
d1164 1
a1164 1
            ;;
d1173 1
a1173 14

        # Disable languages that need GMP if it isn't available.
        case ,${enable_languages},:${have_gmp}:${need_gmp} in
          *,${language},*:no:yes)
            # Specifically requested language; tell them.
            AC_MSG_ERROR([GMP with MPFR support is required to build $language])
            ;;
          *:no:yes)
            # Silently disable.
            add_this_lang=no
            ;;
        esac
        
	case $add_this_lang in
d1196 1
a1196 2
The following requested languages were not found: ${missing_languages}
The available languages are: ${potential_languages}])
a1254 9
build_configdirs_all="$build_configdirs"
build_configdirs=
for i in ${build_configdirs_all} ; do
  j=`echo $i | sed -e s/build-//g` 
  if test -f ${srcdir}/$j/configure ; then
    build_configdirs="${build_configdirs} $i"
  fi
done

a1261 1

d1288 1
a1288 1
	if echo " ${target_configdirs} " | grep " target-${dir} " >/dev/null 2>&1; then
d1386 1
a1386 1
  *-*-netware*)
d1389 5
a1393 2
  *-*-linux* | *-*-gnu* | *-*-k*bsd*-gnu)
    target_makefile_frag="config/mt-gnu"
d1474 1
d1500 2
a1501 3
# Generate default definitions for YACC, M4, LEX and other programs that run
# on the build machine.  These are used if the Makefile can't locate these
# programs in objdir.
d1503 3
a1505 6
AC_CHECK_PROGS([CONFIGURED_BISON], [bison], [$MISSING bison])
AC_CHECK_PROGS([CONFIGURED_YACC], ['bison -y' byacc yacc], [$MISSING bison -y])
AC_CHECK_PROGS([CONFIGURED_M4], [gm4 gnum4 m4], [$MISSING m4])
AC_CHECK_PROGS([CONFIGURED_FLEX], [flex], [$MISSING flex])
AC_CHECK_PROGS([CONFIGURED_LEX], [flex lex], [$MISSING flex])
AC_CHECK_PROGS([CONFIGURED_MAKEINFO], makeinfo, [$MISSING makeinfo])
d1588 11
a1598 1
build_configdirs=`echo "${build_configdirs}" | sed -e 's/build-//g'`
d1608 1
a1608 1
gdb_tk="maybe-all-tcl maybe-all-tk maybe-all-itcl maybe-all-libgui"
d1626 1
a1626 1
# Strip out unwanted targets.
d1631 2
d1634 3
a1636 19
# Loop over modules.  $extrasub must be used with care, limiting as
# much as possible the usage of range addresses.  That's because autoconf
# splits the sed script to overcome limits in the number of commands,
# and relying on carefully-timed sed passes may turn out to be very hard
# to maintain later.  In this particular case, you just have to be careful
# not to nest @@if/@@endif pairs, because configure will not warn you at all.

AC_ARG_ENABLE([bootstrap],
[  --enable-bootstrap[=lean]     Enable bootstrapping [no]],,
enable_bootstrap=default)

# Issue errors and warnings for invalid/strange bootstrap combinations.
case "$configdirs" in
  *gcc*) have_compiler=yes ;;
  *) have_compiler=no ;;
esac

case "$have_compiler:$host:$target:$enable_bootstrap" in
  *:*:*:no) ;;
d1638 2
a1639 47
  # Default behavior.  (We'll) enable bootstrap if we have a compiler
  # and we are in a native configuration.
  yes:$build:$build:default)
    # This will become 'yes'
    enable_bootstrap=no ;;

  *:*:*:default)
    enable_bootstrap=no ;;

  # We have a compiler and we are in a native configuration, bootstrap is ok
  yes:$build:$build:yes | yes:$build:$build:lean)
    ;;

  # Other configurations, but we have a compiler.  Assume the user knows
  # what he's doing.
  yes:*:*:yes | yes:*:*:lean)
    AC_MSG_WARN([trying to bootstrap a cross compiler])
    ;;

  # No compiler: if they passed --enable-bootstrap explicitly, fail
  no:*:*:yes | no:*:*:lean)
    AC_MSG_ERROR([cannot bootstrap without a compiler]) ;;

  # Fail if wrong command line
  *)
    AC_MSG_ERROR([invalid option for --enable-bootstrap])
    ;;
esac

# Adjust the toplevel makefile according to whether bootstrap was selected.
case "$enable_bootstrap" in
  yes)
    bootstrap_lean='#'
    default_target=bootstrap
    bootstrap_suffix=bootstrap ;;
  lean)
    bootstrap_lean=''
    default_target=bootstrap
    bootstrap_suffix=bootstrap ;;
  no)
    default_target=all
    bootstrap_suffix=no-bootstrap ;;
esac
AC_SUBST(bootstrap_lean)
AC_SUBST(default_target)

for module in ${build_configdirs} ; do
d1645 6
a1650 5
  extrasub="$extrasub
/^@@if build-$module\$/d
/^@@endif build-$module\$/d
/^@@if build-$module-$bootstrap_suffix\$/d
/^@@endif build-$module-$bootstrap_suffix\$/d"
d1658 3
a1660 5
  extrasub="$extrasub
/^@@if $module\$/d
/^@@endif $module\$/d
/^@@if $module-$bootstrap_suffix\$/d
/^@@endif $module-$bootstrap_suffix\$/d"
d1668 3
a1670 5
  extrasub="$extrasub
/^@@if target-$module\$/d
/^@@endif target-$module\$/d
/^@@if target-$module-$bootstrap_suffix\$/d
/^@@endif target-$module-$bootstrap_suffix\$/d"
d1672 2
a1673 3

extrasub="$extrasub
/^@@if /,/^@@endif /d"
d1736 15
a1750 15
s/ --no[[^ ]]*/ /g
s/ --c[[a-z-]]*[[= ]][[^ ]]*//g
s/ --sr[[a-z-]]*[[= ]][[^ ]]*//g
s/ --ho[[a-z-]]*[[= ]][[^ ]]*//g
s/ --bu[[a-z-]]*[[= ]][[^ ]]*//g
s/ --t[[a-z-]]*[[= ]][[^ ]]*//g
s/ --program-[[pst]][[a-z-]]*[[= ]][[^ ]]*//g
s/ -cache-file[[= ]][[^ ]]*//g
s/ -srcdir[[= ]][[^ ]]*//g
s/ -host[[= ]][[^ ]]*//g
s/ -build[[= ]][[^ ]]*//g
s/ -target[[= ]][[^ ]]*//g
s/ -program-prefix[[= ]][[^ ]]*//g
s/ -program-suffix[[= ]][[^ ]]*//g
s/ -program-transform-name[[= ]][[^ ]]*//g
a1937 14
if test "x${GFORTRAN_FOR_TARGET+set}" = xset; then
  :
elif test -d ${srcdir}/gcc; then
  GFORTRAN_FOR_TARGET='$$r/gcc/gfortran -B$$r/gcc/'
elif test "$host" = "$target"; then
  GFORTRAN_FOR_TARGET='gfortran'
else
  GFORTRAN_FOR_TARGET=`echo gfortran | sed "${program_transform_name}"`
fi
case $GFORTRAN_FOR_TARGET in
*' $(FLAGS_FOR_TARGET)') ;;
*) GFORTRAN_FOR_TARGET=$GFORTRAN_FOR_TARGET' $(FLAGS_FOR_TARGET)' ;;
esac

a1978 1
GFORTRAN_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${GFORTRAN_FOR_TARGET}"
d1985 4
a1988 7
for frag in host_makefile_frag target_makefile_frag alphaieee_frag ospace_frag;
do
  eval fragval=\$$frag
  if test $fragval != /dev/null; then
    eval $frag=${srcdir}/$fragval
  fi
done
d2009 2
a2010 1
AC_SUBST(build_configdirs)
d2021 1
d2023 3
d2043 3
d2048 7
a2054 7
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_AR_FOR_TARGET, ar)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_AS_FOR_TARGET, as)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_DLLTOOL_FOR_TARGET, dlltool)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_LD_FOR_TARGET, ld)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_NM_FOR_TARGET, nm)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_RANLIB_FOR_TARGET, ranlib, :)
NCN_STRICT_CHECK_TARGET_TOOL(CONFIGURED_WINDRES_FOR_TARGET, windres)
a2059 1
AC_SUBST(GFORTRAN_FOR_TARGET)
d2080 1
a2080 18
else
  # Just use the ones we found.
  AR_FOR_TARGET="\$(CONFIGURED_AR_FOR_TARGET)"
  AS_FOR_TARGET="\$(CONFIGURED_AS_FOR_TARGET)"
  DLLTOOL_FOR_TARGET="\$(CONFIGURED_DLLTOOL_FOR_TARGET)"
  LD_FOR_TARGET="\$(CONFIGURED_LD_FOR_TARGET)"
  NM_FOR_TARGET="\$(CONFIGURED_NM_FOR_TARGET)"
  RANLIB_FOR_TARGET="\$(CONFIGURED_RANLIB_FOR_TARGET)"
  WINDRES_FOR_TARGET="\$(CONFIGURED_WINDRES_FOR_TARGET)"  
fi
AC_SUBST(AR_FOR_TARGET)
AC_SUBST(AS_FOR_TARGET)
AC_SUBST(DLLTOOL_FOR_TARGET)
AC_SUBST(LD_FOR_TARGET)
AC_SUBST(NM_FOR_TARGET)
AC_SUBST(RANLIB_FOR_TARGET)
AC_SUBST(WINDRES_FOR_TARGET)

a2126 30
# It makes debugging easier if we create as symlinks the stage directories
# gcc for stageN-gcc and stagePREV-gcc for stage(N-1).  In case this is not
# possible, however, we can resort to mv.
AC_CACHE_CHECK([if symbolic links between directories work],
[gcc_cv_prog_ln_s_dir],
[if test "${LN_S}" = "ln -s" \
   && mkdir confdir.s1 \
   && ln -s confdir.s1 confdir.s2 \
   && echo timestamp1 > confdir.s1/conftest.1 \
   && cmp confdir.s1/conftest.1 confdir.s2/conftest.1 \
   && echo timestamp2 > confdir.s2/conftest.2 \
   && cmp confdir.s1/conftest.2 confdir.s1/conftest.2 \
   && rm -f confdir.s2; then
  gcc_cv_prog_ln_s_dir=yes
else
  gcc_cv_prog_ln_s_dir=yes
fi
rm -rf confdir.s1 confdir.s2])

case ${gcc_cv_prog_ln_s_dir} in
  yes)
    CREATE_LINK_TO_DIR='ln -s $$1 $$2'
    UNDO_LINK_TO_DIR='rm -f $$1' ;;
  *)
    CREATE_LINK_TO_DIR='mv $$1 $$2'
    UNDO_LINK_TO_DIR='mv $$1 $$2' ;;
esac
AC_SUBST(CREATE_LINK_TO_DIR)
AC_SUBST(UNDO_LINK_TO_DIR)

@


1.197
log
@* configure.in (host): Add in missing $noconfigdirs to defines.
* configure: Regenerate.
@
text
@d615 1
a615 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d637 1
a637 1
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
@


1.196
log
@2004-02-10  Arnaud Charlet  <charlet@@act-europe.fr>,
	    Nathanael Nerode  <neroden@@gcc.gnu.org>
PR ada/6637, PR ada/5911
Merge with libada-branch:
* configure.in, Makefile.tpl, Makefile.def: Add target-libada,
with appropriate dependencies. Add --enable-libada configure switch.
* configure, Makefile.in: Regenerate.
@
text
@d281 1
a281 1
    noconfigdirs="tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl itcl tix gnuserv gettext"
d284 1
a284 1
    noconfigdirs="tcl tk expect dejagnu send-pr uudecode guile itcl tix gnuserv libffi"
d288 1
a288 1
    noconfigdirs="expect dejagnu autoconf automake send-pr rcs guile perl texinfo libtool"
d294 1
a294 1
    noconfigdirs="autoconf automake send-pr rcs guile perl"
d297 1
a297 1
    noconfigdirs="rcs"
d300 1
a300 1
    noconfigdirs="patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl tix gnuserv"
@


1.195
log
@2004-02-05  Rainer Orth  <ro@@TechFak.Uni-Bielefeld.DE>
* configure.in: Don't pass --with-stabs on IRIX 5 either.
* configure: Regenerate.
@
text
@d154 2
a155 1
		target-libobjc"
d309 8
@


1.194
log
@	* configure.in: Use ./config.cache, not config.cache.
	* configure: Regenerate.
	* Makefile.tpl: Special-casing not needed for GCC any more.
	* Makefile.in: Regenerate.
@
text
@d2 1
a2 1
#   1999, 2000, 2001, 2002, 2003 Free Software Foundation, Inc.
d1253 1
a1253 1
  mips*-*-irix6*)
@


1.193
log
@	* configure.in: Don't share a cache file for host dirs.
	* configure: Regenerate.
@
text
@d1831 1
a1831 1
host_configargs="--cache-file=config.cache --build=${build_alias} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"
d1865 1
a1865 1
target_configargs="--cache-file=config.cache --host=${target_alias} --build=${build_alias} ${target_configargs}"
@


1.192
log
@	PR bootstrap/11932, PR bootstrap/11933
	(I don't know if it will fix either of them, but it relates
	to them.)
	* configure.in: Don't use shared config.cache for target
	directories.
	* configure: Regenerate.
@
text
@d1829 3
a1831 1
host_configargs="${cache_file_option} --build=${build_alias} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"
@


1.191
log
@* configure.in (ia64*-*-hpux*): Disable building java libraries.
* configure: Regenerated.
@
text
@d1853 9
d1863 1
a1863 1
target_configargs="--cache-file=../config.cache --host=${target_alias} --build=${build_alias} ${target_configargs}"
@


1.190
log
@* configure.in (*-*-uclinux): Exclude newlib, libgloss and rda.
* configure: Regenerated.
@
text
@d507 1
a507 1
    noconfigdirs="$noconfigdirs tix readline mmalloc libgui itcl gdb ld"
@


1.189
log
@2003-12-08  Thomas Fitzsimmons  <fitzsim@@redhat.com>

	* configure.in (raw_libstdcxx_flags): Remove the leading space.
	* configure: Regenerate.
@
text
@d372 3
@


1.188
log
@* configure.in (*-*-vxworks):  Add target-libiberty to noconfdirs.
* configure:  Regenerate.
@
text
@d1965 1
a1965 1
raw_libstdcxx_flags=' -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
@


1.187
log
@2003-10-05  Mohan Embar  <gnustuff@@thisiscool.com>
* configure.in: Allow explicit specification of CFLAGS_FOR_BUILD.
* configure: Rebuilt
* Makefile.tpl: Use CFLAGS_FOR_BUILD computed by configure
* Makefile.in: Rebuilt
@
text
@d373 1
a373 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
@


1.186
log
@	* configure.in: Pass a computed --program-transform-name
	to subconfigures.
	* configure: Regenerated.
@
text
@d1922 4
d2067 1
@


1.185
log
@	* configure.in (TOPLEVEL_CONFIGURE_ARGUMENTS, baseargs): Fix
	quoting.
	* configure: Regenerated.
@
text
@d1763 8
a1770 1
# down to subconfigures.  These will be expanded by make, so quote '$'.
d1778 1
d1784 3
d1796 14
@


1.184
log
@Match GNU/KFreeBSD with new kfreebsd*-gnu triplet.
@
text
@d70 4
a73 5
# will be expanded once by make, and once by the shell, so they need to
# have '$' quoted for make, and then each argument quoted for the shell.
# What's more, the 'echo' below might expand backslashes.
cat <<\EOF_SED > conftestsed
s,\\,\\\\,g; s,\$,$$,g
d75 2
a76 7
tmp="'$progname'"
for ac_arg
do
  tmp="$tmp '"`echo "$ac_arg" | sed -f conftestsed`
done
rm -f conftestsed
TOPLEVEL_CONFIGURE_ARGUMENTS="$tmp"
d1763 1
a1763 1
# down to subconfigures.
d1778 4
a1781 1
s,\\,\\\\,g; s,\$,$$,g
d1783 2
a1784 2
baseargs=`echo " ${ac_configure_args} " | sed -f conftestsed`
rm -f conftestsed
@


1.183
log
@* configure.in: Ensure arguments to sed are properly spaced.
* configure: Regenerate.
@
text
@d394 1
a394 1
  alpha*-*-freebsd*)
d515 1
a515 1
  i[[3456789]]86-*-freebsd*)
@


1.182
log
@	* configure.in: Set RAW_CXX_FOR_TARGET if unset.
	* configure: Regenerated.
@
text
@d79 1
a79 1
  tmp="$tmp '"`echo "$ac_arg" | sed -fconftestsed`
d1786 1
a1786 1
baseargs=`echo " ${ac_configure_args} " | sed -fconftestsed`
@


1.181
log
@Merge bugfix from GCC:

2003-08-23  Phil Edwards  <pme@@gcc.gnu.org>

	* configure.in:  Use newline instead of semicolon when assuming
	shell arguments in a for loop.
	* configure:  Regenerated.
@
text
@d1942 3
a1944 1
  :
@


1.180
log
@Merge configure.in, configure with GCC.
@
text
@d77 2
a78 1
for ac_arg ; do
@


1.179
log
@	* configure.in: Disable libgcj for darwin not on powerpc.
	* configure: Rebuild.
@
text
@d69 13
a81 2
# Export original configure arguments for use by sub-configures.
TOPLEVEL_CONFIGURE_ARGUMENTS="$progname $@@"
d256 2
a257 1
if test x"${with_headers}" != x && test x"${with_libs}" != x ; then
d941 1
a941 1
if test x"${with_headers}" != x ; then
d958 1
a958 1
if test x"${with_libs}" != x ; then
d1769 18
a1786 14
baseargs=`echo " ${ac_configure_args} " | \
	sed -e 's/ --no[[^ ]]* / /' \
	    -e 's/ --c[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ --sr[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ --ho[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ --bu[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ --t[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ -cache-file[[= ]][[^ ]]* / /' \
	    -e 's/ -srcdir[[= ]][[^ ]]* / /' \
	    -e 's/ -host[[= ]][[^ ]]* / /' \
	    -e 's/ -build[[= ]][[^ ]]* / /' \
	    -e 's/ -target[[= ]][[^ ]]* / /' \
	    -e "s/ [[^' -][^ ]*] / /" \
	    -e 's/^ *//;s/ *$//'`
@


1.178
log
@2003-08-01  Andrew Cagney  <cagney@@redhat.com>

	* configure.in (noconfigdirs): Do not add GDB when m32r-*-*.
	* configure: Ditto.
@
text
@d322 4
d328 1
a328 1
    noconfigdirs="$noconfigdirs target-libobjc"
@


1.177
log
@* configure.in: Enable libgcj for darwin.
* configure: Rebuild.
@
text
@d565 1
a565 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
@


1.176
log
@	* Makefile.tpl: Use 'mkinstalldirs' rather than 'mkdir' when
	creating target and build subdirs to build all parent dirs as needed.
	* Makefile.in: Rebuild.
	* configure.in: Don't build dirs explicitly here.
	* configure: Rebuild.
@
text
@d324 1
a324 1
    noconfigdirs="$noconfigdirs target-libobjc ${libgcj}"
@


1.175
log
@	* Makefile.tpl: Set INSTALL and friends using autoconf.  Remove
	unused INSTALL_PROGRAM_ARGS.
	* configure.in: Use AC_PROG_INSTALL.
	* Makefile.in: Regenerate.
	* configure: Regenerate.
@
text
@d195 1
a195 1
# Find the build and target subdirs.
a196 18

if test ! -d ${target_subdir} ; then
  if mkdir ${target_subdir} ; then true
  else
    echo "'*** could not make ${PWD=`${PWDCMD-pwd}`}/${target_subdir}" 1>&2
    exit 1
  fi
fi

if test x"${build_alias}" != x"${host}" ; then
  if test ! -d ${build_subdir} ; then
    if mkdir ${build_subdir} ; then true
    else
      echo "'*** could not make ${PWD=`${PWDCMD-pwd}`}/${build_subdir}" 1>&2
      exit 1
    fi
  fi
fi
@


1.174
log
@* configure: Rebuilt.
2001-09-26  Alexandre Oliva  <aoliva@@redhat.com>
* configure.in (noconfigdirs) [am33_2.0-*-linux*]: Don't build
newlib nor libgloss.
Wed May  9 10:07:19 2001  Alexandre Oliva  <aoliva@@redhat.com>
* configure.in (am33_2.0-*-linux*): Added.
@
text
@d26 3
@


1.173
log
@        * configure.in: Add ${libgcj} to noconfigdirs for xtensa-*-* targets.
        * configure: Regenerate.
@
text
@d399 3
@


1.172
log
@	* configure.in: Clean up config-lang.in handling.  Delete
	useless assignment to "subdirs".
	* configure: Regenerate.
@
text
@d712 3
@


1.171
log
@	* configure.in: Rename 'target_libs' to 'target_libraries'.
	Remove useless reference to 'target_libs'.
	* configure: Regenerate.
@
text
@d758 2
a759 3
for lang in ${srcdir}/gcc/*/config-lang.in ..
do
  case $lang in
d765 5
a769 4
      lang_alias=`sed -n -e 's,^language=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^language=\([[^ 	]]*\).*$,\1,p' $lang`
      this_lang_requires=`sed -n -e 's,^lang_requires=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^lang_requires=\([[^ 	]]*\).*$,\1,p' $lang`
      for other in $this_lang_requires
      do
d773 3
a775 3
	  *,$lang_alias,*)
	    echo " \`$other' language required by \`$lang_alias'; enabling" 1>&2
	    enable_languages="$enable_languages,$other"
d783 2
a784 4
subdirs=
for lang in ${srcdir}/gcc/*/config-lang.in ..
do
  case $lang in
d790 9
a798 7
      lang_alias=`sed -n -e 's,^language=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^language=\([[^ 	]]*\).*$,\1,p' $lang`
      this_lang_libs=`sed -n -e 's,^target_libs=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^target_libs=\([[^ 	]]*\).*$,\1,p' $lang`
      this_lang_dirs=`sed -n -e 's,^lang_dirs=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^lang_dirs=\([[^ 	]]*\).*$,\1,p' $lang`
      build_by_default=`sed -n -e 's,^build_by_default=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^build_by_default=\([[^ 	]]*\).*$,\1,p' $lang`
      if test "x$lang_alias" = x
         then
        echo "$lang doesn't set \$language." 1>&2
d801 12
a812 4
      case ${build_by_default},${enable_languages}, in
        *,$lang_alias,*) add_this_lang=yes ;;
        no,*) add_this_lang=no ;;
        *,all,*) add_this_lang=yes ;;
d815 6
a820 5
      if test x"${add_this_lang}" = xyes; then
        :
      else
        eval noconfigdirs='"$noconfigdirs "'\"$this_lang_libs $this_lang_dirs\"
      fi
@


1.170
log
@	* configure.in (noconfigdirs) <cris-*-*>: Disable target-newlib
	and target-libgloss.
	<d30v-*-*, fr30-*-*, i960-*-*, m32r-*-*>: Disable gdb.
	<h8300*-*-*>: Disable libf2c and ${libgcj}.
@
text
@d139 1
a139 1
target_libs="target-libiberty \
d147 2
a148 2
# these tools are built using the target libs, and are intended to run only
# in the target environment
d150 1
a150 1
# note: any program that *uses* libraries that are in the "target_libs"
d165 1
a165 1
target_configdirs=`echo ${target_libs} ${target_tools}`
d808 1
a808 1
        eval target_libs='"$target_libs "'\"$this_lang_libs\"
@


1.169
log
@* configure.in: Update testsuite_flags to new location.
* configure. Regenerate.
@
text
@d457 1
a457 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d463 1
a463 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d466 1
a466 1
    noconfigdirs="$noconfigdirs ${libgcj}"
d472 1
a472 1
    noconfigdirs="$noconfigdirs target-libgloss"
d496 3
d575 3
@


1.168
log
@Merge these:
2003-06-11  Rainer Orth  <ro@@TechFak.Uni-Bielefeld.DE>

	* configure.in: Don't pass --with-stabs for mips*-sgi-irix6*o32.
	* configure. Regenerate.

2003-06-10  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* configure.in: Disable serial configure by default.
	* configure: Regenerate.
	* Makefile.tpl: Abolish .NOTPARALLEL.
	* Makefile.in: Regenerate.
@
text
@d1911 1
a1911 1
libstdcxx_flags='`test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags --build-includes` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
@


1.167
log
@	* Makefile.tpl: Make 'recursive targets' using autogen rather
	than shell loop.  Remove duplicate 'clean' targets and false
	comments.
	* Makefile.def: Add systematic dependencies to 'recursive' targets.
	Add systematic method of specifying missing targets in subdirs.
	Add copyright boilerplate.
	* Makefile.in: Regenerate.
	* configure.in: Add 'recursive targets' to maybe list.
	* configure: Regenerate.
@
text
@a1232 4
  mips*-*-irix6*o32)
    with_stabs=yes;
    extra_host_args="${extra_host_args} --with-stabs"
    ;;
d1697 2
a1698 2
[  --disable-serial-[{host,target,build}-]configure
                          Don't force sequential configuration of
d1700 9
a1708 1
			  machine, or of any sub-packages at all])
d1715 1
a1715 2
test "x${enable_serial_configure}" = xno ||
test "x${enable_serial_build_configure}" = xno ||
d1724 1
a1724 2
test "x${enable_serial_configure}" = xno ||
test "x${enable_serial_host_configure}" = xno ||
d1733 1
a1733 2
test "x${enable_serial_configure}" = xno ||
test "x${enable_serial_target_configure}" = xno ||
@


1.166
log
@2003-05-20  Maciej W. Rozycki  <macro@@ds2.pg.gda.pl>

	* configure.in: Use curly braces in the definition of tooldir.
	* configure: Regenerate.
@
text
@d1658 2
a1659 1
mts="configure all install check"
@


1.165
log
@2003-05-19  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* configure.in: Switch more things to use maybe dependencies.
	* Makefile.tpl: Switch more things to use maybe dependencies.
	Factor out common code from autogen IF statements.
	* configure: Regenerate.
	* Makefile.in: Regenerate.
@
text
@d1275 1
a1275 1
tooldir='$(exec_prefix)'/${target_alias}
@


1.164
log
@* configure.in: Accept i[3456789]86 for machine type.
* configure: Regenerate.
@
text
@a1622 13
check_host_modules=
install_host_modules=
for module in ${configdirs} ; do
  check_host_modules="${check_host_modules} check-${module}"
  install_host_modules="${install_host_modules} install-${module}"
done
install_host_modules_nogcc=`echo "${install_host_modules}" | sed -e 's/install-gcc//g'`

check_target_modules=
for module in ${target_configdirs} ; do
  check_target_modules="${check_target_modules} check-target-${module}"
done

d1658 1
a1658 1
mts="configure all install"
a1983 2
AC_SUBST(check_host_modules)
AC_SUBST(install_host_modules_nogcc)
a1987 1
AC_SUBST(check_target_modules)
@


1.163
log
@<top level>
	* configure.in: Switch more things to use maybe dependencies.
	Rearrange a little.  Use GCC_TOPLEV_SUBDIRS.
	* configure: Regenerate.
	* Makefile.tpl: Switch more things to use maybe dependencies.
	* Makefile.in: Regenerate.

<config>
	* config/acx.m4: Introduce _GCC_TOPLEV_NONCANONICAL_BUILD,
	_GCC_TOPLEV_NONCANOICAL_HOST, _GCC_TOPLEV_NONCANONICAL_TARGET,
	GCC_TOPLEV_SUBDIRS.
@
text
@d287 1
a287 1
  i[[3456]]86-*-vsta)
d290 1
a290 1
  i[[3456]]86-*-go32* | i[[3456]]86-*-msdosdjgpp*)
d293 1
a293 1
  i[[3456]]86-*-mingw32*)
d297 1
a297 1
  i[[3456]]86-*-beos*)
d504 1
a504 1
  i[[3456]]86-*-coff | i[[3456]]86-*-elf)
d507 1
a507 1
  i[[34567]]86-*-freebsd*)
d510 1
a510 1
  i[[3456]]86-*-linux*)
d529 1
a529 1
  i[[3456]]86-*-mingw32*)
d535 1
a535 1
      i[[3456]]86-*-mingw32) ;; # keep gdb tcl tk expect etc.
d553 1
a553 1
  i[[3456]]86-*-pe)
d556 1
a556 1
  i[[3456]]86-*-sco3.2v5*)
d561 1
a561 1
  i[[3456]]86-*-sco*)
d564 1
a564 1
  i[[3456]]86-*-solaris2*)
d567 1
a567 1
  i[[3456]]86-*-sysv4*)
d570 1
a570 1
  i[[3456]]86-*-beos*)
d659 3
a661 3
      i[[3456]]86-*-vsta) ;; # don't add gprof back in
      i[[3456]]86-*-go32*) ;; # don't add gprof back in
      i[[3456]]86-*-msdosdjgpp*) ;; # don't add gprof back in
d1056 1
a1056 1
  i[[3456]]86-*-sysv5*)
d1059 1
a1059 1
  i[[3456]]86-*-dgux*)
d1063 1
a1063 1
  i[[3456]]86-ncr-sysv4.3*)
d1068 1
a1068 1
  i[[3456]]86-ncr-sysv4*)
d1077 1
a1077 1
  i[[3456]]86-*-sco3.2v5*)
d1079 1
a1079 1
  i[[3456]]86-*-sco*)
d1085 1
a1085 1
  i[[3456]]86-*-udk*)
d1088 1
a1088 1
  i[[3456]]86-*-solaris2*)
d1091 1
a1091 1
  i[[3456]]86-*-msdosdjgpp*)
d1141 1
a1141 1
  i[[3456]]86-*-netware*)
d1867 1
a1867 1
   i[[3456]]86-*-linux*-no)
@


1.162
log
@2003-05-13  Michael Eager <eager@@mvista.com>

	* configure.in: Correct sed script so that options in quotes are not
	deleted.
	* configure: Rebuild.
@
text
@d167 10
d192 2
a193 3
# We always want to use the same name for this directory, so that dejagnu
# can reliably find it.
target_subdir=${target_alias}
a202 3
build_prefix=build-
build_subdir=${build_prefix}${build_alias}

d1613 2
a1614 5
# has its final value.  It's time to create some lists of valid targets.

# While at that, we remove Makefiles if we were started for recursive
# configuration, such that the top-level Makefile reconfigures them,
# like we used to do when configure itself was recursive.
d1618 4
a1621 13
# Only make build modules if build != host.
# This should be done more generally, but at the moment it doesn't matter.
if test ${host_alias} != ${build_alias} ; then
  for module in libiberty ; do
    all_build_modules=all-build-${module}
    configure_build_modules=configure-build-${module}
    if test -z "${no_recursion}" \
       && test -f ${build_subdir}/${module}/Makefile; then
      echo 1>&2 "*** removing ${build_subdir}/${module}/Makefile to force reconfigure"
      rm -f ${build_subdir}/${module}/Makefile
    fi
  done
fi
a1622 1
all_host_modules=
a1624 1
configure_host_modules=
a1625 1
  all_host_modules="${all_host_modules} all-${module}"
a1627 6
  configure_host_modules="${configure_host_modules} configure-${module}"
  if test -z "${no_recursion}" \
     && test -f ${module}/Makefile; then
    echo 1>&2 "*** removing ${module}/Makefile to force reconfigure"
    rm -f ${module}/Makefile
  fi
a1630 1
all_target_modules=
a1631 2
install_target_modules=
configure_target_modules=
a1632 1
  all_target_modules="${all_target_modules} all-target-${module}"
a1633 7
  install_target_modules="${install_target_modules} install-target-${module}"
  configure_target_modules="${configure_target_modules} configure-target-${module}"
  if test -z "${no_recursion}" \
     && test -f ${target_subdir}/${module}/Makefile; then
    echo 1>&2 "*** removing ${target_subdir}/${module}/Makefile to force reconfigure"
    rm -f ${target_subdir}/${module}/Makefile
  fi
d1663 4
d1669 37
a1705 5
for item in ${all_build_modules} ${all_host_modules} ${all_target_modules} \
	${install_host_modules} ${install_target_modules} \
	${configure_build_modules} ${configure_host_modules} ${configure_target_modules} \
	; do
  echo "maybe-${item}: ${item}" >> maybedep.tmp
a1989 1
AC_SUBST(build_subdir)
a1996 2
AC_SUBST(configure_host_modules)
AC_SUBST(all_host_modules)
a1997 1
AC_SUBST(install_host_modules)
a2000 1
AC_SUBST(target_subdir)
a2002 2
AC_SUBST(configure_target_modules)
AC_SUBST(all_target_modules)
a2003 1
AC_SUBST(install_target_modules)
@


1.161
log
@	* configure.in (FLAGS_FOR_TARGET): Remove $$s/newlib/libc/sys/cygwin
	and $$s/newlib/libc/sys/cygwin32 include paths.
	* configure: Ditto.
@
text
@d1760 1
a1760 1
	    -e 's/ [[^ -][^ ]*] / /' \
@


1.160
log
@* Makefile.tpl (MAKEINFOFLAGS): Default to --split-size=5000000.
* Makefile.in: Regenerate.

* configure.in (powerpc64*-*-linux*): Remove.
* configure: Rebuilt.
@
text
@d1830 1
a1830 1
     FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/$(TARGET_SUBDIR)/winsup -L$$r/$(TARGET_SUBDIR)/winsup/cygwin -L$$r/$(TARGET_SUBDIR)/winsup/w32api/lib -isystem $$s/winsup/include -isystem $$s/winsup/cygwin/include -isystem $$s/winsup/w32api/include -isystem $$s/newlib/libc/sys/cygwin -isystem $$s/newlib/libc/sys/cygwin32' ;;
@


1.160.2.1
log
@2003-05-18  Mark Kettenis  <kettenis@@gnu.org>

	Merge from mainline.
	* i386-tdep.h (I386_SIZEOF_GREGS, I386_SIZEOF_FREGS,
	I386_SIZEOF_XREGS): Remove defenitions.
	(IS_FP_REGNUM, IS_SSE_REGNUM): Remove definitions.
	* i386-tdep.c (i386_gdbarch_init): Don't set register_bytes,
	register_size, call_dummy_words and sizeof_call_dummy.
	* i386-linux-tdep.c (i386_linux_init_abi): Don't set register_bytes.
	* x86-64-tdep.c (x86_64_init_abi): Don't set register_bytes and
	register_size.
	(x86_64_register_bytes): Remove variable.
	(_initialize_x86_64_tdep): Remove function.

	* i386-linux-tdep.c (i386_linux_sigcontext_addr): Call read_memory
	with correct arguments.
	* config/i386/x86-64linux.mt (TDEPFILES): Add i386-linux-tdep.o.
@
text
@d1760 1
a1760 1
	    -e "s/ [[^' -][^ ]*] / /" \
d1830 1
a1830 1
     FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/$(TARGET_SUBDIR)/winsup -L$$r/$(TARGET_SUBDIR)/winsup/cygwin -L$$r/$(TARGET_SUBDIR)/winsup/w32api/lib -isystem $$s/winsup/include -isystem $$s/winsup/cygwin/include -isystem $$s/winsup/w32api/include' ;;
@


1.160.4.1
log
@2003-05-13  Andreas Jaeger  <aj@@suse.de>

	* config.guess: Update to 2003-05-09 version.
	* config.sub: Update to 2003-05-09 version.

2003-05-13  Michael Eager <eager@@mvista.com>

	* configure.in: Correct sed script so that options in quotes are not
	deleted.
	* configure: Rebuild.
@
text
@d1760 1
a1760 1
	    -e "s/ [[^' -][^ ]*] / /" \
@


1.159
log
@* Makefile.tpl (GCC_STRAP_TARGETS):  New variable containing all the
previous bootstrap targets, plus bubblestrap, quickstrap, cleanstrap,
and restrap.
* Makefile.in:  Regenerate.

* configure.in (arm-*-netbsdelf*): Enable building java libraries.
* configure: Regenerated.
@
text
@a609 5
  powerpc64*-*-linux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    # not yet ported.
    noconfigdirs="$noconfigdirs target-libffi"
    ;;
@


1.158
log
@	* Makefile.tpl: Move .NOEXPORT, MAKEOVERRIDES up.  Delete unused
	Make macro.
	* Makefile.in: Regenerate.
	* configure.in: Clean up gxx_include_dir logic.
	* configure: Regenerate.
@
text
@d352 1
@


1.157
log
@* configure.in (gxx_include_dir): Fix typo.
* configure: Regenerated.
@
text
@a1543 6
# record if we want runtime library stuff installed in libsubdir.
# Blank means no.
if test -z "${enable_version_specific_runtime_libs}"; then
  enable_version_specific_runtime_libs=no
fi

d1813 13
a1825 24
gxx_include_dir=
if test -n "${with_gxx_include_dir}"; then
  case "${with_gxx_include_dir}" in
    yes )
      echo "configure.in: error: bad value ${withval} given for g++ include directory" 1>&2
      exit 1
      ;;
    no )
      ;;
    * )
      gxx_include_dir=${with_gxx_include_dir}
      ;;
  esac
fi
if test x${gxx_include_dir} = x; then
  if test x${enable_version_specific_runtime_libs} = xyes; then
    gxx_include_dir='${libsubdir}/include/c++'
  else
    . ${srcdir}/config.if
    gxx_include_dir='${prefix}/include/'${libstdcxx_incdir}
  fi
else
  gxx_include_dir=${gxx_include_dir}
fi
a1974 1
AC_SUBST(enable_version_specific_runtime_libs)
@


1.156
log
@2003-03-04  Daniel Jacobowitz  <drow@@mvista.com>

	* configure.in: Include $(build_tooldir)/sys-include in
	FLAGS_FOR_TARGET.
	* configure: Regenerated.

2003-03-04  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Makefile.tpl: Reindent.
	* Makefile.in: Regenerate.
	* configure.in: Reindent.  Don't set unused variables.
	* configure: Regenerate.
@
text
@d1838 1
a1838 1
    gxx_include_dir='${prefix}/include/${libstdcxx_incdir}'
@


1.156.2.1
log
@2003-03-16  Mark Kettenis  <kettenis@@gnu.org>

	Merge with mainline.  Tag is kettenis-i386newframe-20030316-mergepoint.
@
text
@d1544 6
d1819 24
a1842 13
case "${with_gxx_include_dir}" in
  yes)
    AC_MSG_ERROR([--with-gxx-include-dir=[[dir]] requires a directory])
    ;;
  no | "")
    case "${enable_version_specific_runtime_libs}" in
      yes) gxx_include_dir='${libsubdir}/include/c++' ;;
      *)
        . ${srcdir}/config.if
        gxx_include_dir='${prefix}/include/'${libstdcxx_incdir} ;;
    esac ;;
  *) gxx_include_dir=${with_gxx_include_dir} ;;
esac
d1992 1
@


1.155
log
@	* Makefile.tpl: Always pass down RANLIB.
	* Makefile.in: Regenerate.

	* Makefile.tpl: Don't set unused enable_shared, enable_threads macros.
	* Makefile.in: Regenerate.
	* configure.in: Remove unused logic relating to --enable-shared
	and --enable-threads.  Remove bogus comments.  Remove redundant
	noconfigdirs.
	* configure: Regenerate.

	* configure.in: Replace ${libstdcxx_version} by its value.
	Remove reference to mh-dgux.
	* configure: Regenerate.
@
text
@a27 7
# clear some things potentially inherited from environment.

enable_libstdcxx_v3=yes
floating_point=default
gas=default
x11=default

d286 1
a286 1
	;;
d289 2
a290 2
     noconfigdirs="expect dejagnu autoconf automake send-pr rcs guile perl texinfo libtool"
	;;
d292 2
a293 2
     noconfigdirs="$noconfigdirs tk itcl tix libgui gdb"
     ;;
d295 1
a295 1
     noconfigdirs="autoconf automake send-pr rcs guile perl"
d301 1
a301 1
     noconfigdirs="patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl tix gnuserv"
d514 1
a514 1
         noconfigdirs="$noconfigdirs target-newlib"
d564 2
a565 2
     noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
     ;;
d645 1
a645 1
   ;;
d731 6
a736 6
	if test x"${LANGUAGES+set}" = xset; then
		enable_languages="${LANGUAGES}"
		echo configure.in: warning: setting LANGUAGES is deprecated, use --enable-languages instead 1>&2
	else
		enable_languages=all
	fi
d738 6
a743 6
	if test x"${enable_languages}" = x ||
	   test x"${enable_languages}" = xyes;
	then
		echo configure.in: --enable-languages needs at least one language argument 1>&2
		exit 1
	fi
d752 2
a753 3
   case $lang in
    ..)
       ;;
d756 1
a756 2
    ${srcdir}/gcc/[[*]]/config-lang.in)
       ;;
d758 15
a772 17
       lang_alias=`sed -n -e 's,^language=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^language=\([[^ 	]]*\).*$,\1,p' $lang`
       this_lang_requires=`sed -n -e 's,^lang_requires=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^lang_requires=\([[^ 	]]*\).*$,\1,p' $lang`
       for other in $this_lang_requires
       do
	  case ,${enable_languages}, in
	   *,$other,*)
	      ;;
	   *,all,*)
	      ;;
	   *,$lang_alias,*)
	      echo " \`$other' language required by \`$lang_alias'; enabling" 1>&2
	      enable_languages="$enable_languages,$other"
	      ;;
	  esac
       done
       ;;
   esac
d778 28
a805 28
	case $lang in
	..) ;;
	# The odd quoting in the next line works around
	# an apparent bug in bash 1.12 on linux.
	${srcdir}/gcc/[[*]]/config-lang.in) ;;
	*)
	  lang_alias=`sed -n -e 's,^language=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^language=\([[^ 	]]*\).*$,\1,p' $lang`
	  this_lang_libs=`sed -n -e 's,^target_libs=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^target_libs=\([[^ 	]]*\).*$,\1,p' $lang`
	  this_lang_dirs=`sed -n -e 's,^lang_dirs=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^lang_dirs=\([[^ 	]]*\).*$,\1,p' $lang`
	  build_by_default=`sed -n -e 's,^build_by_default=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^build_by_default=\([[^ 	]]*\).*$,\1,p' $lang`
	  if test "x$lang_alias" = x
	  then
		echo "$lang doesn't set \$language." 1>&2
		exit 1
	  fi
	  case ${build_by_default},${enable_languages}, in
	  *,$lang_alias,*) add_this_lang=yes ;;
	  no,*) add_this_lang=no ;;
	  *,all,*) add_this_lang=yes ;;
	  *) add_this_lang=no ;;
	  esac
	  if test x"${add_this_lang}" = xyes; then
	      eval target_libs='"$target_libs "'\"$this_lang_libs\"
	  else
	      eval noconfigdirs='"$noconfigdirs "'\"$this_lang_libs $this_lang_dirs\"
	  fi
	  ;;
	esac
d1901 1
a1901 1
  FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -B$(build_tooldir)/bin/ -B$(build_tooldir)/lib/ -isystem $(build_tooldir)/include'
@


1.154
log
@Add support for kaOS as cross build target system.
@
text
@a29 2
enable_threads=no
enable_shared=no
a68 9
## this is a little touchy and won't always work, but...
##
## if the argv[[0]] starts with a slash then it is an absolute name that can (and
## must) be used as is.
##
## otherwise, if argv[[0]] has no slash in it, we can assume that it is on the
## path.  Since PATH might include "." we also add `pwd` to the end of PATH.
##

a128 2
libstdcxx_version="target-libstdc++-v3"

d149 1
a149 1
		${libstdcxx_version} \
d347 1
a347 1
    skipdirs="target-libiberty ${libgcj} ${libstdcxx_version} target-libf2c target-librx"
d365 1
a365 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-newlib target-libiberty target-libgloss ${libgcj}"
d409 1
a409 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version}"
d413 1
a413 1
      *) noconfigdirs="$noconfigdirs gdb readline ${libstdcxx_version}"
d448 1
a448 1
    noconfigdirs="$noconfigdirs target-libiberty ${libstdcxx_version} ${libgcj}"
d451 1
a451 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d454 1
a454 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj} gcc gdb newlib"
d460 1
a460 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d475 1
a475 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj} target-libf2c"
d554 1
a554 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d574 1
a574 1
    noconfigdirs="$noconfigdirs target-libiberty ${libstdcxx_version} ${libgcj}"
d694 1
a694 1
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld ${libstdcxx_version} opcodes target-libgloss ${libgcj}"
d712 1
a712 1
    noconfigdirs="$noconfigdirs target-libiberty ${libstdcxx_version} ${libgcj}"
a1020 1
    host_makefile_frag="config/mh-dgux"
a1237 18
# We default to --with-shared on platforms where -fpic is meaningless.
# Well, we don't yet, but we will.
if false && test "${host}" = "${target}" && test x${enable_shared} = x ; then
  case "${target}" in
    alpha*-dec-osf*)	enable_shared=yes ;;
    alpha*-*-linux*)	enable_shared=yes ;;
    mips-sgi-irix5*)	enable_shared=yes ;;
    *)			enable_shared=no ;;
  esac
fi

case "${enable_shared}" in
  yes) shared=yes ;;
  no) shared=no ;;
  "") shared=no ;;
  *) shared=yes ;;
esac

d1613 4
a1616 6
if test "${shared}" = "yes" ; then
  SET_LIB_PATH="\$(REALLY_SET_LIB_PATH)"
else
  SET_LIB_PATH=
fi

a2002 2
AC_SUBST(enable_shared)
AC_SUBST(enable_threads)
@


1.153
log
@* configure.in: Introduce --enable-maintainer-mode.
* configure: Rebuilt.
* Makefile.tpl (Makefile.in, configure): Enable dependencies only
for maintainer mode.
* Makefile.in: Rebuilt.
@
text
@d358 7
@


1.152
log
@	* configure.in (*-*-darwin*): Rename from powerpc*-*-darwin*,
	don't configure target-libobjc.
	* configure: Regenerate.
@
text
@d2130 19
@


1.151
log
@Source Navigator is now on sourceforge...

        * Makefile.def: Remove "snavigator", "grep", and "db" modules.
        * Makefile.tpl: Remove "all-snavigator" and "all-grep".
        * Makefile.in: Regenerated.
        * configure.in: Remove all traces of snavigator, db, and grep.
        * configure: Regenerated.
@
text
@d351 4
a617 3
    ;;
  powerpc-*-darwin*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb gprof ${libgcj}"
@


1.150
log
@* configure.in:  Revert 24Jan change.
* configure:  Regenerate.
@
text
@d138 1
a138 1
host_libs="intl mmalloc libiberty opcodes bfd readline db tcl tk itcl tix libgui zlib"
d147 1
a147 1
host_tools="texinfo byacc flex bison binutils gas ld gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool grep diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils snavigator gettext zip fastjar"
d261 1
a261 1
native_only="autoconf automake libtool fileutils find gawk gettext grep gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms snavigator gnuserv target-gperf"
d302 1
a302 1
    noconfigdirs="tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl itcl tix db snavigator gnuserv gettext"
d305 1
a305 1
    noconfigdirs="tcl tk expect dejagnu send-pr uudecode guile itcl tix db snavigator gnuserv libffi"
d308 1
a308 1
    # noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl itcl tix db snavigator gnuserv"
d321 1
a321 1
     noconfigdirs="patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl tix db snavigator gnuserv"
d538 1
a538 1
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix db snavigator gnuserv"
d551 1
a551 1
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix libgui db snavigator gnuserv"
d604 1
a604 1
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl tix db snavigator gnuserv ${libgcj}"
d610 1
a610 1
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl tix db snavigator gnuserv ${libgcj}"
@


1.149
log
@No, really this time.
@
text
@d204 1
a204 1
target_subdir=${target}
d214 2
a215 1
build_subdir=build-${build}
@


1.148
log
@2003-01-23  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* configure.in: Revert previous change.
	* configure: Regenerate.
@
text
@d174 1
a174 1
target_tools="target-examples target-groff target-gperf"
d204 1
a204 1
target_subdir=${target_alias}
d214 1
a214 2
build_prefix=build-
build_subdir=${build_prefix}${build_alias}
d260 1
a260 1
native_only="autoconf automake libtool fileutils find gawk gettext grep gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms snavigator gnuserv target-gperf target-rda"
@


1.147
log
@2003-01-23  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* configure.in: Make rda native-only.
	* configure: Regenerate.
@
text
@d174 1
a174 1
target_tools="target-examples target-groff target-gperf target-rda"
@


1.146
log
@	* configure.in: Add missing \.
	* configure: Rebuilt.
@
text
@d261 1
a261 1
native_only="autoconf automake libtool fileutils find gawk gettext grep gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms snavigator gnuserv target-gperf"
@


1.145
log
@	* configure.in (baseargs): Avoid using \| in sed regular
	expressions.
	* configure: Rebuilt.
@
text
@d164 1
a164 1
		${libgcj}
@


1.144
log
@	* configure.in (baseargs): Remove all supported forms of
	--cache-file, --srcdir, --host, --build and --target options
	from argument lists.
	* configure: Rebuilt.
@
text
@d1797 10
a1806 5
	    -e 's/ \(--c[[a-z-]]*\|-cache-file\)[[= ]][[^ ]]* / /' \
	    -e 's/ \(--sr[[a-z-]]*\|-srcdir\)[[= ]][[^ ]]* / /' \
	    -e 's/ \(--ho[[a-z-]]*\|-host\)[[= ]][[^ ]]* / /' \
	    -e 's/ \(--bu[[a-z-]]*\|-build\)[[= ]][[^ ]]* / /' \
	    -e 's/ \(--t[[a-z-]]*\|-target\)[[= ]][[^ ]]* / /' \
@


1.143
log
@* configure.in (noconfigdirs): Don't skip gas on IRIX 6.
* configure: Rebuilt.
@
text
@d1797 5
a1801 5
	    -e 's/ --cache[[a-z-]]*=[[^ ]]* / /' \
	    -e 's/ --sr[[a-z-]]*=[[^ ]]* / /' \
	    -e 's/ --ho[[a-z-]]*=[[^ ]]* / /' \
	    -e 's/ --bu[[a-z-]]*=[[^ ]]* / /' \
	    -e 's/ --ta[[a-z-]]*=[[^ ]]* / /' \
@


1.142
log
@	* configure.in: Substitute TOPLEVEL_CONFIGURE_ARGUMENTS.
	* Makefile.tpl: Pass TOPLEVEL_CONFIGURE_ARGUMENTS to gcc.
	* Makefile.in: Regenerate.
	* configure: Regenerate.
@
text
@a642 1
    # The GNU assembler does not support IRIX 6.
d647 1
a647 1
    noconfigdirs="$noconfigdirs gas gprof target-libgloss ${libgcj}"
@


1.141
log
@* configure.in: Remove Makefile in build, host and target modules
unless configure was run with --no-recursion.
* configure: Rebuilt.
@
text
@d86 1
a86 1
export TOPLEVEL_CONFIGURE_ARGUMENTS
@


1.140
log
@* configure.in: Add AC_PREREQ for consistency.
* configure: Regenerate.
@
text
@d2 1
a2 1
#   1999, 2000, 2001, 2002 Free Software Foundation, Inc.
a870 14
# Deconfigure all subdirectories, in case we are changing the
# configuration from one where a subdirectory is supported to one where it
# is not.
if test -z "${norecursion}" && test -n "${configdirs}" ; then
  for i in `echo ${configdirs} | sed -e s/target-//g` ; do
    rm -f $i/Makefile
  done
fi
if test -z "${norecursion}" && test -n "${target_configdirs}" ; then
  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do
    rm -f ${target_subdir}/$i/Makefile
  done
fi

d1657 4
d1666 9
a1674 2
  all_build_modules=all-build-libiberty
  configure_build_modules=configure-build-libiberty
d1686 5
d1703 5
@


1.139
log
@2003-01-06  Andrew Cagney  <ac131313@@redhat.com>

	* configure.in (GDB_TK): Add tcl directories conditional on
	gdb/gdbtk directory being present.
	* configure: Regenerate.
@
text
@d22 1
@


1.138
log
@	* configure.in (LD): Improve test for gcc.  Try to set LD to the ld used
	by gcc if LD is not defined and we are not doing a Canadian Cross.
	* configure: Rebuilt.
@
text
@d1709 2
d1714 2
d1717 9
a1725 1
    GDB_TK="maybe-all-tcl maybe-all-tk maybe-all-itcl maybe-all-tix maybe-all-libgui" ;;
@


1.137
log
@	* configure.in: Fix use of $program_transform_name.
	* configure: Regenerated.
@
text
@d1459 1
d1466 1
d1482 10
d1495 1
a1495 2
      case "${CC}" in
      *gcc)
d1505 19
a1523 1
	;;
@


1.136
log
@	* configure.in (baseargs): Don't remove first configure argument.
	* configure: Regenerated.
@
text
@d1901 1
a1901 1
  CC_FOR_TARGET=`echo gcc | sed -e 's/x/x/' ${program_transform_name}`
d1912 1
a1912 1
  GCJ_FOR_TARGET=`echo gcj | sed -e 's/x/x/' ${program_transform_name}`
d1934 1
a1934 1
  CXX_FOR_TARGET=`echo c++ | sed -e 's/x/x/' ${program_transform_name}`
@


1.135
log
@* Makefile.tpl (local-distclean): Don't remove...
(multilib.ts): ... this.  Moved into...
(multilib.out): ... this.  Don't use sub-make.
($(BUILD_SUBDIR)/[+module+]/Makefile, [+module+]/Makefile,
$(TARGET_SUBDIR)/[+module+]/Makefile, gcc/Makefile): Moved into...
(configure-build-[+module+], configure-[+module+],
configure-target-[+module+], configure-gcc): ... these.  Test
for Makefile existence.  Drop config.status from dependencies.
* Makefile.in: Rebuilt.
* configure.in: Move gcc-version-trigger to the end of
ac_configure_args.  Add comments to maybedep.tmp and
serdep.tmp.  Introduce --disable-serial-configure.  Remove
nonopt from baseargs, matching and removing corresponding
whitespace while at it.
* configure: Rebuilt.
@
text
@d1754 1
a1754 1
	    -e 's/ [[^-][^ ]*] / /' \
@


1.134
log
@* configure.in (host_configargs): Replace reference to
no-longer-defined buildopts with --build=${build_alias}.
* configure: Rebuilt.
@
text
@d115 1
a115 1
        ac_configure_args="--with-gcc-version-trigger=$gcc_version_trigger $ac_configure_args"
d1689 1
d1701 6
d1710 1
d1712 2
d1717 1
a1717 1
    *) echo "\$(BUILD_SUBDIR)/${item}/Makefile: \$(BUILD_SUBDIR)/${olditem}/Makefile" >> serdep.tmp ;;
d1722 2
d1727 1
a1727 1
    *) echo "${item}/Makefile: ${olditem}/Makefile" >> serdep.tmp ;;
d1732 2
d1737 1
a1737 1
    *) echo "\$(TARGET_SUBDIR)/${item}/Makefile: \$(TARGET_SUBDIR)/${olditem}/Makefile" >> serdep.tmp ;;
d1744 12
a1755 9
# Base args.  Strip norecursion, cache-file, srcdir, host, build, target.
# These are the ones we might not want to pass down to subconfigures.
baseargs=`echo "${ac_configure_args}" | \
	sed -e 's/--no[[^ 	]]*//' \
	    -e 's/--cache[[a-z-]]*=[[^ 	]]*//' \
	    -e 's/--sr[[a-z-]]*=[[^ 	]]*//' \
	    -e 's/--ho[[a-z-]]*=[[^ 	]]*//' \
	    -e 's/--bu[[a-z-]]*=[[^ 	]]*//' \
	    -e 's/--ta[[a-z-]]*=[[^ 	]]*//'`
@


1.133
log
@	* Makefile.tpl: Fix dramatic bustage due to change in
	program_transform_name.
	* Makefile.in: Regenerate.

	* configure.in: Remove unnecessary PATH setting.
	* configure: Regnerate.

	* configure.in: Don't default to unprefixed tools unless
	the native tools will work.
	* configure: Regenerate.
@
text
@d1755 1
a1755 1
host_configargs="${cache_file_option} ${buildopt} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"
@


1.132
log
@(toplev)
	* configure.in: Convert to autoconf script.  Blow away lots
	of now-redundant Makefile fragments.
	* configure: Generate using Autoconf.
	* Makefile.tpl: Rewrite to reflect autoconfiscation.
	* Makefile.in: Regenerate.
(config)
	* acx.m4: New.
	* mh-a68bsd, mh-aix386, mh-apollo68, mh-delta88, mh-hp300,
	mh-hpux, mh-hpux8, mh-irix5, mh-irix6, mh-ncrsvr43, mh-openedition,
	mh-riscos, mh-sysv: Delete.
	* mh-cxux, mh-dgux386, mh-interix, mh-lynxrs6k, mh-ncr3000,
	mh-necv4, mh-sco, mh-solaris, mh-sysv4, mh-sysv5, mt-v810: Simplify.
@
text
@a82 8
case "${progname}" in
/* | [[A-Za-z]]:[[\\/]]* ) ;;
*/*) ;;
*)
        PATH=$PATH:${PWD=`${PWDCMD-pwd}`} ; export PATH
        ;;
esac

d2003 9
a2011 9
AC_CHECK_TOOL(AR, ar)
AC_CHECK_TOOL(AS, as)
AC_CHECK_TOOL(DLLTOOL, dlltool)
AC_CHECK_TOOL(LD, ld)
AC_CHECK_TOOL(NM, nm)
AC_CHECK_TOOL(RANLIB, ranlib, :)
AC_CHECK_TOOL(WINDRES, windres)
AC_CHECK_TOOL(OBJCOPY, objcopy)
AC_CHECK_TOOL(OBJDUMP, objdump)
d2021 7
a2027 7
NCN_CHECK_TARGET_TOOL(AR_FOR_TARGET, ar)
NCN_CHECK_TARGET_TOOL(AS_FOR_TARGET, as)
NCN_CHECK_TARGET_TOOL(DLLTOOL_FOR_TARGET, dlltool)
NCN_CHECK_TARGET_TOOL(LD_FOR_TARGET, ld)
NCN_CHECK_TARGET_TOOL(NM_FOR_TARGET, nm)
NCN_CHECK_TARGET_TOOL(RANLIB_FOR_TARGET, ranlib, :)
NCN_CHECK_TARGET_TOOL(WINDRES_FOR_TARGET, windres)
@


1.131
log
@2002-12-23  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Makefile.tpl: Use shared multilib.out.  Use move-if-change for it.
	Convert (cd foo; make) to (cd foo && make).  Clean up multilib.out.
	* Makefile.in: Regenerate.
	* configure.in: Remove unnecessary leftovers.

2002-12-22  Geoffrey Keating  <geoffk@@apple.com>

	* config/mt-aix43: Delete.

2002-12-21  Geoffrey Keating  <geoffk@@apple.com>

	* configure.in (extra_ranlibflags_for_target): New variable.
	(*-*-darwin): Add -c to ranlib commands.
	* configure (tooldir): Handle extra_ranlibflags_for_target.
@
text
@a0 16
#! /bin/bash
##############################################################################

## This file is a shell script fragment that supplies the information
## necessary to tailor a template configure script into the configure
## script appropriate for this directory.  For more information, check
## any existing configure script.  

## Be warned, there are two types of configure.in files.  There are those
## used by Autoconf, which are macros which are expanded into a configure
## script by autoconf.  The other sort, of which this is one, is executed
## by Cygnus configure.  

## For more information on these two systems, check out the documentation
## for 'Autoconf' (autoconf.texi) and 'Configure' (configure.texi).  

d19 87
d110 3
a112 3
if [ "${with_gcc_version_trigger+set}" = set ]; then
    gcc_version_trigger="$with_gcc_version_trigger"
    gcc_version=`grep version_string ${with_gcc_version_trigger} | sed -e 's/.*\"\([^ \"]*\)[ \"].*/\1/'`
d114 13
a126 15
    # If gcc's sources are available, define the trigger file.
    if [ -f ${topsrcdir}/gcc/version.c ] ; then
	gcc_version_trigger=${topsrcdir}/gcc/version.c
	gcc_version=`grep version_string ${gcc_version_trigger} | sed -e 's/.*\"\([^ \"]*\)[ \"].*/\1/'`
	case "$arguments" in
	  *--with-gcc-version-trigger=$gcc_version_trigger* )
	    ;;
	  * )
	    # Add to all subconfigure arguments: build, host, and target.
	    arguments="--with-gcc-version-trigger=$gcc_version_trigger $arguments"
	    ;;
	esac
	# This will be redundant when we start all subconfigures from the Makefile.
	extra_host_args="--with-gcc-version-trigger=$gcc_version_trigger $extra_host_args"
    fi
a195 1
srctrigger=move-if-change
a200 6
# per-host:

# There is no longer anything interesting in the per-host section.

# per-target:

d308 1
a308 1
  i[3456]86-*-vsta)
d311 1
a311 1
  i[3456]86-*-go32* | i[3456]86-*-msdosdjgpp*)
d314 1
a314 1
  i[3456]86-*-mingw32*)
d318 1
a318 1
  i[3456]86-*-beos*)
d358 1
a358 1
  *-*-freebsd[12] | *-*-freebsd[12].* | *-*-freebsd*aout*)
d513 1
a513 1
  i[3456]86-*-coff | i[3456]86-*-elf)
d516 1
a516 1
  i[34567]86-*-freebsd*)
d519 1
a519 1
  i[3456]86-*-linux*)
d538 1
a538 1
  i[3456]86-*-mingw32*)
d544 1
a544 1
      i[3456]86-*-mingw32) ;; # keep gdb tcl tk expect etc.
d562 1
a562 1
  i[3456]86-*-pe)
d565 1
a565 1
  i[3456]86-*-sco3.2v5*)
d570 1
a570 1
  i[3456]86-*-sco*)
d573 1
a573 1
  i[3456]86-*-solaris2*)
d576 1
a576 1
  i[3456]86-*-sysv4*)
d579 1
a579 1
  i[3456]86-*-beos*)
d677 3
a679 3
      i[3456]86-*-vsta) ;; # don't add gprof back in
      i[3456]86-*-go32*) ;; # don't add gprof back in
      i[3456]86-*-msdosdjgpp*) ;; # don't add gprof back in
d765 1
a765 1
enable_languages=`echo "${enable_languages}" | sed -e 's/[ 	,][ 	,]*/,/g' -e 's/,$//'`
d777 1
a777 1
    ${srcdir}/gcc/[*]/config-lang.in)
d780 2
a781 2
       lang_alias=`sed -n -e 's,^language=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^language=\([^ 	]*\).*$,\1,p' $lang`
       this_lang_requires=`sed -n -e 's,^lang_requires=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^lang_requires=\([^ 	]*\).*$,\1,p' $lang`
d806 1
a806 1
	${srcdir}/gcc/[*]/config-lang.in) ;;
d808 4
a811 4
	  lang_alias=`sed -n -e 's,^language=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^language=\([^ 	]*\).*$,\1,p' $lang`
	  this_lang_libs=`sed -n -e 's,^target_libs=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^target_libs=\([^ 	]*\).*$,\1,p' $lang`
	  this_lang_dirs=`sed -n -e 's,^lang_dirs=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^lang_dirs=\([^ 	]*\).*$,\1,p' $lang`
	  build_by_default=`sed -n -e 's,^build_by_default=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^build_by_default=\([^ 	]*\).*$,\1,p' $lang`
d1023 1
d1029 3
a1031 1
    host_makefile_frag="config/mh-hp300"
a1034 1
    host_makefile_frag="config/mh-apollo68"
d1043 1
a1044 1
    host_makefile_frag="config/mh-a68bsd"
a1055 1
    host_makefile_frag="config/mh-delta88"
a1065 6
  mips*-sgi-irix6*)
    host_makefile_frag="config/mh-irix6"
    ;;
  mips*-sgi-irix5*)
    host_makefile_frag="config/mh-irix5"
    ;;
a1071 3
  mips*-sgi-irix3*)
    host_makefile_frag="config/mh-sysv"
    ;;
a1088 1
    host_makefile_frag="config/mh-riscos"
a1091 1
    host_makefile_frag="config/mh-openedition"
d1093 1
a1093 1
  i[3456]86-*-sysv5*)
d1096 1
a1096 1
  i[3456]86-*-dgux*)
d1100 1
a1100 1
  i[3456]86-ncr-sysv4.3*)
a1103 1
    host_makefile_frag="config/mh-ncrsvr43"
d1105 1
a1105 1
  i[3456]86-ncr-sysv4*)
d1114 1
a1114 2
  i[3456]86-*-sco3.2v5*)
    host_makefile_frag="config/mh-sysv"
d1116 1
a1116 1
  i[3456]86-*-sco*)
d1122 1
a1122 1
  i[3456]86-*-udk*)
d1125 1
a1125 4
  i[3456]86-*-isc*)
    host_makefile_frag="config/mh-sysv"
    ;;
  i[3456]86-*-solaris2*)
d1128 1
a1128 4
  i[3456]86-*-aix*)
    host_makefile_frag="config/mh-aix386"
    ;;
  i[3456]86-*-msdosdjgpp*)
a1151 4
  *-hp-hpux[78]*)
    tentative_cc="cc -Wp,-H256000"
    host_makefile_frag="config/mh-hpux8"
    ;;
a1153 1
    host_makefile_frag="config/mh-hpux"
a1156 1
    host_makefile_frag="config/mh-hpux"
a1169 3
  *-*-sysv*)
    host_makefile_frag="config/mh-sysv"
    ;;
a1172 9
rm -f mh-frag
if test -n "${host_makefile_frag}" ; then
  for f in ${host_makefile_frag}
  do
    cat ${srcdir}/$f >> mh-frag
  done
  host_makefile_frag=mh-frag
fi

d1176 1
d1178 1
a1178 1
  i[3456]86-*-netware*)
d1187 1
a1187 1
  *-*-aix4.[3456789]* | *-*-aix[56789].*)
d1203 1
a1203 1
alphaieee_frag=
d1215 1
a1215 1
ospace_frag=
a1232 9
rm -f mt-frag
if test -n "${target_makefile_frag}${alphaieee_frag}${ospace_frag}" ; then
  for f in ${target_makefile_frag} ${alphaieee_frag} ${ospace_frag}
  do
    cat ${srcdir}/$f >> mt-frag
  done
  target_makefile_frag=mt-frag
fi

a1308 3
# This will go away when we start subconfigures from the Makefile.
withoptions="${withoptions} ${extra_host_args}"

d1328 249
a1576 1
# post-target:
d1604 1
a1604 1
      if test "`type $CCBASE | sed 's/^[^/]*//'`" = "/usr/ucb/cc" ; then
a1634 3
sed -e "s/@@SET_LIB_PATH@@/${SET_LIB_PATH}/" Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile
a1640 3
sed -e "s/@@RPATH_ENVVAR@@/${RPATH_ENVVAR}/" Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile
d1703 2
a1704 5
sed -e '/@@maybe_dependencies@@/r maybedep.tmp' \
    -e 's/@@maybe_dependencies@@//' Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile
rm -f maybedep.tmp
d1735 2
a1736 5
sed -e '/@@serialization_dependencies@@/r serdep.tmp' \
    -e 's/@@serialization_dependencies@@//' Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile
rm -f serdep.tmp
d1740 7
a1746 7
baseargs=`echo "${arguments}" | \
	sed -e 's/--no[^ 	]*//' \
	    -e 's/--cache[a-z-]*=[^ 	]*//' \
	    -e 's/--sr[a-z-]*=[^ 	]*//' \
	    -e 's/--ho[a-z-]*=[^ 	]*//' \
	    -e 's/--bu[a-z-]*=[^ 	]*//' \
	    -e 's/--ta[a-z-]*=[^ 	]*//'`
d1751 1
a1751 1
buildargs="--cache-file=../config.cache --build=${build_alias} --host=${build_alias} ${baseargs}"
d1757 1
a1757 1
/* | [A-Za-z]:[\\/]* ) # absolute path
d1763 1
a1763 1
hostargs="${cache_file_option} ${buildopt} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"
d1765 1
a1765 1
targargs=${baseargs}
d1773 1
a1773 1
  targargs="--with-cross-host=${host_alias} ${targargs}"
d1778 1
a1778 1
  targargs="--enable-multilib ${targargs}"
d1784 1
a1784 1
  targargs="--with-newlib ${targargs}"
d1788 1
a1788 1
targargs="--cache-file=../config.cache --host=${target_alias} --build=${build_alias} ${targargs}"
d1822 1
a1822 1
  case " $targargs " in
d1853 1
a1853 1
   i[3456]86-*-linux*-no)
d1894 1
a1894 6
# On Canadian crosses, configure reads CC_FOR_TARGET from Makefile,
# if Makefile exists.  Prevent $(FLAGS_FOR_TARGET) from being duplicated.
case $CC_FOR_TARGET in
*' $(FLAGS_FOR_TARGET)') ;;
*) CC_FOR_TARGET=$CC_FOR_TARGET' $(FLAGS_FOR_TARGET)' ;;
esac
d1905 1
a1905 4
case $GCJ_FOR_TARGET in
*' $(FLAGS_FOR_TARGET)') ;;
*) GCJ_FOR_TARGET=$GCJ_FOR_TARGET' $(FLAGS_FOR_TARGET)' ;;
esac
d1928 2
a1929 8
case $CXX_FOR_TARGET in
*' $(FLAGS_FOR_TARGET)') ;;
*) CXX_FOR_TARGET=$CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)' ;;
esac
case $RAW_CXX_FOR_TARGET in
*' $(FLAGS_FOR_TARGET)') ;;
*) RAW_CXX_FOR_TARGET=$RAW_CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)' ;;
esac
d1931 2
a1932 2
qCXX_FOR_TARGET=`echo "$CXX_FOR_TARGET" | sed 's,[&%],\\\&,g'`
qRAW_CXX_FOR_TARGET=`echo "$RAW_CXX_FOR_TARGET" | sed 's,[&%],\\\&,g'`
d1940 2
a1941 2
qqCXX_FOR_TARGET=`echo "$qCXX_FOR_TARGET" | sed -e 's,[$][$],$$$$,g'`
qqRAW_CXX_FOR_TARGET=`echo "$qRAW_CXX_FOR_TARGET" | sed -e 's,[$][$],$$$$,g'`
d1943 123
a2065 33
sedtemp=sed.$$
cat >$sedtemp <<EOF
s%@@GDB_TK@@%${GDB_TK}%
s%@@configure_build_modules@@%${configure_build_modules}%
s%@@all_build_modules@@%${all_build_modules}%
s%@@configure_host_modules@@%${configure_host_modules}%
s%@@all_host_modules@@%${all_host_modules}%
s%@@check_host_modules@@%${check_host_modules}%
s%@@install_host_modules@@%${install_host_modules}%
s%@@install_host_modules_nogcc@@%${install_host_modules_nogcc}%
s%@@configure_target_modules@@%${configure_target_modules}%
s%@@all_target_modules@@%${all_target_modules}%
s%@@check_target_modules@@%${check_target_modules}%
s%@@install_target_modules@@%${install_target_modules}%
s:@@target_configdirs@@:${target_configdirs}:
s%@@target_configargs@@%${targargs}%
s%@@FLAGS_FOR_TARGET@@%${FLAGS_FOR_TARGET}%
s%@@CC_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${CC_FOR_TARGET}%
s%@@GCJ_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${GCJ_FOR_TARGET}%
s%@@CXX_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${qCXX_FOR_TARGET}%
s%@@RAW_CXX_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${qRAW_CXX_FOR_TARGET}%
s%@@CXX_FOR_TARGET_FOR_RECURSIVE_MAKE@@%\$(STAGE_CC_WRAPPER) ${qqCXX_FOR_TARGET}%
s%@@RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE@@%\$(STAGE_CC_WRAPPER) ${qqRAW_CXX_FOR_TARGET}%
s%@@target_subdir@@%${target_subdir}%
s%@@build_subdir@@%${build_subdir}%
s%@@build_configargs@@%${buildargs}%
s%@@gxx_include_dir@@%${gxx_include_dir}%
s%@@libstdcxx_incdir@@%${libstdcxx_incdir}%
s%@@host_configargs@@%${hostargs}%
EOF
sed -f $sedtemp Makefile > Makefile.tem
rm -f Makefile $sedtemp
mv -f Makefile.tem Makefile
d2067 1
a2067 1
#
@


1.130
log
@	* Makefile.tpl: Revert HJL's change.
	* Makefile.in: Regenerated.
	* configure.in: Put build_prefix before $(BUILD_SUBDIR) here, and
	always.
@
text
@d1149 1
d1167 4
a1705 6
# BASE_CC_FOR_TARGET is the actual program file of CC_FOR_TARGET,
# for use in dependencies.  Replace $$r with a relative
# path if it's present.
set dummy $CC_FOR_TARGET; cc_for_target_first_word=$2
BASE_CC_FOR_TARGET=`echo "$cc_for_target_first_word" | sed -e 's,[$][$]r,.,'`

a1723 1
s%@@BASE_CC_FOR_TARGET@@%${BASE_CC_FOR_TARGET}%
@


1.129
log
@	* Makefile.tpl, configure.in: Substitute libstdcxx_incdir.
	* Makefile.in: Regenerate.
@
text
@d159 2
a160 1
build_subdir=${build_alias}
a171 4
if test x"${target_subdir}" = x"${build_subdir}" ; then
  build_prefix=build-
fi

a1732 1
s%@@build_prefix@@%${build_prefix}%
@


1.128
log
@2002-12-18  H.J. Lu <hjl@@gnu.org>

	* Makefile.tpl: Add @@build_prefix@@ before $(BUILD_SUBDIR).
	* Makefile.in: Regenerated.

	* configure.in (build_prefix): New. Substitute.
@
text
@d1739 1
@


1.127
log
@	* configure.in (noconfigdirs) [mmix-*-*]: Disable libgloss and gdb.
@
text
@d171 4
d1736 1
@


1.126
log
@2002-12-13  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* configure.in, Makefile.tpl, Makefile.def: Remove tclX.
	* Makefile.in: Regenerate.
@
text
@d534 1
a534 1
    noconfigdirs="$noconfigdirs ${libgcj}"
@


1.125
log
@
	* configure.in: Revert unintentional change.
@
text
@d76 1
a76 1
host_libs="intl mmalloc libiberty opcodes bfd readline db tcl tk tclX itcl tix libgui zlib"
@


1.124
log
@2002-12-05  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Makefile.tpl: Change dependency for */multilib.out so that
	it works when gcc isn't in the tree.

	* configure.in: Substitute more.
	* configure: Run subconfigures from the Makefile.
	* Makefile.tpl: Run subconfigures from the Makefile; add a few
	convenience targets.  Make sure gcc isn't rebuilt after bootstrap.
@
text
@d205 1
a205 1
native_only="autoconf automake libtool fileutils find gawk gettext grep gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms snavigator gnuserv target-gperf target-rda"
@


1.123
log
@	* configure.in (host_tools): Order binutils, gas and ld for
	convenience in running the testsuites.
@
text
@d205 1
a205 1
native_only="autoconf automake libtool fileutils find gawk gettext grep gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms snavigator gnuserv target-gperf"
d1709 1
d1711 1
a1711 1
s%@@configure_build_modules@@%${configure_build_modules}%
d1716 1
@


1.122
log
@	* Makefile.tpl: Introduce rules to serialize subconfigure runs.
	* Makefile.in: Regenerate.
	* configure.in: Introduce rules to serialize subconfigure runs.
@
text
@d83 3
a85 1
host_tools="texinfo byacc flex bison binutils ld gas gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool grep diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils snavigator gettext zip fastjar"
@


1.121
log
@	* configure.in: Introduce BASE_CC_FOR_TARGET.
	* Makefile.tpl: Reorganize and comment.  Introduce HOST_CONFIGARGS.
	Realize configure-build-* targets.  Realize configure-target-* targets.
	* Makefile.in: Regenerate.
@
text
@d62 1
a62 3
### (library or tools, host or target), doing a dependency sort.  For
### example, gdb requires that byacc (or bison) be built first, so it is in
### the ${host_tools} list after byacc and bison.  
d64 9
d83 1
a83 1
host_tools="texinfo byacc flex bison binutils ld gas gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool grep diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils snavigator libtool gettext zip fastjar"
d1443 35
@


1.120
log
@	* configure: Move gcc_version_trigger stuff from here...
	* configure.in: ...to here.

	* configure.in: Separate subconfigure options added by this file from
	options given by the user.  Add machinery to put args for host
	subconfigures into the Makefile.

	* Makefile.tpl: Remove 'vault' targets.
	* Makefile.tpl: Reorder and comment dependencies.
	* Makefile.in: Regenerate.
@
text
@d1656 6
d1678 1
a1693 4
#
# Local Variables:
# fill-column: 131
# End:
@


1.119
log
@(from gcc repos.)
2002-11-28  Geoffrey Keating  <geoffk@@apple.com>

	* configure.in: Move host-specific darwin noconfigdirs into
	the host-specific section.
@
text
@d36 24
d1216 1
a1216 1
  withoptions="$withoptions --with-gnu-as"
d1222 1
a1222 1
  withoptions="$withoptions --with-gnu-ld"
d1225 1
a1225 1
# If using newlib, add --with-newlib to the withoptions so that gcc/configure
d1230 1
a1230 1
  withoptions="$withoptions --with-newlib"
d1257 1
a1257 1
    withoptions="${withoptions} --with-stabs"
d1263 1
a1263 1
    withoptions="${withoptions} --with-stabs"
d1272 1
a1272 1
    withoptions="$withoptions -x-libraries=/usr/lib/pa20_64 -x-includes=/usr/X11R6/include"
d1276 3
d1452 12
d1681 1
@


1.118
log
@2002-12-02  Nathanael Nerode  <neroden@@gcc.gnu.org>

	(finishing slow-motion replay)
	* configure: Remove skip-this-dir support.
	* Makefile.tpl: Remove skip-this-dir support.

	* Makefile.tpl: Remove leftover support for non-autoconfiscated
	subdirectories.
	* Makefile.in: Regenerate.

	* Makefile.tpl: Strip out useless setting of 'dir'.
	* Makefile.in: Regenerate.

2002-12-02  Nathanael Nerode  <neroden@@gcc.gnu.org>

	(finishing slow-motion replay)
	* configure.in: Fix deeply stupid bug.

	* configure.in: Introduce RAW_CXX_FOR_TARGET and simplify embedded
	shell code in CXX_FOR_TARGET
	* Makefile.def: Introduce raw_cxx.
	* Makefile.tpl: Use raw_cxx to select between CXX_FOR_TARGET and
	RAW_CXX_FOR_TARGET.
	* Makefile.in: Regenerate.

2002-12-02  Nathanael Nerode  <neroden@@gcc.gnu.org>

	(finishing slow-motion replay)
	* Makefile.tpl: Remove unnecessary ifs.
	* Makefile.in: Regenerate.

	* Makefile.tpl: Implement soft dependency machinery.  Maybe-ize
	dependencies.  Maybe-ize build-libiberty.  Create dummy install
	targets for 'no_install' modules.
	* configure: Move GDB_TK substitution to configure.in.  Move
	build_modules stuff to configure.in.
	* configure.in: Implement soft dependency machinery.  Maybe-ize
	GDB_TK, rearrange slightly.  Move build_modules stuff from configure.
	* Makefile.in: Regenerate.
@
text
@d237 3
d527 1
a527 1
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb tk itcl tix libgui gprof ${libgcj}"
@


1.117
log
@2002-12-01  Nathanael Nerode  <neroden@@gcc.gnu.org>

	(continuing slow-motion replay)
	* Makefile.tpl: Make all-target, install-target behave similarly
	to all, install (only hitting configured targets).  Eliminate
	unused macro defintions.

	* Makefile.tpl: Add all-gcc: all-build-libiberty dependency when
	build != host.

	* Makefile.tpl: Add all-gcc: all-libiberty dependency.

	* ltcf-c.sh, ltcf-gcj.sh, Makefile.tpl: Correct BUILD/HOST confusion.

	* configure.in: Produce lists of subdir targets we're actually
	configuring.  Remove references to "dosrel".
	* Makefile.tpl: Let configure set which subdir targets are hit.
	Remove install-cross; clean up install; remove ALL.  Remove
	references to "dosrel".  Remove "EXTRA_TARGET_HOST" hackery.
	Autogenerate host module targets.  Remove empty dependency lines
	and redundant dependency; rearrange slightly.
	* Makefile.def: Add host-side libtermcap, utils.

	* Makefile.in: Regenerate.
@
text
@a850 7
# Determine whether gdb needs tk/tcl or not.
case "$enable_gdbtk" in
  no)
    GDB_TK="" ;;
  *)
    GDB_TK="all-tcl all-tk all-itcl all-tix all-libgui" ;;
esac
d1346 10
d1359 1
d1364 1
d1371 1
d1376 1
d1379 28
d1573 2
a1574 1
libstdcxx_flags='`case $$dir in libstdc++-v3 | libjava) ;; *) test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags --build-includes;; esac` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
d1582 4
a1585 1
  CXX_FOR_TARGET='$$r/gcc/`case $$dir in libstdc++-v3 | libjava) echo xgcc -shared-libgcc ;; *) echo g++ ;; esac` -B$$r/gcc/ -nostdinc++ '$libstdcxx_flags
d1588 1
d1591 1
d1597 5
d1603 1
d1612 1
d1616 3
d1632 1
d1634 1
@


1.116
log
@2002-11-29  Nathanael Nerode  <neroden@@gcc.gnu.org>

	(Continuing slow-motion replay)
	* configure.in (v810*): Remove special setting of tools.

	* configure: Add support for extra required flags for ar or nm.
	* configure.in (aix4.3+): Use above support for target-specific
	issues, rather than using config/mt-aix43.
@
text
@a199 4
  i[3456]86-*-go32*)
    configdirs="$configdirs dosrel" ;;
  i[3456]86-*-mingw32*)
    configdirs="$configdirs dosrel" ;;
d201 1
a201 1
    configdirs="$configdirs libtermcap dosrel" ;;
d1347 24
a1386 3
# Record target_configdirs and the configure arguments for target and
# build configuration in Makefile.
target_configdirs=`echo "${target_configdirs}" | sed -e 's/target-//g'`
d1568 7
@


1.115
log
@Top level configury changes for RDA.
@
text
@d1121 2
a1123 3
  v810*)
    target_makefile_frag="config/mt-v810"
    ;;
d1134 5
a1138 1
    target_makefile_frag="config/mt-aix43"
@


1.114
log
@	* configure.in (i[3456]86-*-linux*): Add check to disable
	${libgcj} for glibc1.
@
text
@d79 1
a79 1
target_tools="target-examples target-groff target-gperf"
@


1.113
log
@Add tic4x target.
@
text
@d425 7
@


1.112
log
@2002-10-03  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Makefile.tpl: Make SET_LIB_PATH substitution more autoconfy.
	* Makefile.tpl: Make RPATH_ENVVAR substitution more autoconfy.
	* configure.in: Make SET_LIB_PATH substitution more autoconfy.
	* configure.in: Make RPATH_ENVVAR substitution more autoconfy.
	* Makefile.in: Regenerate.
@
text
@d364 1
a364 1
  c4x-*-*)
@


1.112.2.1
log
@Merge drow-cplus-merge-20021025 to drow-cplus-branch.
@
text
@d364 1
a364 1
  c4x-*-* | tic4x-*-*)
a424 7
    # The GCC port for glibc1 has no MD_FALLBACK_FRAME_STATE_FOR, so let's
    # not build java stuff by default.
    case "${target}" in
      *-*-*libc1*)
	noconfigdirs="$noconfigdirs ${libgcj}";;
    esac

@


1.112.2.2
log
@Merge drow-cplus-branch to:
  cvs rtag -D 2003-12-14 00:00:00 UTC drow-cplus-merge-20031214 gdb+dejagnu
@
text
@d1 16
d18 1
a18 1
#   1999, 2000, 2001, 2002, 2003 Free Software Foundation, Inc.
a34 93
### WARNING: this file contains embedded tabs.  Do not run untabify on this file.

AC_INIT(move-if-change)
AC_PREREQ(2.13)
AC_CANONICAL_SYSTEM
AC_ARG_PROGRAM

# Get 'install' or 'install-sh' and its variants.
AC_PROG_INSTALL

sinclude(config/acx.m4)

### we might need to use some other shell than /bin/sh for running subshells
### If we are on Windows, search for the shell.  This will permit people
### to not have /bin/sh, but to be able to see /SOME/PATH/sh configure
### without also having to set CONFIG_SHELL.  This code will work when
### using bash, which sets OSTYPE.
case "${OSTYPE}" in
*win32*)
  if test x${CONFIG_SHELL} = x ; then
    if test ! -f /bin/sh ; then
      if test x${SHELL} != x && test -f ${SHELL} ; then
	CONFIG_SHELL=${SHELL}
	export CONFIG_SHELL
      else
	for prog in sh sh.exe bash bash.exe; do
	  IFS="${IFS=	}"; save_ifs="$IFS"; IFS="${IFS}:"
	  for dir in $PATH; do
	    test -z "$dir" && dir=.
	    if test -f $dir/$prog; then
	      CONFIG_SHELL=$dir/$prog
	      export CONFIG_SHELL
	      break
	    fi
	  done
	  IFS="$save_ifs"
	  test -n "${CONFIG_SHELL}" && break
	done
      fi
    fi
  fi
  ;;
esac

config_shell=${CONFIG_SHELL-/bin/sh}

progname=$0
# if PWD already has a value, it is probably wrong.
if test -n "$PWD" ; then PWD=`${PWDCMD-pwd}`; fi

# Export original configure arguments for use by sub-configures.  These
# will be expanded by make, so quote '$'.
tmp="$progname $@@"
sed -e 's,\$,$$,g' <<EOF_SED > conftestsed.out
$tmp
EOF_SED
TOPLEVEL_CONFIGURE_ARGUMENTS=`cat conftestsed.out`
rm -f conftestsed.out
AC_SUBST(TOPLEVEL_CONFIGURE_ARGUMENTS)

moveifchange=${srcdir}/move-if-change

# Set srcdir to "." if that's what it is.
# This is important for multilib support.
pwd=`${PWDCMD-pwd}`
srcpwd=`cd ${srcdir} ; ${PWDCMD-pwd}`
if test "${pwd}" = "${srcpwd}" ; then
  srcdir=.
fi

topsrcdir=$srcpwd

extra_host_args=
# Define the trigger file to make sure configure will re-run whenever
# the gcc version number changes.
if test "${with_gcc_version_trigger+set}" = set ; then
  gcc_version_trigger="$with_gcc_version_trigger"
  gcc_version=`grep version_string ${with_gcc_version_trigger} | sed -e 's/.*\"\([[^ \"]]*\)[[ \"]].*/\1/'`
else
  # If gcc's sources are available, define the trigger file.
  if test -f ${topsrcdir}/gcc/version.c ; then
    gcc_version_trigger=${topsrcdir}/gcc/version.c
    gcc_version=`grep version_string ${gcc_version_trigger} | sed -e 's/.*\"\([[^ \"]]*\)[[ \"]].*/\1/'`
    case "$ac_configure_args" in
      *--with-gcc-version-trigger=$gcc_version_trigger* )
        ;;
      * )
        # Add to all subconfigure arguments: build, host, and target.
        ac_configure_args="$ac_configure_args --with-gcc-version-trigger=$gcc_version_trigger"
        ;;
    esac
  fi
fi
d38 3
a40 8
### (library or tools, host or target), doing a dependency sort.

# Subdirs will be configured in the order listed in build_configdirs, 
# configdirs, or target_configdirs; see the serialization section below.

# Dependency sorting is only needed when *configuration* must be done in 
# a particular order.  In all cases a dependency should be specified in 
# the Makefile, whether or not it's implicitly specified here.
a41 2
# Double entries in build_configdirs, configdirs, or target_configdirs may
# cause circular dependencies and break everything horribly.
d45 3
a47 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl tix libgui zlib"
d52 1
a52 3
# binutils, gas and ld appear in that order because it makes sense to run
# "make check" in that particular order.
host_tools="texinfo byacc flex bison binutils gas ld gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils gettext zip fastjar"
d64 1
a64 1
target_libraries="target-libiberty \
d67 1
a67 1
		target-libstdc++-v3 \
d69 1
a69 1
		${libgcj} \
d72 2
a73 2
# these tools are built using the target libraries, and are intended to
# run only in the target environment
d75 1
a75 1
# note: any program that *uses* libraries that are in the "target_libraries"
d79 1
a79 1
target_tools="target-examples target-groff target-gperf target-rda"
d90 1
a90 11
target_configdirs=`echo ${target_libraries} ${target_tools}`

# Only make build modules if build != host.
# This should be done more generally, but at the moment it doesn't matter.
if test ${host_alias} != ${build_alias} ; then
  # This is the only build module.
  build_modules=libiberty
else
  build_modules=
fi

d94 1
d100 6
d114 23
a136 2
# Find the build and target subdir names.
GCC_TOPLEV_SUBDIRS
d172 1
a172 1
native_only="autoconf automake libtool fileutils find gawk gettext gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms gnuserv target-gperf"
d185 1
a185 2
if test x"${with_headers}" != x && test x"${with_headers} != xno \
   && test x"${with_libs}" != x && test x"${with_libs} != xno ; then
d200 4
d205 1
a205 1
    configdirs="$configdirs libtermcap" ;;
d216 2
a217 12
  i[[3456789]]86-*-vsta)
    noconfigdirs="tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl itcl tix gnuserv gettext"
    ;;
  i[[3456789]]86-*-go32* | i[[3456789]]86-*-msdosdjgpp*)
    noconfigdirs="tcl tk expect dejagnu send-pr uudecode guile itcl tix gnuserv libffi"
    ;;
  i[[3456789]]86-*-mingw32*)
    # noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl itcl tix gnuserv"
    noconfigdirs="expect dejagnu autoconf automake send-pr rcs guile perl texinfo libtool"
    ;;
  i[[3456789]]86-*-beos*)
    noconfigdirs="$noconfigdirs tk itcl tix libgui gdb"
d219 10
d230 1
a230 1
    noconfigdirs="autoconf automake send-pr rcs guile perl"
d236 1
a236 1
    noconfigdirs="patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl tix gnuserv"
a240 3
  *-*-darwin*)
    noconfigdirs="$noconfigdirs tk itcl tix libgui"
    ;;
d263 1
a263 9
  powerpc-*-darwin*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb gprof"
    noconfigdirs="$noconfigdirs target-libobjc"
    ;;
  *-*-darwin*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb gprof"
    noconfigdirs="$noconfigdirs target-libobjc ${libgcj}"
    ;;
  *-*-freebsd[[12]] | *-*-freebsd[[12]].* | *-*-freebsd*aout*)
a265 7
  *-*-kaos*)
    # Remove unsupported stuff on all kaOS configurations.
    skipdirs="target-libiberty ${libgcj} target-libstdc++-v3 target-libf2c target-librx"
    skipdirs="$skipdirs target-libobjc target-examples target-groff target-gperf"
    skipdirs="$skipdirs zlib fastjar target-libjava target-boehm-gc target-zlib"
    noconfigdirs="$noconfigdirs target-libgloss"
    ;;
a272 1
      arm*-*-netbsdelf*) ;;
d279 1
a279 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-newlib target-libiberty target-libgloss ${libgcj}"
d291 1
a291 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libiberty ${libgcj}"
d306 1
a306 1
  alpha*-*-freebsd* | alpha*-*-kfreebsd*-gnu)
a312 3
  am33_2.0-*-linux*)
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
    ;;
d323 1
a323 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3"
d327 1
a327 1
      *) noconfigdirs="$noconfigdirs gdb readline"
d362 1
a362 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
d365 1
a365 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d368 1
a368 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj} gcc gdb newlib"
d371 1
a371 1
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
d374 1
a374 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d377 1
a377 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
d380 1
a380 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
d386 1
a386 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj} target-libf2c"
d389 1
a389 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj} target-libf2c"
a409 3
  i960-*-*)
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
    ;;
d418 1
a418 1
  i[[3456789]]86-*-coff | i[[3456789]]86-*-elf)
d421 1
a421 1
  i[[3456789]]86-*-freebsd* | i[[3456789]]86-*-kfreebsd*-gnu)
d424 1
a424 1
  i[[3456789]]86-*-linux*)
d435 1
a435 1
      noconfigdirs="$noconfigdirs target-newlib"
d443 1
a443 1
  i[[3456789]]86-*-mingw32*)
d449 2
a450 2
      i[[3456789]]86-*-mingw32) ;; # keep gdb tcl tk expect etc.
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix gnuserv"
d463 1
a463 1
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix libgui gnuserv"
d467 2
a468 2
  i[[3456789]]86-*-pe)
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d470 1
a470 1
  i[[3456789]]86-*-sco3.2v5*)
d475 1
a475 1
  i[[3456789]]86-*-sco*)
d478 1
a478 1
  i[[3456789]]86-*-solaris2*)
d481 1
a481 1
  i[[3456789]]86-*-sysv4*)
d484 3
a486 6
  i[[3456789]]86-*-beos*)
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
    ;;
  m32r-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
d488 1
a488 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
d502 1
a502 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb libgloss"
d516 1
a516 1
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl tix gnuserv ${libgcj}"
d522 1
a522 1
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl tix gnuserv ${libgcj}"
d527 3
d533 5
d555 1
d560 1
a560 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d570 1
a570 1
    ;;
d582 3
a584 3
      i[[3456789]]86-*-vsta) ;; # don't add gprof back in
      i[[3456789]]86-*-go32*) ;; # don't add gprof back in
      i[[3456789]]86-*-msdosdjgpp*) ;; # don't add gprof back in
d612 1
a612 1
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld target-libstdc++-v3 opcodes target-libgloss ${libgcj}"
a628 3
  xtensa-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
d630 1
a630 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
d656 6
a661 6
  if test x"${LANGUAGES+set}" = xset; then
    enable_languages="${LANGUAGES}"
      echo configure.in: warning: setting LANGUAGES is deprecated, use --enable-languages instead 1>&2
  else
    enable_languages=all
  fi
d663 6
a668 6
  if test x"${enable_languages}" = x ||
     test x"${enable_languages}" = xyes;
     then
    echo configure.in: --enable-languages needs at least one language argument 1>&2
    exit 1
  fi
d670 1
a670 1
enable_languages=`echo "${enable_languages}" | sed -e 's/[[ 	,]][[ 	,]]*/,/g' -e 's/,$//'`
d675 5
a679 3
for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
  case ${lang_frag} in
    ..) ;;
d682 2
a683 1
    ${srcdir}/gcc/[[*]]/config-lang.in) ;;
d685 17
a701 16
      # From the config-lang.in, get $language, $lang_requires
      language=
      lang_requires=
      . ${lang_frag}
      for other in ${lang_requires} ; do
        case ,${enable_languages}, in
	  *,$other,*) ;;
	  *,all,*) ;;
	  *,$language,*)
	    echo " \`$other' language required by \`$language'; enabling" 1>&2
	    enable_languages="${enable_languages},${other}"
	    ;;
	esac
      done
      ;;
  esac
d704 31
a734 40
for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
  case ${lang_frag} in
    ..) ;;
    # The odd quoting in the next line works around
    # an apparent bug in bash 1.12 on linux.
    ${srcdir}/gcc/[[*]]/config-lang.in) ;;
    *)
      # From the config-lang.in, get $language, $target_libs, 
      # $lang_dirs, and $build_by_default
      language=
      target_libs=
      lang_dirs=
      build_by_default=
      . ${lang_frag}
      if test "x$language" = x ; then
        echo "${lang_frag} doesn't set \$language." 1>&2
        exit 1
      fi
      case ,${enable_languages}, in
        *,${language},*)
          # Language was explicitly selected; include it.
          add_this_lang=yes
          ;;
        *,all,*)
          # 'all' was selected; include 'default' languages.
          case ${build_by_default} in
            no) add_this_lang=no ;;
            *) add_this_lang=yes ;;
          esac 
          ;;
        *) add_this_lang=no ;;
      esac
      case ${add_this_lang} in
        no)
          # Remove language-dependent dirs.
          eval noconfigdirs='"$noconfigdirs "'\"$target_libs $lang_dirs\"
          ;;
      esac
      ;;
  esac
d783 14
d855 7
d867 1
a867 1
if test x"${with_headers}" != x && test x"${with_headers}" != xno ; then
d884 1
a884 1
if test x"${with_libs}" != x && test x"${with_libs}" != xno ; then
a934 1
host_makefile_frag=/dev/null
d940 1
a940 3
    # If "ar" in $PATH is GNU ar, the symbol table may need rebuilding.
    # If it's HP/UX ar, this should be harmless.
    RANLIB="ar ts"
d944 1
a952 1
    # Used to have BISON=yacc.
d954 1
d958 1
d966 1
d977 6
d989 3
d1009 1
d1013 1
d1015 1
a1015 1
  i[[3456789]]86-*-sysv5*)
d1018 1
a1018 1
  i[[3456789]]86-*-dgux*)
d1022 1
a1022 1
  i[[3456789]]86-ncr-sysv4.3*)
d1026 1
d1028 1
a1028 1
  i[[3456789]]86-ncr-sysv4*)
d1037 2
a1038 1
  i[[3456789]]86-*-sco3.2v5*)
d1040 1
a1040 1
  i[[3456789]]86-*-sco*)
d1046 1
a1046 1
  i[[3456789]]86-*-udk*)
d1049 4
a1052 1
  i[[3456789]]86-*-solaris2*)
d1055 4
a1058 1
  i[[3456789]]86-*-msdosdjgpp*)
d1082 4
d1088 1
d1092 1
d1106 3
d1112 9
a1120 4
extra_arflags_for_target=
extra_nmflags_for_target=
extra_ranlibflags_for_target=
target_makefile_frag=/dev/null
d1122 4
a1125 1
  i[[3456789]]86-*-netware*)
d1134 2
a1135 10
  *-*-aix4.[[3456789]]* | *-*-aix[[56789]].*)
    # nm and ar from AIX 4.3 and above require -X32_64 flag to all ar and nm 
    # commands to handle both 32-bit and 64-bit objects.  These flags are
    # harmless if we're using GNU nm or ar.
    extra_arflags_for_target=" -X32_64"
    extra_nmflags_for_target=" -B -X32_64"
    ;;
  *-*-darwin*)
    # ranlib from Darwin requires the -c flag to look at common symbols.
    extra_ranlibflags_for_target=" -c"
d1142 1
a1142 1
alphaieee_frag=/dev/null
d1154 1
a1154 1
ospace_frag=/dev/null
d1172 9
d1197 1
a1197 1
  extra_host_args="$extra_host_args --with-gnu-as"
d1203 1
a1203 1
  extra_host_args="$extra_host_args --with-gnu-ld"
d1206 1
a1206 1
# If using newlib, add --with-newlib to the extra_host_args so that gcc/configure
d1211 12
a1222 1
  extra_host_args="$extra_host_args --with-newlib"
d1225 7
d1236 4
d1244 1
a1244 1
    extra_host_args="${extra_host_args} --with-stabs"
d1253 1
a1253 1
    extra_host_args="$extra_host_args -x-libraries=/usr/lib/pa20_64 -x-includes=/usr/X11R6/include"
d1276 1
a1276 272
# Some systems (e.g., one of the i386-aix systems the gas testers are
# using) don't handle "\$" correctly, so don't use it here.
tooldir='${exec_prefix}'/${target_alias}
build_tooldir=${tooldir}

# Generate a default definition for YACC.  This is used if the makefile can't
# locate bison or byacc in objdir.

for prog in 'bison -y' byacc yacc
do
  set dummy $prog; tmp=$2
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/$tmp; then
      DEFAULT_YACC="$prog"
      break
    fi
  done
  IFS="$save_ifs"

  test -n "$DEFAULT_YACC" && break
done

# Generate a default definition for M4.  This is used if the makefile can't
# locate m4 in objdir.

for prog in gm4 gnum4 m4
do
  set dummy $prog; tmp=$2
  IFS="${IFS=   }"; save_ifs="$IFS"; IFS="${IFS}:"
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/$tmp; then
      DEFAULT_M4="$prog"
      break
    fi
  done
  IFS="$save_ifs"

  test -n "$DEFAULT_M4" && break
done

# Generate a default definition for LEX.  This is used if the makefile can't
# locate flex in objdir.

for prog in flex lex
do
  set dummy $prog; tmp=$2
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/$tmp; then
      DEFAULT_LEX="$prog"
      break
    fi
  done
  IFS="$save_ifs"

  test -n "$DEFAULT_LEX" && break
done

if test "${build}" != "${host}" ; then
  # If we are doing a Canadian Cross, in which the host and build systems
  # are not the same, we set reasonable default values for the tools.

  BISON=${BISON-bison}
  CC=${CC-${host_alias}-gcc}
  CFLAGS=${CFLAGS-"-g -O2"}
  CXX=${CXX-${host_alias}-c++}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
  CC_FOR_BUILD=${CC_FOR_BUILD-gcc}
  CC_FOR_TARGET=${CC_FOR_TARGET-${target_alias}-gcc}
  CXX_FOR_TARGET=${CXX_FOR_TARGET-${target_alias}-c++}
  GCJ_FOR_TARGET=${GCJ_FOR_TARGET-${target_alias}-gcj}
  GCC_FOR_TARGET=${GCC_FOR_TARGET-${CC_FOR_TARGET-${target_alias}-gcc}}
  BUILD_PREFIX=${build_alias}-
  BUILD_PREFIX_1=${build_alias}-
  MAKEINFO=${MAKEINFO-makeinfo}

  if test -z "${YACC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/bison; then
	YACC="bison -y"
	break
      fi
      if test -f $dir/byacc; then
	YACC=byacc
	break
      fi
      if test -f $dir/yacc; then
	YACC=yacc
	break
      fi
    done
    IFS="$save_ifs"
    if test -z "${YACC}" ; then
      YACC="bison -y"
    fi
  fi

  if test -z "${LEX}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/flex; then
	LEX=flex
	break
      fi
      if test -f $dir/lex; then
	LEX=lex
	break
      fi
    done
    IFS="$save_ifs"
    LEX=${LEX-flex}
  fi

else
  # Set reasonable default values for some tools even if not Canadian.
  # Of course, these are different reasonable default values, originally
  # specified directly in the Makefile.
  # We don't export, so that autoconf can do its job.
  # Note that all these settings are above the fragment inclusion point
  # in Makefile.in, so can still be overridden by fragments.
  # This is all going to change when we autoconfiscate...

  BISON="\$(USUAL_BISON)"
  CC_FOR_BUILD="\$(CC)"
  GCC_FOR_TARGET="\$(USUAL_GCC_FOR_TARGET)"
  BUILD_PREFIX=
  BUILD_PREFIX_1=loser-
  MAKEINFO="\$(USUAL_MAKEINFO)"
  LEX="\$(USUAL_LEX)"
  YACC="\$(USUAL_YACC)"

  # If CC is still not set, try to get gcc.
  cc_prog_is_gcc=
  if test -z "${CC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/gcc; then
	CC="gcc"
	cc_prog_is_gcc=yes
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
	break
      fi
    done
    IFS="$save_ifs"
    CC=${CC-cc}
  else
    # Determine if we are using gcc.
    cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
    if ${CC} -E conftest.c | grep yes >/dev/null 2>&1; then
      cc_prog_is_gcc=yes
    fi
    rm -f conftest.c
    if test -z "${CFLAGS}"; then
      # Here CC is set but CFLAGS is not.  Use a quick hack to use -O2 if CC
      # is set to a version of gcc.
      if test "$cc_prog_is_gcc" = yes; then
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
      fi
    fi
  fi

  # We must set the default linker to the linker used by gcc for the correct
  # operation of libtool.  If LD is not defined and we are using gcc, try to
  # set the LD default to the ld used by gcc.
  if test -z "$LD"; then
    if test "$cc_prog_is_gcc" = yes; then
      case $build in
      *-*-mingw*)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\015'` ;;
      *)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;
      esac
      case $gcc_prog_ld in
      # Accept absolute paths.
      [[\\/]* | [A-Za-z]:[\\/]*)]
        LD="$gcc_prog_ld" ;;
      esac
    fi
  fi

  CXX=${CXX-"c++"}
  CFLAGS=${CFLAGS-"-g"}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
fi

# FIXME Should this be done recursively ??? (Useful for e.g. gdbtest)
# Set up the list of links to be made.
# ${links} is the list of link names, and ${files} is the list of names to link to.

# Make the links.
configlinks="${links}"
if test -r ./config.status  ; then
  mv -f ./config.status ./config.back
fi
while test -n "${files}" ; do
  # set file to car of files, files to cdr of files
  set ${files}; file=$1; shift; files=$*
  set ${links}; link=$1; shift; links=$*

  if test ! -r ${srcdir}/${file} ; then
    if test ! -r ${file} ; then
      echo '***' "${progname}: cannot create a link \"${link}\"," 1>&2
      echo '***' "since the file \"${srcdir}/${file}\" does not exist." 1>&2
      exit 1
    else
      srcfile=${file}
    fi
  else
    srcfile=${srcdir}/${file}
  fi

  ${remove} -f ${link}
  # Make a symlink if possible, otherwise try a hard link
  if ${symbolic_link} ${srcfile} ${link} >/dev/null 2>&1 ; then
    true
  else
    # We need to re-remove the file because Lynx leaves a 
    # very strange directory there when it fails an NFS symlink.
    ${remove} -r -f ${link}
    ${hard_link} ${srcfile} ${link}
  fi
  if test ! -r ${link} ; then
    echo '***' "${progname}: unable to link \"${link}\" to \"${srcfile}\"." 1>&2
    exit 1
  fi

  echo "Linked \"${link}\" to \"${srcfile}\"."
done

# Create a .gdbinit file which runs the one in srcdir
# and tells GDB to look there for source files.

if test -r ${srcdir}/.gdbinit ; then
  case ${srcdir} in
    .) ;;
    *) cat > ./.gdbinit <<EOF
# ${NO_EDIT}
dir ${srcdir}
dir .
source ${srcdir}/.gdbinit
EOF
    ;;
  esac
fi
d1304 1
a1304 1
      if test "`type $CCBASE | sed 's/^[[^/]]*//'`" = "/usr/ucb/cc" ; then
d1330 9
a1338 4
case "${enable_shared}" in
  no | "") SET_LIB_PATH= ;;
  *) SET_LIB_PATH="\$(REALLY_SET_LIB_PATH)" ;;
esac
d1344 3
a1347 139
# Record target_configdirs and the configure arguments for target and
# build configuration in Makefile.
target_configdirs=`echo "${target_configdirs}" | sed -e 's/target-//g'`

# This is the final value for target_configdirs.  configdirs already
# has its final value, as does build_modules.  It's time to create some 
# lists of valid targets.

all_build_modules=
configure_build_modules=
for module in ${build_modules} ; do
  all_build_modules=all-build-${module}
  configure_build_modules=configure-build-${module}
done

# Determine whether gdb needs tk/tcl or not.
# Use 'maybe' since enable_gdbtk might be true even if tk isn't available
# and in that case we want gdb to be built without tk.  Ugh!
# In fact I believe gdb is the *only* package directly dependent on tk,
# so we should be able to put the 'maybe's in unconditionally and
# leave out the maybe dependencies when enable_gdbtk is false.  I'm not
# 100% sure that that's safe though.

gdb_tk="maybe-all-tcl maybe-all-tk maybe-all-itcl maybe-all-tix maybe-all-libgui"
case "$enable_gdbtk" in
  no)
    GDB_TK="" ;;
  yes)
    GDB_TK="${gdb_tk}" ;;
  *)
    # Only add the dependency on gdbtk when GDBtk is part of the gdb
    # distro.  Eventually someone will fix this and move Insight, nee
    # gdbtk to a separate directory.
    if test -d ${srcdir}/gdb/gdbtk ; then
      GDB_TK="${gdb_tk}"
    else
      GDB_TK=""
    fi
    ;;
esac

# Create the 'maybe dependencies'.  This uses a temporary file.

# While at that, we remove Makefiles if we were started for recursive
# configuration, so that the top-level Makefile reconfigures them,
# like we used to do when configure itself was recursive.
rm -f maybedep.tmp
echo '# maybedep.tmp' > maybedep.tmp

# Make-targets which may need maybe dependencies.
mts="configure all install check clean distclean dvi info install-info"
mts="${mts} installcheck mostlyclean maintainer-clean TAGS"

# Loop over modules and make-targets.
for module in ${build_modules} ; do
  if test -z "${no_recursion}" \
     && test -f ${build_subdir}/${module}/Makefile; then
    echo 1>&2 "*** removing ${build_subdir}/${module}/Makefile to force reconfigure"
    rm -f ${build_subdir}/${module}/Makefile
  fi
  for mt in ${mts} ; do
    case ${mt} in
      install) ;; # No installing build modules.
      *) echo "maybe-${mt}-build-${module}: ${mt}-build-${module}" >> maybedep.tmp ;;
    esac
  done
done
for module in ${configdirs} ; do
  if test -z "${no_recursion}" \
     && test -f ${module}/Makefile; then
    echo 1>&2 "*** removing ${module}/Makefile to force reconfigure"
    rm -f ${module}/Makefile
  fi
  for mt in ${mts} ; do
    echo "maybe-${mt}-${module}: ${mt}-${module}" >> maybedep.tmp
  done
done
for module in ${target_configdirs} ; do
  if test -z "${no_recursion}" \
     && test -f ${target_subdir}/${module}/Makefile; then
    echo 1>&2 "*** removing ${target_subdir}/${module}/Makefile to force reconfigure"
    rm -f ${target_subdir}/${module}/Makefile
  fi
  for mt in ${mts} ; do
    echo "maybe-${mt}-target-${module}: ${mt}-target-${module}" >> maybedep.tmp
  done
done
maybe_dependencies=maybedep.tmp
AC_SUBST_FILE(maybe_dependencies)

# Create the serialization dependencies.  This uses a temporary file.

AC_ARG_ENABLE([serial-configure],
[  --enable-serial-[{host,target,build}-]configure
                          Force sequential configuration of
                          sub-packages for the host, target or build
			  machine, or all sub-packages])

case ${enable_serial_configure} in
  yes)
    enable_serial_build_configure=yes
    enable_serial_host_configure=yes
    enable_serial_target_configure=yes
    ;;
esac

# These force 'configure's to be done one at a time, to avoid problems
# with contention over a shared config.cache.
rm -f serdep.tmp
echo '# serdep.tmp' > serdep.tmp
olditem=
test "x${enable_serial_build_configure}" = xyes &&
for item in ${build_configdirs} ; do
  case ${olditem} in
    "") ;;
    *) echo "configure-build-${item}: configure-build-${olditem}" >> serdep.tmp ;;
  esac
  olditem=${item}
done
olditem=
test "x${enable_serial_host_configure}" = xyes &&
for item in ${configdirs} ; do
  case ${olditem} in
    "") ;;
    *) echo "configure-${item}: configure-${olditem}" >> serdep.tmp ;;
  esac
  olditem=${item}
done
olditem=
test "x${enable_serial_target_configure}" = xyes &&
for item in ${target_configdirs} ; do
  case ${olditem} in
    "") ;;
    *) echo "configure-target-${item}: configure-target-${olditem}" >> serdep.tmp ;;
  esac
  olditem=${item}
done
serialization_dependencies=serdep.tmp
AC_SUBST_FILE(serialization_dependencies)
d1349 9
a1357 49
# Base args.  Strip norecursion, cache-file, srcdir, host, build,
# target and nonopt.  These are the ones we might not want to pass
# down to subconfigures.  Also strip program-prefix, program-suffix,
# and program-transform-name, so that we can pass down a consistent
# program-transform-name.  If autoconf has put single quotes around
# any of these arguments (because they contain shell metacharacters)
# then this will fail; in practice this only happens for
# --program-transform-name, so be sure to override --program-transform-name
# at the end of the argument list.
# These will be expanded by make, so quote '$'.
cat <<\EOF_SED > conftestsed
s/ --no[[^ ]]* / /
s/ --c[[a-z-]]*[[= ]][[^ ]]* / /
s/ --sr[[a-z-]]*[[= ]][[^ ]]* / /
s/ --ho[[a-z-]]*[[= ]][[^ ]]* / /
s/ --bu[[a-z-]]*[[= ]][[^ ]]* / /
s/ --t[[a-z-]]*[[= ]][[^ ]]* / /
s/ --program-[[pst]][[a-z-]]*[[= ]][[^ ]]* / /
s/ -cache-file[[= ]][[^ ]]* / /
s/ -srcdir[[= ]][[^ ]]* / /
s/ -host[[= ]][[^ ]]* / /
s/ -build[[= ]][[^ ]]* / /
s/ -target[[= ]][[^ ]]* / /
s/ -program-prefix[[= ]][[^ ]]* / /
s/ -program-suffix[[= ]][[^ ]]* / /
s/ -program-transform-name[[= ]][[^ ]]* / /
s/ [[^' -][^ ]*] / /
s/^ *//;s/ *$//
s,\$,$$,g
EOF_SED
sed -f conftestsed <<EOF_SED > conftestsed.out
 ${ac_configure_args} 
EOF_SED
baseargs=`cat conftestsed.out`
rm -f conftestsed conftestsed.out

# Add in --program-transform-name, after --program-prefix and
# --program-suffix have been applied to it.  Autoconf has already
# doubled dollar signs and backslashes in program_transform_name; we want
# the backslashes un-doubled, and then the entire thing wrapped in single
# quotes, because this will be expanded first by make and then by the shell. 
# Also, because we want to override the logic in subdir configure scripts to
# choose program_transform_name, replace any s,x,x, with s,y,y,.
sed -e "s,\\\\\\\\,\\\\,g; s,','\\\\'',g; s/s,x,x,/s,y,y,/" <<EOF_SED > conftestsed.out
${program_transform_name}
EOF_SED
gcc_transform_name=`cat conftestsed.out`
rm -f conftestsed.out
baseargs="$baseargs --program-transform-name='${gcc_transform_name}'"
d1362 1
a1362 1
build_configargs="--cache-file=../config.cache --build=${build_alias} --host=${build_alias} ${baseargs}"
d1364 4
a1367 13
# For host modules, accept cache file option, or specification as blank.
case "${cache_file}" in
"") # empty
  cache_file_option="" ;;
/* | [[A-Za-z]]:[[\\/]]* ) # absolute path
  cache_file_option="--cache-file=${cache_file}" ;;
*) # relative path
  cache_file_option="--cache-file=../${cache_file}" ;;
esac

host_configargs="${cache_file_option} --build=${build_alias} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"

target_configargs=${baseargs}
d1375 1
a1375 1
  target_configargs="--with-cross-host=${host_alias} ${target_configargs}"
d1380 1
a1380 1
  target_configargs="--enable-multilib ${target_configargs}"
d1386 1
a1386 1
  target_configargs="--with-newlib ${target_configargs}"
d1390 1
a1390 1
target_configargs="--cache-file=../config.cache --host=${target_alias} --build=${build_alias} ${target_configargs}"
d1396 24
a1419 13
case "${with_gxx_include_dir}" in
  yes)
    AC_MSG_ERROR([--with-gxx-include-dir=[[dir]] requires a directory])
    ;;
  no | "")
    case "${enable_version_specific_runtime_libs}" in
      yes) gxx_include_dir='${libsubdir}/include/c++' ;;
      *)
        . ${srcdir}/config.if
        gxx_include_dir='${prefix}/include/'${libstdcxx_incdir} ;;
    esac ;;
  *) gxx_include_dir=${with_gxx_include_dir} ;;
esac
d1424 1
a1424 1
  case " $target_configargs " in
d1428 1
a1428 1
     FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/$(TARGET_SUBDIR)/winsup -L$$r/$(TARGET_SUBDIR)/winsup/cygwin -L$$r/$(TARGET_SUBDIR)/winsup/w32api/lib -isystem $$s/winsup/include -isystem $$s/winsup/cygwin/include -isystem $$s/winsup/w32api/include' ;;
d1455 1
a1455 1
   i[[3456789]]86-*-linux*-no)
a1471 4
# Allow the user to override the flags for
# our build compiler if desired.
CFLAGS_FOR_BUILD=${CFLAGS_FOR_BUILD-${CFLAGS}}

d1478 1
a1478 1
  FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -B$(build_tooldir)/bin/ -B$(build_tooldir)/lib/ -isystem $(build_tooldir)/include -isystem $(build_tooldir)/sys-include'
d1494 1
a1494 1
  CC_FOR_TARGET=`echo gcc | sed "${program_transform_name}"`
d1496 6
a1501 1
CC_FOR_TARGET=$CC_FOR_TARGET' $(FLAGS_FOR_TARGET)'
d1510 1
a1510 1
  GCJ_FOR_TARGET=`echo gcj | sed "${program_transform_name}"`
d1512 4
a1515 1
GCJ_FOR_TARGET=$GCJ_FOR_TARGET' $(FLAGS_FOR_TARGET)'
d1518 1
a1518 2
libstdcxx_flags='`test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags --build-includes` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
raw_libstdcxx_flags='-L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
d1521 1
a1521 3
  if test "x${RAW_CXX_FOR_TARGET+set}" != xset; then
    RAW_CXX_FOR_TARGET=${CXX_FOR_TARGET}
  fi
d1526 1
a1526 4
  # RAW_CXX_FOR_TARGET is for linking C++ or java; CXX_FOR_TARGET is for
  # all other cases.
  CXX_FOR_TARGET='$$r/gcc/g++ -B$$r/gcc/ -nostdinc++ '$libstdcxx_flags
  RAW_CXX_FOR_TARGET='$$r/gcc/xgcc -shared-libgcc -B$$r/gcc/ -nostdinc++ '$raw_libstdcxx_flags
a1528 1
  RAW_CXX_FOR_TARGET=${CXX_FOR_TARGET}
d1530 1
a1530 2
  CXX_FOR_TARGET=`echo c++ | sed "${program_transform_name}"`
  RAW_CXX_FOR_TARGET=${CXX_FOR_TARGET}
d1532 5
a1536 5
CXX_FOR_TARGET=$CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)'
RAW_CXX_FOR_TARGET=$RAW_CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)'

qCXX_FOR_TARGET=`echo "$CXX_FOR_TARGET" | sed 's,[[&%]],\\\&,g'`
qRAW_CXX_FOR_TARGET=`echo "$RAW_CXX_FOR_TARGET" | sed 's,[[&%]],\\\&,g'`
d1544 1
a1544 2
qqCXX_FOR_TARGET=`echo "$qCXX_FOR_TARGET" | sed -e 's,[[$]][[$]],$$$$,g'`
qqRAW_CXX_FOR_TARGET=`echo "$qRAW_CXX_FOR_TARGET" | sed -e 's,[[$]][[$]],$$$$,g'`
d1546 17
a1562 129
# Wrap CC_FOR_TARGET and friends, for certain types of builds.
CC_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${CC_FOR_TARGET}"
GCJ_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${GCJ_FOR_TARGET}"
CXX_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${qCXX_FOR_TARGET}"
RAW_CXX_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${qRAW_CXX_FOR_TARGET}"
CXX_FOR_TARGET_FOR_RECURSIVE_MAKE="\$(STAGE_CC_WRAPPER) ${qqCXX_FOR_TARGET}"
RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE="\$(STAGE_CC_WRAPPER) ${qqRAW_CXX_FOR_TARGET}"

# Makefile fragments.
host_makefile_frag=${srcdir}/${host_makefile_frag}
target_makefile_frag=${srcdir}/${target_makefile_frag}
alphaieee_frag=${srcdir}/${alphaieee_frag}
ospace_frag=${srcdir}/${ospace_frag}
AC_SUBST_FILE(host_makefile_frag)
AC_SUBST_FILE(target_makefile_frag)
AC_SUBST_FILE(alphaieee_frag)
AC_SUBST_FILE(ospace_frag)

# Miscellanea: directories, flags, etc.
AC_SUBST(SET_LIB_PATH)
AC_SUBST(RPATH_ENVVAR)
AC_SUBST(BUILD_PREFIX)
AC_SUBST(BUILD_PREFIX_1)
AC_SUBST(configlinks)
AC_SUBST(gcc_version_trigger)
AC_SUBST(gcc_version)
AC_SUBST(tooldir)
AC_SUBST(build_tooldir)
AC_SUBST(GDB_TK)
AC_SUBST(gxx_include_dir)
AC_SUBST(libstdcxx_incdir)

# Build module lists & subconfigure args.
AC_SUBST(build_configargs)
AC_SUBST(configure_build_modules)
AC_SUBST(all_build_modules)

# Host module lists & subconfigure args.
AC_SUBST(host_configargs)
AC_SUBST(configdirs)

# Target module lists & subconfigure args.
AC_SUBST(target_configargs)
AC_SUBST(target_configdirs)

# Build tools.
AC_SUBST(BISON)
AC_SUBST(CC_FOR_BUILD)
AC_SUBST(LEX)
AC_SUBST(MAKEINFO)
AC_SUBST(YACC)
AC_SUBST(config_shell)

# Host tools.
NCN_STRICT_CHECK_TOOL(AR, ar)
NCN_STRICT_CHECK_TOOL(AS, as)
NCN_STRICT_CHECK_TOOL(DLLTOOL, dlltool)
NCN_STRICT_CHECK_TOOL(LD, ld)
NCN_STRICT_CHECK_TOOL(NM, nm)
NCN_STRICT_CHECK_TOOL(RANLIB, ranlib, :)
NCN_STRICT_CHECK_TOOL(WINDRES, windres)
NCN_STRICT_CHECK_TOOL(OBJCOPY, objcopy)
NCN_STRICT_CHECK_TOOL(OBJDUMP, objdump)
AC_SUBST(CC)
AC_SUBST(CXX)
AC_SUBST(CFLAGS)
AC_SUBST(CFLAGS_FOR_BUILD)
AC_SUBST(CXXFLAGS)
AC_SUBST(DEFAULT_YACC)
AC_SUBST(DEFAULT_LEX)
AC_SUBST(DEFAULT_M4)

# Target tools.
NCN_STRICT_CHECK_TARGET_TOOL(AR_FOR_TARGET, ar)
NCN_STRICT_CHECK_TARGET_TOOL(AS_FOR_TARGET, as)
NCN_STRICT_CHECK_TARGET_TOOL(DLLTOOL_FOR_TARGET, dlltool)
NCN_STRICT_CHECK_TARGET_TOOL(LD_FOR_TARGET, ld)
NCN_STRICT_CHECK_TARGET_TOOL(NM_FOR_TARGET, nm)
NCN_STRICT_CHECK_TARGET_TOOL(RANLIB_FOR_TARGET, ranlib, :)
NCN_STRICT_CHECK_TARGET_TOOL(WINDRES_FOR_TARGET, windres)

AC_SUBST(GCC_FOR_TARGET)
AC_SUBST(FLAGS_FOR_TARGET)
AC_SUBST(CC_FOR_TARGET)
AC_SUBST(GCJ_FOR_TARGET)
AC_SUBST(CXX_FOR_TARGET)
AC_SUBST(RAW_CXX_FOR_TARGET)
AC_SUBST(CXX_FOR_TARGET_FOR_RECURSIVE_MAKE)
AC_SUBST(RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE)

# Fix up target tools.
if test "x${build}" = "x${host}" ; then
  # In this case, the newly built tools can and should be used,
  # so we override the results of the autoconf tests.
  # This should really only happen when the tools are actually being built,
  # but that's a further refinement.  The new build scheme, where
  # tools are built into a structure paralleling where they're installed,
  # should also eliminate all of this cleanly.
  AR_FOR_TARGET="\$(USUAL_AR_FOR_TARGET)"
  AS_FOR_TARGET="\$(USUAL_AS_FOR_TARGET)"
  DLLTOOL_FOR_TARGET="\$(USUAL_DLLTOOL_FOR_TARGET)"
  LD_FOR_TARGET="\$(USUAL_LD_FOR_TARGET)"
  NM_FOR_TARGET="\$(USUAL_NM_FOR_TARGET)"
  RANLIB_FOR_TARGET="\$(USUAL_RANLIB_FOR_TARGET)"
  WINDRES_FOR_TARGET="\$(USUAL_WINDRES_FOR_TARGET)"
fi
# Certain tools may need extra flags.
AR_FOR_TARGET=${AR_FOR_TARGET}${extra_arflags_for_target}
RANLIB_FOR_TARGET=${RANLIB_FOR_TARGET}${extra_ranlibflags_for_target}
NM_FOR_TARGET=${NM_FOR_TARGET}${extra_nmflags_for_target}

AC_MSG_CHECKING([whether to enable maintainer-specific portions of Makefiles])
AC_ARG_ENABLE(maintainer-mode,
[  --enable-maintainer-mode enable make rules and dependencies not useful
                          (and sometimes confusing) to the casual installer],
      USE_MAINTAINER_MODE=$enableval,
      USE_MAINTAINER_MODE=no)
AC_MSG_RESULT($USE_MAINTAINER_MODE)
AC_SUBST(MAINTAINER_MODE_TRUE)
AC_SUBST(MAINTAINER_MODE_FALSE)
if test "$USE_MAINTAINER_MODE" = yes; then
  MAINTAINER_MODE_TRUE=
  MAINTAINER_MODE_FALSE='#'
else
  MAINTAINER_MODE_TRUE='#'
  MAINTAINER_MODE_FALSE=
fi	
MAINT=$MAINTAINER_MODE_TRUE
AC_SUBST(MAINT)dnl
d1564 5
a1568 1
AC_OUTPUT(Makefile)
@


1.112.2.3
log
@Merge from mainline.
@
text
@a371 3
  *-*-uclinux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-rda ${libgcj}"
    ;;
@


1.112.2.4
log
@Merge mainline to branch.  GDB is broken until I update cp-names.y.
@
text
@d507 1
a507 1
    noconfigdirs="$noconfigdirs ${libgcj} tix readline mmalloc libgui itcl gdb ld"
d1829 1
a1829 3
# Host dirs don't like to share a cache file either, horribly enough.
# This seems to be due to autoconf 2.5x stupidity.
host_configargs="--cache-file=./config.cache --build=${build_alias} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"
a1852 9
# Different target subdirs use different values of certain variables
# (notably CXX).  Worse, multilibs use *lots* of different values.
# Worse yet, autoconf 2.5x makes some of these 'precious', meaning that
# it doesn't automatically accept command-line overrides of them.
# This means it's not safe for target subdirs to share a cache file,
# which is disgusting, but there you have it.  Hopefully this can be
# fixed in future.  It's still worthwhile to use a cache file for each
# directory.  I think.

d1854 1
a1854 1
target_configargs="--cache-file=./config.cache --host=${target_alias} --build=${build_alias} ${target_configargs}"
@


1.112.2.5
log
@Merge drow-cplus-merge-20040208 to drow-cplus-branch.
@
text
@d2 1
a2 1
#   1999, 2000, 2001, 2002, 2003, 2004 Free Software Foundation, Inc.
d1253 1
a1253 1
  mips*-*-irix[[56]]*)
@


1.111
log
@2002-10-02  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Bring following over from gcc:

2002-09-30  Ulrich Weigand  <uweigand@@de.ibm.com>

	* configure.in (s390*-*-linux*): Enable libgcj.
@
text
@d1324 16
a1339 4
  sed -e 's/^SET_LIB_PATH[ 	]*=.*$/SET_LIB_PATH = $(REALLY_SET_LIB_PATH)/' \
      Makefile > Makefile.tem
  rm -f Makefile
  mv -f Makefile.tem Makefile
a1340 9
  case "${host}" in
  *-*-hpux*)
    sed -e 's/^RPATH_ENVVAR[ 	]*=.*$/RPATH_ENVVAR = SHLIB_PATH/' \
	Makefile > Makefile.tem
    rm -f Makefile
    mv -f Makefile.tem Makefile
    ;;
  esac
fi
@


1.110
log
@2002-09-29  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Makefile.tpl: Make more autoconf-friendly.
	* Makefile.in: Regenerate.
	* configure: Make substitution more autoconf-like.

2002-09-28  Richard Earnshaw  <rearnsha@@arm.com>

	* configure.in (arm-*-coff, strongarm-*-coff, xscale-*-coff): Use a
	single entry to handle all these.
	(arm-*-elf, strongarm-*-elf, xscale-*-elf): Likewise.  Also enable
	libjava on arm-*-elf.
@
text
@a423 4
  s390*-*-linux*)
    # The libffi port is not yet in the GCC tree
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;;
@


1.109
log
@	* configure.in (powerpc-*-darwin*): Don't configure BFD, TK, or the
	things that depend on them.
@
text
@d334 6
a353 12
    ;;
  strongarm-*-elf)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  strongarm-*-coff)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  xscale-*-elf)
    noconfigdirs="$noconfigdirs target-libffi target-qthreads"
    ;;
  xscale-*-coff)
    noconfigdirs="$noconfigdirs ${libgcj}"
@


1.108
log
@2002-09-25  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Makefile.tpl: Rewrite substituted lines to look autoconfy.
	* Makefile.in: Regenerate.
	* configure.in: Rewrite sed statements to look autoconfy.
@
text
@d530 3
@


1.107
log
@2002-09-22  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* Makefile.def: New file.
	* Makefile.tpl: New file.
	* Makefile.in: Generate from Makefile.tpl with 'autogen Makefile.def'.

	* configure.in: Minor rearrangement.  Simplify tests.
@
text
@d1545 11
a1555 11
s:^TARGET_CONFIGDIRS[ 	]*=.*$:TARGET_CONFIGDIRS = ${target_configdirs}:
s%^TARGET_CONFIGARGS[ 	]*=.*$%TARGET_CONFIGARGS = ${targargs}%
s%^FLAGS_FOR_TARGET[ 	]*=.*$%FLAGS_FOR_TARGET = ${FLAGS_FOR_TARGET}%
s%^CC_FOR_TARGET[ 	]*=.*$%CC_FOR_TARGET = \$(STAGE_CC_WRAPPER) ${CC_FOR_TARGET}%
s%^GCJ_FOR_TARGET[      ]*=.*$%GCJ_FOR_TARGET = \$(STAGE_CC_WRAPPER) ${GCJ_FOR_TARGET}%
s%^CXX_FOR_TARGET[ 	]*=.*$%CXX_FOR_TARGET = \$(STAGE_CC_WRAPPER) ${qCXX_FOR_TARGET}%
s%^CXX_FOR_TARGET_FOR_RECURSIVE_MAKE[ 	]*=.*$%CXX_FOR_TARGET_FOR_RECURSIVE_MAKE = \$(STAGE_CC_WRAPPER) ${qqCXX_FOR_TARGET}%
s%^TARGET_SUBDIR[ 	]*=.*$%TARGET_SUBDIR = ${target_subdir}%
s%^BUILD_SUBDIR[ 	]*=.*$%BUILD_SUBDIR = ${build_subdir}%
s%^BUILD_CONFIGARGS[ 	]*=.*$%BUILD_CONFIGARGS = ${buildargs}%
s%^gxx_include_dir[ 	]*=.*$%gxx_include_dir=${gxx_include_dir}%
@


1.106
log
@* configure.in (with_headers): Skip copy if value is "yes".
(with_libs): Likewise.
@
text
@a82 16
## These two lists are of directories that are to be removed from the
## ${configdirs} list for either cross-compilations or for native-
## compilations.  For example, it doesn't make that much sense to
## cross-compile Emacs, nor is it terribly useful to compile target-libiberty in
## a native environment.  

# directories to be built in the native environment only
#
# This must be a single line because of the way it is searched by grep in
# the code below.
native_only="autoconf automake libtool fileutils find gawk gettext grep gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms snavigator gnuserv target-gperf"

# directories to be built in a cross environment only
#
cross_only="target-libgloss target-newlib target-opcodes"

d171 6
a176 2
# Remove these if host!=target.  Similarly, some are only suitable
# for cross toolchains; remove if host=target.
d746 1
a746 2
    if test -r $srcdir/$dirname/configure \
	|| test -r $srcdir/$dirname/configure.in ; then
d756 1
a756 2
    if test -r $srcdir/$dirname/configure \
	|| test -r $srcdir/$dirname/configure.in ; then
d772 1
a772 1
      if test -r $srcdir/$i/configure || test -r $srcdir/$i/configure.in ; then
@


1.105
log
@2002-09-20  Nathanael Nerode  <neroden@@gcc.gnu.org>

	* configure.in (*-*-netbsd*): Use noconfigdirs, not skipdirs.
	* configure.in (sh*-*-pe*): Ditto.
	* configure.in (mips*-*-pe*): Ditto.
	* configure.in (*arm-wince-pe): Ditto.
@
text
@d879 2
a880 2
# Handle --with-headers=XXX.  The contents of the named directory are
# copied to $(tooldir)/sys-include.
d886 7
a892 5
  case "${exec_prefixoption}" in
  "") x=${prefix} ;;
  *) x=${exec_prefix} ;;
  esac
  copy_dirs="${copy_dirs} ${with_headers} $x/${target_alias}/sys-include"
d895 3
a897 2
# Handle --with-libs=XXX.  Multiple directories are permitted.  The
# contents are copied to $(tooldir)/lib.
d903 11
a913 9
  # Copy the libraries in reverse order, so that files in the first named
  # library override files in subsequent libraries.
  case "${exec_prefixoption}" in
  "") x=${prefix} ;;
  *) x=${exec_prefix} ;;
  esac
  for l in ${with_libs}; do
    copy_dirs="$l $x/${target_alias}/lib ${copy_dirs}"
  done
@


1.104
log
@2002-09-20  Nathanael Nerode  <neroden@@doctor.moo.mud.org>

	* configure.in: Rearrange.
@
text
@d280 1
a280 1
    skipdirs="$skipdirs target-newlib target-libiberty target-libgloss"
d336 1
a336 1
    skipdirs="$skipdirs target-newlib"
@


1.103
log
@* Makefile.in (GCC_FOR_TARGET): Prepend STAGE_CC_WRAPPER.
* configure.in (CC_FOR_TARGET, GCJ_FOR_TARGET, CXX_FOR_TARGET,
CXX_FOR_TARGET_FOR_RECURSIVE_MAKE): Likewise.
@
text
@a1129 19
# If we aren't going to be using gcc, see if we can extract a definition
# of CC from the fragment.
# Actually, use the 'pre-extracted' version above.
if test -z "${CC}" && test "${build}" = "${host}" ; then
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  found=
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/gcc; then
      found=yes
      break
    fi
  done
  IFS="$save_ifs"
  if test -z "${found}" && test -n "${tentative_cc}" ; then
    CC=$tentative_cc
  fi
fi

d1265 19
@


1.103.10.1
log
@Merge with mainline; tag is carlton_dictionary-20020927-merge
@
text
@d83 16
d187 2
a188 6
# Remove these if host!=target.  
native_only="autoconf automake libtool fileutils find gawk gettext grep gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms snavigator gnuserv target-gperf"

# Similarly, some are only suitable for cross toolchains.
# Remove these if host=target.
cross_only="target-libgloss target-newlib target-opcodes"
d280 1
a280 1
    noconfigdirs="$noconfigdirs target-newlib target-libiberty target-libgloss"
d336 1
a336 1
    noconfigdirs="$noconfigdirs target-newlib"
d758 2
a759 1
    if test -r $srcdir/$dirname/configure ; then
d769 2
a770 1
    if test -r $srcdir/$dirname/configure ; then
d786 1
a786 1
      if test -r $srcdir/$i/configure ; then
d879 2
a880 2
# Handle --with-headers=XXX.  If the value is not "yes", the contents of
# the named directory are copied to $(tooldir)/sys-include.
d886 5
a890 7
  if test x"${with_headers}" != xyes ; then
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    copy_dirs="${copy_dirs} ${with_headers} $x/${target_alias}/sys-include"
  fi
d893 2
a894 3
# Handle --with-libs=XXX.  If the value is not "yes", the contents of
# the name directories are copied to $(tooldir)/lib.  Multiple directories
# are permitted.
d900 9
a908 11
  if test x"${with_libs}" != xyes ; then
    # Copy the libraries in reverse order, so that files in the first named
    # library override files in subsequent libraries.
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    for l in ${with_libs}; do
      copy_dirs="$l $x/${target_alias}/lib ${copy_dirs}"
    done
  fi
d1130 19
a1284 19
# If we aren't going to be using gcc, see if we can extract a definition
# of CC from the fragment.
# Actually, use the 'pre-extracted' version above.
if test -z "${CC}" && test "${build}" = "${host}" ; then
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  found=
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/gcc; then
      found=yes
      break
    fi
  done
  IFS="$save_ifs"
  if test -z "${found}" && test -n "${tentative_cc}" ; then
    CC=$tentative_cc
  fi
fi

d1554 11
a1564 11
s:@@target_configdirs@@:${target_configdirs}:
s%@@target_configargs@@%${targargs}%
s%@@FLAGS_FOR_TARGET@@%${FLAGS_FOR_TARGET}%
s%@@CC_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${CC_FOR_TARGET}%
s%@@GCJ_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${GCJ_FOR_TARGET}%
s%@@CXX_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${qCXX_FOR_TARGET}%
s%@@CXX_FOR_TARGET_FOR_RECURSIVE_MAKE@@%\$(STAGE_CC_WRAPPER) ${qqCXX_FOR_TARGET}%
s%@@target_subdir@@%${target_subdir}%
s%@@build_subdir@@%${build_subdir}%
s%@@build_configargs@@%${buildargs}%
s%@@gxx_include_dir@@%${gxx_include_dir}%
@


1.103.10.2
log
@Merge with mainline; merge tag carlton_dictionary-20021011-merge.
@
text
@a333 6
  arm-*-coff | strongarm-*-coff | xscale-*-coff)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  arm-*-elf* | strongarm-*-elf* | xscale-*-elf*)
    noconfigdirs="$noconfigdirs target-libffi target-qthreads"
    ;;
d349 12
d370 1
a370 1
  c4x-*-* | tic4x-*-*)
d430 4
a529 3
  powerpc-*-darwin*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb tk itcl tix libgui gprof ${libgcj}"
    ;;
d1331 13
a1343 3
  SET_LIB_PATH="\$(REALLY_SET_LIB_PATH)"
else
  SET_LIB_PATH=
a1344 13
sed -e "s/@@SET_LIB_PATH@@/${SET_LIB_PATH}/" Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile


case "${host}" in
  *-*-hpux*) RPATH_ENVVAR=SHLIB_PATH ;;
  *) RPATH_ENVVAR=LD_LIBRARY_PATH ;;
esac
sed -e "s/@@RPATH_ENVVAR@@/${RPATH_ENVVAR}/" Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile

@


1.103.10.3
log
@2002-10-25  David Carlton  <carlton@@math.stanford.edu>

	* symtab.c (lookup_symbol_aux_block): New function.
	(lookup_symbol_aux_local): Call lookup_symbol_aux_block.
	(lookup_symbol_aux): Ditto.

	* Merge from mainline; tag is carlton_dictionary-20021025-merge.

2002-10-25  David Carlton  <carlton@@math.stanford.edu>

	* cp-support.c: Add comment to demangled name pitfalls.
	* symtab.c (lookup_transparent_type): Add FIXME comment at
	beginning.

2002-10-23  David Carlton  <carlton@@math.stanford.edu>

	* symtab.c: Delete cplusplus_hint.
	Delete prototype for find_template_name_end.
	* dwarf2read.c (scan_partial_symbols): Add in a gdb_assert from a
	later version of my namespace_minimal patch.

2002-10-25  David Carlton  <carlton@@math.stanford.edu>

	* gdb.c++/namespace.exp: Change all of the setup_xfail tests that
	I added into setup_kfails.
@
text
@a424 7
    # The GCC port for glibc1 has no MD_FALLBACK_FRAME_STATE_FOR, so let's
    # not build java stuff by default.
    case "${target}" in
      *-*-*libc1*)
	noconfigdirs="$noconfigdirs ${libgcj}";;
    esac

@


1.103.10.4
log
@2002-11-15  David Carlton  <carlton@@math.stanford.edu>

	* Merge from mainline; tag is carlton_dictionary-20021115-merge.
@
text
@d79 1
a79 1
target_tools="target-examples target-groff target-gperf target-rda"
@


1.103.10.5
log
@2002-12-23  David Carlton  <carlton@@math.stanford.edu>

	* Merge from mainline; tag is carlton_dictionary-20021223-merge.
@
text
@a35 24
extra_host_args=
# Define the trigger file to make sure configure will re-run whenever
# the gcc version number changes.
if [ "${with_gcc_version_trigger+set}" = set ]; then
    gcc_version_trigger="$with_gcc_version_trigger"
    gcc_version=`grep version_string ${with_gcc_version_trigger} | sed -e 's/.*\"\([^ \"]*\)[ \"].*/\1/'`
else
    # If gcc's sources are available, define the trigger file.
    if [ -f ${topsrcdir}/gcc/version.c ] ; then
	gcc_version_trigger=${topsrcdir}/gcc/version.c
	gcc_version=`grep version_string ${gcc_version_trigger} | sed -e 's/.*\"\([^ \"]*\)[ \"].*/\1/'`
	case "$arguments" in
	  *--with-gcc-version-trigger=$gcc_version_trigger* )
	    ;;
	  * )
	    # Add to all subconfigure arguments: build, host, and target.
	    arguments="--with-gcc-version-trigger=$gcc_version_trigger $arguments"
	    ;;
	esac
	# This will be redundant when we start all subconfigures from the Makefile.
	extra_host_args="--with-gcc-version-trigger=$gcc_version_trigger $extra_host_args"
    fi
fi

d38 3
a40 4
### (library or tools, host or target), doing a dependency sort.

# Subdirs will be configured in the order listed in build_configdirs, 
# configdirs, or target_configdirs; see the serialization section below.
a41 6
# Dependency sorting is only needed when *configuration* must be done in 
# a particular order.  In all cases a dependency should be specified in 
# the Makefile, whether or not it's implicitly specified here.

# Double entries in build_configdirs, configdirs, or target_configdirs may
# cause circular dependencies and break everything horribly.
d45 1
a45 1
host_libs="intl mmalloc libiberty opcodes bfd readline db tcl tk itcl tix libgui zlib"
d52 1
a52 3
# binutils, gas and ld appear in that order because it makes sense to run
# "make check" in that particular order.
host_tools="texinfo byacc flex bison binutils gas ld gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool grep diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils snavigator gettext zip fastjar"
d126 1
a126 2
build_prefix=build-
build_subdir=${build_prefix}${build_alias}
d200 4
d205 1
a205 1
    configdirs="$configdirs libtermcap" ;;
a240 3
  *-*-darwin*)
    noconfigdirs="$noconfigdirs tk itcl tix libgui"
    ;;
d502 1
a502 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb libgloss"
d528 1
a528 1
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb gprof ${libgcj}"
d855 7
a1120 2
extra_arflags_for_target=
extra_nmflags_for_target=
d1122 3
d1135 1
a1135 5
    # nm and ar from AIX 4.3 and above require -X32_64 flag to all ar and nm 
    # commands to handle both 32-bit and 64-bit objects.  These flags are
    # harmless if we're using GNU nm or ar.
    extra_arflags_for_target=" -X32_64"
    extra_nmflags_for_target=" -B -X32_64"
d1197 1
a1197 1
  extra_host_args="$extra_host_args --with-gnu-as"
d1203 1
a1203 1
  extra_host_args="$extra_host_args --with-gnu-ld"
d1206 1
a1206 1
# If using newlib, add --with-newlib to the extra_host_args so that gcc/configure
d1211 1
a1211 1
  extra_host_args="$extra_host_args --with-newlib"
d1238 1
a1238 1
    extra_host_args="${extra_host_args} --with-stabs"
d1244 1
a1244 1
    extra_host_args="${extra_host_args} --with-stabs"
d1253 1
a1253 1
    extra_host_args="$extra_host_args -x-libraries=/usr/lib/pa20_64 -x-includes=/usr/X11R6/include"
a1256 3
# This will go away when we start subconfigures from the Makefile.
withoptions="${withoptions} ${extra_host_args}"

a1347 101
# Record target_configdirs and the configure arguments for target and
# build configuration in Makefile.
target_configdirs=`echo "${target_configdirs}" | sed -e 's/target-//g'`

# This is the final value for target_configdirs.  configdirs already
# has its final value.  It's time to create some lists of valid targets.

all_build_modules=
configure_build_modules=
# Only make build modules if build != host.
# This should be done more generally, but at the moment it doesn't matter.
if test ${host_alias} != ${build_alias} ; then
  all_build_modules=all-build-libiberty
  configure_build_modules=configure-build-libiberty
fi

all_host_modules=
check_host_modules=
install_host_modules=
configure_host_modules=
for module in ${configdirs} ; do
  all_host_modules="${all_host_modules} all-${module}"
  check_host_modules="${check_host_modules} check-${module}"
  install_host_modules="${install_host_modules} install-${module}"
  configure_host_modules="${configure_host_modules} configure-${module}"
done
install_host_modules_nogcc=`echo "${install_host_modules}" | sed -e 's/install-gcc//g'`

all_target_modules=
check_target_modules=
install_target_modules=
configure_target_modules=
for module in ${target_configdirs} ; do
  all_target_modules="${all_target_modules} all-target-${module}"
  check_target_modules="${check_target_modules} check-target-${module}"
  install_target_modules="${install_target_modules} install-target-${module}"
  configure_target_modules="${configure_target_modules} configure-target-${module}"
done

# Determine whether gdb needs tk/tcl or not.
# Use 'maybe' since enable_gdbtk might be true even if tk isn't available
# and in that case we want gdb to be built without tk.  Ugh!
# In fact I believe gdb is the *only* package directly dependent on tk,
# so we should be able to put the 'maybe's in unconditionally and
# leave out the maybe dependencies when enable_gdbtk is false.  I'm not
# 100% sure that that's safe though.
case "$enable_gdbtk" in
  no)
    GDB_TK="" ;;
  *)
    GDB_TK="maybe-all-tcl maybe-all-tk maybe-all-itcl maybe-all-tix maybe-all-libgui" ;;
esac

# Create the 'maybe dependencies'.  This uses a temporary file.
rm -f maybedep.tmp
for item in ${all_build_modules} ${all_host_modules} ${all_target_modules} \
	${install_host_modules} ${install_target_modules} \
	${configure_build_modules} ${configure_host_modules} ${configure_target_modules} \
	; do
  echo "maybe-${item}: ${item}" >> maybedep.tmp
done
sed -e '/@@maybe_dependencies@@/r maybedep.tmp' \
    -e 's/@@maybe_dependencies@@//' Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile
rm -f maybedep.tmp

# Create the serialization dependencies.  This uses a temporary file.

# These force 'configure's to be done one at a time, to avoid problems
# with contention over a shared config.cache.
rm -f serdep.tmp
olditem=
for item in ${build_configdirs} ; do
  case ${olditem} in
    "") ;;
    *) echo "\$(BUILD_SUBDIR)/${item}/Makefile: \$(BUILD_SUBDIR)/${olditem}/Makefile" >> serdep.tmp ;;
  esac
  olditem=${item}
done
olditem=
for item in ${configdirs} ; do
  case ${olditem} in
    "") ;;
    *) echo "${item}/Makefile: ${olditem}/Makefile" >> serdep.tmp ;;
  esac
  olditem=${item}
done
olditem=
for item in ${target_configdirs} ; do
  case ${olditem} in
    "") ;;
    *) echo "\$(TARGET_SUBDIR)/${item}/Makefile: \$(TARGET_SUBDIR)/${olditem}/Makefile" >> serdep.tmp ;;
  esac
  olditem=${item}
done
sed -e '/@@serialization_dependencies@@/r serdep.tmp' \
    -e 's/@@serialization_dependencies@@//' Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile
rm -f serdep.tmp
d1364 3
a1366 12
# For host modules, accept cache file option, or specification as blank.
case "${cache_file}" in
"") # empty
  cache_file_option="" ;;
/* | [A-Za-z]:[\\/]* ) # absolute path
  cache_file_option="--cache-file=${cache_file}" ;;
*) # relative path
  cache_file_option="--cache-file=../${cache_file}" ;;
esac

hostargs="${cache_file_option} ${buildopt} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"

d1518 1
a1518 2
libstdcxx_flags='`test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags --build-includes` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
raw_libstdcxx_flags=' -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
d1526 1
a1526 4
  # RAW_CXX_FOR_TARGET is for linking C++ or java; CXX_FOR_TARGET is for
  # all other cases.
  CXX_FOR_TARGET='$$r/gcc/g++ -B$$r/gcc/ -nostdinc++ '$libstdcxx_flags
  RAW_CXX_FOR_TARGET='$$r/gcc/xgcc -shared-libgcc -B$$r/gcc/ -nostdinc++ '$raw_libstdcxx_flags
a1528 1
  RAW_CXX_FOR_TARGET=${CXX_FOR_TARGET}
a1530 1
  RAW_CXX_FOR_TARGET=${CXX_FOR_TARGET}
a1535 5
case $RAW_CXX_FOR_TARGET in
*' $(FLAGS_FOR_TARGET)') ;;
*) RAW_CXX_FOR_TARGET=$RAW_CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)' ;;
esac

a1536 1
qRAW_CXX_FOR_TARGET=`echo "$RAW_CXX_FOR_TARGET" | sed 's,[&%],\\\&,g'`
a1544 7
qqRAW_CXX_FOR_TARGET=`echo "$qRAW_CXX_FOR_TARGET" | sed -e 's,[$][$],$$$$,g'`

# BASE_CC_FOR_TARGET is the actual program file of CC_FOR_TARGET,
# for use in dependencies.  Replace $$r with a relative
# path if it's present.
set dummy $CC_FOR_TARGET; cc_for_target_first_word=$2
BASE_CC_FOR_TARGET=`echo "$cc_for_target_first_word" | sed -e 's,[$][$]r,.,'`
a1547 12
s%@@GDB_TK@@%${GDB_TK}%
s%@@configure_build_modules@@%${configure_build_modules}%
s%@@all_build_modules@@%${all_build_modules}%
s%@@configure_host_modules@@%${configure_host_modules}%
s%@@all_host_modules@@%${all_host_modules}%
s%@@check_host_modules@@%${check_host_modules}%
s%@@install_host_modules@@%${install_host_modules}%
s%@@install_host_modules_nogcc@@%${install_host_modules_nogcc}%
s%@@configure_target_modules@@%${configure_target_modules}%
s%@@all_target_modules@@%${all_target_modules}%
s%@@check_target_modules@@%${check_target_modules}%
s%@@install_target_modules@@%${install_target_modules}%
a1551 1
s%@@BASE_CC_FOR_TARGET@@%${BASE_CC_FOR_TARGET}%
a1553 1
s%@@RAW_CXX_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${qRAW_CXX_FOR_TARGET}%
a1554 1
s%@@RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE@@%\$(STAGE_CC_WRAPPER) ${qqRAW_CXX_FOR_TARGET}%
a1558 2
s%@@libstdcxx_incdir@@%${libstdcxx_incdir}%
s%@@host_configargs@@%${hostargs}%
d1564 4
@


1.103.10.6
log
@2003-02-07  David Carlton  <carlton@@math.stanford.edu>

	* Merge with mainline; tag is carlton_dictionary-20030207-merge.
@
text
@d1 16
d18 1
a18 1
#   1999, 2000, 2001, 2002, 2003 Free Software Foundation, Inc.
a34 80
### WARNING: this file contains embedded tabs.  Do not run untabify on this file.

AC_INIT(move-if-change)
AC_PREREQ(2.13)
AC_CANONICAL_SYSTEM
AC_ARG_PROGRAM

sinclude(config/acx.m4)

# clear some things potentially inherited from environment.

enable_threads=no
enable_shared=no
enable_libstdcxx_v3=yes
floating_point=default
gas=default
x11=default

### we might need to use some other shell than /bin/sh for running subshells
### If we are on Windows, search for the shell.  This will permit people
### to not have /bin/sh, but to be able to see /SOME/PATH/sh configure
### without also having to set CONFIG_SHELL.  This code will work when
### using bash, which sets OSTYPE.
case "${OSTYPE}" in
*win32*)
  if test x${CONFIG_SHELL} = x ; then
    if test ! -f /bin/sh ; then
      if test x${SHELL} != x && test -f ${SHELL} ; then
	CONFIG_SHELL=${SHELL}
	export CONFIG_SHELL
      else
	for prog in sh sh.exe bash bash.exe; do
	  IFS="${IFS=	}"; save_ifs="$IFS"; IFS="${IFS}:"
	  for dir in $PATH; do
	    test -z "$dir" && dir=.
	    if test -f $dir/$prog; then
	      CONFIG_SHELL=$dir/$prog
	      export CONFIG_SHELL
	      break
	    fi
	  done
	  IFS="$save_ifs"
	  test -n "${CONFIG_SHELL}" && break
	done
      fi
    fi
  fi
  ;;
esac

config_shell=${CONFIG_SHELL-/bin/sh}

## this is a little touchy and won't always work, but...
##
## if the argv[[0]] starts with a slash then it is an absolute name that can (and
## must) be used as is.
##
## otherwise, if argv[[0]] has no slash in it, we can assume that it is on the
## path.  Since PATH might include "." we also add `pwd` to the end of PATH.
##

progname=$0
# if PWD already has a value, it is probably wrong.
if test -n "$PWD" ; then PWD=`${PWDCMD-pwd}`; fi

# Export original configure arguments for use by sub-configures.
TOPLEVEL_CONFIGURE_ARGUMENTS="$progname $@@"
AC_SUBST(TOPLEVEL_CONFIGURE_ARGUMENTS)

moveifchange=${srcdir}/move-if-change

# Set srcdir to "." if that's what it is.
# This is important for multilib support.
pwd=`${PWDCMD-pwd}`
srcpwd=`cd ${srcdir} ; ${PWDCMD-pwd}`
if test "${pwd}" = "${srcpwd}" ; then
  srcdir=.
fi

topsrcdir=$srcpwd
d39 3
a41 3
if test "${with_gcc_version_trigger+set}" = set ; then
  gcc_version_trigger="$with_gcc_version_trigger"
  gcc_version=`grep version_string ${with_gcc_version_trigger} | sed -e 's/.*\"\([[^ \"]]*\)[[ \"]].*/\1/'`
d43 15
a57 13
  # If gcc's sources are available, define the trigger file.
  if test -f ${topsrcdir}/gcc/version.c ; then
    gcc_version_trigger=${topsrcdir}/gcc/version.c
    gcc_version=`grep version_string ${gcc_version_trigger} | sed -e 's/.*\"\([[^ \"]]*\)[[ \"]].*/\1/'`
    case "$ac_configure_args" in
      *--with-gcc-version-trigger=$gcc_version_trigger* )
        ;;
      * )
        # Add to all subconfigure arguments: build, host, and target.
        ac_configure_args="$ac_configure_args --with-gcc-version-trigger=$gcc_version_trigger"
        ;;
    esac
  fi
d76 1
a76 1
host_libs="intl mmalloc libiberty opcodes bfd readline tcl tk itcl tix libgui zlib"
d85 1
a85 1
host_tools="texinfo byacc flex bison binutils gas ld gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils gettext zip fastjar"
d102 1
a102 1
		${libgcj} \
d127 1
d133 6
d206 1
a206 1
native_only="autoconf automake libtool fileutils find gawk gettext gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms gnuserv target-gperf"
d246 2
a247 2
  i[[3456]]86-*-vsta)
    noconfigdirs="tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl itcl tix gnuserv gettext"
d249 2
a250 2
  i[[3456]]86-*-go32* | i[[3456]]86-*-msdosdjgpp*)
    noconfigdirs="tcl tk expect dejagnu send-pr uudecode guile itcl tix gnuserv libffi"
d252 2
a253 2
  i[[3456]]86-*-mingw32*)
    # noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl itcl tix gnuserv"
d256 1
a256 1
  i[[3456]]86-*-beos*)
d266 1
a266 1
     noconfigdirs="patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl tix gnuserv"
d296 1
a296 1
  *-*-freebsd[[12]] | *-*-freebsd[[12]].* | *-*-freebsd*aout*)
d451 1
a451 1
  i[[3456]]86-*-coff | i[[3456]]86-*-elf)
d454 1
a454 1
  i[[34567]]86-*-freebsd*)
d457 1
a457 1
  i[[3456]]86-*-linux*)
d476 1
a476 1
  i[[3456]]86-*-mingw32*)
d482 2
a483 2
      i[[3456]]86-*-mingw32) ;; # keep gdb tcl tk expect etc.
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix gnuserv"
d496 1
a496 1
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix libgui gnuserv"
d500 1
a500 1
  i[[3456]]86-*-pe)
d503 1
a503 1
  i[[3456]]86-*-sco3.2v5*)
d508 1
a508 1
  i[[3456]]86-*-sco*)
d511 1
a511 1
  i[[3456]]86-*-solaris2*)
d514 1
a514 1
  i[[3456]]86-*-sysv4*)
d517 1
a517 1
  i[[3456]]86-*-beos*)
d549 1
a549 1
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl tix gnuserv ${libgcj}"
d555 1
a555 1
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl tix gnuserv ${libgcj}"
d588 1
d593 1
a593 1
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d615 3
a617 3
      i[[3456]]86-*-vsta) ;; # don't add gprof back in
      i[[3456]]86-*-go32*) ;; # don't add gprof back in
      i[[3456]]86-*-msdosdjgpp*) ;; # don't add gprof back in
d703 1
a703 1
enable_languages=`echo "${enable_languages}" | sed -e 's/[[ 	,]][[ 	,]]*/,/g' -e 's/,$//'`
d715 1
a715 1
    ${srcdir}/gcc/[[*]]/config-lang.in)
d718 2
a719 2
       lang_alias=`sed -n -e 's,^language=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^language=\([[^ 	]]*\).*$,\1,p' $lang`
       this_lang_requires=`sed -n -e 's,^lang_requires=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^lang_requires=\([[^ 	]]*\).*$,\1,p' $lang`
d744 1
a744 1
	${srcdir}/gcc/[[*]]/config-lang.in) ;;
d746 4
a749 4
	  lang_alias=`sed -n -e 's,^language=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^language=\([[^ 	]]*\).*$,\1,p' $lang`
	  this_lang_libs=`sed -n -e 's,^target_libs=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^target_libs=\([[^ 	]]*\).*$,\1,p' $lang`
	  this_lang_dirs=`sed -n -e 's,^lang_dirs=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^lang_dirs=\([[^ 	]]*\).*$,\1,p' $lang`
	  build_by_default=`sed -n -e 's,^build_by_default=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^build_by_default=\([[^ 	]]*\).*$,\1,p' $lang`
d816 14
a960 1
host_makefile_frag=/dev/null
d966 1
a966 3
    # If "ar" in $PATH is GNU ar, the symbol table may need rebuilding.
    # If it's HP/UX ar, this should be harmless.
    RANLIB="ar ts"
d970 1
a978 1
    # Used to have BISON=yacc.
d980 1
d992 1
d1003 6
d1015 3
d1035 1
d1039 1
d1041 1
a1041 1
  i[[3456]]86-*-sysv5*)
d1044 1
a1044 1
  i[[3456]]86-*-dgux*)
d1048 1
a1048 1
  i[[3456]]86-ncr-sysv4.3*)
d1052 1
d1054 1
a1054 1
  i[[3456]]86-ncr-sysv4*)
d1063 2
a1064 1
  i[[3456]]86-*-sco3.2v5*)
d1066 1
a1066 1
  i[[3456]]86-*-sco*)
d1072 1
a1072 1
  i[[3456]]86-*-udk*)
d1075 4
a1078 1
  i[[3456]]86-*-solaris2*)
d1081 4
a1084 1
  i[[3456]]86-*-msdosdjgpp*)
d1108 4
d1114 1
d1118 1
d1132 3
d1138 9
a1148 2
extra_ranlibflags_for_target=
target_makefile_frag=/dev/null
d1150 1
a1150 1
  i[[3456]]86-*-netware*)
d1159 1
a1159 1
  *-*-aix4.[[3456789]]* | *-*-aix[[56789]].*)
a1165 4
  *-*-darwin*)
    # ranlib from Darwin requires the -c flag to look at common symbols.
    extra_ranlibflags_for_target=" -c"
    ;;
d1171 1
a1171 1
alphaieee_frag=/dev/null
d1183 1
a1183 1
ospace_frag=/dev/null
d1201 9
d1286 3
d1308 1
a1308 278
# Some systems (e.g., one of the i386-aix systems the gas testers are
# using) don't handle "\$" correctly, so don't use it here.
tooldir='$(exec_prefix)'/${target_alias}
build_tooldir=${tooldir}

# Generate a default definition for YACC.  This is used if the makefile can't
# locate bison or byacc in objdir.

for prog in 'bison -y' byacc yacc
do
  set dummy $prog; tmp=$2
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/$tmp; then
      DEFAULT_YACC="$prog"
      break
    fi
  done
  IFS="$save_ifs"

  test -n "$DEFAULT_YACC" && break
done

# Generate a default definition for M4.  This is used if the makefile can't
# locate m4 in objdir.

for prog in gm4 gnum4 m4
do
  set dummy $prog; tmp=$2
  IFS="${IFS=   }"; save_ifs="$IFS"; IFS="${IFS}:"
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/$tmp; then
      DEFAULT_M4="$prog"
      break
    fi
  done
  IFS="$save_ifs"

  test -n "$DEFAULT_M4" && break
done

# Generate a default definition for LEX.  This is used if the makefile can't
# locate flex in objdir.

for prog in flex lex
do
  set dummy $prog; tmp=$2
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/$tmp; then
      DEFAULT_LEX="$prog"
      break
    fi
  done
  IFS="$save_ifs"

  test -n "$DEFAULT_LEX" && break
done

if test "${build}" != "${host}" ; then
  # If we are doing a Canadian Cross, in which the host and build systems
  # are not the same, we set reasonable default values for the tools.

  BISON=${BISON-bison}
  CC=${CC-${host_alias}-gcc}
  CFLAGS=${CFLAGS-"-g -O2"}
  CXX=${CXX-${host_alias}-c++}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
  CC_FOR_BUILD=${CC_FOR_BUILD-gcc}
  CC_FOR_TARGET=${CC_FOR_TARGET-${target_alias}-gcc}
  CXX_FOR_TARGET=${CXX_FOR_TARGET-${target_alias}-c++}
  GCJ_FOR_TARGET=${GCJ_FOR_TARGET-${target_alias}-gcj}
  GCC_FOR_TARGET=${GCC_FOR_TARGET-${CC_FOR_TARGET-${target_alias}-gcc}}
  BUILD_PREFIX=${build_alias}-
  BUILD_PREFIX_1=${build_alias}-
  MAKEINFO=${MAKEINFO-makeinfo}

  if test -z "${YACC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/bison; then
	YACC="bison -y"
	break
      fi
      if test -f $dir/byacc; then
	YACC=byacc
	break
      fi
      if test -f $dir/yacc; then
	YACC=yacc
	break
      fi
    done
    IFS="$save_ifs"
    if test -z "${YACC}" ; then
      YACC="bison -y"
    fi
  fi

  if test -z "${LEX}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/flex; then
	LEX=flex
	break
      fi
      if test -f $dir/lex; then
	LEX=lex
	break
      fi
    done
    IFS="$save_ifs"
    LEX=${LEX-flex}
  fi

else
  # Set reasonable default values for some tools even if not Canadian.
  # Of course, these are different reasonable default values, originally
  # specified directly in the Makefile.
  # We don't export, so that autoconf can do its job.
  # Note that all these settings are above the fragment inclusion point
  # in Makefile.in, so can still be overridden by fragments.
  # This is all going to change when we autoconfiscate...

  BISON="\$(USUAL_BISON)"
  CC_FOR_BUILD="\$(CC)"
  GCC_FOR_TARGET="\$(USUAL_GCC_FOR_TARGET)"
  BUILD_PREFIX=
  BUILD_PREFIX_1=loser-
  MAKEINFO="\$(USUAL_MAKEINFO)"
  LEX="\$(USUAL_LEX)"
  YACC="\$(USUAL_YACC)"

  # If CC is still not set, try to get gcc.
  cc_prog_is_gcc=
  if test -z "${CC}" ; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/gcc; then
	CC="gcc"
	cc_prog_is_gcc=yes
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
	break
      fi
    done
    IFS="$save_ifs"
    CC=${CC-cc}
  else
    # Determine if we are using gcc.
    cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
    if ${CC} -E conftest.c | grep yes >/dev/null 2>&1; then
      cc_prog_is_gcc=yes
    fi
    rm -f conftest.c
    if test -z "${CFLAGS}"; then
      # Here CC is set but CFLAGS is not.  Use a quick hack to use -O2 if CC
      # is set to a version of gcc.
      if test "$cc_prog_is_gcc" = yes; then
	echo 'void f(){}' > conftest.c
	if test -z "`${CC} -g -c conftest.c 2>&1`"; then
	  CFLAGS=${CFLAGS-"-g -O2"}
	  CXXFLAGS=${CXXFLAGS-"-g -O2"}
	else
	  CFLAGS=${CFLAGS-"-O2"}
	  CXXFLAGS=${CXXFLAGS-"-O2"}
	fi
	rm -f conftest*
      fi
    fi
  fi

  # We must set the default linker to the linker used by gcc for the correct
  # operation of libtool.  If LD is not defined and we are using gcc, try to
  # set the LD default to the ld used by gcc.
  if test -z "$LD"; then
    if test "$cc_prog_is_gcc" = yes; then
      case $build in
      *-*-mingw*)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\015'` ;;
      *)
	gcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;
      esac
      case $gcc_prog_ld in
      # Accept absolute paths.
      [[\\/]* | [A-Za-z]:[\\/]*)]
        LD="$gcc_prog_ld" ;;
      esac
    fi
  fi

  CXX=${CXX-"c++"}
  CFLAGS=${CFLAGS-"-g"}
  CXXFLAGS=${CXXFLAGS-"-g -O2"}
fi

# FIXME Should this be done recursively ??? (Useful for e.g. gdbtest)
# Set up the list of links to be made.
# ${links} is the list of link names, and ${files} is the list of names to link to.

# Make the links.
configlinks="${links}"
if test -r ./config.status  ; then
  mv -f ./config.status ./config.back
fi
while test -n "${files}" ; do
  # set file to car of files, files to cdr of files
  set ${files}; file=$1; shift; files=$*
  set ${links}; link=$1; shift; links=$*

  if test ! -r ${srcdir}/${file} ; then
    if test ! -r ${file} ; then
      echo '***' "${progname}: cannot create a link \"${link}\"," 1>&2
      echo '***' "since the file \"${srcdir}/${file}\" does not exist." 1>&2
      exit 1
    else
      srcfile=${file}
    fi
  else
    srcfile=${srcdir}/${file}
  fi

  ${remove} -f ${link}
  # Make a symlink if possible, otherwise try a hard link
  if ${symbolic_link} ${srcfile} ${link} >/dev/null 2>&1 ; then
    true
  else
    # We need to re-remove the file because Lynx leaves a 
    # very strange directory there when it fails an NFS symlink.
    ${remove} -r -f ${link}
    ${hard_link} ${srcfile} ${link}
  fi
  if test ! -r ${link} ; then
    echo '***' "${progname}: unable to link \"${link}\" to \"${srcfile}\"." 1>&2
    exit 1
  fi

  echo "Linked \"${link}\" to \"${srcfile}\"."
done

# Create a .gdbinit file which runs the one in srcdir
# and tells GDB to look there for source files.

if test -r ${srcdir}/.gdbinit ; then
  case ${srcdir} in
    .) ;;
    *) cat > ./.gdbinit <<EOF
# ${NO_EDIT}
dir ${srcdir}
dir .
source ${srcdir}/.gdbinit
EOF
    ;;
  esac
fi

# record if we want runtime library stuff installed in libsubdir.
# Blank means no.
if test -z "${enable_version_specific_runtime_libs}"; then
  enable_version_specific_runtime_libs=no
fi
d1336 1
a1336 1
      if test "`type $CCBASE | sed 's/^[[^/]]*//'`" = "/usr/ucb/cc" ; then
d1367 3
d1376 3
a1386 4
# While at that, we remove Makefiles if we were started for recursive
# configuration, such that the top-level Makefile reconfigures them,
# like we used to do when configure itself was recursive.

d1392 2
a1393 9
  for module in libiberty ; do
    all_build_modules=all-build-${module}
    configure_build_modules=configure-build-${module}
    if test -z "${no_recursion}" \
       && test -f ${build_subdir}/${module}/Makefile; then
      echo 1>&2 "*** removing ${build_subdir}/${module}/Makefile to force reconfigure"
      rm -f ${build_subdir}/${module}/Makefile
    fi
  done
a1404 5
  if test -z "${no_recursion}" \
     && test -f ${module}/Makefile; then
    echo 1>&2 "*** removing ${module}/Makefile to force reconfigure"
    rm -f ${module}/Makefile
  fi
a1416 5
  if test -z "${no_recursion}" \
     && test -f ${target_subdir}/${module}/Makefile; then
    echo 1>&2 "*** removing ${target_subdir}/${module}/Makefile to force reconfigure"
    rm -f ${target_subdir}/${module}/Makefile
  fi
a1425 2

gdb_tk="maybe-all-tcl maybe-all-tk maybe-all-itcl maybe-all-tix maybe-all-libgui"
a1428 2
  yes)
    GDB_TK="${gdb_tk}" ;;
d1430 1
a1430 9
    # Only add the dependency on gdbtk when GDBtk is part of the gdb
    # distro.  Eventually someone will fix this and move Insight, nee
    # gdbtk to a separate directory.
    if test -d ${srcdir}/gdb/gdbtk ; then
      GDB_TK="${gdb_tk}"
    else
      GDB_TK=""
    fi
    ;;
a1434 1
echo '# maybedep.tmp' > maybedep.tmp
d1441 5
a1445 2
maybe_dependencies=maybedep.tmp
AC_SUBST_FILE(maybe_dependencies)
a1448 6
AC_ARG_ENABLE([serial-configure],
[  --disable-serial-[{host,target,build}-]configure
                          Don't force sequential configuration of
                          sub-packages for the host, target or build
			  machine, or of any sub-packages at all])

a1451 1
echo '# serdep.tmp' > serdep.tmp
a1452 2
test "x${enable_serial_configure}" = xno ||
test "x${enable_serial_build_configure}" = xno ||
d1456 1
a1456 1
    *) echo "configure-build-${item}: configure-build-${olditem}" >> serdep.tmp ;;
a1460 2
test "x${enable_serial_configure}" = xno ||
test "x${enable_serial_host_configure}" = xno ||
d1464 1
a1464 1
    *) echo "configure-${item}: configure-${olditem}" >> serdep.tmp ;;
a1468 2
test "x${enable_serial_configure}" = xno ||
test "x${enable_serial_target_configure}" = xno ||
d1472 1
a1472 1
    *) echo "configure-target-${item}: configure-target-${olditem}" >> serdep.tmp ;;
d1476 5
a1480 2
serialization_dependencies=serdep.tmp
AC_SUBST_FILE(serialization_dependencies)
d1482 9
a1490 17
# Base args.  Strip norecursion, cache-file, srcdir, host, build,
# target and nonopt.  These are the ones we might not want to pass
# down to subconfigures.
baseargs=`echo " ${ac_configure_args} " | \
	sed -e 's/ --no[[^ ]]* / /' \
	    -e 's/ --c[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ --sr[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ --ho[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ --bu[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ --t[[a-z-]]*[[= ]][[^ ]]* / /' \
	    -e 's/ -cache-file[[= ]][[^ ]]* / /' \
	    -e 's/ -srcdir[[= ]][[^ ]]* / /' \
	    -e 's/ -host[[= ]][[^ ]]* / /' \
	    -e 's/ -build[[= ]][[^ ]]* / /' \
	    -e 's/ -target[[= ]][[^ ]]* / /' \
	    -e 's/ [[^ -][^ ]*] / /' \
	    -e 's/^ *//;s/ *$//'`
d1495 1
a1495 1
build_configargs="--cache-file=../config.cache --build=${build_alias} --host=${build_alias} ${baseargs}"
d1501 1
a1501 1
/* | [[A-Za-z]]:[[\\/]]* ) # absolute path
d1507 1
a1507 1
host_configargs="${cache_file_option} --build=${build_alias} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"
d1509 1
a1509 1
target_configargs=${baseargs}
d1517 1
a1517 1
  target_configargs="--with-cross-host=${host_alias} ${target_configargs}"
d1522 1
a1522 1
  target_configargs="--enable-multilib ${target_configargs}"
d1528 1
a1528 1
  target_configargs="--with-newlib ${target_configargs}"
d1532 1
a1532 1
target_configargs="--cache-file=../config.cache --host=${target_alias} --build=${build_alias} ${target_configargs}"
d1566 1
a1566 1
  case " $target_configargs " in
d1597 1
a1597 1
   i[[3456]]86-*-linux*-no)
d1636 1
a1636 1
  CC_FOR_TARGET=`echo gcc | sed "${program_transform_name}"`
d1638 6
a1643 1
CC_FOR_TARGET=$CC_FOR_TARGET' $(FLAGS_FOR_TARGET)'
d1652 1
a1652 1
  GCJ_FOR_TARGET=`echo gcj | sed "${program_transform_name}"`
d1654 4
a1657 1
GCJ_FOR_TARGET=$GCJ_FOR_TARGET' $(FLAGS_FOR_TARGET)'
d1677 1
a1677 1
  CXX_FOR_TARGET=`echo c++ | sed "${program_transform_name}"`
d1680 8
a1687 2
CXX_FOR_TARGET=$CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)'
RAW_CXX_FOR_TARGET=$RAW_CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)'
d1689 2
a1690 2
qCXX_FOR_TARGET=`echo "$CXX_FOR_TARGET" | sed 's,[[&%]],\\\&,g'`
qRAW_CXX_FOR_TARGET=`echo "$RAW_CXX_FOR_TARGET" | sed 's,[[&%]],\\\&,g'`
d1698 2
a1699 2
qqCXX_FOR_TARGET=`echo "$qCXX_FOR_TARGET" | sed -e 's,[[$]][[$]],$$$$,g'`
qqRAW_CXX_FOR_TARGET=`echo "$qRAW_CXX_FOR_TARGET" | sed -e 's,[[$]][[$]],$$$$,g'`
d1701 40
a1740 123
# Wrap CC_FOR_TARGET and friends, for certain types of builds.
CC_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${CC_FOR_TARGET}"
GCJ_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${GCJ_FOR_TARGET}"
CXX_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${qCXX_FOR_TARGET}"
RAW_CXX_FOR_TARGET="\$(STAGE_CC_WRAPPER) ${qRAW_CXX_FOR_TARGET}"
CXX_FOR_TARGET_FOR_RECURSIVE_MAKE="\$(STAGE_CC_WRAPPER) ${qqCXX_FOR_TARGET}"
RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE="\$(STAGE_CC_WRAPPER) ${qqRAW_CXX_FOR_TARGET}"

# Makefile fragments.
host_makefile_frag=${srcdir}/${host_makefile_frag}
target_makefile_frag=${srcdir}/${target_makefile_frag}
alphaieee_frag=${srcdir}/${alphaieee_frag}
ospace_frag=${srcdir}/${ospace_frag}
AC_SUBST_FILE(host_makefile_frag)
AC_SUBST_FILE(target_makefile_frag)
AC_SUBST_FILE(alphaieee_frag)
AC_SUBST_FILE(ospace_frag)

# Miscellanea: directories, flags, etc.
AC_SUBST(SET_LIB_PATH)
AC_SUBST(RPATH_ENVVAR)
AC_SUBST(BUILD_PREFIX)
AC_SUBST(BUILD_PREFIX_1)
AC_SUBST(configlinks)
AC_SUBST(enable_shared)
AC_SUBST(enable_threads)
AC_SUBST(enable_version_specific_runtime_libs)
AC_SUBST(gcc_version_trigger)
AC_SUBST(gcc_version)
AC_SUBST(tooldir)
AC_SUBST(build_tooldir)
AC_SUBST(GDB_TK)
AC_SUBST(gxx_include_dir)
AC_SUBST(libstdcxx_incdir)

# Build module lists & subconfigure args.
AC_SUBST(build_subdir)
AC_SUBST(build_configargs)
AC_SUBST(configure_build_modules)
AC_SUBST(all_build_modules)

# Host module lists & subconfigure args.
AC_SUBST(host_configargs)
AC_SUBST(configdirs)
AC_SUBST(configure_host_modules)
AC_SUBST(all_host_modules)
AC_SUBST(check_host_modules)
AC_SUBST(install_host_modules)
AC_SUBST(install_host_modules_nogcc)

# Target module lists & subconfigure args.
AC_SUBST(target_subdir)
AC_SUBST(target_configargs)
AC_SUBST(target_configdirs)
AC_SUBST(configure_target_modules)
AC_SUBST(all_target_modules)
AC_SUBST(check_target_modules)
AC_SUBST(install_target_modules)

# Build tools.
AC_SUBST(BISON)
AC_SUBST(CC_FOR_BUILD)
AC_SUBST(LEX)
AC_SUBST(MAKEINFO)
AC_SUBST(YACC)
AC_SUBST(config_shell)

# Host tools.
NCN_STRICT_CHECK_TOOL(AR, ar)
NCN_STRICT_CHECK_TOOL(AS, as)
NCN_STRICT_CHECK_TOOL(DLLTOOL, dlltool)
NCN_STRICT_CHECK_TOOL(LD, ld)
NCN_STRICT_CHECK_TOOL(NM, nm)
NCN_STRICT_CHECK_TOOL(RANLIB, ranlib, :)
NCN_STRICT_CHECK_TOOL(WINDRES, windres)
NCN_STRICT_CHECK_TOOL(OBJCOPY, objcopy)
NCN_STRICT_CHECK_TOOL(OBJDUMP, objdump)
AC_SUBST(CC)
AC_SUBST(CXX)
AC_SUBST(CFLAGS)
AC_SUBST(CXXFLAGS)
AC_SUBST(DEFAULT_YACC)
AC_SUBST(DEFAULT_LEX)
AC_SUBST(DEFAULT_M4)

# Target tools.
NCN_STRICT_CHECK_TARGET_TOOL(AR_FOR_TARGET, ar)
NCN_STRICT_CHECK_TARGET_TOOL(AS_FOR_TARGET, as)
NCN_STRICT_CHECK_TARGET_TOOL(DLLTOOL_FOR_TARGET, dlltool)
NCN_STRICT_CHECK_TARGET_TOOL(LD_FOR_TARGET, ld)
NCN_STRICT_CHECK_TARGET_TOOL(NM_FOR_TARGET, nm)
NCN_STRICT_CHECK_TARGET_TOOL(RANLIB_FOR_TARGET, ranlib, :)
NCN_STRICT_CHECK_TARGET_TOOL(WINDRES_FOR_TARGET, windres)

AC_SUBST(GCC_FOR_TARGET)
AC_SUBST(FLAGS_FOR_TARGET)
AC_SUBST(CC_FOR_TARGET)
AC_SUBST(GCJ_FOR_TARGET)
AC_SUBST(CXX_FOR_TARGET)
AC_SUBST(RAW_CXX_FOR_TARGET)
AC_SUBST(CXX_FOR_TARGET_FOR_RECURSIVE_MAKE)
AC_SUBST(RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE)

# Fix up target tools.
if test "x${build}" = "x${host}" ; then
  # In this case, the newly built tools can and should be used,
  # so we override the results of the autoconf tests.
  # This should really only happen when the tools are actually being built,
  # but that's a further refinement.  The new build scheme, where
  # tools are built into a structure paralleling where they're installed,
  # should also eliminate all of this cleanly.
  AR_FOR_TARGET="\$(USUAL_AR_FOR_TARGET)"
  AS_FOR_TARGET="\$(USUAL_AS_FOR_TARGET)"
  DLLTOOL_FOR_TARGET="\$(USUAL_DLLTOOL_FOR_TARGET)"
  LD_FOR_TARGET="\$(USUAL_LD_FOR_TARGET)"
  NM_FOR_TARGET="\$(USUAL_NM_FOR_TARGET)"
  RANLIB_FOR_TARGET="\$(USUAL_RANLIB_FOR_TARGET)"
  WINDRES_FOR_TARGET="\$(USUAL_WINDRES_FOR_TARGET)"
fi
# Certain tools may need extra flags.
AR_FOR_TARGET=${AR_FOR_TARGET}${extra_arflags_for_target}
RANLIB_FOR_TARGET=${RANLIB_FOR_TARGET}${extra_ranlibflags_for_target}
NM_FOR_TARGET=${NM_FOR_TARGET}${extra_nmflags_for_target}
d1742 1
a1742 1
AC_OUTPUT(Makefile)
@


1.103.10.7
log
@2003-03-05  David Carlton  <carlton@@math.stanford.edu>

	* Merge with mainline.  Tag is carlton_dictionary-20030305-merge.
@
text
@d28 9
d71 9
d140 2
d162 1
a162 1
		target-libstdc++-v3 \
d306 1
a306 1
    ;;
d309 2
a310 2
    noconfigdirs="expect dejagnu autoconf automake send-pr rcs guile perl texinfo libtool"
    ;;
d312 2
a313 2
    noconfigdirs="$noconfigdirs tk itcl tix libgui gdb"
    ;;
d315 1
a315 1
    noconfigdirs="autoconf automake send-pr rcs guile perl"
d321 1
a321 1
    noconfigdirs="patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl tix gnuserv"
a350 4
  *-*-darwin*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb gprof"
    noconfigdirs="$noconfigdirs target-libobjc ${libgcj}"
    ;;
a353 7
  *-*-kaos*)
    # Remove unsupported stuff on all kaOS configurations.
    skipdirs="target-libiberty ${libgcj} target-libstdc++-v3 target-libf2c target-librx"
    skipdirs="$skipdirs target-libobjc target-examples target-groff target-gperf"
    skipdirs="$skipdirs zlib fastjar target-libjava target-boehm-gc target-zlib"
    noconfigdirs="$noconfigdirs target-libgloss"
    ;;
d367 1
a367 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-newlib target-libiberty target-libgloss ${libgcj}"
d411 1
a411 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3"
d415 1
a415 1
      *) noconfigdirs="$noconfigdirs gdb readline"
d450 1
a450 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
d453 1
a453 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d456 1
a456 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj} gcc gdb newlib"
d462 1
a462 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d477 1
a477 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj} target-libf2c"
d523 1
a523 1
      noconfigdirs="$noconfigdirs target-newlib"
d556 1
a556 1
    noconfigdirs="$noconfigdirs target-libstdc++-v3 target-libgloss ${libgcj}"
d573 2
a574 2
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
    ;;
d576 1
a576 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
d615 3
d657 1
a657 1
    ;;
d699 1
a699 1
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld target-libstdc++-v3 opcodes target-libgloss ${libgcj}"
d717 1
a717 1
    noconfigdirs="$noconfigdirs target-libiberty target-libstdc++-v3 ${libgcj}"
d743 6
a748 6
  if test x"${LANGUAGES+set}" = xset; then
    enable_languages="${LANGUAGES}"
      echo configure.in: warning: setting LANGUAGES is deprecated, use --enable-languages instead 1>&2
  else
    enable_languages=all
  fi
d750 6
a755 6
  if test x"${enable_languages}" = x ||
     test x"${enable_languages}" = xyes;
     then
    echo configure.in: --enable-languages needs at least one language argument 1>&2
    exit 1
  fi
d764 3
a766 2
  case $lang in
    ..) ;;
d769 2
a770 1
    ${srcdir}/gcc/[[*]]/config-lang.in) ;;
d772 17
a788 15
      lang_alias=`sed -n -e 's,^language=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^language=\([[^ 	]]*\).*$,\1,p' $lang`
      this_lang_requires=`sed -n -e 's,^lang_requires=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^lang_requires=\([[^ 	]]*\).*$,\1,p' $lang`
      for other in $this_lang_requires
      do
        case ,${enable_languages}, in
	  *,$other,*) ;;
	  *,all,*) ;;
	  *,$lang_alias,*)
	    echo " \`$other' language required by \`$lang_alias'; enabling" 1>&2
	    enable_languages="$enable_languages,$other"
	    ;;
	esac
      done
      ;;
  esac
d794 28
a821 28
  case $lang in
    ..) ;;
    # The odd quoting in the next line works around
    # an apparent bug in bash 1.12 on linux.
    ${srcdir}/gcc/[[*]]/config-lang.in) ;;
    *)
      lang_alias=`sed -n -e 's,^language=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^language=\([[^ 	]]*\).*$,\1,p' $lang`
      this_lang_libs=`sed -n -e 's,^target_libs=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^target_libs=\([[^ 	]]*\).*$,\1,p' $lang`
      this_lang_dirs=`sed -n -e 's,^lang_dirs=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^lang_dirs=\([[^ 	]]*\).*$,\1,p' $lang`
      build_by_default=`sed -n -e 's,^build_by_default=[['"'"'"'"]]\(.*\)[["'"'"'"']].*$,\1,p' -e 's,^build_by_default=\([[^ 	]]*\).*$,\1,p' $lang`
      if test "x$lang_alias" = x
         then
        echo "$lang doesn't set \$language." 1>&2
        exit 1
      fi
      case ${build_by_default},${enable_languages}, in
        *,$lang_alias,*) add_this_lang=yes ;;
        no,*) add_this_lang=no ;;
        *,all,*) add_this_lang=yes ;;
        *) add_this_lang=no ;;
      esac
      if test x"${add_this_lang}" = xyes; then
        eval target_libs='"$target_libs "'\"$this_lang_libs\"
      else
        eval noconfigdirs='"$noconfigdirs "'\"$this_lang_libs $this_lang_dirs\"
      fi
      ;;
  esac
d1026 1
d1244 18
d1637 6
a1642 4
case "${enable_shared}" in
  no | "") SET_LIB_PATH= ;;
  *) SET_LIB_PATH="\$(REALLY_SET_LIB_PATH)" ;;
esac
d1938 1
a1938 1
  FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -B$(build_tooldir)/bin/ -B$(build_tooldir)/lib/ -isystem $(build_tooldir)/include -isystem $(build_tooldir)/sys-include'
d2029 2
a2127 19

AC_MSG_CHECKING([whether to enable maintainer-specific portions of Makefiles])
AC_ARG_ENABLE(maintainer-mode,
[  --enable-maintainer-mode enable make rules and dependencies not useful
                          (and sometimes confusing) to the casual installer],
      USE_MAINTAINER_MODE=$enableval,
      USE_MAINTAINER_MODE=no)
AC_MSG_RESULT($USE_MAINTAINER_MODE)
AC_SUBST(MAINTAINER_MODE_TRUE)
AC_SUBST(MAINTAINER_MODE_FALSE)
if test "$USE_MAINTAINER_MODE" = yes; then
  MAINTAINER_MODE_TRUE=
  MAINTAINER_MODE_FALSE='#'
else
  MAINTAINER_MODE_TRUE='#'
  MAINTAINER_MODE_FALSE=
fi	
MAINT=$MAINTAINER_MODE_TRUE
AC_SUBST(MAINT)dnl
@


1.103.10.8
log
@2003-04-16  David Carlton  <carlton@@bactrian.org>

	* Merge with mainline; tag is carlton_dictionary-20030416-merge.
@
text
@d1544 6
d1819 24
a1842 13
case "${with_gxx_include_dir}" in
  yes)
    AC_MSG_ERROR([--with-gxx-include-dir=[[dir]] requires a directory])
    ;;
  no | "")
    case "${enable_version_specific_runtime_libs}" in
      yes) gxx_include_dir='${libsubdir}/include/c++' ;;
      *)
        . ${srcdir}/config.if
        gxx_include_dir='${prefix}/include/'${libstdcxx_incdir} ;;
    esac ;;
  *) gxx_include_dir=${with_gxx_include_dir} ;;
esac
d1992 1
@


1.103.10.9
log
@2003-04-30  David Carlton  <carlton@@bactrian.org>

	* cp-namespace.c (get_namespace_objfile): Copy the namespace
	objfile's name.

	* block.h (ALL_BLOCK_SYMBOLS): Move here from dictionary.h.
	* dictionary.c: Sync up with mainline version I just posted.
	Specifically, update some commments, and:
	(dict_create_hashed): Fiddle with nsyms updating.
	(dict_create_linear): Ditto.
	(dict_lookup): Delete.
	(iterator_next_hashed): Delete FIXME comment.
	(iter_name_first_hashed): Replace 'sym' by 'sym != NULL'.
	(iter_name_next_hashed): Replate 'next' by 'next != NULL'.
	* dictionary.h: Sync up with mainline version I just posted: add
	inclusion guards, delete declaration of dict_lookup, delete
	ALL_BLOCK_SYMBOLs.

	* Merge with mainline; tag is carlton_dictionary-20030430-merge.
@
text
@a351 1
      arm*-*-netbsdelf*) ;;
d608 5
@


1.103.10.10
log
@2003-05-23  David Carlton  <carlton@@bactrian.org>

	* Merge with mainline; tag is carlton_dictionary-20030523-merge.
@
text
@a166 10
# Only make build modules if build != host.
# This should be done more generally, but at the moment it doesn't matter.
if test ${host_alias} != ${build_alias} ; then
  # This is the only build module.
  build_modules=libiberty
else
  build_modules=
fi


d182 3
a184 2
# Find the build and target subdirs.
GCC_TOPLEV_SUBDIRS
d194 3
d281 1
a281 1
  i[[3456789]]86-*-vsta)
d284 1
a284 1
  i[[3456789]]86-*-go32* | i[[3456789]]86-*-msdosdjgpp*)
d287 1
a287 1
  i[[3456789]]86-*-mingw32*)
d291 1
a291 1
  i[[3456789]]86-*-beos*)
d498 1
a498 1
  i[[3456789]]86-*-coff | i[[3456789]]86-*-elf)
d501 1
a501 1
  i[[3456789]]86-*-freebsd*)
d504 1
a504 1
  i[[3456789]]86-*-linux*)
d523 1
a523 1
  i[[3456789]]86-*-mingw32*)
d529 1
a529 1
      i[[3456789]]86-*-mingw32) ;; # keep gdb tcl tk expect etc.
d547 1
a547 1
  i[[3456789]]86-*-pe)
d550 1
a550 1
  i[[3456789]]86-*-sco3.2v5*)
d555 1
a555 1
  i[[3456789]]86-*-sco*)
d558 1
a558 1
  i[[3456789]]86-*-solaris2*)
d561 1
a561 1
  i[[3456789]]86-*-sysv4*)
d564 1
a564 1
  i[[3456789]]86-*-beos*)
d653 3
a655 3
      i[[3456789]]86-*-vsta) ;; # don't add gprof back in
      i[[3456789]]86-*-go32*) ;; # don't add gprof back in
      i[[3456789]]86-*-msdosdjgpp*) ;; # don't add gprof back in
d1050 1
a1050 1
  i[[3456789]]86-*-sysv5*)
d1053 1
a1053 1
  i[[3456789]]86-*-dgux*)
d1057 1
a1057 1
  i[[3456789]]86-ncr-sysv4.3*)
d1062 1
a1062 1
  i[[3456789]]86-ncr-sysv4*)
d1071 1
a1071 1
  i[[3456789]]86-*-sco3.2v5*)
d1073 1
a1073 1
  i[[3456789]]86-*-sco*)
d1079 1
a1079 1
  i[[3456789]]86-*-udk*)
d1082 1
a1082 1
  i[[3456789]]86-*-solaris2*)
d1085 1
a1085 1
  i[[3456789]]86-*-msdosdjgpp*)
d1135 1
a1135 1
  i[[3456789]]86-*-netware*)
d1269 1
a1269 1
tooldir='${exec_prefix}'/${target_alias}
d1607 5
a1611 2
# has its final value, as does build_modules.  It's time to create some 
# lists of valid targets.
d1615 45
a1659 3
for module in ${build_modules} ; do
  all_build_modules=all-build-${module}
  configure_build_modules=configure-build-${module}
a1688 4

# While at that, we remove Makefiles if we were started for recursive
# configuration, so that the top-level Makefile reconfigures them,
# like we used to do when configure itself was recursive.
d1691 5
a1695 37

# Make-targets which may need maybe dependencies.
mts="configure all install check"

# Loop over modules and make-targets.
for module in ${build_modules} ; do
  if test -z "${no_recursion}" \
     && test -f ${build_subdir}/${module}/Makefile; then
    echo 1>&2 "*** removing ${build_subdir}/${module}/Makefile to force reconfigure"
    rm -f ${build_subdir}/${module}/Makefile
  fi
  for mt in ${mts} ; do
    case ${mt} in
      install) ;; # No installing build modules.
      *) echo "maybe-${mt}-build-${module}: ${mt}-build-${module}" >> maybedep.tmp ;;
    esac
  done
done
for module in ${configdirs} ; do
  if test -z "${no_recursion}" \
     && test -f ${module}/Makefile; then
    echo 1>&2 "*** removing ${module}/Makefile to force reconfigure"
    rm -f ${module}/Makefile
  fi
  for mt in ${mts} ; do
    echo "maybe-${mt}-${module}: ${mt}-${module}" >> maybedep.tmp
  done
done
for module in ${target_configdirs} ; do
  if test -z "${no_recursion}" \
     && test -f ${target_subdir}/${module}/Makefile; then
    echo 1>&2 "*** removing ${target_subdir}/${module}/Makefile to force reconfigure"
    rm -f ${target_subdir}/${module}/Makefile
  fi
  for mt in ${mts} ; do
    echo "maybe-${mt}-target-${module}: ${mt}-target-${module}" >> maybedep.tmp
  done
d1760 1
a1760 1
	    -e "s/ [[^' -][^ ]*] / /" \
d1830 1
a1830 1
     FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -L$$r/$(TARGET_SUBDIR)/winsup -L$$r/$(TARGET_SUBDIR)/winsup/cygwin -L$$r/$(TARGET_SUBDIR)/winsup/w32api/lib -isystem $$s/winsup/include -isystem $$s/winsup/cygwin/include -isystem $$s/winsup/w32api/include' ;;
d1857 1
a1857 1
   i[[3456789]]86-*-linux*-no)
d1980 1
d1988 5
d1995 1
d1998 4
@


1.103.10.11
log
@2003-06-27  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton_dictionary-20030627-merge.
@
text
@d139 1
a139 1
target_libraries="target-libiberty \
d147 2
a148 2
# these tools are built using the target libraries, and are intended to
# run only in the target environment
d150 1
a150 1
# note: any program that *uses* libraries that are in the "target_libraries"
d165 1
a165 1
target_configdirs=`echo ${target_libraries} ${target_tools}`
d457 1
a457 1
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
d463 1
a463 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
d466 1
a466 1
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
d472 1
a472 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj} target-libf2c"
a495 3
  i960-*-*)
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
    ;;
a572 3
  m32r-*-*)
    noconfigdirs="$noconfigdirs ${libgcj} gdb"
    ;;
d802 1
a802 1
        :
d1233 4
d1658 1
a1658 2
mts="configure all install check clean distclean dvi info install-info"
mts="${mts} installcheck mostlyclean maintainer-clean TAGS"
d1700 2
a1701 2
[  --enable-serial-[{host,target,build}-]configure
                          Force sequential configuration of
d1703 1
a1703 9
			  machine, or all sub-packages])

case ${enable_serial_configure} in
  yes)
    enable_serial_build_configure=yes
    enable_serial_host_configure=yes
    enable_serial_target_configure=yes
    ;;
esac
d1710 2
a1711 1
test "x${enable_serial_build_configure}" = xyes &&
d1720 2
a1721 1
test "x${enable_serial_host_configure}" = xyes &&
d1730 2
a1731 1
test "x${enable_serial_target_configure}" = xyes &&
d1909 1
a1909 1
libstdcxx_flags='`test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/scripts/testsuite_flags --build-includes` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
@


1.103.10.12
log
@2003-08-05  David Carlton  <carlton@@kealia.com>

	* configure.in (build_warnings): Delete -Wformat-nonliteral.
	* configure (build_warnings): Ditto.

	* Merge with mainline; tag is carlton_dictionary-20030805-merge.
@
text
@a25 3
# Get 'install' or 'install-sh' and its variants.
AC_PROG_INSTALL

d192 1
a192 1
# Find the build and target subdir names.
d195 18
d339 1
a339 1
    noconfigdirs="$noconfigdirs target-libobjc"
a398 3
  am33_2.0-*-linux*)
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
    ;;
d577 1
a577 1
    noconfigdirs="$noconfigdirs ${libgcj}"
a711 3
  xtensa-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
d758 3
a760 2
for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
  case ${lang_frag} in
d766 4
a769 5
      # From the config-lang.in, get $language, $lang_requires
      language=
      lang_requires=
      . ${lang_frag}
      for other in ${lang_requires} ; do
d773 3
a775 3
	  *,$language,*)
	    echo " \`$other' language required by \`$language'; enabling" 1>&2
	    enable_languages="${enable_languages},${other}"
d783 4
a786 2
for lang_frag in ${srcdir}/gcc/*/config-lang.in .. ; do
  case ${lang_frag} in
d792 7
a798 9
      # From the config-lang.in, get $language, $target_libs, 
      # $lang_dirs, and $build_by_default
      language=
      target_libs=
      lang_dirs=
      build_by_default=
      . ${lang_frag}
      if test "x$language" = x ; then
        echo "${lang_frag} doesn't set \$language." 1>&2
d801 4
a804 12
      case ,${enable_languages}, in
        *,${language},*)
          # Language was explicitly selected; include it.
          add_this_lang=yes
          ;;
        *,all,*)
          # 'all' was selected; include 'default' languages.
          case ${build_by_default} in
            no) add_this_lang=no ;;
            *) add_this_lang=yes ;;
          esac 
          ;;
d807 5
a811 6
      case ${add_this_lang} in
        no)
          # Remove language-dependent dirs.
          eval noconfigdirs='"$noconfigdirs "'\"$target_libs $lang_dirs\"
          ;;
      esac
@


1.103.10.13
log
@2003-09-17  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton_dictionary-20030917-merge.
@
text
@d69 2
a70 14
# Export original configure arguments for use by sub-configures.  These
# will be expanded once by make, and once by the shell, so they need to
# have '$' quoted for make, and then each argument quoted for the shell.
# What's more, the 'echo' below might expand backslashes.
cat <<\EOF_SED > conftestsed
s,\\,\\\\,g; s,\$,$$,g
EOF_SED
tmp="'$progname'"
for ac_arg
do
  tmp="$tmp '"`echo "$ac_arg" | sed -f conftestsed`
done
rm -f conftestsed
TOPLEVEL_CONFIGURE_ARGUMENTS="$tmp"
d245 1
a245 2
if test x"${with_headers}" != x && test x"${with_headers} != xno \
   && test x"${with_libs}" != x && test x"${with_libs} != xno ; then
d322 1
a322 1
  powerpc-*-darwin*)
a325 4
  *-*-darwin*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb gprof"
    noconfigdirs="$noconfigdirs target-libobjc ${libgcj}"
    ;;
d377 1
a377 1
  alpha*-*-freebsd* | alpha*-*-kfreebsd*-gnu)
d498 1
a498 1
  i[[3456789]]86-*-freebsd* | i[[3456789]]86-*-kfreebsd*-gnu)
d925 1
a925 1
if test x"${with_headers}" != x && test x"${with_headers}" != xno ; then
d942 1
a942 1
if test x"${with_libs}" != x && test x"${with_libs}" != xno ; then
d1753 14
a1766 18
cat <<\EOF_SED > conftestsed
s/ --no[[^ ]]* / /
s/ --c[[a-z-]]*[[= ]][[^ ]]* / /
s/ --sr[[a-z-]]*[[= ]][[^ ]]* / /
s/ --ho[[a-z-]]*[[= ]][[^ ]]* / /
s/ --bu[[a-z-]]*[[= ]][[^ ]]* / /
s/ --t[[a-z-]]*[[= ]][[^ ]]* / /
s/ -cache-file[[= ]][[^ ]]* / /
s/ -srcdir[[= ]][[^ ]]* / /
s/ -host[[= ]][[^ ]]* / /
s/ -build[[= ]][[^ ]]* / /
s/ -target[[= ]][[^ ]]* / /
s/ [[^' -][^ ]*] / /
s/^ *//;s/ *$//
s,\\,\\\\,g; s,\$,$$,g
EOF_SED
baseargs=`echo " ${ac_configure_args} " | sed -f conftestsed`
rm -f conftestsed
d1921 1
a1921 3
  if test "x${RAW_CXX_FOR_TARGET+set}" != xset; then
    RAW_CXX_FOR_TARGET=${CXX_FOR_TARGET}
  fi
@


1.103.10.14
log
@2003-11-11  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton-dictionary-20031111-merge.
@
text
@d70 5
a74 4
# will be expanded by make, so quote '$'.
tmp="$progname $@@"
sed -e 's,\$,$$,g' <<EOF_SED > conftestsed.out
$tmp
d76 7
a82 2
TOPLEVEL_CONFIGURE_ARGUMENTS=`cat conftestsed.out`
rm -f conftestsed.out
d379 1
a379 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libiberty ${libgcj}"
d1769 1
a1769 8
# down to subconfigures.  Also strip program-prefix, program-suffix,
# and program-transform-name, so that we can pass down a consistent
# program-transform-name.  If autoconf has put single quotes around
# any of these arguments (because they contain shell metacharacters)
# then this will fail; in practice this only happens for
# --program-transform-name, so be sure to override --program-transform-name
# at the end of the argument list.
# These will be expanded by make, so quote '$'.
a1776 1
s/ --program-[[pst]][[a-z-]]*[[= ]][[^ ]]* / /
a1781 3
s/ -program-prefix[[= ]][[^ ]]* / /
s/ -program-suffix[[= ]][[^ ]]* / /
s/ -program-transform-name[[= ]][[^ ]]* / /
d1784 1
a1784 1
s,\$,$$,g
d1786 2
a1787 19
sed -f conftestsed <<EOF_SED > conftestsed.out
 ${ac_configure_args} 
EOF_SED
baseargs=`cat conftestsed.out`
rm -f conftestsed conftestsed.out

# Add in --program-transform-name, after --program-prefix and
# --program-suffix have been applied to it.  Autoconf has already
# doubled dollar signs and backslashes in program_transform_name; we want
# the backslashes un-doubled, and then the entire thing wrapped in single
# quotes, because this will be expanded first by make and then by the shell. 
# Also, because we want to override the logic in subdir configure scripts to
# choose program_transform_name, replace any s,x,x, with s,y,y,.
sed -e "s,\\\\\\\\,\\\\,g; s,','\\\\'',g; s/s,x,x,/s,y,y,/" <<EOF_SED > conftestsed.out
${program_transform_name}
EOF_SED
gcc_transform_name=`cat conftestsed.out`
rm -f conftestsed.out
baseargs="$baseargs --program-transform-name='${gcc_transform_name}'"
a1899 4
# Allow the user to override the flags for
# our build compiler if desired.
CFLAGS_FOR_BUILD=${CFLAGS_FOR_BUILD-${CFLAGS}}

a2040 1
AC_SUBST(CFLAGS_FOR_BUILD)
@


1.103.10.15
log
@2003-12-15  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton_dictionary-20031215-merge.
	* cp-support.c (class_name_from_physname): Add DMGL_PARAMS to call
	to cplus_demangle.
	(method_name_from_physname): Ditto.
@
text
@d1965 1
a1965 1
raw_libstdcxx_flags='-L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
@


1.103.10.16
log
@2004-01-26  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton_dictionary-20040126-merge.
@
text
@a371 3
  *-*-uclinux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-rda ${libgcj}"
    ;;
d504 1
a504 1
    noconfigdirs="$noconfigdirs ${libgcj} tix readline mmalloc libgui itcl gdb ld"
d1826 1
a1826 3
# Host dirs don't like to share a cache file either, horribly enough.
# This seems to be due to autoconf 2.5x stupidity.
host_configargs="--cache-file=./config.cache --build=${build_alias} --host=${host_alias} --target=${target_alias} ${extra_host_args} ${baseargs}"
a1849 9
# Different target subdirs use different values of certain variables
# (notably CXX).  Worse, multilibs use *lots* of different values.
# Worse yet, autoconf 2.5x makes some of these 'precious', meaning that
# it doesn't automatically accept command-line overrides of them.
# This means it's not safe for target subdirs to share a cache file,
# which is disgusting, but there you have it.  Hopefully this can be
# fixed in future.  It's still worthwhile to use a cache file for each
# directory.  I think.

d1851 1
a1851 1
target_configargs="--cache-file=./config.cache --host=${target_alias} --build=${build_alias} ${target_configargs}"
@


1.102
log
@Add hppa-openbsd target
@
text
@d1557 4
a1560 4
s%^CC_FOR_TARGET[ 	]*=.*$%CC_FOR_TARGET = ${CC_FOR_TARGET}%
s%^GCJ_FOR_TARGET[      ]*=.*$%GCJ_FOR_TARGET = ${GCJ_FOR_TARGET}%
s%^CXX_FOR_TARGET[ 	]*=.*$%CXX_FOR_TARGET = ${qCXX_FOR_TARGET}%
s%^CXX_FOR_TARGET_FOR_RECURSIVE_MAKE[ 	]*=.*$%CXX_FOR_TARGET_FOR_RECURSIVE_MAKE = ${qqCXX_FOR_TARGET}%
@


1.101
log
@2002-08-04  H.J. Lu  (hjl@@gnu.org)

	* configure.in (mips*-*-linux*): Don't skip target-libffi.
@
text
@d418 1
@


1.100
log
@* configure.in: Move generic linux case to end.	 Copy generic
linux noconfigdirs to mips*-*-linux* entry and new
powerpc64*-*-linux* entry.  Add target-libffi for the latter.
@
text
@a583 1
    noconfigdirs="$noconfigdirs target-libffi"
@


1.99
log
@* configure.in: Remove two redundant tests.
@
text
@a456 3
  *-*-linux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
d544 5
d583 1
d643 3
@


1.98
log
@* configure.in (mips*-*-irix6*o32): Enable stabs.
@
text
@d1422 1
a1422 4
case " $skipdirs " in
*" target-newlib "*) ;;
*)
 case " $target_configdirs " in
a1469 2
 esac
 ;;
d1481 1
a1481 1
if test "x${use_gnu_ld}" = x && test "x${with_gnu_ld}" != xno &&
@


1.97
log
@* configure.in: Don't build grez.
* Makefile.in: Ditto.
@
text
@d1258 4
@


1.96
log
@* Makefile.in: Remove references to bsp, cygmon, libstub.
* configure.in: Ditto.

* configure.in: Remove leftover reference to gdbtest.
@
text
@a643 6
  *-*-macos* | \
  *-*-mpw*)
    # Macs want a resource compiler.
    configdirs="$configdirs grez"
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;    
@


1.95
log
@* configure.in (gxx_include_dir):  Change to match versioned
C++ headers if --enable-version-specific-runtime-libs is used.
@
text
@d97 1
a97 1
cross_only="target-libgloss target-newlib target-cygmon target-opcodes target-libstub"
a398 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
    fi
a401 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
a436 3
    if test x${is_cross_compiler} != xno ; then
         target_configdirs="${target_configdirs} target-libstub target-cygmon"
    fi
a508 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
a511 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
a522 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-libstub target-cygmon"
    fi
a525 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
    fi
a545 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
    fi
a578 1
    target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
a601 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-libstub target-cygmon"
    fi
a604 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-libstub target-cygmon"
    fi
a607 3
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
    fi
d613 1
a613 1
           noconfigdirs="$noconfigdirs gdb gdbtest target-newlib target-libgloss"
@


1.94
log
@* configure.in: Make --without-x work.
@
text
@d1448 1
a1448 1
    gxx_include_dir='${libsubdir}/include/g++'
@


1.93
log
@* configure.in: Rearrange target Makefile fragment collection.
@
text
@d178 5
a182 1
  no)  skipdirs="${skipdirs} tk libgui" ;;
@


1.92
log
@* Makefile.in: Don't try to build gdbtest, tgas, ispell, inet, or
cvs[src].
* configure.in: Ditto.
@
text
@d1181 1
a1181 1
    target_makefile_frag="${target_makefile_frag} config/mt-v810"
d1184 1
a1184 1
    target_makefile_frag="${target_makefile_frag} config/mt-netware"
d1187 1
a1187 8
    target_makefile_frag="${target_makefile_frag} config/mt-netware"
    ;;
  alpha*-*-linux*)
    target_makefile_frag="${target_makefile_frag} config/mt-linux"
    target_makefile_frag="${target_makefile_frag} config/mt-alphaieee"
    ;;
  alpha*-*-*)
    target_makefile_frag="${target_makefile_frag} config/mt-alphaieee"
d1190 1
a1190 1
    target_makefile_frag="${target_makefile_frag} config/mt-linux"
d1193 1
a1193 1
    target_makefile_frag="${target_makefile_frag} config/mt-aix43"
d1196 10
a1205 1
    target_makefile_frag="${target_makefile_frag} config/mt-wince"
d1212 1
d1215 1
a1215 1
    target_makefile_frag="${target_makefile_frag} config/mt-ospace"
d1218 1
a1218 1
    target_makefile_frag="${target_makefile_frag} config/mt-d30v"
d1221 1
a1221 1
    target_makefile_frag="${target_makefile_frag} config/mt-ospace"
d1231 2
a1232 2
if test -n "${target_makefile_frag}" ; then
  for f in ${target_makefile_frag}
@


1.91
log
@merge from gcc:

2002-07-01  Nathanael Nerode <neroden@@gcc.gnu.org>

	* Makefile.in: Eliminate 'apache' targets.
	* configure.in: Eliminate 'apache' targets.

	* configure.in: Eliminate redundant tests.  Reorganize.

	* Makefile.in: Eliminate last reference to LIBGCC1_TEST.

	* config-ml.in: Eliminate references to Cygnus configure.

	* Makefile.in: Eliminate references to building emacs.

2002-07-01  Denis Chertykov  <denisc@@overta.ru>

	* configure.in: Add support for ip2k.
@
text
@d52 1
a52 1
host_tools="texinfo byacc flex bison binutils ld gas gcc sid sim gdb make patch prms send-pr gprof gdbtest tgas etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool ispell grep diff rcs cvssrc fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl inet gawk findutils snavigator libtool gettext zip fastjar"
d93 1
a93 1
native_only="autoconf automake libtool cvssrc fileutils find gawk gettext grep gzip hello indent ispell m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl inet time ash bash bzip2 prms snavigator gnuserv target-gperf"
d225 1
a225 1
    noconfigdirs="tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl inet itcl tix db snavigator gnuserv gettext"
d228 1
a228 1
    noconfigdirs="tcl tk expect dejagnu send-pr uudecode guile inet itcl tix db snavigator gnuserv libffi"
d231 2
a232 2
    # noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl inet itcl tix db snavigator gnuserv"
     noconfigdirs="expect dejagnu cvs autoconf automake send-pr rcs guile perl texinfo inet libtool"
d238 1
a238 1
     noconfigdirs="autoconf automake send-pr rcs guile perl inet"
d244 1
a244 1
     noconfigdirs="patch diff make tk tcl expect dejagnu cvssrc autoconf automake texinfo bison send-pr gprof rcs guile perl inet itcl tix db snavigator gnuserv"
d546 1
a546 1
    noconfigdirs="$noconfigdirs gprof cvssrc target-libgloss ${libgcj}"
d568 1
a568 2
    # The CVS server code doesn't work on the RS/6000
    noconfigdirs="$noconfigdirs target-newlib gprof cvssrc ${libgcj}"
@


1.90
log
@2002-06-24  Ben Elliston  <bje@@redhat.com>

	* configure.in (host_tools): Remove cgen.

	* Makefile.in (all-cgen): Remove; runs from its source directory.
	(check-cgen, install-cgen, clean-cgen): Likewise.
	(all-opcodes): No not depend on all-cgen.
	(all-sim): Likewise.
@
text
@d52 1
a52 1
host_tools="texinfo byacc flex bison binutils ld gas gcc sid sim gdb make patch prms send-pr gprof gdbtest tgas etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool ispell grep diff rcs cvssrc fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl apache inet gawk findutils snavigator libtool gettext zip fastjar"
d93 1
a93 1
native_only="autoconf automake libtool cvssrc fileutils find gawk gettext grep gzip hello indent ispell m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl apache inet time ash bash bzip2 prms snavigator gnuserv target-gperf"
d130 90
a219 3
# Work in distributions that contain no compiler tools, like Autoconf.
tentative_cc=""
if test -d ${srcdir}/config ; then
d221 18
a238 4
  m68k-hp-hpux*)
    # Avoid "too much defining" errors from HPUX compiler.
    tentative_cc="cc -Wp,-H256000"
    host_makefile_frag="config/mh-hp300"
d240 2
a241 3
  m68k-apollo-sysv*)
    tentative_cc="cc -A ansi -A runtype,any -A systype,any -U__STDC__ -DUSG"
    host_makefile_frag="config/mh-apollo68"
d243 2
a244 9
  m68k-apollo-bsd*)
    #None of the Apollo compilers can compile gas or binutils.  The preprocessor
    # chokes on bfd, the compiler won't let you assign integers to enums, and
    # other problems.  Defining CC to gcc is a questionable way to say "don't use
    # the apollo compiler" (the preferred version of GCC could be called cc,
    # or whatever), but I'm not sure leaving CC as cc is any better...
    #CC=cc -A ansi -A runtype,any -A systype,any -U__STDC__ -DNO_STDARG
    tentative_cc=gcc
    host_makefile_frag="config/mh-a68bsd"
d246 2
a247 3
  m88k-dg-dgux*)
    tentative_cc="gcc -Wall -ansi -D__using_DGUX"
    host_makefile_frag="config/mh-dgux"
d249 21
a269 4
  m88k-harris-cxux*)
    # Under CX/UX, we want to tell the compiler to use ANSI mode.
    tentative_cc="cc -Xa"
    host_makefile_frag="config/mh-cxux"
d271 2
a272 2
  m88k-motorola-sysv*)
    host_makefile_frag="config/mh-delta88"
d274 11
a284 3
  mips*-dec-ultrix*)
    tentative_cc="cc -Wf,-XNg1000"
    host_makefile_frag="config/mh-decstation"
d286 2
a287 4
  mips*-nec-sysv4*)
    # The C compiler on NEC MIPS SVR4 needs bigger tables.
    tentative_cc="cc -ZXNd=5000 -ZXNg=1000"
    host_makefile_frag="config/mh-necv4"
d289 8
a296 2
  mips*-sgi-irix6*)
    host_makefile_frag="config/mh-irix6"
d298 2
a299 2
  mips*-sgi-irix5*)
    host_makefile_frag="config/mh-irix5"
d301 5
a305 5
  mips*-sgi-irix4*)
    # Tell compiler to use K&R C.  We can't compile under the SGI Ansi
    # environment.  Also bump switch table size so that cp-parse will
    # compile.  Bump string length limit so linker builds.
    tentative_cc="cc -cckr -Wf,-XNg1500 -Wf,-XNk1000 -Wf,-XNh2000 -Wf,-XNl8192"
d307 2
a308 2
  mips*-sgi-irix3*)
    host_makefile_frag="config/mh-sysv"
d310 3
a312 2
  mips*-*-sysv4*)
    host_makefile_frag="config/mh-sysv4"
d314 2
a315 15
  mips*-*-sysv*)
    # This is for a MIPS running RISC/os 4.52C.

    # This is needed for GDB, but needs to be in the top-level make because
    # if a library is compiled with the bsd headers and gets linked with the
    # sysv system libraries all hell can break loose (e.g. a jmp_buf might be
    # a different size).
    # ptrace(2) apparently has problems in the BSD environment.  No workaround is
    # known except to select the sysv environment.  Could we use /proc instead?
    # These "sysv environments" and "bsd environments" often end up being a pain.
    #
    # This is not part of CFLAGS because perhaps not all C compilers have this
    # option.
    tentative_cc="cc -systype sysv"
    host_makefile_frag="config/mh-riscos"
d317 3
a319 3
  i370-ibm-opened*)
    tentative_cc="c89"
    host_makefile_frag="config/mh-openedition"
d321 17
a337 2
  i[3456]86-*-sysv5*)
    host_makefile_frag="config/mh-sysv5"
d339 2
a340 3
  i[3456]86-*-dgux*)
    tentative_cc="gcc -Wall -ansi -D__using_DGUX"
    host_makefile_frag="config/mh-dgux386"
d342 2
a343 5
  i[3456]86-ncr-sysv4.3*)
    # The MetaWare compiler will generate a copyright message unless you
    # turn it off by adding the -Hnocopyr flag.
    tentative_cc="cc -Hnocopyr"
    host_makefile_frag="config/mh-ncrsvr43"
d345 2
a346 8
  i[3456]86-ncr-sysv4*)
    # for an NCR 3000 (i486/SVR4) system.
    # The NCR 3000 ships with a MetaWare compiler installed as /bin/cc.
    # This compiler not only emits obnoxious copyright messages every time
    # you run it, but it chokes and dies on a whole bunch of GNU source
    # files.  Default to using the AT&T compiler installed in /usr/ccs/ATT/cc.
    tentative_cc="/usr/ccs/ATT/cc"
    host_makefile_frag="config/mh-ncr3000"
d348 2
a349 2
  i[3456]86-*-sco3.2v5*)
    host_makefile_frag="config/mh-sysv"
d351 2
a352 5
  i[3456]86-*-sco*)
    # The native C compiler botches some simple uses of const.  Unfortunately,
    # it doesn't defined anything like "__sco__" for us to test for in ansidecl.h.
    tentative_cc="cc -Dconst="
    host_makefile_frag="config/mh-sco"
d354 2
a355 2
  i[3456]86-*-udk*)
    host_makefile_frag="config/mh-sysv5"
d357 2
a358 2
  i[3456]86-*-isc*)
    host_makefile_frag="config/mh-sysv"
d360 2
a361 2
  i[3456]86-*-solaris2*)
    host_makefile_frag="config/mh-sysv4"
d363 2
a364 2
  i[3456]86-*-aix*)
    host_makefile_frag="config/mh-aix386"
d366 2
a367 2
  i[3456]86-*-msdosdjgpp*)
    host_makefile_frag="config/mh-djgpp"
d369 2
a370 2
  *-cygwin*)
    host_makefile_frag="config/mh-cygwin"
d372 2
a373 2
  *-mingw32*)
    host_makefile_frag="config/mh-mingw32"
d375 2
a376 2
  *-interix*)
    host_makefile_frag="config/mh-interix"
d378 2
a379 3
  vax-*-ultrix2*)
    # The old BSD pcc isn't up to compiling parts of gdb so use gcc
    tentative_cc=gcc
d381 2
a382 2
  *-*-solaris2*)
    host_makefile_frag="config/mh-solaris"
d384 2
a385 4
  m68k-sun-sunos*)
    # Sun's C compiler needs the -J flag to be able to compile cp-parse.c
    # without overflowing the jump tables (-J says to use a 32 bit table)
    tentative_cc="cc -J"
d387 2
a388 3
  *-hp-hpux[78]*)
    tentative_cc="cc -Wp,-H256000"
    host_makefile_frag="config/mh-hpux8"
d390 2
a391 3
  *-hp-hpux*)
    tentative_cc="cc -Wp,-H256000"
    host_makefile_frag="config/mh-hpux"
d393 5
a397 3
  *-*-hiux*)
    tentative_cc="cc -Wp,-H256000"
    host_makefile_frag="config/mh-hpux"
d399 5
a403 4
  rs6000-*-lynxos*)
    # /bin/cc is less than useful for our purposes.  Always use GCC
    tentative_cc="/usr/cygnus/progressive/bin/gcc"
    host_makefile_frag="config/mh-lynxrs6k"
d405 2
a406 3
  *-*-lynxos*)
    # /bin/cc is less than useful for our purposes.  Always use GCC
    tentative_cc="/bin/gcc"
d408 2
a409 2
  *-*-sysv4*)
    host_makefile_frag="config/mh-sysv4"
d411 5
a415 2
  *-*-sysv*)
    host_makefile_frag="config/mh-sysv"
d417 6
a422 38
esac
fi

# If we aren't going to be using gcc, see if we can extract a definition
# of CC from the fragment.
# Actually, use the 'pre-extracted' version above.
if test -z "${CC}" && test "${build}" = "${host}" ; then
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  found=
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/gcc; then
      found=yes
      break
    fi
  done
  IFS="$save_ifs"
  if test -z "${found}" && test -n "${tentative_cc}" ; then
    CC=$tentative_cc
  fi
fi

# We default to --with-shared on platforms where -fpic is meaningless.
# Well, we don't yet, but we will.
if false && test "${host}" = "${target}" && test x${enable_shared} = x ; then
  case "${target}" in
    alpha*-dec-osf*)	enable_shared=yes ;;
    alpha*-*-linux*)	enable_shared=yes ;;
    mips-sgi-irix5*)	enable_shared=yes ;;
    *)			enable_shared=no ;;
  esac
fi

# hpux11 in 64bit mode has libraries in a weird place.  Arrange to find
# them automatically.
case "${host}" in
  hppa*64*-*-hpux11*)	
    withoptions="$withoptions -x-libraries=/usr/lib/pa20_64 -x-includes=/usr/X11R6/include"
d424 4
a427 21
esac

case "${enable_shared}" in
  yes) shared=yes ;;
  no) shared=no ;;
  "") shared=no ;;
  *) shared=yes ;;
esac

rm -f mh-frag
if test -n "${host_makefile_frag}" ; then
  for f in ${host_makefile_frag}
  do
    cat ${srcdir}/$f >> mh-frag
  done
  host_makefile_frag=mh-frag
fi

case "${target}" in
  v810*)
    target_makefile_frag="${target_makefile_frag} config/mt-v810"
d429 3
a431 2
  i[3456]86-*-netware*)
    target_makefile_frag="${target_makefile_frag} config/mt-netware"
d433 3
a435 2
  powerpc-*-netware*)
    target_makefile_frag="${target_makefile_frag} config/mt-netware"
d437 5
a441 3
  alpha*-*-linux*)
    target_makefile_frag="${target_makefile_frag} config/mt-linux"
    target_makefile_frag="${target_makefile_frag} config/mt-alphaieee"
d443 2
a444 2
  alpha*-*-*)
    target_makefile_frag="${target_makefile_frag} config/mt-alphaieee"
d446 3
a448 2
  *-*-linux*)
    target_makefile_frag="${target_makefile_frag} config/mt-linux"
d450 11
a460 2
  *-*-aix4.[3456789]* | *-*-aix[56789].*)
    target_makefile_frag="${target_makefile_frag} config/mt-aix43"
d462 2
a463 2
  mips*-*-pe | sh*-*-pe | *arm-wince-pe)
    target_makefile_frag="${target_makefile_frag} config/mt-wince"
d465 16
a480 1
esac
d482 9
a490 6
# If --enable-target-optspace always use -Os instead of -O2 to build
# the target libraries, similarly if it is not specified, use -Os
# on selected platforms.
case "${enable_target_optspace}:${target}" in
  yes:*)
    target_makefile_frag="${target_makefile_frag} config/mt-ospace"
d492 7
a498 2
  :d30v-*)
    target_makefile_frag="${target_makefile_frag} config/mt-d30v"
d500 2
a501 2
  :m32r-* | :d10v-* | :fr30-*)
    target_makefile_frag="${target_makefile_frag} config/mt-ospace"
d503 2
a504 1
  no:* | :*)
d506 5
a510 2
  *)
    echo "*** bad value \"${enable_target_optspace}\" for --enable-target-optspace flag; ignored" 1>&2
d512 4
a515 50
esac

skipdirs=
use_gnu_ld=
use_gnu_as=

# some tools are so dependent upon X11 that if we're not building with X, 
# it's not even worth trying to configure, much less build, that tool.

case ${with_x} in
  yes | "")  # the default value for this tree is that X11 is available
	;;
  no)
	skipdirs="${skipdirs} tk libgui"
	;;
  *)
    	echo "*** bad value \"${with_x}\" for -with-x flag; ignored" 1>&2
    	;;
esac

# Some tools are only suitable for building in a "native" situation.
# Those are added when we have a host==target configuration.  For cross
# toolchains, we add some directories that should only be useful in a
# cross-compiler.

case $is_cross_compiler in
  no) skipdirs="${skipdirs} ${cross_only}" ;;
  yes) skipdirs="${skipdirs} ${native_only}" ;;
esac

# We always want to use the same name for this directory, so that dejagnu
# can reliably find it.
target_subdir=${target_alias}

if test ! -d ${target_subdir} ; then
  if mkdir ${target_subdir} ; then true
  else
    echo "'*** could not make ${PWD=`${PWDCMD-pwd}`}/${target_subdir}" 1>&2
    exit 1
  fi
fi

build_subdir=${build_alias}

if test x"${build_alias}" != x"${host}" ; then
  if test ! -d ${build_subdir} ; then
    if mkdir ${build_subdir} ; then true
    else
      echo "'*** could not make ${PWD=`${PWDCMD-pwd}`}/${build_subdir}" 1>&2
      exit 1
d517 5
a521 53
  fi
fi

copy_dirs=

# Handle --with-headers=XXX.  The contents of the named directory are
# copied to $(tooldir)/sys-include.
if test x"${with_headers}" != x ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-headers is only supported when cross compiling
    exit 1
  fi
  case "${exec_prefixoption}" in
  "") x=${prefix} ;;
  *) x=${exec_prefix} ;;
  esac
  copy_dirs="${copy_dirs} ${with_headers} $x/${target_alias}/sys-include"
fi

# Handle --with-libs=XXX.  Multiple directories are permitted.  The
# contents are copied to $(tooldir)/lib.
if test x"${with_libs}" != x ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-libs is only supported when cross compiling
    exit 1
  fi
  # Copy the libraries in reverse order, so that files in the first named
  # library override files in subsequent libraries.
  case "${exec_prefixoption}" in
  "") x=${prefix} ;;
  *) x=${exec_prefix} ;;
  esac
  for l in ${with_libs}; do
    copy_dirs="$l $x/${target_alias}/lib ${copy_dirs}"
  done
fi

# Handle ${copy_dirs}
set fnord ${copy_dirs}
shift
while test $# != 0 ; do
  if test -f $2/COPIED && test x"`cat $2/COPIED`" = x"$1" ; then
    :
  else
    echo Copying $1 to $2

    # Use the install script to create the directory and all required
    # parent directories.
    if test -d $2 ; then
      :
    else
      echo >config.temp
      ${srcdir}/install-sh -c -m 644 config.temp $2/COPIED
a522 32

    # Copy the directory, assuming we have tar.
    # FIXME: Should we use B in the second tar?  Not all systems support it.
    (cd $1; tar -cf - .) | (cd $2; tar -xpf -)

    # It is the responsibility of the user to correctly adjust all
    # symlinks.  If somebody can figure out how to handle them correctly
    # here, feel free to add the code.

    echo $1 > $2/COPIED
  fi
  shift; shift
done

# If both --with-headers and --with-libs are specified, default to
# --without-newlib.
if test x"${with_headers}" != x && test x"${with_libs}" != x ; then
  if test x"${with_newlib}" = x ; then
    with_newlib=no
  fi
fi

# Recognize --with-newlib/--without-newlib.
case ${with_newlib} in
  no) skipdirs="${skipdirs} target-newlib" ;;
  yes) skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'` ;;
esac

# Default to using --with-stabs for certain targets.
if test x${with_stabs} = x ; then
  case "${target}" in
  mips*-*-irix6*)
d524 7
a530 3
  mips*-*-* | alpha*-*-osf*)
    with_stabs=yes;
    withoptions="${withoptions} --with-stabs"
d532 5
a536 23
  esac
fi

# Configure extra directories which are host specific

case "${host}" in
	i[3456]86-*-go32*)
	  configdirs="$configdirs dosrel" ;;
	i[3456]86-*-mingw32*)
	  configdirs="$configdirs dosrel" ;;
	*-cygwin*)
	  configdirs="$configdirs libtermcap dosrel" ;;
esac

# Remove more programs from consideration, based on the host or 
# target this usually means that a port of the program doesn't
# exist yet.

noconfigdirs=""

case "${host}" in
  hppa*64*-*-*)
    noconfigdirs="$noconfigdirs byacc"
d538 5
a542 2
  i[3456]86-*-vsta)
    noconfigdirs="tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl apache inet itcl tix db snavigator gnuserv gettext"
d544 3
a546 12
  i[3456]86-*-go32* | i[3456]86-*-msdosdjgpp*)
    noconfigdirs="tcl tk expect dejagnu send-pr uudecode guile apache inet itcl tix db snavigator gnuserv libffi"
	;;
  i[3456]86-*-mingw32*)
    # noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl apache inet itcl tix db snavigator gnuserv"
     noconfigdirs="expect dejagnu cvs autoconf automake send-pr rcs guile perl texinfo apache inet libtool"
	;;
  i[3456]86-*-beos*)
     noconfigdirs="$noconfigdirs tk itcl tix libgui gdb"
     ;;
  *-*-cygwin*)
     noconfigdirs="autoconf automake send-pr rcs guile perl apache inet"
d548 5
a552 2
  *-*-netbsd*)
    noconfigdirs="rcs"
d554 3
a556 2
  ppc*-*-pe)
     noconfigdirs="patch diff make tk tcl expect dejagnu cvssrc autoconf automake texinfo bison send-pr gprof rcs guile perl apache inet itcl tix db snavigator gnuserv"
d559 7
a565 1
    noconfigdirs="$noconfigdirs tk itcl tix libgui gdb dejagnu readline"
d567 3
a569 21
esac

# Save it here so that, even in case of --enable-libgcj, if the Java
# front-end isn't enabled, we still get libgcj disabled.
libgcj_saved=$libgcj
case $enable_libgcj in
yes)
  # If we reset it here, it won't get added to noconfigdirs in the
  # target-specific build rules, so it will be forcibly enabled
  # (unless the Java language itself isn't enabled).
  libgcj=
  ;;
no)
  # Make sure we get it printed in the list of not supported target libs.
  noconfigdirs="$noconfigdirs ${libgcj}"
  ;;
esac

case "${target}" in
  *-*-chorusos)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d571 2
a572 2
  *-*-freebsd[12] | *-*-freebsd[12].* | *-*-freebsd*aout*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d574 2
a575 11
  *-*-netbsd*)
    # Skip some stuff on all NetBSD configurations.
    skipdirs="$skipdirs target-newlib target-libiberty target-libgloss"

    # Skip some stuff that's unsupported on some NetBSD configurations.
    case "${target}" in
      i*86-*-netbsdelf*) ;;
      *)
	noconfigdirs="$noconfigdirs ${libgcj}"
	;;
    esac
d577 2
a578 2
  *-*-netware)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-newlib target-libiberty target-libgloss ${libgcj}"
d580 3
a582 8
  *-*-rtems*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    case ${target} in
	h8300*-*-* | h8500-*-*)
	  noconfigdirs="$noconfigdirs target-libf2c"
          ;;
        *) ;;
    esac
d584 7
a590 2
  *-*-vxworks*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d592 2
a593 5
  alpha*-dec-osf*)
    # ld works, but does not support shared libraries.
    # newlib is not 64 bit ready.  I'm not sure about fileutils.
    # gas doesn't generate exception information.
    noconfigdirs="$noconfigdirs gas ld fileutils target-newlib target-libgloss"
d595 2
a596 2
  alpha*-*-*vms*)
    noconfigdirs="$noconfigdirs gdb ld target-newlib target-libgloss ${libgcj}"
d598 6
a603 3
  alpha*-*-linux*)
    # newlib is not 64 bit ready
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
d605 2
a606 2
  alpha*-*-freebsd*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
d608 2
a609 3
  alpha*-*-*)
    # newlib is not 64 bit ready
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d611 1
a611 12
  sh-*-linux*)
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
    ;;    
  sh*-*-pe|mips*-*-pe|*arm-wince-pe)
    noconfigdirs="$noconfigdirs ${libgcj}"
    noconfigdirs="$noconfigdirs target-examples"
    noconfigdirs="$noconfigdirs target-libiberty texinfo send-pr"
    noconfigdirs="$noconfigdirs tcl tix tk itcl libgui sim"
    noconfigdirs="$noconfigdirs expect dejagnu"
    # the C++ libraries don't build on top of CE's C libraries
    noconfigdirs="$noconfigdirs ${libstdcxx_version}"
    skipdirs="$skipdirs target-newlib"
d613 4
a616 3
      *-*-cygwin*) ;; # keep gdb and readline
      *) noconfigdirs="$noconfigdirs gdb readline ${libstdcxx_version}"
	 ;;
a617 2
    ;;
  arc-*-*)
d620 1
a620 1
  arm-*-pe*)
d623 5
a627 2
  arm-*-oabi*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d629 5
a633 2
  thumb-*-coff)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d635 5
a639 2
  thumb-*-elf)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d641 1
a641 4
  thumb-*-oabi)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    ;;
  strongarm-*-elf)
d643 5
d649 1
a649 2
  strongarm-*-coff)
    noconfigdirs="$noconfigdirs ${libgcj}"
d651 2
a652 2
  xscale-*-elf)
    noconfigdirs="$noconfigdirs target-libffi target-qthreads"
d654 2
a655 2
  xscale-*-coff)
    noconfigdirs="$noconfigdirs ${libgcj}"
d657 1
a657 1
  thumb-*-pe)
d660 2
a661 2
  arm-*-riscix*)
    noconfigdirs="$noconfigdirs ld target-libgloss ${libgcj}"
d663 2
a664 2
  avr-*-*)
    noconfigdirs="$noconfigdirs target-libiberty ${libstdcxx_version} ${libgcj}"
d666 2
a667 2
  c4x-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d669 2
a670 2
  c54x*-*-* | tic54x-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj} gcc gdb newlib"
d672 7
a678 1
  cris-*-*)
d680 2
a681 5
    ;;
  d10v-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
    ;;
  d30v-*-*)
d684 123
a806 4
  fr30-*-elf*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
d808 13
a820 5
    ;;
  frv-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
d822 65
a886 37
    ;;
  h8300*-*-*)
    noconfigdirs="$noconfigdirs target-libgloss"
    ;;
  h8500-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj} target-libf2c"
    ;;
  hppa*64*-*-linux* | parisc*64*-*-linux*)
    # In this case, it's because the hppa64-linux target is for
    # the kernel only at this point and has no libc, and thus no
    # headers, crt*.o, etc., all of which are needed by these.
    noconfigdirs="$noconfigdirs target-zlib"
    ;;
  hppa*-*-*elf* | \
  parisc*-*-linux* | hppa*-*-linux* | \
  hppa*-*-lites* | \
  hppa*64*-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    # Do configure ld/binutils/gas for this case.
    ;;
  hppa*-*-*)
    # According to Alexandre Oliva <aoliva@@redhat.com>, libjava won't
    # build on HP-UX 10.20.
    noconfigdirs="$noconfigdirs ld shellutils ${libgcj}"
    ;;
  ia64*-*-elf*)
    # No gdb support yet.
    noconfigdirs="$noconfigdirs tix readline mmalloc libgui itcl gdb"
    ;;
  ia64*-**-hpux*)
    # No gdb or ld support yet.
    noconfigdirs="$noconfigdirs tix readline mmalloc libgui itcl gdb ld"
    ;;
  i[3456]86-*-coff | i[3456]86-*-elf)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
         target_configdirs="${target_configdirs} target-libstub target-cygmon"
d888 70
a957 13
    ;;
  i[34567]86-*-freebsd*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
  s390*-*-linux*)
    # The libffi port is not yet in the GCC tree
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;;
  i[3456]86-*-linux*)
    # This section makes it possible to build newlib natively on linux.
    # If we are using a cross compiler then don't configure newlib.
    if test x${is_cross_compiler} != xno ; then
         noconfigdirs="$noconfigdirs target-newlib"
a958 12
    noconfigdirs="$noconfigdirs target-libgloss"
    # If we are not using a cross compiler, do configure newlib.
    # Note however, that newlib will only be configured in this situation
    # if the --with-newlib option has been given, because otherwise
    # 'target-newlib' will appear in skipdirs.
    ;;
  *-*-linux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
  i[3456]86-*-mingw32*)
    target_configdirs="$target_configdirs target-mingw"
    noconfigdirs="$noconfigdirs expect target-libgloss ${libgcj}"
d960 12
a971 12
    # Can't build gdb for mingw32 if not native.
    case "${host}" in
      i[3456]86-*-mingw32) ;; # keep gdb tcl tk expect etc.
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix db snavigator gnuserv"
         ;;
    esac
    ;;    
  *-*-cygwin*)
    target_configdirs="$target_configdirs target-libtermcap target-winsup"
    noconfigdirs="$noconfigdirs target-gperf target-libgloss ${libgcj}"
    # always build newlib.
    skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'`
d973 8
a980 9
    # Can't build gdb for Cygwin if not native.
    case "${host}" in
      *-*-cygwin*) ;; # keep gdb tcl tk expect etc.
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix libgui db snavigator gnuserv"
         ;;
    esac
    ;;    
  i[3456]86-*-pe)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d982 3
a984 4
  i[3456]86-*-sco3.2v5*)
    # The linker does not yet know about weak symbols in COFF,
    # and is not configured to handle mixed ELF and COFF.
    noconfigdirs="$noconfigdirs ld target-libgloss ${libgcj}"
d986 9
a994 2
  i[3456]86-*-sco*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d996 3
a998 2
  i[3456]86-*-solaris2*)
    noconfigdirs="$noconfigdirs target-libgloss"
d1000 4
a1003 2
  i[3456]86-*-sysv4*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d1005 2
a1006 5
  i[3456]86-*-beos*)
     noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
     ;;
  m68hc11-*-*|m6811-*-*|m68hc12-*-*|m6812-*-*)
    noconfigdirs="$noconfigdirs target-libiberty ${libstdcxx_version} ${libgcj}"
d1008 3
a1010 5
  m68k-*-elf*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
d1012 4
a1015 5
  m68k-*-coff*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
d1017 2
a1018 4
  mcore-*-pe*)
  # The EPOC C++ environment does not support exceptions or rtti,
  # and so building libstdc++-v3 tends not to always work.
    noconfigdirs="$noconfigdirs target-libstdc++-v3"
d1020 2
a1021 2
  mmix-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d1023 5
a1027 5
  mn10200-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-libstub target-cygmon"
    fi
d1029 2
a1030 5
  mn10300-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
    fi
d1032 2
a1033 3
  powerpc-*-aix*)
    # copied from rs6000-*-* entry
    noconfigdirs="$noconfigdirs gprof cvssrc target-libgloss ${libgcj}"
d1035 15
a1049 9
  powerpc*-*-winnt* | powerpc*-*-pe* | ppc*-*-pe)
    target_configdirs="$target_configdirs target-winsup"
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl tix db snavigator gnuserv ${libgcj}"
    # always build newlib.
    skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'`
    ;;
    # This is temporary until we can link against shared libraries
  powerpcle-*-solaris*)
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl tix db snavigator gnuserv ${libgcj}"
d1051 3
a1053 2
  powerpc-*-beos*)
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
d1055 2
a1056 5
  powerpc-*-eabi)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
    fi
d1058 3
a1060 3
  rs6000-*-lynxos*)
    # The CVS server code doesn't work on the RS/6000
    noconfigdirs="$noconfigdirs target-newlib gprof cvssrc ${libgcj}"
d1062 5
a1066 2
  rs6000-*-aix*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
d1068 8
a1075 2
  rs6000-*-*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
d1077 2
a1078 2
  m68k-apollo-*)
    noconfigdirs="$noconfigdirs ld binutils gprof target-libgloss ${libgcj}"
d1080 5
a1084 3
  mips*-*-irix5*)
    # The GNU linker does not support shared libraries.
    noconfigdirs="$noconfigdirs ld gprof target-libgloss ${libgcj}"
d1086 2
a1087 7
  mips*-*-irix6*)
    # The GNU assembler does not support IRIX 6.
    # Linking libjava exceeds command-line length limits on at least
    # IRIX 6.2, but not on IRIX 6.5.
    # Also, boehm-gc won't build on IRIX 6.5, according to Jeffrey Oldham
    # <oldham@@codesourcery.com>
    noconfigdirs="$noconfigdirs gas gprof target-libgloss ${libgcj}"
d1089 2
a1090 2
  mips*-dec-bsd*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d1092 2
a1093 2
  mips*-*-bsd*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d1095 2
a1096 6
  mipstx39-*-*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"   # same as generic mips
    target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
   ;;
  mips*-*-linux*)
    noconfigdirs="$noconfigdirs target-libffi"
d1098 2
a1099 2
  mips*-*-*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
d1101 2
a1102 2
  romp-*-*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes target-libgloss ${libgcj}"
d1104 2
a1105 8
  sh-*-*)
    case "${host}" in
      i[3456]86-*-vsta) ;; # don't add gprof back in
      i[3456]86-*-go32*) ;; # don't add gprof back in
      i[3456]86-*-msdosdjgpp*) ;; # don't add gprof back in
      *) skipdirs=`echo " ${skipdirs} " | sed -e 's/ gprof / /'` ;;
    esac
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d1107 2
a1108 2
  sh64-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d1110 3
a1112 5
  sparc-*-elf*)
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-libstub target-cygmon"
    fi
    noconfigdirs="$noconfigdirs ${libgcj}"
d1114 2
a1115 5
  sparc64-*-elf*)
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-libstub target-cygmon"
    fi
    noconfigdirs="$noconfigdirs ${libgcj}"
d1117 4
a1120 5
  sparclite-*-*)
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-libstub target-cygmon"
    fi
    noconfigdirs="$noconfigdirs ${libgcj}"
d1122 3
a1124 7
  sparc-*-sunos4*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
           noconfigdirs="$noconfigdirs gdb gdbtest target-newlib target-libgloss"
    else
           use_gnu_ld=no
    fi
d1126 3
a1128 1
  sparc-*-solaris* | sparc64-*-solaris* | sparcv9-*-solaris*)
d1130 3
a1132 2
  v810-*-*)
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld ${libstdcxx_version} opcodes target-libgloss ${libgcj}"
d1134 4
a1137 2
  v850-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d1139 3
a1141 2
  v850e-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d1143 2
a1144 2
  v850ea-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d1146 2
a1147 17
  vax-*-vms)
    noconfigdirs="$noconfigdirs bfd binutils gdb ld target-newlib opcodes target-libgloss ${libgcj}"
    ;;
  vax-*-*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;;
  *-*-lynxos*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;; 
  *-*-macos* | \
  *-*-mpw*)
    # Macs want a resource compiler.
    configdirs="$configdirs grez"
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;    
  *-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
a1149 18

# If we aren't building newlib, then don't build libgloss, since libgloss
# depends upon some newlib header files.
case "${noconfigdirs}" in
  *target-libgloss*) ;;
  *target-newlib*) noconfigdirs="$noconfigdirs target-libgloss" ;;
esac

# Make sure we don't let GNU ld be added if we didn't want it.
if test x$with_gnu_ld = xno ; then
  use_gnu_ld=no
  noconfigdirs="$noconfigdirs ld"
fi

# Make sure we don't let GNU as be added if we didn't want it.
if test x$with_gnu_as = xno ; then
  use_gnu_as=no
  noconfigdirs="$noconfigdirs gas"
d1152 8
a1159 90
# Figure out what language subdirectories are present.
# Look if the user specified --enable-languages="..."; if not, use
# the environment variable $LANGUAGES if defined. $LANGUAGES might
# go away some day.
# NB:  embedded tabs in this IF block -- do not untabify
if test x"${enable_languages+set}" != xset; then
	if test x"${LANGUAGES+set}" = xset; then
		enable_languages="${LANGUAGES}"
		echo configure.in: warning: setting LANGUAGES is deprecated, use --enable-languages instead 1>&2
	else
		enable_languages=all
	fi
else
	if test x"${enable_languages}" = x ||
	   test x"${enable_languages}" = xyes;
	then
		echo configure.in: --enable-languages needs at least one language argument 1>&2
		exit 1
	fi
fi
enable_languages=`echo "${enable_languages}" | sed -e 's/[ 	,][ 	,]*/,/g' -e 's/,$//'`

# First scan to see if an enabled language requires some other language.
# We assume that a given config-lang.in will list all the language
# front ends it requires, even if some are required indirectly.
for lang in ${srcdir}/gcc/*/config-lang.in ..
do
   case $lang in
    ..)
       ;;
    # The odd quoting in the next line works around
    # an apparent bug in bash 1.12 on linux.
    ${srcdir}/gcc/[*]/config-lang.in)
       ;;
    *)
       lang_alias=`sed -n -e 's,^language=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^language=\([^ 	]*\).*$,\1,p' $lang`
       this_lang_requires=`sed -n -e 's,^lang_requires=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^lang_requires=\([^ 	]*\).*$,\1,p' $lang`
       for other in $this_lang_requires
       do
	  case ,${enable_languages}, in
	   *,$other,*)
	      ;;
	   *,all,*)
	      ;;
	   *,$lang_alias,*)
	      echo " \`$other' language required by \`$lang_alias'; enabling" 1>&2
	      enable_languages="$enable_languages,$other"
	      ;;
	  esac
       done
       ;;
   esac
done

subdirs=
for lang in ${srcdir}/gcc/*/config-lang.in ..
do
	case $lang in
	..) ;;
	# The odd quoting in the next line works around
	# an apparent bug in bash 1.12 on linux.
	${srcdir}/gcc/[*]/config-lang.in) ;;
	*)
	  lang_alias=`sed -n -e 's,^language=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^language=\([^ 	]*\).*$,\1,p' $lang`
	  this_lang_libs=`sed -n -e 's,^target_libs=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^target_libs=\([^ 	]*\).*$,\1,p' $lang`
	  this_lang_dirs=`sed -n -e 's,^lang_dirs=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^lang_dirs=\([^ 	]*\).*$,\1,p' $lang`
	  build_by_default=`sed -n -e 's,^build_by_default=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^build_by_default=\([^ 	]*\).*$,\1,p' $lang`
	  if test "x$lang_alias" = x
	  then
		echo "$lang doesn't set \$language." 1>&2
		exit 1
	  fi
	  case ${build_by_default},${enable_languages}, in
	  *,$lang_alias,*) add_this_lang=yes ;;
	  no,*) add_this_lang=no ;;
	  *,all,*) add_this_lang=yes ;;
	  *) add_this_lang=no ;;
	  esac
	  if test x"${add_this_lang}" = xyes; then
	      eval target_libs='"$target_libs "'\"$this_lang_libs\"
	  else
	      eval noconfigdirs='"$noconfigdirs "'\"$this_lang_libs $this_lang_dirs\"
	  fi
	  ;;
	esac
done

# Remove the entries in $skipdirs and $noconfigdirs from $configdirs and
# $target_configdirs.
# If we have the source for $noconfigdirs entries, add them to $notsupp.
d1161 11
a1171 37
notsupp=""
for dir in . $skipdirs $noconfigdirs ; do
  dirname=`echo $dir | sed -e s/target-//g`
  if test $dir != .  && echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    configdirs=`echo " ${configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure \
	|| test -r $srcdir/$dirname/configure.in ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
  if test $dir != . && echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    target_configdirs=`echo " ${target_configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure \
	|| test -r $srcdir/$dirname/configure.in ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
done

# Sometimes the tools are distributed with libiberty but with no other
# libraries.  In that case, we don't want to build target-libiberty.
if test -n "${target_configdirs}" ; then
  others=
  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do
    if test "$i" != "libiberty" ; then
      if test -r $srcdir/$i/configure || test -r $srcdir/$i/configure.in ; then
	others=yes;
	break;
      fi
d1174 3
a1176 2
  if test -z "${others}" ; then
    target_configdirs=
d1180 27
a1206 13
# Deconfigure all subdirectories, in case we are changing the
# configuration from one where a subdirectory is supported to one where it
# is not.
if test -z "${norecursion}" && test -n "${configdirs}" ; then
  for i in `echo ${configdirs} | sed -e s/target-//g` ; do
    rm -f $i/Makefile
  done
fi
if test -z "${norecursion}" && test -n "${target_configdirs}" ; then
  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do
    rm -f ${target_subdir}/$i/Makefile
  done
fi
d1208 19
a1226 18
# Quietly strip out all directories which aren't configurable in this tree.
# This relies on all configurable subdirectories being autoconfiscated, which
# is now the case.
configdirs_all="$configdirs"
configdirs=
for i in ${configdirs_all} ; do
  if test -f ${srcdir}/$i/configure ; then
    configdirs="${configdirs} $i"
  fi
done
target_configdirs_all="$target_configdirs"
target_configdirs=
for i in ${target_configdirs_all} ; do
  j=`echo $i | sed -e s/target-//g` 
  if test -f ${srcdir}/$j/configure ; then
    target_configdirs="${target_configdirs} $i"
  fi
done
d1228 7
a1234 33
# Produce a warning message for the subdirs we can't configure.
# This isn't especially interesting in the Cygnus tree, but in the individual
# FSF releases, it's important to let people know when their machine isn't
# supported by the one or two programs in a package.

if test -n "${notsupp}" && test -z "${norecursion}" ; then
  # If $appdirs is non-empty, at least one of those directories must still
  # be configured, or we error out.  (E.g., if the gas release supports a
  # specified target in some subdirs but not the gas subdir, we shouldn't
  # pretend that all is well.)
  if test -n "$appdirs" ; then
    for dir in $appdirs ; do
      if test -r $dir/Makefile.in ; then
	if echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
	if echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
      fi
    done
    if test -n "$appdirs" ; then
      echo "*** This configuration is not supported by this package." 1>&2
      exit 1
    fi
  fi
  # Okay, some application will build, or we don't care to check.  Still
  # notify of subdirs not getting built.
  echo "*** This configuration is not supported in the following subdirectories:" 1>&2
  echo "    ${notsupp}" 1>&2
  echo "    (Any other directories should still work fine.)" 1>&2
d1250 4
a1253 5
if test x${use_gnu_as} = x ; then
  if test x${with_gnu_as} != xno && echo " ${configdirs} " | grep " gas " > /dev/null 2>&1 && test -d ${srcdir}/gas ; then
    with_gnu_as=yes
    withoptions="$withoptions --with-gnu-as"
  fi
d1256 4
a1259 5
if test x${use_gnu_ld} = x ; then
  if test x${with_gnu_ld} != xno && echo " ${configdirs} " | grep " ld " > /dev/null 2>&1 && test -d ${srcdir}/ld ; then
    with_gnu_ld=yes
    withoptions="$withoptions --with-gnu-ld"
  fi
d1265 1
a1265 1
if test x${with_newlib} != xno && echo " ${target_configdirs} " | grep " target-newlib " > /dev/null 2>&1 && test -d ${srcdir}/newlib ; then
d1270 9
a1278 7
rm -f mt-frag
if test -n "${target_makefile_frag}" ; then
  for f in ${target_makefile_frag}
  do
    cat ${srcdir}/$f >> mt-frag
  done
  target_makefile_frag=mt-frag
d1281 5
a1285 3
case "$host" in
  *msdosdjgpp*)
    enable_gdbtk=no ;;
d1287 20
a1306 6
# Determine whether gdb needs tk/tcl or not.
case "$enable_gdbtk" in
  no)
    GDB_TK="" ;;
  *)
    GDB_TK="all-tcl all-tk all-itcl all-tix all-libgui" ;;
d1517 1
a1517 2
   echo " ${configdirs} " | grep " ld " > /dev/null &&
   test -d ${srcdir}/ld; then
@


1.89
log
@* configure.in: Fix AIX configury bug.
@
text
@d52 1
a52 1
host_tools="texinfo byacc flex bison binutils ld gas gcc cgen sid sim gdb make patch prms send-pr gprof gdbtest tgas etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool ispell grep diff rcs cvssrc fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl apache inet gawk findutils snavigator libtool gettext zip fastjar"
@


1.88
log
@* configure.in: replace ${topsrcdir} with ${srcdir}
@
text
@a897 1
    use_gnu_ld=yes
a923 1
    use_gnu_ld=yes
@


1.87
log
@* configure.in: Move definition of libstdcxx_flags
right above usage, rather than waaay earlier.
@
text
@d1449 1
a1449 1
    . ${topsrcdir}/config.if
d1470 1
a1470 1
   if test -d ${topsrcdir}/gcc; then
d1516 1
a1516 1
if test "${build}" = "${host}" && test -d ${topsrcdir}/gcc; then
d1530 1
a1530 1
elif test -d ${topsrcdir}/gcc; then
d1546 1
a1546 1
elif test -d ${topsrcdir}/gcc; then
d1563 1
a1563 1
elif test -d ${topsrcdir}/gcc; then
@


1.86
log
@* configure.in: Rearrange a little.
@
text
@a129 3
# Don't use libstdc++-v3's flags to configure/build itself.
libstdcxx_flags='`case $$dir in libstdc++-v3 | libjava) ;; *) test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags --build-includes;; esac` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'

d1557 3
@


1.85
log
@* configure.in: Pull definition of is_cross_compiler earlier.
@
text
@a499 27
# If both --with-headers and --with-libs are specified, default to
# --without-newlib.
if test x"${with_headers}" != x && test x"${with_libs}" != x ; then
  if test x"${with_newlib}" = x ; then
    with_newlib=no
  fi
fi

# Recognize --with-newlib/--without-newlib.
if test x${with_newlib} = xno ; then
  skipdirs="${skipdirs} target-newlib"
elif test x${with_newlib} = xyes ; then
  skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'`
fi

# Default to using --with-stabs for certain targets.
if test x${with_stabs} = x ; then
  case "${target}" in
  mips*-*-irix6*)
    ;;
  mips*-*-* | alpha*-*-osf*)
    with_stabs=yes;
    withoptions="${withoptions} --with-stabs"
    ;;
  esac
fi

d530 26
@


1.84
log
@* configure.in: Rearrange a little.
@
text
@d122 8
d437 4
a440 13
is_cross_compiler=

if test x"${host}" = x"${target}" ; then
	# when doing a native toolchain, don't build the targets
	# that are in the 'cross only' list
	skipdirs="${skipdirs} ${cross_only}"
	is_cross_compiler=no
else
	# similarly, don't build the targets in the 'native only' 
	# list when building a cross compiler
	skipdirs="${skipdirs} ${native_only}"
	is_cross_compiler=yes
fi	
@


1.83
log
@* configure.in: Remove references to librx.
* Makefile.in: Remove references to librx.
@
text
@a47 2
# Don't use libstdc++-v3's flags to configure/build itself.
libstdcxx_flags='`case $$dir in libstdc++-v3 | libjava) ;; *) test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags --build-includes;; esac` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'
d118 7
a356 2

# per-target:
@


1.82
log
@* configure.in: Eliminate ${gasdir} variable.
@
text
@a68 1
		target-librx \
d640 1
a640 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-librx target-newlib target-libiberty target-libgloss ${libgcj}"
a665 2
    # linux has rx in libc
    skipdirs="$skipdirs target-librx"
a675 2
    # linux has rx in libc
    skipdirs="$skipdirs target-librx"
d732 1
a732 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-librx target-libgloss ${libgcj}"
d741 1
a741 1
    noconfigdirs="$noconfigdirs target-librx ${libstdcxx_version} target-libgloss ${libgcj}"
d762 1
a762 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-librx target-libgloss ${libgcj} target-libf2c"
a801 2
    # linux has rx in libc
    skipdirs="$skipdirs target-librx"
a813 2
    # linux has rx in libc
    skipdirs="$skipdirs target-librx"
a816 2
    # linux has rx in libc
    skipdirs="$skipdirs target-librx"
d843 1
a843 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-librx target-libgloss ${libgcj}"
@


1.81
log
@2002-06-18  Dave Brolley  <brolley@@redhat.com>

	* configure.in: Add support for frv.
	* config.sub: Add support for frv.
@
text
@a404 1
gasdir=gas
d1285 1
a1285 1
  if test x${with_gnu_as} != xno && echo " ${configdirs} " | grep " ${gasdir} " > /dev/null 2>&1 && test -d ${srcdir}/${gasdir} ; then
@


1.80
log
@* configure.in (vax-*-netbsd*): Re-enable gas.
@
text
@d758 6
@


1.79
log
@* Makefile.in: Eliminate version-specific references to tcl8.1, tk8.1.
* configure.in: Eliminate version-specific references to tcl8.1, tk8.1.
@
text
@a635 4
      vax-*-netbsd*)
	# gas is not yet supported on vax-netbsd.
	noconfigdirs="gas $noconfigdirs ${libgcj}"
	;;
@


1.78
log
@* configure.in (vax-*-netbsd*): Don't build gas for this
platform.
@
text
@d45 1
a45 1
host_libs="intl mmalloc libiberty opcodes bfd readline db tcl tk tcl8.1 tk8.1 tclX itcl tix libgui zlib"
@


1.77
log
@2002-05-28  Marek Michalkiewicz  <marekm@@amelek.gda.pl>

	* configure.in (noconfigdirs): Don't compile libiberty, libstdcxx
	and libgcj for AVR.
@
text
@d636 4
@


1.77.2.1
log
@Merge with mainline, kseitz_interps-20020619-merge.
@
text
@d45 1
a45 1
host_libs="intl mmalloc libiberty opcodes bfd readline db tcl tk tclX itcl tix libgui zlib"
d405 1
a757 6
  frv-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
    ;;
d1280 1
a1280 1
  if test x${with_gnu_as} != xno && echo " ${configdirs} " | grep " gas " > /dev/null 2>&1 && test -d ${srcdir}/gas ; then
@


1.77.2.2
log
@Merge w/trunk (kseitz_interps-20020722-merge).
@
text
@d48 2
d54 1
a54 1
host_tools="texinfo byacc flex bison binutils ld gas gcc sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool grep diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils snavigator libtool gettext zip fastjar"
d69 1
d96 1
a96 1
native_only="autoconf automake libtool fileutils find gawk gettext grep gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms snavigator gnuserv target-gperf"
d100 1
a100 1
cross_only="target-libgloss target-newlib target-opcodes"
d121 3
a123 93
# There is no longer anything interesting in the per-host section.

# per-target:

# Define is_cross_compiler to save on calls to 'test'.
is_cross_compiler=
if test x"${host}" = x"${target}" ; then
  is_cross_compiler=no
else
  is_cross_compiler=yes
fi	

# We always want to use the same name for this directory, so that dejagnu
# can reliably find it.
target_subdir=${target_alias}

if test ! -d ${target_subdir} ; then
  if mkdir ${target_subdir} ; then true
  else
    echo "'*** could not make ${PWD=`${PWDCMD-pwd}`}/${target_subdir}" 1>&2
    exit 1
  fi
fi

build_subdir=${build_alias}

if test x"${build_alias}" != x"${host}" ; then
  if test ! -d ${build_subdir} ; then
    if mkdir ${build_subdir} ; then true
    else
      echo "'*** could not make ${PWD=`${PWDCMD-pwd}`}/${build_subdir}" 1>&2
      exit 1
    fi
  fi
fi

# Skipdirs are removed silently.
skipdirs=
# Noconfigdirs are removed loudly.
noconfigdirs=""

use_gnu_ld=
# Make sure we don't let GNU ld be added if we didn't want it.
if test x$with_gnu_ld = xno ; then
  use_gnu_ld=no
  noconfigdirs="$noconfigdirs ld"
fi

use_gnu_as=
# Make sure we don't let GNU as be added if we didn't want it.
if test x$with_gnu_as = xno ; then
  use_gnu_as=no
  noconfigdirs="$noconfigdirs gas"
fi

# some tools are so dependent upon X11 that if we're not building with X, 
# it's not even worth trying to configure, much less build, that tool.

case ${with_x} in
  yes | "") ;; # the default value for this tree is that X11 is available
  no)
    skipdirs="${skipdirs} tk tix itcl libgui"
    # We won't be able to build gdbtk without X.
    enable_gdbtk=no 
    ;;
  *)  echo "*** bad value \"${with_x}\" for -with-x flag; ignored" 1>&2 ;;
esac

# Some tools are only suitable for building in a "native" situation.
# Remove these if host!=target.  Similarly, some are only suitable
# for cross toolchains; remove if host=target.

case $is_cross_compiler in
  no) skipdirs="${skipdirs} ${cross_only}" ;;
  yes) skipdirs="${skipdirs} ${native_only}" ;;
esac

# If both --with-headers and --with-libs are specified, default to
# --without-newlib.
if test x"${with_headers}" != x && test x"${with_libs}" != x ; then
  if test x"${with_newlib}" = x ; then
    with_newlib=no
  fi
fi

# Recognize --with-newlib/--without-newlib.
case ${with_newlib} in
  no) skipdirs="${skipdirs} target-newlib" ;;
  yes) skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'` ;;
esac

# Configure extra directories which are host specific

d125 4
a128 15
  i[3456]86-*-go32*)
    configdirs="$configdirs dosrel" ;;
  i[3456]86-*-mingw32*)
    configdirs="$configdirs dosrel" ;;
  *-cygwin*)
    configdirs="$configdirs libtermcap dosrel" ;;
esac

# Remove more programs from consideration, based on the host or 
# target this usually means that a port of the program doesn't
# exist yet.

case "${host}" in
  hppa*64*-*-*)
    noconfigdirs="$noconfigdirs byacc"
d130 3
a132 2
  i[3456]86-*-vsta)
    noconfigdirs="tcl expect dejagnu make texinfo bison patch flex byacc send-pr gprof uudecode dejagnu diff guile perl itcl tix db snavigator gnuserv gettext"
d134 9
a142 12
  i[3456]86-*-go32* | i[3456]86-*-msdosdjgpp*)
    noconfigdirs="tcl tk expect dejagnu send-pr uudecode guile itcl tix db snavigator gnuserv libffi"
	;;
  i[3456]86-*-mingw32*)
    # noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl itcl tix db snavigator gnuserv"
     noconfigdirs="expect dejagnu autoconf automake send-pr rcs guile perl texinfo libtool"
	;;
  i[3456]86-*-beos*)
     noconfigdirs="$noconfigdirs tk itcl tix libgui gdb"
     ;;
  *-*-cygwin*)
     noconfigdirs="autoconf automake send-pr rcs guile perl"
d144 3
a146 2
  *-*-netbsd*)
    noconfigdirs="rcs"
d148 4
a151 2
  ppc*-*-pe)
     noconfigdirs="patch diff make tk tcl expect dejagnu autoconf automake texinfo bison send-pr gprof rcs guile perl itcl tix db snavigator gnuserv"
d153 2
a154 2
  powerpc-*-beos*)
    noconfigdirs="$noconfigdirs tk itcl tix libgui gdb dejagnu readline"
d156 3
a158 21
esac

# Save it here so that, even in case of --enable-libgcj, if the Java
# front-end isn't enabled, we still get libgcj disabled.
libgcj_saved=$libgcj
case $enable_libgcj in
yes)
  # If we reset it here, it won't get added to noconfigdirs in the
  # target-specific build rules, so it will be forcibly enabled
  # (unless the Java language itself isn't enabled).
  libgcj=
  ;;
no)
  # Make sure we get it printed in the list of not supported target libs.
  noconfigdirs="$noconfigdirs ${libgcj}"
  ;;
esac

case "${target}" in
  *-*-chorusos)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d160 4
a163 2
  *-*-freebsd[12] | *-*-freebsd[12].* | *-*-freebsd*aout*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d165 2
a166 11
  *-*-netbsd*)
    # Skip some stuff on all NetBSD configurations.
    skipdirs="$skipdirs target-newlib target-libiberty target-libgloss"

    # Skip some stuff that's unsupported on some NetBSD configurations.
    case "${target}" in
      i*86-*-netbsdelf*) ;;
      *)
	noconfigdirs="$noconfigdirs ${libgcj}"
	;;
    esac
d168 2
a169 2
  *-*-netware)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-newlib target-libiberty target-libgloss ${libgcj}"
d171 5
a175 8
  *-*-rtems*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
    case ${target} in
	h8300*-*-* | h8500-*-*)
	  noconfigdirs="$noconfigdirs target-libf2c"
          ;;
        *) ;;
    esac
d177 2
a178 2
  *-*-vxworks*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d180 2
a181 5
  alpha*-dec-osf*)
    # ld works, but does not support shared libraries.
    # newlib is not 64 bit ready.  I'm not sure about fileutils.
    # gas doesn't generate exception information.
    noconfigdirs="$noconfigdirs gas ld fileutils target-newlib target-libgloss"
d183 15
a197 2
  alpha*-*-*vms*)
    noconfigdirs="$noconfigdirs gdb ld target-newlib target-libgloss ${libgcj}"
d199 3
a201 3
  alpha*-*-linux*)
    # newlib is not 64 bit ready
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
d203 2
a204 2
  alpha*-*-freebsd*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
d206 3
a208 3
  alpha*-*-*)
    # newlib is not 64 bit ready
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d210 5
a214 17
  sh-*-linux*)
    noconfigdirs="$noconfigdirs ${libgcj} target-newlib target-libgloss"
    ;;    
  sh*-*-pe|mips*-*-pe|*arm-wince-pe)
    noconfigdirs="$noconfigdirs ${libgcj}"
    noconfigdirs="$noconfigdirs target-examples"
    noconfigdirs="$noconfigdirs target-libiberty texinfo send-pr"
    noconfigdirs="$noconfigdirs tcl tix tk itcl libgui sim"
    noconfigdirs="$noconfigdirs expect dejagnu"
    # the C++ libraries don't build on top of CE's C libraries
    noconfigdirs="$noconfigdirs ${libstdcxx_version}"
    skipdirs="$skipdirs target-newlib"
    case "${host}" in
      *-*-cygwin*) ;; # keep gdb and readline
      *) noconfigdirs="$noconfigdirs gdb readline ${libstdcxx_version}"
	 ;;
    esac
d216 8
a223 2
  arc-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d225 2
a226 2
  arm-*-pe*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d228 5
a232 2
  arm-*-oabi*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d234 2
a235 2
  thumb-*-coff)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d237 2
a238 2
  thumb-*-elf)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d240 2
a241 2
  thumb-*-oabi)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d243 2
a244 2
  strongarm-*-elf)
    noconfigdirs="$noconfigdirs ${libgcj}"
d246 2
a247 2
  strongarm-*-coff)
    noconfigdirs="$noconfigdirs ${libgcj}"
d249 2
a250 2
  xscale-*-elf)
    noconfigdirs="$noconfigdirs target-libffi target-qthreads"
d252 2
a253 2
  xscale-*-coff)
    noconfigdirs="$noconfigdirs ${libgcj}"
d255 2
a256 2
  thumb-*-pe)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d258 3
a260 2
  arm-*-riscix*)
    noconfigdirs="$noconfigdirs ld target-libgloss ${libgcj}"
d262 2
a263 2
  avr-*-*)
    noconfigdirs="$noconfigdirs target-libiberty ${libstdcxx_version} ${libgcj}"
d265 4
a268 2
  c4x-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d270 3
a272 2
  c54x*-*-* | tic54x-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj} gcc gdb newlib"
d274 3
a276 2
  cris-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d278 3
a280 2
  d10v-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d282 4
a285 2
  d30v-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d287 3
a289 2
  fr30-*-elf*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d291 2
a292 2
  frv-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d294 2
a295 2
  h8300*-*-*)
    noconfigdirs="$noconfigdirs target-libgloss"
d297 38
a334 2
  h8500-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj} target-libf2c"
d336 23
a358 5
  hppa*64*-*-linux* | parisc*64*-*-linux*)
    # In this case, it's because the hppa64-linux target is for
    # the kernel only at this point and has no libc, and thus no
    # headers, crt*.o, etc., all of which are needed by these.
    noconfigdirs="$noconfigdirs target-zlib"
d360 2
a361 6
  hppa*-*-*elf* | \
  parisc*-*-linux* | hppa*-*-linux* | \
  hppa*-*-lites* | \
  hppa*64*-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    # Do configure ld/binutils/gas for this case.
d363 2
a364 4
  hppa*-*-*)
    # According to Alexandre Oliva <aoliva@@redhat.com>, libjava won't
    # build on HP-UX 10.20.
    noconfigdirs="$noconfigdirs ld shellutils ${libgcj}"
d366 3
a368 3
  ia64*-*-elf*)
    # No gdb support yet.
    noconfigdirs="$noconfigdirs tix readline mmalloc libgui itcl gdb"
d370 2
a371 3
  ia64*-**-hpux*)
    # No gdb or ld support yet.
    noconfigdirs="$noconfigdirs tix readline mmalloc libgui itcl gdb ld"
d373 2
a374 2
  i[3456]86-*-coff | i[3456]86-*-elf)
    noconfigdirs="$noconfigdirs ${libgcj}"
d376 2
a377 2
  i[34567]86-*-freebsd*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
d379 2
a380 3
  s390*-*-linux*)
    # The libffi port is not yet in the GCC tree
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
d382 1
a382 18
  i[3456]86-*-linux*)
    # This section makes it possible to build newlib natively on linux.
    # If we are using a cross compiler then don't configure newlib.
    if test x${is_cross_compiler} != xno ; then
         noconfigdirs="$noconfigdirs target-newlib"
    fi
    noconfigdirs="$noconfigdirs target-libgloss"
    # If we are not using a cross compiler, do configure newlib.
    # Note however, that newlib will only be configured in this situation
    # if the --with-newlib option has been given, because otherwise
    # 'target-newlib' will appear in skipdirs.
    ;;
  *-*-linux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
  i[3456]86-*-mingw32*)
    target_configdirs="$target_configdirs target-mingw"
    noconfigdirs="$noconfigdirs expect target-libgloss ${libgcj}"
d384 6
a389 22
    # Can't build gdb for mingw32 if not native.
    case "${host}" in
      i[3456]86-*-mingw32) ;; # keep gdb tcl tk expect etc.
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix db snavigator gnuserv"
         ;;
    esac
    ;;    
  *-*-cygwin*)
    target_configdirs="$target_configdirs target-libtermcap target-winsup"
    noconfigdirs="$noconfigdirs target-gperf target-libgloss ${libgcj}"
    # always build newlib.
    skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'`

    # Can't build gdb for Cygwin if not native.
    case "${host}" in
      *-*-cygwin*) ;; # keep gdb tcl tk expect etc.
      *) noconfigdirs="$noconfigdirs gdb tcl tk expect itcl tix libgui db snavigator gnuserv"
         ;;
    esac
    ;;    
  i[3456]86-*-pe)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d391 2
a392 4
  i[3456]86-*-sco3.2v5*)
    # The linker does not yet know about weak symbols in COFF,
    # and is not configured to handle mixed ELF and COFF.
    noconfigdirs="$noconfigdirs ld target-libgloss ${libgcj}"
d394 2
a395 2
  i[3456]86-*-sco*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d397 1
a397 2
  i[3456]86-*-solaris2*)
    noconfigdirs="$noconfigdirs target-libgloss"
d399 2
a400 2
  i[3456]86-*-sysv4*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d402 186
d589 1
a589 1
     noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
d591 2
a592 2
  m68hc11-*-*|m6811-*-*|m68hc12-*-*|m6812-*-*)
    noconfigdirs="$noconfigdirs target-libiberty ${libstdcxx_version} ${libgcj}"
d594 2
a595 2
  m68k-*-elf*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d597 2
a598 2
  m68k-*-coff*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d600 2
a601 4
  mcore-*-pe*)
  # The EPOC C++ environment does not support exceptions or rtti,
  # and so building libstdc++-v3 tends not to always work.
    noconfigdirs="$noconfigdirs target-libstdc++-v3"
d603 21
a623 2
  mmix-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d625 2
a626 2
  mn10200-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d628 11
a638 2
  mn10300-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
d640 2
a641 3
  powerpc-*-aix*)
    # copied from rs6000-*-* entry
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d643 8
a650 5
  powerpc*-*-winnt* | powerpc*-*-pe* | ppc*-*-pe)
    target_configdirs="$target_configdirs target-winsup"
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl tix db snavigator gnuserv ${libgcj}"
    # always build newlib.
    skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'`
d652 2
a653 3
    # This is temporary until we can link against shared libraries
  powerpcle-*-solaris*)
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl tix db snavigator gnuserv ${libgcj}"
d655 5
a659 2
  powerpc-*-beos*)
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss ${libgcj}"
d661 2
a662 2
  powerpc-*-eabi)
    noconfigdirs="$noconfigdirs ${libgcj}"
d664 5
a668 2
  rs6000-*-lynxos*)
    noconfigdirs="$noconfigdirs target-newlib gprof ${libgcj}"
d670 2
a671 2
  rs6000-*-aix*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
d673 29
a701 2
  rs6000-*-*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
d703 2
a704 2
  m68k-apollo-*)
    noconfigdirs="$noconfigdirs ld binutils gprof target-libgloss ${libgcj}"
d706 2
a707 3
  mips*-*-irix5*)
    # The GNU linker does not support shared libraries.
    noconfigdirs="$noconfigdirs ld gprof target-libgloss ${libgcj}"
d709 2
a710 7
  mips*-*-irix6*)
    # The GNU assembler does not support IRIX 6.
    # Linking libjava exceeds command-line length limits on at least
    # IRIX 6.2, but not on IRIX 6.5.
    # Also, boehm-gc won't build on IRIX 6.5, according to Jeffrey Oldham
    # <oldham@@codesourcery.com>
    noconfigdirs="$noconfigdirs gas gprof target-libgloss ${libgcj}"
d712 2
a713 2
  mips*-dec-bsd*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d715 2
a716 2
  mips*-*-bsd*)
    noconfigdirs="$noconfigdirs gprof target-libgloss ${libgcj}"
d718 2
a719 5
  mipstx39-*-*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"   # same as generic mips
   ;;
  mips*-*-linux*)
    noconfigdirs="$noconfigdirs target-libffi"
d721 2
a722 2
  mips*-*-*)
    noconfigdirs="$noconfigdirs gprof ${libgcj}"
d724 2
a725 2
  romp-*-*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes target-libgloss ${libgcj}"
d727 1
a727 7
  sh-*-*)
    case "${host}" in
      i[3456]86-*-vsta) ;; # don't add gprof back in
      i[3456]86-*-go32*) ;; # don't add gprof back in
      i[3456]86-*-msdosdjgpp*) ;; # don't add gprof back in
      *) skipdirs=`echo " ${skipdirs} " | sed -e 's/ gprof / /'` ;;
    esac
d730 11
a740 2
  sh64-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d742 1
a742 1
  sparc-*-elf*)
d745 4
a748 1
  sparc64-*-elf*)
d751 1
a751 1
  sparclite-*-*)
d753 3
d757 1
a757 1
  sparc-*-sunos4*)
d760 1
a760 3
           noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss"
    else
           use_gnu_ld=no
d763 18
a780 1
  sparc-*-solaris* | sparc64-*-solaris* | sparcv9-*-solaris*)
d782 4
a785 2
  v810-*-*)
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld ${libstdcxx_version} opcodes target-libgloss ${libgcj}"
d787 3
a789 2
  v850-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d791 3
a793 2
  v850e-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d795 5
a799 2
  v850ea-*-*)
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d801 2
a802 2
  vax-*-vms)
    noconfigdirs="$noconfigdirs bfd binutils gdb ld target-newlib opcodes target-libgloss ${libgcj}"
d804 2
a805 1
  vax-*-*)
d807 62
d870 4
a873 1
  ip2k-*-*)
d876 27
a902 4
  *-*-lynxos*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss ${libgcj}"
    ;; 
  *-*-*)
d904 21
d926 4
a929 137
esac

# If we aren't building newlib, then don't build libgloss, since libgloss
# depends upon some newlib header files.
case "${noconfigdirs}" in
  *target-libgloss*) ;;
  *target-newlib*) noconfigdirs="$noconfigdirs target-libgloss" ;;
esac

# Figure out what language subdirectories are present.
# Look if the user specified --enable-languages="..."; if not, use
# the environment variable $LANGUAGES if defined. $LANGUAGES might
# go away some day.
# NB:  embedded tabs in this IF block -- do not untabify
if test x"${enable_languages+set}" != xset; then
	if test x"${LANGUAGES+set}" = xset; then
		enable_languages="${LANGUAGES}"
		echo configure.in: warning: setting LANGUAGES is deprecated, use --enable-languages instead 1>&2
	else
		enable_languages=all
	fi
else
	if test x"${enable_languages}" = x ||
	   test x"${enable_languages}" = xyes;
	then
		echo configure.in: --enable-languages needs at least one language argument 1>&2
		exit 1
	fi
fi
enable_languages=`echo "${enable_languages}" | sed -e 's/[ 	,][ 	,]*/,/g' -e 's/,$//'`

# First scan to see if an enabled language requires some other language.
# We assume that a given config-lang.in will list all the language
# front ends it requires, even if some are required indirectly.
for lang in ${srcdir}/gcc/*/config-lang.in ..
do
   case $lang in
    ..)
       ;;
    # The odd quoting in the next line works around
    # an apparent bug in bash 1.12 on linux.
    ${srcdir}/gcc/[*]/config-lang.in)
       ;;
    *)
       lang_alias=`sed -n -e 's,^language=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^language=\([^ 	]*\).*$,\1,p' $lang`
       this_lang_requires=`sed -n -e 's,^lang_requires=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^lang_requires=\([^ 	]*\).*$,\1,p' $lang`
       for other in $this_lang_requires
       do
	  case ,${enable_languages}, in
	   *,$other,*)
	      ;;
	   *,all,*)
	      ;;
	   *,$lang_alias,*)
	      echo " \`$other' language required by \`$lang_alias'; enabling" 1>&2
	      enable_languages="$enable_languages,$other"
	      ;;
	  esac
       done
       ;;
   esac
done

subdirs=
for lang in ${srcdir}/gcc/*/config-lang.in ..
do
	case $lang in
	..) ;;
	# The odd quoting in the next line works around
	# an apparent bug in bash 1.12 on linux.
	${srcdir}/gcc/[*]/config-lang.in) ;;
	*)
	  lang_alias=`sed -n -e 's,^language=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^language=\([^ 	]*\).*$,\1,p' $lang`
	  this_lang_libs=`sed -n -e 's,^target_libs=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^target_libs=\([^ 	]*\).*$,\1,p' $lang`
	  this_lang_dirs=`sed -n -e 's,^lang_dirs=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^lang_dirs=\([^ 	]*\).*$,\1,p' $lang`
	  build_by_default=`sed -n -e 's,^build_by_default=['"'"'"'"]\(.*\)["'"'"'"'].*$,\1,p' -e 's,^build_by_default=\([^ 	]*\).*$,\1,p' $lang`
	  if test "x$lang_alias" = x
	  then
		echo "$lang doesn't set \$language." 1>&2
		exit 1
	  fi
	  case ${build_by_default},${enable_languages}, in
	  *,$lang_alias,*) add_this_lang=yes ;;
	  no,*) add_this_lang=no ;;
	  *,all,*) add_this_lang=yes ;;
	  *) add_this_lang=no ;;
	  esac
	  if test x"${add_this_lang}" = xyes; then
	      eval target_libs='"$target_libs "'\"$this_lang_libs\"
	  else
	      eval noconfigdirs='"$noconfigdirs "'\"$this_lang_libs $this_lang_dirs\"
	  fi
	  ;;
	esac
done

# Remove the entries in $skipdirs and $noconfigdirs from $configdirs and
# $target_configdirs.
# If we have the source for $noconfigdirs entries, add them to $notsupp.

notsupp=""
for dir in . $skipdirs $noconfigdirs ; do
  dirname=`echo $dir | sed -e s/target-//g`
  if test $dir != .  && echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    configdirs=`echo " ${configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure \
	|| test -r $srcdir/$dirname/configure.in ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
  if test $dir != . && echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
    target_configdirs=`echo " ${target_configdirs} " | sed -e "s/ ${dir} / /"`
    if test -r $srcdir/$dirname/configure \
	|| test -r $srcdir/$dirname/configure.in ; then
      if echo " ${skipdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	true
      else
	notsupp="$notsupp $dir"
      fi
    fi
  fi
done

# Sometimes the tools are distributed with libiberty but with no other
# libraries.  In that case, we don't want to build target-libiberty.
if test -n "${target_configdirs}" ; then
  others=
  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do
    if test "$i" != "libiberty" ; then
      if test -r $srcdir/$i/configure || test -r $srcdir/$i/configure.in ; then
	others=yes;
	break;
      fi
a930 159
  done
  if test -z "${others}" ; then
    target_configdirs=
  fi
fi

# Deconfigure all subdirectories, in case we are changing the
# configuration from one where a subdirectory is supported to one where it
# is not.
if test -z "${norecursion}" && test -n "${configdirs}" ; then
  for i in `echo ${configdirs} | sed -e s/target-//g` ; do
    rm -f $i/Makefile
  done
fi
if test -z "${norecursion}" && test -n "${target_configdirs}" ; then
  for i in `echo ${target_configdirs} | sed -e s/target-//g` ; do
    rm -f ${target_subdir}/$i/Makefile
  done
fi

# Quietly strip out all directories which aren't configurable in this tree.
# This relies on all configurable subdirectories being autoconfiscated, which
# is now the case.
configdirs_all="$configdirs"
configdirs=
for i in ${configdirs_all} ; do
  if test -f ${srcdir}/$i/configure ; then
    configdirs="${configdirs} $i"
  fi
done
target_configdirs_all="$target_configdirs"
target_configdirs=
for i in ${target_configdirs_all} ; do
  j=`echo $i | sed -e s/target-//g` 
  if test -f ${srcdir}/$j/configure ; then
    target_configdirs="${target_configdirs} $i"
  fi
done

# Produce a warning message for the subdirs we can't configure.
# This isn't especially interesting in the Cygnus tree, but in the individual
# FSF releases, it's important to let people know when their machine isn't
# supported by the one or two programs in a package.

if test -n "${notsupp}" && test -z "${norecursion}" ; then
  # If $appdirs is non-empty, at least one of those directories must still
  # be configured, or we error out.  (E.g., if the gas release supports a
  # specified target in some subdirs but not the gas subdir, we shouldn't
  # pretend that all is well.)
  if test -n "$appdirs" ; then
    for dir in $appdirs ; do
      if test -r $dir/Makefile.in ; then
	if echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
	if echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
	  appdirs=""
	  break
	fi
      fi
    done
    if test -n "$appdirs" ; then
      echo "*** This configuration is not supported by this package." 1>&2
      exit 1
    fi
  fi
  # Okay, some application will build, or we don't care to check.  Still
  # notify of subdirs not getting built.
  echo "*** This configuration is not supported in the following subdirectories:" 1>&2
  echo "    ${notsupp}" 1>&2
  echo "    (Any other directories should still work fine.)" 1>&2
fi

case "$host" in
  *msdosdjgpp*)
    enable_gdbtk=no ;;
esac
# Determine whether gdb needs tk/tcl or not.
case "$enable_gdbtk" in
  no)
    GDB_TK="" ;;
  *)
    GDB_TK="all-tcl all-tk all-itcl all-tix all-libgui" ;;
esac

copy_dirs=

# Handle --with-headers=XXX.  The contents of the named directory are
# copied to $(tooldir)/sys-include.
if test x"${with_headers}" != x ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-headers is only supported when cross compiling
    exit 1
  fi
  case "${exec_prefixoption}" in
  "") x=${prefix} ;;
  *) x=${exec_prefix} ;;
  esac
  copy_dirs="${copy_dirs} ${with_headers} $x/${target_alias}/sys-include"
fi

# Handle --with-libs=XXX.  Multiple directories are permitted.  The
# contents are copied to $(tooldir)/lib.
if test x"${with_libs}" != x ; then
  if test x${is_cross_compiler} = xno ; then
    echo 1>&2 '***' --with-libs is only supported when cross compiling
    exit 1
  fi
  # Copy the libraries in reverse order, so that files in the first named
  # library override files in subsequent libraries.
  case "${exec_prefixoption}" in
  "") x=${prefix} ;;
  *) x=${exec_prefix} ;;
  esac
  for l in ${with_libs}; do
    copy_dirs="$l $x/${target_alias}/lib ${copy_dirs}"
  done
fi

# Handle ${copy_dirs}
set fnord ${copy_dirs}
shift
while test $# != 0 ; do
  if test -f $2/COPIED && test x"`cat $2/COPIED`" = x"$1" ; then
    :
  else
    echo Copying $1 to $2

    # Use the install script to create the directory and all required
    # parent directories.
    if test -d $2 ; then
      :
    else
      echo >config.temp
      ${srcdir}/install-sh -c -m 644 config.temp $2/COPIED
    fi

    # Copy the directory, assuming we have tar.
    # FIXME: Should we use B in the second tar?  Not all systems support it.
    (cd $1; tar -cf - .) | (cd $2; tar -xpf -)

    # It is the responsibility of the user to correctly adjust all
    # symlinks.  If somebody can figure out how to handle them correctly
    # here, feel free to add the code.

    echo $1 > $2/COPIED
  fi
  shift; shift
done

# Work in distributions that contain no compiler tools, like Autoconf.
tentative_cc=""
if test -d ${srcdir}/config ; then
case "${host}" in
  m68k-hp-hpux*)
    # Avoid "too much defining" errors from HPUX compiler.
    tentative_cc="cc -Wp,-H256000"
    host_makefile_frag="config/mh-hp300"
d932 3
a934 3
  m68k-apollo-sysv*)
    tentative_cc="cc -A ansi -A runtype,any -A systype,any -U__STDC__ -DUSG"
    host_makefile_frag="config/mh-apollo68"
d936 3
a938 9
  m68k-apollo-bsd*)
    #None of the Apollo compilers can compile gas or binutils.  The preprocessor
    # chokes on bfd, the compiler won't let you assign integers to enums, and
    # other problems.  Defining CC to gcc is a questionable way to say "don't use
    # the apollo compiler" (the preferred version of GCC could be called cc,
    # or whatever), but I'm not sure leaving CC as cc is any better...
    #CC=cc -A ansi -A runtype,any -A systype,any -U__STDC__ -DNO_STDARG
    tentative_cc=gcc
    host_makefile_frag="config/mh-a68bsd"
d940 2
a941 3
  m88k-dg-dgux*)
    tentative_cc="gcc -Wall -ansi -D__using_DGUX"
    host_makefile_frag="config/mh-dgux"
d943 2
a944 16
  m88k-harris-cxux*)
    # Under CX/UX, we want to tell the compiler to use ANSI mode.
    tentative_cc="cc -Xa"
    host_makefile_frag="config/mh-cxux"
    ;;
  m88k-motorola-sysv*)
    host_makefile_frag="config/mh-delta88"
    ;;
  mips*-dec-ultrix*)
    tentative_cc="cc -Wf,-XNg1000"
    host_makefile_frag="config/mh-decstation"
    ;;
  mips*-nec-sysv4*)
    # The C compiler on NEC MIPS SVR4 needs bigger tables.
    tentative_cc="cc -ZXNd=5000 -ZXNg=1000"
    host_makefile_frag="config/mh-necv4"
d946 3
a948 2
  mips*-sgi-irix6*)
    host_makefile_frag="config/mh-irix6"
d950 7
a956 2
  mips*-sgi-irix5*)
    host_makefile_frag="config/mh-irix5"
d958 2
a959 5
  mips*-sgi-irix4*)
    # Tell compiler to use K&R C.  We can't compile under the SGI Ansi
    # environment.  Also bump switch table size so that cp-parse will
    # compile.  Bump string length limit so linker builds.
    tentative_cc="cc -cckr -Wf,-XNg1500 -Wf,-XNk1000 -Wf,-XNh2000 -Wf,-XNl8192"
d961 2
a962 2
  mips*-sgi-irix3*)
    host_makefile_frag="config/mh-sysv"
d964 6
a969 2
  mips*-*-sysv4*)
    host_makefile_frag="config/mh-sysv4"
d971 2
a972 15
  mips*-*-sysv*)
    # This is for a MIPS running RISC/os 4.52C.

    # This is needed for GDB, but needs to be in the top-level make because
    # if a library is compiled with the bsd headers and gets linked with the
    # sysv system libraries all hell can break loose (e.g. a jmp_buf might be
    # a different size).
    # ptrace(2) apparently has problems in the BSD environment.  No workaround is
    # known except to select the sysv environment.  Could we use /proc instead?
    # These "sysv environments" and "bsd environments" often end up being a pain.
    #
    # This is not part of CFLAGS because perhaps not all C compilers have this
    # option.
    tentative_cc="cc -systype sysv"
    host_makefile_frag="config/mh-riscos"
d974 2
a975 3
  i370-ibm-opened*)
    tentative_cc="c89"
    host_makefile_frag="config/mh-openedition"
d977 8
a984 2
  i[3456]86-*-sysv5*)
    host_makefile_frag="config/mh-sysv5"
d986 2
a987 3
  i[3456]86-*-dgux*)
    tentative_cc="gcc -Wall -ansi -D__using_DGUX"
    host_makefile_frag="config/mh-dgux386"
d989 5
a993 5
  i[3456]86-ncr-sysv4.3*)
    # The MetaWare compiler will generate a copyright message unless you
    # turn it off by adding the -Hnocopyr flag.
    tentative_cc="cc -Hnocopyr"
    host_makefile_frag="config/mh-ncrsvr43"
d995 5
a999 8
  i[3456]86-ncr-sysv4*)
    # for an NCR 3000 (i486/SVR4) system.
    # The NCR 3000 ships with a MetaWare compiler installed as /bin/cc.
    # This compiler not only emits obnoxious copyright messages every time
    # you run it, but it chokes and dies on a whole bunch of GNU source
    # files.  Default to using the AT&T compiler installed in /usr/ccs/ATT/cc.
    tentative_cc="/usr/ccs/ATT/cc"
    host_makefile_frag="config/mh-ncr3000"
d1001 5
a1005 2
  i[3456]86-*-sco3.2v5*)
    host_makefile_frag="config/mh-sysv"
d1007 7
a1013 5
  i[3456]86-*-sco*)
    # The native C compiler botches some simple uses of const.  Unfortunately,
    # it doesn't defined anything like "__sco__" for us to test for in ansidecl.h.
    tentative_cc="cc -Dconst="
    host_makefile_frag="config/mh-sco"
d1015 1
a1015 2
  i[3456]86-*-udk*)
    host_makefile_frag="config/mh-sysv5"
d1017 2
a1018 2
  i[3456]86-*-isc*)
    host_makefile_frag="config/mh-sysv"
d1020 2
a1021 2
  i[3456]86-*-solaris2*)
    host_makefile_frag="config/mh-sysv4"
d1023 2
a1024 2
  i[3456]86-*-aix*)
    host_makefile_frag="config/mh-aix386"
d1026 2
a1027 2
  i[3456]86-*-msdosdjgpp*)
    host_makefile_frag="config/mh-djgpp"
d1029 2
a1030 2
  *-cygwin*)
    host_makefile_frag="config/mh-cygwin"
d1032 2
a1033 2
  *-mingw32*)
    host_makefile_frag="config/mh-mingw32"
d1035 11
a1045 2
  *-interix*)
    host_makefile_frag="config/mh-interix"
d1047 111
a1157 41
  vax-*-ultrix2*)
    # The old BSD pcc isn't up to compiling parts of gdb so use gcc
    tentative_cc=gcc
    ;;
  *-*-solaris2*)
    host_makefile_frag="config/mh-solaris"
    ;;
  m68k-sun-sunos*)
    # Sun's C compiler needs the -J flag to be able to compile cp-parse.c
    # without overflowing the jump tables (-J says to use a 32 bit table)
    tentative_cc="cc -J"
    ;;
  *-hp-hpux[78]*)
    tentative_cc="cc -Wp,-H256000"
    host_makefile_frag="config/mh-hpux8"
    ;;
  *-hp-hpux*)
    tentative_cc="cc -Wp,-H256000"
    host_makefile_frag="config/mh-hpux"
    ;;
  *-*-hiux*)
    tentative_cc="cc -Wp,-H256000"
    host_makefile_frag="config/mh-hpux"
    ;;
  rs6000-*-lynxos*)
    # /bin/cc is less than useful for our purposes.  Always use GCC
    tentative_cc="/usr/cygnus/progressive/bin/gcc"
    host_makefile_frag="config/mh-lynxrs6k"
    ;;
  *-*-lynxos*)
    # /bin/cc is less than useful for our purposes.  Always use GCC
    tentative_cc="/bin/gcc"
    ;;
  *-*-sysv4*)
    host_makefile_frag="config/mh-sysv4"
    ;;
  *-*-sysv*)
    host_makefile_frag="config/mh-sysv"
    ;;
esac
fi
d1159 26
a1184 8
rm -f mh-frag
if test -n "${host_makefile_frag}" ; then
  for f in ${host_makefile_frag}
  do
    cat ${srcdir}/$f >> mh-frag
  done
  host_makefile_frag=mh-frag
fi
d1186 10
a1195 11
# If we aren't going to be using gcc, see if we can extract a definition
# of CC from the fragment.
# Actually, use the 'pre-extracted' version above.
if test -z "${CC}" && test "${build}" = "${host}" ; then
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  found=
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/gcc; then
      found=yes
      break
d1198 2
a1199 3
  IFS="$save_ifs"
  if test -z "${found}" && test -n "${tentative_cc}" ; then
    CC=$tentative_cc
d1203 13
a1215 20
case "${target}" in
  v810*)
    target_makefile_frag="config/mt-v810"
    ;;
  i[3456]86-*-netware*)
    target_makefile_frag="config/mt-netware"
    ;;
  powerpc-*-netware*)
    target_makefile_frag="config/mt-netware"
    ;;
  *-*-linux*)
    target_makefile_frag="config/mt-linux"
    ;;
  *-*-aix4.[3456789]* | *-*-aix[56789].*)
    target_makefile_frag="config/mt-aix43"
    ;;
  mips*-*-pe | sh*-*-pe | *arm-wince-pe)
    target_makefile_frag="config/mt-wince"
    ;;
esac
d1217 18
a1234 8
alphaieee_frag=
case $target in
  alpha*-*-*)
    # This just makes sure to use the -mieee option to build target libs.
    # This should probably be set individually by each library.
    alphaieee_frag="config/mt-alphaieee"
    ;;
esac
d1236 4
a1239 20
# If --enable-target-optspace always use -Os instead of -O2 to build
# the target libraries, similarly if it is not specified, use -Os
# on selected platforms.
ospace_frag=
case "${enable_target_optspace}:${target}" in
  yes:*)
    ospace_frag="config/mt-ospace"
    ;;
  :d30v-*)
    ospace_frag="config/mt-d30v"
    ;;
  :m32r-* | :d10v-* | :fr30-*)
    ospace_frag="config/mt-ospace"
    ;;
  no:* | :*)
    ;;
  *)
    echo "*** bad value \"${enable_target_optspace}\" for --enable-target-optspace flag; ignored" 1>&2
    ;;
esac
d1241 28
a1268 7
rm -f mt-frag
if test -n "${target_makefile_frag}${alphaieee_frag}${ospace_frag}" ; then
  for f in ${target_makefile_frag} ${alphaieee_frag} ${ospace_frag}
  do
    cat ${srcdir}/$f >> mt-frag
  done
  target_makefile_frag=mt-frag
d1284 5
a1288 4
if test x${use_gnu_as} = x &&
   echo " ${configdirs} " | grep " gas " > /dev/null 2>&1 ; then
  with_gnu_as=yes
  withoptions="$withoptions --with-gnu-as"
d1291 5
a1295 4
if test x${use_gnu_ld} = x &&
   echo " ${configdirs} " | grep " ld " > /dev/null 2>&1 ; then
  with_gnu_ld=yes
  withoptions="$withoptions --with-gnu-ld"
d1301 1
a1301 1
if test x${with_newlib} != xno && echo " ${target_configdirs} " | grep " target-newlib " > /dev/null 2>&1 ; then
d1306 7
a1312 9
# We default to --with-shared on platforms where -fpic is meaningless.
# Well, we don't yet, but we will.
if false && test "${host}" = "${target}" && test x${enable_shared} = x ; then
  case "${target}" in
    alpha*-dec-osf*)	enable_shared=yes ;;
    alpha*-*-linux*)	enable_shared=yes ;;
    mips-sgi-irix5*)	enable_shared=yes ;;
    *)			enable_shared=no ;;
  esac
d1315 3
a1317 5
case "${enable_shared}" in
  yes) shared=yes ;;
  no) shared=no ;;
  "") shared=no ;;
  *) shared=yes ;;
d1319 6
a1324 24


# Default to using --with-stabs for certain targets.
if test x${with_stabs} = x ; then
  case "${target}" in
  mips*-*-irix6*o32)
    with_stabs=yes;
    withoptions="${withoptions} --with-stabs"
    ;;
  mips*-*-irix6*)
    ;;
  mips*-*-* | alpha*-*-osf*)
    with_stabs=yes;
    withoptions="${withoptions} --with-stabs"
    ;;
  esac
fi

# hpux11 in 64bit mode has libraries in a weird place.  Arrange to find
# them automatically.
case "${host}" in
  hppa*64*-*-hpux11*)	
    withoptions="$withoptions -x-libraries=/usr/lib/pa20_64 -x-includes=/usr/X11R6/include"
    ;;
d1460 1
a1460 1
    gxx_include_dir='${libsubdir}/include/c++'
d1462 1
a1462 1
    . ${srcdir}/config.if
d1470 4
a1473 1
case " $target_configdirs " in
d1483 1
a1483 1
   if test -d ${srcdir}/gcc; then
d1521 2
d1529 1
a1529 1
if test "${build}" = "${host}" && test -d ${srcdir}/gcc; then
d1534 3
a1536 2
if test "x${use_gnu_ld}" = x &&
   echo " ${configdirs} " | grep " ld " > /dev/null ; then
d1543 1
a1543 1
elif test -d ${srcdir}/gcc; then
d1559 1
a1559 1
elif test -d ${srcdir}/gcc; then
a1570 3
# Don't use libstdc++-v3's flags to configure/build itself.
libstdcxx_flags='`case $$dir in libstdc++-v3 | libjava) ;; *) test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags --build-includes;; esac` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'

d1573 1
a1573 1
elif test -d ${srcdir}/gcc; then
@


1.77.2.3
log
@Merge with kseitz_interps-20020809-merge of CVS head.
@
text
@a417 1
  hppa*-*-openbsd* | \
d457 3
a546 5
  powerpc64*-*-linux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    # not yet ported.
    noconfigdirs="$noconfigdirs target-libffi"
    ;;
d581 1
a581 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
a639 3
    ;;
  *-*-linux*)
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
@


1.77.2.4
log
@Merge with kseitz_interps-20020829-merge tag from trunk.
@
text
@d1557 4
a1560 4
s%^CC_FOR_TARGET[ 	]*=.*$%CC_FOR_TARGET = \$(STAGE_CC_WRAPPER) ${CC_FOR_TARGET}%
s%^GCJ_FOR_TARGET[      ]*=.*$%GCJ_FOR_TARGET = \$(STAGE_CC_WRAPPER) ${GCJ_FOR_TARGET}%
s%^CXX_FOR_TARGET[ 	]*=.*$%CXX_FOR_TARGET = \$(STAGE_CC_WRAPPER) ${qCXX_FOR_TARGET}%
s%^CXX_FOR_TARGET_FOR_RECURSIVE_MAKE[ 	]*=.*$%CXX_FOR_TARGET_FOR_RECURSIVE_MAKE = \$(STAGE_CC_WRAPPER) ${qqCXX_FOR_TARGET}%
@


1.77.2.5
log
@Merge with kseitz_interps-20020930-merge.
@
text
@d83 16
d187 2
a188 6
# Remove these if host!=target.  
native_only="autoconf automake libtool fileutils find gawk gettext grep gzip hello indent m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl time ash bash bzip2 prms snavigator gnuserv target-gperf"

# Similarly, some are only suitable for cross toolchains.
# Remove these if host=target.
cross_only="target-libgloss target-newlib target-opcodes"
d280 1
a280 1
    noconfigdirs="$noconfigdirs target-newlib target-libiberty target-libgloss"
d336 1
a336 1
    noconfigdirs="$noconfigdirs target-newlib"
a345 6
  arm-*-coff | strongarm-*-coff | xscale-*-coff)
    noconfigdirs="$noconfigdirs ${libgcj}"
    ;;
  arm-*-elf* | strongarm-*-elf* | xscale-*-elf*)
    noconfigdirs="$noconfigdirs target-libffi target-qthreads"
    ;;
d361 12
a541 3
  powerpc-*-darwin*)
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes gdb tk itcl tix libgui gprof ${libgcj}"
    ;;
d758 2
a759 1
    if test -r $srcdir/$dirname/configure ; then
d769 2
a770 1
    if test -r $srcdir/$dirname/configure ; then
d786 1
a786 1
      if test -r $srcdir/$i/configure ; then
d879 2
a880 2
# Handle --with-headers=XXX.  If the value is not "yes", the contents of
# the named directory are copied to $(tooldir)/sys-include.
d886 5
a890 7
  if test x"${with_headers}" != xyes ; then
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    copy_dirs="${copy_dirs} ${with_headers} $x/${target_alias}/sys-include"
  fi
d893 2
a894 3
# Handle --with-libs=XXX.  If the value is not "yes", the contents of
# the name directories are copied to $(tooldir)/lib.  Multiple directories
# are permitted.
d900 9
a908 11
  if test x"${with_libs}" != xyes ; then
    # Copy the libraries in reverse order, so that files in the first named
    # library override files in subsequent libraries.
    case "${exec_prefixoption}" in
    "") x=${prefix} ;;
    *) x=${exec_prefix} ;;
    esac
    for l in ${with_libs}; do
      copy_dirs="$l $x/${target_alias}/lib ${copy_dirs}"
    done
  fi
d1130 19
a1284 19
# If we aren't going to be using gcc, see if we can extract a definition
# of CC from the fragment.
# Actually, use the 'pre-extracted' version above.
if test -z "${CC}" && test "${build}" = "${host}" ; then
  IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
  found=
  for dir in $PATH; do
    test -z "$dir" && dir=.
    if test -f $dir/gcc; then
      found=yes
      break
    fi
  done
  IFS="$save_ifs"
  if test -z "${found}" && test -n "${tentative_cc}" ; then
    CC=$tentative_cc
  fi
fi

d1554 11
a1564 11
s:@@target_configdirs@@:${target_configdirs}:
s%@@target_configargs@@%${targargs}%
s%@@FLAGS_FOR_TARGET@@%${FLAGS_FOR_TARGET}%
s%@@CC_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${CC_FOR_TARGET}%
s%@@GCJ_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${GCJ_FOR_TARGET}%
s%@@CXX_FOR_TARGET@@%\$(STAGE_CC_WRAPPER) ${qCXX_FOR_TARGET}%
s%@@CXX_FOR_TARGET_FOR_RECURSIVE_MAKE@@%\$(STAGE_CC_WRAPPER) ${qqCXX_FOR_TARGET}%
s%@@target_subdir@@%${target_subdir}%
s%@@build_subdir@@%${build_subdir}%
s%@@build_configargs@@%${buildargs}%
s%@@gxx_include_dir@@%${gxx_include_dir}%
@


1.77.2.6
log
@merge from mainline
@
text
@d364 1
a364 1
  c4x-*-* | tic4x-*-*)
d424 4
a428 7
    # The GCC port for glibc1 has no MD_FALLBACK_FRAME_STATE_FOR, so let's
    # not build java stuff by default.
    case "${target}" in
      *-*-*libc1*)
	noconfigdirs="$noconfigdirs ${libgcj}";;
    esac

d1328 13
a1340 3
  SET_LIB_PATH="\$(REALLY_SET_LIB_PATH)"
else
  SET_LIB_PATH=
a1341 13
sed -e "s/@@SET_LIB_PATH@@/${SET_LIB_PATH}/" Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile


case "${host}" in
  *-*-hpux*) RPATH_ENVVAR=SHLIB_PATH ;;
  *) RPATH_ENVVAR=LD_LIBRARY_PATH ;;
esac
sed -e "s/@@RPATH_ENVVAR@@/${RPATH_ENVVAR}/" Makefile > Makefile.tem
rm -f Makefile
mv -f Makefile.tem Makefile

@


1.76
log
@Allow for PWDCMD to override hardcoded pwd.
@
text
@d734 3
@


1.75
log
@* configure.in: simplify makefile fragment collection.
@
text
@d449 1
a449 1
    echo "'*** could not make ${PWD=`pwd`}/${target_subdir}" 1>&2
d460 1
a460 1
      echo "'*** could not make ${PWD=`pwd`}/${build_subdir}" 1>&2
@


1.74
log
@* configure.in: remove code to build emacs.
@
text
@d128 1
a128 1
    host_makefile_frag="${host_makefile_frag} config/mh-hp300"
d132 1
a132 1
    host_makefile_frag="${host_makefile_frag} config/mh-apollo68"
d142 1
a142 1
    host_makefile_frag="${host_makefile_frag} config/mh-a68bsd"
d146 1
a146 1
    host_makefile_frag="${host_makefile_frag} config/mh-dgux"
d151 1
a151 1
    host_makefile_frag="${host_makefile_frag} config/mh-cxux"
d154 1
a154 1
    host_makefile_frag="${host_makefile_frag} config/mh-delta88"
d158 1
a158 1
    host_makefile_frag="${host_makefile_frag} config/mh-decstation"
d163 1
a163 1
    host_makefile_frag="${host_makefile_frag} config/mh-necv4"
d166 1
a166 1
    host_makefile_frag="${host_makefile_frag} config/mh-irix6"
d169 1
a169 1
    host_makefile_frag="${host_makefile_frag} config/mh-irix5"
d178 1
a178 1
    host_makefile_frag="${host_makefile_frag} config/mh-sysv"
d181 1
a181 1
    host_makefile_frag="${host_makefile_frag} config/mh-sysv4"
d197 1
a197 1
    host_makefile_frag="${host_makefile_frag} config/mh-riscos"
d201 1
a201 1
    host_makefile_frag="${host_makefile_frag} config/mh-openedition"
d204 1
a204 1
    host_makefile_frag="${host_makefile_frag} config/mh-sysv5"
d208 1
a208 1
    host_makefile_frag="${host_makefile_frag} config/mh-dgux386"
d214 1
a214 1
    host_makefile_frag="${host_makefile_frag} config/mh-ncrsvr43"
d223 1
a223 1
    host_makefile_frag="${host_makefile_frag} config/mh-ncr3000"
d226 1
a226 1
    host_makefile_frag="${host_makefile_frag} config/mh-sysv"
d232 1
a232 1
    host_makefile_frag="${host_makefile_frag} config/mh-sco"
d235 1
a235 1
    host_makefile_frag="${host_makefile_frag} config/mh-sysv5"
d238 1
a238 1
    host_makefile_frag="${host_makefile_frag} config/mh-sysv"
d241 1
a241 1
    host_makefile_frag="${host_makefile_frag} config/mh-sysv4"
d244 1
a244 1
    host_makefile_frag="${host_makefile_frag} config/mh-aix386"
d247 1
a247 1
    host_makefile_frag="${host_makefile_frag} config/mh-djgpp"
d250 1
a250 1
    host_makefile_frag="${host_makefile_frag} config/mh-cygwin"
d253 1
a253 1
    host_makefile_frag="${host_makefile_frag} config/mh-mingw32"
d256 1
a256 1
    host_makefile_frag="${host_makefile_frag} config/mh-interix"
d263 1
a263 1
    host_makefile_frag="${host_makefile_frag} config/mh-solaris"
d272 1
a272 1
    host_makefile_frag="${host_makefile_frag} config/mh-hpux8"
d276 1
a276 1
    host_makefile_frag="${host_makefile_frag} config/mh-hpux"
d280 1
a280 1
    host_makefile_frag="${host_makefile_frag} config/mh-hpux"
d285 1
a285 1
    host_makefile_frag="${host_makefile_frag} config/mh-lynxrs6k"
d292 1
a292 1
    host_makefile_frag="${host_makefile_frag} config/mh-sysv4"
d295 1
a295 1
    host_makefile_frag="${host_makefile_frag} config/mh-sysv"
@


1.73
log
@* configure.in : Remove --srcdir argument from targargs and buildargs
(it's always overridden in the Makefile anyway).  Rearrange a bit.
@
text
@d54 1
a54 1
host_tools="texinfo byacc flex bison binutils ld gas gcc cgen sid sim gdb make patch prms send-pr gprof gdbtest tgas etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool ispell grep diff rcs cvssrc fileutils shellutils time textutils wdiff find emacs emacs19 uudecode hello tar gzip indent recode release sed utils guile perl apache inet gawk findutils snavigator libtool gettext zip fastjar"
d96 1
a96 1
native_only="autoconf automake libtool cvssrc emacs emacs19 fileutils find gawk gettext grep gzip hello indent ispell m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl apache inet time ash bash bzip2 prms snavigator gnuserv target-gperf"
d657 2
a658 2
    # ld works, but does not support shared libraries.  emacs doesn't
    # work.  newlib is not 64 bit ready.  I'm not sure about fileutils.
d660 1
a660 1
    noconfigdirs="$noconfigdirs gas ld emacs fileutils target-newlib target-libgloss"
a774 7
    # HP's C compiler doesn't handle Emacs correctly (but on BSD and Mach
    # cc is gcc, and on any system a user should be able to link cc to
    # whatever they want.  FIXME, emacs emacs19).
    case "${CC}" in
	"" | cc*) noconfigdirs="$noconfigdirs emacs emacs19" ;;
        *) ;;
    esac
d860 1
a860 7
    # The SYSV4 C compiler doesn't handle Emacs correctly
    case "${CC}" in
	"" | cc*) noconfigdirs="$noconfigdirs emacs emacs19" ;;
        *) ;;
    esac
    # but that's okay since emacs doesn't work anyway
    noconfigdirs="$noconfigdirs emacs emacs19 target-libgloss ${libgcj}"
d940 1
a940 2
    # emacs is emacs 18, which does not work on Irix 5 (emacs19 does work)
    noconfigdirs="$noconfigdirs ld gprof emacs target-libgloss ${libgcj}"
a943 1
    # emacs is emacs 18, which does not work on Irix 5 (emacs19 does work)
d948 1
a948 1
    noconfigdirs="$noconfigdirs gas gprof emacs target-libgloss ${libgcj}"
@


1.72
log
@* configure: move some logic to configure.in
* configure.in: move some logic from configure
@
text
@d1404 3
a1406 4
# Record target_configdirs and the configure arguments for target and
# build configuration in Makefile.
target_configdirs=`echo "${target_configdirs}" | sed -e 's/target-//g'`
targargs=`echo "${arguments}" | \
d1409 1
d1417 6
a1422 1
buildargs="--cache-file=../config.cache --build=${build_alias} --host=${build_alias} ${targargs}"
@


1.71
log
@* configure.in (noconfigdirs): Don't disable libgcj on
sparc64-*-solaris* and sparcv9-*-solaris*.
@
text
@d1322 12
@


1.71.4.1
log
@merge from trunk
@
text
@d45 1
a45 1
host_libs="intl mmalloc libiberty opcodes bfd readline db tcl tk tclX itcl tix libgui zlib"
d54 1
a54 1
host_tools="texinfo byacc flex bison binutils ld gas gcc cgen sid sim gdb make patch prms send-pr gprof gdbtest tgas etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool ispell grep diff rcs cvssrc fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl apache inet gawk findutils snavigator libtool gettext zip fastjar"
d96 1
a96 1
native_only="autoconf automake libtool cvssrc fileutils find gawk gettext grep gzip hello indent ispell m4 rcs recode sed shellutils tar textutils uudecode wdiff gprof target-groff guile perl apache inet time ash bash bzip2 prms snavigator gnuserv target-gperf"
d128 1
a128 1
    host_makefile_frag="config/mh-hp300"
d132 1
a132 1
    host_makefile_frag="config/mh-apollo68"
d142 1
a142 1
    host_makefile_frag="config/mh-a68bsd"
d146 1
a146 1
    host_makefile_frag="config/mh-dgux"
d151 1
a151 1
    host_makefile_frag="config/mh-cxux"
d154 1
a154 1
    host_makefile_frag="config/mh-delta88"
d158 1
a158 1
    host_makefile_frag="config/mh-decstation"
d163 1
a163 1
    host_makefile_frag="config/mh-necv4"
d166 1
a166 1
    host_makefile_frag="config/mh-irix6"
d169 1
a169 1
    host_makefile_frag="config/mh-irix5"
d178 1
a178 1
    host_makefile_frag="config/mh-sysv"
d181 1
a181 1
    host_makefile_frag="config/mh-sysv4"
d197 1
a197 1
    host_makefile_frag="config/mh-riscos"
d201 1
a201 1
    host_makefile_frag="config/mh-openedition"
d204 1
a204 1
    host_makefile_frag="config/mh-sysv5"
d208 1
a208 1
    host_makefile_frag="config/mh-dgux386"
d214 1
a214 1
    host_makefile_frag="config/mh-ncrsvr43"
d223 1
a223 1
    host_makefile_frag="config/mh-ncr3000"
d226 1
a226 1
    host_makefile_frag="config/mh-sysv"
d232 1
a232 1
    host_makefile_frag="config/mh-sco"
d235 1
a235 1
    host_makefile_frag="config/mh-sysv5"
d238 1
a238 1
    host_makefile_frag="config/mh-sysv"
d241 1
a241 1
    host_makefile_frag="config/mh-sysv4"
d244 1
a244 1
    host_makefile_frag="config/mh-aix386"
d247 1
a247 1
    host_makefile_frag="config/mh-djgpp"
d250 1
a250 1
    host_makefile_frag="config/mh-cygwin"
d253 1
a253 1
    host_makefile_frag="config/mh-mingw32"
d256 1
a256 1
    host_makefile_frag="config/mh-interix"
d263 1
a263 1
    host_makefile_frag="config/mh-solaris"
d272 1
a272 1
    host_makefile_frag="config/mh-hpux8"
d276 1
a276 1
    host_makefile_frag="config/mh-hpux"
d280 1
a280 1
    host_makefile_frag="config/mh-hpux"
d285 1
a285 1
    host_makefile_frag="config/mh-lynxrs6k"
d292 1
a292 1
    host_makefile_frag="config/mh-sysv4"
d295 1
a295 1
    host_makefile_frag="config/mh-sysv"
d449 1
a449 1
    echo "'*** could not make ${PWD=`${PWDCMD-pwd}`}/${target_subdir}" 1>&2
d460 1
a460 1
      echo "'*** could not make ${PWD=`${PWDCMD-pwd}`}/${build_subdir}" 1>&2
d657 2
a658 2
    # ld works, but does not support shared libraries.
    # newlib is not 64 bit ready.  I'm not sure about fileutils.
d660 1
a660 1
    noconfigdirs="$noconfigdirs gas ld fileutils target-newlib target-libgloss"
a733 3
  avr-*-*)
    noconfigdirs="$noconfigdirs target-libiberty ${libstdcxx_version} ${libgcj}"
    ;;
d775 7
d867 7
a873 1
    noconfigdirs="$noconfigdirs target-libgloss ${libgcj}"
d953 2
a954 1
    noconfigdirs="$noconfigdirs ld gprof target-libgloss ${libgcj}"
d958 1
d963 1
a963 1
    noconfigdirs="$noconfigdirs gas gprof target-libgloss ${libgcj}"
a1321 12
case "$host" in
  *msdosdjgpp*)
    enable_gdbtk=no ;;
esac
# Determine whether gdb needs tk/tcl or not.
case "$enable_gdbtk" in
  no)
    GDB_TK="" ;;
  *)
    GDB_TK="all-tcl all-tk all-itcl all-tix all-libgui" ;;
esac

d1392 4
a1395 3
# Base args.  Strip norecursion, cache-file, srcdir, host, build, target.
# These are the ones we might not want to pass down to subconfigures.
baseargs=`echo "${arguments}" | \
a1397 1
	    -e 's/--sr[a-z-]*=[^ 	]*//' \
d1405 1
a1405 6
buildargs="--cache-file=../config.cache --build=${build_alias} --host=${build_alias} ${baseargs}"

# Record target_configdirs and the configure arguments for target and
# build configuration in Makefile.
target_configdirs=`echo "${target_configdirs}" | sed -e 's/target-//g'`
targargs=${baseargs}
@


1.71.4.2
log
@Merge with trunk.
@
text
@d48 2
d69 1
a120 12
# There is no longer anything interesting in the per-host section.

# per-target:

# Define is_cross_compiler to save on calls to 'test'.
is_cross_compiler=
if test x"${host}" = x"${target}" ; then
  is_cross_compiler=no
else
  is_cross_compiler=yes
fi	

d354 2
d405 1
d428 13
a440 4
case $is_cross_compiler in
  no) skipdirs="${skipdirs} ${cross_only}" ;;
  yes) skipdirs="${skipdirs} ${native_only}" ;;
esac
d500 27
a557 26
# If both --with-headers and --with-libs are specified, default to
# --without-newlib.
if test x"${with_headers}" != x && test x"${with_libs}" != x ; then
  if test x"${with_newlib}" = x ; then
    with_newlib=no
  fi
fi

# Recognize --with-newlib/--without-newlib.
case ${with_newlib} in
  no) skipdirs="${skipdirs} target-newlib" ;;
  yes) skipdirs=`echo " ${skipdirs} " | sed -e 's/ target-newlib / /'` ;;
esac

# Default to using --with-stabs for certain targets.
if test x${with_stabs} = x ; then
  case "${target}" in
  mips*-*-irix6*)
    ;;
  mips*-*-* | alpha*-*-osf*)
    with_stabs=yes;
    withoptions="${withoptions} --with-stabs"
    ;;
  esac
fi

d642 1
a642 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-newlib target-libiberty target-libgloss ${libgcj}"
d668 2
d680 2
d738 1
a738 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d747 1
a747 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
a757 6
  frv-*-*)
    noconfigdirs="$noconfigdirs ${libgcj}"
    if test x${is_cross_compiler} != xno ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
    ;;
d762 1
a762 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj} target-libf2c"
d802 2
d816 2
d821 2
d849 1
a849 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss ${libgcj}"
d1280 1
a1280 1
  if test x${with_gnu_as} != xno && echo " ${configdirs} " | grep " gas " > /dev/null 2>&1 && test -d ${srcdir}/gas ; then
d1457 1
a1457 1
    . ${srcdir}/config.if
d1478 1
a1478 1
   if test -d ${srcdir}/gcc; then
d1524 1
a1524 1
if test "${build}" = "${host}" && test -d ${srcdir}/gcc; then
d1538 1
a1538 1
elif test -d ${srcdir}/gcc; then
d1554 1
a1554 1
elif test -d ${srcdir}/gcc; then
a1565 3
# Don't use libstdc++-v3's flags to configure/build itself.
libstdcxx_flags='`case $$dir in libstdc++-v3 | libjava) ;; *) test ! -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags || $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/testsuite_flags --build-includes;; esac` -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src -L$$r/$(TARGET_SUBDIR)/libstdc++-v3/src/.libs'

d1568 1
a1568 1
elif test -d ${srcdir}/gcc; then
@


1.70
log
@* configure.in: Revert 2002-04-18's patch; fixed in libjava.
@
text
@d1022 1
a1022 1
  sparc-*-solaris*)
@


1.69
log
@	* configure.in (FLAGS_FOR_TARGET): Do not add
	-B$$r/$(TARGET_SUBDIR)/newlib/ when compiling newlib natively
	on i[3456]86-*-linux*.
@
text
@a1373 27
# If we're building libgcj and we're using the Solaris 2.8 linker,
# then we check for a known problem.
if test "x${libgcj}" = x && test "${with_gnu_ld}" != yes \
   && test "${is_cross_compiler}" = no; then

   case "${host}" in
    sparc-*-solaris2.8)
       if test "$libdir" = '${exec_prefix}/lib';then
	  if test "$exec_prefix" = '$(prefix)'; then
	     tlibdir="$prefix/lib"
	  else
	     tlibdir="$exec_prefix/lib"
	  fi
       else
	  tlibdir="$libdir"
       fi
       if test -f $tlibdir/libgcj.la; then
	  echo "*** You've already installed libgcj in $tlibdir." 1>&2
	  echo "    This causes problems when rebuilding libgcj with the Solaris 2.8 linker." 1>&2
	  echo "    Either disable the libgcj build, or remove the" 1>&2
	  echo "    already-installed libgcj files." 1>&2
	  exit 1
       fi
       ;;
   esac
fi

@


1.68
log
@	* configure.in (noconfigdirs): Replace [ ] with test.
@
text
@a1526 1
      FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -B$$r/$(TARGET_SUBDIR)/newlib/'
@


1.67
log
@	* configure.in (noconfigdirs): Do not add target-newlib if
	target == i[3456]86-*-linux*, and host == target.
@
text
@d812 1
a812 1
    if [ x${is_cross_compiler} != xno ] ; then
@


1.66
log
@* config/mh-cxux: remove dead code
* config/mh-dgux386: remove dead code
* config/mh-hp300: remove dead code
* config/mh-hpux: remove dead code
* config/mh-hpux8: remove dead code
* config/mh-irix5: remove dead code
* config/mh-irix6: remove dead code
* config/mh-ncr3000: remove dead code
* config/mh-ncrsvr43: remove dead code
* config/mh-necv4: remove dead code
* config/mh-sco: remove dead code
* config/mh-solaris: remove dead code
* config/mh-sysv: remove dead code
* config/mh-sysv4: remove dead code
* config/mh-sysv5: remove dead code
* config/mh-irix4: remove, contains only dead code
* configure.in: delete reference to absent file
@
text
@d809 14
d1523 1
a1523 1
   i[3456]86-pc-linux*-no)
@


1.65
log
@* configure.in: replace '[' with 'test'
@
text
@a175 1
    host_makefile_frag="${host_makefile_frag} config/mh-irix4"
@


1.64
log
@* configure.in (h8300*-*-rtems*): Disable libf2c and libgcj.
(sparc-*-elf*, sparc64-*-elf*): Disable libgcj.
@
text
@d123 1
a123 1
if [ -d ${srcdir}/config ]; then
d304 1
a304 1
if [ -z "${CC}" ] && [ "${build}" = "${host}" ]; then
d315 1
a315 1
  if [ -z "${found}" ] && [ -n "${tentative_cc}" ] ; then
d322 1
a322 1
if false && [ "${host}" = "${target}" ] && [ x${enable_shared} = x ]; then
d347 1
a347 1
if [ -n "${host_makefile_frag}" ] ; then
d431 1
a431 1
if [ x"${host}" = x"${target}" ] ; then
d447 1
a447 1
if [ ! -d ${target_subdir} ] ; then
d457 2
a458 2
if [ x"${build_alias}" != x"${host}" ] ; then
  if [ ! -d ${build_subdir} ] ; then
d471 2
a472 2
if [ x"${with_headers}" != x ]; then
  if [ x${is_cross_compiler} = xno ]; then
d485 2
a486 2
if [ x"${with_libs}" != x ]; then
  if [ x${is_cross_compiler} = xno ]; then
d503 2
a504 2
if [ x"${with_headers}" != x ] && [ x"${with_libs}" != x ]; then
  if [ x"${with_newlib}" = x ]; then
d510 1
a510 1
if [ x${with_newlib} = xno ]; then
d512 1
a512 1
elif [ x${with_newlib} = xyes ]; then
d517 1
a517 1
if [ x${with_stabs} = x ]; then
d531 2
a532 2
while [ $# != 0 ]; do
  if [ -f $2/COPIED ] && [ x"`cat $2/COPIED`" = x"$1" ]; then
d539 1
a539 1
    if [ -d $2 ]; then
d752 1
a752 1
    if [ x${is_cross_compiler} != xno ] ; then
d797 1
a797 1
    if [ x${is_cross_compiler} != xno ] ; then
d870 1
a870 1
    if [ x${is_cross_compiler} != xno ] ; then
d876 1
a876 1
    if [ x${is_cross_compiler} != xno ] ; then
d890 1
a890 1
    if [ x${is_cross_compiler} != xno ] ; then
d896 1
a896 1
    if [ x${is_cross_compiler} != xno ] ; then
d920 1
a920 1
    if [ x${is_cross_compiler} != xno ] ; then
d984 1
a984 1
    if [ x${is_cross_compiler} != xno ] ; then
d990 1
a990 1
    if [ x${is_cross_compiler} != xno ] ; then
d996 1
a996 1
    if [ x${is_cross_compiler} != xno ] ; then
d1003 1
a1003 1
    if [ x${is_cross_compiler} != xno ] ; then
d1051 1
a1051 1
if [ x$with_gnu_ld = xno ]; then
d1057 1
a1057 1
if [ x$with_gnu_as = xno ]; then
d1156 1
a1156 1
  if [ $dir != . ]  && echo " ${configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
d1158 2
a1159 2
    if [ -r $srcdir/$dirname/configure ] \
	|| [ -r $srcdir/$dirname/configure.in ]; then
d1167 1
a1167 1
  if [ $dir != . ]  && echo " ${target_configdirs} " | grep " ${dir} " >/dev/null 2>&1; then
d1169 2
a1170 2
    if [ -r $srcdir/$dirname/configure ] \
	|| [ -r $srcdir/$dirname/configure.in ]; then
d1182 1
a1182 1
if [ -n "${target_configdirs}" ]; then
d1185 2
a1186 2
    if [ "$i" != "libiberty" ]; then
      if [ -r $srcdir/$i/configure ] || [ -r $srcdir/$i/configure.in ]; then
d1192 1
a1192 1
  if [ -z "${others}" ]; then
d1200 1
a1200 1
if [ -z "${norecursion}" ] && [ -n "${configdirs}" ]; then
d1205 1
a1205 1
if [ -z "${norecursion}" ] && [ -n "${target_configdirs}" ]; then
d1235 1
a1235 1
if [ -n "${notsupp}" ] && [ -z "${norecursion}" ]; then
d1240 1
a1240 1
  if [ -n "$appdirs" ]; then
d1242 1
a1242 1
      if [ -r $dir/Makefile.in ]; then
d1253 1
a1253 1
    if [ -n "$appdirs" ]; then
d1278 2
a1279 2
if [ x${use_gnu_as} = x ] ; then
  if [ x${with_gnu_as} != xno ] && echo " ${configdirs} " | grep " ${gasdir} " > /dev/null 2>&1 && [ -d ${srcdir}/${gasdir} ] ; then
d1285 2
a1286 2
if [ x${use_gnu_ld} = x ] ; then
  if [ x${with_gnu_ld} != xno ] && echo " ${configdirs} " | grep " ld " > /dev/null 2>&1 && [ -d ${srcdir}/ld ] ; then
d1295 1
a1295 1
if [ x${with_newlib} != xno ] && echo " ${target_configdirs} " | grep " target-newlib " > /dev/null 2>&1 && [ -d ${srcdir}/newlib ] ; then
d1301 1
a1301 1
if [ -n "${target_makefile_frag}" ] ; then
d1315 1
d1318 13
a1330 8
if [ $? = 0 ] && [ -s conftest -o -s conftest.exe ]; then
  :
else
  echo 1>&2 "*** The command '${CC} -o conftest ${CFLAGS} ${CPPFLAGS} ${LDFLAGS} conftest.c' failed."
  echo 1>&2 "*** You must set the environment variable CC to a working compiler."
  rm -f conftest*
  exit 1
fi
d1337 1
a1337 1
      if [ "`type $CCBASE | sed 's/^[^/]*//'`" = "/usr/ucb/cc" ] ; then
d1339 3
a1341 3
          [ -d /opt/SUNWspro/bin ] && could_use="/opt/SUNWspro/bin"
          if [ -d /opt/cygnus/bin ] ; then
              if [ "$could_use" = "" ] ; then
d1347 1
a1347 1
        if [ "$could_use" = "" ] ; then
d1390 1
a1390 1
if [ "${shared}" = "yes" ]; then
d1426 1
a1426 1
if [ x${is_cross_compiler} = xyes ]; then
d1431 1
a1431 1
if [ x${enable_multilib} = x ]; then
d1437 1
a1437 1
if [ x${with_newlib} != xno ] && echo " ${target_configdirs} " | grep " newlib " > /dev/null 2>&1 && [ -d ${srcdir}/newlib ] ; then
@


1.63
log
@* configure.in: Eliminate references to gash.
* Makefile.in: Eliminate references to gash.
@
text
@d647 6
d804 6
d987 1
d993 1
@


1.62
log
@* configure.in: Remove useless references to 'pic' makefile fragments.
@
text
@d45 1
a45 1
host_libs="intl mmalloc libiberty opcodes bfd readline gash db tcl tk tcl8.1 tk8.1 tclX itcl tix libgui zlib"
d96 1
a96 1
native_only="autoconf automake libtool cvssrc emacs emacs19 fileutils find gawk gettext grep gzip hello indent ispell m4 rcs recode sed shellutils tar textutils gash uudecode wdiff gprof target-groff guile perl apache inet time ash bash bzip2 prms snavigator gnuserv target-gperf"
d417 1
a417 1
	skipdirs="${skipdirs} tk libgui gash"
@


1.61
log
@* configure.in: (*-*-windows*) Finish removing.
@
text
@a345 43
if [ x${shared} = xyes ]; then
  case "${host}" in
    alpha*-*-linux*)
      host_makefile_frag="${host_makefile_frag} config/mh-elfalphapic"
      ;;
    arm*-*-*)
      host_makefile_frag="${host_makefile_frag} config/mh-armpic"
      ;;
    parisc*-*-* | hppa*-*-*)
      host_makefile_frag="${host_makefile_frag} config/mh-papic"
      ;;
    i[3456]86-*-cygwin*)
      # We don't want -fPIC on Cygwin.
      ;;
    i[3456]86-*-*)
      host_makefile_frag="${host_makefile_frag} config/mh-x86pic"
      ;;
    i370-*-*)
      host_makefile_frag="${host_makefile_frag} config/mh-i370pic"
      ;;
    ia64-*-*)
      host_makefile_frag="${host_makefile_frag} config/mh-ia64pic"
      ;;
    sparc64-*-*)
      host_makefile_frag="${host_makefile_frag} config/mh-sparcpic"
      ;;
    powerpc*-*-aix*)
      # We don't want -fPIC on AIX.
      ;;
    powerpc*-*-*)
      host_makefile_frag="${host_makefile_frag} config/mh-ppcpic"
      ;;
    s390-* | s390x-*)
      host_makefile_frag="${host_makefile_frag} config/mh-s390pic"
      ;;
    *-*-*)
      if test -f ${srcdir}/config/mh-${host_cpu}pic; then
        host_makefile_frag="${host_makefile_frag} config/mh-${host_cpu}pic"
      fi
      ;;
  esac
fi

a1283 28
fi

if [ x${shared} = xyes ]; then
  case "${target}" in
    hppa* | parisc*)
      target_makefile_frag="${target_makefile_frag} config/mt-papic"
      ;;
    i[3456]86-*)
      target_makefile_frag="${target_makefile_frag} config/mt-x86pic"
      ;;
    ia64-*)
      target_makefile_frag="${target_makefile_frag} config/mt-ia64pic"
      ;;
    powerpc*-*-aix*)
      # We don't want -fPIC on AIX.
      ;;
    powerpc*-*)
      target_makefile_frag="${target_makefile_frag} config/mt-ppcpic"
      ;;
    alpha*-*-linux*)
      target_makefile_frag="${target_makefile_frag} config/mt-elfalphapic"
      ;;
    *)
      if test -f ${srcdir}/config/mt-${target_cpu}pic; then
        target_makefile_frag="${target_makefile_frag} config/mt-${target_cpu}pic"
      fi
      ;;
  esac
@


1.60
log
@* configure.in: Eliminate redundant test for libgui.
@
text
@a258 3
  *-windows*)
    host_makefile_frag="${host_makefile_frag} config/mh-windows"
    ;;
@


1.59
log
@sync from gcc
2002-04-18  Tom Tromey  <tromey@@redhat.com>

	* configure.in: Disallow configuring libgcj when it is already
	installed and we're using Solaris 2.8 linker.  Do enable libgcj on
	Solaris 2.8 by default.  For PR libgcj/6158.
@
text
@a46 4
if [ "${enable_gdbgui}" = "yes" ] ; then
	host_libs="${host_libs} libgui"
fi

@


1.58
log
@2002-04-19  Nathanael Nerode  <neroden@@twcny.rr.com>

	* config/mh-a68bsd: clean out dead code
	* config/mh-apollo68: clean out dead code
	* config/mh-cxux: clean out dead code
	* config/mh-decstation: clean out dead code
	* config/mh-dgux: clean out dead code
	* config/mh-dgux386: clean out dead code
	* config/mh-hp300: clean out dead code
	* config/mh-hpux: clean out dead code
	* config/mh-hpux8: clean out dead code
	* config/mh-interix: clean out dead code
	* config/mh-irix4: clean out dead code
	* config/mh-lynxrs6k: clean out dead code
	* config/mh-mingw32: clean out dead code
	* config/mh-ncr3000: clean out dead code
	* config/mh-ncrsvr43: clean out dead code
	* config/mh-necv4: clean out dead code
	* config/mh-openedition: clean out dead code
	* config/mh-riscos: clean out dead code
	* config/mh-sco: clean out dead code
	* config/mh-sysv4: clean out dead code
	* config/mh-lynxos: removed, contained only dead code
	* config/mh-vaxult2: removed, contained only dead code
	* config/mh-sun3: removed, contained only dead code
	* configure.in: remove references to dead files
@
text
@a1045 9
    case "${host}" in
    sparc-*-solaris2.8)
      # According to Gerald Pfeifer <pfeifer@@dbai.tuwien.ac.at>, libjava
      # won't build correctly on Solaris 8 if there's a
      # previously-installed version of GCC in the configured prefix.
      # This problem does not show up on earlier versions of Solaris.
      noconfigdirs="$noconfigdirs ${libgcj}"
      ;;
    esac
d1418 27
@


1.57
log
@* configure.in:  Move default CC setting out of config/mh-* fragments
directly into here.
@
text
@a268 1
    host_makefile_frag="${host_makefile_frag} config/mh-vaxult2"
a276 1
    host_makefile_frag="${host_makefile_frag} config/mh-sun3"
a297 1
    host_makefile_frag="${host_makefile_frag} config/mh-lynxos"
@


1.56
log
@* configure.in: don't even try to configure or make a subdirectory
if there's no configure script for it.
@
text
@d126 1
d130 2
d135 1
d139 7
d149 1
d153 2
d161 1
d165 2
d176 4
d189 13
d205 1
d212 1
d216 3
d222 6
d234 3
d267 2
d275 3
d281 1
d285 1
d289 1
d293 2
d298 2
d313 1
d325 2
a326 5
  if [ -z "${found}" ] && [ -n "${host_makefile_frag}" ] && [ -f "${srcdir}/${host_makefile_frag}" ]; then
    xx=`sed -n -e 's/^[ 	]*CC[ 	]*=[ 	]*\(.*\)$/\1/p' < ${srcdir}/${host_makefile_frag}`
    if [ -n "${xx}" ] ; then
      CC=$xx
    fi
@


1.55
log
@* MAINTAINERS: Remove chill maintainers.
* Makefile.in (CHILLFLAGS): Remove.
(CHILL_LIB): Remove.
(TARGET_CONFIGDIRS): Remove libchill.
(CHILL_FOR_TARGET): Remove.
(BASE_FLAGS_TO_PASS): Don't pass CHILLFLAGS, CHILL_FOR_TARGET, or
CHILL_LIB.
(CONFIGURE_TARGET_MODULES): Remove configure-target-libchill.
(CHECK_TARGET_MODULES): Likewise.
(INSTALL_TARGET_MODULES): Likewise.
(CLEAN_TARGET_MODULES): Likewise.
(configure-target-libchill): Remove.
(all-target-libchill): Remove.
* configure.in (target_libs): Remove target-libchill.
Do not compute CHILL_FOR_TARGET.
* libchill: Remove directory.
@
text
@d1201 19
@


1.54
log
@Sync with gcc
@
text
@a75 1
		target-libchill \
a1527 14
if test "x${CHILL_FOR_TARGET+set}" = xset; then
  :
elif test -d ${topsrcdir}/gcc; then
  CHILL_FOR_TARGET='$$r/gcc/xgcc -B$$r/gcc/ -L$$r/gcc/ch/runtime/'
elif test "$host" = "$target"; then
  CHILL_FOR_TARGET='$(CC)'
else
  CHILL_FOR_TARGET=`echo gcc | sed -e 's/x/x/' ${program_transform_name}`
fi
case $CHILL_FOR_TARGET in
*' $(FLAGS_FOR_TARGET)') ;;
*) CHILL_FOR_TARGET=$CHILL_FOR_TARGET' $(FLAGS_FOR_TARGET)' ;;
esac

a1573 1
s%^CHILL_FOR_TARGET[ 	]*=.*$%CHILL_FOR_TARGET = ${CHILL_FOR_TARGET}%
@


1.53
log
@* configure.in: Add *-*-freebsd* configurations.
@
text
@d17 2
a18 1
#   Copyright (C) 1992-99, 2000, 2001 Free Software Foundation, Inc.
d45 1
a45 1
host_libs="intl mmalloc libiberty opcodes bfd readline gash db tcl tk tcl8.1 tk8.1 tclX itcl tix libgui"
d58 8
a65 1
host_tools="texinfo byacc flex bison binutils ld gas gcc cgen sid sim gdb make patch prms send-pr gprof gdbtest tgas etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool ispell grep diff rcs cvssrc fileutils shellutils time textutils wdiff find emacs emacs19 uudecode hello tar gzip indent recode release sed utils guile perl apache inet gawk findutils snavigator libtool gettext zip"
d73 1
d77 1
a77 5
		target-libffi \
		target-libjava \
		target-zlib \
		target-boehm-gc \
		target-qthreads \
d284 8
d307 1
a307 1
    hppa*-*-*)
d363 8
a370 1
  *-*-linux-gnu*)
d573 3
d580 1
a580 1
    noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl apache inet itcl tix db snavigator gnuserv gettext libffi"
a602 1

d620 3
d632 1
d634 1
a634 1
        noconfigdirs="$noconfigdirs ${libgcj}"
d639 1
a639 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-newlib target-libiberty target-libgloss target-libffi"
d642 1
a642 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d645 1
a645 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libffi"
d654 7
a660 1
    noconfigdirs="$noconfigdirs gdb ld target-newlib target-libgloss target-libffi"
d667 1
a667 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
d669 5
d675 2
a676 2
    noconfigdirs="$noconfigdirs target-libjava target-libffi target-zlib"
    noconfigdirs="$noconfigdirs target-boehm-gc target-qthreads target-examples"
d690 1
a690 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d693 1
a693 1
    noconfigdirs="$noconfigdirs target-libgloss"
d696 1
a696 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d699 1
a699 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d702 1
a702 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d705 1
a705 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d708 1
a708 4
    noconfigdirs="$noconfigdirs target-libffi"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
d711 1
a711 4
    noconfigdirs="$noconfigdirs target-libffi"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
d714 1
a714 4
    noconfigdirs="$noconfigdirs target-libffi"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
d717 1
a717 4
    noconfigdirs="$noconfigdirs target-libffi"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
d720 1
a720 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d723 1
a723 1
    noconfigdirs="$noconfigdirs ld target-libgloss target-libffi"
d726 1
a726 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss target-libffi"
d729 4
a732 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss target-libffi gcc gdb newlib"
d735 1
a735 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss target-libffi"
d738 1
d741 1
d750 7
a756 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss target-libffi"
d759 1
a759 1
  hppa*-*-linux-gnu* | \
d762 1
d786 1
d794 4
a797 3
  i[3456]86-*-go32* | i[3456]-*-msdosdjgpp*)
    # but don't build gdb
    noconfigdirs="$noconfigdirs gdb ${libstdcxx_version} target-libffi"
d824 1
a824 1
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss target-libffi"
d829 1
a829 1
    noconfigdirs="$noconfigdirs ld target-libgloss target-libffi"
d832 1
a832 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-libffi"
d844 1
a844 1
    noconfigdirs="$noconfigdirs emacs emacs19 target-libgloss target-libffi"
d849 2
a850 2
 m68hc11-*-*|m6811-*-*|m68hc12-*-*|m6812-*-*)
    noconfigdirs="$noconfigdirs target-libiberty target-librx target-libg++ target-libstdc++ target-libio target-libf2c target-libchill target-zlib target-libobjc"
d852 2
a853 1
 m68k-*-elf*)
d859 1
d864 8
d873 1
a873 1
    noconfigdirs="$noconfigdirs target-libffi"
d879 1
a879 1
    noconfigdirs="$noconfigdirs target-libffi"
d886 1
d891 1
a891 1
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl tix db snavigator gnuserv target-libffi"
d897 1
a897 1
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl tix db snavigator gnuserv target-libffi"
d900 1
a900 1
    noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss"
d903 1
d910 1
a910 1
    noconfigdirs="$noconfigdirs target-newlib gprof cvssrc target-libffi"
d913 1
a913 1
    noconfigdirs="$noconfigdirs gprof target-libffi"
d917 1
a917 1
    noconfigdirs="$noconfigdirs gprof target-libffi"
d920 1
a920 1
    noconfigdirs="$noconfigdirs ld binutils gprof target-libgloss target-libffi"
d925 1
a925 1
    noconfigdirs="$noconfigdirs ld gprof emacs target-libgloss"
d937 1
a937 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-libffi"
d940 1
a940 1
    noconfigdirs="$noconfigdirs gprof target-libgloss target-libffi"
d943 1
a943 1
    noconfigdirs="$noconfigdirs gprof target-libffi"   # same as generic mips
d950 1
a950 1
    noconfigdirs="$noconfigdirs gprof target-libffi"
d953 1
a953 1
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes target-libgloss target-libffi"
d962 1
a962 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
a975 1
    noconfigdirs="$noconfigdirs target-libffi"
d981 1
a981 1
    noconfigdirs="$noconfigdirs target-libffi"
d984 1
d1003 1
a1003 1
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld ${libstdcxx_version} opcodes target-libgloss target-libffi"
d1006 1
a1006 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d1009 1
a1009 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d1012 1
a1012 1
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
d1015 1
a1015 1
    noconfigdirs="$noconfigdirs bfd binutils gdb ld target-newlib opcodes target-libgloss target-libffi"
d1018 1
a1018 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libffi"
d1021 1
a1021 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss target-libffi"
d1027 1
a1027 1
    noconfigdirs="$noconfigdirs target-libffi"
d1029 3
d1075 32
d1118 1
d1134 1
a1134 1
	      eval noconfigdirs='"$noconfigdirs "'\"$this_lang_libs\"
a1139 1

d1274 1
a1274 1
    hppa*)
d1331 1
a1331 1
      if [ "`type $CCBASE | sed 's/^[^/]*//'`" = "/usr/ucb/cc" ] ; then 
d1413 1
a1413 1
# the gcc, libio, and libstdc++ subdirectories.
d1434 1
a1434 1
    gxx_include_dir='${prefix}/include/g++'-${libstdcxx_interface}
d1444 4
d1491 4
d1543 14
d1583 17
a1599 13
sed -e "s:^TARGET_CONFIGDIRS[ 	]*=.*$:TARGET_CONFIGDIRS = ${target_configdirs}:" \
    -e "s%^TARGET_CONFIGARGS[ 	]*=.*$%TARGET_CONFIGARGS = ${targargs}%" \
    -e "s%^FLAGS_FOR_TARGET[ 	]*=.*$%FLAGS_FOR_TARGET = ${FLAGS_FOR_TARGET}%" \
    -e "s%^CC_FOR_TARGET[ 	]*=.*$%CC_FOR_TARGET = ${CC_FOR_TARGET}%" \
    -e "s%^CHILL_FOR_TARGET[ 	]*=.*$%CHILL_FOR_TARGET = ${CHILL_FOR_TARGET}%" \
    -e "s%^CXX_FOR_TARGET[ 	]*=.*$%CXX_FOR_TARGET = ${qCXX_FOR_TARGET}%" \
    -e "s%^CXX_FOR_TARGET_FOR_RECURSIVE_MAKE[ 	]*=.*$%CXX_FOR_TARGET_FOR_RECURSIVE_MAKE = ${qqCXX_FOR_TARGET}%" \
    -e "s%^TARGET_SUBDIR[ 	]*=.*$%TARGET_SUBDIR = ${target_subdir}%" \
    -e "s%^BUILD_SUBDIR[ 	]*=.*$%BUILD_SUBDIR = ${build_subdir}%" \
    -e "s%^BUILD_CONFIGARGS[ 	]*=.*$%BUILD_CONFIGARGS = ${buildargs}%" \
    -e "s%^gxx_include_dir[ 	]*=.*$%gxx_include_dir=${gxx_include_dir}%" \
       Makefile > Makefile.tem
rm -f Makefile
@


1.52
log
@2002-03-07  H.J. Lu  (hjl@@gnu.org)

	* configure.in: Enable gprof for mips*-*-linux*.
@
text
@d598 3
d630 3
d752 3
@


1.51
log
@* configure.in (libstdcxx_flags): Don't add libstdc++-v3 flags for
libjava.
(CXX_FOR_TARGET): Add -shared-libgcc for libstdc++-v3 and libjava.
@
text
@d886 3
@


1.50
log
@Contribute sh64-elf.
2000-12-01  Alexandre Oliva  <aoliva@@redhat.com>
* configure.in: Added sh64-*-*.
@
text
@d50 3
a52 9
# Set up configure/Makefile variables if libstdc++-v3 is to be built.
if [ "${enable_libstdcxx_v3}" = "yes" ] && test -d $srcdir/libstdc++-v3; then
        libstdcxx_version="target-libstdc++-v3"
	# Don't use libstdc++-v3's flags to configure/build itself.
	libstdcxx_flags='`case $$dir in libstdc++-v3) ;; *) cat $$r/$(TARGET_SUBDIR)/libstdc++-v3/src/libstdc++.INC 2>/dev/null || : ;; esac` -L$$r/$(TARGET_SUBDIR)/libstd++-v3/src -L$$r/$(TARGET_SUBDIR)/libstd++-v3/src/.libs'
else
        libstdcxx_version="target-libio target-libstdc++"
        libstdcxx_flags='-isystem $$s/libstdc++ -isystem $$s/libstdc++/std -isystem $$s/libstdc++/stl -isystem $$s/libio/ -isystem $$s/libio/stdio -L$$r/$(TARGET_SUBDIR)/libstdc++'
fi
d1440 4
a1443 1
  CXX_FOR_TARGET='$$r/gcc/`case $$dir in libstdc++-v3) echo xgcc ;; *) echo g++ ;; esac` -B$$r/gcc/ -nostdinc++ '$libstdcxx_flags
@


1.49
log
@* configure.in (*-*-netbsd*): New.  Skip target-newlib,
target-libiberty, and target-libgloss.  Skip Java-related
libraries if not supported for NetBSD on target CPU.
@
text
@d907 3
@


1.48
log
@Import StrongARM and XScale target_configdirs from FSF GCC version.
@
text
@d604 11
@


1.47
log
@Add ia64-hpux target.  LD and GDB are not currently supported.
@
text
@d661 3
d667 3
d673 3
d679 3
@


1.46
log
@ARM support added to libgloss
@
text
@d721 4
@


1.45
log
@	* configure.in (FLAGS_FOR_TARGET): Remove -nostdinc and -isystem
	options for i[3456]86-pc-linux* native builds.
@
text
@a646 12
  arm-*-coff*)
    noconfigdirs="$noconfigdirs target-libgloss"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
    ;;
  arm-*-elf*)
    noconfigdirs="$noconfigdirs target-libgloss"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
    ;;
d660 1
a660 4
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
d663 1
a663 4
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
d666 1
a666 4
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
d669 1
a669 4
    noconfigdirs="$noconfigdirs target-libgloss target-libffi"
    if [ x${is_cross_compiler} != xno ] ; then
	   target_configdirs="${target_configdirs} target-bsp target-cygmon"
    fi
@


1.44
log
@When build != host, create libiberty for the build machine.

* Makefile.in (TARGET_CONFIGARGS, BUILD_CONFIGARGS): Replace
CONFIG_ARGUMENTS.
(ALL_BUILD_MODULES_LIST, BUILD_CONFIGDIRS, BUILD_SUBDIR):
New variables.
(ALL_BUILD_MODULES, CONFIGURE_BUILD_MODULES): New variables
and rules.
(all.normal): Depend on ALL_BUILD_MODULES.
(CONFIGURE_TARGET_MODULES rule): Use TARGET_CONFIGARGS.
(all-build-libiberty): Depend on configure-build-libiberty.

* configure: Calculate and substitute proper value for
ALL_BUILD_MODULES.
* configure.in: Create the build subdirectory.
Calculate and substitute TARGET_CONFIGARGS (formerly
CONFIG_ARGUMENTS); also BUILD_SUBDIR and BUILD_CONFIGARGS (new).
@
text
@d1374 14
a1387 4
   # If we're building newlib, use its generic headers last, but search
   # for any libc-related directories first (so make it the last -B
   # switch).
   FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -B$$r/$(TARGET_SUBDIR)/newlib/ -isystem $$r/$(TARGET_SUBDIR)/newlib/targ-include -isystem $$s/newlib/libc/include'
@


1.43
log
@* configure.in (--enable-languages): Be more permissive about
syntax.  Check for empty lists better.  Warn about $LANGUAGES.
@
text
@d437 12
d1275 2
a1276 1
# Record target_configdirs and the configure arguments in Makefile.
d1285 5
d1310 3
a1449 1
targargs="--cache-file=../config.cache --host=${target_alias} --build=${build_alias} ${targargs}"
d1451 1
a1451 1
    -e "s%^CONFIG_ARGUMENTS[ 	]*=.*$%CONFIG_ARGUMENTS = ${targargs}%" \
d1458 2
@


1.42
log
@2001-09-19  Ben Elliston  <bje@@redhat.com>

	* configure.in (sparc-sun-solaris2*): Don't use /usr/bin/which on
	Solaris when testing for the /usr/ucb/cc compiler; it has incorrect
	semantics.  Use the shell built-in "type" command instead.
@
text
@d979 1
d982 2
a983 1
		enable_languages="`echo ${LANGUAGES} | tr ' ' ','`"
d988 4
a991 2
	if test x"${enable_languages}" = x; then
		echo configure.in: --enable-languages needs at least one argument 1>&2
d995 2
@


1.41
log
@2001-09-03  Jeff Holcomb  <jeffh@@redhat.com>

        * configure.in: Enable libstdc++-v3 for h8300 targets.
@
text
@d1215 1
a1215 1
      if [ "`/usr/bin/which $CCBASE`" = "/usr/ucb/cc" ] ; then
@


1.40
log
@Support for xcoff64, enable ld for aix
@
text
@d705 3
a707 1
  h8300*-*-* | \
@


1.39
log
@* configure.in (noconfigdirs) [*-cygwin*, *-mingw*, *-beos]: Disable
libgcj.
@
text
@d817 1
a817 6
    # The configure and build of ld are currently disabled because
    # GNU ld is known to be broken for AIX 4.2 and 4.3 (at least)
    # The symptom is that GDBtk 4.18 fails at startup with a segfault
    # if linked by GNU ld, but not if linked by the native ld.
    noconfigdirs="$noconfigdirs gprof cvssrc target-libgloss target-libffi ld"
    use_gnu_ld=no
d842 2
a843 6
    # The configure and build of ld are currently disabled because
    # GNU ld is known to be broken for AIX 4.2 and 4.3 (at least)
    # The symptom is that GDBtk 4.18 fails at startup with a segfault
    # if linked by GNU ld, but not if linked by the native ld.
    noconfigdirs="$noconfigdirs gprof target-libffi ld"
    use_gnu_ld=no
@


1.38
log
@* configure.in (noconfigdirs): Don't reset it from scratch in the
target case; only append to it.
@
text
@d742 1
a742 1
    noconfigdirs="$noconfigdirs expect target-libgloss target-libffi"
d753 1
a753 1
    noconfigdirs="$noconfigdirs target-gperf target-libgloss target-libffi"
d788 1
a788 1
     noconfigdirs="$noconfigdirs gdb target-newlib target-libgloss"
@


1.37
log
@* configure.in (noconfigdirs) [hppa*-*-*, mips*-*-irix6*,
sparc-*-solaris2.8]: Disable ${libgcj}.
@
text
@d908 1
a908 1
    noconfigdirs="target-libffi"
d914 1
a914 1
    noconfigdirs="target-libffi"
d959 1
a959 1
    noconfigdirs="target-libffi"
@


1.36
log
@* configure.in (libgcj_saved): Copy from $libgcj.
(libgcj): Zero out if --enable-libgcj; add to noconfigdirs is
--disable-libgcj.
@
text
@d17 1
a17 1
#   Copyright (C) 1992-99, 2000 Free Software Foundation, Inc.
d723 3
a725 1
    noconfigdirs="$noconfigdirs ld shellutils"
d868 5
a872 1
    noconfigdirs="$noconfigdirs gas gprof emacs target-libgloss"
d922 11
@


1.35
log
@* Makefile.in (CXX_FOR_TARGET_FOR_RECURSIVE_MAKE, RECURSE_FLAGS):
New macros.
(bootstrap, cross): Use RECURSE_FLAGS.
* configure.in: Subst CXX_FOR_TARGET_FOR_RECURSIVE_MAKE.
@
text
@d575 16
@


1.34
log
@* configure.in (CXX_FOR_TARGET): Use xgcc for libstdc++-v3.
@
text
@d1387 9
a1395 1
qCXX_FOR_TARGET=`echo "$CXX_FOR_TARGET" | sed 's,&,\\\&,g'`
d1404 1
@


1.33
log
@Allow configuration of texinfo for Cygwin hosts.
@
text
@d1377 1
a1377 1
  CXX_FOR_TARGET='$$r/gcc/g++ -B$$r/gcc/ -nostdinc++ '$libstdcxx_flags
@


1.32
log
@Add s390 support
@
text
@d561 1
a561 1
     noconfigdirs="autoconf automake send-pr rcs guile perl texinfo apache inet"
@


1.31
log
@2001-01-15  Ben Elliston  <bje@@redhat.com>

	* configure.in (host_tools): Add sid.
	Always configure cgen.
	* Makefile.in (all-sid): New target.
	(check-sid, clean-sid, install-sid): Likewise.
@
text
@d324 3
@


1.30
log
@* configure.in: Disable language-specific target libraries for
languages that aren't enabled.
@
text
@d63 1
a63 1
host_tools="texinfo byacc flex bison binutils ld gas gcc cgen sim gdb make patch prms send-pr gprof gdbtest tgas etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool ispell grep diff rcs cvssrc fileutils shellutils time textutils wdiff find emacs emacs19 uudecode hello tar gzip indent recode release sed utils guile perl apache inet gawk findutils snavigator libtool gettext zip"
a932 5

# Only configure cgen if --enable-cgen-maint.
if [ "x$enable_cgen_maint" != xyes ] ; then
    noconfigdirs="$noconfigdirs cgen"
fi
@


1.29
log
@Add ARM v5t, v5te and XScale support
@
text
@d951 49
@


1.28
log
@Add noconfigure dirs for m68[hc]{11|12} targets.
@
text
@a630 6
  c4x-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss target-libffi"
    ;;
  c54x*-*-* | tic54x-*-*)
    noconfigdirs="$noconfigdirs ${libstdcxx_version} target-libgloss target-libffi gcc gdb newlib"
    ;;
d652 12
d669 6
@


1.27
log
@* configure.in (FLAGS_FOR_TARGET): Use -nostdinc even for Canadian
crosses, but add gcc/include to the header search path for them.
@
text
@d757 4
a760 1
  m68k-*-elf*)
@


1.26
log
@	* Makefile.in (ALL_MODULES): Add all-cgen.
	(CROSS_CHECK_MODULES,INSTALL_MODULES,CLEAN_MODULES): Similarily.
	(all-cgen): New target.
	(all-opcodes,all-sim): Depend on all-cgen.
	* configure.in (host_tools): Add cgen.
	Only configure cgen if --enable-cgen-maint.
@
text
@d1236 2
a1237 4
   # If we're using a pre-built compiler (which is the case for
   # Canadian crosses or when gcc isn't being built), don't discard
   # standard headers.
   if test "${build}" = "${host}" && test -d ${topsrcdir}/gcc; then
d1239 18
@


1.25
log
@* configure.in (libstdcxx_flags): Use
libstdc++-v3/src/libstdc++.INC.
@
text
@d63 1
a63 1
host_tools="texinfo byacc flex bison binutils ld gas gcc sim gdb make patch prms send-pr gprof gdbtest tgas etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool ispell grep diff rcs cvssrc fileutils shellutils time textutils wdiff find emacs emacs19 uudecode hello tar gzip indent recode release sed utils guile perl apache inet gawk findutils snavigator libtool gettext zip"
d918 5
@


1.24
log
@* configure.in (libstdcxx_flags): Use libstdc++-v3/src/INCLUDES.
@
text
@d54 1
a54 1
	libstdcxx_flags='`case $$dir in libstdc++-v3) ;; *) cat $$r/$(TARGET_SUBDIR)/libstdc++-v3/src/INCLUDES 2>/dev/null || : ;; esac` -L$$r/$(TARGET_SUBDIR)/libstd++-v3/src -L$$r/$(TARGET_SUBDIR)/libstd++-v3/src/.libs'
@


1.23
log
@        * configure.in (CC_FOR_TARGET, CHILL_FOR_TARGET,
        CXX_FOR_TARGET): Add -B$$r/gcc/ here.
        (FLAGS_FOR_TARGET): Not here.
        (CHILL_FOR_TARGET, CXX_FOR_TARGET): Don't check the list of languages.
@
text
@d54 1
a54 1
	libstdcxx_flags='`case $$dir in libstdc++-v3) ;; *) test -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/mkcheck && $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/mkcheck 2 $$r/$(TARGET_SUBDIR)/libstdc++-v3 $$s/libstdc++-v3 | sed -e '"'s/-I/-isystem /g'"' ;; esac` -L$$r/$(TARGET_SUBDIR)/libstd++-v3/src -L$$r/$(TARGET_SUBDIR)/libstd++-v3/src/.libs'
@


1.22
log
@* configure.in (FLAGS_FOR_TARGET): invert test for xgcc, should mean
"if we're also building gcc, and it's a gcc that will run on the
build machine, we want to use its includes instead of the system's
default includes".
@
text
@a1222 9
if test -d ${topsrcdir}/gcc; then
  # Directories specified with -B are searched for libraries after those
  # specified with -L, but for headers (in sub-directory `include')
  # before those specified with -I and -isystem.  Fortunately, we don't
  # expect include directories to exist in build_tooldir/{bin,lib} (see
  # below), and we want gcc/include to be searched first.
  FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -B$$r/gcc/'
fi

d1264 1
a1264 1
  CC_FOR_TARGET='$$r/gcc/xgcc'
d1279 2
a1280 4
elif test -d ${topsrcdir}/gcc &&
   echo ",${enable_languages-`echo ${LANGUAGES-CHILL} | tr ' ' ','`}," |
   grep ',CHILL,' > /dev/null ; then
  CHILL_FOR_TARGET='$$r/gcc/xgcc -L$$r/gcc/ch/runtime/'
d1293 2
a1294 4
elif test -d ${topsrcdir}/gcc &&
   echo ",${enable_languages-`echo ${LANGUAGES-c++} | tr ' ' ','`}," |
   grep ',c[+][+],' > /dev/null ; then
  CXX_FOR_TARGET='$$r/gcc/g++ -nostdinc++ '$libstdcxx_flags
@


1.21
log
@* configure.in (libstdcxx_flags): Don't use `"'.
@
text
@d1243 1
a1243 1
   if test "${build}" = "${host}" && test ! -d ${topsrcdir}/gcc; then
@


1.20
log
@* configure.in (CHILL_FOR_TARGET, CXX_FOR_TARGET): Convert blanks to
commas in $LANGUAGES.
@
text
@d54 1
a54 1
	libstdcxx_flags='`test "x$$dir" != xlibstdc++-v3 && test -f $$r/$(TARGET_SUBDIR)/libstdc++-v3/mkcheck && $(SHELL) $$r/$(TARGET_SUBDIR)/libstdc++-v3/mkcheck 2 $$r/$(TARGET_SUBDIR)/libstdc++-v3 $$s/libstdc++-v3 | sed -e "s/-I/-isystem /g"` -L$$r/$(TARGET_SUBDIR)/libstd++-v3/src -L$$r/$(TARGET_SUBDIR)/libstd++-v3/src/.libs'
@


1.19
log
@2000-08-01  Alexandre Oliva  <aoliva@@redhat.com>

	* configure.in (qCXX_FOR_TARGET): Use echo instead of expr.

2000-07-31  Alexandre Oliva  <aoliva@@redhat.com>

	* configure.in (qCXX_FOR_TARGET): Quote `&' characters in
	CXX_FOR_TARGET for sed.

2000-07-30  Alexandre Oliva  <aoliva@@redhat.com>

	* configure.in (CC_FOR_TARGET, CHILL_FOR_TARGET, CXX_FOR_TARGET):
	Do not override if already set in the environment or in configure.
	Don't duplicate $(FLAGS_FOR_TARGET) if it already appears in them.
	(FLAGS_FOR_TARGET): Don't use host directories on Canadian crosses.
@
text
@d1289 2
a1290 2
   echo ",${enable_languages-${LANGUAGES-CHILL}}," |
   grep ,CHILL, > /dev/null ; then
d1305 1
a1305 1
   echo ",${enable_languages-${LANGUAGES-c++}}," |
@


1.18
log
@* Makefile.in (FLAGS_FOR_TARGET): New macro.
(GCC_FOR_TARGET): Use it.
(CC_FOR_TARGET, CXX_FOR_TARGET, CHILL_FOR_TARGET): Now defined...
* configure.in: ... here.
(FLAGS_FOR_TARGET): Define.  Add ld build dir to -L path.
(libstdcxx_flags): Define and append to CXX_FOR_TARGET.
@
text
@d1071 3
d1231 1
d1236 1
a1236 1
   i[3456]86-*-cygwin*)
d1240 7
d1250 1
a1250 1
   FLAGS_FOR_TARGET=$FLAGS_FOR_TARGET' -nostdinc -B$$r/$(TARGET_SUBDIR)/newlib/ -isystem $$r/$(TARGET_SUBDIR)/newlib/targ-include -isystem $$s/newlib/libc/include'
d1253 6
a1258 1
if test -d ${topsrcdir}/gcc; then
d1262 1
d1270 3
a1272 1
if test -d ${topsrcdir}/gcc; then
d1279 6
a1284 1
CC_FOR_TARGET=$CC_FOR_TARGET' $(FLAGS_FOR_TARGET)'
d1286 3
a1288 1
if test -d ${topsrcdir}/gcc &&
d1297 4
a1300 1
CHILL_FOR_TARGET=$CHILL_FOR_TARGET' $(FLAGS_FOR_TARGET)'
d1302 3
a1304 1
if test -d ${topsrcdir}/gcc &&
d1313 5
a1317 1
CXX_FOR_TARGET=$CXX_FOR_TARGET' $(FLAGS_FOR_TARGET)'
d1325 1
a1325 1
    -e "s%^CXX_FOR_TARGET[ 	]*=.*$%CXX_FOR_TARGET = ${CXX_FOR_TARGET}%" \
@


1.17
log
@* configure.in: Use the same cache file for all target libs.
* config-ml.in: But different cache files per multilib variant.
@
text
@d51 1
a51 1
if [ "${enable_libstdcxx_v3}" = "yes" ] ; then
d53 2
d57 1
d1219 65
d1287 4
@


1.16
log
@merge with gcc
@
text
@d1216 1
a1216 1
targargs="--host=${target_alias} --build=${build_alias} ${targargs}"
@


1.15
log
@TI C54x target added.
@
text
@d50 7
d68 9
a76 4
		target-libio \
		target-librx \
		target-libstdc++ \
		target-libg++"
d169 3
d309 3
d545 1
a545 1
    noconfigdirs="tcl tk expect dejagnu make texinfo bison patch flex byacc send-pr uudecode dejagnu diff guile perl apache inet itcl tix db snavigator gnuserv gettext"
d563 3
d571 1
a571 1
    noconfigdirs="$noconfigdirs target-libg++ target-libstdc++ target-librx target-newlib target-libiberty target-libgloss"
d574 1
a574 1
    noconfigdirs="$noconfigdirs target-libgloss"
d577 1
a577 1
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
d586 1
a586 7
    noconfigdirs="$noconfigdirs gdb ld target-newlib target-libgloss"
    ;;
  alpha*-*-linux*)
    # newlib is not 64 bit ready
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    # linux has rx in libc
    skipdirs="$skipdirs target-librx"
d595 1
a595 1
    noconfigdirs="$noconfigdirs target-librx target-libiberty texinfo send-pr"
d599 1
a599 1
    noconfigdirs="$noconfigdirs target-libg++ target-libstdc++ target-libio"
d603 1
a603 1
      *) noconfigdirs="$noconfigdirs gdb readline target-libio target-libstdc++ target-libg++"
d608 1
a608 1
    noconfigdirs="$noconfigdirs target-libgloss"
d626 1
a626 1
    noconfigdirs="$noconfigdirs target-libgloss"
d629 1
a629 1
    noconfigdirs="$noconfigdirs target-libg++ target-libstdc++ target-libio target-librx target-libgloss"
d632 1
a632 1
    noconfigdirs="$noconfigdirs target-libg++ target-libstdc++ target-libio target-librx target-libgloss gcc gdb newlib"
d635 1
a635 1
    noconfigdirs="$noconfigdirs target-libgloss"
d638 1
a638 1
    noconfigdirs="$noconfigdirs target-libgloss"
d641 1
a641 1
    noconfigdirs="$noconfigdirs target-libgloss"
d644 1
a644 1
    noconfigdirs="$noconfigdirs target-libgloss"
d650 1
a650 1
    noconfigdirs="$noconfigdirs target-libgloss"
d656 1
a656 1
    noconfigdirs="$noconfigdirs target-libgloss"
d659 1
a659 1
    noconfigdirs="$noconfigdirs ld target-libgloss"
d662 1
a662 1
    noconfigdirs="$noconfigdirs target-librx target-libg++ target-libstdc++ target-libio"
d673 1
a673 1
    noconfigdirs="$noconfigdirs target-libg++ target-libstdc++ target-libio target-librx target-libgloss"
d679 1
a679 1
    # Do configure ld/binutils/gas for the above cases.
d702 1
a702 1
    noconfigdirs="$noconfigdirs gdb target-libg++ target-libstdc++ target-libio target-librx"
d706 1
a706 1
    noconfigdirs="$noconfigdirs expect target-libgloss"
d717 1
a717 1
    noconfigdirs="$noconfigdirs target-libgloss"
d729 1
a729 1
    noconfigdirs="$noconfigdirs target-libg++ target-libstdc++ target-libio target-librx target-libgloss"
d734 1
a734 1
    noconfigdirs="$noconfigdirs ld target-libgloss"
d737 1
a737 1
    noconfigdirs="$noconfigdirs gprof target-libgloss"
d749 1
a749 1
    noconfigdirs="$noconfigdirs emacs emacs19 target-libgloss"
d765 1
a765 1
    noconfigdirs="$noconfigdirs"
d771 1
a771 1
    noconfigdirs="$noconfigdirs"
d782 1
a782 1
    noconfigdirs="$noconfigdirs gprof cvssrc target-libgloss ld"
d787 1
a787 1
    noconfigdirs="$noconfigdirs gdb tcl tk make expect target-libgloss itcl tix db snavigator gnuserv"
d793 4
a796 1
    noconfigdirs="$noconfigdirs gdb sim make tcl tk expect itcl tix db snavigator gnuserv"
d805 1
a805 2
    # Newlib makes problems for libg++ in crosses.
    noconfigdirs="$noconfigdirs target-newlib gprof cvssrc"
d812 1
a812 1
    noconfigdirs="$noconfigdirs gprof ld"
d816 1
a816 1
    noconfigdirs="$noconfigdirs gprof"
d819 1
a819 1
    noconfigdirs="$noconfigdirs ld binutils gprof target-libgloss"
a830 5
  mips*-*-linux*)
    noconfigdirs="$noconfigdirs gprof"
    # linux has rx in libc
    skipdirs="$skipdirs target-librx"
    ;;
d832 1
a832 1
    noconfigdirs="$noconfigdirs gprof target-libgloss"
d835 1
a835 1
    noconfigdirs="$noconfigdirs gprof target-libgloss"
d838 1
a838 1
    noconfigdirs="$noconfigdirs gprof"   # same as generic mips
d842 1
a842 1
    noconfigdirs="$noconfigdirs gprof"
d845 1
a845 1
    noconfigdirs="$noconfigdirs bfd binutils ld gas opcodes target-libgloss"
d854 1
a854 1
    noconfigdirs="$noconfigdirs target-libgloss"
d865 1
d871 1
d881 1
a881 1
    noconfigdirs="$noconfigdirs bfd binutils gas gcc gdb ld target-libio target-libg++ target-libstdc++ opcodes target-libgloss"
d884 1
a884 1
    noconfigdirs="$noconfigdirs target-libgloss"
d887 1
a887 1
    noconfigdirs="$noconfigdirs target-libgloss"
d890 1
a890 1
    noconfigdirs="$noconfigdirs target-libgloss"
d893 1
a893 1
    noconfigdirs="$noconfigdirs bfd binutils gdb ld target-newlib opcodes target-libgloss"
d896 1
a896 5
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
    ;;
  *-*-linux*)
    # linux has rx in libc
    skipdirs="$skipdirs target-librx"
d899 1
a899 2
    # Newlib makes problems for libg++ in crosses.
    noconfigdirs="$noconfigdirs target-newlib target-libgloss"
d905 1
d1189 1
a1189 1
# the gcc, libio, libstdc++ and libg++ subdirectories.
@


1.14
log
@        * configure.in (hppa*64*-*-*): Do build ld for this configuration.
@
text
@d616 3
@


1.13
log
@* configure.in: Special case powerpc*-*-aix* target_makefile_frag.
@
text
@d659 2
a660 1
  hppa*-*-lites*)
@


1.12
log
@Add toplevel configure support for ia64-elf.
	* configure.in (ia64*-*-elf*): Add gdb and friends to noconfigdirs.
@
text
@d1054 3
@


1.11
log
@        * configure.in: -linux-gnu*, not -linux-gnu.

        * configure (gcc_version): When setting, narrow search to
        lines containing `version_string'.
@
text
@d672 4
@


1.10
log
@Remove extraneous CYGNUYS LOCAL markers.
@
text
@d332 1
a332 1
  *-*-linux-gnu)
@


1.9
log
@2000-02-27  Andreas Jaeger  <aj@@suse.de>

	* configure.in: Add entry for mips*-*-linux*, move catch all
	*-*-*linux* entry below this one.
@
text
@a349 1
  # CYGNUS LOCAL d10v, d30v, fr30
a618 1
# CYGNUS LOCAL clm/arm-elf
a624 2
# END CYGNUS LOCAL
# CYGNUS LOCAL nickc/strongarm
d637 1
a637 2
# END CYGNUS LOCAL
  thumb-*-pe) # CYGNUS LOCAL nickc/thumb
a645 1
# CYGNUS LOCAL d30v
a647 2
# END CYGNUS LOCAL
# CYGNUS LOCAL fr30
a652 1
# END CYGNUS LOCAL
d864 1
a864 1
  v850e-*-*) # CYGNUS LOCAL v850e
d869 1
a869 1
    ;;       # END CYGNUS LOCAL
@


1.8
log
@Add IBM 370 support.
@
text
@a689 4
  *-*-linux*)
    # linux has rx in libc
    skipdirs="$skipdirs target-librx"
    ;;
d815 5
d884 4
@


1.7
log
@Add support for sh-pe and arm-wince-pe targets.
@
text
@d291 3
@


1.6
log
@Merge in changes from egcs for AIX cross-compilation support.
@
text
@d335 3
d574 15
@


1.5
log
@Do not build ld for native AIX platforms.
@
text
@d17 1
a17 1
#   Copyright (C) 1992, 93, 94, 95, 96, 97, 1998, 1999 Free Software Foundation, Inc.
a225 3
  *-*-aix4.[3456789]* | *-*-aix[56789].*)
    host_makefile_frag="${host_makefile_frag} config/mh-aix43"
    ;;
d331 3
@


1.4
log
@1999-08-08  Mumit Khan  <khan@@xraylith.wisc.edu>

	* configure.in (i[3456]-*-mingw32*): Don't put gprof in
	noconfigdirs.
	(*-*-cygwin*): Likewise.
@
text
@d747 5
a751 2
    noconfigdirs="$noconfigdirs gprof cvssrc target-libgloss"
    # This is needed until gcc and ld are fixed to work together.
d775 5
a779 2
    noconfigdirs="$noconfigdirs gprof"
    # This is needed until gcc and ld are fixed to work together.
@


1.3
log
@
        * configure.in: Build ld, binutils & gas for hppa*-*-linux-gnu*.
@
text
@d526 1
a526 1
     noconfigdirs="expect dejagnu cvs autoconf automake send-pr gprof rcs guile perl texinfo apache inet libtool"
d532 1
a532 1
     noconfigdirs="autoconf automake send-pr gprof rcs guile perl texinfo apache inet"
@


1.2
log
@	* configure.in: Build ld on IRIX6.
@
text
@d646 1
d648 1
a648 1
    # Do configure ld/binutils/gas for this case.
@


1.1
log
@Initial revision
@
text
@d787 1
a787 1
    # The GNU assembler and linker do not support IRIX 6.
d789 1
a789 1
    noconfigdirs="$noconfigdirs ld gas gprof emacs target-libgloss"
@


1.1.1.1
log
@19990502 sourceware import
@
text
@@

