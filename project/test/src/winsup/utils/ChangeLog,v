head	1.654;
access;
symbols
	cygwin-1_7_35-release:1.654
	cygwin-1_7_34-release:1.651
	cygwin-1_7_33-release:1.619.2.4
	cygwin-1_7_32-release:1.619.2.3
	cygwin-1_7_31-release:1.619.2.3
	cygwin-1_7_30-release:1.619.2.2
	cygwin-1_7_29-release:1.619.2.1
	cygwin-1_7_29-release-branchpoint:1.619.0.2
	cygwin-1_7_28-release:1.618
	cygwin-1_7_27-release:1.618
	cygwin-1_7_26-release:1.618
	cygwin-1_7_25-release:1.610
	cygwin-1_7_24-release:1.609
	cygwin-1_7_23-release:1.609
	cygwin-1_7_22-release:1.608
	cygwin-1_7_21-release:1.608
	cygwin-1_7_20-release:1.606
	cygwin-1_7_19-release:1.606
	cygwin-64bit-postmerge:1.604
	cygwin-64bit-premerge-branch:1.603.0.2
	cygwin-64bit-premerge:1.603
	cygwin-1_7_18-release:1.603
	cygwin-1_7_17-release:1.590
	cygwin-64bit-branch:1.587.0.2
	cygwin-1_7_16-release:1.587
	cygwin-1_7_15-release:1.584
	cygwin-1_7_14_2-release:1.583
	cygwin-1_7_14-release:1.583
	cygwin-1_7_12-release:1.582
	cygwin-1_7_11-release:1.582
	cygwin-1_7_10-release:1.580
	cygwin-1_7_9-release:1.548
	cygwin-1_7_8-release:1.547
	cygwin-1_7_7-release:1.541
	cygwin-1_7_5-release:1.526
	cygwin-1_7_4-release:1.526
	cygwin-1_7_3-release:1.526
	cygwin-1_7_2-release:1.525
	cygwin-1_7_1-release:1.499
	cv-branch-2:1.478.0.2
	cr-0x5f1:1.356.0.4
	cv-branch:1.356.0.2
	cr-0x3b58:1.344.0.2
	cr-0x9e:1.250.0.2
	cr-0x9d:1.248.0.2
	corinna-01:1.244
	cr-0x9c:1.239.2.1.0.2
	cr-0x9b:1.239.0.2
	cr-0x99:1.225
	Z-emcb-cygwin_daemon:1.222.0.2
	w32api-2_2:1.198
	mingw-runtime-2_4:1.198
	cygnus_cvs_20020108_pre:1.110
	Z-cygwin_daemon_merge-new_HEAD:1.81
	Z-cygwin_daemon_merge_HEAD:1.81
	cygwin_daemon:1.81.0.2;
locks; strict;
comment	@# @;
expand	@o@;


1.654
date	2015.02.28.13.13.19;	author corinna;	state Exp;
branches;
next	1.653;

1.653
date	2015.02.25.20.18.28;	author corinna;	state Exp;
branches;
next	1.652;

1.652
date	2015.02.17.23.36.23;	author kbrown;	state Exp;
branches;
next	1.651;

1.651
date	2015.02.03.15.14.57;	author corinna;	state Exp;
branches;
next	1.650;

1.650
date	2014.12.15.20.29.43;	author corinna;	state Exp;
branches;
next	1.649;

1.649
date	2014.12.05.14.39.04;	author corinna;	state Exp;
branches;
next	1.648;

1.648
date	2014.12.05.13.41.51;	author corinna;	state Exp;
branches;
next	1.647;

1.647
date	2014.11.28.08.44.39;	author corinna;	state Exp;
branches;
next	1.646;

1.646
date	2014.11.27.19.55.36;	author corinna;	state Exp;
branches;
next	1.645;

1.645
date	2014.11.24.11.07.32;	author corinna;	state Exp;
branches;
next	1.644;

1.644
date	2014.11.12.14.22.05;	author corinna;	state Exp;
branches;
next	1.643;

1.643
date	2014.11.12.14.13.55;	author corinna;	state Exp;
branches;
next	1.642;

1.642
date	2014.11.10.16.21.52;	author corinna;	state Exp;
branches;
next	1.641;

1.641
date	2014.11.03.14.54.43;	author corinna;	state Exp;
branches;
next	1.640;

1.640
date	2014.10.29.10.24.49;	author corinna;	state Exp;
branches;
next	1.639;

1.639
date	2014.10.27.10.28.12;	author corinna;	state Exp;
branches;
next	1.638;

1.638
date	2014.10.27.10.25.02;	author corinna;	state Exp;
branches;
next	1.637;

1.637
date	2014.10.21.10.59.39;	author corinna;	state Exp;
branches;
next	1.636;

1.636
date	2014.09.03.12.44.04;	author corinna;	state Exp;
branches;
next	1.635;

1.635
date	2014.09.03.09.32.52;	author corinna;	state Exp;
branches;
next	1.634;

1.634
date	2014.09.03.08.57.20;	author corinna;	state Exp;
branches;
next	1.633;

1.633
date	2014.08.31.19.20.04;	author corinna;	state Exp;
branches;
next	1.632;

1.632
date	2014.08.31.13.46.33;	author corinna;	state Exp;
branches;
next	1.631;

1.631
date	2014.08.15.21.24.35;	author corinna;	state Exp;
branches;
next	1.630;

1.630
date	2014.08.14.19.33.56;	author corinna;	state Exp;
branches;
next	1.629;

1.629
date	2014.08.06.19.24.57;	author corinna;	state Exp;
branches;
next	1.628;

1.628
date	2014.07.29.13.31.33;	author corinna;	state Exp;
branches;
next	1.627;

1.627
date	2014.07.29.13.29.53;	author corinna;	state Exp;
branches;
next	1.626;

1.626
date	2014.06.16.13.27.08;	author corinna;	state Exp;
branches;
next	1.625;

1.625
date	2014.05.13.10.26.25;	author jturney;	state Exp;
branches;
next	1.624;

1.624
date	2014.05.13.10.24.14;	author jturney;	state Exp;
branches;
next	1.623;

1.623
date	2014.04.21.12.02.59;	author jturney;	state Exp;
branches;
next	1.622;

1.622
date	2014.03.11.15.15.33;	author corinna;	state Exp;
branches;
next	1.621;

1.621
date	2014.02.24.10.51.42;	author corinna;	state Exp;
branches;
next	1.620;

1.620
date	2014.02.23.11.34.30;	author jturney;	state Exp;
branches;
next	1.619;

1.619
date	2014.02.09.12.23.13;	author jturney;	state Exp;
branches
	1.619.2.1;
next	1.618;

1.618
date	2013.11.19.22.26.37;	author corinna;	state Exp;
branches;
next	1.617;

1.617
date	2013.11.19.20.43.03;	author corinna;	state Exp;
branches;
next	1.616;

1.616
date	2013.11.19.17.49.35;	author corinna;	state Exp;
branches;
next	1.615;

1.615
date	2013.11.19.17.44.33;	author corinna;	state Exp;
branches;
next	1.614;

1.614
date	2013.11.19.11.14.35;	author corinna;	state Exp;
branches;
next	1.613;

1.613
date	2013.11.19.10.43.10;	author corinna;	state Exp;
branches;
next	1.612;

1.612
date	2013.11.07.00.19.52;	author cgf;	state Exp;
branches;
next	1.611;

1.611
date	2013.09.16.17.01.57;	author cgf;	state Exp;
branches;
next	1.610;

1.610
date	2013.08.23.19.56.25;	author cgf;	state Exp;
branches;
next	1.609;

1.609
date	2013.07.31.09.58.55;	author corinna;	state Exp;
branches;
next	1.608;

1.608
date	2013.07.07.16.57.11;	author cgf;	state Exp;
branches;
next	1.607;

1.607
date	2013.06.26.13.10.35;	author corinna;	state Exp;
branches;
next	1.606;

1.606
date	2013.05.21.09.32.12;	author corinna;	state Exp;
branches;
next	1.605;

1.605
date	2013.05.10.15.58.48;	author tangent;	state Exp;
branches;
next	1.604;

1.604
date	2013.04.23.09.44.36;	author corinna;	state Exp;
branches;
next	1.603;

1.603
date	2013.02.21.02.13.17;	author yselkowitz;	state Exp;
branches;
next	1.602;

1.602
date	2012.12.14.11.11.17;	author corinna;	state Exp;
branches;
next	1.601;

1.601
date	2012.11.28.03.22.36;	author cgf;	state Exp;
branches;
next	1.600;

1.600
date	2012.11.27.21.32.36;	author cgf;	state Exp;
branches;
next	1.599;

1.599
date	2012.11.27.16.14.52;	author cgf;	state Exp;
branches;
next	1.598;

1.598
date	2012.11.26.19.50.45;	author cgf;	state Exp;
branches;
next	1.597;

1.597
date	2012.11.26.13.13.25;	author corinna;	state Exp;
branches;
next	1.596;

1.596
date	2012.11.23.13.22.47;	author cgf;	state Exp;
branches;
next	1.595;

1.595
date	2012.11.09.08.53.01;	author corinna;	state Exp;
branches;
next	1.594;

1.594
date	2012.11.07.16.32.07;	author corinna;	state Exp;
branches;
next	1.593;

1.593
date	2012.11.05.11.15.23;	author corinna;	state Exp;
branches;
next	1.592;

1.592
date	2012.10.24.12.45.08;	author corinna;	state Exp;
branches;
next	1.591;

1.591
date	2012.10.24.10.15.27;	author yselkowitz;	state Exp;
branches;
next	1.590;

1.590
date	2012.10.19.11.58.48;	author corinna;	state Exp;
branches;
next	1.589;

1.589
date	2012.10.09.12.47.39;	author corinna;	state Exp;
branches;
next	1.588;

1.588
date	2012.09.02.10.06.12;	author corinna;	state Exp;
branches;
next	1.587;

1.587
date	2012.07.11.16.41.50;	author corinna;	state Exp;
branches
	1.587.2.1;
next	1.586;

1.586
date	2012.07.06.14.52.33;	author corinna;	state Exp;
branches;
next	1.585;

1.585
date	2012.06.03.16.45.26;	author corinna;	state Exp;
branches;
next	1.584;

1.584
date	2012.05.05.08.55.17;	author corinna;	state Exp;
branches;
next	1.583;

1.583
date	2012.04.05.13.37.32;	author corinna;	state Exp;
branches;
next	1.582;

1.582
date	2012.02.24.21.53.28;	author yselkowitz;	state Exp;
branches;
next	1.581;

1.581
date	2012.02.09.10.11.26;	author corinna;	state Exp;
branches;
next	1.580;

1.580
date	2012.02.04.11.42.03;	author corinna;	state Exp;
branches;
next	1.579;

1.579
date	2012.01.31.18.06.50;	author cgf;	state Exp;
branches;
next	1.578;

1.578
date	2012.01.29.12.06.23;	author corinna;	state Exp;
branches;
next	1.577;

1.577
date	2012.01.29.09.41.06;	author corinna;	state Exp;
branches;
next	1.576;

1.576
date	2012.01.24.06.29.00;	author yselkowitz;	state Exp;
branches;
next	1.575;

1.575
date	2011.12.22.13.48.05;	author corinna;	state Exp;
branches;
next	1.574;

1.574
date	2011.12.22.12.40.25;	author corinna;	state Exp;
branches;
next	1.573;

1.573
date	2011.12.02.16.15.25;	author corinna;	state Exp;
branches;
next	1.572;

1.572
date	2011.12.01.13.06.13;	author corinna;	state Exp;
branches;
next	1.571;

1.571
date	2011.11.28.17.58.48;	author corinna;	state Exp;
branches;
next	1.570;

1.570
date	2011.11.28.17.49.56;	author corinna;	state Exp;
branches;
next	1.569;

1.569
date	2011.11.24.21.54.41;	author cgf;	state Exp;
branches;
next	1.568;

1.568
date	2011.11.14.17.31.19;	author cgf;	state Exp;
branches;
next	1.567;

1.567
date	2011.10.13.17.50.47;	author corinna;	state Exp;
branches;
next	1.566;

1.566
date	2011.10.11.21.53.57;	author yselkowitz;	state Exp;
branches;
next	1.565;

1.565
date	2011.10.10.15.34.52;	author corinna;	state Exp;
branches;
next	1.564;

1.564
date	2011.10.10.15.04.00;	author cgf;	state Exp;
branches;
next	1.563;

1.563
date	2011.10.10.14.57.47;	author corinna;	state Exp;
branches;
next	1.562;

1.562
date	2011.10.10.09.50.43;	author corinna;	state Exp;
branches;
next	1.561;

1.561
date	2011.10.10.09.42.00;	author corinna;	state Exp;
branches;
next	1.560;

1.560
date	2011.09.15.16.49.51;	author jturney;	state Exp;
branches;
next	1.559;

1.559
date	2011.08.21.19.36.52;	author cgf;	state Exp;
branches;
next	1.558;

1.558
date	2011.08.10.19.52.41;	author corinna;	state Exp;
branches;
next	1.557;

1.557
date	2011.07.20.01.18.14;	author yselkowitz;	state Exp;
branches;
next	1.556;

1.556
date	2011.06.14.15.04.04;	author cgf;	state Exp;
branches;
next	1.555;

1.555
date	2011.05.29.15.20.10;	author cgf;	state Exp;
branches;
next	1.554;

1.554
date	2011.05.03.10.34.25;	author corinna;	state Exp;
branches;
next	1.553;

1.553
date	2011.04.18.10.23.21;	author corinna;	state Exp;
branches;
next	1.552;

1.552
date	2011.04.13.11.42.43;	author jturney;	state Exp;
branches;
next	1.551;

1.551
date	2011.04.04.09.09.42;	author corinna;	state Exp;
branches;
next	1.550;

1.550
date	2011.03.30.08.22.59;	author corinna;	state Exp;
branches;
next	1.549;

1.549
date	2011.03.29.11.02.58;	author corinna;	state Exp;
branches;
next	1.548;

1.548
date	2011.03.28.21.21.03;	author corinna;	state Exp;
branches;
next	1.547;

1.547
date	2011.02.15.15.57.35;	author corinna;	state Exp;
branches;
next	1.546;

1.546
date	2011.01.10.12.51.02;	author corinna;	state Exp;
branches;
next	1.545;

1.545
date	2010.12.11.20.47.01;	author corinna;	state Exp;
branches;
next	1.544;

1.544
date	2010.12.06.13.40.24;	author corinna;	state Exp;
branches;
next	1.543;

1.543
date	2010.10.31.01.41.19;	author cgf;	state Exp;
branches;
next	1.542;

1.542
date	2010.09.06.09.48.54;	author corinna;	state Exp;
branches;
next	1.541;

1.541
date	2010.08.28.12.12.53;	author corinna;	state Exp;
branches;
next	1.540;

1.540
date	2010.08.28.11.22.37;	author corinna;	state Exp;
branches;
next	1.539;

1.539
date	2010.08.26.12.06.27;	author corinna;	state Exp;
branches;
next	1.538;

1.538
date	2010.08.23.11.04.04;	author corinna;	state Exp;
branches;
next	1.537;

1.537
date	2010.08.13.19.10.22;	author corinna;	state Exp;
branches;
next	1.536;

1.536
date	2010.08.11.11.01.14;	author corinna;	state Exp;
branches;
next	1.535;

1.535
date	2010.08.11.03.01.55;	author yselkowitz;	state Exp;
branches;
next	1.534;

1.534
date	2010.07.21.10.30.53;	author corinna;	state Exp;
branches;
next	1.533;

1.533
date	2010.07.05.16.24.23;	author cgf;	state Exp;
branches;
next	1.532;

1.532
date	2010.07.05.12.28.48;	author corinna;	state Exp;
branches;
next	1.531;

1.531
date	2010.06.29.15.12.52;	author corinna;	state Exp;
branches;
next	1.530;

1.530
date	2010.04.29.10.53.31;	author corinna;	state Exp;
branches;
next	1.529;

1.529
date	2010.04.29.10.39.35;	author corinna;	state Exp;
branches;
next	1.528;

1.528
date	2010.04.29.08.50.22;	author corinna;	state Exp;
branches;
next	1.527;

1.527
date	2010.04.28.10.00.40;	author corinna;	state Exp;
branches;
next	1.526;

1.526
date	2010.03.27.21.08.02;	author corinna;	state Exp;
branches;
next	1.525;

1.525
date	2010.03.24.19.52.00;	author corinna;	state Exp;
branches;
next	1.524;

1.524
date	2010.03.23.21.26.03;	author corinna;	state Exp;
branches;
next	1.523;

1.523
date	2010.03.23.21.20.31;	author corinna;	state Exp;
branches;
next	1.522;

1.522
date	2010.03.23.21.01.01;	author corinna;	state Exp;
branches;
next	1.521;

1.521
date	2010.02.26.10.47.05;	author yselkowitz;	state Exp;
branches;
next	1.520;

1.520
date	2010.02.25.16.42.59;	author corinna;	state Exp;
branches;
next	1.519;

1.519
date	2010.02.23.14.07.08;	author corinna;	state Exp;
branches;
next	1.518;

1.518
date	2010.02.22.20.39.18;	author cgf;	state Exp;
branches;
next	1.517;

1.517
date	2010.02.22.17.40.46;	author corinna;	state Exp;
branches;
next	1.516;

1.516
date	2010.02.22.10.56.00;	author corinna;	state Exp;
branches;
next	1.515;

1.515
date	2010.02.19.17.55.27;	author cgf;	state Exp;
branches;
next	1.514;

1.514
date	2010.02.19.17.27.05;	author corinna;	state Exp;
branches;
next	1.513;

1.513
date	2010.02.17.15.01.56;	author corinna;	state Exp;
branches;
next	1.512;

1.512
date	2010.02.13.11.41.53;	author corinna;	state Exp;
branches;
next	1.511;

1.511
date	2010.02.11.11.39.23;	author corinna;	state Exp;
branches;
next	1.510;

1.510
date	2010.02.10.15.58.59;	author corinna;	state Exp;
branches;
next	1.509;

1.509
date	2010.02.10.12.39.40;	author corinna;	state Exp;
branches;
next	1.508;

1.508
date	2010.02.10.12.36.29;	author corinna;	state Exp;
branches;
next	1.507;

1.507
date	2010.01.25.09.22.12;	author corinna;	state Exp;
branches;
next	1.506;

1.506
date	2010.01.22.22.31.50;	author corinna;	state Exp;
branches;
next	1.505;

1.505
date	2010.01.16.10.25.58;	author corinna;	state Exp;
branches;
next	1.504;

1.504
date	2010.01.11.12.13.54;	author corinna;	state Exp;
branches;
next	1.503;

1.503
date	2010.01.07.17.19.12;	author corinna;	state Exp;
branches;
next	1.502;

1.502
date	2010.01.07.12.08.11;	author corinna;	state Exp;
branches;
next	1.501;

1.501
date	2009.12.18.03.34.59;	author cgf;	state Exp;
branches;
next	1.500;

1.500
date	2009.12.16.14.02.57;	author corinna;	state Exp;
branches;
next	1.499;

1.499
date	2009.11.29.14.28.29;	author corinna;	state Exp;
branches;
next	1.498;

1.498
date	2009.11.27.10.01.50;	author corinna;	state Exp;
branches;
next	1.497;

1.497
date	2009.11.11.10.12.34;	author corinna;	state Exp;
branches;
next	1.496;

1.496
date	2009.11.04.17.09.32;	author corinna;	state Exp;
branches;
next	1.495;

1.495
date	2009.11.04.17.00.45;	author corinna;	state Exp;
branches;
next	1.494;

1.494
date	2009.11.04.15.47.29;	author corinna;	state Exp;
branches;
next	1.493;

1.493
date	2009.11.04.14.14.51;	author corinna;	state Exp;
branches;
next	1.492;

1.492
date	2009.10.31.13.26.37;	author corinna;	state Exp;
branches;
next	1.491;

1.491
date	2009.10.28.11.41.27;	author corinna;	state Exp;
branches;
next	1.490;

1.490
date	2009.10.20.15.26.33;	author corinna;	state Exp;
branches;
next	1.489;

1.489
date	2009.10.15.11.40.02;	author corinna;	state Exp;
branches;
next	1.488;

1.488
date	2009.10.12.16.01.44;	author corinna;	state Exp;
branches;
next	1.487;

1.487
date	2009.08.11.08.59.50;	author corinna;	state Exp;
branches;
next	1.486;

1.486
date	2009.08.10.01.55.14;	author davek;	state Exp;
branches;
next	1.485;

1.485
date	2009.08.09.14.13.53;	author corinna;	state Exp;
branches;
next	1.484;

1.484
date	2009.07.23.09.12.17;	author corinna;	state Exp;
branches;
next	1.483;

1.483
date	2009.07.22.16.24.17;	author corinna;	state Exp;
branches;
next	1.482;

1.482
date	2009.07.22.10.20.25;	author corinna;	state Exp;
branches;
next	1.481;

1.481
date	2009.07.15.15.18.51;	author corinna;	state Exp;
branches;
next	1.480;

1.480
date	2009.07.13.10.40.41;	author corinna;	state Exp;
branches;
next	1.479;

1.479
date	2009.07.05.00.01.26;	author cgf;	state Exp;
branches;
next	1.478;

1.478
date	2009.06.10.10.42.22;	author corinna;	state Exp;
branches;
next	1.477;

1.477
date	2009.05.17.11.16.12;	author corinna;	state Exp;
branches;
next	1.476;

1.476
date	2009.05.16.15.46.42;	author corinna;	state Exp;
branches;
next	1.475;

1.475
date	2009.05.15.11.30.18;	author corinna;	state Exp;
branches;
next	1.474;

1.474
date	2009.05.14.03.25.45;	author cgf;	state Exp;
branches;
next	1.473;

1.473
date	2009.05.11.14.01.17;	author corinna;	state Exp;
branches;
next	1.472;

1.472
date	2009.05.06.12.08.07;	author corinna;	state Exp;
branches;
next	1.471;

1.471
date	2009.05.06.11.54.24;	author corinna;	state Exp;
branches;
next	1.470;

1.470
date	2009.05.04.10.15.48;	author corinna;	state Exp;
branches;
next	1.469;

1.469
date	2009.04.22.19.08.52;	author cgf;	state Exp;
branches;
next	1.468;

1.468
date	2009.04.15.10.00.40;	author corinna;	state Exp;
branches;
next	1.467;

1.467
date	2009.04.13.22.51.02;	author davek;	state Exp;
branches;
next	1.466;

1.466
date	2009.04.07.16.24.50;	author corinna;	state Exp;
branches;
next	1.465;

1.465
date	2009.04.03.11.50.25;	author corinna;	state Exp;
branches;
next	1.464;

1.464
date	2009.03.27.10.16.13;	author corinna;	state Exp;
branches;
next	1.463;

1.463
date	2009.03.24.13.35.08;	author corinna;	state Exp;
branches;
next	1.462;

1.462
date	2009.03.23.20.40.17;	author corinna;	state Exp;
branches;
next	1.461;

1.461
date	2009.03.23.16.37.49;	author corinna;	state Exp;
branches;
next	1.460;

1.460
date	2009.03.22.19.18.26;	author corinna;	state Exp;
branches;
next	1.459;

1.459
date	2009.03.22.10.09.01;	author corinna;	state Exp;
branches;
next	1.458;

1.458
date	2009.03.18.14.47.13;	author cgf;	state Exp;
branches;
next	1.457;

1.457
date	2009.03.18.04.19.05;	author cgf;	state Exp;
branches;
next	1.456;

1.456
date	2009.03.14.18.40.59;	author cgf;	state Exp;
branches;
next	1.455;

1.455
date	2009.03.14.14.58.05;	author corinna;	state Exp;
branches;
next	1.454;

1.454
date	2009.03.14.14.56.20;	author corinna;	state Exp;
branches;
next	1.453;

1.453
date	2009.03.14.06.46.00;	author cgf;	state Exp;
branches;
next	1.452;

1.452
date	2009.03.09.09.20.38;	author corinna;	state Exp;
branches;
next	1.451;

1.451
date	2009.03.08.21.13.26;	author cgf;	state Exp;
branches;
next	1.450;

1.450
date	2009.03.02.10.56.19;	author corinna;	state Exp;
branches;
next	1.449;

1.449
date	2009.03.02.10.47.03;	author corinna;	state Exp;
branches;
next	1.448;

1.448
date	2009.02.24.02.11.14;	author cgf;	state Exp;
branches;
next	1.447;

1.447
date	2009.01.29.19.31.04;	author corinna;	state Exp;
branches;
next	1.446;

1.446
date	2009.01.21.17.14.39;	author corinna;	state Exp;
branches;
next	1.445;

1.445
date	2009.01.17.11.59.16;	author corinna;	state Exp;
branches;
next	1.444;

1.444
date	2009.01.16.12.09.34;	author corinna;	state Exp;
branches;
next	1.443;

1.443
date	2009.01.09.05.11.57;	author cgf;	state Exp;
branches;
next	1.442;

1.442
date	2009.01.06.04.11.23;	author phumblet;	state Exp;
branches;
next	1.441;

1.441
date	2008.12.31.01.44.36;	author phumblet;	state Exp;
branches;
next	1.440;

1.440
date	2008.12.16.10.56.33;	author corinna;	state Exp;
branches;
next	1.439;

1.439
date	2008.12.15.17.33.08;	author corinna;	state Exp;
branches;
next	1.438;

1.438
date	2008.12.13.22.43.54;	author cgf;	state Exp;
branches;
next	1.437;

1.437
date	2008.11.26.10.19.09;	author corinna;	state Exp;
branches;
next	1.436;

1.436
date	2008.10.29.13.13.26;	author cgf;	state Exp;
branches;
next	1.435;

1.435
date	2008.10.13.00.57.47;	author cgf;	state Exp;
branches;
next	1.434;

1.434
date	2008.10.13.00.56.09;	author cgf;	state Exp;
branches;
next	1.433;

1.433
date	2008.10.12.23.54.03;	author cgf;	state Exp;
branches;
next	1.432;

1.432
date	2008.10.12.03.20.37;	author cgf;	state Exp;
branches;
next	1.431;

1.431
date	2008.10.12.03.06.12;	author cgf;	state Exp;
branches;
next	1.430;

1.430
date	2008.09.12.22.43.10;	author cgf;	state Exp;
branches;
next	1.429;

1.429
date	2008.08.27.20.11.11;	author cgf;	state Exp;
branches;
next	1.428;

1.428
date	2008.08.25.09.38.14;	author corinna;	state Exp;
branches;
next	1.427;

1.427
date	2008.08.18.12.56.59;	author corinna;	state Exp;
branches;
next	1.426;

1.426
date	2008.08.18.12.42.44;	author corinna;	state Exp;
branches;
next	1.425;

1.425
date	2008.08.18.08.58.21;	author corinna;	state Exp;
branches;
next	1.424;

1.424
date	2008.08.18.08.52.48;	author corinna;	state Exp;
branches;
next	1.423;

1.423
date	2008.08.18.08.33.48;	author corinna;	state Exp;
branches;
next	1.422;

1.422
date	2008.08.17.17.15.41;	author cgf;	state Exp;
branches;
next	1.421;

1.421
date	2008.08.17.17.00.50;	author cgf;	state Exp;
branches;
next	1.420;

1.420
date	2008.08.17.16.45.43;	author cgf;	state Exp;
branches;
next	1.419;

1.419
date	2008.08.15.13.08.47;	author corinna;	state Exp;
branches;
next	1.418;

1.418
date	2008.08.13.16.35.04;	author corinna;	state Exp;
branches;
next	1.417;

1.417
date	2008.08.04.15.30.06;	author cgf;	state Exp;
branches;
next	1.416;

1.416
date	2008.07.30.06.07.42;	author cgf;	state Exp;
branches;
next	1.415;

1.415
date	2008.07.27.14.53.42;	author cgf;	state Exp;
branches;
next	1.414;

1.414
date	2008.07.25.15.03.25;	author cgf;	state Exp;
branches;
next	1.413;

1.413
date	2008.07.25.07.08.56;	author corinna;	state Exp;
branches;
next	1.412;

1.412
date	2008.07.23.20.12.12;	author corinna;	state Exp;
branches;
next	1.411;

1.411
date	2008.07.23.18.09.50;	author corinna;	state Exp;
branches;
next	1.410;

1.410
date	2008.07.23.11.41.10;	author corinna;	state Exp;
branches;
next	1.409;

1.409
date	2008.07.22.20.47.14;	author corinna;	state Exp;
branches;
next	1.408;

1.408
date	2008.07.22.20.12.02;	author corinna;	state Exp;
branches;
next	1.407;

1.407
date	2008.07.22.14.40.05;	author corinna;	state Exp;
branches;
next	1.406;

1.406
date	2008.07.17.15.07.48;	author corinna;	state Exp;
branches;
next	1.405;

1.405
date	2008.07.17.10.31.51;	author corinna;	state Exp;
branches;
next	1.404;

1.404
date	2008.07.09.14.32.29;	author corinna;	state Exp;
branches;
next	1.403;

1.403
date	2008.05.22.18.56.26;	author corinna;	state Exp;
branches;
next	1.402;

1.402
date	2008.05.15.11.01.25;	author corinna;	state Exp;
branches;
next	1.401;

1.401
date	2008.04.23.11.37.58;	author corinna;	state Exp;
branches;
next	1.400;

1.400
date	2008.04.22.14.42.05;	author corinna;	state Exp;
branches;
next	1.399;

1.399
date	2008.03.16.17.04.02;	author briand;	state Exp;
branches;
next	1.398;

1.398
date	2008.03.12.12.47.09;	author corinna;	state Exp;
branches;
next	1.397;

1.397
date	2008.03.11.18.43.11;	author briand;	state Exp;
branches;
next	1.396;

1.396
date	2008.03.11.17.20.02;	author briand;	state Exp;
branches;
next	1.395;

1.395
date	2008.03.09.09.41.42;	author briand;	state Exp;
branches;
next	1.394;

1.394
date	2008.03.09.04.10.10;	author briand;	state Exp;
branches;
next	1.393;

1.393
date	2008.03.08.17.52.49;	author briand;	state Exp;
branches;
next	1.392;

1.392
date	2008.02.28.11.11.12;	author corinna;	state Exp;
branches;
next	1.391;

1.391
date	2008.01.13.13.41.45;	author corinna;	state Exp;
branches;
next	1.390;

1.390
date	2007.12.29.19.26.56;	author davek;	state Exp;
branches;
next	1.389;

1.389
date	2007.12.21.03.32.46;	author briand;	state Exp;
branches;
next	1.388;

1.388
date	2007.12.07.09.37.46;	author corinna;	state Exp;
branches;
next	1.387;

1.387
date	2007.12.06.18.26.18;	author corinna;	state Exp;
branches;
next	1.386;

1.386
date	2007.08.31.00.39.41;	author davek;	state Exp;
branches;
next	1.385;

1.385
date	2007.08.03.19.41.48;	author davek;	state Exp;
branches;
next	1.384;

1.384
date	2007.07.24.19.17.05;	author corinna;	state Exp;
branches;
next	1.383;

1.383
date	2007.07.24.19.08.23;	author corinna;	state Exp;
branches;
next	1.382;

1.382
date	2007.07.23.21.03.59;	author cgf;	state Exp;
branches;
next	1.381;

1.381
date	2007.07.10.00.57.30;	author cgf;	state Exp;
branches;
next	1.380;

1.380
date	2007.07.10.00.12.54;	author cgf;	state Exp;
branches;
next	1.379;

1.379
date	2007.06.04.01.57.16;	author cgf;	state Exp;
branches;
next	1.378;

1.378
date	2007.05.29.08.08.06;	author corinna;	state Exp;
branches;
next	1.377;

1.377
date	2007.05.29.07.54.45;	author corinna;	state Exp;
branches;
next	1.376;

1.376
date	2007.05.23.16.45.03;	author corinna;	state Exp;
branches;
next	1.375;

1.375
date	2007.03.31.00.03.24;	author cgf;	state Exp;
branches;
next	1.374;

1.374
date	2007.03.30.13.36.06;	author cgf;	state Exp;
branches;
next	1.373;

1.373
date	2007.02.22.10.53.36;	author corinna;	state Exp;
branches;
next	1.372;

1.372
date	2007.02.20.16.41.54;	author corinna;	state Exp;
branches;
next	1.371;

1.371
date	2007.01.09.12.17.05;	author corinna;	state Exp;
branches;
next	1.370;

1.370
date	2006.12.21.09.59.04;	author corinna;	state Exp;
branches;
next	1.369;

1.369
date	2006.12.11.19.17.17;	author cgf;	state Exp;
branches;
next	1.368;

1.368
date	2006.12.11.18.58.22;	author cgf;	state Exp;
branches;
next	1.367;

1.367
date	2006.12.10.21.50.06;	author cgf;	state Exp;
branches;
next	1.366;

1.366
date	2006.10.21.17.19.29;	author corinna;	state Exp;
branches;
next	1.365;

1.365
date	2006.10.19.09.08.44;	author corinna;	state Exp;
branches;
next	1.364;

1.364
date	2006.10.16.19.34.27;	author corinna;	state Exp;
branches;
next	1.363;

1.363
date	2006.10.16.18.00.06;	author corinna;	state Exp;
branches;
next	1.362;

1.362
date	2006.10.05.17.24.13;	author corinna;	state Exp;
branches;
next	1.361;

1.361
date	2006.09.12.15.14.51;	author cgf;	state Exp;
branches;
next	1.360;

1.360
date	2006.08.03.15.29.30;	author corinna;	state Exp;
branches;
next	1.359;

1.359
date	2006.08.02.09.48.17;	author corinna;	state Exp;
branches;
next	1.358;

1.358
date	2006.07.31.07.31.55;	author corinna;	state Exp;
branches;
next	1.357;

1.357
date	2006.07.27.21.07.33;	author corinna;	state Exp;
branches;
next	1.356;

1.356
date	2006.07.03.16.00.58;	author corinna;	state Exp;
branches
	1.356.4.1;
next	1.355;

1.355
date	2006.05.24.16.59.03;	author cgf;	state Exp;
branches;
next	1.354;

1.354
date	2006.05.24.16.50.50;	author cgf;	state Exp;
branches;
next	1.353;

1.353
date	2006.03.03.09.43.35;	author corinna;	state Exp;
branches;
next	1.352;

1.352
date	2006.02.17.12.17.47;	author corinna;	state Exp;
branches;
next	1.351;

1.351
date	2006.02.17.11.16.23;	author corinna;	state Exp;
branches;
next	1.350;

1.350
date	2006.02.16.11.17.19;	author corinna;	state Exp;
branches;
next	1.349;

1.349
date	2006.02.15.10.57.17;	author corinna;	state Exp;
branches;
next	1.348;

1.348
date	2006.02.08.14.19.40;	author corinna;	state Exp;
branches;
next	1.347;

1.347
date	2006.02.08.14.13.28;	author corinna;	state Exp;
branches;
next	1.346;

1.346
date	2006.01.19.21.16.38;	author cgf;	state Exp;
branches;
next	1.345;

1.345
date	2006.01.19.20.17.11;	author cgf;	state Exp;
branches;
next	1.344;

1.344
date	2006.01.19.18.57.41;	author cgf;	state Exp;
branches;
next	1.343;

1.343
date	2006.01.18.16.11.53;	author cgf;	state Exp;
branches;
next	1.342;

1.342
date	2006.01.18.12.34.59;	author davek;	state Exp;
branches;
next	1.341;

1.341
date	2006.01.17.12.33.46;	author corinna;	state Exp;
branches;
next	1.340;

1.340
date	2006.01.15.09.29.02;	author corinna;	state Exp;
branches;
next	1.339;

1.339
date	2006.01.13.15.36.29;	author corinna;	state Exp;
branches;
next	1.338;

1.338
date	2006.01.13.13.39.05;	author corinna;	state Exp;
branches;
next	1.337;

1.337
date	2006.01.12.17.43.52;	author cgf;	state Exp;
branches;
next	1.336;

1.336
date	2006.01.05.18.31.26;	author cgf;	state Exp;
branches;
next	1.335;

1.335
date	2005.12.29.20.46.34;	author cgf;	state Exp;
branches;
next	1.334;

1.334
date	2005.12.29.19.23.46;	author cgf;	state Exp;
branches;
next	1.333;

1.333
date	2005.12.19.16.58.33;	author corinna;	state Exp;
branches;
next	1.332;

1.332
date	2005.12.15.03.36.14;	author cgf;	state Exp;
branches;
next	1.331;

1.331
date	2005.12.05.16.39.06;	author cgf;	state Exp;
branches;
next	1.330;

1.330
date	2005.11.22.17.19.17;	author cgf;	state Exp;
branches;
next	1.329;

1.329
date	2005.09.21.22.27.38;	author corinna;	state Exp;
branches;
next	1.328;

1.328
date	2005.09.21.22.26.08;	author corinna;	state Exp;
branches;
next	1.327;

1.327
date	2005.09.08.09.24.41;	author corinna;	state Exp;
branches;
next	1.326;

1.326
date	2005.08.18.20.25.43;	author corinna;	state Exp;
branches;
next	1.325;

1.325
date	2005.08.17.00.52.43;	author briand;	state Exp;
branches;
next	1.324;

1.324
date	2005.08.03.09.23.39;	author corinna;	state Exp;
branches;
next	1.323;

1.323
date	2005.07.19.21.00.34;	author cgf;	state Exp;
branches;
next	1.322;

1.322
date	2005.07.05.21.41.37;	author cgf;	state Exp;
branches;
next	1.321;

1.321
date	2005.06.14.12.42.56;	author corinna;	state Exp;
branches;
next	1.320;

1.320
date	2005.05.30.15.49.30;	author corinna;	state Exp;
branches;
next	1.319;

1.319
date	2005.05.27.15.45.53;	author cgf;	state Exp;
branches;
next	1.318;

1.318
date	2005.05.23.09.54.44;	author corinna;	state Exp;
branches;
next	1.317;

1.317
date	2005.05.20.16.50.39;	author cgf;	state Exp;
branches;
next	1.316;

1.316
date	2005.05.20.16.38.41;	author cgf;	state Exp;
branches;
next	1.315;

1.315
date	2005.05.17.01.26.16;	author cgf;	state Exp;
branches;
next	1.314;

1.314
date	2005.05.16.03.18.29;	author cgf;	state Exp;
branches;
next	1.313;

1.313
date	2005.05.15.12.29.47;	author corinna;	state Exp;
branches;
next	1.312;

1.312
date	2005.05.13.20.24.20;	author cgf;	state Exp;
branches;
next	1.311;

1.311
date	2005.05.09.01.56.34;	author cgf;	state Exp;
branches;
next	1.310;

1.310
date	2005.05.09.01.21.43;	author cgf;	state Exp;
branches;
next	1.309;

1.309
date	2005.05.01.15.50.01;	author cgf;	state Exp;
branches;
next	1.308;

1.308
date	2005.04.29.16.39.34;	author davek;	state Exp;
branches;
next	1.307;

1.307
date	2005.04.25.14.40.53;	author cgf;	state Exp;
branches;
next	1.306;

1.306
date	2005.04.20.12.25.40;	author corinna;	state Exp;
branches;
next	1.305;

1.305
date	2005.03.24.14.48.15;	author corinna;	state Exp;
branches;
next	1.304;

1.304
date	2005.03.08.04.06.26;	author cgf;	state Exp;
branches;
next	1.303;

1.303
date	2005.03.07.10.24.22;	author corinna;	state Exp;
branches;
next	1.302;

1.302
date	2005.03.06.18.00.02;	author cgf;	state Exp;
branches;
next	1.301;

1.301
date	2005.02.27.17.55.54;	author cgf;	state Exp;
branches;
next	1.300;

1.300
date	2005.02.27.06.10.58;	author cgf;	state Exp;
branches;
next	1.299;

1.299
date	2005.02.27.03.03.19;	author cgf;	state Exp;
branches;
next	1.298;

1.298
date	2005.02.24.04.32.45;	author joshuadfranklin;	state Exp;
branches;
next	1.297;

1.297
date	2005.01.16.17.13.50;	author cgf;	state Exp;
branches;
next	1.296;

1.296
date	2005.01.11.23.03.24;	author phumblet;	state Exp;
branches;
next	1.295;

1.295
date	2004.11.18.05.20.22;	author bavag;	state Exp;
branches;
next	1.294;

1.294
date	2004.11.16.05.16.58;	author bavag;	state Exp;
branches;
next	1.293;

1.293
date	2004.11.13.16.30.18;	author phumblet;	state Exp;
branches;
next	1.292;

1.292
date	2004.11.11.01.56.02;	author cgf;	state Exp;
branches;
next	1.291;

1.291
date	2004.11.11.01.52.32;	author cgf;	state Exp;
branches;
next	1.290;

1.290
date	2004.11.11.01.17.29;	author bavag;	state Exp;
branches;
next	1.289;

1.289
date	2004.10.31.18.46.31;	author bavag;	state Exp;
branches;
next	1.288;

1.288
date	2004.10.27.01.28.07;	author bavag;	state Exp;
branches;
next	1.287;

1.287
date	2004.10.25.21.20.09;	author cgf;	state Exp;
branches;
next	1.286;

1.286
date	2004.10.25.16.11.41;	author bavag;	state Exp;
branches;
next	1.285;

1.285
date	2004.10.25.15.49.36;	author cgf;	state Exp;
branches;
next	1.284;

1.284
date	2004.10.25.15.35.41;	author cgf;	state Exp;
branches;
next	1.283;

1.283
date	2004.10.22.01.29.10;	author bavag;	state Exp;
branches;
next	1.282;

1.282
date	2004.10.21.00.06.37;	author cgf;	state Exp;
branches;
next	1.281;

1.281
date	2004.10.18.10.25.38;	author corinna;	state Exp;
branches;
next	1.280;

1.280
date	2004.10.18.01.47.00;	author cgf;	state Exp;
branches;
next	1.279;

1.279
date	2004.10.18.01.44.55;	author cgf;	state Exp;
branches;
next	1.278;

1.278
date	2004.10.17.23.31.23;	author cgf;	state Exp;
branches;
next	1.277;

1.277
date	2004.10.15.13.57.56;	author cgf;	state Exp;
branches;
next	1.276;

1.276
date	2004.10.14.17.35.46;	author cgf;	state Exp;
branches;
next	1.275;

1.275
date	2004.10.11.02.27.43;	author cgf;	state Exp;
branches;
next	1.274;

1.274
date	2004.10.10.17.07.23;	author cgf;	state Exp;
branches;
next	1.273;

1.273
date	2004.10.09.23.19.38;	author cgf;	state Exp;
branches;
next	1.272;

1.272
date	2004.10.09.23.15.36;	author cgf;	state Exp;
branches;
next	1.271;

1.271
date	2004.10.06.09.51.10;	author corinna;	state Exp;
branches;
next	1.270;

1.270
date	2004.10.06.09.46.40;	author corinna;	state Exp;
branches;
next	1.269;

1.269
date	2004.10.04.09.42.08;	author corinna;	state Exp;
branches;
next	1.268;

1.268
date	2004.09.23.10.32.20;	author corinna;	state Exp;
branches;
next	1.267;

1.267
date	2004.09.22.11.50.51;	author corinna;	state Exp;
branches;
next	1.266;

1.266
date	2004.09.15.07.51.05;	author corinna;	state Exp;
branches;
next	1.265;

1.265
date	2004.07.12.16.52.15;	author corinna;	state Exp;
branches;
next	1.264;

1.264
date	2004.06.15.02.18.51;	author amodra;	state Exp;
branches;
next	1.263;

1.263
date	2004.05.30.06.33.02;	author joshuadfranklin;	state Exp;
branches;
next	1.262;

1.262
date	2004.05.27.15.58.29;	author cgf;	state Exp;
branches;
next	1.261;

1.261
date	2004.05.27.15.15.51;	author cgf;	state Exp;
branches;
next	1.260;

1.260
date	2004.03.21.17.58.14;	author cgf;	state Exp;
branches;
next	1.259;

1.259
date	2004.03.15.21.34.12;	author cgf;	state Exp;
branches;
next	1.258;

1.258
date	2004.03.13.18.11.13;	author corinna;	state Exp;
branches;
next	1.257;

1.257
date	2004.02.25.01.23.20;	author cgf;	state Exp;
branches;
next	1.256;

1.256
date	2004.02.21.04.51.15;	author cgf;	state Exp;
branches;
next	1.255;

1.255
date	2004.02.14.19.43.07;	author corinna;	state Exp;
branches;
next	1.254;

1.254
date	2004.02.11.13.30.02;	author corinna;	state Exp;
branches;
next	1.253;

1.253
date	2004.02.11.00.29.42;	author cgf;	state Exp;
branches;
next	1.252;

1.252
date	2004.02.10.16.15.52;	author cgf;	state Exp;
branches;
next	1.251;

1.251
date	2004.02.10.16.01.31;	author cgf;	state Exp;
branches;
next	1.250;

1.250
date	2004.01.23.23.04.27;	author cgf;	state Exp;
branches;
next	1.249;

1.249
date	2004.01.22.09.21.56;	author corinna;	state Exp;
branches;
next	1.248;

1.248
date	2003.11.26.15.47.44;	author corinna;	state Exp;
branches;
next	1.247;

1.247
date	2003.11.19.18.50.52;	author corinna;	state Exp;
branches;
next	1.246;

1.246
date	2003.11.19.10.11.46;	author corinna;	state Exp;
branches;
next	1.245;

1.245
date	2003.11.14.19.14.43;	author corinna;	state Exp;
branches;
next	1.244;

1.244
date	2003.11.07.18.30.35;	author corinna;	state Exp;
branches;
next	1.243;

1.243
date	2003.11.04.10.54.47;	author corinna;	state Exp;
branches;
next	1.242;

1.242
date	2003.11.04.10.30.35;	author corinna;	state Exp;
branches;
next	1.241;

1.241
date	2003.10.17.17.19.31;	author cgf;	state Exp;
branches;
next	1.240;

1.240
date	2003.09.20.20.24.33;	author cgf;	state Exp;
branches;
next	1.239;

1.239
date	2003.09.18.01.46.18;	author cgf;	state Exp;
branches
	1.239.2.1;
next	1.238;

1.238
date	2003.09.13.18.20.52;	author cgf;	state Exp;
branches;
next	1.237;

1.237
date	2003.09.12.01.51.21;	author cgf;	state Exp;
branches;
next	1.236;

1.236
date	2003.09.11.16.24.26;	author corinna;	state Exp;
branches;
next	1.235;

1.235
date	2003.09.11.07.55.51;	author corinna;	state Exp;
branches;
next	1.234;

1.234
date	2003.09.11.02.56.40;	author cgf;	state Exp;
branches;
next	1.233;

1.233
date	2003.09.11.02.00.42;	author cgf;	state Exp;
branches;
next	1.232;

1.232
date	2003.09.11.00.07.28;	author cgf;	state Exp;
branches;
next	1.231;

1.231
date	2003.09.10.21.55.59;	author cgf;	state Exp;
branches;
next	1.230;

1.230
date	2003.09.08.05.09.13;	author cgf;	state Exp;
branches;
next	1.229;

1.229
date	2003.09.08.04.29.34;	author cgf;	state Exp;
branches;
next	1.228;

1.228
date	2003.09.08.02.50.02;	author cgf;	state Exp;
branches;
next	1.227;

1.227
date	2003.09.06.02.02.30;	author cgf;	state Exp;
branches;
next	1.226;

1.226
date	2003.09.04.01.04.57;	author cgf;	state Exp;
branches;
next	1.225;

1.225
date	2003.09.01.02.40.16;	author cgf;	state Exp;
branches;
next	1.224;

1.224
date	2003.09.01.02.33.49;	author cgf;	state Exp;
branches;
next	1.223;

1.223
date	2003.09.01.01.57.43;	author cgf;	state Exp;
branches;
next	1.222;

1.222
date	2003.08.17.17.26.08;	author corinna;	state Exp;
branches;
next	1.221;

1.221
date	2003.08.16.09.09.09;	author corinna;	state Exp;
branches;
next	1.220;

1.220
date	2003.08.15.20.26.11;	author corinna;	state Exp;
branches;
next	1.219;

1.219
date	2003.08.15.08.58.54;	author corinna;	state Exp;
branches;
next	1.218;

1.218
date	2003.08.13.19.37.40;	author corinna;	state Exp;
branches;
next	1.217;

1.217
date	2003.08.10.01.07.04;	author cgf;	state Exp;
branches;
next	1.216;

1.216
date	2003.08.09.16.32.22;	author cgf;	state Exp;
branches;
next	1.215;

1.215
date	2003.07.26.05.38.51;	author cgf;	state Exp;
branches;
next	1.214;

1.214
date	2003.07.26.01.53.06;	author cgf;	state Exp;
branches;
next	1.213;

1.213
date	2003.07.25.23.52.06;	author cgf;	state Exp;
branches;
next	1.212;

1.212
date	2003.07.04.03.20.21;	author cgf;	state Exp;
branches;
next	1.211;

1.211
date	2003.07.04.03.11.18;	author cgf;	state Exp;
branches;
next	1.210;

1.210
date	2003.06.13.02.36.12;	author cgf;	state Exp;
branches;
next	1.209;

1.209
date	2003.06.13.02.21.18;	author cgf;	state Exp;
branches;
next	1.208;

1.208
date	2003.06.12.20.40.58;	author cgf;	state Exp;
branches;
next	1.207;

1.207
date	2003.04.26.22.33.00;	author joshuadfranklin;	state Exp;
branches;
next	1.206;

1.206
date	2003.04.26.21.52.03;	author joshuadfranklin;	state Exp;
branches;
next	1.205;

1.205
date	2003.04.10.01.14.18;	author phumblet;	state Exp;
branches;
next	1.204;

1.204
date	2003.03.25.01.20.04;	author cgf;	state Exp;
branches;
next	1.203;

1.203
date	2003.03.09.19.04.23;	author corinna;	state Exp;
branches;
next	1.202;

1.202
date	2003.03.04.05.30.49;	author cgf;	state Exp;
branches;
next	1.201;

1.201
date	2003.03.01.16.38.25;	author phumblet;	state Exp;
branches;
next	1.200;

1.200
date	2003.03.01.03.38.19;	author cgf;	state Exp;
branches;
next	1.199;

1.199
date	2003.02.12.22.48.13;	author cgf;	state Exp;
branches;
next	1.198;

1.198
date	2003.02.07.21.34.34;	author cgf;	state Exp;
branches;
next	1.197;

1.197
date	2003.02.07.21.11.44;	author corinna;	state Exp;
branches;
next	1.196;

1.196
date	2003.02.07.04.51.26;	author cgf;	state Exp;
branches;
next	1.195;

1.195
date	2003.01.22.17.15.53;	author corinna;	state Exp;
branches;
next	1.194;

1.194
date	2003.01.15.10.08.36;	author corinna;	state Exp;
branches;
next	1.193;

1.193
date	2003.01.10.11.39.19;	author corinna;	state Exp;
branches;
next	1.192;

1.192
date	2003.01.08.17.38.11;	author corinna;	state Exp;
branches;
next	1.191;

1.191
date	2002.12.25.23.49.40;	author cgf;	state Exp;
branches;
next	1.190;

1.190
date	2002.12.15.10.09.35;	author corinna;	state Exp;
branches;
next	1.189;

1.189
date	2002.11.25.15.12.50;	author corinna;	state Exp;
branches;
next	1.188;

1.188
date	2002.11.24.18.07.30;	author corinna;	state Exp;
branches;
next	1.187;

1.187
date	2002.11.24.16.15.33;	author corinna;	state Exp;
branches;
next	1.186;

1.186
date	2002.11.08.10.22.58;	author corinna;	state Exp;
branches;
next	1.185;

1.185
date	2002.10.31.02.40.26;	author cgf;	state Exp;
branches;
next	1.184;

1.184
date	2002.10.19.11.59.14;	author cgf;	state Exp;
branches;
next	1.183;

1.183
date	2002.10.19.11.41.31;	author cgf;	state Exp;
branches;
next	1.182;

1.182
date	2002.09.30.03.01.17;	author cgf;	state Exp;
branches;
next	1.181;

1.181
date	2002.09.19.03.48.19;	author cgf;	state Exp;
branches;
next	1.180;

1.180
date	2002.09.17.17.13.21;	author cgf;	state Exp;
branches;
next	1.179;

1.179
date	2002.09.15.19.24.36;	author joshuadfranklin;	state Exp;
branches;
next	1.178;

1.178
date	2002.09.15.15.19.49;	author joshuadfranklin;	state Exp;
branches;
next	1.177;

1.177
date	2002.08.13.15.37.32;	author cgf;	state Exp;
branches;
next	1.176;

1.176
date	2002.08.02.11.14.35;	author corinna;	state Exp;
branches;
next	1.175;

1.175
date	2002.07.07.00.54.38;	author cgf;	state Exp;
branches;
next	1.174;

1.174
date	2002.07.07.00.44.08;	author cgf;	state Exp;
branches;
next	1.173;

1.173
date	2002.07.02.12.59.42;	author corinna;	state Exp;
branches;
next	1.172;

1.172
date	2002.07.01.20.54.35;	author cgf;	state Exp;
branches;
next	1.171;

1.171
date	2002.06.19.02.09.40;	author cgf;	state Exp;
branches;
next	1.170;

1.170
date	2002.06.14.11.31.33;	author corinna;	state Exp;
branches;
next	1.169;

1.169
date	2002.06.09.05.08.44;	author cgf;	state Exp;
branches;
next	1.168;

1.168
date	2002.06.09.04.54.32;	author cgf;	state Exp;
branches;
next	1.167;

1.167
date	2002.06.09.00.33.27;	author cgf;	state Exp;
branches;
next	1.166;

1.166
date	2002.06.07.19.25.26;	author cgf;	state Exp;
branches;
next	1.165;

1.165
date	2002.06.07.11.12.15;	author corinna;	state Exp;
branches;
next	1.164;

1.164
date	2002.06.07.01.37.20;	author cgf;	state Exp;
branches;
next	1.163;

1.163
date	2002.06.07.01.36.17;	author cgf;	state Exp;
branches;
next	1.162;

1.162
date	2002.06.06.02.55.09;	author cgf;	state Exp;
branches;
next	1.161;

1.161
date	2002.06.06.00.36.12;	author cgf;	state Exp;
branches;
next	1.160;

1.160
date	2002.06.04.01.31.28;	author cgf;	state Exp;
branches;
next	1.159;

1.159
date	2002.06.03.02.57.55;	author cgf;	state Exp;
branches;
next	1.158;

1.158
date	2002.06.02.17.46.38;	author cgf;	state Exp;
branches;
next	1.157;

1.157
date	2002.05.30.19.35.51;	author cgf;	state Exp;
branches;
next	1.156;

1.156
date	2002.05.30.03.42.19;	author cgf;	state Exp;
branches;
next	1.155;

1.155
date	2002.05.29.20.10.27;	author corinna;	state Exp;
branches;
next	1.154;

1.154
date	2002.05.29.15.07.14;	author corinna;	state Exp;
branches;
next	1.153;

1.153
date	2002.05.29.07.13.09;	author corinna;	state Exp;
branches;
next	1.152;

1.152
date	2002.05.28.14.59.36;	author corinna;	state Exp;
branches;
next	1.151;

1.151
date	2002.05.28.03.38.36;	author cgf;	state Exp;
branches;
next	1.150;

1.150
date	2002.05.27.01.49.08;	author cgf;	state Exp;
branches;
next	1.149;

1.149
date	2002.05.24.21.11.43;	author cgf;	state Exp;
branches;
next	1.148;

1.148
date	2002.05.24.14.40.14;	author corinna;	state Exp;
branches;
next	1.147;

1.147
date	2002.05.23.10.56.57;	author corinna;	state Exp;
branches;
next	1.146;

1.146
date	2002.05.23.04.48.03;	author cgf;	state Exp;
branches;
next	1.145;

1.145
date	2002.05.23.04.19.07;	author cgf;	state Exp;
branches;
next	1.144;

1.144
date	2002.05.22.10.05.41;	author corinna;	state Exp;
branches;
next	1.143;

1.143
date	2002.05.18.21.05.10;	author cgf;	state Exp;
branches;
next	1.142;

1.142
date	2002.05.15.11.35.59;	author corinna;	state Exp;
branches;
next	1.141;

1.141
date	2002.05.14.16.07.25;	author corinna;	state Exp;
branches;
next	1.140;

1.140
date	2002.05.13.23.42.32;	author cgf;	state Exp;
branches;
next	1.139;

1.139
date	2002.05.13.05.35.43;	author cgf;	state Exp;
branches;
next	1.138;

1.138
date	2002.05.13.05.23.37;	author cgf;	state Exp;
branches;
next	1.137;

1.137
date	2002.05.13.05.18.34;	author cgf;	state Exp;
branches;
next	1.136;

1.136
date	2002.05.13.05.13.57;	author cgf;	state Exp;
branches;
next	1.135;

1.135
date	2002.05.12.04.29.54;	author cgf;	state Exp;
branches;
next	1.134;

1.134
date	2002.05.08.01.55.56;	author cgf;	state Exp;
branches;
next	1.133;

1.133
date	2002.04.29.10.21.54;	author corinna;	state Exp;
branches;
next	1.132;

1.132
date	2002.03.19.15.48.39;	author cgf;	state Exp;
branches;
next	1.131;

1.131
date	2002.03.19.15.28.13;	author corinna;	state Exp;
branches;
next	1.130;

1.130
date	2002.03.15.14.53.54;	author corinna;	state Exp;
branches;
next	1.129;

1.129
date	2002.03.11.18.33.02;	author cgf;	state Exp;
branches;
next	1.128;

1.128
date	2002.03.07.03.13.17;	author cgf;	state Exp;
branches;
next	1.127;

1.127
date	2002.03.07.03.06.28;	author cgf;	state Exp;
branches;
next	1.126;

1.126
date	2002.03.07.03.00.14;	author cgf;	state Exp;
branches;
next	1.125;

1.125
date	2002.02.27.16.10.17;	author cgf;	state Exp;
branches;
next	1.124;

1.124
date	2002.02.15.23.03.14;	author cgf;	state Exp;
branches;
next	1.123;

1.123
date	2002.02.14.21.51.32;	author cgf;	state Exp;
branches;
next	1.122;

1.122
date	2002.01.31.12.43.29;	author corinna;	state Exp;
branches;
next	1.121;

1.121
date	2002.01.30.11.57.15;	author corinna;	state Exp;
branches;
next	1.120;

1.120
date	2002.01.29.18.37.00;	author cgf;	state Exp;
branches;
next	1.119;

1.119
date	2002.01.29.03.08.42;	author cgf;	state Exp;
branches;
next	1.118;

1.118
date	2002.01.29.02.28.44;	author cgf;	state Exp;
branches;
next	1.117;

1.117
date	2002.01.29.02.03.32;	author cgf;	state Exp;
branches;
next	1.116;

1.116
date	2002.01.22.03.17.58;	author cgf;	state Exp;
branches;
next	1.115;

1.115
date	2002.01.21.21.35.55;	author cgf;	state Exp;
branches;
next	1.114;

1.114
date	2002.01.18.02.57.10;	author cgf;	state Exp;
branches;
next	1.113;

1.113
date	2002.01.17.16.54.01;	author corinna;	state Exp;
branches;
next	1.112;

1.112
date	2002.01.15.14.07.42;	author corinna;	state Exp;
branches;
next	1.111;

1.111
date	2002.01.15.13.10.44;	author corinna;	state Exp;
branches;
next	1.110;

1.110
date	2001.12.26.17.46.11;	author cgf;	state Exp;
branches;
next	1.109;

1.109
date	2001.12.14.20.01.53;	author corinna;	state Exp;
branches;
next	1.108;

1.108
date	2001.12.14.17.15.37;	author cgf;	state Exp;
branches;
next	1.107;

1.107
date	2001.12.11.22.51.01;	author cgf;	state Exp;
branches;
next	1.106;

1.106
date	2001.12.04.04.12.39;	author cgf;	state Exp;
branches;
next	1.105;

1.105
date	2001.11.24.03.25.07;	author cgf;	state Exp;
branches;
next	1.104;

1.104
date	2001.11.22.00.29.04;	author cgf;	state Exp;
branches;
next	1.103;

1.103
date	2001.11.21.10.39.43;	author corinna;	state Exp;
branches;
next	1.102;

1.102
date	2001.11.17.09.48.09;	author corinna;	state Exp;
branches;
next	1.101;

1.101
date	2001.11.12.21.56.31;	author corinna;	state Exp;
branches;
next	1.100;

1.100
date	2001.11.12.21.55.39;	author corinna;	state Exp;
branches;
next	1.99;

1.99
date	2001.11.12.21.28.32;	author cgf;	state Exp;
branches;
next	1.98;

1.98
date	2001.11.12.20.21.43;	author corinna;	state Exp;
branches;
next	1.97;

1.97
date	2001.11.12.18.22.41;	author cgf;	state Exp;
branches;
next	1.96;

1.96
date	2001.11.12.17.55.52;	author corinna;	state Exp;
branches;
next	1.95;

1.95
date	2001.11.12.00.10.11;	author cgf;	state Exp;
branches;
next	1.94;

1.94
date	2001.11.11.06.16.18;	author cgf;	state Exp;
branches;
next	1.93;

1.93
date	2001.11.11.06.07.36;	author cgf;	state Exp;
branches;
next	1.92;

1.92
date	2001.11.11.03.06.59;	author cgf;	state Exp;
branches;
next	1.91;

1.91
date	2001.11.09.17.18.36;	author corinna;	state Exp;
branches;
next	1.90;

1.90
date	2001.11.04.17.24.24;	author corinna;	state Exp;
branches;
next	1.89;

1.89
date	2001.11.04.12.57.55;	author duda;	state Exp;
branches;
next	1.88;

1.88
date	2001.10.24.23.56.45;	author cgf;	state Exp;
branches;
next	1.87;

1.87
date	2001.10.24.22.09.37;	author cgf;	state Exp;
branches;
next	1.86;

1.86
date	2001.10.20.13.56.09;	author corinna;	state Exp;
branches;
next	1.85;

1.85
date	2001.10.15.15.44.37;	author cgf;	state Exp;
branches;
next	1.84;

1.84
date	2001.10.13.05.33.47;	author cgf;	state Exp;
branches;
next	1.83;

1.83
date	2001.10.10.01.58.33;	author cgf;	state Exp;
branches;
next	1.82;

1.82
date	2001.10.08.03.06.25;	author cgf;	state Exp;
branches;
next	1.81;

1.81
date	2001.09.22.00.40.37;	author cgf;	state Exp;
branches;
next	1.80;

1.80
date	2001.09.21.01.01.27;	author cgf;	state Exp;
branches;
next	1.79;

1.79
date	2001.09.19.16.22.47;	author cgf;	state Exp;
branches;
next	1.78;

1.78
date	2001.09.14.15.07.31;	author duda;	state Exp;
branches;
next	1.77;

1.77
date	2001.09.13.15.06.25;	author duda;	state Exp;
branches;
next	1.76;

1.76
date	2001.09.09.13.18.51;	author duda;	state Exp;
branches;
next	1.75;

1.75
date	2001.09.06.02.38.22;	author cgf;	state Exp;
branches;
next	1.74;

1.74
date	2001.09.04.01.09.39;	author cgf;	state Exp;
branches;
next	1.73;

1.73
date	2001.09.03.22.02.54;	author cgf;	state Exp;
branches;
next	1.72;

1.72
date	2001.09.01.19.58.40;	author cgf;	state Exp;
branches;
next	1.71;

1.71
date	2001.08.30.16.47.50;	author duda;	state Exp;
branches;
next	1.70;

1.70
date	2001.08.28.18.48.38;	author cgf;	state Exp;
branches;
next	1.69;

1.69
date	2001.08.15.03.24.18;	author cgf;	state Exp;
branches;
next	1.68;

1.68
date	2001.07.15.11.27.23;	author corinna;	state Exp;
branches;
next	1.67;

1.67
date	2001.06.28.02.46.11;	author cgf;	state Exp;
branches;
next	1.66;

1.66
date	2001.06.27.17.38.40;	author cgf;	state Exp;
branches;
next	1.65;

1.65
date	2001.06.15.04.50.57;	author cgf;	state Exp;
branches;
next	1.64;

1.64
date	2001.05.01.14.50.54;	author cgf;	state Exp;
branches;
next	1.63;

1.63
date	2001.04.29.02.32.18;	author cgf;	state Exp;
branches;
next	1.62;

1.62
date	2001.04.19.14.22.30;	author duda;	state Exp;
branches;
next	1.61;

1.61
date	2001.04.16.13.19.27;	author corinna;	state Exp;
branches;
next	1.60;

1.60
date	2001.04.16.02.51.02;	author cgf;	state Exp;
branches;
next	1.59;

1.59
date	2001.04.15.14.09.33;	author corinna;	state Exp;
branches;
next	1.58;

1.58
date	2001.04.11.09.38.55;	author duda;	state Exp;
branches;
next	1.57;

1.57
date	2001.04.03.02.41.54;	author cgf;	state Exp;
branches;
next	1.56;

1.56
date	2001.04.02.14.58.47;	author cgf;	state Exp;
branches;
next	1.55;

1.55
date	2001.03.18.02.47.39;	author cgf;	state Exp;
branches;
next	1.54;

1.54
date	2001.03.05.17.55.23;	author corinna;	state Exp;
branches;
next	1.53;

1.53
date	2001.01.10.22.34.02;	author cgf;	state Exp;
branches;
next	1.52;

1.52
date	2001.01.10.14.20.16;	author cgf;	state Exp;
branches;
next	1.51;

1.51
date	2000.12.16.04.53.30;	author cgf;	state Exp;
branches;
next	1.50;

1.50
date	2000.12.11.00.10.49;	author cgf;	state Exp;
branches;
next	1.49;

1.49
date	2000.12.07.10.31.01;	author corinna;	state Exp;
branches;
next	1.48;

1.48
date	2000.12.03.05.42.03;	author cgf;	state Exp;
branches;
next	1.47;

1.47
date	2000.11.19.04.55.49;	author cgf;	state Exp;
branches;
next	1.46;

1.46
date	2000.11.08.20.39.45;	author cgf;	state Exp;
branches;
next	1.45;

1.45
date	2000.11.08.15.00.02;	author corinna;	state Exp;
branches;
next	1.44;

1.44
date	2000.11.02.01.03.00;	author corinna;	state Exp;
branches;
next	1.43;

1.43
date	2000.10.28.05.39.38;	author cgf;	state Exp;
branches;
next	1.42;

1.42
date	2000.10.28.00.21.41;	author cgf;	state Exp;
branches;
next	1.41;

1.41
date	2000.10.19.02.13.52;	author dj;	state Exp;
branches;
next	1.40;

1.40
date	2000.10.18.22.58.34;	author cgf;	state Exp;
branches;
next	1.39;

1.39
date	2000.10.18.04.55.01;	author cgf;	state Exp;
branches;
next	1.38;

1.38
date	2000.10.16.23.12.58;	author corinna;	state Exp;
branches;
next	1.37;

1.37
date	2000.10.15.03.43.48;	author cgf;	state Exp;
branches;
next	1.36;

1.36
date	2000.10.12.06.22.30;	author cgf;	state Exp;
branches;
next	1.35;

1.35
date	2000.10.09.03.31.10;	author cgf;	state Exp;
branches;
next	1.34;

1.34
date	2000.09.29.11.20.53;	author corinna;	state Exp;
branches;
next	1.33;

1.33
date	2000.09.28.06.39.43;	author corinna;	state Exp;
branches;
next	1.32;

1.32
date	2000.09.19.01.26.45;	author cgf;	state Exp;
branches;
next	1.31;

1.31
date	2000.09.13.02.48.39;	author cgf;	state Exp;
branches;
next	1.30;

1.30
date	2000.09.10.16.56.00;	author cgf;	state Exp;
branches;
next	1.29;

1.29
date	2000.08.29.01.58.00;	author cgf;	state Exp;
branches;
next	1.28;

1.28
date	2000.08.25.16.50.08;	author cgf;	state Exp;
branches;
next	1.27;

1.27
date	2000.08.25.15.45.42;	author cgf;	state Exp;
branches;
next	1.26;

1.26
date	2000.08.25.02.25.52;	author cgf;	state Exp;
branches;
next	1.25;

1.25
date	2000.08.24.19.07.14;	author cgf;	state Exp;
branches;
next	1.24;

1.24
date	2000.08.24.19.03.12;	author cgf;	state Exp;
branches;
next	1.23;

1.23
date	2000.07.31.13.35.39;	author corinna;	state Exp;
branches;
next	1.22;

1.22
date	2000.07.29.16.26.37;	author cgf;	state Exp;
branches;
next	1.21;

1.21
date	2000.07.28.22.37.23;	author cgf;	state Exp;
branches
	1.21.2.1;
next	1.20;

1.20
date	2000.07.28.22.34.24;	author cgf;	state Exp;
branches;
next	1.19;

1.19
date	2000.07.13.21.49.36;	author corinna;	state Exp;
branches;
next	1.18;

1.18
date	2000.07.13.11.09.53;	author corinna;	state Exp;
branches;
next	1.17;

1.17
date	2000.07.01.04.20.24;	author cgf;	state Exp;
branches;
next	1.16;

1.16
date	2000.06.25.03.18.54;	author cgf;	state Exp;
branches;
next	1.15;

1.15
date	2000.06.08.12.54.11;	author corinna;	state Exp;
branches;
next	1.14;

1.14
date	2000.06.05.18.43.54;	author dj;	state Exp;
branches;
next	1.13;

1.13
date	2000.05.19.22.02.23;	author corinna;	state Exp;
branches;
next	1.12;

1.12
date	2000.05.19.17.06.28;	author dj;	state Exp;
branches;
next	1.11;

1.11
date	2000.05.18.18.39.11;	author cgf;	state Exp;
branches;
next	1.10;

1.10
date	2000.04.27.03.44.23;	author cgf;	state Exp;
branches;
next	1.9;

1.9
date	2000.04.15.22.30.49;	author corinna;	state Exp;
branches;
next	1.8;

1.8
date	2000.04.13.05.23.30;	author cgf;	state Exp;
branches;
next	1.7;

1.7
date	2000.04.11.02.57.25;	author cgf;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.19.03.53.18;	author cgf;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.18.17.45.35;	author cgf;	state Exp;
branches;
next	1.4;

1.4
date	2000.03.15.14.38.09;	author cgf;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.13.02.23.47;	author cgf;	state Exp;
branches;
next	1.2;

1.2
date	2000.02.28.05.08.05;	author cgf;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.17.19.38.31;	author cgf;	state Exp;
branches
	1.1.1.1;
next	;

1.619.2.1
date	2014.02.24.19.04.40;	author cgf;	state Exp;
branches;
next	1.619.2.2;

1.619.2.2
date	2014.05.19.12.26.00;	author corinna;	state Exp;
branches;
next	1.619.2.3;

1.619.2.3
date	2014.06.16.13.27.32;	author corinna;	state Exp;
branches;
next	1.619.2.4;

1.619.2.4
date	2014.11.13.12.53.12;	author corinna;	state Exp;
branches;
next	;

1.587.2.1
date	2012.08.13.20.05.40;	author corinna;	state Exp;
branches;
next	1.587.2.2;

1.587.2.2
date	2012.08.16.16.26.01;	author corinna;	state Exp;
branches;
next	1.587.2.3;

1.587.2.3
date	2012.08.16.16.27.41;	author corinna;	state Exp;
branches;
next	1.587.2.4;

1.587.2.4
date	2012.10.16.14.53.22;	author corinna;	state Exp;
branches;
next	1.587.2.5;

1.587.2.5
date	2012.10.16.15.20.47;	author corinna;	state Exp;
branches;
next	1.587.2.6;

1.587.2.6
date	2012.10.24.13.01.59;	author corinna;	state Exp;
branches;
next	1.587.2.7;

1.587.2.7
date	2012.11.05.12.31.17;	author corinna;	state Exp;
branches;
next	1.587.2.8;

1.587.2.8
date	2012.11.07.16.39.43;	author corinna;	state Exp;
branches;
next	1.587.2.9;

1.587.2.9
date	2012.11.09.08.53.24;	author corinna;	state Exp;
branches;
next	1.587.2.10;

1.587.2.10
date	2012.11.23.15.14.40;	author corinna;	state Exp;
branches;
next	1.587.2.11;

1.587.2.11
date	2012.11.26.13.13.28;	author corinna;	state Exp;
branches;
next	1.587.2.12;

1.587.2.12
date	2012.11.29.17.15.22;	author corinna;	state Exp;
branches;
next	1.587.2.13;

1.587.2.13
date	2013.02.21.11.24.35;	author corinna;	state Exp;
branches;
next	;

1.356.4.1
date	2007.11.12.15.31.45;	author corinna;	state Exp;
branches;
next	1.356.4.2;

1.356.4.2
date	2007.12.07.09.40.33;	author corinna;	state Exp;
branches;
next	1.356.4.3;

1.356.4.3
date	2007.12.23.12.36.09;	author briand;	state Exp;
branches;
next	1.356.4.4;

1.356.4.4
date	2008.02.28.11.11.17;	author corinna;	state Exp;
branches;
next	;

1.239.2.1
date	2003.09.20.20.27.10;	author cgf;	state Exp;
branches;
next	;

1.21.2.1
date	2000.07.31.13.34.50;	author corinna;	state Exp;
branches;
next	;

1.1.1.1
date	2000.02.17.19.38.31;	author cgf;	state Exp;
branches;
next	;


desc
@@


1.654
log
@	* getfacl.c (usage): Change --all to --access, --dir to --default.
	Align text to output of Linux tool.
	(longopts): Add --access and --default options.
@
text
@2015-02-28  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl.c (usage): Change --all to --access, --dir to --default.
	Align text to output of Linux tool.
	(longopts): Add --access and --default options.

2015-02-25  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (MAX_SID_LEN): Remove.  Instead, use SECURITY_MAX_SID_SIZE
	throughout.
	(enum_unix_groups): Introduce numeric_psid and rearrange code to avoid
	potential heap corruption.
	* mkpasswd.c: Ditto.

2015-02-17  Ken Brown  <kbrown@@cornell.edu>

	* dump_setup.cc (check_package_files): Accommodate postinstall
	files in any directory whose name contains "/postinstall/", not
	just /etc/postinstall.

2015-02-03  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (longopts): Add --force option.
	(opts): Add -f option.
	(restore_flags): New variable.
	(usage): Clarify working of save action.  Add restore action.  Add
	description for -f/--force option.
	(set_privilege): Drop function.  The Cygwin DLL is doing that anyway.
	(cmd_save): Drop call to set_privilege.
	(cmd_restore): New function.
	(main): Handle -f/--force option.

2014-12-15  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (action_t): Add DeleteDef value.
	(delacl): Take new parameter to differe between DeleteAll and DeleteDef.
	Extend conditional to handle DefaultDef.  Change comment accordingly.
	(setfacl): Call delacl in DefaultDef case as well.
	(usage): Add and describe -k option.  Add -k to require options.
	(longopts): Add --remove-default option.
	(opts): Add -k option.
	(main): Handle -k option.

2014-12-05  Václav Zeman  <vhaisman@@gmail.com>

	* tzmap-from-unicode.org: Create tzmap as const.
	* tzmap.h: Regenerate.

2014-12-05  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in: Add rules to create and depend on tzmap.h.
	* tzmap-from-unicode.org: New script to create tzmap.h.
	* tzmap.h: New auto-generated file.
	* tzset.c: Drop tzmap from here and include tzmap.h instead.  Drop
	Windows 2000 considerations.

2014-11-28  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Call enum_local_groups with offset 0x30000 for local
	machine, too.

2014-11-27  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Call enum_groups with offset 0x30000 for local
	machine, same as from DB.
	* mkpasswd.c (enum_unix_users): Set pw_passwd field to '*'.
	(enum_users): Ditto.
	(main): Call enum_users with offset of 0x30000 for local machine,
	same as from DB.

2014-11-24  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (GetPW): If server is NULL, and the user is not a local
	user, try to fetch the DC to use as server.
	(ChangePW): Get Windows username via extra parameter.
	(usage): Reduce -d help text to reflect above change.
	(main): Fix typo in comment.  Call GetPW and ChangePW as per the
	changes above.

2014-11-12  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (usage): Fix language.
	* mkpasswd.c (usage): Ditto.

2014-11-12  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (enum_unix_groups): Always print groupname with machine
	prefix.
	(usage): Extend help output for -l option.
	(main): Drop superfluous goto and label.  Make machine prefixing for
	local machine when using -l option dependend on options in
	/etc/nsswitch.conf.
	* mkpasswd.c: Ditto.

2014-11-10  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Handle Windows 10/Server 2014(?).

2014-11-03  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (enum_local_groups): Don't generate leading separator char
	for builtin accounts.

2014-10-29  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (setfacl): Fix bracketing in expression.

2014-10-27  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (usage): Add -b to require options.

2014-10-27  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (action_t): Add DeleteAll value.
	(delacl): New function to remove all ACL entries not representing POSIX
	permissions.
	(setfacl): Rearrange conditional expression into switch statement.
	Add DeleteAll case.
	(usage): Add and describe -b option.
	(longopts): Add --remove-all option.
	(opts): Add -b option.
	(main): Handle -b option.

2014-10-21  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (CYGLSA64_DLL): Remove unused macro.
	(dump_sysinfo): If COMSPEC isn't set in the MSVCRT environment, set it.
	Explain why.

2014-09-03  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (addmissing): New function to add missing acl entries to
	a modified acl per the rules set by aclcheck.
	(setfacl): Call addmissing unless action is Delete.

2014-09-03  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (getaclentry): Fix previous fix again.  Allow lone 'm' as
	well as any lone default entry if action is Delete.  Fix comments.
	(usage): Align usage text.

2014-09-03  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (getaclentry): Fix return value in case of a lone 'm' if
	action is Delete.  Drop requirement for a trailing colon if action is
	Delete.

2014-08-31  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (usage): Drop outdated note that default ACEs are not
	taken into account.

2014-08-31  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl.c (usage): Add flags description.
	(main): Print suid/sgid/vtx flags if available.

2014-08-15  Corinna Vinschen  <corinna@@vinschen.de>

	* configure.ac: Convert to new AC_INIT style.
	* configure: Regenerate.

2014-08-14  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.xml: Move to ../doc.

2014-08-06  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (usage): Rename DAYS to MINDAYS and MAXDAYS.
	* utils.xml (passwd): Ditto.

2014-07-29  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (usage): Move info message that this /etc/group isn't really
	required anymore more to the top of the usage output.
	* mkpasswd.c (usage): Ditto for /etc/passwd.  Drop old text from output.
	* utils.xml: Fix accordingly.

2014-06-16  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (main): Fix typo in error output.

2014-04-21  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc (filter_minidump_type): New function.
	(minidump): Change default dump type from MiniDumpNormal to
	something with more useful information without getting too
	big. Use filter_minidump_type() to filter out unsupported dump
	types.

2014-04-21  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* Makefile.in (minidumper.exe): Link directly with dbghelp.
	* minidumper.cc (minidump): Ditto.

2014-04-21  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc (minidump): Fix copy and paste error in checking
	result of OpenProcess().

2014-02-24  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (domlist_t): Drop id_offset.
	(get_dcname): Remove.
	(current_group): Remove.
	(enum_unix_groups): Simplify.  Change space to underscore in domain
	name.
	(enum_local_groups): Simplify to accommodate the fact that it's only
	called for foreign machines.
	(enum_groups): Ditto.
	(print_special_by_sid): Remove.
	(print_special_by_name): Remove.
	(usage): Align to new code.
	(fetch_primary_domain): Remove.
	(main): Use cygwin_internal CW_SETENT, CW_GETENT and CW_ENDENT method.
	Call enum_local_groups, enum_groups, and enum_unix_groups only for
	foreign machines.
	* mkpasswd.c (get_dcname): Remove.
	(current_user): Remove.
	(enum_unix_users): Simplify.  Change space to underscore in domain name.
	(enum_users): Simplify to accommodate the fact that it's only
	called for foreign machines.
	(print_special_by_sid): Remove.
	(usage): Align to new code.
	(longopts): Add -b/--no-builtin option.
	(opts): Add -b option.
	(print_special_by_name): Remove.
	(enum_std_accounts): Remove.
	(fetch_primary_domain): Remove.
	(main): Use cygwin_internal CW_SETENT, CW_GETENT and CW_ENDENT method.
	Call enum_users and enum_unix_users only for foreign machines.
	* utils.xml (mkgroup): Align documentation to new usage.
	(mkpasswd): Ditto.

2014-02-23  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc (minidump): Fix -t option argument handling.

2014-02-07  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc: New file.
	* Makefile.in (CYGWIN_BINS): Add minidumper.
	* utils.xml (minidumper): New section.

2013-11-19  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (RtlGetVersion): Declare.
	(dump_sysinfo): Call RtlGetVersion rather than GetVersionEx to get
	correct OS info even on Windows 8.1.  Don't check return value since
	RtlGetVersion never fails per MSDN.  Move fetching kernel32 module
	handle where it's really needed.  Drop temporary comment added by
	previous checkin.

2013-11-19  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Revert Windows 8.1 hack.  It's not
	working.  Add a (hopefully temporary) comment.

2013-11-19  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Drop code trying to fetch OSVERSIONINFO
	if fetching OSVERSIONINFOEX failed.  Drop code handling unsupported
	platform IDs.  Add code to tweak dwMinorVersion on Windows 8.1 if no
	manifest is present.

2013-11-19  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (cygcheck.exe): Link against wininet.dll.
	(dumper.exe): Link against psapi.dll.
	* cygcheck.cc (_WIN32_WINNT): Define as 0x0602.
	(pInternetCloseHandle): Drop pointer.
	(PRODUCT_UNLICENSED): Drop definition.
	(PRODUCT_PROFESSIONAL_WMC): Ditto.
	(package_grep): Delete code loading wininet functions dynamically, just
	call functions directly.
	* module_info.cc: Drop code loading psapi functions dynamically since
	all supported OS versions have it anyway.  Call psapi functions
	directly.

2013-11-19  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Distinguish Windows 8 and 8.1, as well
	as Windows Server 2012 and 2012 R2.  Add missing commas in products
	array to avoid crashes.  Drop Windows NT4 and 2000 printouts.  Just
	call IsWow64Process, GetNativeSystemInfo, and GetDiskFreeSpaceEx
	directly, rather than loading them dynamically, since they are exported
	by all supported OS versions.  Fix questionable type usage in call to
	GetDiskFreeSpaceEx.

2013-11-06  Christopher Faylor  <me.cygwin2013@@cgf.cx>

	* configure.ac: Detect windows headers/libs after we've figured out the
	C compiler.
	* configure: Regenerate.
	* aclocal.m4: Regenerate.

2013-09-16  Christopher Faylor  <me.cygwin2013@@cgf.cx>

	* dump_setup.cc (find_tar_ext): Generalize search for .tar extension,
	avoiding looking for specific compression types.

2013-08-23  Christopher Faylor  <me.cygwin2013@@cgf.cx>

	* cygcheck.cc (package_grep): Accommodate arch-specific package layout.

2013-07-31  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (MINGW_LDFLAGS): Don't link against w32api libs.  These
	are only for Cygwin executables.

2013-07-07  Christopher Faylor  <me.cygwin2013@@cgf.cx>

	* cygcheck.cc (dll_info): Detect and report on symlinks.  Output wrong
	architecture message inline with stdout for clarity.
	* path.cc (is_symlink): Always reset file pointer to beginning on exit.
	(readlink): Assume that file pointer is set to the beginning.

2013-06-26  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (do_pathconv): when -p option is given, generate wide 
	path without long path prefixing.
	* wide_path.h (wide_path::wide_path): Allow extra bool parameter to
	specify whether or not performing Windows long path prefixing.

2013-05-21  Corinna Vinschen  <corinna@@vinschen.de>

	Reinstantiate accidentally removed patch from 2009-05-16:
	* Makefile.in (cygpath.exe): Link against cygwin.a before linking
	against ntdll.dll to avoid linking symbols defined in both DLLs
	from ntdll.
	(ps.exe): Ditto.

2013-05-10  Warren Young  <warren@@etr-usa.com>

	* utils.sgml utils.xml: Renamed utils.sgml to utils.xml, added
	<?xml> and <!DOCTYPE> tags to the top, and formatted it.  No 
	content change.

2013-04-23  Corinna Vinschen  <corinna@@vinschen.de>

	* Merge in cygwin-64bit-branch.  See ChangeLog.64bit for details.

2013-02-20  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* Makefile.in (CYGWIN_LDFLAGS): Replace -static-lib* with -static.
	(MINGW_LDFLAGS): Ditto.
	(ZLIB): Simplify accordingly.

2012-12-14  Corinna Vinschen <corinna@@vinschen.de>

	* utils.sgml (mount): Document sparse mount option.

2012-11-27  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* Makefile.in: Move CFLAGS and CXXFLAGS so that they can be manipulated
	by Makefile.common.  Add -static-libstdc++ to *LDFLAGS.  Add
	dependencies for loadlib.h.
	* loadlib.h: Update copyright.
	(_load_sys_library): Properly define set_dll_library as WINAPI to avoid
	stack corruption.

2012-11-27  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* Makefile.in (ZLIBS): Common define to force static load.
	(MINGW_LDFLAGS): Use static libgcc.

2012-11-27  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* Makefile.in: Make sure that libz is always loaded staticly.

2012-11-26  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* configure.ac: Rename from configure.in.
	* configure.in: Delete.
	* configure: Regenerate.

2012-11-26  Corinna Vinschen <corinna@@vinschen.de>

	* bloda.cc: Drop Mingw.org considerations.
	* dump_setup.cc: Ditto.
	* strace.cc: Ditto.

2012-11-12  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* aclocal.m4: Regenerate.
	* configure: Ditto.
	* autogen.sh: New script.
	* configure.in: Revamp for new configury.
	* Makefile.in: Revamp for new configury.  Rename ALL_* to just *.
	Always use "VERBOSE" setting.
	(MINGW_CXX): Don't include CFLAGS in definition.
	(all): Define target first, before everything else so that it is the
	default.
	(ps.exe): Don't add useless -lcygwin.
	(ldh.exe): For consistency, add to existing MINGW_LDFLAGS rather than
	redefining them.
	(cygcheck.exe): Always include -lz for MINGW_LDFLAGS.  Don't try to
	figure out where to find it.
	(dumper.exe): Simplify check.  Assume libraries are installed rather
	than trying to retrieve from source tree.
	(install): Just use /bin/mkdir to create directories.
	(Makefile): Regenerate when standard dependencies change.
	* dump_setup.cc: Always include zlib.h.  Remove accommodations for it
	possibly not existing.
	* parse_pe.cc: Add define which allows building with installed
	binutils package.
	* dumper.cc: Ditto.

2012-11-09  Corinna Vinschen <corinna@@vinschen.de>

	* path.cc (vcygpath): Handle cygdrive prefix.

2012-11-07  Corinna Vinschen <corinna@@vinschen.de>

	* Makefile.in ($(MINGW_BINS)): Drop -B$(mingw_build)/ from build
	expression.

2012-11-05  Corinna Vinschen <corinna@@vinschen.de>

	* Makefile.in (MINGW_CXX): Attach $(CFLAGS) to allow providing
	build option tweaks to mingw compiler as well.

2012-10-24  Corinna Vinschen <corinna@@vinschen.de>

	* configure.in: Add AC_NO_EXECUTABLES,
	* configure: Regenerate.

2012-10-24  Kai Tietz  <ktietz70@@googlemail.com>
	    Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>
	    Corinna Vinschen <corinna@@vinschen.de>

	* configure.in: Add check for MINGW_CXX.  Remove libiconv check.
	* configure: Regenerate.
	* Makefile.in: Remove references to mingw and w32api directories.
	Use MINGW_CXX instead of mingw script to build MINGW_BINS.
	Check for libiconv with $CC --print-file-name.
	* cygcheck.cc: Use relative include paths for Cygwin headers.
	* path.cc: Ditto.
	* strace.cc: Ditto
	* mingw: Remove.

2012-10-19  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (cygcheck.exe): Add temporary (1.7.17-only) hack to
	allow cygcheck running on pre-Vista despite of the new w32api not
	matching the locally used w32api.

2012-10-09  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Convert "if/else if" chain to a switch
	statement.  Drop "not yet supported" and "Server" from Windows 2012
	output string.

2012-09-02  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Drop "not yet supported" text from
	Windows 8.  Update products array.

2012-07-11  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (cygcheck.exe): Link against psapi.dll.
	* bloda.cc: Change include section to work with Mingw64 headers.
	Include psapi.h.  Use SystemProcessInformation instead of
	SystemProcessesAndThreadsInformation throughout and add define for
	w32api headers.  Ditto for PSYSTEM_PROCESS_INFORMATION vs.
	PSYSTEM_PROCESSES.
	(system_module_list): New type to replace SYSTEM_MODULE_INFORMATION.
	Change usage throughout accordingly.
	(get_module_list): Fetch module list using PSAPI functions
	EnumDeviceDrivers and GetDeviceDriverBaseNameA.
	* cygcheck.cc (max): Define as __max if not defined already.
	(alloca): Only define if not defined already.
	(handle_unique_object_name): Use explicit sharing flags rather than
	FILE_SHARE_VALID_FLAGS which officially is only available in DDK
	headers.
	(PRODUCT_ULTIMATE_E): Only define if not defined already.
	* dump_setup.cc: Change include section to work with Mingw64 headers.
	(NtQueryAttributesFile): Drop NTOSAPI aka DECLSPEC_IMPORT.
	* strace.cc: Change include section to work with Mingw64 headers.
	(alloca): Only define if not defined already.

2012-07-06  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc: Change including headers to allow building against
	Mingw64 headers. Include ntdef.h and ntdll.h rather than ddk headers.
	Define _WIN32_WINNT and WINVER as 0x0602.
	(RtlEqualUnicodePathPrefix): Drop definition.  Pulled in from ntdll.h
	now.
	(get_device_name): s/Zw/Nt.
	* dumper.cc: Include sys/param.h
	(dumper::dump_memory_region): Use MIN rather than min.
	* locale.cc: Include stdlib.h.  Define _WIN32_WINNT and WINVER as
	0x0602.
	* ps.cc: Include ntdef.h and ntdll.h rather than ddk headers.
	* regtool.cc (regDeleteKeyEx): Drop WINADVAPI qualifier.

2012-06-03  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Change "Server 8" to official
	"Server 2012".

2012-05-05  Corinna Vinschen  <corinna@@vinschen.de>

	* mkpasswd.c (current_user): Actually *use* $HOME if it's available.
	Add comment to explain what we're doing here.

2012-04-05  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (print_special_by_sid): Rename from print_special.  Change
	calls throughout.
	(print_special_by_name): New function.
	(main): Call print_special_by_name for TrustedInstaller account.
	* mkpasswd.c (print_special_by_sid): Rename from print_special.  Change
	calls throughout.
	(print_special_by_name): New function.
	(enum_std_accounts): Call print_special_by_name for TrustedInstaller
	account.

2012-02-24  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* pldd.c: Fix typo in license header.

2012-02-24  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* Makefile.in (CYGWIN_BINS): Add pldd.
	(pldd.exe): Add -lpsapi to ALL_LDFLAGS.
	* pldd.c: New file.
	* utils.sgml (pldd): New section.

2012-02-09  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.cc: Add -v option to print version information as well, since
	it's used in older csih.

2012-02-04  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.sgml: Fix typos.

2012-01-31  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* strace.cc (proc_child): Don't right-shift exit value.
	(main): Call ExitProcess() to exit exactly the same way as any straced
	child.

2012-01-29  Corinna Vinschen  <corinna@@vinschen.de>

	* tzset.c: Throughout use wide characters to be locale agnostic.
	(main): Call setlocale.

2012-01-29  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (CYGWIN_BINS): Add tzset.
	* tzset.c: New tool, new file.
	* utils.sgml (tzset): New section.

2012-01-24  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* ldd.cc (start_process): Handle .oct and .so as DLLs.

2011-12-22  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (ps.exe): Revert previous change.
	* ps.cc: Include psapi.h again.
	(main): In CW_GETPINFO_FULL case.  Evaluate minimal process access mask
	required per OS and use that in OpenProcess call.  Use
	GetModuleFileNameExW on Windows 2000 or if fetching the drive mapping
	failed.  Handle empty process name.

2011-12-22  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (ps.exe): Drop -lpsapi from ALL_LDFLAGS.
	* ps.cc: Don't include psapi.h.
	(dosdevs): Drop.
	(unicode_buf): Define.
	(main): Simplify path evaluation in CW_GETPINFO_FULL case. Fetch drive
	map from Cygwin DLL.  Use it to convert NT device paths to Win32 paths.

2011-12-02  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (cygpath.exe): Add -luserenv to ALL_LDFLAGS.
	* cygpath.cc: Throughout, use cygwin_conv_path WIN_W rather than WIN_A
	conversion.
	(get_long_path_name_w32impl): Remove.
	(get_long_name): Drop pre-Windows 2000 accommodations.  Just call
	GetLongPathNameW here directly.
	(get_special_folder): Convert first parameter to WCHAR buffer pointer.
	Drop conversion of result from WCHAR * to char *.
	(do_sysfolders): Accommodate change to get_special_folder and only
	convert result to char * last.  Drop pre-Windows 2000 accommodations
	and just call GetProfilesDirectoryW directly.  Replace call to
	GetWindowsDirectoryW with call to GetSystemWindowsDirectoryW.
	Just call GetShortPathNameW directly.
	(do_pathconv): Simplify buffer handling.

2011-12-01  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Drop support for NT4 domains.
	* mkpasswd.c: Ditto.
	(psx_dir): Remove.
	(current_user): Drop support for -m option.  Use $HOME as is since it's
	a POSIX path anyway.
	(enum_users): Drop support for -m option.
	(usage): Mention -m option as ignored.
	(main): Drop support for -m option.  Mark ignored options as deprecated.
	* utils.sgml (mkpasswd): Remove description of -m option.

2011-11-28  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (print_locale_with_codeset): Fetch Windows path as UNICODE
	path and convert that to POSIX.

2011-11-28  Corinna Vinschen  <corinna@@vinschen.de>

	* ps.cc: Remove all Win 9x considerations.  Use psapi functions
	directly.  Drop support for older Cygwin DLLs.  Just use progname_long
	as is since it's already a POSIX path now.  Rename "tty" to "pty" as in
	the Cygwin DLL.  Call setlocale to make sure wcstombs does the right
	thing according to the current locale.
	* Makefile.in (ps.exe): Link against psapi.dll.

2011-11-24  Christopher Faylor  <me.cygwin2011@@cgf.cx>

	* strace.cc (attach_process): Use NT_SUCCESS to figure out if
	NtSetInformationProcess succeeded.
	(handle_output_debug_string): Put back DebugActiveProcess since it
	seems to still be needed (on my system at least).  Detect new format
	_STRACE_INTERFACE_ACTIVATE_ADDR which informs whether this is a forked
	process or not.  Use that to decide if forkdebug should be handled.

2011-11-14  Christopher Faylor  <me.cygwin2011@@cgf.cx>

	* strace.cc (handle_output_debug_string): Disable code which attempted
	to add stuff in between '****' blocks since they no longer are the
	first thing output by an straced process.

2011-10-13  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Add Windows 8 recognition.  Note as
	unsupported.  Update products array.

2011-10-11  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* utils.sgml (getconf): Expand documentation.

2011-10-10  Corinna Vinschen  <corinna@@vinschen.de>

	* ldd.cc (VERSION): Remove.

2011-10-10  Christopher Faylor  <me.cygwin2011@@cgf.cx>

	* ldd.cc: Update copyright.

2011-10-10  Corinna Vinschen  <corinna@@vinschen.de>

	* Align usage output, version output, as well as usage and version
	option handling to use the same style throughout all Cygwin utils.
	Throughout use program_invocation_short_name to refer to current
	process name in Cygwin executables.
	* utils.sgml: Align documentation to above change.  Add missing
	sections for getconf, ldd, and setmetamode.
	* strace.cc (proc_child): Avoid compiler warning.

2011-10-10  Andy Koppe <andy.koppe@@gmail.com>
	    Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (usage): Restructure, rephrase, add new options.  Drop
	arguments, don't exit.
	(print_version): New function.
	(longopts): Add -f, -n, and -V options.  Reorder.
	(opts): Add -f, -n, and -V options.
	(main): Call GetSystemDefaultUILanguage for -s option.  Call
	GetUserDefaultUILanguage for -u option.  Add -f and -n options and
	call GetUserDefaultLCID and GetSystemDefaultLCID respectively.  Return
	0 after calling usage in -h case.  Add -V option and call print_version.
	Don't print full usage in default case, rather just a short help message
	similar to GNU tools.
	* utils.sgml (locale): Align to above changes.  Rephrase description.

2011-10-10  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (check_keys): Use UNICODE Win32 functions.

2011-09-12  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* strace.cc (attach_process): Try to turn off DEBUG_ONLY_THIS_PROCESS
	if Attaching to a process with the trace-children flag set.
	(handle_output_debug_string): Apparently we don't need to explicitly
	attach for debugging when a child process starts
	* Makefile.in (strace.exe): Link with ntdll

2011-08-21  Christopher Faylor  <me.cygwin2011@@cgf.cx>

	* Makefile.in: Check for header file existence when building dumper.exe
	too.

2011-08-10  Corinna Vinschen  <corinna@@vinschen.de>

	* ps.cc (main): Don't overwrite process name, just attach <defunct>
	to it for zombie processes.

2011-07-19  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* Makefile.in (CYGWIN_BINS): Add getconf.
	(getconf.c): New file.

2011-06-14  Christopher Faylor  <me.cygwin2011@@cgf.cx>

	* mingw: Force use of bash.

2011-05-29  Christopher Faylor  <me.cygwin2011@@cgf.cx>

	* ps.cc (ttynam): Accommodate new console numbering.
	(main): Ditto.

2011-05-03  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (print_locale_with_codeset): Align printing of locale names
	to POSIX.

2011-04-18  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (getaclentry): Allow extra colon in mask and other entries.

2011-04-12  Jon TURNEY  <jon.turney@@dronecode.org.uk>

        * utils.sgml (strace): Fix a pair of exchanged lines in usage text.

2011-04-04  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (main): Add the ability to specify a username for the -R
	command.
	* utils.sgml: Document the aforementioned change.

2011-02-29  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (cmd_set): Avoid a compiler warning.

2011-02-29  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (handle_unique_object_name): Avoid a compiler warning.
	(dump_sysinfo): Ditto.
	* loadlib.h (_load_sys_library): Mark as used, to avoid a compiler
	warning.
	* path.cc (oopt): Gurad with !FSTAB_ONLY to avoid a compiler warning.
	(read_flags): Ditto.

2011-02-28  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (strchrnul): Drop local implementation.

2011-02-15  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc: Fix copyright dates.

2011-01-10  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* cygcheck.cc (main): don't imply -d from -s option to cygcheck

2010-12-11  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (strchrnul): New function.
	(getaclentry): Rewrite.

2010-12-06  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (get_device_name): Fix path length test.

2010-10-30  Dmitry Potapov  <dpotapov@@gmail.com>

	* regtool.c (cmd_set): Write correct number of bytes for REG_MULTI_SZ
	case.

2010-09-06  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (RtlEqualUnicodePathPrefix): New helper function.
	(HARDDISK_PREFIX): Move.
	(GLOBALROOT_PREFIX): Define.
	(get_device_name): Take GLOBALROOT_PREFIX into account.
	Improve check for path to allow filesystem access via block devices.
	Potentially drop \\.\ prefix if resulting path is a valid DOS
	pathname.
	(do_pathconv): Make sure to drop \\?\ prefix only if path is
	actually a filesystem based path.
	(print_version): Fix copyright.

2010-08-28  Corinna Vinschen  <corinna@@vinschen.de>

	* ldh.cc (WinMain): Change DONT_RESOLVE_DLL_REFERENCES to
	LOAD_WITH_ALTERED_SEARCH_PATH.

2010-08-28  Corinna Vinschen  <corinna@@vinschen.de>

	* loadlib.h: New header implementing safe LoadLibrary calls.
	Include throughout files using LoadLibrary function.
	* cygcheck.cc (dump_sysinfo): Retrieve kernel32.dll handle via
	GetModuleHandle, rather than using LoadLibrary.
	* cygpath.cc (get_long_name): Ditto.
	(do_sysfolders): Append .dll suffix in LoadLibrary call.
	* ldh.cc (WinMain): Use LoadLibraryExW with DONT_RESOLVE_DLL_REFERENCES
	to avoid loading malicious library code.
	* locale.cc (print_locale_with_codeset): Change way to retrieve
	kernel32.dll path.

2010-08-26  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (get_device_name): Prefer the \\.\X: DOS device for
	harddisks, if available.

2010-08-21  Corinna Vinschen  <corinna@@vinschen.de>

	* ldd.cc (report): Drop long pathname considerations which result in
	invalid path, now that this is done in cygwin_conv_path.

2010-08-13  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (from_fstab): Fix potentially fatal typo.

2010-08-11  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (do_mount): Don't treat "bind" mount as remote mount.
	(mount_entries): Drop the "bind" option from output.
	* utils.sgml (mount): Match examples to actual mount output.  Add
	"bind" option and add example.

2010-08-10  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* mingw: Use sysroot, if present, for mingw_dir.

2010-07-21  Corinna Vinschen  <corinna@@vinschen.de>

	* dump_setup.cc (tfx_chars): New WCHAR array, copied from Cygwin.
	(transform_chars): New function, copied from Cygwin.
	(simple_nt_stat): New function to check file existance using native
	NT function.  Explain why.
	(directory_exists): Call simple_nt_stat.
	(file_exists): Ditto.

2010-07-05  Christopher Faylor  <me+cygwin@@cgf.cx>

	* ldd.cc: Clean up formatting throughout.
	(head): Move earlier.
	(saw_file): Ditto.
	(print_dlls): Reset head here.  Record seen dll names so they will
	not potentially be printed later.
	(process_file): Remove clearing of head here.

2010-07-05  Corinna Vinschen  <corinna@@vinschen.de>

	* dump_setup.cc (dump_file): Read requested content from setup.rc
	file created by newer setup.exe.

2010-06-29  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.sgml (locale): Change stray local cygdrive prefix to Cygwin's
	default.

2010-04-29  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.sgml (mount): Add description for "dos" and "ihash" mount
	options.

2010-04-29  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc: Include sys/cygwin.h if built for mount(1).
	(struct opt): Add "dos" and "ihash" options.
	(from_fstab_line): Call cygwin_internal rather than read_flags if
	built for mount(1).

2010-04-29  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (oopts): Remove entirely.
	(usage): Call cygwin_internal (CW_LST_MNT_OPTS) to create list of
	mount options.
	(print_version): Fix copyright date.
	(main): Replace option processing loop with single call to
	cygwin_internal (CW_CVT_MNT_OPTS).

2010-04-28  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (print_lc_xxx_charset): Remove.
	(enum type_t): Change according to the fact that nl_langinfo now returns
	all locale category values.
	(lc_ctype_names): Add new category members.  Redefine for exclusive
	nl_langinfo usage.
	(lc_numeric_names): Ditto.
	(lc_time_names): Ditto.
	(lc_collate_names): Ditto.
	(lc_monetary_names): Ditto.
	(lc_messages_names): Ditto.
	(print_lc): Change switch according to new type_t values.

2010-03-27  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (print_charmaps): Add EUC-CN and GB2312.

2010-03-24  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (find_key): Fix allocation size of "value".

2010-03-23  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (add_locale_alias_locales): Always use loc_num at function
	start to avoid confusing bsearch.

2010-03-23  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc: Revert accidental checkin of unfinished changes.

2010-03-23  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (print_locale_with_codeset): Drop redundant name parameter.
	Simplify creating locale string.  Add "@@" in case of a modifier.
	(print_locale): Drop name parameter in calls to
	print_locale_with_codeset.

2010-02-25  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* utils.sgml (kill): Add SIGIO, SIGCLD, and SIGPWR.

2010-02-25  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.sgml (locale): Change description of -a and -av to match
	latest changes.

2010-02-23  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (printlocale): Remove.
	(loc_t): New type to keep locale information for printing.
	(print_codeset): New function to print codeset as on Linux.
	(print_locale_with_codeset): New function to print single locale.
	Print verbose style as the Linux locale(1) tool.
	(print_locale): New function to print single locale plus its UTF-8
	variation, if available.
	(compare_locales): New helper function for bsearch and qsort on loc_t.
	(add_locale): New function to store locale in loc_t array.
	(add_locale_alias_locales): New function to store locales from
	locale.alias file in loc_t.
	(print_all_locales): Call add_locale instead of printlocale.
	Call add_locale_alias_locales, sort locales alphabetically and print
	them.

2010-02-22  Christopher Faylor  <me+cygwin@@cgf.cx>

	* strace.cc (mnemonic_table): Add "special" mask option.
	(usage): Document it.
	* utils.sgml: Ditto.

2010-02-22  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (do_pathconv): Fix erroneously printing native NT path
	prefix introduced by previous patch.

2010-02-22  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (lc_time_names): Add "date_fmt" entry.

2010-02-19  Christopher Faylor  <me+cygwin@@cgf.cx>

	* strace.cc (mnemonic_table): Add pthread mask option.
	(usage): Document strace pthread mask option.
	* utils.sgml: Ditto.

2010-02-19  Corinna Vinschen  <corinna@@vinschen.de>

	* locale.cc (print_lc_mstrings): New function to print
	semicolon-separated strings.
	(enum type_t): New type is_sepstrings_linf.
	(lc_time_names): Change type of era and alt_digits entry to
	is_sepstrings_linf.
	(print_lc): Add case for is_sepstrings_linf and call print_lc_mstrings
	in that case.

2010-02-17  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (CYGWIN_BINS): Rename getlocale to locale.
	* getlocale.c: Rename to ...
	* locale.cc: Revamp to add full functionality of POSIX locale(1) tool,
	as far as Cygwin supports it.
	* utils.sgml (getlocale): Move and rename to ...
	(locale): Accommodate new functionality.

2010-02-13  Ilguiz Latypov  <ilatypov@@infradead.org>

	* cygpath.cc (do_pathconv): Fix potential crash.

2010-02-11  Corinna Vinschen  <corinna@@vinschen.de>

	* getlocale.c (main): Rename local variable to avoid problems.
	Avoid string comparisons, rather test language and sublanguage codes
	wheere possible.  Add more code to handle Serbian language/territory
	state identical on all Windows versions.  Fix handling for "@@latin"
	modifier in Belarusian locale.
	* utils.sgml (getlocale): Try to make wording and example clearer.

2010-02-10  Corinna Vinschen  <corinna@@vinschen.de>

	* getlocale.c (usage): Change text slightly.

2010-02-10  Corinna Vinschen  <corinna@@vinschen.de>

	* getlocale.c (main): Restrict -a loop to avoid psudo language entries
	on Vista and later.

2010-02-10  Corinna Vinschen  <corinna@@vinschen.de>

	* getlocale.c (main): Revamp -a loop to avoid duplicates and to print
	locales with the correct, supported modifiers.

2010-01-25  Corinna Vinschen  <corinna@@vinschen.de>

	* getlocale.c (main): Use setlocale and fetch string from Windows
	using GetLocaleInfoW.  Explain why.

2010-01-22  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (CYGWIN_BINS): Add getlocale.
	* getlocale.c: New file.
	* utils.sgml (getlocale): New section describing new getlocale tool.

2010-01-16  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (get_mixed_name): Drop function.  Replace with call to
	convert_slashes throughout.
	(do_sysfolders): Free allocated buffer.
	(do_pathconv): Fix freeing last buffer.

2010-01-11  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (do_mount_from_fstab): Allow to change cygdrive prefix, too.

2010-01-07  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc: Throughout, free obsolete path buffers.

2010-01-07  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (main): Remove enforcing "en_US.UTF-8" locale.
	Revert usage of argz functions when reading input from file and
	simplify option usage.  Allow only one option argument and use
	the rest as filename argument to allow spaces in filenames.  Restrict
	processing special folder type options to one line.

2009-12-17  Christopher Faylor  <me+cygwin@@cgf.cx>

	* ps.cc (main): Return 0 if pid found.

2009-12-16  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc: Throughout, convert all registry calls to wide char
	calls and use string conversion according to current locale.
	(longopts): Change "dword-le" to "dword-be", as was originally
	intended.
	(usage): Change usage accordingly.
	(print_version): Simplify copyright dates in output.
	(cmd_list): Handle REG_LINK like REG_SZ.
	(cmd_get): Ditto.
	(main): Call setlocale.
	* utils.sgml (regtool): Fix options and add missing descriptions for
	new features.

2009-11-29  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (getaclentry): Allow to delete default entries for the
	owner and owner group.

2009-11-27  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Fix typo in products.

2009-11-11  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl.c (print_version): Fix copyright.
	(main): Don't reuse local variables confusingly.  Don't print any file
	information if acl() fails.  Improve error message.  Always print a
	trailing empty line.  Set return code to 2 if accessing some file fails.

2009-11-04  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc (read_mounts): Skip unnecessary test if path has been
	fetched from loaded cygwin1.dll.

2009-11-04  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (cygwin_dll_path): New global variable.
	(load_cygwin): Fetch cygwin DLL path and store in cygwin_dll_path.
	* strace.cc: Full ditto.
	* path.cc (read_mounts): First use the path stored in cygwin_dll_path,
	if available.  Then fall back to fetching own path.  Add comment.
	Drop printing warnings since they look funny in strace output.

2009-11-04  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc (read_mounts): First get installation path from own path.
	Check if cygwin1.dll exists in same directory.  Only if not, try to
	get installation path from setup registry key.  Add ample warnings.

2009-11-04  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (cygpath.exe): Add -fno-threadsafe-statics to CXXFLAGS.

2009-10-31  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc: Include cygprops.h.
	(del_orphaned_reg): New option variable.
	(unique_object_name_opt): Ditto.
	(handle_reg_installation): New function.
	(print_reg_installations): Ditto.
	(del_orphaned_reg_installations): Ditto.
	(memmem): Ditto.
	(handle_unique_object_name): Ditto.
	(dump_sysinfo): Call print_reg_installations from here.
	(usage): Add usage for new options --delete-orphaned-installation-keys,
	--enable-unique-object-names, --disable-unique-object-names, and
	--show-unique-object-names.
	(longopts): Add new options --delete-orphaned-installation-keys,
	--enable-unique-object-names, --disable-unique-object-names, and
	--show-unique-object-names.
	(main): Handle new options.
	* utils.sgml (cygcheck): Change documentaion accordingly.

2009-10-28  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (pretty_id): Drop arguments.  Don't change CYGWIN
	environment variable.
	(dump_sysinfo): Don't tweak CYGWIN environment variable, just call
	pretty_id once.

2009-10-20  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Update with latest NT 6.1 versions.

2009-10-15  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (get_special_folder): Fetch path as WCHAR and convert
	using my_wcstombs.
	(get_user_folder): Remove.
	(do_sysfolders): Use get_special_folder instead of get_user_folder.
	Fetch system paths as WCHAR and convert using my_wcstombs.

2009-10-12  Corinna Vinschen  <corinna@@vinschen.de>

	* kill.cc (main): Skip to PID loop on invalid option to handle
	negative pids there.

2009-08-11  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (enum_local_groups): Avoid error message if given group
	name isn't found and return 0 to allow searching to proceed.  Always
	return 0 or 1, not -1.
	(enum_groups): Avoid error message if given group name isn't found.
	* mkpasswd.c (enum_users): Ditto.

2009-08-10  Dave Korn  <dave.korn.cygwin@@gmail.com>

	* mingw: Add fallbacks to search for MinGW components in standard
	install locations if not found in compiler's $prefix.

2009-08-09  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (do_mount): Don't exit, just return.

2009-07-23  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Add missing "Server Foundation" to
	products array.

2009-07-22  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (do_mount): Replace --no-executable flag with notexec
	mount option in hint for remote filesystems.
	* path.cc (getmntent): Fix typo (noexec -> notexec).

2009-07-22  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (path-mount.o): Add a rule to build stripped down version
	of path.cc for usage in mount.
	(mount.exe): Add dependency to path-mount.o.
	* mount.cc (force): Convert to bool value.  Accommodate throughout.
	(from_fstab): New function.
	(do_mount_from_fstab): New function.
	(longopts): Add --all option.
	(opts): Add -a option.
	(usage): Document -a/--all option.
	(main): Handle -a option as well as single parameter.
	* path.cc: Add FSTAB_ONLY conditional to allow building path-mount.o.
	(mount_table): Remove static storage class.
	(max_mount_entry): Ditto.
	(root_here): Unused.  Remove.
	(from_fstab_line): Remove static.
	* path.h (struct mnt_t): Define here rather than in path.cc.
	(from_fstab_line): Declare.
	(mount_table): Declare.
	(max_mount_entry): Declare.
	* utils.sgml (mount): Document -a/--all option and mounting of single
	path from fstab files.

2009-07-15  Corinna Vinschen  <corinna@@vinschen.de>

	* strace.cc (main): Open trace output file in UNIX mode.

2009-07-13  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Remove "not yet supported" text.

2009-07-04  Christopher Faylor  <me+cygwin@@cgf.cx>

	* cygwin-console-helper.cc: New file.

2009-06-10  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc (oopts): Sort alphabetically, add missing "auto" and
	"override" entries.
	(from_fstab_line): Handle mount points same as Cygwin itself.  Use
	"cygdrive prefix" as posix name of cygdrive prefix.
	(from_fstab): Add auto entries for /usr/bin and /usr/lib.  Add
	MOUNT_AUTOMATIC and MOUNT_IMMUTABLE flags to default root dir entry.
	Use "cygdrive prefix" as posix name of default cygdrive prefix.
	(getmntent): Allocate smaller buffers.  Align output closer to output
	of mount(1).

2009-05-17  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (codepage): New variable.
	(long_options): Add --codepage option.
	(options): Add -C option.
	(usage): Add -C/--codepage description.
	(my_wcstombs): New function.  Use througout instead of wcstombs.
	(do_options): Handle -C/--codepage option.
	* utils.sgml (cygpath): Add description for new -C/--codepage option.

2009-05-16  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (cygpath.exe): Link against cygwin.a before linking
	against ntdll.dll to avoid linking symbols defined in both DLLs
	from ntdll.
	(ps.exe): Ditto.

2009-05-15  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (main): Only setlocale for LC_CTYPE category.  Fallback
	to UTF-8 if locale is "C".
	* ldd.cc (main): Ditto.
	* mkgroup.c (main): Ditto.
	* mkpasswd.c (main): Ditto.
	* passwd.c (main): Ditto.

2009-05-13  Corinna Vinschen  <corinna@@vinschen.de>
	    Christopher Faylor  <me+cygwin@@cgf.cx>

	* mount.cc (oopts): Sort.  Add override option.  Add dummy "auto"
	option for consistency.
	(mount_entries): Avoid adding auto-mounted entries to -m output.

	* utils.sgml: Sort mount options.  Add description of override option.

2009-05-11  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in: Link ps.exe agains ntdll.dll.
	* ps.cc (main): Enable SE_DEBUG_NAME privilege if Windows processes
	have to be enumerated.  Workaround EnumProcessModules problem when
	running under WOW64 and use NtQueryInformationProcess to fetch
	process image name.

2009-05-06  Corinna Vinschen  <corinna@@vinschen.de>

	* mkpasswd.c (current_user): Don't use HOMEDRIVE/HOMEPATH to generate
	user's homedir.

	* mkgroup.c: Accommodate ctype changes.
	* mkpasswd.c: Ditto.
	* setfacl.c: Ditto.
	* ssp.c: Ditto.

2009-05-04  Christopher Faylor  <me+cygwin@@cgf.cx>

	* cygcheck.cc (find_app_on_path): Avoid using NULL pointer if
	find_on_path doesn't find the app on the path.

2009-05-04  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (usage): Fix option order and print.

2009-04-22  Christopher Faylor  <me+cygwin@@cgf.cx>

	* strace.cc (create_child): Set CYGWIN=noglob when starting new process
	so that Cygwin will leave already-parsed the command line alonw.

2009-04-15  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (do_pathconv): Only skip \\?\ prefix if it's really
	given.  Do backslash to slash conversion for mixed paths after
	handling \\?\ prefix.

2009-04-13  Dave Korn  <dave.korn.cygwin@@gmail.com>

	* Makefile.in (dumper.exe):  Add -lz to ALL_LDFLAGS.

2009-04-07  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc (readlink): Accommodate new UTF-16 symlinks.

2009-04-03  Kevin Buettner  <kevinb@@redhat.com>

	* utils.sgml: Various syntactical and semantical fixes.
	* cygcheck.cc (usage): Fix --find-package explanation.

2009-03-26  Yaakov Selkowitz  <yselkowitz@@cygwin.com>

	* utils.sgml (passwd -R): Remove references to CYGWIN="server".

2009-03-24  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Fix compiler warning in printf.
	* strace.cc (proc_child): Ditto.
	* ldd.cc: Remove now useless undef wcscasecmp.

2009-03-23  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (usage): Change description for -d option according to
	previous change.
	(main): Fix typo.
	* utils.sgml: Add missing description for passwd -d option.

2009-03-23  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (caller_is_admin): New function to test if calling user
	is an administrator by inspecting user token.
	(main): Drop fetching caller info from logonserver.  Only fetch
	server from environment when trying to change password for own
	account.  Drop admin check entirely in case of doing account
	maintainance.  Otherwise replace check for admin by result of
	caller_is_admin call.

2009-03-22  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (main): Always get logonserver from environment and
	use when fetching user info for caller.

2009-03-22  Corinna Vinschen  <corinna@@vinschen.de>

	* ldd.cc: Fix compiler warning.

	* passwd.c: Use mbstowcs instead of MultiByteToWideChar throughout.
	(main): Call setlocale.  Fix a bug in fetching the logon server from
	the environment.

2009-03-18  Christopher Faylor  <me+cygwin@@cgf.cx>

	* ldh.cc: New file.

2009-03-17  Christopher Faylor  <me+cygwin@@cgf.cx>

	* ldd.cc (load_dll): Start helper program rather than ldd.exe.
	(set_entry_point_break): Rename from get_entry_point.
	(print_dlls): Rename from print_dlls_and_kill_inferior.  Avoid printing
	specific dll name if we're looking at a dll.
	(report): Always dump dlls on process exit.  Don't allow thread
	creation.  Accommodate get_entry_point rename.
	(start_process): Start process with DEBUG_ONLY_THIS_PROCESS.
	(longopts): Eliminate "dll" option.
	(main): Ditto.

2009-03-17  Corinna Vinschen  <corinna@@vinschen.de>
	    Christopher Faylor  <me+cygwin@@cgf.cx>

	* ldd.cc: Use wide character Win32 paths throughout.
	(load_dll): Fix size expression (add fn) in realloc.

2009-03-14  Christopher Faylor  <me+cygwin@@cgf.cx>

	* ldd.cc (longopts): Add --dll option.
	(get_module_filename): Generalized wrapper function which avoid path
	length restrictions.
	(load_dll): Handle special-case of inspecting a DLL.
	(start_process): Accept an output parameter "isdll".  Detect when file
	to start is a DLL and start a wrapper instead.
	(print_dlls_and_kill_inferior): When dealing with a DLL, avoid printing
	everything before the DLL itself first appears.  (This is not strictly
	correct and should be fixed eventually)
	(report): Deal with DLLs.  Don't set a breakpoint for DLLs, just let
	captive ldd process terminate normally.  Pass dll info to
	print_dlls_and_kill_inferior.
	(main): Handle special-case "--dll" option by loading the DLL and
	exiting.

2009-03-14  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc (from_fstab): Use wcstombs/mbstowcs instead of
	WideCharToMultiByte/MultiByteToWideChar to accommodate current locale.

2009-03-14  Corinna Vinschen  <corinna@@vinschen.de>

	* wide_path.h (class wide_path): New class to convert Windows path
	to WCHAR win32 path, including long path conversion if necessary.
	* cygcheck.cc: Use class wide_path throughout to call Win32 functions
	taking potentially long filenames.
	(display_error): Use snprintf rather than sprintf.
	(display_error_fmt): Ditto.
	(dump_sysinfo): Use FindFirstFileW/FindNextFileW.
	* cygpath.cc: Use class wide_path throughout to call Win32 functions
	taking potentially long filenames.
	(get_device_name): Raise buffer size to take long pathnames.
	(get_short_paths): Convert to using GetShortPathNameW.
	(get_short_name): Ditto.
	(get_long_path_name_w32impl): Convert to equivalent of GetLongPathNameW.
	(get_long_name): Convert to using GetLongPathNameW.
	(do_sysfolders): Raise buffer size for POSIX pathname to PATH_MAX.
	(do_pathconv): In case of POSIX->Win32 conversion, convert to wchar_t
	Win32 path name and drop long pathname prefix if possible.
	(main): Call setlocale to accommodate wide char/multibyte conversions.

2009-03-14  Christopher Faylor  <me+cygwin@@cgf.cx>

	* ldd.cc: Rework to detect missing DLLs.
	(start_process): Change to expect windows filename as input.
	(tocyg): New function - convert cygwin fn to windows fn.
	(print_dlls_and_kill_inferior): Accept extra argument denoting whether
	to open input and look for nonexistent DLLs.  Use tocyg to convert
	filename and pass it to start_process.
	(report): Flag when an DLL-not-found exception occurs and pass this
	information to print_dlls_and_kill_inferior.
	(filelist): New structure.
	(saw_file): New function.
	(dump_import_directory): Ditto.
	(map_file): Ditto.
	(skip_dos_stub): Ditto.
	(get_directory_index): Ditto.
	(process_file): Ditto.

2009-03-09  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.sgml: Fix typo.

2009-03-08  Christopher Faylor  <me+cygwin@@cgf.cx>

	* cygcheck.cc (usage): Fix typo.

2009-03-02  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.sgml: Set example prompt to "$" throughout.  Don't use "/"
	as example cygdrive prefix.  Remove reference to -u and -s options.
	Add an example using the -o flag.

2009-03-02  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (mount_entries): Handle a "/" cygdrive prefix correctly.
	Add comments.

2009-02-23  Sjors Gielen <mailinglist@@dazjorz.com>

	* Makefile.in: Add DESTDIR functionality.

2009-01-29  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Evaluate and print state of
	obcaseinsensitive kernel flag.

2009-01-21  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c: Remove CYGWIN=server requirement from usage text.

2009-01-17  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in: Fix copyright date.
	* cygcheck.cc (scan_registry): Take additional parameter and add code
	to avoid recursion in Wow6432Node subkey.  Rename variable cygnus to
	cygwin.  Scan for "Cygwin" instead of for "cygnus" substring.
	(dump_sysinfo): Drop unused calls to scan_registry.  Drop scanning
	HKEY_CURRENT_CONFIG.

2009-01-16  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Raise size of osname.  Add Windows 7
	and Windows 2008 R2 as recognized OSes.  Update products array to
	the latest documented list.

2009-01-09  Christopher Faylor  <me+cygwin@@cgf.cx>

	* ldd.cc: New file.  First stab at implementing ldd-like functionality
	for Cygwin.
	* Makefile.in (CYGWIN_BINS): Add ldd.
	(ldd.exe): Use -lpsapi.

2009-01-05  Pierre Humblet  <Pierre.Humblet@@ieee.org>

	* cygcheck.cc (dump_sysinfo_services): Quote the path for popen.

2008-12-30  Pierre Humblet  <Pierre.Humblet@@ieee.org>

	* cygcheck.cc (pretty_id): Quote the path for popen.
	(dump_sysinfo_services): Ditto.

2008-12-16  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.sgml: Fix typo in passwd screen text.

2008-12-15  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (main): Put how to delete the registry password on its own
	line in passwd -R output.

2008-12-13  Christopher Faylor  <me+cygwin@@cgf.cx>

	* utils.sgml: Convert some backslashes to slashes.

2008-11-26  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (longopts): Add --reg-store-pwd option.
	(opts): Add -R option.
	(usage): Add text for -R/--reg-store-pwd option.
	(main): Fix size of local user and password string arrays.
	Handle -R option.
	* utils.sgml: Add text for passwd -R/--reg-store-pwd option.

2008-10-29  Christopher Faylor  <me+cygwin@@cgf.cx>

	* Makefile.in (ALL_LDFLAGS): Link libgcc statically for everything
	here.

2008-10-12  Christopher Faylor  <me+cygwin@@cgf.cx>

	* mingw: Set sawcfile when -xc* is detected.  Extend list of detected
	source files.

2008-10-12  Christopher Faylor  <me+cygwin@@cgf.cx>

	* mingw: Add more checks to allow more varied use.

2008-10-11  Christopher Faylor  <me+cygwin@@cgf.cx>

	* mingw: Use a better method to find where mingw directory lives.

2008-10-11  Christopher Faylor  <me+cygwin@@cgf.cx>

	* mingw: New front-end script to control building of MinGW files
	without using the deprecated -mno-cygwin option.
	* Makefile.in: Use mingw front-end.

2008-09-12  Christopher Faylor  <me+cygwin@@cgf.cx>

	* cygcheck.cc (pathlike::check_existence): Remove class name from
	declaration.
	(display_internet_error): Use proper format specifier for DWORD.
	(environ): Remove unneeded declaration.
	(main): Use brace around nested if to avoid an overly-helpful compiler
	warning.
	* dump_setup.cc (parse_filename): Reorganize nested if to avoid an
	overly-helpful compiler warning.
	* path.cc (GUID_shortcut): Use braces around part of initializer which
	needs them.
	(conv_fstab_spaces): Parenthesize assignment in while loop to avoid a
	compiler warning.
	(struct opt): Make static.
	* ps.cc (main): Reorganize nested if to avoid an overly-helpful
	compiler warning.
	* regtool.cc: Make some anonymous structs static to avoid a compiler
	warning.
	* ssp.c (lookup_thread_id): Initialize *tix to zero to avoid potential
	uninitialized use.
	* strace.cc (add_child): Use proper format specifier for DWORD.
	(remove_child): Ditto.
	(proc_child): Ditto.

2008-08-27  Christopher Faylor  <me+cygwin@@cgf.cx>

	* cygcheck.cc (nuke): Use malloc rather than alloca for environment
	variables.
	(load_cygwin): Ditto.
	* dump_setup.cc (parse_filename): Cosmetic changes.
	(get_packages): Ditto.

2008-08-25  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (enum_local_groups): Don't skip printing groups when
	print_current is set and group SID is not curr_pgrp.
	(enum_groups): Ditto.
	(main): Fix condition when SYSTEM group gets printed.
	* mkpasswd.c (enum_users): Don't skip printing users when print_current
	is set and user SID is not curr_user.
	(main): Allow printing standard accounts even when print_current is set.

2008-08-18  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (enum_local_groups): Use NetLocalGroupGetInfo to find out
	if a group exists, rather than just allocating a buffer and going ahead.

2008-08-18  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (enum_local_groups): Call print_win_error with GetLastError
	as argument when LookupAccountXXX failed.
	(enum_groups): Ditto.

2008-08-18  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (enum_local_groups): Return failure if looking for a single
	group succeeded.  Add comment.

2008-08-18  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Keep correctly track of optional arguments.
	* mkpasswd.c (main): Ditto.

2008-08-18  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Always unset environment variable POSIXLY_CORRECT.
	Keep track of optional argumnts and fix up optind afterwards.
	* mkpasswd.c (main): Ditto.

2008-08-17  Christopher Faylor  <me+cygwin@@cgf.cx>

	* cygcheck.cc (print_version): Update copyright dates.

2008-08-17  Christopher Faylor  <me+cygwin@@cgf.cx>

	* mkpasswd.c (main): Avoid printing system accounts when a single user
	name has been requested.

2008-08-17  Christopher Faylor  <me+cygwin@@cgf.cx>

	* Makefile.in (ALL_LDFLAGS): Add --enable-auto-import option to quiet
	ld warnings.
	* mkgroup.c: Change all global variables and most functions to static.
	(enum_local_groups): Add a print_current parameter to control whether
	entries for everything should be printed or just the current user.
	(enum_groups): Ditto.
	(main): Move call fetch_current_pgrp_sid earlier to avoid a NULL
	deference when no command line arguments are specified.  Accommodate
	argument changes to above functions.  Avoid printing SYSTEM account
	when print_current is specified.  Issue error when extra stuff is found
	on the command line.
	* mkpasswd.c: Change all global variables and most functions to static.
	(enum_users): Add a print_current parameter to control whether entries
	for everything should be printed or just the current user.
	(main): Move call fetch_current_user_sid earlier to avoid a NULL
	deference when no command line arguments are specified.  Accommodate
	argument change to above function.  Avoid printing standard accounts
	when print_current is specified.  Issue error when extra stuff is found
	on the command line.

2008-08-15  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (fetch_current_pgrp_sid): New function to fetch primary
	group SID from user token.
	(current_group): Move up in file.  Move fetching primary group SID to
	fetch_current_pgrp_sid.
	(enum_local_groups): Check if current SID is the same as current user's
	primary group SID.
	(enum_groups): Ditto.
	(main): Call fetch_current_pgrp_sid before enumerating groups.  Call
	current_group only if current group hasn't been enumerated already.
	* mkpasswd.c (fetch_current_user_sid): New function to fetch current
	user SID from user token.
	(current_user): Move fetching current user SID to
	fetch_current_user_sid.
	(enum_users): Check if current SID is the same as current user's SID.
	(main): Call fetch_current_user_sid before enumerating users.  Call
	current_user only if current user hasn't been enumerated already.

2008-08-13  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (NT_MAX_PATH): Define.
	(longopts): Rename mount-commands option to mount-entries.
	(opts): Remove removed options.
	(struct opt): Move up in file to allow using it in usage.
	(usage): Change text for --mount-entries option.  Remove
	-X option.  Add valid options output.
	(main): Remove handling -b option.
	(convert_spaces): New static function to convert spaces to "\040"
	string.
	(mount_entries): Renamed from mount_commands.  Rewrite to emit
	/etc/fstab compatible output.
	(show_cygdrive_info): Print "nouser" rather than "system".
	* umount.cc (longopts): Remove remove-all-mounts,
	remove-cygdrive-prefix, remove-system-mounts, system and user options.
	(opts): Remove A, c, s, S, u options.
	(usage): Remove text for all removed options.
	(main): Remove handling for all removed options.
	(remove_all_mounts): Remove.
	(remove_all_system_mounts): Remove.
	(remove_cygdrive_prefix): Remove.
	* utils.sgml: Fix mount and umount documentation.  Move description
	of (cyg,not)exec options to mount table section.

2008-08-04  Christopher Faylor  <me+cygwin@@cgf.cx>

	* cygcheck.cc (load_cygwin): Duplicate argv list since it disappears
	when cygwin1.dll is unloaded.

2008-07-30  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* Makefile.in: Link cygcheck with -lntdll even without mingw-zlib.

2008-07-27  Christopher Faylor  <me+cygwin@@cgf.cx>

	* cygcheck.cc (load_cygwin): Free the cygwin dll after we're done with
	it.

2008-07-25  Christopher Faylor  <me+cygwin@@cgf.cx>

	* mount.cc: Remove non-unix-like options (-x,-t,b) throughout.
	(oopts): Use boolean constants for slightly increased clarity.

	* configure.in: Remove apparently unneeded program_transfer_name code.
	* configure: Regenerate.

2008-07-24  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.sgml: Remove useless text.

2008-07-23  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Fix test for duplicate domain/machine request.
	* mkpasswd.c (main): Ditto.

2008-07-23  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Rework to allow per-domain/per-machine id_offset.
	Add -b option to skip builtin groups.
	(main): Simplify code.
	* mkpasswd.c: Rework to allow per-domain/per-machine id_offset.
	(main): Simplify code.
	* utils.sgml: Explain changed mkgroup/mkpasswd -d/-D/-l/-L options.
	Add mkgroup -b option.

2008-07-23  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Consolidate variable names.
	(enum_unix_groups): New function.
	(print_special): Use LookupAccountSidW instead of LookupAccountSidA.
	(current_group): Ditto.
	(usage): Add -U option.
	(longopts): Add --unix option.
	(opts): Add -U option.
	(main): Handle -U option.  Call enum_unix_groups if set.
	* mkpasswd.c: Consolidate variable names.
	(current_user): Use LookupAccountSidW instead of LookupAccountSidA.
	(enum_unix_users): New function.
	(usage): Add -U option.
	(longopts): Add --unix option.
	(opts): Add -U option.
	(main): Handle -U option.  Call enum_unix_groups if set.
	* utils.sgml: Add -U option text to mkgroup and mkpasswd description.

2008-07-22  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (enum_groups): Create full qualified groupname using
	domain or servername, depending on printing domain or machine accounts.
	* mkpasswd.c (enum_users): Ditto for users.

2008-07-22  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Remove special root group code.  Only print
	SYSTEM group in case of printing local machine or local domain groups.

2008-07-22  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (cygcheck.exe): Link against ntdll.
	* bloda.cc: Use statically linked functions throughout.
	* cygpath.cc: Drop 9x considerations.
	* mkgroup.c: Revamp.  Redefine -l and -d options to take optional
	machine and domain parameters.  Redefine -c to work always, using
	token information.  Add -L, -D, -C to create unique groupnames in
	domain\group syntax.  Add -S option to define domain\group separator
	char.  Ignore -u and -s options.
	* mkpasswd.c: Revamp.  Redefine -l and -d options to take optional
	machine and domain parameters.  Redefine -c to work always, using
	token information.  Add -L, -D, -C to create unique usernames in
	domain\user syntax.  Add -S option to define domain\user separator
	char.  Ignore -g and -s options.  Prefer to take homedir from $HOME
	over $HOMEDRIVE/$HOMEPATH.
	* path.cc (oopts): Add "acl", "noacl", "posix=0" and "posix=1" options.
	(getmntent): Accomodate throughout.
	* ps.cc: Fix copyright dates.
	* utils.sgml: Fix text for mkgroup and mkpasswd.

2008-07-17  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (do_mount): Remove MOUNT_ENC code.
	(oopts): Remove "managed" option.
	(mount_commands): Drop "managed" handling.
	* path.cc (oopts): Remove "managed" option.
	(getmntent): Remove MOUNT_ENC code.

2008-07-17  Corinna Vinschen  <corinna@@vinschen.de>

	* utils.sgml: Add id's to all examples.

2008-07-09  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Use statically linked functions throughout, except for
	DsGetDcNameW.  Reformat.  Convert to use WCHAR for names throughout.
	Use defines instead of constants throughout.
	(MAX_SID_LEN): Define.
	(load_netapi): Just load DsGetDcNameW pointer.
	(psx_dir): Remove.
	(uni2ansi): Remove.
	(enum_local_users): Take server name and use in Net... call.
	(DBGSID): Define datastructure.
	(MAX_BUILTIN_SIDS): Define.
	(builtin_sid_list): Define global sid list.
	(builtin_sid_cnt): Define counter for global sid list.
	(enum_local_groups): Take server name and use in Net... and Lookup...
	calls.  Take offset argument.  Use MAX_PREFERRED_LENGTH in call to
	NetLocalGroupEnum.  Check for duplicate builtin groups.
	(enum_users): Take server name and use in Net... call.
	(usage): Change text slightly.
	(print_version): Fix copyright.
	(main): Call enum_local_groups for domains as well.
	* mkpasswd.c: Use statically linked functions throughout, except for
	DsGetDcNameW.  Reformat.  Convert to use WCHAR for names throughout.
	Use defines instead of constants throughout.
	(MAX_SID_LEN): Define.
	(load_netapi): Just load DsGetDcNameW pointer.
	(uni2ansi): Use wcstombs.
	(current_user): Replace "unused_by_nt/2000/xp" by
	just "unused".
	(enum_users): Ditto.
	(print_version): Fix copyright.

2008-05-22  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (setfacl): Change from void to int.  Return 2 in case of
	error.
	(main): Return with error code from setfacl.

2008-05-15  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (CYGWIN_BINS): Remove ipcrm and ipcs.
	* ipcrm.c: Remove.
	* ipcs.c: Remove.

2008-03-23  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (usage): Mark -s and -u as ignored.
	(print_version): Simplify printing copyright dates.
	(main): Remove default_flag.  Dont set flags on -s and -u options.
	(mount_commands): Drop handling -s and -u options.

2008-03-22  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Fix multiple Cygwin DLL test.
	* path.cc: Fetch mount points from fstab files instead of from
	registry.  Use adapted functions copied from Cygwin DLL.
	(mnt_t): Drop issys member.  Define as "mnt_t" instead of "struct mnt_t"
	subsequently.
	(max_mount_entry): New variable.
	(unconvert_slashes): Move to earlier location in file.  Make inline.
	(find2): Remove.
	(get_cygdrive0): Remove.
	(get_cygdrive): Remove.
	(skip_ws): New function.
	(find_ws): Ditto.
	(conv_fstab_spaces): Ditto.
	(read_flags): Ditto.
	(from_fstab_line): Ditto.
	(get_user): Ditto.
	(from_fstab): Ditto.
	(mnt_sort): Ditto.
	(read_mounts): Drop old registry code.  Fetch
	"Software\Cygwin\Setup\rootdir" value from HKCU or HKLM key.  Use
	rootdir extracted from module path as fallback.  Call from_fstab for
	nouser and user mount points.
	(setmntent): Check max_mount_entry to test if read_mounts must be
	called.
	(getmntent): Use MOUNT_SYSTEM flag instead of mnt_t's issys member.

2008-03-16  Brian Dessent  <brian@@dessent.net>

	* path.cc: Include malloc.h for alloca.
	(is_symlink): Rewrite.  Just read the whole file in memory rather
	than by parts.  Account for an ITEMIDLIST if present, as well as
	the new style of Cygwin shortcut supporting targets > MAX_PATH.

2008-03-12  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (do_sysfolders): Use cygwin_conv_path.
	(do_pathconv): Use cygwin_conv_path and cygwin_conv_path_list.
	* dumper.cc (main): Use cygwin_conv_path.  Allocate target path
	dynamically.
	* mkpasswd.c (current_user): Use cygwin_conv_path.
	(enum_users): Ditto.
	* ps.cc (NT_MAX_PATH): Define.
	(main): Use cygwin_conv_path.
	* regtool.cc (find_key): Ditto. Allocate target path dynamically.
	(cmd_save): Ditto.

2008-03-11  Brian Dessent  <brian@@dessent.net>

	* cygcheck.cc (find_app_on_path): Make buffer SYMLINK_MAX + 1
	chars.

2008-03-11  Brian Dessent  <brian@@dessent.net>

	* cygcheck.cc (dirname): New static function.
	(find_app_on_path): Use SYMLINK_MAX.  Resolve symlink relative
	to link's location.  Adjust to the fact that cygpath already
	normalizes its return value.
	* path.cc (rel_vconcat): Add cwd parameter, and use it instead
	of calling GetCurrentDirectory() if possible.  Rename throughout.
	(vcygpath): Rename from cygpath and accept cwd and va_list.  Pass
	cwd on to rel_vconcat().
	(cygpath_rel): New front end for vcygpath.
	(cygpath): Ditto.
	* path.h (cygpath_rel): Declare.
	(SYMLINK_MAX): Define to 4095.

2008-03-09  Brian Dessent  <brian@@dessent.net>

	* Makefile.in (install): Don't install the testsuite.

2008-03-08  Brian Dessent  <brian@@dessent.net>

	* Makefile.in: Add a 'check' target that builds and runs
	testsuite.exe from path-testsuite.o and testsuite.o.
	* path.cc: Include testsuite.h.
	(struct mnt): Change to a mnt_t typedef and don't define
	mount_table when TESTSUITE is defined.
	(find2): Don't include when TESTSUITE is defined to avoid warning.
	(get_cygdrive0): Ditto.
	(get_cygdrive): Ditto.
	(read_mounts): Provide empty implementation when TESTSUITE is
	defined.
	(vconcat): Use the isslash macro.
	(unconvert_slashes): New helper to convert to backslashses.
	(rel_vconcat): Handle relative paths more gracefully.
	(cygpath): Skip a leading "./" sequence.  Avoid double-slashes.
	Normalize final output to backslashes and remove redundant path
	sequences.
	* testsuite.cc: New file implementing testsuite driver.
	* testsuite.h: New header implementing harness mount table and
	series of tests.

2008-03-08  Brian Dessent  <brian@@dessent.net>

	* Makefile.in: Reorganize considerably, using GNU make's
	static pattern rules and target-specific variables.

2008-02-28  Corinna Vinschen  <corinna@@vinschen.de>

	* mkpasswd.c (main): Simplify generating SYSTEM entry.  Add entries
	for LocalService and NetworkService accounts.  Change comments.

2008-01-13  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Always try to get a OSVERSIONINFOEX
	first.  Load kernel32.dll earlier.  Make osname a buffer.  Simplify
	Non-NT code.  Use GetProductInfo in Vista/2008 case.  Clean up
	non-Vista version info.  Exit early if not on NT.

2007-12-29  Dave Korn  <dave.korn@@artimi.com>

	* bloda.cc (enum bad_app):  Add BYTEMOBILE.
	(dodgy_app_detects[]):  Add FILENAME entry to detect bmnet.dll.
	(big_list_of_dodgy_apps[]):  Add description for BYTEMOBILE.

2007-12-20  Brian Dessent  <brian@@dessent.net>

	* Makefile.in (cygcheck.exe): Don't link to ntdll.
	* bloda.cc (pNtQuerySystemInformation): Add.
	(pRtlAnsiStringToUnicodeString): Add.
	(get_process_list): Use function pointers for NT functions.
	(dump_dodgy_apps): Skip dodgy app check on non-NT platforms.
	Use GetProcAddress for NT-specific functions.

2007-12-07  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (opts): Add missing 'W'.

2007-12-06  Corinna Vinschen  <corinna@@vinschen.de>

	* ps.cc: Include limits.h.
	(main): Set file name buffer size to PATH_MAX.  Use progname or
	progname_long member of struct external_pinfo dependent of the value of
	the struct's version member.

2007-08-31  Dave Korn  <dave.korn@@artimi.com>

	* mkgroup.c (enum_groups):  Use MAX_PREFERRED_LENGTH in netgroupenum
	call so that it will automatically size returned buffer sufficiently.

2007-08-03  Dave Korn  <dave.korn@@artimi.com>

	* Makefile.in (cygcheck.exe):  Add bloda.o as prerequisite, adjusting
	dependency-filtering $(wordlist ...) call appropriately.  Link ntdll.
	(bloda.o):  New rule to build bloda.o
	* cygcheck.cc (dump_sysinfo):  Call bloda function dump_dodgy_apps().
	* bloda.cc:  New file implements detection of applications from the
	Big List Of Dodgy Apps.

2007-07-24  Corinna Vinschen  <corinna@@vinschen.de>

	* COPYING.dumper: New file.
	* dumper.cc: Change license to plain GPLv2 + later.
	* dumper.h: Ditto.
	* parse_pe.cc: Ditto.

2007-07-23  Christopher Faylor  <me+cygwin@@cgf.cx>

	* strace.cc (create_child): Don't convert a path from cygwin format
	unless it has a slash.

2007-07-09  Christopher Faylor  <me+cygwin@@cgf.cx>

	* strace.cc (usage): Add missing description for -q.

2007-07-09  Christopher Faylor  <me+cygwin@@cgf.cx>

	* Makefile.in (kill.exe): Remove reliance on libiberty.
	* kill.cc (strsigno): New function patterned after libiberty but using
	newly exported cygwin array.

2007-06-03  Christopher Faylor  <me+cygwin@@cgf.cx>

	* cygcheck.cc (pathlike): New class.
	(paths): Redefine as type pathlike.
	(display_error): Declare a few different ways to allow more flexible
	usage throughout.
	(display_error_fmt): New function for those cases where C++ just isn't
	enough.
	(add_path): Rewrite to allocate pathlike paths.  Always tack on a
	trailing slash since that's what everyone who uses it wants.  NULL
	terminate the path list.  Register "it's a system path" field.
	(init_path): Call add_path with info regarding whether path is a system
	path or not.
	(pathlike::check_existence): Move into pathlike class.  Accept file and
	extension arguments to build up path on the fly.  Modify other
	arguments.
	(find_on_path): Constify return value and appropriate arguments.
	Eliminate short-circuit for fully-qualified paths.  Simplify loop which
	iterates over path.
	(already_did): Constify argument.
	(track_down): Ditto.  Regularize some error messages.
	(find_app_on_path): Ditto.
	(cygcheck): Constify argument.  Use 20th century string handling
	functions.
	(dump_sysinfo): Remove odd inclusion of '\\bin' "Just in case".
	Accommodate change of paths to pathlike.
	* path.cc (isslash): Rename from SLASH_P and use throughout.
	(rel_vconcat): Front-end to vconcat which prepends cwd to path before
	passing along for conversion to native windows.
	(cygpath): Remove "./" test.  Call rel_vconcat if filename appears to
	be relative.

2007-05-29  Pedro Alves  <pedro_alves@@portugalmail.pt>

	* dumper.cc (dumper::prepare_core_dump): Record a phdr for each section.

2007-05-29  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (do_options): Allow outputflag combined with other
	basic flags.  Only check options_from_file_flag if reading options
	from command line.
	(main): Check for NULL argz vector.  Don't free argz vector prematurely.
	Don't force flag combination in !options_from_file_flag case.

2007-05-23  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc: Include argz.h.
	(options_from_file_flag): Move from main to global static variable.
	(mode_flag): Ditto.
	(do_sysfolders): Rename from dowin and accommodate throughout.
	Don't exit from here.
	(do_pathconv): Rename from doit and accommodate throughout.
	(print_version): Change copyright.
	(do_options): New function, centralizing option processing.
	Rework checking options for correctness.
	(action): New function, centralizing calling worker functions.
	(main): Simplify.  Move option processing to do_options.  Move calling
	worker functions to action.  Rework getting arguments from files.

2007-03-30  Mark Mitchell  <mark@@codesourcery.com>

	* utils/cygpath.cc (get_long_path_name_w32impl): Close handles returned
	by FindFirstFile.

2007-03-30  Christopher Faylor  <me@@cgf.cx>

	* mount.cc (main): Turn dos file warnings off since we know what we're
	doing.

2007-02-22  Corinna Vinschen  <corinna@@vinschen.de>

	* ipcs.c (_POSIX2_LINE_MAX): Drop definition.

2007-02-20  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Add "not supported" to osname on 9x
	machines.  Drop "not supported" for Vista.  Drop "Longhorn" text
	for now.

2007-01-09  Christian Franke  <franke@@computer.org>

	* cygpath.cc (usage): Add -O and -F, remove tabs.
	(get_special_folder): New function.
	(get_user_folder): New function.
	(dowin): Add -O and -F, better -D, -P error handling.
	(main): Add -O and -F.
	* utils.sgml (cygpath): Document -O and -F.

2006-12-21  Corinna Vinschen  <corinna@@vinschen.de>

	* dumper.cc: Include ansidecl.h before including bfd.h to woraround
	a problem with the order in which system include files are included.

2006-12-11  Christopher Faylor  <me@@cgf.cx>

	* dumper.cc: Add an include to accommodate new include/elf usage.

2006-12-10  Christopher Faylor  <me+cygwin@@cgf.cx>

	* mount.cc (do_mount): Avoid unnecessary cygwin_conv_to_win32_path and
	pass POSIX path directly - this avoids a cygwin DLL warning.

2006-10-21  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (key_type): Drop.
	(REG_AUTO): Define.
	(value_type): Replace key_type.  Use REG_xxx values directly.
	Accomodate change throughout.
	(longopts): Add --dword, --dword-le, --none, --qword and --hex options.
	(opts): Add -d, -D, -n, -Q and -x options.
	(types): Array to convert REG_xxx into strings.
	(hex): New variable to keep value of --hex option.
	(usage): Accomodate new options.  Print only the necessary by default.
	Only be verbose in case of -h/--help option.
	(cmd_list): Use key separator from -K option when printing.
	Print value type when verbose option is given.  Handle so far not
	handled REG_xxx types.
	(cmd_set): Avoid SEGV due to missing argument.  Handle so far not
	handled REG_xxx types.
	(cmd_get): Handle --binary option type agnostic.  Handle so far not
	handled REG_xxx types.
	(main): Handle new options.

2006-10-19  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (longopts): Add --wow32 option.
	(opts): Add -W option.
	(usage): Add text for --wow32/-W option.
	(main): Handle --wow32/-W option.
	* utils.sgml: Document the new -W option.

2006-10-16  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (KEY_WOW64_64KEY): Drop definition.  Instead define
	WINVER to 0x0502 before including windows.h.

2006-10-16  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (KEY_WOW64_64KEY): Define.
	(longopts): Add --wow64 option.
	(opts): Add -w option.
	(wow64): New variable to control usage of KEY_WOW64_64KEY access flag.
	(usage): Add text for --wow64/-w option.
	(print_version): Fix copyright.
	(find_key): Use wow64 value in calls to RegOpenKeyEx and RegCreateKeyEx.
	(cmd_add): Use wow64 value in call to RegCreateKeyEx.
	(regDeleteKeyEx): New function pointer to load RegDeleteKeyEx function
	dynamically.
	(cmd_remove): Load and use regDeleteKeyEx when wow64 is set.
	(main): Handle --wow64/-w option.
	* utils.sgml: Document the new -w option.

2006-10-05  Igor Peshansky  <pechtcha@@cs.nyu.edu>

	* cygcheck.cc (get_word, get_dword): Move to path.cc.
	(LINK_EXTENSION): New macro.
	(check_existence): New static function.
	(find_on_path): Check for symbolic links if asked.
	(dll_info): New error handling.
	(track_down): Only call dll_info() for executables, display
	an error for symlinks, and print magic number for others.
	(find_app_on_path): New static function.
	(cygcheck, dump_sysinfo): Call find_app_on_path() instead of
	find_on_path().
	* path.cc (cmp_shortcut_header): New static function.
	(get_word, get_dword): Moved from cygcheck.cc.
	(EXE_MAGIC, SHORTCUT_MAGIC, SYMLINK_COOKIE, SYMLINK_MAGIC): New
	macros.
	(is_exe, is_symlink, readlink): New functions.
	* path.h (is_exe, is_symlink, readlink): Declare.
	(get_word, get_dword): Ditto.

2006-09-12  Christopher Faylor  <cgf@@timesys.com>

	* Makefile.in: Fix -ntdll typo.

2006-09-11  Eric Blake  <ebb9@@byu.net>

	* cygcheck.cc (main): Restore POSIXLY_CORRECT before displaying user's
	environment.

2006-08-03  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc (vconcat): Don't convert backslahes to slashes.
	(cygpath): Return native path with all backslashes.

2006-08-02  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (cygpath.exe): Add rule to link cygpath against ntdll.dll.
	* cygpath.cc: Include DDK headers.
	(RtlAllocateUnicodeString): New static inline function.
	(get_device_name): New static function to evaluate DOS path from
	native NT path.
	(get_device_paths): New function to do the same for path lists.
	(doit): Call get_device_paths/get_device_name where appropriate.

2006-07-30  Ilya Bobir  <ilya@@po4ta.com>

	* cygpath.cc (get_long_name): Fallback to get_long_path_name_w32impl.

2006-07-27  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.c (get_long_name): Cover the case that GetLongPathName
	doesn't return valid information for non-existant files.  Just return
	incoming filename in that case.

2006-07-03  Kazuhiro Fujieda  <fujieda@@jaist.ac.jp>

	* Makefile.in: Build setmetamode.exe.
	* setmetamode.c: New file.

2006-05-24  Christopher Faylor  <cgf@@timesys.com>

	* configure.in: Update to newer autoconf.
	(thanks to Steve Ellcey)
	* configure: Regenerate.
	* aclocal.m4: New file.

2006-05-24  Christopher Faylor  <cgf@@timesys.com>

	* strace.cc (proc_child): Propagate return code from child process.
	(dostrace): Ditto.
	(main): Ditto.

2006-03-03  Christian Franke <franke@@computer.org>

	* regtool.cc (options): Add 'binary'.
	(usage): Document 'load|unload|save' and '-b'.
	(find_key): Add 'options' parameter, add load/unload.
	(cmd_set): Add KT_BINARY case.
	(cmd_get): Add hex output in KT_BINARY case.
	(cmd_load): New function.
	(cmd_unload): New function.
	(set_privilege): New function.
	(cmd_save): New function.
	(commands): Add load, unload and save.
	(main): Add '-b'
	* utils.sgml (regtool): Document it.

2006-02-17  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (get_long_name): Load GetLongPathNameA instead of incorrect
	GetLongPathName.
	(doit): Create mixed filename after converting to short or long pathname
	respectively.

2006-02-17  Jerry D. Hedden  <jerry@@hedden.us>

	* ps.cc (main): Set aflag if -p option is given.

2006-02-16  Jerry D. Hedden  <jerry@@hedden.us>

	* ps.cc (longopts): Add --process option.
	(opts): Add -p option.
	(usage): Mention -p/--process option.
	(main): Handle -p option.
	* utils.sgml: Describe -p/--process option.

2006-02-15  Igor Peshansky  <pechtcha@@cs.nyu.edu>

	* regtool.cc (usage): Clarify help for "-K".

2006-02-08  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (find_on_path): Update copyright text.

2006-02-08  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (find_on_path): Create copy of rv on successful access
	check, since rv can be reused in subsequent calls.

2006-01-19  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (common_paths): Add "patch".

2006-01-19  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (init_paths): Record first_nonsys_path.
	(find_on_path): Start on first nonsys path when !search_sysdirs.

2006-01-18  Christopher Faylor  <cgf@@timesys.com>

	* Makefile.in (sysconfdir): Remove unneeded variable.

	* mkgroup.c: Replace ` with ' throughout.
	* mkpasswd.c: Ditto.
	* setfacl.c: Ditto.
	* ssp.c: Ditto.

2006-01-18  Dave Korn  <dave.korn@@artimi.com>

	* cygpath.cc (dowin): Remove stray debugging printf statement.

2006-01-17  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in: Replace etcdir with sysconfdir.

2006-01-13  Brian Dessent  <brian@@dessent.net>

	* Makefile.in (cygcheck.exe): Do not link against libwininet.a.
	* cygcheck.cc (pInternetCloseHandle): Define global function pointer.
	(display_internet_error): Use it.
	(package_grep): Attempt to load wininet.dll at runtime.  Call WinInet
	API through function pointers throughout.

2006-01-13  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Convert k32 to HMODULE.

2006-01-13  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Convert osname to const and remove casts
	in subsequent assignments.  Recognize Longhorn/Vista and report as not
	yet supported.  Recognize when running under WOW64 and report native
	CPU type.  Slightly rearrange \n printing.

2006-01-12  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc: Replace ` with ' throughout.

2006-01-05  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (dump_sysinfo): Report the failing drive to prevent
	having to guess.

2005-12-29  Christopher Faylor  <cgf@@timesys.com>

	* strace.cc (nprocesses): Make static global.
	(quiet): New variable.
	(strace_active): Ditto.
	(add_child): Increment nprocesses here.  Don't add a child if it is
	already added (windows bug?).  Report on child if not quiet.
	(get_child): Just return NULL if child not found.
	(remove_child): Report on child if not quiet.
	(attach_process): Don't complain if given a windows process.  Use
	windows pid in error.
	(handle_output_debug_string): Issue error if trying to manipulate a process that we don't know about.
	Handle _STRACE_CHILD_PID - attach to reported child when we get this.
	(proc_child): Move nprocesses to file scope.
	Report on exceptions.
	(longopts): Implement "--quiet".
	(opts): Implement "-q".
	(main): Manipulate quiet flag.
	* utils.sgml (strace): Add words describing '-q'.

2005-12-29  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (common_apps): Add crontab, vi, vim.

2005-12-19  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* dump_setup.cc (package_find): Fix is_alias computation for "/usr/lib".

2005-12-14  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (common_apps): Add a few more binaries to look for.

2005-12-05  Christopher Faylor  <cgf@@timesys.com>

	* strace.cc (show_usecs): Renamed from 'usecs'.
	(main): Use show_usecs rather than usecs.  Toggle delta if '-u' is
	specified.
	(handle_output_debug_string): Avoid printing microsecond timestamp if
	show_usecs == 0.
	* utils.sgml (strace): Add words to describe '-u'.

2005-11-22  Brian Dessent  <brian@@dessent.net>

	* Makefile.in: Link cygcheck with libwininet.a.
	* cygcheck.cc: Add includes.
	(grep_packages): New global variable.
	(display_internet_error): New function.
	(safe_chars): New global variable.
	(base_url): Ditto.
	(package_grep): New function.
	(usage): Reword --help output for clarity.  Document new argument.
	(longopts): Add 'package-query' option.
	(opts): Add 'p' option, reorder to be consistent with 'longopts'.
	(main): Accommodate new option.
	* utils.sgml (cygcheck): Update --help output.  Document new -p option.

2005-09-22  Corinna Vinschen  <corinna@@vinschen.de>

	Align error message handling to mkpasswd's error messages throughout.
	* mkgroup.c (print_win_error): Create macro calling ...
	(_print_win_error): ... this function created from former
	print_win_error.  Move up in source.
	(PDOMAIN_CONTROLLER_INFOW): Define return type of DsGetDcNameW.
	(dsgetdcname): New function pointer for DsGetDcNameW.
	(load_netapi): Get DsGetDcNameW address.
	(main): If DsGetDcNameW is available, use it.
	* mkpasswd.c (PDOMAIN_CONTROLLER_INFOW): Define return type of
	DsGetDcNameW.
	(dsgetdcname): New function pointer for DsGetDcNameW.
	(load_netapi): Get DsGetDcNameW address.
	(main): If DsGetDcNameW is available, use it.  Rename local variable
	domain_name_specified to domain_specified as in mkgroup.c.

2005-09-08  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* regtool.cc: Extend copyright-years.
	(print_version): Ditto.
	(cmd_list): Don't depend on terminating '\0' being present on
	string-values.
	(cmd_get): Don't attempt to read more than present, but keep
	extra space for terminating '\0'. Really output REG_BINARY.
	Don't leak memory.
	(cmd_set): Include trailing '\0' in string's length.

2005-08-18  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (longopts): Add --logonserver option.
	(opts): Add -d option.
	(GetPW): Add server parameter which is given to Net functions.
	(ChangePW): Ditto.
	(PrintPW): Ditto.
	(SetModals): Ditto.
	(usage): Add description for -d/--logonserver option.
	(main): Add option handling for -d/--logonserver.  Use LOGONSERVER
	environment variable content for server to contact, unless
	-d/--logonserver option is given.  If both is missing, use NULL.

2005-08-16  Brian Dessent  <brian@@dessent.net>

	* cygcheck.cc (dump_sysinfo_services): Properly null-terminate 'buf'.
	Avoid extraneous cygrunsrv invocation if 'verbose' is true.

2005-08-03  Corinna Vinschen  <corinna@@vinschen.de>

	* mount.cc (longopts): Fix typo which disallows --options option.

2005-07-19  Christopher Faylor  <cgf@@timesys.com>
	    Eric Blake  <ebb9@@byu.net>

	* cygcheck.cc (find_on_path): Perform .exe magic on non-PATH search.

2005-07-05  Eric Blake  <ebb9@@byu.net>

	* cygcheck.cc (track_down, cygcheck): Return true on success.
	(main): Reflect cygcheck failures in exit status.

2005-06-14  Corinna Vinschen  <corinna@@vinschen.de>

	* parse_pe.c (exclusion::sort_and_check): Remove crude cast.

2005-05-30  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Recognize XP Media Center and Tablet PC
	Editions. Change .NET to 2003 throughout.  Recognize 2003 Web Server
	and Datacenter Server. Report when running in terminal server session.

2005-05-27  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (load_cygwin): Make half-hearted attempt to work with
	older DLLs.
	* strace.cc (load_cygwin): Ditto.

2005-05-22  Brian Dessent  <brian@@dessent.net>

	* cygcheck.cc (dump_sysinfo_services): Add new function that uses
	new cygrunsrv options to dump service info.
	(dump_sysinfo): Call dump_sysinfo_services if running under NT.
	Change 'Cygnus' to 'Cygwin' in output.

2005-05-20  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (load_cygwin): Remove debugging statement.

2005-05-20  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (dump_sysinfo): Don't attempt to use path if it is not
	set.
	(nuke): Fix off by one error in allocation of environment variable.
	(load_cygwin): Always set PATH even if cygwin environment is empty.

2005-05-16  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (cygwin_internal): Define as a "C" function.
	* strace.cc (cygwin_internal): Ditto.

	* cygpath.cc (print_version): Update copyright.

2005-05-15  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (load_cygwin): Avoid calling putenv with a NULL path.

2005-05-15  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (load_cygwin): Don't touch $PATH for now.
	(print_version): Fix copyright.
	* strace.cc (print_version): Ditto.

2005-05-13  Christopher Faylor  <cgf@@timesys.com>

	* mount.cc (mount_commands): Display "-X" option when appropriate.

2005-05-08  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (nuke): New function.
	(load_cygwin): New function.
	(main): Use load_cygwin to load argv/envp from cygwin environment, if
	appropriate.

2005-05-08  Christopher Faylor  <cgf@@timesys.com>

	* strace.cc (attach_process): Don't call load_cygwin().  Assume that
	it's already happened.
	(dotoggle): Ditto.
	(main): Set argv from cygwin environment, if it exists.

2005-05-01  Christopher Faylor  <cgf@@timesys.com>

	* mount.cc (usage): Clarify action of -m option.

2005-04-29  Dave Korn <dave.korn@@artimi.com>

	* path.cc (getmntent): Add previously-omitted 'noexec' and 'managed'
	flags to mnt_opts string if present in mount flags.

2005-04-20  Brian Dessent  <brian@@dessent.net>

	* utils.sgml (mount): Clarify setting cygdrive prefix for user
	and system-wide.

2005-03-24  Brian Dessent  <brian@@dessent.net>

	* cygcheck.cc (init_paths): Use full path instead of "." for the
	current directory.  Do not add "." if present in $PATH.
	(dump_sysinfo): Skip placeholder first value of paths[].

2005-03-07  Christopher Faylor  <cgf@@timesys.com>

	* kill.cc (getsig): Rectify bug introduced by 2005-02-26 change.  Don't
	pad signal name with spaces.

2005-03-07  Corinna Vinschen  <corinna@@vinschen.de>

	* strace.cc (handle_output_debug_string): Fix compiler warning.

2005-03-06  Christopher Faylor  <cgf@@timesys.com>

	* cygpath.cc (usage): Pass in one more copy of program_name to printf
	to avoid a SEGV.

2005-02-27  Christopher Faylor  <cgf@@timesys.com>

	* regtool.cc (opts): The argument to 'K' is not optional.
	(main): Revert previous change.  Just let getopt deal with missing
	argument.

2005-02-27  Christopher Faylor  <cgf@@timesys.com>

	* regtool.cc (main): Avoid a SEGV when nothing follows -K.

2005-02-26  Christopher Faylor  <cgf@@timesys.com>

	* kill.cc (getsig): Avoid buffer overflow when generating a signal name.

	* strace.cc (handle_output_debug_string): Make error a little more specific.

2005-02-23  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* cygpath.cc (usage): Clarify help output to indicate acceptance
	of multiple file names as arguments.

2005-01-16  Christopher Faylor  <cgf@@timesys.com>

	* ps.cc (main): Eliminate use of PID_ZOMBIE.
	* strace.cc (main): Recognize new option for displaying hex value of
	strace type.
	(handle_output_debug_string): Prepend output with hex value of strace
	message if -H is specified.

2005-01-11  Pierre Humblet <pierre.humblet@@ieee.org>

	* mkpasswd.c (print_win_error): Transform into macro.
	(_print_win_error): Upgrade former print_win_error by
	printing the line.
	(current_user): Call _print_win_error.
	(enum_users): Print name in case of lookup failure.
	(enum_local_groups): Ditto.

2004-11-18  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (eprintf): New function.

2004-11-16  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (find_on_path): Clear show_error and/or print_failed
	parameters to display_error.
	(rva_to_offset): Ditto.
	(dll_info): Ditto.
	(track_down): Ditto.

2004-11-13  Pierre Humblet <pierre.humblet@@ieee.org>

	* kill.cc (forcekill): Do not pass negative pids to
	cygwin_internal. Check if sig == 0. Improve error messages.
	(main): Make pid a long long and distinguish between pids, gpids
	(i.e. negative pids) and Win9x pids.

2004-11-11  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc: Change "keyeprint" to "display_error" throughout.

2004-11-11  Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (main): Allow a '-l' without an additional argument.

2004-11-11  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (keyeprint): New optional parameters: show_error and
	print_failed.

2004-10-31  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (get_dword): Fix errormessage.
	(cygwin_info): Ditto.
	(track_down): Ditto.
	(check_keys): Ditto.

2004-10-27  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (dump_sysinfo): Warn about missing or multiple cygwin1
	dlls.

2004-10-25  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (dump_sysinfo): Add leading newline before legend for
	drive-list.

2004-10-22  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (dump_sysinfo): In legend for drive-list: Add ``ram'' and
	``unk''.  Use single puts.  Add leading newline.  Line up equal-signs.

2004-10-20  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (dump_sysinfo): Allow for larger drives in drive-list.
	Change ``Used'' to ``Free'' in helptext-title for drive-list.

2004-10-18  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (pretty_id): Don't let i become negative. Fix
	printf-format.

2004-10-17  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (pretty_id): Allocate space for ')' in uid and guid.

2004-10-17  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>
	    Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (pretty_id): Allocate space for trailing '\0' in uid and
	guid.

2004-10-15  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>
	    Christopher Faylor  <cgf@@timesys.com>

	* cygcheck.cc (pretty_id): Don't exit on id error.  Fix size
	calculations.

2004-10-14  Christopher Faylor  <cgf@@timesys.com>
	    Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (pretty_id): Correct column calculations.  Abort if id is
	acting funny.

2004-10-10  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (add_path): Don't leak memory when path is already in
	``paths''.

2004-10-10  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (dump_sysinfo): Warn about trailing (back)slash on mount
	entries.

2004-10-10  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (dump_sysinfo): Don't warn about empty path components,
	just display ``.''.

2004-10-06  Corinna Vinschen  <corinna@@vinschen.de>

	* strace.cc (_impure_ptr): Remove.

2004-10-06  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (dump_sysinfo): Warn about empty path components.

2004-10-04  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (pretty_id): Close pipe.

2004-09-23  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* dump_setup.cc (dump_setup): Remove unneeded strlen when check_files
	is not set.

2004-09-22  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>
	    Corinna Vinschen  <corinna@@vinschen.de>

	* dump_setup.cc (dump_setup): Avoid trailing spaces on package-list.

2004-09-15  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* getfacl.c (main): Correct layout when nopt is set.

2004-07-12  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* mkgroup.cc (netapibufferallocate,netgroupgetinfo): New function
	pointers.
	(load_netapi): Load NetApiBufferAllocate and NetGroupGetInfo.
	(enum_local_groups,enum_groups): Add disp_groupname parameter.
	Load info for disp_groupname if specified.
	(usage): Add description of "-g/--group" option.
	(longopts,opts): Add "-g/--group" option.
	(main): Process "-g/--group" option.
	* utils.sgml (mkgroup): Add description of "-g/--group" option

2004-06-15  Alan Modra  <amodra@@bigpond.net.au>

	* dumper.cc (dumper::prepare_core_dump): Use bfd_get_section_size
	instead of _raw_size.
	(dumper::write_core_dump): Likewise.
	* parse_pe.cc (select_data_section): Likewise.

2004-05-29  John Paul Wallington  <jpw@@gnu.org>

	* ssp.c (usage): Add missing linefeed.

2004-05-27  Christopher Faylor  <cgf@@alum.bu.edu>

	* kill.cc (listsig): Fix "kill -l" segv.  NSIG includes Signal 0, so we
	need to avoid calling strtosigno with NSIG - 1.

2004-03-21  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (dump_sysinfo): Remove "Win95/NT" from output.

2004-03-15  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc (usage): Don't issue helpful message if -i is used.
	(from Igor Pechtchanski)

2004-03-13  Rob Siklos  <rob2@@siklos.ca>

	* kill.cc (get_debug_priv): New function.
	(forcekill): Call get_debug_priv before trying to kill process.

2004-02-24  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc (long_options): Add "mode" option.
	(options): Ditto.
	(usage): Report on new option.
	(report_mode): New function.
	(main): Implement -M option.

2004-02-20  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (build_dumper): Detect missing iconv library.

	* cygpath.cc (dowin): Report on filename conversion errors.
	(doit): Ditto.

	* strace.cc (main): Use symbolic constant for _STRACE_ALL when setting
	mask.

2004-02-14  Corinna Vinschen  <corinna@@vinschen.de>

	* ssp.c (opts): Add leading '+' to force posixly correct behaviour.

2004-02-11  Corinna Vinschen  <corinna@@vinschen.de>

	* strace.cc (opts): Add leading '+' to force posixly correct
	behaviour.
	(main): Revert POSIXLY_CORRECT manipulations.

2004-02-10  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (main): Guard against previous setting of POSIXLY_CORRECT.

2004-02-10  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc: Update copyrights.
	* cygcheck.cc: Update copyrights.

2004-02-10  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (main): Ensure POSIXLY_CORRECT argument ordering.
	* cygcheck.cc (main): Ditto.

2004-01-23  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (pretty_id): Make more robust in absence of id.exe.

2004-01-22  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (dowin): Revert accidental checkin from November.

2003-11-26  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Print "root" group with local admins group sid
	and gid 0.

2003-11-19  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in: Add rules to build ipcrm and ipcs.
	* ipcrm.c: New file.
	* ipcs.c: New file.

2003-11-14  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Avoid compiler warnings throughout.
	* mkpasswd.c: Ditto.
	* passwd.c: Ditto.

2003-11-07  Mark Blackburn  <marklist@@fangorn.ca>

	* cygpath.cc (main): Allow multiple pathnames on command line.

2003-11-04  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (PrintPW): Turn around meaning printed for "Password not
	required" option to be in line with Windows meaning.
	(main): Use more appropriate 1008 option when calling
	NetUserSetInfo to change flag values.

2003-11-04  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (UF_LOCKOUT): Remove (defined in lmaccess.h).
	(version): Bump version number to 1.5.
	(longopts): Add -c, -C, -e, -E, -p, -P options.
	(opts): Ditto.
	(PrintPW): Print values of UF_PASSWD_CANT_CHANGE and
	UF_DONT_EXPIRE_PASSWD flags. Slightly reformat output. Don't suppress
	correct system password settings just because the account has admin
	privileges.
	(usage): Define as "noreturn" function. Restructure and rephrase
	output. Accommodate new options.
	(print_version): Fix copyright dates.
	(main): Accommodate new options for setting UF_PASSWD_CANT_CHANGE,
	UF_DONT_EXPIRE_PASSWD and UF_PASSWD_NOTREQD settings.

2003-10-17  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (pretty_id): Don't exec if `id' program is not found.

2003-09-20  Christopher Faylor  <cgf@@redhat.com>

	* kill.cc (main): Allow negative pids (indicates process groups).

2003-09-17  Christopher Faylor  <cgf@@redhat.com>

	* parse_pe.cc (exclusion::sort_and_check): Make error message a little
	more explicit and ignore (hopefully) harmless region overlap.

2003-09-13  Christopher Faylor  <cgf@@redhat.com>

	* kill.c (forcekill): Wait for process to terminate even if
	TerminateProcess says it failed.

2003-09-11  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Tweak mingw libz.a detection to make it more reliably
	detect when libz.a is not available.

2003-09-11  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* cygcheck.cc (dump_only): New global variable.
	(usage): Add "--dump-only" option, fix "--verbose" line.
	(longopts, opts): Add "--dump-only" option.
	(main): Process the "--dump-only" flag.  Add new semantic check.
	Pass dump_only information to dump_setup().

2003-09-11  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl (main): Remove extern declaration of optind.
	* setfacl (main): Remove extern declaration of optarg and optind.

2003-09-10  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (cygcheck.o): Use MINGW_CXX for compilation.
	* cygcheck.cc: Just include <getopt.h> rather than cygwin version.
	(pretty_id): Avoid compiler warnings.
	* cygpath.cc (usage): Ditto.

2003-09-10  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (MINGW_CXX): Define and use for mingw-compiled files.
	* path.cc: Include more path info in cygwin-specific includes since the
	cygwin directory is no longer included by default.

2003-09-10  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: More fixups to adjust for the fact that mingw_getopt.o
	is no longer built.

2003-09-10  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Remove references to getopt since it is now part of
	mingwex.

2003-09-08  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Rename libz.h -> zlib.h.

2003-09-07  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Detect existence of mingw zlib headers and libraries.
	Build cygcheck without package checking if they are unavailable.
	* dump_setup.cc: Generate dummy zlib macros when zlib is not available.
	(open_package_list): Use zlib functions to uncompress package lists.
	Return gzFile rather than FILE *.
	(check_package_files): Change fp to gzFile to accommodate zlib
	functions.  Use gzgets to read from package file.  Use gzclose to close
	the handle.
	(package_list): Ditto.
	(package_find): Ditto.

2003-09-05  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* dump_setup.cc (check_package_files): Don't fail on empty package.

2003-09-01  AJ Reins  <reinsaj@@yahoo.com>

	* mount.cc (mount_commands): Ensure user mode is actually user mode and
	not the default system mode.

2003-08-31  Christopher Faylor  <cgf@@redhat.com>

	* kill.cc (forcekill): Silence some compiler warnings.

2003-08-31  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Oops.  Put the '...' in the right place.

2003-08-31  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Display "..." when not-verbose.

	* kill.cc (forcekill): Default to entered pid when pinfo fails.  Issue
	some warnings when things don't work.

2003-08-17  David Rothenberger  <daveroth@@acm.org>

	* dump_setup.cc (check_package_files): Strip leading / and ./ from
	package file names.

2003-08-16  David Rothenberger  <daveroth@@acm.org>

	* dump_setup.cc (package_find): Don't stop searching on missing
	file list.
	(package_list): Ditto.

2003-08-16  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* dump_setup.cc: (package_list): Make output terse unless
	verbose requested.  Fix formatting.
	(package_find): Ditto.

2003-08-15  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (main): Fix some formatting and help text printing.

2003-08-15  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* cygcheck.cc (find_package,list_package): New global
	variables.
	(usage): Add "--find-package" and "--list-package" options,
	reformat output.
	(longopts, opts): Add "--find-package" and "--list-package"
	options.
	(main): Process the "--find-package" and "--list-package"
	flags.  Add new semantic checks.  Add calls to find_package()
	and list_package().
	* dump_setup.cc: Fix header comment.
	(match_argv): Change return type to int to distinguish
	between real matches and default ones.
	(open_package_list): New static function.
	(check_package_files): Factor out opening the package list
	file into open_package_list().
	(get_packages): New static function.
	(dump_setup): Factor out getting a list of packages into
	get_packages().
	(package_list, package_find): New global functions.

2003-08-15  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (usage): Add missing linefeed.  Move example to --help
	text.  Fix forward slash description.

2003-08-13  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* dump_setup.cc (check_package_files): Fix extra '/' in filename.
	Resize command buffer.  Fix buffer overflow bug.

2003-08-09  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>
	    Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (dump_setup): Check for the existence of the package
	list file.  Rework slightly to use static buffer for popen commands.

2003-08-07  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>
	    Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (version_len): New static variable.
	(could_not_access,directory_exists): New static function.
	(file_exists): Ditto.
	(check_package_files): Ditto.
	(dump_setup): Check the contents of each package if check_files is true
	and output the result in the "Status" column.  Flush output after each
	package.

2003-08-07  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>
	    Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (dump_setup): Remove redundant null check.  Add
	informative message if package info not found.

2003-07-26  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (do_mount): Issue warning when using managed mount option on
	non-empty directory.

2003-07-25  Christopher Faylor  <cgf@@redhat.com>

	* configure.in: Use 'install-sh -c'.
	* configure: Regenerate.

2003-07-25  Christopher Faylor  <cgf@@redhat.com>

	* configure.in: Always use install-sh.
	* configure: Regenerate.

2003-07-03  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (struct opt): Remove posix option.

2003-07-03  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (longopts): Add long "options" keyword.
	(opts): Add -o option.
	(usage): Display -o option.
	(struct opt): New.
	(concat3): New function.
	(main): Handle -o flag.

2003-06-12  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (pretty_id): Rework slightly to not rely on spaces.

2003-06-12  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc: Throughout, always return error when GetShortPathName
	returns 0.

2003-04-26  Joshua Daniel Franklin <joshuadfranklin at yahoo dot com>

	* mkpasswd.c (usage) Remove extra newline from description output.

2003-04-26  Joshua Daniel Franklin <joshuadfranklin at yahoo dot com>

	* cygcheck.cc (usage) Add description output.
	* cygpath.cc (usage) Add description output.
	* dumper.cc (usage) Add newline to description output.
	* kill.cc (usage) Add description output.
	* mkgroup.c (usage) Grammatical change to description output.
	* mkpasswd.c (usage) Grammatical change to description output.
	* mount.cc (usage) Add description output.
	* passwd.c (usage) Add description output.
	* ps.cc (usage) Add description output.
	* regtool.cc (usage) Add description output.
	* setfacl.c (usage) Remove extra newline from description output.
	* ssp.c (usage) Add description output.
	* strace.cc (usage) Add description output.
	* umount.cc (usage) Add description output.

2003-04-10  Pierre Humblet  <pierre.humblet@@ieee.org>

	* mkpasswd.c (current_user): print uid and gid as unsigned.
	(enum_users): Ditto. Do not free servername.
	(usage): Update to allow several domains and improve -p.
	(main): On Win9x limit uids to 1000. Only print specials
	when -l is specified. Add a loop to allow several domains
	and free servername in the loop.
	* mkgroup.c (enum_groups): Do not free servername.
	(usage): Update to allow several domains. Change uid to gid.
	(main): Only print specials when -l is specified. Add a
	loop to allow several domains and free servername in the loop.

2003-03-24  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (dump_sysinfo): Ensure that CYGWIN environment variable
	is correctly set.

2003-03-09  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl.c (username): Fix ambiguous printf calls.
	(groupname): Ditto.
	(main): Ditto.

2003-03-04  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (strace.exe): Include mingw_getopt.o in link line.
	* cygcheck.cc (print_version): Update copyright.
	* strace.cc (print_version): Ditto.
	(main): Allow cygwin paths for -o option.
	(create_child): Allow cygwin path as argv[0].
	* path.cc (path.cc): Allow UNC paths.

2003-03-01  Pierre Humblet  <pierre.humblet@@ieee.org>

	* mkpasswd.cc (main): On Win95, output both a default line and a
	line for the current user (if known) with a pseudorandom uid. If
	the -u switch is given, produce a line for the specified user.
	* mkgroup.cc (main): On Win95 change the group name from "unknown" to
	"all".

2003-02-28  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (cygcheck.o): Fix so that actual mingw include files are
	used.
	* cygcheck.cc (find_on_path): Translate from cygwin path when qualified
	path name found.
	(pretty_id): New function.  Dump output of id command.
	(dump_sysinfo): Call pretty_id for CYGWIN=ntsec and CYGWIN=nontsec cases.

2003-02-12  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc (doit): Allocate more space for non-path filename.

2003-02-07  Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (compar): Use case insensitive comparisons.
	(dump_setup): Calculate package_len based on already used "len".  Don't
	bother with version_len.

2003-02-07  Igor Pechtchanski <pechtcha@@cs.nyu.edu>

	* dump_setup.cc (dump_setup): Compute the longest package name
	and align columns properly.

2003-02-06  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (common_apps): Add some more apps.
	* path.cc (get_cygdrive): Correctly set system flag.

2003-01-22  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (ALL_LDFLAGS): Remove newlib/libm from tools paths.
	(MINGW_LDFLAGS): Remove in favor of definition from Makefile.common.

2003-01-15  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Fix copyright date.
	* mkpasswd.c: Ditto.
	* setfacl.c: Ditto.

2003-01-09  Pierre Humblet  <pierre.humblet@@ieee.org>

	* setfacl.c (usage): Remove double ":" for mask and other.

2003-01-07  Pierre Humblet <pierre.humblet@@ieee.org>

	* mkpasswd.c (current_user): Create.
	(usage): Reorganize to support Win95/98/ME.
	(main): Add option for -c. Reorganize to parse options for
	Win95/98/ME and to call current_user. Add username in gecos field
	on Win95/98/ME.
	* mkgroup.c (enum_groups): Print gid with %u.
	(print_win_error): Create from passwd.cc.
	(current_group): Create.
	(usage): Reorganize to support Win95/98/ME.
	(main): Add option for -c. Reorganize to parse options for
	Win95/98/ME and to call current_group.

2002-12-14  Pierre Humblet <pierre.humblet@@ieee.org>

	* setfacl.c (main): Place a single : after other and mask.
	* getfacl.c (getaclentry): Allow both : and :: for other and mask.
	(main): Remove extraneous break.

2002-11-25  Corinna Vinschen  <corinna@@vinschen.de>

	* mkpasswd.c (main): Set pw_passwd field to '*' on 9x/Me.

2002-11-24  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (getperm): Set only `other' permission bits.
	(getaclentry): Set a_id to -1 by default.

2002-11-24  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl.c (permstr): Use `other' permission bits for requesting
	ace permissions.

2002-11-08  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (usage): Add missing LF.

2002-10-30  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc (get_long_path_name_w32impl): Define similarly to
	GetLongPathName.
	(get_long_name): Correctly prototype GetLongPathName.
	(get_long_paths): Implement using get_long_name to cut down on code
	duplication.
	(doit): Do various things to make path output work predictably.

2002-10-19  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (usage): Correctly report default mode.
	* strace.cc (main): Use strtoul as appropriate.

2002-09-29  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc (close_arg): Remove unused static.
	* mkgroup.c (enum_local_users): Avoid compiler warning.
	(enum_users): Ditto.
	* mkpasswd.c: Ditto throughout.
	* ssp.c: Ditto throughout.

2002-09-18  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Include sys/time.h rather than time.h to avoid a
	compiler error.

2002-09-17  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Reorder includes to avoid compiler error.

2002-09-15  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* cygcheck.cc (print_version) Add final newline.
	* getfacl.c (print_version) Add final newline.
	* kill.cc (print_version) Add final newline.
	* mkgroup.c (print_version) Add final newline.
	* mkpasswd.c (print_version) Add final newline.
	* mount.cc (print_version) Add final newline.
	* passwd.c (print_version) Add final newline.
	* ps.cc (print_version) Add final newline.
	* regtool.cc (print_version) Add final newline.
	* setfacl.c (print_version) Add final newline.
	* ssp.c (print_version) Add final newline.
	* strace.cc (print_version) Add final newline.
	* umount.cc (print_version) Add final newline.

2002-09-12  Igor Pechtchanski <pechtcha@@cs.nyu.edu>

	* cygpath.cc (options) New global variable.
	(main) Make short options global for easier change.
	(print_version) Add a missing newline.

2002-08-07  Igor Pechtchanski <pechtcha@@cs.nyu.edu>

	* regtool.cc (find_key): Add support for custom key separator.
	(usage): Document it.

2002-08-02  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Don't print an entry for "Everyone".
	* mkpasswd.c (print_special): Set pw_gid to 544 for SYSTEM user.
	(main): Don't print an entry for "Everyone".

2002-07-06  Christopher Faylor  <cgf@@redhat.com>

	* configure.in: Check for libiconv.a.
	* configure: Regenerate.
	* Makefile.in: Add libiconv.a to libraries required for dumper.exe.

2002-07-06  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Use MINGW stuff from Makefile.common.

2002-07-01  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Add function pointers for functions from advapi32.dll.
	(load_netapi): Load used functions from advapi32.dll.
	(main): Use function pointers instead of statically linked functions
	from advapi32.dll.

2002-07-01  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (main): Ensure that mount_already_exists() also gets default
	flag that is passed to do_mount.

2002-06-22  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* cygpath.cc (long_options): Add "dos" and "mixed", correct "close",
	"file" and "type" to use NULL flag.
	(usage): Clean up usage output (more), accomodate new options.
	(main): Add --dos and --mixed options; accomodate all output forms in
	--type.  Make UNIXy output default.

2002-06-18  Joshua Daniel Franklin  <joshuadfranklin@@yahoo.com>

	* cygpath.cc (usage): Clean up usage output.
	(dowin): Correct output of -t mixed for -ADHPSW options.

2002-06-14  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c: Rearrange includes to avoid unnecessary warnings.
	(GetPW): Add parameter to (dis)allow printing of Windows username.
	Use defines instead of numerical constants where possible.
	Try avoiding impersonation problem.  Rearrange to print Windows
	username only if it's different from Cygwin username.
	(ChangePW): Use defines instead of numerical constants where possible.
	(main): Call GetPW with additional parameter.  Change error text.

2002-06-14  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* passwd.c (GetPW): Handle case of user-edited /etc/passwd
	with cygwin_internal (CW_EXTRACT_DOMAIN_AND_USER, ...).

2002-06-09  Christopher Faylor  <cgf@@redhat.com>

	* path.cc (cygpath): Change MOUNT_AUTO to MOUNT_CYGDRIVE.
	(getmntent): Ditto.

2002-06-09  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (main): Use default system/user flag for cygdrive stuff,
	too.
	(change_cygdrive_prefix): Change MOUNT_AUTO to MOUNT_CYGDRIVE.
	* umount.cc (remove_cygdrive_prefix): Ditto.
	(main): Use default system/user flag for cygdrive stuff, too.

2002-06-08  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (opts): Remove '-i' option.
	(usage): Ditto.
	(main): Ditto.
	(longopts): Remove --import-old-mounts option.

2002-06-07  David Peterson  <chief@@mail.idrive.com>
	    Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc: Add option to output windows paths in different formats:
	"dos" and "mixed".
	(main): Process options.
	(doit): Check new options flags.

2002-06-06  Egor Duda <deo@@logos-m.ru>

	* regtool.cc (Fail): Be more verbose.
	(find_key): Add support for remote registry access.
	(usage): Document it.
	* utils.sgml: Document it.

2002-06-06  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (main): Make toggle a local variable.

2002-06-07  Conrad Scott  <conrad.scott@@dsl.pipex.com>

	* strace.cc (toggle): New global variable.
	(error): Use exit instead of ExitProcess so that stdio buffers get
	flushed.
	(create_child): Remove command line error checking.
	(dostrace): Ditto.
	(dotoggle): New function.
	(usage): Add entry for new option -T|--toggle.  Alphabetize.
	(longopts): Add new option -T|--toggle.
	(opts): Ditto.
	(main): Handle new -T|--toggle option.  Move all command line checking
	here from other functions.
	* utils.sgml: Update section for strace.

2002-06-05  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* strace.cc (version): New global variable.
	(usage): Accommodate stdout output.
	(print_version): New function.

2002-06-03  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* ssp.c (version): New global variable.
	(longopts): Ditto.
	(opts): Ditto.
	(run_program): Correct cmd_line typos to cmdline.
	(usage): New function.  Standardize usage output.  Add ssp.txt to
	--help output.
	(print_version): New function.
	(main): Accommodate getopt.

2002-06-03  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* umount.cc (version): New global variable.
	(longopts): Accommodate new --version option.
	(opts): Ditto.
	(usage): Standardize usage output.
	(print_version): New function.
	(main): Accommodate --help, --version options.

2002-06-02  Joshua Daniel Franklin  <joshuadfranklin@@yahoo.com>

	* regtool.cc (prog_name): New global variable.
	(longopts): Ditto.
	(opts): Ditto.
	(usage): Standardize usage output.  Rearrange/add descriptions.
	(print_version): New function.
	(main): Accommodate longopts and new --help, --version options.  Add
	check for (_argv[optind+1] == NULL).

2002-06-02  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (forkdebug): Make true by default.
	(attach_process): Use window pid if cygwin pid isn't available (yet).
	(create_child): Use either DEBUG_ONLY_THIS_PROCESS or DEBUG_PROCESS,
	exclusively. (Suggested by Conrad.Scott@@dsl.pipex.com)

2002-05-30  Christopher Faylor  <cgf@@redhat.com>

	* mkpasswd.cc (main): Don't reset to binmode if stdout is a terminal.

2002-05-29  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (main): Make -b the default.

2002-05-29  Corinna Vinschen  <corinna@@vinschen.de>

	* ps.cc (main): Use uid or uid32 member of struct external_pinfo
	dependent of the value of the struct's version member.

2002-05-29  Corinna Vinschen  <corinna@@vinschen.de>

	* ps.cc (main): Change print format for uid to unsigned.  Use uid32
	member of struct external_pinfo instead of uid.

2002-05-28  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* passwd.c (prog_name): New global variable.
	(longopts): Ditto.
	(opts): Ditto.
	(usage): Standardize output. Accommodate new options.
	(print_version): New function.
	(main): Accommodate longopts and new --help, --version options.

2002-05-28  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* ps.cc (usage): Fix typo.

2002-05-27  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* ps.cc (prog_name): New global variable.
	(longopts): Ditto.
	(opts): Ditto.
	(usage): New function.
	(print_version): New function.
	(main): Accommodate longopts and new --help, --version options.

2002-05-26  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (attach_process): Don't tell process to start stracing
	here.
	(proc_child): Do it here, instead, after first debug event.  This
	should work around inexplicable races with DebugActiveProcess.
	(dostrace): Pass any pid argument to proc_child.

2002-05-23  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* getfacl.c (usage): Standardize usage output. Change return type to
	static void.
	(print_version): New function.
	(longopts): Added longopts for all options.
	(main): Accommodate new help and version options.

2002-05-22  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* mount.cc (version): New global variable.
	(usage): Standardize usage output.  Accommodate new version option.
	(print_version): New function.
	(longopts): Accommodate new version option.
	(opts): Ditto.
	(main): Ditto.

2002-05-22  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (usage): Change usage output slightly.

2002-05-20  Joerg Schaible <joerg.schaible@@gmx.de>

	* cygpath.cc (main): Add option l to support conversion to
	Windows long file names.  Refactured code for capital options.
	Support of options from file for capital options.
	(dowin): New function.  Refactured from main.
	(doit): Call long path conversion.
	(get_long_name): New function.
	(get_long_paths): New function.
	(get_long_path_name_w32impl): New function.  Reimplementation
	of Windows API function GetLongPathName (only 98/Me/2000/XP or
	higher).
	(get_short_name): Call GetShortPathName only once.
	(get_short_paths): Fix calculating buffer size.
	* utils.sgml: Update cygpath section for l option.

2002-05-18  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (add_child): Use calloc since new requires working
	libstdc++.a.
	(remove_child): Ditto for delete/free.

2002-05-15  Mark Blackburn  <marklist@@fangorn.ca>

	* cygpath.cc (get_short_paths): Fix more error checking.
	(get_short_name): Ditto.

2002-05-14  Joerg Schaible <joerg.schaible@@gmx.de>

	* cygpath.cc (main): Add option H to show the Windows' profiles
	directory.  Support short names for options DPSW.  Clean up
	copied code lines.
	* utils.sgml: Update cygpath section for H option and s support.

2002-05-14  Mark Blackburn  <marklist@@fangorn.ca>

	* cygpath.cc (get_short_paths): Fix error checking.

2002-05-13  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* kill.cc (prog_name): New global variable.
	(usage): Standardize usage output.  Add descriptions.
	(print_version): New function.
	(longopts): Accommodate new version option.
	(opts): Ditto.
	(main): Ditto.

2002-05-13  Christopher Faylor  <cgf@@redhat.com>

	* kill.cc (listsig): Display numeric id when given symbolic input.

2002-05-13  Christopher Faylor  <cgf@@redhat.com>

	* kill.cc (usage): Show new options.  Allow specification of output
	stream.
	(main): Implement 'h' option.

2002-05-13  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (kill.exe): Add as a specific target.
	* kill.cc (longopts): New.
	(opts): Ditto.
	(get_sig): Accept const char * parameter.  Return -1 on unknown signal.
	(test_for_unknown_sig): New function.
	(listsig): New function.
	(main): Use getopt_long for option parsing.  Implement -l, and -s
	options.  Use test_for_unknown_sig() to test for signal validity.

	* mount.cc (longopts): Make static.
	(opts): Ditto.

2002-05-12  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (do_mount): Default to non-exec option for remote drives.
	Report warnings before attempting a mount.
	(longopts): Add no-executable option.
	(mount_commands): Ditto.
	(opts): Ditto.
	(usage): Ditto.  Indicate that system mount is now the default.
	(main): Accommodate no-executable option.  Make system mount the
	default.
	* umount.cc (usage): Indicate that system umount is now the default.
	(main): Make system umount the default.

2002-05-07  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* dumper.cc (usage): Standardize usage output.  Generalize to allow use
	for help.
	(longopts): New struct.  Added longopts for all options.
	(print_version): New function.
	(main): Change getopt to getopt_long.  Accommodate new help and version
	options.

2002-03-29  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Change call to exit() to a return statement.
	* mkpasswd.c (main): Ditto.

2002-03-27  Joshua Daniel Franklin  joshuadfranklin@@yahoo.com

	* mkpasswd.c (usage): Simplify usage output.  Generalize to allow use
	for help. Correct '?' typo to 'h'.
	(longopts): Add version option.
	(opts): Add 'v' version option.
	(print_version): New function.
	(main): Accommodate new version option.  Accommodate usage parameter
	changes.

2002-03-19  Christopher Faylor  <cgf@@redhat.com>

	* mkgroup.c (usage): Use one just fprintf + string concatenation for
	output message.
	(print_version): Add void to function type and update copyright.

2002-03-16  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* mkgroup.c (usage): Simplify usage output.  Generalize to allow use
	for help. Correct '?' typo to 'h'.
	(longopts): Add version option.
	(opts): Add 'v' version option.
	(print_version): New function.
	(main): Accommodate new version option.  Accommodate usage parameter
	changes.  Use usage to output help message.

2002-03-15  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): When generating group 513, check for computer's
	primary domain instead of current user's domain.

2002-03-14  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): When generating group 513, check for domain SID
	if computer name isn't mapped to a SID.

2001-03-11 Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* kill.cc (usage): Move to top of file.
	(getsig): Ditto.
	(forcekill): Ditto.

2002-03-06  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Reformat.

2002-03-06  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (longopts): Use correct short option for --version.

2002-03-06  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc: Reformat.

2002-02-27 Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* cygpath.cc (print_version): New function.
	(main): Accommodate new version function.  Initialize 'o' to prevent
	warning.

2002-02-27  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (main): Eliminate non-GNU formatting glitch.

2002-02-27  Christopher Faylor  <cgf@@redhat.com>

	* ssp.c (help_desk): Fix compiler warning.

2002-02-27  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>
	    Christopher Faylor  <cgf@@redhat.com>

	Change appropriate globals to statics throughout.
	* cygcheck.cc (usage): Simplify usage output.  Generalize to allow use
	for help.
	(longopts): Add version option.
	(opts): Add 'V" version option.
	(print_version): New function.
	(main): Accommodate new version option.  Accommodate usage parameter
	changes.  Use usage to output help message.

002-02-19  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (CXXFLAGS): Add override so that HAVE_DECL_GETOPT is
	defined.
	(libbfd): Use -B rather than -L so that bfd from build directory is
	correctly found.
	(libintl): Ditto.

2002-02-15  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (usage): Fix typo in output.

2002-02-14  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (attach_process): Change CW_STRACE_ON to CW_STRACE_TOGGLE.

2002-01-31  Corinna Vinschen  <corinna@@vinschen.de>

	* mkpasswd.c (main): Set default home path for 9x/Me if --path-to-home
	isn't given.

2002-01-30  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.cc (ChangePW): Add parameter to differ between called for
	checking old password and called for changing password.  If called
	for checking old password, return non-zero only if password is surely
	incorrect.
	(main): Call ChangePW() with additional parameter.

2002-01-29  Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (parse_filename): Don't consider '_' part of the
	version.

2002-01-28  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Fix typo.  Remove uid_t kludge.  Rely on kludge in
	sys/cygwin.h instead.
	* getfacl.c: Add include to remove warning.
	* mkgroup.c (main): Assign variables outside of parameter passing.
	This seems to eliminate some compiler warnings.

2002-01-28  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Use specific cygwin includes, as required.

2002-01-28  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (MINGW_INCLUDES): Change cygwin include.
	* strace.cc: Use specific cygwin includes, as required.
	(load_cygwin): New function.  Loads cygwin DLL, if necessary.
	(attach_process): Attaches strace to a running process.
	(dostrace): Accept pid argument.  Attach to pid if supplied.
	(usage): Describe -p option.  Correct system description.
	(longopts): Alphabetize.
	(opts): Ditto.
	(main): Ditto.  Handle -p option.

2002-01-21  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (CXXFLAGS): Ensure that important settings are preserved
	even when overriden by command line.

2002-01-21  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Build intermediate cygcheck.o to force use of MINGW_CXXFLAGS.
	* cygcheck.cc (cygwin_info): Intitialize variable to quiet g++ warning.
	(dump_sysinfo): Make variables unsigned to quiet g++ warnings.
	* strace.cc (version_string): Rename from SCCSid.
	(add_child): Remove unused variable.
	(version): Use version_string.  Avoid use of fprintf.

2002-01-21  DJ Delorie  <dj@@redhat.com>

	* Makefile.in: Use CXX instead of CC to compile C++ sources.

2002-01-17  DJ Delorie  <dj@@redhat.com>

	* cygcheck.cc (already_did): Avoid default constructors, which may
	require exception support.

2001-01-16  Joshua Daniel Franklin  <joshuadfranklin@@yahoo.com>

	* cygpath.cc (main): Add options to show Desktop and Start
	Menu's Programs directory for current user or all users.
	Move bulk of DPWS options outside the getopt case statement.
	* utils.sgml: Update cygpath section for ADPWS options.

2002-01-15  Joerg Schaible <joerg.schaible@@gmx.de>

	* cygpath.cc (doit): Empty file ignored using option -i.

2002-01-15  Mark Bradshaw  <bradshaw@@crosswalk.com>

	* mkpasswd.c (print_win_error): Add a new function.
	(enum_users): Use print_win_error.
	(enum_local_groups): Ditto.
	(main): Ditto.

2001-12-26  Jonathan Kamens  <jik@@curl.com>

	* cygpath.cc (doit): Detect and warn about an empty path.  Detect and
	warn about errors converting a path.
	(main): Set prog_name correctly -- don't leave an extra slash or
	backslash at the beginning of it.

Fri Dec 14 14:04:37 2001  Jason Tishler <jason@@tishler.net>

	* mkpasswd.c (enum_users): Change to unconditionally use
	the --path-to-home option, if supplied by the user.  Use default
	--path-to-home option value, if appropriate.
	(usage): Change usage statement to reflect new semantics.
	(main): Remove defaulting of the --path-to-home option.

Fri Dec 14 12:10:39 2001  Jason Tishler <jason@@tishler.net>

	* mkpasswd.c (opts): Add indication that '-p' option requires an
	argument.

2001-12-11  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Add define to CXXFLAGS.

2001-12-03  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (usage): Add -c description.
	* cygpath.cc (usage): Alphabetize options.
	* strace.cc (usage): Ditto.

2001-11-21  Christopher Faylor  <cgf@@redhat.com>

	* path.cc (cygpath): Don't consider cygdrive stuff when trying to derive
	native paths.

2001-11-20  Mark Bradshaw  <bradshaw@@staff.crosswalk.com>

	* mkpasswd.c: include lmerr.h
	(main): New -u option to allow specifying a
	specific user.  If specified, groups aren't displayed and
	output is limited to only the specified user.
	(enum_users): If specific user is specified, via -u option,
	display only that user's record.  With -u use NetUserGetInfo
	instead of NetUserEnum.
	(load_netapi): Added netusergetinfo.

2001-11-15  Gary R. Van Sickle  <g.r.vansickle@@worldnet.att.net>

	* strace.cc (main): Change getopt() to getopt_long().
	Add support for help and version info.
	Use new parse_mask() function for -m/--mask option.
	(longopts): Add long options structure.
	(opts): Move options string from getopts call to static var.
	(usage): Print usage information.
	(SCCSid): Version info.
	(version): New function for displaying version info.
	(parse_mask): New function supporting parsing of mnemonics,
	hex, and basic expressions in masks.
	(mnemonic2ul): New mnemonic parsing function.
	(tag_mask_mnemonic): New type.
	(mnemonic_table): New table of mnemonics for mnemonic2ul() to
	search through.

2001-11-12  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Redefine output format slightly.
	Print correct build number on 9x/ME systems.

2001-11-12  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (main): Slight formatting tweak.

2001-11-12  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Add some more details.

2001-11-12  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Print more detailed OS information string
	using OSVERSIONINFOEX information.

2001-11-11  Christopher Faylor  <cgf@@redhat.com>

	* path.h: New file.

2001-11-11  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (scan_registry): Open registry with read-only access.
	(main): Reflect argument change for dump_setup.
	* dump_setup.cc (dump_setup): Add preliminary extra argument for future
	use.
	* path.cc (read_mounts): Open registry with read-only access.

2001-11-11  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (main): Display package info when '-s' is specified.
	* dump_setup.cc (dump_setup): Change header.  Remove typo.  Always sort
	packages output.

2001-11-11  Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc: New file.
	* Makefile.in: Add info for dump_setup.o.
	* cygcheck.cc (main): Recognize '-c' option for checking setup
	installed base.
	* path.cc (cygpath): Read mount table if not loaded.

2001-11-10  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (cygcheck.exe): Compile as -mno-cygwin executable.
	* path.cc: New file.
	* cygcheck.cc (init_paths): Use MS-DOS path syntax.
	(cygwin_info): Properly display cygwin version numbers.  Prettify some
	output.
	(dump_sysinfo): Calculate max names of posix and ms-dos paths for
	prettier output.

2001-11-09  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Print more detailed OS information string.

2001-11-04  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl.c (username): New function.
	(groupname): Ditto.
	(usage): Ditto.  Add more user friendly help text.
	(main): Add -n and --help option.  Print names instead of IDs
	unless -n option is given.
	* setfacl.c (getperm): Tolerate whitespace and comment chars in input.
	(getaclentry): Fix several input string misdetections.
	(getaclentries): Allow - as input file name to read from stdin.
	Tolerate whitespace and comment chars in input.
	(usage): Add more user friendly help text.
	(main): Add --help option.

2001-11-04  Egor Duda  <deo@@logos-m.ru>

	* strace.cc (main): New option '-w'. Start traced process in separate
	window. New option '-S x'. Flush buffered output every x seconds.
	(create_child): Start child process in new window, when requested.
	When requested, periodically flush debugging output.

2001-10-24  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Remove EXEEXT consideration.  We always need .exe
	extensions.

2001-10-20  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Avoid compiler warnings.
	(print_special): New function.
	(main): Print special accounts by calling print_special().
	* mkpasswd.c: Avoid compiler warnings.
	(enum_users): Print additional U-domain\username info in gecos
	field when SIDs are printed.
	(print_special): New function.
	(main): Print special accounts by calling print_special().

2001-10-15  Christopher Faylor  <cgf@@redhat.com>

	* mkpasswd.cc (enum_users): Shorten "unused" passwd field.

2001-10-13  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Allow stdinc searching for dumper.

Tue Oct  9 21:59:00 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in (MINGW_INCLUDES): Accommodate changes in Makefile.common.

Sun Oct  7 23:06:39 2001  Christopher Faylor <cgf@@cygnus.com>

	* kill.cc (main): Set exit value to 1 on invalid pid.  Perform minor
	cleanup.

Fri Sep 21 20:40:30 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in (mingw_getopt.o): Ensure that newlib include directories
	are not searched.

Thu Sep 20 21:00:20 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in (MINGW_INCLUDES): Still need cygwin/include directory.

Wed Sep 19 12:22:08 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Filter newlib includes from mingw compilation.

2001-09-14  Egor Duda  <deo@@logos-m.ru>

	* dumper.cc (dumper::dumper): Print error code in case of error.
	(dumper::add_thread): Ditto.
	(dumper::collect_memory_sections): Ditto.
	(dumper::dump_memory_region): Ditto.
	(dumper::collect_process_information): Ditto.
	(print_section_name): Fix formatting.

2001-09-13  Egor Duda  <deo@@logos-m.ru>

	* dumper.cc (main): Properly recognize negative pids (used by w9x).

2001-09-09  Egor Duda  <deo@@logos-m.ru>

	* dumper.cc (main): Change command-line arguments format to be
	similar to gdb. Allow adding error_start=x:\path\to\dumper.exe to
	CYGWIN environment variable to perform core dumping in case of
	program crash.
	(usage): Ditto.

Wed Sep  5 22:37:21 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in (dumper): Change logic for libbfd and libintl so that
	they will be found either in the build tree or the installed directory.
	* mkpasswd.c (enum_users): Add a comment as a password for NT.

2001-09-03  Michael A Chase <mchase@@ix.netcom.com>

	* mount.cc (mount_commands): Don't write /cygdrive/u mount points.

2001-09-03  Michael A Chase <mchase@@ix.netcom.com>

	* mount.cc (longopts): Add mount-commands to options list.
	(usage): Add mount-commands option.
	(mount_commands): New function.  Write commands to recreate current
	mounts.

Sat Sep  1 15:58:11 2001  Christopher Faylor <cgf@@cygnus.com>

	* mount.cc (main): Eliminate excess arguments in printf.

2001-08-30  Egor Duda  <deo@@logos-m.ru>

	* dumper.h: Update copyright notice.
	* dumper.cc: Ditto.
	* dumper.cc: (dumper::print_core_section_list): New function.
	* dumper.h: (dumper::print_core_section_list): Declare it.
	* dumper.cc (print_section_name): New function.
	(dumper::collect_process_information): Augment debugging output.
	Stop debugee processing if it posts double exception.
	(usage): Fix typo in option name.

Tue Aug 28 14:45:02 2001  Christopher Faylor <cgf@@cygnus.com>

	* mount.cc (main): Issue correct warning for 'not enough arguments'.

2001-08-14  Joerg Schaible <joerg.schaible@@gmx.de>

	* cygpath.cc (main): Support -w for Windows (System) directories and
	return physical correct orthography for the Windows System dir.

2001-07-14   Chris Genly  <chgenly@@alum.mit.edu>

	* regtool.cc (find_key): Handle keys with only one subkey.

Wed Jun 27 22:46:10 2001  Christopher Faylor <cgf@@cygnus.com>

	* regtool.cc (find_key): Revert previous change.

Wed Jun 27 13:37:41 2001  Keith Starsmeare" <keith_starsmeare@@yahoo.co.uk>

	* regtool.cc (find_key): Allow '/' as a synonym for '\\'.

Fri Jun 15 00:49:21 2001  Christopher Faylor <cgf@@cygnus.com>

	* mkpasswd.c (main): Output passwd file in binary mode so that there
	are no CRs in the file.
	* umount.cc (remove_all_user_mounts): Don't try to remove /cygdrive
	mounts.

Tue May  1 10:50:48 2001  Christopher Faylor <cgf@@cygnus.com>

	* mkpasswd.c (enum_users): Use /bin/bash as the default shell.
	(main): Ditto.

Sat Apr 28 22:32:01 2001  Christopher Faylor <cgf@@cygnus.com>

	* passwd.cc (ttymnam): New function.
	(main): Use ttynam() to report name of tty.

2001-04-19  Egor Duda  <deo@@logos-m.ru>

	* dumper.cc (dumper::init_core_dump): Set architecture field in dump
	header.

Mon Apr 16 15:08:00 2001  Corinna Vinschen <vinschen@@redhat.com>

	* mkgroup.c: Add function pointers `netlocalgroupgetmembers' and
	`netgroupgetusers'.
	(load_netapi): Load function pointers `netlocalgroupgetmembers'
	and `netgroupgetusers'.
	(enum_local_users): New function.
	(enum_local_groups): Call `enum_local_users' for each group if
	`print_users' is set.
	(enum_users): New function.
	(enum_groups): Call `enum_users' for each group if `print_users' is set.
	(usage): Add usage text for `-u/--users'.
	(longopts): Add option `--users'.
	(opts): Add option character `u'.
	(main): Set `print_users' according to option `-u/--users'.
	Call `enum_local_groups' and `enum_groups' with additional parameter
	`print_users'.

2001-04-15  Michael A Chase <mchase@@ix.netcom.com>

	* mount.cc (longopts): Add help to options list.
	(opts): Add 'h' to options string.
	* umount.cc (longopts): Add help to options list.
	(opts): Add 'h' to options string and change 'R' to 'A'.

2001-04-13  Kazuhiro Fujieda  <fujieda@@jaist.ac.jp>

	* mkgroup.c (enum_groups): Use RID + offset specified an additional
	argument as ID.
	(usage): Add description of -o option.
	(longopts, opts): Add specifications of -o/--id-offset option.
	(main): Add -o option.  Invoke enum_groups with specified offset.
	* mkpasswd.c (enum_users): Just like mkgroup.c.
	(usage, longopts, opts): Ditto.
	(main): Add -o option.  Invoke enum_users with specified offset only
	against domain accounts.

2001-04-11  Egor Duda  <deo@@logos-m.ru>

	* mkgroup.c (uni2ansi): Use native method to convert from Unicode
	to multi-byte strings.
	* mkpasswd.c (uni2ansi): Ditto.
	(enum_users): Pass buffer size when converting string.
	(enum_local_groups): Ditto.
	* mkgroup.c (enum_groups): Ditto.
	(enum_local_groups): Ditto.

Mon Apr  2 22:41:33 2001  Christopher Faylor <cgf@@cygnus.com>

	* mount.cc (main): Use getopt_long for parsing arguments.
	(usage): Reformat, show long and short options.
	* umount.cc (main): Ditto, all of the above.

Mon Apr  2 10:58:26 2001  Christopher Faylor <cgf@@cygnus.com>

	* mount.cc (show_mounts): Change format string to more closely resemble
	UNIX when displaying mount table.

Sat Mar 17 21:46:06 2001  Christopher Faylor <cgf@@cygnus.com>

	* kill.cc (forcekill): Use dwProcessId when opening a process, not the
	Cygwin pid.

Mon Mar  5 18:50:00 2001  Corinna Vinschen <vinschen@@redhat.com>

	* getfacl.c: Add copyright hint.
	* setfacl.c: Ditto.
	* strace.cc: Ditto.

Tue Jan 09 10:26:23 2001  Tony Sideris  <tonys1110@@home.com>

	* regtool.cc (cmd_list): Add new registry display options.
	(cmd_list): Add code to implement -p, -k, and -l options.

	* regtool.cc (Fail): Add call to LocalFree to free memory allocated by
	FormatMessage.

Wed Jan 10 09:16:57 2001  Christopher Faylor <cgf@@cygnus.com>

	* regtool.cc (translate): Ensure that 'c' is initialized.
	(cmd_set): Ditto for rv.
@


1.653
log
@	* mkgroup.c (MAX_SID_LEN): Remove.  Instead, use SECURITY_MAX_SID_SIZE
	throughout.
	(enum_unix_groups): Introduce numeric_psid and rearrange code to avoid
	potential heap corruption.
	* mkpasswd.c: Ditto.
@
text
@d1 6
@


1.652
log
@* dump_setup.cc (check_package_files): Accommodate postinstall
files in any directory whose name contains "/postinstall/", not
just /etc/postinstall.
@
text
@d1 8
@


1.651
log
@	* regtool.cc (longopts): Add --force option.
	(opts): Add -f option.
	(restore_flags): New variable.
	(usage): Clarify working of save action.  Add restore action.  Add
	description for -f/--force option.
	(set_privilege): Drop function.  The Cygwin DLL is doing that anyway.
	(cmd_save): Drop call to set_privilege.
	(cmd_restore): New function.
	(main): Handle -f/--force option.
@
text
@d1 6
@


1.650
log
@	* setfacl.c (action_t): Add DeleteDef value.
	(delacl): Take new parameter to differe between DeleteAll and DeleteDef.
	Extend conditional to handle DefaultDef.  Change comment accordingly.
	(setfacl): Call delacl in DefaultDef case as well.
	(usage): Add and describe -k option.  Add -k to require options.
	(longopts): Add --remove-default option.
	(opts): Add -k option.
	(main): Handle -k option.
@
text
@d1 12
@


1.649
log
@	* tzmap-from-unicode.org: Create tzmap as const.
	* tzmap.h: Regenerate.
@
text
@d1 11
@


1.648
log
@	* Makefile.in: Add rules to create and depend on tzmap.h.
	* tzmap-from-unicode.org: New script to create tzmap.h.
	* tzmap.h: New auto-generated file.
	* tzset.c: Drop tzmap from here and include tzmap.h instead.  Drop
	Windows 2000 considerations.
@
text
@d1 5
@


1.647
log
@	* mkgroup.c (main): Call enum_local_groups with offset 0x30000 for local
	machine, too.
@
text
@d1 8
@


1.646
log
@	* mkgroup.c (main): Call enum_groups with offset 0x30000 for local
	machine, same as from DB.
	* mkpasswd.c (enum_unix_users): Set pw_passwd field to '*'.
	(enum_users): Ditto.
	(main): Call enum_users with offset of 0x30000 for local machine,
	same as from DB.
@
text
@d1 5
@


1.645
log
@	* passwd.c (GetPW): If server is NULL, and the user is not a local
	user, try to fetch the DC to use as server.
	(ChangePW): Get Windows username via extra parameter.
	(usage): Reduce -d help text to reflect above change.
	(main): Fix typo in comment.  Call GetPW and ChangePW as per the
	changes above.
@
text
@d1 9
@


1.644
log
@	* mkgroup.c (usage): Fix language.
	* mkpasswd.c (usage): Ditto.
@
text
@d1 9
@


1.643
log
@	* mkgroup.c (enum_unix_groups): Always print groupname with machine
	prefix.
	(usage): Extend help output for -l option.
	(main): Drop superfluous goto and label.  Make machine prefixing for
	local machine when using -l option dependend on options in
	/etc/nsswitch.conf.
	* mkpasswd.c: Ditto.
@
text
@d3 5
@


1.642
log
@	* cygcheck.cc (dump_sysinfo): Handle Windows 10/Server 2014(?).
@
text
@d1 10
@


1.641
log
@	* mkgroup.c (enum_local_groups): Don't generate leading separator char
	for builtin accounts.
@
text
@d1 4
@


1.640
log
@	* setfacl.c (setfacl): Fix bracketing in expression.
@
text
@d1 5
@


1.639
log
@	* setfacl.c (usage): Add -b to require options.
@
text
@d1 4
@


1.638
log
@	* setfacl.c (action_t): Add DeleteAll value.
	(delacl): New function to remove all ACL entries not representing POSIX
	permissions.
	(setfacl): Rearrange conditional expression into switch statement.
	Add DeleteAll case.
	(usage): Add and describe -b option.
	(longopts): Add --remove-all option.
	(opts): Add -b option.
	(main): Handle -b option.
@
text
@d3 4
@


1.637
log
@	* cygcheck.cc (CYGLSA64_DLL): Remove unused macro.
	(dump_sysinfo): If COMSPEC isn't set in the MSVCRT environment, set it.
	Explain why.
@
text
@d1 12
@


1.636
log
@	* setfacl.c (addmissing): New function to add missing acl entries to
	a modified acl per the rules set by aclcheck.
	(setfacl): Call addmissing unless action is Delete.
@
text
@d1 6
@


1.635
log
@	* setfacl.c (getaclentry): Fix previous fix again.  Allow lone 'm' as
	well as any lone default entry if action is Delete.  Fix comments.
	(usage): Align usage text.
@
text
@d3 6
@


1.634
log
@	* setfacl.c (getaclentry): Fix return value in case of a lone 'm' if
	action is Delete.  Drop requirement for a trailing colon if action is
	Delete.
@
text
@d3 6
@


1.633
log
@	* setfacl.c (usage): Drop outdated note that default ACEs are not
	taken into account.
@
text
@d1 6
@


1.632
log
@	* getfacl.c (usage): Add flags description.
	(main): Print suid/sgid/vtx flags if available.
@
text
@d3 5
@


1.631
log
@	* configure.ac: Convert to new AC_INIT style.
	* configure: Regenerate.
@
text
@d1 5
@


1.630
log
@	* utils.xml: Move to ../doc.
@
text
@d1 5
@


1.629
log
@	* passwd.c (usage): Rename DAYS to MINDAYS and MAXDAYS.
	* utils.xml (passwd): Ditto.
@
text
@d1 4
@


1.628
log
@Add missing utils.xml
@
text
@d1 5
@


1.627
log
@	* mkgroup.c (usage): Move info message that this /etc/group isn't really
	required anymore more to the top of the usage output.
	* mkpasswd.c (usage): Ditto for /etc/passwd.  Drop old text from output.
@
text
@d6 1
@


1.626
log
@* passwd.c (main): Fix typo in error output.
@
text
@d1 6
@


1.625
log
@	* minidumper.cc (filter_minidump_type): New function.
	(minidump): Change default dump type from MiniDumpNormal to
	something with more useful information without getting too
	big. Use filter_minidump_type() to filter out unsupported dump
	types.
@
text
@d1 4
@


1.624
log
@	* Makefile.in (minidumper.exe): Link directly with dbghelp.
	* minidumper.cc (minidump): Ditto.
@
text
@d3 8
@


1.623
log
@* minidumper.cc (minidump): Fix copy and paste error in checking
result of OpenProcess().
@
text
@d3 5
@


1.622
log
@Fix ChangeLog entry date.
@
text
@d1 5
@


1.621
log
@	* mkgroup.c (domlist_t): Drop id_offset.
	(get_dcname): Remove.
	(current_group): Remove.
	(enum_unix_groups): Simplify.  Change space to underscore in domain
	name.
	(enum_local_groups): Simplify to accommodate the fact that it's only
	called for foreign machines.
	(enum_groups): Ditto.
	(print_special_by_sid): Remove.
	(print_special_by_name): Remove.
	(usage): Align to new code.
	(fetch_primary_domain): Remove.
	(main): Use cygwin_internal CW_SETENT, CW_GETENT and CW_ENDENT method.
	Call enum_local_groups, enum_groups, and enum_unix_groups only for
	foreign machines.
	* mkpasswd.c (get_dcname): Remove.
	(current_user): Remove.
	(enum_unix_users): Simplify.  Change space to underscore in domain name.
	(enum_users): Simplify to accommodate the fact that it's only
	called for foreign machines.
	(print_special_by_sid): Remove.
	(usage): Align to new code.
	(longopts): Add -b/--no-builtin option.
	(opts): Add -b option.
	(print_special_by_name): Remove.
	(enum_std_accounts): Remove.
	(fetch_primary_domain): Remove.
	(main): Use cygwin_internal CW_SETENT, CW_GETENT and CW_ENDENT method.
	Call enum_users and enum_unix_users only for foreign machines.
	* utils.xml (mkgroup): Align documentation to new usage.
	(mkpasswd): Ditto.
@
text
@d1 1
a1 1
2013-11-24  Corinna Vinschen  <corinna@@vinschen.de>
@


1.620
log
@	* minidumper.cc (minidump): Fix -t option argument handling.
@
text
@d1 34
@


1.619
log
@2014-02-07  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc: New file.
	* Makefile.in (CYGWIN_BINS): Add minidumper.
	* utils.xml (minidumper): New section.
@
text
@d1 4
@


1.619.2.1
log
@* minidumper.cc (minidump): Fix -t option argument handling.
@
text
@a0 4
2014-02-23  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc (minidump): Fix -t option argument handling.

@


1.619.2.2
log
@2014-04-21  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc (filter_minidump_type): New function.
	(minidump): Change default dump type from MiniDumpNormal to
	something with more useful information without getting too
	big. Use filter_minidump_type() to filter out unsupported dump
	types.

2014-04-21  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* Makefile.in (minidumper.exe): Link directly with dbghelp.
	* minidumper.cc (minidump): Ditto.

2014-04-21  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc (minidump): Fix copy and paste error in checking
	result of OpenProcess().
@
text
@a0 18
2014-04-21  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc (filter_minidump_type): New function.
	(minidump): Change default dump type from MiniDumpNormal to
	something with more useful information without getting too
	big. Use filter_minidump_type() to filter out unsupported dump
	types.

2014-04-21  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* Makefile.in (minidumper.exe): Link directly with dbghelp.
	* minidumper.cc (minidump): Ditto.

2014-04-21  Jon TURNEY  <jon.turney@@dronecode.org.uk>

	* minidumper.cc (minidump): Fix copy and paste error in checking
	result of OpenProcess().

@


1.619.2.3
log
@* passwd.c (main): Fix typo in error output.
@
text
@a0 4
2014-06-16  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c (main): Fix typo in error output.

@


1.619.2.4
log
@2014-11-07  Corinna Vinschen  <corinna@@vinschen.de>

	* dcrt0.cc (cygwin__cxa_atexit): Fetch correct DSO handle value
	by searching dll list.  Explain why.

2014-11-06  Corinna Vinschen  <corinna@@vinschen.de>

	* dcrt0.cc (cygwin_atexit): Change preceeding comment to reflect
	API version numbers.
	* external.cc (cygwin_internal): disable setting cxx_malloc on 64 bit.
	Add CW_FIXED_ATEXIT case.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
	* include/sys/cygwin.h (cygwin_getinfo_types): Add CW_FIXED_ATEXIT.
	* lib/atexit.c (atexit): Test running Cygwin version by checking
	return value of cygwin_internal (CW_FIXED_ATEXIT).

2014-11-05  Corinna Vinschen  <corinna@@vinschen.de>

	* lib/atexit.c (atexit): Check for being linked into the executable.
	If so, call __cxa_atexit with NULL DSO handle.  Explain why.
	* lib/dso_handle.c: New file providing fallback __dso_handle.

2014-11-05  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (NEW_FUNCTIONS): Add atexit to be not exported.
	* lib/atexit.c (atexit): New, statically linkable version of atexit.
	* dcrt0.cc (cygwin_atexit): Add comment to mark this function as old
	entry point.  Indiscriminately check for DSO of function pointer for
	all functions, if checking for DSO of return address fails on x86_64.
	Change comment accordingly.

2014-11-05  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (NEW_FUNCTIONS): Define target-independent.  Add target
	dependent stuff afterwards.  Globally define timezone and all xdr
	symbols as non-exported from libcygwin.a.

2014-11-03  Corinna Vinschen  <corinna@@vinschen.de>

	* cygheap.cc: Fix formatting.

2014-10-29  Corinna Vinschen  <corinna@@vinschen.de>

	* cygheap.cc (init_cygheap::init_installation_root): Create content of
	installation_dir as non-prefixed path, if possible.

2014-10-29  Corinna Vinschen  <corinna@@vinschen.de>

	* common.din (__cxa_atexit): Define as cygwin__cxa_atexit.
	* dcrt0.cc (cygwin__cxa_atexit): New function.  Explain what we do.

2014-10-28  Corinna Vinschen  <corinna@@vinschen.de>

	* globals.cc (dos_file_warning): Set to false by default.
	* path.cc (warn_msdos): Make static.  Drop test for dos_file_warning.
	(path_conv::check): Check for dos_file_warning here to avoid a function
	call in the default case.

2014-10-27  Corinna Vinschen  <corinna@@vinschen.de>

	* dcrt0.cc (cygwin_atexit): Add workaround for broken atexit calls
	in __gcc_register_frame of DLLs built with gcc-4.8.3-3.

2014-10-27  Corinna Vinschen  <corinna@@vinschen.de>

	* cygheap.cc (init_cygheap::init_installation_root): Set
	installation_dir_len.
	* cygheap.h (struct init_cygheap): Add installation_dir_len member.
	* environ.cc (win_env::add_cache): Use stpcpy for speed.
	(posify_maybe): Use tmp_pathbuf buffer instead of stack.
	(raise_envblock): New function to resize Windows environment block.
	(build_env): Fix indentation.  Call raise_envblock function.  Check if
	$PATH exists and is non-empty.  If not, add PATH variable with Cygwin
	installation directory as content to Windows environment.  Explain why.

2014-10-24  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_proc.cc (format_proc_cygdrive): Fix symlink path if cygdrive
	is "/".

2014-10-24  Corinna Vinschen  <corinna@@vinschen.de>

	* gendef (sigdelayed): 64 bit only: Fix seh_pushreg statements in
	prologue.

2014-10-22  Yaakov Selkowitz  <yselkowi@@redhat.com>

	* common.din (stime): Export.
	* times.cc (stime): New function.
	* include/cygwin/time.h (stime): Declare.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.

2014-10-20  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_serial.cc: Revert debug code accidentally checked in on
	2014-08-18.

2014-10-20  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc (symlink_info::check): Set error from status code if opening
	the parent directory failed, but keep special case for root dirs.

2014-10-17  Corinna Vinschen  <corinna@@vinschen.de>

	* cygheap.cc (init_cygheap::init_installation_root): Just memmove
	contents of installation_root instead of calling GetModuleFileNameW
	again.  Copy installation_root to installation_dir before stripping of
	"bin" dir.  Explain what we do.
	* cygheap.h (struct init_cygheap): Add installation_dir member.

2014-10-17  Corinna Vinschen  <corinna@@vinschen.de>

	* cygtls.h (__try): Define __l_endtry as block-local label in 32 bit
	case as well.

2014-10-17  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (DLL_OFILES): Add quotactl.o.
	* common.din (quotactl): Export.
	* ntdll.h: Define FILE_FS_CONTROL_INFORMATION::FileSystemControlFlags
	flag values.
	(struct _FILE_FS_CONTROL_INFORMATION): Define.
	(struct _FILE_GET_QUOTA_INFORMATION): Define.
	(typedef struct _FILE_QUOTA_INFORMATION): Define.
	(NtQueryObject): Use PVOID rather than VOID*.
	(NtQueryVolumeInformationFile): Ditto.
	(NtQueryQuotaInformationFile): Declare.
	(NtSetQuotaInformationFile): Declare.
	(NtSetVolumeInformationFile): Declare.
	* quotactl.cc: New file implementing quotactl().
	* include/sys/mount.h (BLOCK_SIZE): Define.
	(BLOCK_SIZE_BITS): Define.
	* include/sys/quota.h: New header.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.

2014-10-16  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (DLL_OFILES): Rearrange with one file per line.

2014-10-16  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_proc.cc (format_proc_partitions): Extend output to print
	the windows mount points the device is mounted on.

2014-10-13  Corinna Vinschen  <corinna@@vinschen.de>

	* net.cc (cygwin_setsockopt): Drop redundant test for AF_LOCAL and
	SOCK_STREAM in SO_PEERCRED case, as in the original patch.

2014-10-12  Corinna Vinschen  <corinna@@vinschen.de>

	* dlfcn.cc (gfpod_helper): Only check for POSIX dir separator, same as
	in get_full_path_of_dll.

2014-10-12  Corinna Vinschen  <corinna@@vinschen.de>

	* dlfcn.cc (set_dl_error): Drop useless __stdcall.
	(check_path_access): Ditto.  Drop FE_CWD from call to find_exec.
	(gfpod_helper): Call path_conv::check for all paths containing a dir
	separator to more closely follow the Linux search algorithm.
	(get_full_path_of_dll): Drop useless __stdcall.
	(dlopen): Simplify RTLD_NOLOAD case by calling GetModuleHandleEx
	instead of GetModuleHandle/LoadLibrary.

2014-10-11  Christian Franke  <franke@@computer.org>

	Add setsockopt(sd, SOL_SOCKET, SO_PEERCRED, NULL, 0) to disable
	initial handshake on AF_LOCAL sockets.
	* fhandler.h (class fhandler_socket): Add no_getpeereid status flag.
	(fhandler_socket::af_local_set_no_getpeereid): New prototype.
	* fhandler_socket.cc (fhandler_socket::af_local_connect): Skip handshake
	if no_getpeereid is set.  Add debug output.
	(fhandler_socket::af_local_accept): Likewise.
	(fhandler_socket::af_local_set_no_getpeereid): New function.
	(fhandler_socket::af_local_copy): Copy no_getpeereid.
	(fhandler_socket::getpeereid): Fail if no_getpeereid is set.
	* net.cc (cygwin_setsockopt): Add SO_PEERCRED for AF_LOCAL/SOCK_STREAM
	sockets.  Add comment to explain why we need it.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.

2014-10-10  Corinna Vinschen  <corinna@@vinschen.de>

	* dlfcn.cc (dlopen): Disable old 32 bit code on 64 bit.
	* dcrt0.cc (check_sanity_and_sync): Ditto.
	* dll_init.cc (dll_dllcrt0_1): Fix typo in comment.

2014-10-08  Corinna Vinschen  <corinna@@vinschen.de>

	* common.din (ffsl): Export.
	(ffsll): Export.
	* syscalls.cc (ffs): Implement using GCC intrinsic.
	(ffsl): Ditto.
	(ffsll): Ditto.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.

2014-10-08  Christian Franke  <franke@@computer.org>

	* syscalls.cc (ffs): Fix crash of ffs (0x80000000) on 64 bit.

2014-10-08  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_process.cc (format_process_statm): Fix output of dirty
	pages.  Add linefeed.

2014-09-05  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_proc.cc (proc_tab): Add entry for cygdrive symlink.
	(format_proc_cygdrive): New function to implement /proc/cygdrive.

2014-09-05  Corinna Vinschen  <corinna@@vinschen.de>

	* exception.h (class exception): Remove unnecessary #ifdef.

2014-09-05  Corinna Vinschen  <corinna@@vinschen.de>

	* winlean.h (DNLEN): Raise to 31.  Explain why.

2014-08-28  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_disk_file.cc (fhandler_disk_file::fstatvfs): Try the
	FileFsSizeInformation information class on filesystems choking on
	FileFsFullSizeInformation (I see you Netapp!)

2014-08-27  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler.h (fhandler_pty_slave::fch_open_handles): Add bool parameter
	to declaration.
	* fhandler_tty.cc (fhandler_pty_slave::fch_open_handles): Add bool
	parameter "chown".  Only request WRITE_OWNER access when opening pty
	synchronization objects if "chown" is set.
	(fhandler_pty_slave::fchmod): Call fch_open_handles with new bool
	parameter set to false.
	(fhandler_pty_slave::fchown): Call fch_open_handles with new bool
	parameter set to true.
	* kernel32.cc (CreateFileMappingW): Fix default standard rights for
	file mappings from READ_CONTROL to STANDARD_RIGHTS_REQUIRED to allow
	changing the DACL (fixes "access denied" error in pinfo::set_acl).

	* fhandler_disk_file.cc (fhandler_base::fstat_helper): Change debug
	output to print mode bits in octal.
	* security.cc (alloc_sd): Ditto.
	(set_file_attribute): Ditto.

2014-08-27  Corinna Vinschen  <corinna@@vinschen.de>

	* ntea.cc (read_ea): Change left-over return to __leave.  Fix
	condition to close handle.  Call NtClose rather than CloseHandle.
	(write_ea): Fix condition to close handle.  Call NtClose rather than
	CloseHandle.
	* security.cc (get_file_sd): Call pc.init_reopen_attr if a valid
	incoming handle was given, pc.get_object_attr otherwise.
	(set_file_sd): Ditto.

2014-08-26  Corinna Vinschen  <corinna@@vinschen.de>

	* path.h (path_conv::init_reopen_attr): Change from void to returning
	POBJECT_ATTRIBUTES.  Take OBJECT_ATTRIBUTES reference as argument, not
	pointer.
	* fhandler_disk_file.cc: Throughout accommodate above change.
	* syscalls.cc: Ditto.
	* ntea.cc (read_ea): Don't set hdl to NULL if it's already NULL.  Set
	attr with pc.init_reopen_attr before trying to reopen file.
	(write_ea): Ditto.
	* security.cc (get_file_sd): Use pc.init_reopen_attr rather than
	pc.get_object_attr when trying to reopen file.
	(set_file_sd): Ditto.

2014-08-25  Corinna Vinschen  <corinna@@vinschen.de>

	* cygtls.cc (san::leave/x86_64): Implement.
	* cygtls.h (class tls_pathbuf): Move counter variables into a union.
	Add 64 bit element _counters covering both counter variables to
	optimize save and restore operations.
	(class san/x86_64): Only store single 64 bit value.
	(san::san/x86_64): Implement.
	(san::leave/x86_64): Only declare here, as returns_twice function.
	Explain why.
	(class san/i686): Change type of _c_cnt and _w_cnt to uint32_t.
	(__try/x86_64): Move definition of __sebastian after the first memory
	barrier.  Drop __sebastian.setup call.

2014-08-25  Corinna Vinschen  <corinna@@vinschen.de>

	* cygtls.cc (_cygtls::remove): Revert previous patch.
	*  cygtls.h (struct _local_storage): Move pathbufs back here.
	(class san/x86_64): Revert class.  Save and restore pathbufs counters
	only.
	(class san/i686): Revert saving and restoring pathbufs counters.
	(__try/x86_64): Add a san variable and call it's setup method.
	(__except/x86_64): Call san::leave to restore pathbufs counters.
	* gendef (_sigbe): Revert previous change.
	* thread.cc (verifyable_object_state): Remove gcc 4.7 workaround in
	forward declaration as well.
	* tls_pbuf.cc (tls_pbuf): Revert previous change.
	* tls_pbuf.h (class tmp_pathbuf): Accommodate reverting pathbufs to
	locals structure.
	* tlsoffsets.h: Regenerate.
	* tlsoffsets64.h: Regenerate.

2014-08-21  Corinna Vinschen  <corinna@@vinschen.de>

	* Throughout, use __try/__except/__endtry blocks, rather than myfault
	handler.
	* cygtls.cc (_cygtls::remove): Accommodate the fact that pathbufs
	has been moved from _local_storage to _cygtls.
	* cygtls.h (class tls_pathbuf): Add comment to hint to gendef usage
	of counters.  Change type of counters to uint32_t for clarity.
	Remove _cygtls as friend class.
	(struct _local_storage): Move pathbufs from here...
	(struct _cygtls): ...to here, allowing to access it from _sigbe.
	(class san): Only define on 32 bit.  Remove errno, _c_cnt and _w_cnt
	members.
	(san::setup): Drop parameter.  Don't initialize removed members.
	(san::leave): Don't set removed members.
	(class myfault): Only define on 32 bit.
	(myfault::faulted): Only keep implementation not taking any parameter.
	Drop argument in call to sebastian.setup.
	(__try/__leave/__except/__endtry): Implement to support real SEH.  For
	now stick to SJLJ on 32 bit.
	* dcrt0.cc (dll_crt0_0): Drop 64 bit call to
	exception::install_myfault_handler.
	* exception.h (exception_handler): Define with EXCEPTION_DISPOSITION
	as return type.
	(PDISPATCHER_CONTEXT): Define as void * on 32 bit.  Define as pointer
	to _DISPATCHER_CONTEXT on 64 bit.
	(class exception): Define separately for 32 and 64 bit.
	(exception::myfault): Add handler for myfault SEH handling on 64 bit.
	(exception::exception): Fix mangled method name to account for change
	in type of last parameter.
	(exception::install_myfault_handler): Remove.
	* exceptions.cc (exception::myfault_handle): Remove.
	(exception::myfault): New SEH handler for 64 bit.
	* gendef (_sigbe): Set tls_pathbuf counters to 0 explicitely when
	returning to the caller.
	* ntdll.h: Move a comment to a better place.
	(struct _SCOPE_TABLE): Define on 64 bit.
	* thread.cc (verifyable_object_isvalid): Remove gcc 4.7 workaround.
	* tls_pbuf.cc (tls_pbuf): Fix to accommodate new place of pathbufs.
	(tls_pathbuf::destroy): Change type of loop variables to uint32_t.
	* tls_pbuf.h (class tmp_pathbuf): Change type of buffer counters to
	uint32_t.  Accommodate new place of pathbufs.
	* tlsoffsets.h: Regenerate.
	* tlsoffsets64.h: Regenerate.

2014-08-21  Corinna Vinschen  <corinna@@vinschen.de>

	* miscfuncs.cc (__import_address): Cover the first dereference to imp
	under the fault handler.

2014-08-21  Corinna Vinschen  <corinna@@vinschen.de>

	* net.cc (if_freenameindex): Don't catch a SEGV from free to fail
	loudly on double free.

2014-08-21  Corinna Vinschen  <corinna@@vinschen.de>

	* dir.cc (rmdir): Don't skip deleting fh in the ENOTEMPTY case.

2014-08-20  Corinna Vinschen  <corinna@@vinschen.de>

	* tls_pbuf.h (tmp_pathbuf::tmp_pathbuf): Convert to inline method.
	(tmp_pathbuf::~tmp_pathbuf): Ditto.
	* tls_pbuf.cc (tmp_pathbuf::tmp_pathbuf): Remove here.
	(tmp_pathbuf::~tmp_pathbuf): Ditto.

2014-08-19  Corinna Vinschen  <corinna@@vinschen.de>

	* dir.cc (dirfd): Per POSIX, return EINVAL on invalid directory stream.
	(telldir): Per POSIX, return -1 and set errno to EBADF, rather than
	just returning 0, on invalid directory stream.
	* signal.cc (sigwaitinfo): Return -1, not EFAULT, when SEGV was catched.

2014-08-19  Corinna Vinschen  <corinna@@vinschen.de>

	* autoload.cc: Replace WNet[...]A with WNet[...]W imports.
	* dcrt0.cc (initial_env): Drop strlwr calls.  Call strcasestr instead.
	* fhandler_netdrive.cc: Throughout, convert to calling WNet UNICODE
	functions.  Use tmp_pathbuf rather than alloca.  Replace call to
	strlwr with call to RtlDowncaseUnicodeString.

2014-08-19  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler.h (fhandler_serial::is_tty): Reinstantiate.

2014-08-18  Corinna Vinschen  <corinna@@vinschen.de>

	* miscfuncs.cc (strlwr): Rename from cygwin_strlwr.  Drop __stdcall
	decoration.
	(strupr): Rename from cygwin_strupr.  Drop __stdcall decoration.
	* string.h (strlwr): Remove override macro.  Simply declare.
	(strupr): Ditto.

2014-08-18  Corinna Vinschen  <corinna@@vinschen.de>

	* dtable.cc (dtable::init_std_file_from_handle): Mention that console
	handles are kernel objects since Windows 8.
	* fhandler.h (enum conn_state): Add "listener" state.
	(class fhandler_socket): Drop listener status flag.
	(fhandler_socket::lseek): Return -1 and errno ESPIPE.
	(fhandler_serial::lseek): Ditto.
	(fhandler_serial::is_tty): Remove.
	* fhandler_socket.cc (fhandler_socket::listen): Set connect_state to
	listener.  Add comment.
	(fhandler_socket::accept4): Explicitely check if the socket is listening
	and fail with EINVAL, if not.  Explain why we have to do that.
	(fhandler_socket::getpeereid): Drop now redundant test.

2014-08-15  Corinna Vinschen  <corinna@@vinschen.de>

	* winsup.h (_GNU_SOURCE): Define.  Explain why.

2014-08-14  Corinna Vinschen  <corinna@@vinschen.de>

	* dlmalloc.c: Remove unused file.
	* dlmalloc.h: Ditto.
	* malloc.cc: Update to Doug Lea's malloc version 2.8.6.

2014-08-13  Corinna Vinschen  <corinna@@vinschen.de>

	* include/cygwin/version.h (CYGWIN_VERSION_DLL_MINOR): Bump to 33.
	(CYGWIN_VERSION_API_MINOR): Bump to reflect intermediate 1.7.32 release.

2014-07-21  Corinna Vinschen  <corinna@@vinschen.de>

	* include/cygwin/version.h (CYGWIN_VERSION_DLL_MINOR): Bump to 32.

2014-05-06  Corinna Vinschen  <corinna@@vinschen.de>

	* winlean.h (PIPE_REJECT_REMOTE_CLIENTS): Drop temporary definition
	since Mingw64 catched up.
	(DNLEN): Redefine as 16.  Explain why.

2014-03-06  Corinna Vinschen  <corinna@@vinschen.de>

	* setlsapwd.cc (setlsapwd): Use RtlSecureZeroMemory to delete password
	from memory.

2014-11-05  Corinna Vinschen  <corinna@@vinschen.de>

	* new-features.xml (ov-new1.7.33): Document atexit.

2014-10-28  Corinna Vinschen  <corinna@@vinschen.de>

	* cygwinenv.xml: Change default setting of dosfilewarning.
	* new-features.xml (ov-new1.7.33): Document aforementioned change.

2014-10-27  Corinna Vinschen  <corinna@@vinschen.de>

	* new-features.xml (ov-new1.7.33): Document empty $PATH handling.

2014-10-22  Corinna Vinschen  <corinna@@vinschen.de>

	* posix.xml (std-gnu): Add ffsl, ffsll, quotactl.
	(std-notes): Add restrictions of quotactl.

2014-10-22  Yaakov Selkowitz  <yselkowi@@redhat.com>

	* new-features.xml (ov-new1.7.33): Document stime.
	* posix.xml (std-deprec): Add stime.

2014-10-22  Corinna Vinschen  <corinna@@vinschen.de>

	* new-features.xml (ov-new1.7.33): s/Linux/glibc.

2014-10-22  Corinna Vinschen  <corinna@@vinschen.de>

	* new-features.xml (ov-new1.7.33): Update to current state.

2014-08-13  Corinna Vinschen  <corinna@@vinschen.de>

	* new-features.xml (ov-new1.7.33): Add new section.
	(ov-new1.7.32): Reflect intermediate 1.7.32 release.

2014-10-21  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (CYGLSA64_DLL): Remove unused macro.
	(dump_sysinfo): If COMSPEC isn't set in the MSVCRT environment, set it.
	Explain why.
@
text
@a0 6
2014-10-21  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (CYGLSA64_DLL): Remove unused macro.
	(dump_sysinfo): If COMSPEC isn't set in the MSVCRT environment, set it.
	Explain why.

@


1.618
log
@	* cygcheck.cc (RtlGetVersion): Declare.
	(dump_sysinfo): Call RtlGetVersion rather than GetVersionEx to get
	correct OS info even on Windows 8.1.  Don't check return value since
	RtlGetVersion never fails per MSDN.  Move fetching kernel32 module
	handle where it's really needed.  Drop temporary comment added by
	previous checkin.
@
text
@d1 6
@


1.617
log
@	* cygcheck.cc (dump_sysinfo): Revert Windows 8.1 hack.  It's not
	working.  Add a (hopefully temporary) comment.
@
text
@d3 9
@


1.616
log
@Add missing entry
@
text
@d3 5
@


1.615
log
@	* cygcheck.cc (dump_sysinfo): Drop code trying to fetch OSVERSIONINFO
	if fetching OSVERSIONINFOEX failed.  Drop code handling unsupported
	platform IDs.  Add code to tweak dwMinorVersion on Windows 8.1 if no
	manifest is present.
@
text
@d18 3
@


1.614
log
@	* Makefile.in (cygcheck.exe): Link against wininet.dll.
	(dumper.exe): Link against psapi.dll.
	* cygcheck.cc (_WIN32_WINNT): Define as 0x0602.
	(pInternetCloseHandle): Drop pointer.
	(PRODUCT_UNLICENSED): Drop definition.
	(PRODUCT_PROFESSIONAL_WMC): Ditto.
	(package_grep): Delete code loading wininet functions dynamically, just
	call functions directly.
@
text
@d3 7
@


1.613
log
@	* cygcheck.cc (dump_sysinfo): Distinguish Windows 8 and 8.1, as well
	as Windows Server 2012 and 2012 R2.  Add missing commas in products
	array to avoid crashes.  Drop Windows NT4 and 2000 printouts.  Just
	call IsWow64Process, GetNativeSystemInfo, and GetDiskFreeSpaceEx
	directly, rather than loading them dynamically, since they are exported
	by all supported OS versions.  Fix questionable type usage in call to
	GetDiskFreeSpaceEx.
@
text
@d3 11
@


1.612
log
@winsup/ChangeLog:
2013-11-06  Christopher Faylor  <me.cygwin2013@@cgf.cx>

	* configure.ac: Detect windows headers/libs after we've figured out the
	C compiler.
	* configure: Regenerate.
	* aclocal.m4: Regenerate.
	* configure.cygwin: Default to '.' if can't find a winsup directory.

winsup/cygserver/ChangeLog:
2013-11-06  Christopher Faylor  <me.cygwin2013@@cgf.cx>

	* configure.ac: Detect windows headers/libs after we've figured out the
	C compiler.
	* configure: Regenerate.
	* aclocal.m4: Regenerate.

winsup/cygwin/ChangeLog:
2013-11-06  Christopher Faylor  <me.cygwin2013@@cgf.cx>

	* configure.ac: Detect windows headers/libs after we've figured out the
	C compiler.
	* configure: Regenerate.
	* aclocal.m4: Regenerate.

winsup/utils/ChangeLog:
2013-11-06  Christopher Faylor  <me.cygwin2013@@cgf.cx>

	* configure.ac: Detect windows headers/libs after we've figured out the
	C compiler.
	* configure: Regenerate.
	* aclocal.m4: Regenerate.
@
text
@d1 10
@


1.611
log
@* dump_setup.cc (find_tar_ext): Generalize search for .tar extension, avoiding
looking for specific compression types.
@
text
@d1 7
@


1.610
log
@* cygcheck.cc (package_grep): Accommodate arch-specific package layout.
@
text
@d1 5
@


1.609
log
@	* Makefile.in (MINGW_LDFLAGS): Don't link against w32api libs.  These
	are only for Cygwin executables.
@
text
@d1 4
@


1.608
log
@* cygcheck.cc (dll_info): Detect and report on symlinks.  Output wrong
architecture message inline with stdout for clarity.
* path.cc (is_symlink): Always reset file pointer to beginning on exit.
(readlink): Assume that file pointer is set to the beginning.
@
text
@d1 5
@


1.607
log
@	* cygpath.cc (do_pathconv): when -p option is given, generate wide
	path without long path prefixing.
	* wide_path.h (wide_path::wide_path): Allow extra bool parameter to
	specify whether or not performing Windows long path prefixing.
@
text
@d1 7
@


1.606
log
@	Reinstantiate accidentally removed patch from 2009-05-16:
	* Makefile.in (cygpath.exe): Link against cygwin.a before linking
	against ntdll.dll to avoid linking symbols defined in both DLLs
	from ntdll.
	(ps.exe): Ditto.
@
text
@d1 7
@


1.605
log
@- Added <?xml> and <!DOCTYPE> tags to the top of utils.xml and pretty-
  printed it.
- Removed obsolete utils.sgml
- Added a ChangeLog entry for this replacement, which partially took
  place days ago.  This checkin formalizes the switch from SGML to
  DocBook XML for this file.
@
text
@d1 8
@


1.604
log
@	* Merge in cygwin-64bit-branch.
@
text
@d1 6
@


1.603
log
@* Makefile.in (CYGWIN_LDFLAGS): Replace -static-lib* with -static.
(MINGW_LDFLAGS): Ditto.
(ZLIB): Simplify accordingly.
@
text
@d1 4
@


1.602
log
@	* utils.sgml (mount): Document sparse mount option.
@
text
@d1 6
@


1.601
log
@* Makefile.in: Move CFLAGS and CXXFLAGS so that they can be manipulated by
Makefile.common.  Add -static-libstdc++ to *LDFLAGS.  Add dependencies for
loadlib.h.
* loadlib.h: Update copyright.
(_load_sys_library): Properly define set_dll_library as WINAPI to avoid stack
corruption.
@
text
@d1 4
@


1.600
log
@* Makefile.in (ZLIBS): Common define to force static load.
(MINGW_LDFLAGS): Use static libgcc.
@
text
@d3 9
@


1.599
log
@* Makefile.in: Make sure that libz is always loaded staticly.
@
text
@d3 5
@


1.598
log
@ChangeLog:
2012-11-26  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* configure.ac: Rename from configure.in.
	* configure.in: Delete.
	* configure: Regenerate.

cygserver/ChangeLog:
2012-11-26  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* configure.ac: Rename from configure.in.
	* configure.in: Delete.
	* configure: Regenerate.

cygwin/ChangeLog:
2012-11-26  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* configure.ac: Rename from configure.in.
	* configure.in: Delete.
	* configure: Regenerate.

doc/ChangeLog:
2012-11-26  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* configure.ac: Rename from configure.in.
	* configure.in: Delete.
	* configure: Regenerate.

lsaauth/ChangeLog:
2012-11-26  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* configure.ac: Rename from configure.in.
	* configure.in: Delete.
	* configure: Regenerate.

testsuite/ChangeLog:
2012-11-26  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* configure.ac: Rename from configure.in.
	* configure.in: Delete.
	* configure: Regenerate.

utils/ChangeLog:
2012-11-26  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* configure.ac: Rename from configure.in.
	* configure.in: Delete.
	* configure: Regenerate.
@
text
@d1 4
@


1.597
log
@	* bloda.cc: Drop Mingw.org considerations.
	* dump_setup.cc: Ditto.
	* strace.cc: Ditto.
@
text
@d1 6
@


1.596
log
@ChangeLog:
2012-11-12  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* Makefile.common: Revamp for new configury.  Add default compilation
	targets, include .E processing.  Add magic for allowing "CFLAGS" to
	control optimization options in "CXXFLAGS".
	* configure.cygwin: New include for Cygwin configure.in's.
	* acinclude.m4: Delete old definitions.  Implement AC_WINDOWS_HEADERS,
	AC_WINDOWS_LIBS, AC_CYGWIN_INCLUDES, target_builddir, winsup_srcdir.
	* aclocal.m4: Regenerate.
	* autogen.sh: New file.
	* ccwrap: New script.
	* c++wrap: New script.
	* config.guess: New script.
	* config.sub: New script.
	* configure: Regenerate.
	* configure.in: Eliminate LIB_AC_PROG_* calls in favor of standard.
	Delete ancient target test.
	* install-sh: New script.

cygserver/ChangeLog:
2012-11-12  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* Makefile.in: Revamp for new configury.
	* configure.in: Revamp for new configury.
	* aclocal.m4: Regenerate.
	* configure: Ditto.
	* autogen.sh: New script.

cygwin/ChangeLog:
2012-11-22  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* select.cc (select): Don't return -1 when we've timed out after
	looping.

2012-11-22  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* Makefile.in: Revamp for new configury.
	(datarootdir): Add variable setting.
	(winver_stamp): Accommodate changes to mkvers.sh setting.
	(libc.a): Fix race when libm.a might not have been built yet.
	* configure.in: Revamp for new configury.
	* aclocal.m4: Regenerate.
	* configure: Ditto.
	* autogen.sh: New script.
	* mkvers.sh: Find include directives via CFLAGS and friends rather than
	assuming that w32api lives nearby.

utils/ChangeLog:
2012-11-12  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* aclocal.m4: Regenerate.
	* configure: Ditto.
	* autogen.sh: New script.
	* configure.in: Revamp for new configury.
	* Makefile.in: Revamp for new configury.  Rename ALL_* to just *.
	Always use "VERBOSE" setting.
	(MINGW_CXX): Don't include CFLAGS in definition.
	(all): Define target first, before everything else so that it is the
	default.
	(ps.exe): Don't add useless -lcygwin.
	(ldh.exe): For consistency, add to existing MINGW_LDFLAGS rather than
	redefining them.
	(cygcheck.exe): Always include -lz for MINGW_LDFLAGS.  Don't try to
	figure out where to find it.
	(dumper.exe): Simplify check.  Assume libraries are installed rather
	than trying to retrieve from source tree.
	(install): Just use /bin/mkdir to create directories.
	(Makefile): Regenerate when standard dependencies change.
	* dump_setup.cc: Always include zlib.h.  Remove accommodations for it
	possibly not existing.
	* parse_pe.cc: Add define which allows building with installed
	binutils package.
	* dumper.cc: Ditto.
@
text
@d1 6
@


1.595
log
@	* path.cc (vcygpath): Handle cygdrive prefix.
@
text
@d1 26
@


1.594
log
@winsup:

	* Makefile.common (zlib_source): Remove.
	(zlib_build): Remove.
	(bz2lib_source): Remove.
	(bz2lib_build): Remove.
	(w32api_source): Remove.
	(w32api_build): Remove.
	(w32api_lib): Remove.
	(mingw_build): Remove.
	(mingw_source): Remove.
	($(w32api_lib)/%.a): Remove rule.
	* Makefile.in (ZLIB): Remove.
	($(SUBDIRS)): Drop mingw check.
	(mingw): Remove rule.
	(install_mingw): Ditto.
	* configure.in: Remove support for mingw as build target.
	* configure: Regenerate.

utils:

	* Makefile.in ($(MINGW_BINS)): Drop -B$(mingw_build)/ from build
	expression.
@
text
@d1 4
@


1.593
log
@	* Makefile.in (MINGW_CXX): Attach $(CFLAGS) to allow providing
	build option tweaks to mingw compiler as well.
@
text
@d1 5
@


1.592
log
@	* configure.in: Add AC_NO_EXECUTABLES,
	* configure: Regenerate.
@
text
@d1 5
@


1.591
log
@	* configure.in: Add check for MINGW_CXX.  Remove libiconv check.
	* configure: Regenerate.
	* Makefile.in: Remove references to mingw and w32api directories.
	Use MINGW_CXX instead of mingw script to build MINGW_BINS.
	Check for libiconv with $CC --print-file-name.
	* cygcheck.cc: Use relative include paths for Cygwin headers.
	* path.cc: Ditto.
	* strace.cc: Ditto
	* mingw: Remove.
@
text
@d1 5
@


1.590
log
@	* Makefile.in (cygcheck.exe): Add temporary (1.7.17-only) hack to
	allow cygcheck running on pre-Vista despite of the new w32api not
	matching the locally used w32api.
@
text
@d1 14
@


1.589
log
@	* cygcheck.cc (dump_sysinfo): Convert "if/else if" chain to a switch
	statement.  Drop "not yet supported" and "Server" from Windows 2012
	output string.
@
text
@d1 6
@


1.588
log
@	* cygcheck.cc (dump_sysinfo): Drop "not yet supported" text from
	Windows 8.  Update products array.
@
text
@d1 6
@


1.587
log
@	* Makefile.in (cygcheck.exe): Link against psapi.dll.
	* bloda.cc: Change include section to work with Mingw64 headers.
	Include psapi.h.  Use SystemProcessInformation instead of
	SystemProcessesAndThreadsInformation throughout and add define for
	w32api headers.  Ditto for PSYSTEM_PROCESS_INFORMATION vs.
	PSYSTEM_PROCESSES.
	(system_module_list): New type to replace SYSTEM_MODULE_INFORMATION.
	Change usage throughout accordingly.
	(get_module_list): Fetch module list using PSAPI functions
	EnumDeviceDrivers and GetDeviceDriverBaseNameA.
	* cygcheck.cc (max): Define as __max if not defined already.
	(alloca): Only define if not defined already.
	(handle_unique_object_name): Use explicit sharing flags rather than
	FILE_SHARE_VALID_FLAGS which officially is only available in DDK
	headers.
	(PRODUCT_ULTIMATE_E): Only define if not defined already.
	* dump_setup.cc: Change include section to work with Mingw64 headers.
	(NtQueryAttributesFile): Drop NTOSAPI aka DECLSPEC_IMPORT.
	* strace.cc: Change include section to work with Mingw64 headers.
	(alloca): Only define if not defined already.
@
text
@d1 5
@


1.587.2.1
log
@	* ps.cc (main): Drop unneeded cast.
@
text
@a0 4
2012-08-13  Corinna Vinschen  <corinna@@vinschen.de>

	* ps.cc (main): Drop unneeded cast.

@


1.587.2.2
log
@	* cygcheck.cc: Change include path to not depend on installed
	cygwin/version.h.
	(_NOMNTENT_MACROS): Define before including mntent.h.
	* path.cc (_NOMNTENT_MACROS): Ditto.
	* dump_setup.cc: Add temporary workaround to handle older Mingw header
	files on Fedora 17.
	* strace.cc: Ditto.
@
text
@a0 10
2012-08-16  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc: Change include path to not depend on installed
	cygwin/version.h.
	(_NOMNTENT_MACROS): Define before including mntent.h.
	* path.cc (_NOMNTENT_MACROS): Ditto.
	* dump_setup.cc: Add temporary workaround to handle older Mingw header
	files on Fedora 17.
	* strace.cc: Ditto.

@


1.587.2.3
log
@	* ps.cc (main): Define uid correctly as uid_t.
@
text
@a2 4
	* ps.cc (main): Define uid correctly as uid_t.

2012-08-16  Corinna Vinschen  <corinna@@vinschen.de>

@


1.587.2.4
log
@Pull in changes from HEAD
@
text
@a0 11
2012-10-09  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Convert "if/else if" chain to a switch
	statement.  Drop "not yet supported" and "Server" from Windows 2012
	output string.

2012-09-02  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Drop "not yet supported" text from
	Windows 8.  Update products array.

@


1.587.2.5
log
@	Align ChangeLog to HEAD
	New file ChangeLog.64bit
@
text
@d12 18
@


1.587.2.6
log
@Pull in changes from HEAD
@
text
@a0 25
2012-10-24  Corinna Vinschen <corinna@@vinschen.de>

	* configure.in: Add AC_NO_EXECUTABLES,
	* configure: Regenerate.

2012-10-24  Kai Tietz  <ktietz70@@googlemail.com>
	    Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>
	    Corinna Vinschen <corinna@@vinschen.de>

	* configure.in: Add check for MINGW_CXX.  Remove libiconv check.
	* configure: Regenerate.
	* Makefile.in: Remove references to mingw and w32api directories.
	Use MINGW_CXX instead of mingw script to build MINGW_BINS.
	Check for libiconv with $CC --print-file-name.
	* cygcheck.cc: Use relative include paths for Cygwin headers.
	* path.cc: Ditto.
	* strace.cc: Ditto
	* mingw: Remove.

2012-10-19  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (cygcheck.exe): Add temporary (1.7.17-only) hack to
	allow cygcheck running on pre-Vista despite of the new w32api not
	matching the locally used w32api.

@


1.587.2.7
log
@Pull in changes from HEAD
@
text
@a0 5
2012-11-05  Corinna Vinschen <corinna@@vinschen.de>

	* Makefile.in (MINGW_CXX): Attach $(CFLAGS) to allow providing
	build option tweaks to mingw compiler as well.

@


1.587.2.8
log
@Pull in changes from HEAD
@
text
@a0 5
2012-11-07  Corinna Vinschen <corinna@@vinschen.de>

	* Makefile.in ($(MINGW_BINS)): Drop -B$(mingw_build)/ from build
	expression.

@


1.587.2.9
log
@Pull in change from HEAD
@
text
@a0 4
2012-11-09  Corinna Vinschen <corinna@@vinschen.de>

	* path.cc (vcygpath): Handle cygdrive prefix.

@


1.587.2.10
log
@Pull in changes from HEAD
@
text
@a0 26
2012-11-12  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* aclocal.m4: Regenerate.
	* configure: Ditto.
	* autogen.sh: New script.
	* configure.in: Revamp for new configury.
	* Makefile.in: Revamp for new configury.  Rename ALL_* to just *.
	Always use "VERBOSE" setting. 
	(MINGW_CXX): Don't include CFLAGS in definition.
	(all): Define target first, before everything else so that it is the
	default.
	(ps.exe): Don't add useless -lcygwin.
	(ldh.exe): For consistency, add to existing MINGW_LDFLAGS rather than
	redefining them.
	(cygcheck.exe): Always include -lz for MINGW_LDFLAGS.  Don't try to
	figure out where to find it.
	(dumper.exe): Simplify check.  Assume libraries are installed rather
	than trying to retrieve from source tree.
	(install): Just use /bin/mkdir to create directories.
	(Makefile): Regenerate when standard dependencies change.
	* dump_setup.cc: Always include zlib.h.  Remove accommodations for it
	possibly not existing.
	* parse_pe.cc: Add define which allows building with installed
	binutils package.
	* dumper.cc: Ditto.

@


1.587.2.11
log
@Pull in changes from HEAD
@
text
@a0 6
2012-11-26  Corinna Vinschen <corinna@@vinschen.de>

	* bloda.cc: Drop Mingw.org considerations.
	* dump_setup.cc: Ditto.
	* strace.cc: Ditto.

@


1.587.2.12
log
@Pull in changes from HEAD
@
text
@a0 24
2012-11-27  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* Makefile.in: Move CFLAGS and CXXFLAGS so that they can be manipulated
	by Makefile.common.  Add -static-libstdc++ to *LDFLAGS.  Add
	dependencies for loadlib.h.
	* loadlib.h: Update copyright.
	(_load_sys_library): Properly define set_dll_library as WINAPI to avoid
	stack corruption.

2012-11-27  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* Makefile.in (ZLIBS): Common define to force static load.
	(MINGW_LDFLAGS): Use static libgcc.

2012-11-27  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* Makefile.in: Make sure that libz is always loaded staticly.

2012-11-26  Christopher Faylor  <me.cygwin2012@@cgf.cx>

	* configure.ac: Rename from configure.in.
	* configure.in: Delete.
	* configure: Regenerate.

d14 1
a14 1
	Always use "VERBOSE" setting.
@


1.587.2.13
log
@Pull in changes from HEAD
@
text
@a0 10
2013-02-20  Yaakov Selkowitz  <yselkowitz@@users.sourceforge.net>

	* Makefile.in (CYGWIN_LDFLAGS): Replace -static-lib* with -static.
	(MINGW_LDFLAGS): Ditto.
	(ZLIB): Simplify accordingly.

2012-12-14  Corinna Vinschen <corinna@@vinschen.de>

	* utils.sgml (mount): Document sparse mount option.

@


1.586
log
@	* cygpath.cc: Change including headers to allow building against
	Mingw64 headers. Include ntdef.h and ntdll.h rather than ddk headers.
	Define _WIN32_WINNT and WINVER as 0x0602.
	(RtlEqualUnicodePathPrefix): Drop definition.  Pulled in from ntdll.h
	now.
	(get_device_name): s/Zw/Nt.
	* dumper.cc: Include sys/param.h
	(dumper::dump_memory_region): Use MIN rather than min.
	* locale.cc: Include stdlib.h.  Define _WIN32_WINNT and WINVER as
	0x0602.
	* ps.cc: Include ntdef.h and ntdll.h rather than ddk headers.
	* regtool.cc (regDeleteKeyEx): Drop WINADVAPI qualifier.
@
text
@d1 23
@


1.585
log
@	* cygcheck.cc (dump_sysinfo): Change "Server 8" to official
	"Server 2012".
@
text
@d1 15
@


1.584
log
@	* mkpasswd.c (current_user): Actually *use* $HOME if it's available.
	Add comment to explain what we're doing here.
@
text
@d1 5
@


1.583
log
@	* mkgroup.c (print_special_by_sid): Rename from print_special.  Change
	calls throughout.
	(print_special_by_name): New function.
	(main): Call print_special_by_name for TrustedInstaller account.
	* mkpasswd.c (print_special_by_sid): Rename from print_special.  Change
	calls throughout.
	(print_special_by_name): New function.
	(enum_std_accounts): Call print_special_by_name for TrustedInstaller
	account.
@
text
@d1 5
@


1.582
log
@* pldd.c: Fix typo in license header.
@
text
@d1 12
@


1.581
log
@	* passwd.cc: Add -v option to print version information as well, since
	it's used in older csih.
@
text
@d1 11
@


1.580
log
@	* utils.sgml: Fix typos.
@
text
@d1 5
@


1.579
log
@* strace.cc (proc_child): Don't right-shift exit value.
(main): Call ExitProcess() to exit exactly the same way as any straced child.
@
text
@d1 4
@


1.578
log
@	* tzset.c: Throughout use wide characters to be locale agnostic.
	(main): Call setlocale.
@
text
@d1 6
@


1.577
log
@	* Makefile.in (CYGWIN_BINS): Add tzset.
	* tzset.c: New tool, new file.
	* utils.sgml (tzset): New section.

	* new-features.sgml (ov-new1.7.10): Add tzset.

	* release/1.7.10: Add tzset.
@
text
@d3 5
@


1.576
log
@	* ldd.cc (start_process): Handle .oct and .so as DLLs.
@
text
@d1 6
@


1.575
log
@	Don't leave Windows 2000 behind.

	* Makefile.in (ps.exe): Revert previous change.
	* ps.cc: Include psapi.h again.
	(main): In CW_GETPINFO_FULL case.  Evaluate minimal process access mask
	required per OS and use that in OpenProcess call.  Use
	GetModuleFileNameExW on Windows 2000 or if fetching the drive mapping
	failed.  Handle empty process name.
@
text
@d1 4
@


1.574
log
@	* Makefile.in (ps.exe): Drop -lpsapi from ALL_LDFLAGS.
	* ps.cc: Don't include psapi.h.
	(dosdevs): Drop.
	(unicode_buf): Define.
	(main): Simplify path evaluation in CW_GETPINFO_FULL case. Fetch drive
	map from Cygwin DLL.  Use it to convert NT device paths to Win32 paths.
@
text
@d3 9
@


1.573
log
@	* Makefile.in (cygpath.exe): Add -luserenv to ALL_LDFLAGS.
	* cygpath.cc: Throughout, use cygwin_conv_path WIN_W rather than WIN_A
	conversion.
	(get_long_path_name_w32impl): Remove.
	(get_long_name): Drop pre-Windows 2000 accommodations.  Just call
	GetLongPathNameW here directly.
	(get_special_folder): Convert first parameter to WCHAR buffer pointer.
	Drop conversion of result from WCHAR * to char *.
	(do_sysfolders): Accommodate change to get_special_folder and only
	convert result to char * last.  Drop pre-Windows 2000 accommodations
	and just call GetProfilesDirectoryW directly.  Replace call to
	GetWindowsDirectoryW with call to GetSystemWindowsDirectoryW.
	Just call GetShortPathNameW directly.
	(do_pathconv): Simplify buffer handling.
@
text
@d1 9
@


1.572
log
@	* mkgroup.c: Drop support for NT4 domains.
	* mkpasswd.c: Ditto.
	(psx_dir): Remove.
	(current_user): Drop support for -m option.  Use $HOME as is since it's
	a POSIX path anyway.
	(enum_users): Drop support for -m option.
	(usage): Mention -m option as ignored.
	(main): Drop support for -m option.  Mark ignored options as deprecated.
	* utils.sgml (mkpasswd): Remove description of -m option.
@
text
@d1 17
@


1.571
log
@	* locale.cc (print_locale_with_codeset): Fetch Windows path as UNICODE
	path and convert that to POSIX.
@
text
@d1 12
@


1.570
log
@	* ps.cc: Remove all Win 9x considerations.  Use psapi functions
	directly.  Drop support for older Cygwin DLLs.  Just use progname_long
	as is since it's already a POSIX path now.  Rename "tty" to "pty" as in
	the Cygwin DLL.  Call setlocale to make sure wcstombs does the right
	thing according to the current locale.
	* Makefile.in (ps.exe): Link against psapi.dll.
@
text
@d3 5
@


1.569
log
@* strace.cc (attach_process): Use NT_SUCCESS to figure out if
NtSetInformationProcess succeeded.
(handle_output_debug_string): Put back DebugActiveProcess since it seems to
still be needed (on my system at least).  Detect new format
_STRACE_INTERFACE_ACTIVATE_ADDR which informs whether this is a forked process
or not.  Use that to decide if forkdebug should be handled.
@
text
@d1 9
@


1.568
log
@* strace.cc (handle_output_debug_string): Disable code which attempted to add
stuff in between '****' blocks since they no longer are the first thing output
by an straced process.
@
text
@d1 9
@


1.567
log
@	* cygcheck.cc (dump_sysinfo): Add Windows 8 recognition.  Note as
	unsupported.  Update products array.
@
text
@d1 6
@


1.566
log
@	* utils.sgml (getconf): Expand documentation.
@
text
@d1 5
@


1.565
log
@	* ldd.cc (VERSION): Remove.
@
text
@d1 4
@


1.564
log
@* ldd.cc: Update copyright.
@
text
@d1 4
@


1.563
log
@	* Align usage output, version output, as well as usage and version
	option handling to use the same style throughout all Cygwin utils.
	Throughout use program_invocation_short_name to refer to current
	process name in Cygwin executables.
	* utils.sgml: Align documentation to above change.  Add missing
	sections for getconf, ldd, and setmetamode.
	* strace.cc (proc_child): Avoid compiler warning.
@
text
@d1 4
@


1.562
log
@	* locale.cc (usage): Restructure, rephrase, add new options.  Drop
	arguments, don't exit.
	(print_version): New function.
	(longopts): Add -f, -n, and -V options.  Reorder.
	(opts): Add -f, -n, and -V options.
	(main): Call GetSystemDefaultUILanguage for -s option.  Call
	GetUserDefaultUILanguage for -u option.  Add -f and -n options and
	call GetUserDefaultLCID and GetSystemDefaultLCID respectively.  Return
	0 after calling usage in -h case.  Add -V option and call print_version.
	Don't print full usage in default case, rather just a short help message
	similar to GNU tools.
	* utils.sgml (locale): Align to above changes.  Rephrase description.
@
text
@d1 10
@


1.561
log
@	* cygcheck.cc (check_keys): Use UNICODE Win32 functions.
@
text
@d1 16
@


1.560
log
@	* strace.cc (attach_process): Try to turn off DEBUG_ONLY_THIS_PROCESS
	if Attaching to a process with the trace-children flag set.
	(handle_output_debug_string): Apparently we don't need to explicitly
	attach for debugging when a child process starts
	* Makefile.in (strace.exe): Link with ntdll
@
text
@d1 4
@


1.559
log
@* Makefile.in: Check for header file existence when building dumper.exe too.
@
text
@d1 8
@


1.558
log
@	* ps.cc (main): Don't overwrite process name, just attach <defunct>
	to it for zombie processes.
@
text
@d1 5
@


1.557
log
@* Makefile.in (CYGWIN_BINS): Add getconf.
(getconf.c): New file.
@
text
@d1 5
@


1.556
log
@* mingw: Force use of bash.
@
text
@d1 5
@


1.555
log
@* ps.cc (ttynam): Accommodate new console numbering.
(main): Ditto.
@
text
@d1 4
@


1.554
log
@	* locale.cc (print_locale_with_codeset): Align printing of locale names
	to POSIX.
@
text
@d1 5
@


1.553
log
@	* setfacl.c (getaclentry): Allow extra colon in mask and other entries.
@
text
@d1 5
@


1.552
log
@2011-04-12  Jon TURNEY  <jon.turney@@dronecode.org.uk>

        * utils.sgml (strace): Fix a pair of exchanged lines in usage text.
@
text
@d1 4
@


1.551
log
@	* passwd.c (main): Add the ability to specify a username for the -R
	command.
	* utils.sgml: Document the aforementioned change.
@
text
@d1 4
@


1.550
log
@	* regtool.cc (cmd_set): Avoid a compiler warning.
@
text
@d1 6
@


1.549
log
@	* cygcheck.cc (handle_unique_object_name): Avoid a compiler warning.
	(dump_sysinfo): Ditto.
	* loadlib.h (_load_sys_library): Mark as used, to avoid a compiler
	warning.
	* path.cc (oopt): Gurad with !FSTAB_ONLY to avoid a compiler warning.
	(read_flags): Ditto.
@
text
@d3 4
@


1.548
log
@	* setfacl.c (strchrnul): Drop local implementation.
@
text
@d1 9
@


1.547
log
@	* cygcheck.cc: Fix copyright dates.
@
text
@d1 4
@


1.546
log
@	* cygcheck.cc (main): don't imply -d from -s option to cygcheck
@
text
@d1 4
@


1.545
log
@	* setfacl.c (strchrnul): New function.
	(getaclentry): Rewrite.
@
text
@d1 4
@


1.544
log
@	* cygpath.cc (get_device_name): Fix path length test.
@
text
@d1 5
@


1.543
log
@* regtool.c (cmd_set): Write correct number of bytes for REG_MULTI_SZ case.
@
text
@d1 4
@


1.542
log
@	* cygpath.cc (RtlEqualUnicodePathPrefix): New helper function.
	(HARDDISK_PREFIX): Move.
	(GLOBALROOT_PREFIX): Define.
	(get_device_name): Take GLOBALROOT_PREFIX into account.
	Improve check for path to allow filesystem access via block devices.
	Potentially drop \\.\ prefix if resulting path is a valid DOS
	pathname.
	(do_pathconv): Make sure to drop \\?\ prefix only if path is
	actually a filesystem based path.
	(print_version): Fix copyright.
@
text
@d1 5
d1378 1
a1378 1
	* regtool.cc (KEY_WOW64_64KEY): Drop definition.  Instead define 
@


1.541
log
@	* ldh.cc (WinMain): Change DONT_RESOLVE_DLL_REFERENCES to
	LOAD_WITH_ALTERED_SEARCH_PATH.
@
text
@d1 13
@


1.540
log
@	* loadlib.h: New header implementing safe LoadLibrary calls.
	Include throughout files using LoadLibrary function.
	* cygcheck.cc (dump_sysinfo): Retrieve kernel32.dll handle via
	GetModuleHandle, rather than using LoadLibrary.
	* cygpath.cc (get_long_name): Ditto.
	(do_sysfolders): Append .dll suffix in LoadLibrary call.
	* ldh.cc (WinMain): Use LoadLibraryExW with DONT_RESOLVE_DLL_REFERENCES
	to avoid loading malicious library code.
	* locale.cc (print_locale_with_codeset): Change way to retrieve
	kernel32.dll path.
@
text
@d3 5
@


1.539
log
@	* cygpath.cc (get_device_name): Prefer the \\.\X: DOS device for
	harddisks, if available.
@
text
@d1 13
@


1.538
log
@	* ldd.cc (report): Drop long pathname considerations which result in
	invalid path, now that this is done in cygwin_conv_path.
@
text
@d1 5
@


1.537
log
@	* mount.cc (from_fstab): Fix potentially fatal typo.
@
text
@d1 5
@


1.536
log
@	* mount.cc (do_mount): Don't treat "bind" mount as remote mount.
	(mount_entries): Drop the "bind" option from output.
	* utils.sgml (mount): Match examples to actual mount output.  Add
	"bind" option and add example.
@
text
@d1 4
@


1.535
log
@* mingw: Use sysroot, if present, for mingw_dir.
@
text
@d1 7
@


1.534
log
@	* dump_setup.cc (tfx_chars): New WCHAR array, copied from Cygwin.
	(transform_chars): New function, copied from Cygwin.
	(simple_nt_stat): New function to check file existance using native
	NT function.  Explain why.
	(directory_exists): Call simple_nt_stat.
	(file_exists): Ditto.
@
text
@d1 4
@


1.533
log
@* ldd.cc: Clean up formatting throughout.
(head): Move earlier.
(saw_file): Ditto.
(print_dlls): Reset head here.  Record seen dll names so they will not
potentially be printed later.
(process_file): Remove clearing of head here.
@
text
@d1 9
@


1.532
log
@	* dump_setup.cc (dump_file): Read requested content from setup.rc
	file created by newer setup.exe.
@
text
@d1 9
@


1.531
log
@	* utils.sgml (locale): Change stray local cygdrive prefix to Cygwin's
	default.
@
text
@d1 5
@


1.530
log
@	* utils.sgml (mount): Add description for "dos" and "ihash" mount
	options.
@
text
@d1 5
@


1.529
log
@	* path.cc: Include sys/cygwin.h if built for mount(1).
	(struct opt): Add "dos" and "ihash" options.
	(from_fstab_line): Call cygwin_internal rather than read_flags if
	built for mount(1).
@
text
@d3 5
@


1.528
log
@	* mount.cc (oopts): Remove entirely.
	(usage): Call cygwin_internal (CW_LST_MNT_OPTS) to create list of
	mount options.
	(print_version): Fix copyright date.
	(main): Replace option processing loop with single call to
	cygwin_internal (CW_CVT_MNT_OPTS).
@
text
@d3 7
@


1.527
log
@	* locale.cc (print_lc_xxx_charset): Remove.
	(enum type_t): Change according to the fact that nl_langinfo now returns
	all locale category values.
	(lc_ctype_names): Add new category members.  Redefine for exclusive
	nl_langinfo usage.
	(lc_numeric_names): Ditto.
	(lc_time_names): Ditto.
	(lc_collate_names): Ditto.
	(lc_monetary_names): Ditto.
	(lc_messages_names): Ditto.
	(print_lc): Change switch according to new type_t values.
@
text
@d1 9
@


1.526
log
@	* locale.cc (print_charmaps): Add EUC-CN and GB2312.
@
text
@d1 14
@


1.525
log
@	* regtool.cc (find_key): Fix allocation size of "value".
@
text
@d1 4
@


1.524
log
@	* locale.cc (add_locale_alias_locales): Always use loc_num at function
	start to avoid confusing bsearch.
@
text
@d1 4
@


1.523
log
@	* locale.cc: Revert accidental checkin of unfinished changes.
@
text
@d3 5
@


1.522
log
@	* locale.cc (print_locale_with_codeset): Drop redundant name parameter.
	Simplify creating locale string.  Add "@@" in case of a modifier.
	(print_locale): Drop name parameter in calls to
	print_locale_with_codeset.
@
text
@d3 4
@


1.521
log
@	* utils.sgml (kill): Add SIGIO, SIGCLD, and SIGPWR.
@
text
@d1 7
@


1.520
log
@	* utils.sgml (locale): Change description of -a and -av to match
	latest changes.
@
text
@d1 4
@


1.519
log
@	* locale.cc (printlocale): Remove.
	(loc_t): New type to keep locale information for printing.
	(print_codeset): New function to print codeset as on Linux.
	(print_locale_with_codeset): New function to print single locale.
	Print verbose style as the Linux locale(1) tool.
	(print_locale): New function to print single locale plus its UTF-8
	variation, if available.
	(compare_locales): New helper function for bsearch and qsort on loc_t.
	(add_locale): New function to store locale in loc_t array.
	(add_locale_alias_locales): New function to store locales from
	locale.alias file in loc_t.
	(print_all_locales): Call add_locale instead of printlocale.
	Call add_locale_alias_locales, sort locales alphabetically and print
	them.
@
text
@d1 5
@


1.518
log
@* strace.cc (mnemonic_table): Add "special" mask option.
(usage): Document it.
* utils.sgml: Ditto.
@
text
@d1 17
@


1.517
log
@	* cygpath.cc (do_pathconv): Fix erroneously printing native NT path
	prefix introduced by previous patch.
@
text
@d1 6
@


1.516
log
@	* locale.cc (lc_time_names): Add "date_fmt" entry.
@
text
@d3 5
@


1.515
log
@utils/ChangeLog:
* strace.cc (mnemonic_table): Add pthread mask option.
(usage): Document strace pthread mask option.
* utils.sgml: Ditto.

cygwin/ChangeLog:
* include/sys/strace.h: Remove old code.  Add support for ptrace
tracing.
@
text
@d1 4
@


1.514
log
@	* locale.cc (print_lc_mstrings): New function to print
	semicolon-separated strings.
	(enum type_t): New type is_sepstrings_linf.
	(lc_time_names): Change type of era and alt_digits entry to
	is_sepstrings_linf.
	(print_lc): Add case for is_sepstrings_linf and call print_lc_mstrings
	in that case.
@
text
@d1 6
@


1.513
log
@	* Makefile.in (CYGWIN_BINS): Rename getlocale to locale.
	* getlocale.c: Rename to ...
	* locale.cc: Revamp to add full functionality of POSIX locale(1) tool,
	as far as Cygwin supports it.
	* utils.sgml (getlocale): Move and rename to ...
	(locale): Accommodate new functionality.
@
text
@d1 10
@


1.512
log
@	* cygpath.cc (do_pathconv): Fix potential crash.
@
text
@d1 9
@


1.511
log
@	* getlocale.c (main): Rename local variable to avoid problems.
	Avoid string comparisons, rather test language and sublanguage codes
	wheere possible.  Add more code to handle Serbian language/territory
	state identical on all Windows versions.  Fix handling for "@@latin"
	modifier in Belarusian locale.
	* utils.sgml (getlocale): Try to make wording and example clearer.
@
text
@d1 4
@


1.510
log
@	* getlocale.c (usage): Change text slightly.
@
text
@d1 9
@


1.509
log
@	* getlocale.c (main): Restrict -a loop to avoid psudo language entries
	on Vista and later.
@
text
@d3 4
@


1.508
log
@	* getlocale.c (main): Revamp -a loop to avoid duplicates and to print
	locales with the correct, supported modifiers.
@
text
@d3 5
@


1.507
log
@	* getlocale.c (main): Use setlocale and fetch string from Windows
	using GetLocaleInfoW.  Explain why.
@
text
@d1 5
@


1.506
log
@	* Makefile.in (CYGWIN_BINS): Add getlocale.
	* getlocale.c: New file.
	* utils.sgml (getlocale): New section describing new getlocale tool.
@
text
@d1 5
@


1.505
log
@	* cygpath.cc (get_mixed_name): Drop function.  Replace with call to
	convert_slashes throughout.
	(do_sysfolders): Free allocated buffer.
	(do_pathconv): Fix freeing last buffer.
@
text
@d1 6
@


1.504
log
@	* mount.cc (do_mount_from_fstab): Allow to change cygdrive prefix, too.
@
text
@d1 7
@


1.503
log
@	* cygpath.cc: Throughout, free obsolete path buffers.
@
text
@d1 4
@


1.502
log
@	* cygpath.cc (main): Remove enforcing "en_US.UTF-8" locale.
	Revert usage of argz functions when reading input from file and
	simplify option usage.  Allow only one option argument and use
	the rest as filename argument to allow spaces in filenames.  Restrict
	processing special folder type options to one line.
@
text
@d3 4
@


1.501
log
@* ps.cc (main): Return 0 if pid found.
@
text
@d1 8
@


1.500
log
@	* regtool.cc: Throughout, convert all registry calls to wide char
	calls and use string conversion according to current locale.
	(longopts): Change "dword-le" to "dword-be", as was originally
	intended.
	(usage): Change usage accordingly.
	(print_version): Simplify copyright dates in output.
	(cmd_list): Handle REG_LINK like REG_SZ.
	(cmd_get): Ditto.
	(main): Call setlocale.
	* utils.sgml (regtool): Fix options and add missing descriptions for
	new features.
@
text
@d1 4
@


1.499
log
@	* setfacl.c (getaclentry): Allow to delete default entries for the
	owner and owner group.
@
text
@d1 14
@


1.498
log
@	* cygcheck.cc (dump_sysinfo): Fix typo in products.
@
text
@d1 5
@


1.497
log
@	* getfacl.c (print_version): Fix copyright.
	(main): Don't reuse local variables confusingly.  Don't print any file
	information if acl() fails.  Improve error message.  Always print a
	trailing empty line.  Set return code to 2 if accessing some file fails.
@
text
@d1 4
@


1.496
log
@	* path.cc (read_mounts): Skip unnecessary test if path has been
	fetched from loaded cygwin1.dll.
@
text
@d1 7
@


1.495
log
@	* cygcheck.cc (cygwin_dll_path): New global variable.
	(load_cygwin): Fetch cygwin DLL path and store in cygwin_dll_path.
	* strace.cc: Full ditto.
	* path.cc (read_mounts): First use the path stored in cygwin_dll_path,
	if available.  Then fall back to fetching own path.  Add comment.
	Drop printing warnings since they look funny in strace output.
@
text
@d3 5
@


1.494
log
@	* path.cc (read_mounts): First get installation path from own path.
	Check if cygwin1.dll exists in same directory.  Only if not, try to
	get installation path from setup registry key.  Add ample warnings.
@
text
@d3 9
@


1.493
log
@	* Makefile.in (cygpath.exe): Add -fno-threadsafe-statics to CXXFLAGS.
@
text
@d3 6
@


1.492
log
@	* cygcheck.cc: Include cygprops.h.
	(del_orphaned_reg): New option variable.
	(unique_object_name_opt): Ditto.
	(handle_reg_installation): New function.
	(print_reg_installations): Ditto.
	(del_orphaned_reg_installations): Ditto.
	(memmem): Ditto.
	(handle_unique_object_name): Ditto.
	(dump_sysinfo): Call print_reg_installations from here.
	(usage): Add usage for new options --delete-orphaned-installation-keys,
	--enable-unique-object-names, --disable-unique-object-names, and
	--show-unique-object-names.
	(longopts): Add new options --delete-orphaned-installation-keys,
	--enable-unique-object-names, --disable-unique-object-names, and
	--show-unique-object-names.
	(main): Handle new options.
	* utils.sgml (cygcheck): Change documentaion accordingly.
@
text
@d1 4
@


1.491
log
@	* cygcheck.cc (pretty_id): Drop arguments.  Don't change CYGWIN
	environment variable.
	(dump_sysinfo): Don't tweak CYGWIN environment variable, just call
	pretty_id once.
@
text
@d1 20
@


1.490
log
@	* cygcheck.cc (dump_sysinfo): Update with latest NT 6.1 versions.
@
text
@d1 7
@


1.489
log
@	* cygpath.cc (get_special_folder): Fetch path as WCHAR and convert
	using my_wcstombs.
	(get_user_folder): Remove.
	(do_sysfolders): Use get_special_folder instead of get_user_folder.
	Fetch system paths as WCHAR and convert using my_wcstombs.
@
text
@d1 4
@


1.488
log
@	* kill.cc (main): Skip to PID loop on invalid option to handle
	negative pids there.
@
text
@d1 8
@


1.487
log
@	* mkgroup.c (enum_local_groups): Avoid error message if given group
	name isn't found and return 0 to allow searching to proceed.  Always
	return 0 or 1, not -1.
	(enum_groups): Avoid error message if given group name isn't found.
	* mkpasswd.c (enum_users): Ditto.
@
text
@d1 5
@


1.486
log
@	* mingw: Add fallbacks to search for MinGW components in standard
	install locations if not found in compiler's $prefix.
@
text
@d1 8
@


1.485
log
@	* mount.cc (do_mount): Don't exit, just return.
@
text
@d1 5
@


1.484
log
@	* cygcheck.cc (dump_sysinfo): Add missing "Server Foundation" to
	products array.
@
text
@d1 4
@


1.483
log
@	* mount.cc (do_mount): Replace --no-executable flag with notexec
	mount option in hint for remote filesystems.
	* path.cc (getmntent): Fix typo (noexec -> notexec).
@
text
@d1 5
@


1.482
log
@	* Makefile.in (path-mount.o): Add a rule to build stripped down version
	of path.cc for usage in mount.
	(mount.exe): Add dependency to path-mount.o.
	* mount.cc (force): Convert to bool value.  Accommodate throughout.
	(from_fstab): New function.
	(do_mount_from_fstab): New function.
	(longopts): Add --all option.
	(opts): Add -a option.
	(usage): Document -a/--all option.
	(main): Handle -a option as well as single parameter.
	* path.cc: Add FSTAB_ONLY conditional to allow building path-mount.o.
	(mount_table): Remove static storage class.
	(max_mount_entry): Ditto.
	(root_here): Unused.  Remove.
	(from_fstab_line): Remove static.
	* path.h (struct mnt_t): Define here rather than in path.cc.
	(from_fstab_line): Declare.
	(mount_table): Declare.
	(max_mount_entry): Declare.
	* utils.sgml (mount): Document -a/--all option and mounting of single
	path from fstab files.
@
text
@d3 6
@


1.481
log
@	* strace.cc (main): Open trace output file in UNIX mode.
@
text
@d1 24
@


1.480
log
@	* cygcheck.cc (dump_sysinfo): Remove "not yet supported" text.
@
text
@d1 4
@


1.479
log
@* cygwin-console-helper.cc: New file.
@
text
@d1 4
@


1.478
log
@	* path.cc (oopts): Sort alphabetically, add missing "auto" and
	"override" entries.
	(from_fstab_line): Handle mount points same as Cygwin itself.  Use
	"cygdrive prefix" as posix name of cygdrive prefix.
	(from_fstab): Add auto entries for /usr/bin and /usr/lib.  Add
	MOUNT_AUTOMATIC and MOUNT_IMMUTABLE flags to default root dir entry.
	Use "cygdrive prefix" as posix name of default cygdrive prefix.
	(getmntent): Allocate smaller buffers.  Align output closer to output
	of mount(1).
@
text
@d1 4
@


1.477
log
@	* cygpath.cc (codepage): New variable.
	(long_options): Add --codepage option.
	(options): Add -C option.
	(usage): Add -C/--codepage description.
	(my_wcstombs): New function.  Use througout instead of wcstombs.
	(do_options): Handle -C/--codepage option.
	* utils.sgml (cygpath): Add description for new -C/--codepage option.
@
text
@d1 12
@


1.476
log
@	* Makefile.in (cygpath.exe): Link against cygwin.a before linking
	against ntdll.dll to avoid linking symbols defined in both DLLs
	from ntdll.
	(ps.exe): Ditto.
@
text
@d1 10
@


1.475
log
@	* cygpath.cc (main): Only setlocale for LC_CTYPE category.  Fallback
	to UTF-8 if locale is "C".
	* ldd.cc (main): Ditto.
	* mkgroup.c (main): Ditto.
	* mkpasswd.c (main): Ditto.
	* passwd.c (main): Ditto.
@
text
@d1 7
@


1.474
log
@cygwin ChangeLog
2009-05-13  Corinna Vinschen  <corinna@@vinschen.de>
	    Christopher Faylor  <me+cygwin@@cgf.cx>

	* mount.cc (mount_info::got_usr_bin): Define.
	(mount_info::got_usr_lib): Ditto.
	(mount_info::root_idx): Ditto.
	(mount_info::create_root_entry): Create root entry as immutable and
	flag as automatic.
	(mount_info::init): Remove "Huh?  No /etc/fstab..." warning.
	Unconditionally call from_fstab for user and system tables.  Fill in
	/usr/bin and /usr/lib if they have not been specified in /etc/fstab.
	(oopts): Alphabetize.  Add "override" option to allow overriding
	immutable mount points.
	(mount_info::add_item): Accommodate new MOUNT_IMMUTABLE flag intended
	for root mount.
	(mount_info::add_item): Detect "/usr/bin", "/usr/lib", and "/" and set
	appropriate global state.
	(fillout_mntent): Add ,auto to mount points added by Cygwin DLL.
	(mount): Remove masking of MOUNT_SYSTEM.  Allow user to shoot
	themselves.  Add comment.
	* mount.h (mount_info::got_usr_bin): Declare.
	(mount_info::got_usr_lib): Ditto.
	(mount_info::root_idx): Ditto.
	* include/sys/mount.h: Reformat enum.
	Add MOUNT_{OVERRIDE,IMMUTABLE,AUTOMATIC}.

doc ChangeLog
2009-05-13  Corinna Vinschen  <corinna@@vinschen.de>
	    Christopher Faylor  <me+cygwin@@cgf.cx>

	* pathnames.sgml (mount-table): Sort mount options and add override
	option.  Add description of root mount handling.

utils ChangeLog
2009-05-13  Corinna Vinschen  <corinna@@vinschen.de>
	    Christopher Faylor  <me+cygwin@@cgf.cx>

	* mount.cc (oopts): Sort.  Add override option.  Add dummy "auto"
	option for consistency.
	(mount_entries): Avoid adding auto-mounted entries to -m output.

	* utils.sgml: Sort mount options.  Add description of override option.
@
text
@d1 9
@


1.473
log
@	* Makefile.in: Link ps.exe agains ntdll.dll.
	* ps.cc (main): Enable SE_DEBUG_NAME privilege if Windows processes
	have to be enumerated.  Workaround EnumProcessModules problem when
	running under WOW64 and use NtQueryInformationProcess to fetch
	process image name.
@
text
@d1 9
@


1.472
log
@	* Move ChangeLog entry.
@
text
@d1 8
@


1.471
log
@	* mkpasswd.c (current_user): Don't use HOMEDRIVE/HOMEPATH to generate
	user's homedir.

	* mkgroup.c: Accommodate ctype changes.
	* mkpasswd.c: Ditto.
	* setfacl.c: Ditto.
	* ssp.c: Ditto.
@
text
@d11 5
@


1.470
log
@	* cygcheck.cc (usage): Fix option order and print.
@
text
@d1 10
@


1.469
log
@* strace.cc (create_child): Set CYGWIN=noglob when starting new process so that
Cygwin will leave already-parsed the command line alonw.
@
text
@d1 4
@


1.468
log
@	* cygpath.cc (do_pathconv): Only skip \\?\ prefix if it's really
	given.  Do backslash to slash conversion for mixed paths after
	handling \\?\ prefix.
@
text
@d1 5
@


1.467
log
@
	* Makefile.in (dumper.exe):  Add -lz to ALL_LDFLAGS.
@
text
@d1 6
@


1.466
log
@	* path.cc (readlink): Accommodate new UTF-16 symlinks.
@
text
@d1 4
@


1.465
log
@	* utils.sgml: Various syntactical and semantical fixes.
	* cygcheck.cc (usage): Fix --find-package explanation.
@
text
@d1 4
@


1.464
log
@	* utils.sgml (passwd -R): Remove references to CYGWIN="server".
@
text
@d1 5
@


1.463
log
@	* cygcheck.cc (dump_sysinfo): Fix compiler warning in printf.
	* strace.cc (proc_child): Ditto.
	* ldd.cc: Remove now useless undef wcscasecmp.
@
text
@d1 4
@


1.462
log
@	* passwd.c (usage): Change description for -d option according to
	previous change.
	(main): Fix typo.
	* utils.sgml: Add missing description for passwd -d option.
@
text
@d1 6
@


1.461
log
@	* passwd.c (caller_is_admin): New function to test if calling user
	is an administrator by inspecting user token.
	(main): Drop fetching caller info from logonserver.  Only fetch
	server from environment when trying to change password for own
	account.  Drop admin check entirely in case of doing account
	maintainance.  Otherwise replace check for admin by result of
	caller_is_admin call.
@
text
@d3 7
@


1.460
log
@	* passwd.c (main): Always get logonserver from environment and
	use when fetching user info for caller.
@
text
@d1 10
@


1.459
log
@	* ldd.cc: Fix compiler warning.

	* passwd.c: Use mbstowcs instead of MultiByteToWideChar throughout.
	(main): Call setlocale.  Fix a bug in fetching the logon server from
	the environment.
@
text
@d3 5
@


1.458
log
@*** empty log message ***
@
text
@d1 8
@


1.457
log
@* ldd.cc (load_dll): Start helper program rather than ldd.exe.
(set_entry_point_break): Rename from get_entry_point.
(print_dlls): Rename from print_dlls_and_kill_inferior.  Avoid printing
specific dll name if we're looking at a dll.
(report): Always dump dlls on process exit.  Don't allow thread creation.
Accommodate get_entry_point rename.
(start_process): Start process with DEBUG_ONLY_THIS_PROCESS.
(longopts): Eliminate "dll" option.
(main): Ditto.
* ldd.cc: Use wide character Win32 paths throughout.
(load_dll): Fix size expression (add fn) in realloc.
@
text
@d1 4
@


1.456
log
@* ldd.cc (longopts): Add --dll option.
(get_module_filename): Generalized wrapper function which avoid path length
restrictions.
(load_dll): Handle special-case of inspecting a DLL.
(start_process): Accept an output parameter "isdll".  Detect when file to start
is a DLL and start a wrapper instead.
(print_dlls_and_kill_inferior): When dealing with a DLL, avoid printing
everything before the DLL itself first appears.  (This is not strictly correct
and should be fixed eventually)
(report): Deal with DLLs.  Don't set a breakpoint for DLLs, just let captive
ldd process terminate normally.  Pass dll info to print_dlls_and_kill_inferior.
(main): Handle special-case "--dll" option by loading the DLL and exiting.
@
text
@d1 18
@


1.455
log
@	* path.cc (from_fstab): Use wcstombs/mbstowcs instead of
	WideCharToMultiByte/MultiByteToWideChar to accommodate current locale.
@
text
@d1 17
@


1.454
log
@	* wide_path.h (class wide_path): New class to convert Windows path
	to WCHAR win32 path, including long path conversion if necessary.
	* cygcheck.cc: Use class wide_path throughout to call Win32 functions
	taking potentially long filenames.
	(display_error): Use snprintf rather than sprintf.
	(display_error_fmt): Ditto.
	(dump_sysinfo): Use FindFirstFileW/FindNextFileW.
	* cygpath.cc: Use class wide_path throughout to call Win32 functions
	taking potentially long filenames.
	(get_device_name): Raise buffer size to take long pathnames.
	(get_short_paths): Convert to using GetShortPathNameW.
	(get_short_name): Ditto.
	(get_long_path_name_w32impl): Convert to equivalent of GetLongPathNameW.
	(get_long_name): Convert to using GetLongPathNameW.
	(do_sysfolders): Raise buffer size for POSIX pathname to PATH_MAX.
	(do_pathconv): In case of POSIX->Win32 conversion, convert to wchar_t
	Win32 path name and drop long pathname prefix if possible.
	(main): Call setlocale to accommodate wide char/multibyte conversions.
@
text
@d3 5
@


1.453
log
@* ldd.cc: Rework to detect missing DLLs.
(start_process): Change to expect windows filename as input.
(tocyg): New function - convert cygwin fn to windows fn.
(print_dlls_and_kill_inferior): Accept extra argument denoting whether to open
input and look for nonexistent DLLs.  Use tocyg to convert filename and pass it
to start_process.
(report): Flag when an DLL-not-found exception occurs and pass this information
to print_dlls_and_kill_inferior.
(filelist): New structure.
(saw_file): New function.
(dump_import_directory): Ditto.
(map_file): Ditto.
(skip_dos_stub): Ditto.
(get_directory_index): Ditto.
(process_file): Ditto.
@
text
@d1 21
@


1.452
log
@	* utils.sgml: Fix typo.
@
text
@d1 18
@


1.451
log
@* cygcheck.cc (usage): Fix typo.
@
text
@d1 4
@


1.450
log
@	* utils.sgml: Set example prompt to "$" throughout.  Don't use "/"
	as example cygdrive prefix.  Remove reference to -u and -s options.
	Add an example using the -o flag.
@
text
@d1 4
@


1.449
log
@	* mount.cc (mount_entries): Handle a "/" cygdrive prefix correctly.
	Add comments.
@
text
@d3 6
@


1.448
log
@Add DESTDIR functionality to Makefile.in's.
@
text
@d1 5
@


1.447
log
@	* cygcheck.cc (dump_sysinfo): Evaluate and print state of
	obcaseinsensitive kernel flag.
@
text
@d1 4
@


1.446
log
@ChangeLog:

	* configure.in: Remove --enable-server option.  Allways add the
	cygserver directory to $SUBDIRS.
	* configure: Regenerate.

cygwin/ChangeLog:

	Remove USE_SERVER define.  Accommodate throughout.
	* configure.in: Remove --enable-server option.
	* configure: Regenerate.
	* environ.cc: Remove CYGWIN=server setting.

cygserver/ChangeLog:

	* client.cc (allow_server): Remove variable.
	(client_request_get_version::client_request_get_version): Drop checking
	allow_server.

utils/ChangeLog:

	* passwd.c: Remove CYGWIN=server requirement from usage text.

doc/ChangeLog:

	* cygserver.sgml: Remove the "How to use the Cygserver services"
	section.
	* cygwinenv.sgml: Move "(no)server" to the removed options section.
	* faq-programming.xml: Remove CYGWIN=server requirement for running
	the Cygwin testsuite.
	* ntsec.sgml: Ditto for using `passwd -R'.
@
text
@d1 5
@


1.445
log
@	* Makefile.in: Fix copyright date.
	* cygcheck.cc (scan_registry): Take additional parameter and add code
	to avoid recursion in Wow6432Node subkey.  Rename variable cygnus to
	cygwin.  Scan for "Cygwin" instead of for "cygnus" substring.
	(dump_sysinfo): Drop unused calls to scan_registry.  Drop scanning
	HKEY_CURRENT_CONFIG.
@
text
@d1 4
@


1.444
log
@	* cygcheck.cc (dump_sysinfo): Raise size of osname.  Add Windows 7
	and Windows 2008 R2 as recognized OSes.  Update products array to
	the latest documented list.
@
text
@d1 9
@


1.443
log
@* ldd.cc: New file.  First stab at implementing ldd-like functionality for
Cygwin.
* Makefile.in (CYGWIN_BINS): Add ldd.
(ldd.exe): Use -lpsapi.
@
text
@d1 6
@


1.442
log
@        * cygcheck.cc (dump_sysinfo_services): Quote the path for popen.
@
text
@d1 7
@


1.441
log
@        * cygcheck.cc (pretty_id): Quote the path for popen.
        (dump_sysinfo_services): Ditto.
@
text
@d1 4
@


1.440
log
@	* utils.sgml: Fix typo in passwd screen text.
@
text
@d1 5
@


1.439
log
@	* passwd.c (main): Put how to delete the registry password on its own
	line in passwd -R output.
@
text
@d1 4
@


1.438
log
@* utils.sgml: Convert some backslashes to slashes.
@
text
@d1 5
@


1.437
log
@	* passwd.c (longopts): Add --reg-store-pwd option.
	(opts): Add -R option.
	(usage): Add text for -R/--reg-store-pwd option.
	(main): Fix size of local user and password string arrays.
	Handle -R option.
	* utils.sgml: Add text for passwd -R/--reg-store-pwd option.
@
text
@d1 4
@


1.436
log
@* Makefile.in (ALL_LDFLAGS): Link libgcc statically for everything here.
@
text
@d1 9
@


1.435
log
@fix typo
@
text
@d1 5
@


1.434
log
@* mingw: Set sawcfile when -xc* is detected.  Extend list of detected source
filew.
@
text
@d4 1
a4 1
	source filew.
@


1.433
log
@* mingw: Add more checks to allow more varied use.
@
text
@d3 5
@


1.432
log
@* mingw: Use a better method to find where mingw directory lives.
@
text
@d1 4
@


1.431
log
@* Makefile.in: Tweak to work better with new utils/mingw front-end.
In utils:
@
text
@d3 4
@


1.430
log
@* cygcheck.cc (pathlike::check_existence): Remove class name from declaration.
(display_internet_error): Use proper format specifier for DWORD.
(environ): Remove unneeded declaration.
(main): Use brace around nested if to avoid an overly-helpful compiler warning.
* dump_setup.cc (parse_filename): Reorganize nested if to avoid an
overly-helpful compiler warning.
* path.cc (GUID_shortcut): Use braces around part of initializer which needs
them.
(conv_fstab_spaces): Parenthesize assignment in while loop to avoid a compiler
warning.
(struct opt): Make static.
* ps.cc (main): Reorganize nested if to avoid an overly-helpful compiler
warning.
* regtool.cc: Make some anonymous structs static to avoid a compiler warning.
* ssp.c (lookup_thread_id): Initialize *tix to zero to avoid potential
uninitialized use.
* strace.cc (add_child): Use proper format specifier for DWORD.
(remove_child): Ditto.
(proc_child): Ditto.
@
text
@d1 6
@


1.429
log
@* cygcheck.cc (nuke): Use malloc rather than alloca for environment variables.
(load_cygwin): Ditto.
* dump_setup.cc (parse_filename): Cosmetic changes.
(get_packages): Ditto.
@
text
@d1 25
@


1.428
log
@	* mkgroup.c (enum_local_groups): Don't skip printing groups when
	print_current is set and group SID is not curr_pgrp.
	(enum_groups): Ditto.
	(main): Fix condition when SYSTEM group gets printed.
	* mkpasswd.c (enum_users): Don't skip printing users when print_current
	is set and user SID is not curr_user.
	(main): Allow printing standard accounts even when print_current is set.
@
text
@d1 8
@


1.427
log
@	* mkgroup.c (enum_local_groups): Use NetLocalGroupGetInfo to find out
	if a group exists, rather than just allocating a buffer and going ahead.
@
text
@d1 10
@


1.426
log
@	* mkgroup.c (enum_local_groups): Call print_win_error with GetLastError
	as argument when LookupAccountXXX failed.
	(enum_groups): Ditto.
@
text
@d3 5
@


1.425
log
@	* mkgroup.c (enum_local_groups): Return failure if looking for a single
	group succeeded.  Add comment.
@
text
@d3 6
@


1.424
log
@	* mkgroup.c (main): Keep correctly track of optional arguments.
	* mkpasswd.c (main): Ditto.
@
text
@d3 5
@


1.423
log
@	* mkgroup.c (main): Always unset environment variable POSIXLY_CORRECT.
	Keep track of optional argumnts and fix up optind afterwards.
	* mkpasswd.c (main): Ditto.
@
text
@d3 5
@


1.422
log
@* cygcheck.cc (print_version): Update copyright dates.
@
text
@d1 6
@


1.421
log
@* mkpasswd.c (main): Avoid printing system accounts when a single user name has
been requested.
@
text
@d3 4
@


1.420
log
@* Makefile.in (ALL_LDFLAGS): Add --enable-auto-import option to quiet ld
warnings.
* mkgroup.c: Change all global variables and most functions to static.
(enum_local_groups): Add a print_current parameter to control whether entries
for everything should be printed or just the current user.
(enum_groups): Ditto.
(main): Move call fetch_current_pgrp_sid earlier to avoid a NULL deference when
no command line arguments are specified.  Accommodate argument changes to above
functions.  Avoid printing SYSTEM account when print_current is specified.
Issue error when extra stuff is found on the command line.
* mkpasswd.c: Change all global variables and most functions to static.
(enum_users): Add a print_current parameter to control whether entries for
everything should be printed or just the current user.
(main): Move call fetch_current_user_sid earlier to avoid a NULL deference when
no command line arguments are specified.  Accommodate argument change to above
function.  Avoid printing standard accounts when print_current is specified.
Issue error when extra stuff is found on the command line.
@
text
@d3 5
@


1.419
log
@	* mkgroup.c (fetch_current_pgrp_sid): New function to fetch primary
	group SID from user token.
	(current_group): Move up in file.  Move fetching primary group SID to
	fetch_current_pgrp_sid.
	(enum_local_groups): Check if current SID is the same as current user's
	primary group SID.
	(enum_groups): Ditto.
	(main): Call fetch_current_pgrp_sid before enumerating groups.  Call
	current_group only if current group hasn't been enumerated already.
	* mkpasswd.c (fetch_current_user_sid): New function to fetch current
	user SID from user token.
	(current_user): Move fetching current user SID to
	fetch_current_user_sid.
	(enum_users): Check if current SID is the same as current user's SID.
	(main): Call fetch_current_user_sid before enumerating users.  Call
	current_user only if current user hasn't been enumerated already.
@
text
@d1 22
@


1.418
log
@	* mount.cc (NT_MAX_PATH): Define.
	(longopts): Rename mount-commands option to mount-entries.
	(opts): Remove removed options.
	(struct opt): Move up in file to allow using it in usage.
	(usage): Change text for --mount-entries option.  Remove
	-X option.  Add valid options output.
	(main): Remove handling -b option.
	(convert_spaces): New static function to convert spaces to "\040"
	string.
	(mount_entries): Renamed from mount_commands.  Rewrite to emit
	/etc/fstab compatible output.
	(show_cygdrive_info): Print "nouser" rather than "system".
	* umount.cc (longopts): Remove remove-all-mounts,
	remove-cygdrive-prefix, remove-system-mounts, system and user options.
	(opts): Remove A, c, s, S, u options.
	(usage): Remove text for all removed options.
	(main): Remove handling for all removed options.
	(remove_all_mounts): Remove.
	(remove_all_system_mounts): Remove.
	(remove_cygdrive_prefix): Remove.
	* utils.sgml: Fix mount and umount documentation.  Move description
	of (cyg,not)exec options to mount table section.
@
text
@d1 19
@


1.417
log
@* cygcheck.cc (load_cygwin): Duplicate argv list since it disappears when
cygwin1.dll is unloaded.
@
text
@d1 25
@


1.416
log
@* Makefile.in: Link cygcheck with -lntdll even without mingw-zlib.
@
text
@d1 5
@


1.415
log
@* cygcheck.cc (load_cygwin): Free the cygwin dll after we're done with it.
@
text
@d1 4
@


1.414
log
@* mount.cc: Remove non-unix-like options (-x,-t,b) throughout.
(oopts): Use boolean constants for slightly increased clarity.
* configure.in: Remove apparently unneeded program_transfer_name code.
* configure: Regenerate.
@
text
@d1 5
@


1.413
log
@
	* utils.sgml: Remove useless text.
@
text
@d1 8
@


1.412
log
@	* mkgroup.c (main): Fix test for duplicate domain/machine request.
	* mkpasswd.c (main): Ditto.
@
text
@d1 4
@


1.411
log
@	* mkgroup.c: Rework to allow per-domain/per-machine id_offset.
	Add -b option to skip builtin groups.
	(main): Simplify code.
	* mkpasswd.c: Rework to allow per-domain/per-machine id_offset.
	(main): Simplify code.
	* utils.sgml: Explain changed mkgroup/mkpasswd -d/-D/-l/-L options.
	Add mkgroup -b option.
@
text
@d3 5
@


1.410
log
@	* mkgroup.c: Consolidate variable names.
	(enum_unix_groups): New function.
	(print_special): Use LookupAccountSidW instead of LookupAccountSidA.
	(current_group): Ditto.
	(usage): Add -U option.
	(longopts): Add --unix option.
	(opts): Add -U option.
	(main): Handle -U option.  Call enum_unix_groups if set.
	* mkpasswd.c: Consolidate variable names.
	(current_user): Use LookupAccountSidW instead of LookupAccountSidA.
	(enum_unix_users): New function.
	(usage): Add -U option.
	(longopts): Add --unix option.
	(opts): Add -U option.
	(main): Handle -U option.  Call enum_unix_groups if set.
	* utils.sgml: Add -U option text to mkgroup and mkpasswd description.
@
text
@d3 10
@


1.409
log
@	* mkgroup.c (enum_groups): Create full qualified groupname using
	domain or servername, depending on printing domain or machine accounts.
	* mkpasswd.c (enum_users): Ditto for users.
@
text
@d1 19
@


1.408
log
@	* mkgroup.c (main): Remove special root group code.  Only print
	SYSTEM group in case of printing local machine or local domain groups.
@
text
@d3 6
@


1.407
log
@	* Makefile.in (cygcheck.exe): Link against ntdll.
	* bloda.cc: Use statically linked functions throughout.
	* cygpath.cc: Drop 9x considerations.
	* mkgroup.c: Revamp.  Redefine -l and -d options to take optional
	machine and domain parameters.  Redefine -c to work always, using
	token information.  Add -L, -D, -C to create unique groupnames in
	domain\group syntax.  Add -S option to define domain\group separator
	char.  Ignore -u and -s options.
	* mkpasswd.c: Revamp.  Redefine -l and -d options to take optional
	machine and domain parameters.  Redefine -c to work always, using
	token information.  Add -L, -D, -C to create unique usernames in
	domain\user syntax.  Add -S option to define domain\user separator
	char.  Ignore -g and -s options.  Prefer to take homedir from $HOME
	over $HOMEDRIVE/$HOMEPATH.
	* path.cc (oopts): Add "acl", "noacl", "posix=0" and "posix=1" options.
	(getmntent): Accomodate throughout.
	* ps.cc: Fix copyright dates.
	* utils.sgml: Fix text for mkgroup and mkpasswd.
@
text
@d3 5
@


1.406
log
@	* mount.cc (do_mount): Remove MOUNT_ENC code.
	(oopts): Remove "managed" option.
	(mount_commands): Drop "managed" handling.
	* path.cc (oopts): Remove "managed" option.
	(getmntent): Remove MOUNT_ENC code.
@
text
@d1 21
@


1.405
log
@	* utils.sgml: Add id's to all examples.
@
text
@d3 8
@


1.404
log
@	* mkgroup.c: Use statically linked functions throughout, except for
	DsGetDcNameW.  Reformat.  Convert to use WCHAR for names throughout.
	Use defines instead of constants throughout.
	(MAX_SID_LEN): Define.
	(load_netapi): Just load DsGetDcNameW pointer.
	(psx_dir): Remove.
	(uni2ansi): Remove.
	(enum_local_users): Take server name and use in Net... call.
	(DBGSID): Define datastructure.
	(MAX_BUILTIN_SIDS): Define.
	(builtin_sid_list): Define global sid list.
	(builtin_sid_cnt): Define counter for global sid list.
	(enum_local_groups): Take server name and use in Net... and Lookup...
	calls.  Take offset argument.  Use MAX_PREFERRED_LENGTH in call to
	NetLocalGroupEnum.  Check for duplicate builtin groups.
	(enum_users): Take server name and use in Net... call.
	(usage): Change text slightly.
	(print_version): Fix copyright.
	(main): Call enum_local_groups for domains as well.
	* mkpasswd.c: Use statically linked functions throughout, except for
	DsGetDcNameW.  Reformat.  Convert to use WCHAR for names throughout.
	Use defines instead of constants throughout.
	(MAX_SID_LEN): Define.
	(load_netapi): Just load DsGetDcNameW pointer.
	(uni2ansi): Use wcstombs.
	(current_user): Replace "unused_by_nt/2000/xp" by
	just "unused".
	(enum_users): Ditto.
	(print_version): Fix copyright.
@
text
@d1 4
@


1.403
log
@	* setfacl.c (setfacl): Change from void to int.  Return 2 in case of
	error.
	(main): Return with error code from setfacl.
@
text
@d1 32
@


1.402
log
@	* Makefile.in (CYGWIN_BINS): Remove ipcrm and ipcs.
	* ipcrm.c: Remove.
	* ipcs.c: Remove.
@
text
@d1 6
@


1.401
log
@	* mount.cc (usage): Mark -s and -u as ignored.
	(print_version): Simplify printing copyright dates.
	(main): Remove default_flag.  Dont set flags on -s and -u options.
	(mount_commands): Drop handling -s and -u options.
@
text
@d1 6
@


1.400
log
@	* cygcheck.cc (dump_sysinfo): Fix multiple Cygwin DLL test.
	* path.cc: Fetch mount points from fstab files instead of from
	registry.  Use adapted functions copied from Cygwin DLL.
	(mnt_t): Drop issys member.  Define as "mnt_t" instead of "struct mnt_t"
	subsequently.
	(max_mount_entry): New variable.
	(unconvert_slashes): Move to earlier location in file.  Make inline.
	(find2): Remove.
	(get_cygdrive0): Remove.
	(get_cygdrive): Remove.
	(skip_ws): New function.
	(find_ws): Ditto.
	(conv_fstab_spaces): Ditto.
	(read_flags): Ditto.
	(from_fstab_line): Ditto.
	(get_user): Ditto.
	(from_fstab): Ditto.
	(mnt_sort): Ditto.
	(read_mounts): Drop old registry code.  Fetch
	"Software\Cygwin\Setup\rootdir" value from HKCU or HKLM key.  Use
	rootdir extracted from module path as fallback.  Call from_fstab for
	nouser and user mount points.
	(setmntent): Check max_mount_entry to test if read_mounts must be
	called.
	(getmntent): Use MOUNT_SYSTEM flag instead of mnt_t's issys member.
@
text
@d1 7
@


1.399
log
@	* path.cc: Include malloc.h for alloca.
	(is_symlink): Rewrite.  Just read the whole file in memory rather
	than by parts.  Account for an ITEMIDLIST if present, as well as
	the new style of Cygwin shortcut supporting targets > MAX_PATH.
@
text
@d1 28
@


1.398
log
@	* cygpath.cc (do_sysfolders): Use cygwin_conv_path.
	(do_pathconv): Use cygwin_conv_path and cygwin_conv_path_list.
	* dumper.cc (main): Use cygwin_conv_path.  Allocate target path
	dynamically.
	* mkpasswd.c (current_user): Use cygwin_conv_path.
	(enum_users): Ditto.
	* ps.cc (NT_MAX_PATH): Define.
	(main): Use cygwin_conv_path.
	* regtool.cc (find_key): Ditto. Allocate target path dynamically.
	(cmd_save): Ditto.
@
text
@d1 7
@


1.397
log
@	* cygcheck.cc (find_app_on_path): Make buffer SYMLINK_MAX + 1
	chars.
@
text
@d1 13
@


1.396
log
@	* cygcheck.cc (dirname): New static function.
	(find_app_on_path): Use SYMLINK_MAX.  Resolve symlink relative
	to link's location.  Adjust to the fact that cygpath already
	normalizes its return value.
	* path.cc (rel_vconcat): Add cwd parameter, and use it instead
	of calling GetCurrentDirectory() if possible.  Rename throughout.
	(vcygpath): Rename from cygpath and accept cwd and va_list.  Pass
	cwd on to rel_vconcat().
	(cygpath_rel): New front end for vcygpath.
	(cygpath): Ditto.
	* path.h (cygpath_rel): Declare.
	(SYMLINK_MAX): Define to 4095.
@
text
@d3 5
@


1.395
log
@	* Makefile.in (install): Don't install the testsuite.
@
text
@d1 15
@


1.394
log
@	* Makefile.in: Add a 'check' target that builds and runs
	testsuite.exe from path-testsuite.o and testsuite.o.
	* path.cc: Include testsuite.h.
	(struct mnt): Change to a mnt_t typedef and don't define
	mount_table when TESTSUITE is defined.
	(find2): Don't include when TESTSUITE is defined to avoid warning.
	(get_cygdrive0): Ditto.
	(get_cygdrive): Ditto.
	(read_mounts): Provide empty implementation when TESTSUITE is
	defined.
	(vconcat): Use the isslash macro.
	(unconvert_slashes): New helper to convert to backslashses.
	(rel_vconcat): Handle relative paths more gracefully.
	(cygpath): Skip a leading "./" sequence.  Avoid double-slashes.
	Normalize final output to backslashes and remove redundant path
	sequences.
	* testsuite.cc: New file implementing testsuite driver.
	* testsuite.h: New header implementing harness mount table and
	series of tests.
@
text
@d1 4
@


1.393
log
@	* Makefile.in: Reorganize considerably, using GNU make's
	static pattern rules and target-specific variables.
@
text
@d3 22
@


1.392
log
@	* mkpasswd.c (main): Simplify generating SYSTEM entry.  Add entries
	for LocalService and NetworkService accounts.  Change comments.
@
text
@d1 5
@


1.391
log
@	* cygcheck.cc (dump_sysinfo): Always try to get a OSVERSIONINFOEX
	first.  Load kernel32.dll earlier.  Make osname a buffer.  Simplify
	Non-NT code.  Use GetProductInfo in Vista/2008 case.  Clean up
	non-Vista version info.  Exit early if not on NT.
@
text
@d1 5
@


1.390
log
@	* bloda.cc (enum bad_app):  Add BYTEMOBILE.
	(dodgy_app_detects[]):  Add FILENAME entry to detect bmnet.dll.
	(big_list_of_dodgy_apps[]):  Add description for BYTEMOBILE.
@
text
@d1 7
@


1.389
log
@	* Makefile.in (cygcheck.exe): Don't link to ntdll.
	* bloda.cc (pNtQuerySystemInformation): Add.
	(pRtlAnsiStringToUnicodeString): Add.
	(get_process_list): Use function pointers for NT functions.
	(dump_dodgy_apps): Skip dodgy app check on non-NT platforms.
	Use GetProcAddress for NT-specific functions.
@
text
@d1 6
@


1.388
log
@	* regtool.cc (opts): Add missing 'W'.
@
text
@d1 9
@


1.387
log
@	* ps.cc: Include limits.h.
	(main): Set file name buffer size to PATH_MAX.  Use progname or
	progname_long member of struct external_pinfo dependent of the value of
	the struct's version member.
@
text
@d1 4
@


1.386
log
@2007-08-31  Dave Korn  <dave.korn@@artimi.com>

	* mkgroup.c (enum_groups):  Use MAX_PREFERRED_LENGTH in netgroupenum
	call so that it will automatically size returned buffer sufficiently.
@
text
@d1 7
@


1.385
log
@	* Makefile.in (cygcheck.exe):  Add bloda.o as prerequisite, adjusting
	dependency-filtering $(wordlist ...) call appropriately.  Link ntdll.
	(bloda.o):  New rule to build bloda.o
	* cygcheck.cc (dump_sysinfo):  Call bloda function dump_dodgy_apps().
	* bloda.cc:  New file implements detection of applications from the
	Big List Of Dodgy Apps.
@
text
@d1 5
@


1.384
log
@	Add missing ChangeLog entry.
@
text
@d1 9
@


1.383
log
@	* dumper.cc: Change license to plain GPLv2 + later.
	* dumper.h: Ditto.
	* parse_pe.cc: Ditto.
@
text
@d3 1
@


1.382
log
@* strace.cc (create_child): Don't convert a path from cygwin format unless it
has a slash.
@
text
@d1 6
@


1.381
log
@* strace.cc (usage): Add missing description for -q.
@
text
@d1 5
@


1.380
log
@* cygwin/strsig.cc (__signals): New macro.
(sys_sigabbrev): New array of signal strings, patterned after linux.
(siglist): Use __signals.
* cygwin/include/cygwin/signal.h (sys_sigabbrev): Define.
* cygwin/include/cygwin/version.h: Bump API minor version to 177.

* utils/Makefile.in (kill.exe): Remove reliance on libiberty.
* utils/kill.cc (strsigno): New function patterned after libiberty but using
newly exported cygwin array.
@
text
@d3 4
@


1.379
log
@* cygcheck.cc (pathlike): New class.
(paths): Redefine as type pathlike.
(display_error): Declare a few different ways to allow more flexible usage
throughout.
(display_error_fmt): New function for those cases where C++ just isn't enough.
(add_path): Rewrite to allocate pathlike paths.  Always tack on a trailing
slash since that's what everyone who uses it wants.  NULL terminate the path
list.  Register "it's a system path" field.
(init_path): Call add_path with info regarding whether path is a system path or
not.
(pathlike::check_existence): Move into pathlike class.  Accept file and
extension arguments to build up path on the fly.  Modify other arguments.
(find_on_path): Constify return value and appropriate arguments.  Eliminate
short-circuit for fully-qualified paths.  Simplify loop which iterates over
path.
(already_did): Constify argument.
(track_down): Ditto.  Regularize some error messages.
(find_app_on_path): Ditto.
(cygcheck): Constify argument.  Use 20th century string handling functions.
(dump_sysinfo): Remove odd inclusion of '\\bin' "Just in case".  Accommodate
change of paths to pathlike.
* path.cc (isslash): Rename from SLASH_P and use throughout.
(rel_vconcat): Front-end to vconcat which prepends cwd to path before passing
along for conversion to native windows.
(cygpath): Remove "./" test.  Call rel_vconcat if filename appears to be
relative.
@
text
@d1 6
@


1.378
log
@	* dumper.cc (dumper::prepare_core_dump): Record a phdr for each section.
@
text
@d1 32
@


1.377
log
@	* cygpath.cc (do_options): Allow outputflag combined with other
	basic flags.  Only check options_from_file_flag if reading options
	from command line.
	(main): Check for NULL argz vector.  Don't free argz vector prematurely.
	Don't force flag combination in !options_from_file_flag case.
@
text
@d1 4
@


1.376
log
@	* cygpath.cc: Include argz.h.
	(options_from_file_flag): Move from main to global static variable.
	(mode_flag): Ditto.
	(do_sysfolders): Rename from dowin and accommodate throughout.
	Don't exit from here.
	(do_pathconv): Rename from doit and accommodate throughout.
	(print_version): Change copyright.
	(do_options): New function, centralizing option processing.
	Rework checking options for correctness.
	(action): New function, centralizing calling worker functions.
	(main): Simplify.  Move option processing to do_options.  Move calling
	worker functions to action.  Rework getting arguments from files.
@
text
@d1 8
@


1.375
log
@* utils/cygpath.cc (get_long_path_name_w32impl): Close handles returned by
FindFirstFile.
@
text
@d1 15
@


1.374
log
@* cygwin/external.cc (cygwin_internal): Implement CW_SET_DOS_FILE_WARNING.
* cygwin/include/sys/cygwin.h: Define CW_SET_DOS_FILE_WARNING.
* utils/mount.cc (main): Turn dos file warnings off since we know what we're
doing.
@
text
@d1 5
@


1.373
log
@	* ipcs.c (_POSIX2_LINE_MAX): Drop definition.
@
text
@d1 5
@


1.372
log
@	* cygcheck.cc (dump_sysinfo): Add "not supported" to osname on 9x
	machines.  Drop "not supported" for Vista.  Drop "Longhorn" text
	for now.
@
text
@d1 4
@


1.371
log
@	* cygpath.cc (usage): Add -O and -F, remove tabs.
	(get_special_folder): New function.
	(get_user_folder): New function.
	(dowin): Add -O and -F, better -D, -P error handling.
	(main): Add -O and -F.
	* utils.sgml (cygpath): Document -O and -F.
@
text
@d1 6
@


1.370
log
@	* dumper.cc: Include ansidecl.h before including bfd.h to woraround
	a problem with the order in which system include files are included.
@
text
@d1 9
@


1.369
log
@* dumper.cc: Add an include to accommodate new include/elf usage.
@
text
@d1 5
@


1.368
log
@correct email address
@
text
@d1 4
@


1.367
log
@* mount.cc (do_mount): Avoid unnecessary cygwin_conv_to_win32_path and pass
POSIX path directly - this avoids a cygwin DLL warning.
@
text
@d1 1
a1 1
2006-12-10  Christopher Faylor  <cgf@@timesys.com>
@


1.366
log
@	* regtool.cc (key_type): Drop.
	(REG_AUTO): Define.
	(value_type): Replace key_type.  Use REG_xxx values directly.
	Accomodate change throughout.
	(longopts): Add --dword, --dword-le, --none, --qword and --hex options.
	(opts): Add -d, -D, -n, -Q and -x options.
	(types): Array to convert REG_xxx into strings.
	(hex): New variable to keep value of --hex option.
	(usage): Accomodate new options.  Print only the necessary by default.
	Only be verbose in case of -h/--help option.
	(cmd_list): Use key separator from -K option when printing.
	Print value type when verbose option is given.  Handle so far not
	handled REG_xxx types.
	(cmd_set): Avoid SEGV due to missing argument.  Handle so far not
	handled REG_xxx types.
	(cmd_get): Handle --binary option type agnostic.  Handle so far not
	handled REG_xxx types.
	(main): Handle new options.
@
text
@d1 5
@


1.365
log
@	* regtool.cc (longopts): Add --wow32 option.
	(opts): Add -W option.
	(usage): Add text for --wow32/-W option.
	(main): Handle --wow32/-W option.
	* utils.sgml: Document the new -W option.
@
text
@d1 21
@


1.364
log
@	* regtool.cc (KEY_WOW64_64KEY): Drop definition.  Instead define
	WINVER to 0x0502 before including windows.h.
@
text
@d1 8
@


1.363
log
@	* regtool.cc (KEY_WOW64_64KEY): Define.
	(longopts): Add --wow64 option.
	(opts): Add -w option.
	(wow64): New variable to control usage of KEY_WOW64_64KEY access flag.
	(usage): Add text for --wow64/-w option.
	(print_version): Fix copyright.
	(find_key): Use wow64 value in calls to RegOpenKeyEx and RegCreateKeyEx.
	(cmd_add): Use wow64 value in call to RegCreateKeyEx.
	(regDeleteKeyEx): New function pointer to load RegDeleteKeyEx function
	dynamically.
	(cmd_remove): Load and use regDeleteKeyEx when wow64 is set.
	(main): Handle --wow64/-w option.
	* utils.sgml: Document the new -w option.
@
text
@d3 5
@


1.362
log
@	* cygcheck.cc (get_word, get_dword): Move to path.cc.
	(LINK_EXTENSION): New macro.
	(check_existence): New static function.
	(find_on_path): Check for symbolic links if asked.
	(dll_info): New error handling.
	(track_down): Only call dll_info() for executables, display
	an error for symlinks, and print magic number for others.
	(find_app_on_path): New static function.
	(cygcheck, dump_sysinfo): Call find_app_on_path() instead of
	find_on_path().
	* path.cc (cmp_shortcut_header): New static function.
	(get_word, get_dword): Moved from cygcheck.cc.
	(EXE_MAGIC, SHORTCUT_MAGIC, SYMLINK_COOKIE, SYMLINK_MAGIC): New
	macros.
	(is_exe, is_symlink, readlink): New functions.
	* path.h (is_exe, is_symlink, readlink): Declare.
	(get_word, get_dword): Ditto.
@
text
@d1 16
@


1.361
log
@* Makefile.in: Fix -ntdll typo.
* cygcheck.cc (main): Restore POSIXLY_CORRECT before displaying user's
environment.
@
text
@d1 20
@


1.360
log
@	* path.cc (vconcat): Don't convert backslahes to slashes.
	(cygpath): Return native path with all backslashes.
@
text
@d1 9
d261 1
a261 1
            Eric Blake  <ebb9@@byu.net>
@


1.359
log
@	* Makefile.in (cygpath.exe): Add rule to link cygpath against ntdll.dll.
	* cygpath.cc: Include DDK headers.
	(RtlAllocateUnicodeString): New static inline function.
	(get_device_name): New static function to evaluate DOS path from
	native NT path.
	(get_device_paths): New function to do the same for path lists.
	(doit): Call get_device_paths/get_device_name where appropriate.
@
text
@d1 5
@


1.358
log
@	* cygpath.cc (get_long_name): Fallback to get_long_path_name_w32impl.
@
text
@d1 10
@


1.357
log
@	* cygpath.c (get_long_name): Cover the case that GetLongPathName
	doesn't return valid information for non-existant files.  Just return
	incoming filename in that case.
@
text
@d1 4
@


1.356
log
@	* Makefile.in: Build setmetamode.exe.
	* setmetamode.c: New file.
@
text
@d1 6
@


1.356.4.1
log
@2007-08-31  Dave Korn  <dave.korn@@artimi.com>

	* mkgroup.c (enum_groups):  Use MAX_PREFERRED_LENGTH in netgroupenum
	call so that it will automatically size returned buffer sufficiently.

2007-08-03  Dave Korn  <dave.korn@@artimi.com>

	* Makefile.in (cygcheck.exe):  Add bloda.o as prerequisite, adjusting
	dependency-filtering $(wordlist ...) call appropriately.  Link ntdll.
	(bloda.o):  New rule to build bloda.o
	* cygcheck.cc (dump_sysinfo):  Call bloda function dump_dodgy_apps().
	* bloda.cc:  New file implements detection of applications from the
	Big List Of Dodgy Apps.

2007-07-24  Corinna Vinschen  <corinna@@vinschen.de>

	* COPYING.dumper: New file.
	* dumper.cc: Change license to plain GPLv2 + later.
	* dumper.h: Ditto.
	* parse_pe.cc: Ditto.

2007-07-23  Christopher Faylor  <me+cygwin@@cgf.cx>

	* strace.cc (create_child): Don't convert a path from cygwin format
	unless it has a slash.

2007-07-09  Christopher Faylor  <me+cygwin@@cgf.cx>

	* strace.cc (usage): Add missing description for -q.

2007-05-29  Pedro Alves  <pedro_alves@@portugalmail.pt>

	* dumper.cc (dumper::prepare_core_dump): Record a phdr for each section.

2007-03-30  Mark Mitchell  <mark@@codesourcery.com>

	* utils/cygpath.cc (get_long_path_name_w32impl): Close handles returned
	by FindFirstFile.

2006-09-11  Eric Blake  <ebb9@@byu.net>

	* cygcheck.cc (main): Restore POSIXLY_CORRECT before displaying user's
	environment.

2006-08-03  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc (vconcat): Don't convert backslahes to slashes.
	(cygpath): Return native path with all backslashes.

2006-07-30  Ilya Bobir  <ilya@@po4ta.com>

	* cygpath.cc (get_long_name): Fallback to get_long_path_name_w32impl.

2006-07-27  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.c (get_long_name): Cover the case that GetLongPathName
	doesn't return valid information for non-existant files.  Just return
	incoming filename in that case.
@
text
@a0 59
2007-08-31  Dave Korn  <dave.korn@@artimi.com>

	* mkgroup.c (enum_groups):  Use MAX_PREFERRED_LENGTH in netgroupenum
	call so that it will automatically size returned buffer sufficiently.

2007-08-03  Dave Korn  <dave.korn@@artimi.com>

	* Makefile.in (cygcheck.exe):  Add bloda.o as prerequisite, adjusting
	dependency-filtering $(wordlist ...) call appropriately.  Link ntdll.
	(bloda.o):  New rule to build bloda.o
	* cygcheck.cc (dump_sysinfo):  Call bloda function dump_dodgy_apps().
	* bloda.cc:  New file implements detection of applications from the
	Big List Of Dodgy Apps.

2007-07-24  Corinna Vinschen  <corinna@@vinschen.de>

	* COPYING.dumper: New file.
	* dumper.cc: Change license to plain GPLv2 + later.
	* dumper.h: Ditto.
	* parse_pe.cc: Ditto.

2007-07-23  Christopher Faylor  <me+cygwin@@cgf.cx>

	* strace.cc (create_child): Don't convert a path from cygwin format
	unless it has a slash.

2007-07-09  Christopher Faylor  <me+cygwin@@cgf.cx>

	* strace.cc (usage): Add missing description for -q.

2007-05-29  Pedro Alves  <pedro_alves@@portugalmail.pt>

	* dumper.cc (dumper::prepare_core_dump): Record a phdr for each section.

2007-03-30  Mark Mitchell  <mark@@codesourcery.com>

	* utils/cygpath.cc (get_long_path_name_w32impl): Close handles returned
	by FindFirstFile.

2006-09-11  Eric Blake  <ebb9@@byu.net>

	* cygcheck.cc (main): Restore POSIXLY_CORRECT before displaying user's
	environment.

2006-08-03  Corinna Vinschen  <corinna@@vinschen.de>

	* path.cc (vconcat): Don't convert backslahes to slashes.
	(cygpath): Return native path with all backslashes.

2006-07-30  Ilya Bobir  <ilya@@po4ta.com>

	* cygpath.cc (get_long_name): Fallback to get_long_path_name_w32impl.

2006-07-27  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.c (get_long_name): Cover the case that GetLongPathName
	doesn't return valid information for non-existant files.  Just return
	incoming filename in that case.

@


1.356.4.2
log
@	* regtool.cc (KEY_WOW64_64KEY): Define conditionally.
	(KEY_WOW64_32KEY): Ditto.
	(opts): Add missing 'W'.

	* regtool.cc (key_type): Drop.
	(REG_AUTO): Define.
	(value_type): Replace key_type.  Use REG_xxx values directly.
	Accomodate change throughout.
	(longopts): Add --dword, --dword-le, --none, --qword and --hex options.
	(opts): Add -d, -D, -n, -Q and -x options.
	(types): Array to convert REG_xxx into strings.
	(hex): New variable to keep value of --hex option.
	(usage): Accomodate new options.  Print only the necessary by default.
	Only be verbose in case of -h/--help option.
	(cmd_list): Use key separator from -K option when printing.
	Print value type when verbose option is given.  Handle so far not
	handled REG_xxx types.
	(cmd_set): Avoid SEGV due to missing argument.  Handle so far not
	handled REG_xxx types.
	(cmd_get): Handle --binary option type agnostic.  Handle so far not
	handled REG_xxx types.
	(main): Handle new options.

	* regtool.cc (longopts): Add --wow32 option.
	(opts): Add -W option.
	(usage): Add text for --wow32/-W option.
	(main): Handle --wow32/-W option.
	* utils.sgml: Document the new -W option.

	* regtool.cc (KEY_WOW64_64KEY): Drop definition.  Instead define
	WINVER to 0x0502 before including windows.h.

	* regtool.cc (KEY_WOW64_64KEY): Define.
	(longopts): Add --wow64 option.
	(opts): Add -w option.
	(wow64): New variable to control usage of KEY_WOW64_64KEY access flag.
	(usage): Add text for --wow64/-w option.
	(print_version): Fix copyright.
	(find_key): Use wow64 value in calls to RegOpenKeyEx and RegCreateKeyEx.
	(cmd_add): Use wow64 value in call to RegCreateKeyEx.
	(regDeleteKeyEx): New function pointer to load RegDeleteKeyEx function
	dynamically.
	(cmd_remove): Load and use regDeleteKeyEx when wow64 is set.
	(main): Handle --wow64/-w option.
	* utils.sgml: Document the new -w option.
@
text
@a0 6
2007-12-07  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (KEY_WOW64_64KEY): Define conditionally.
	(KEY_WOW64_32KEY): Ditto.
	(opts): Add missing 'W'.

a39 50
2006-10-21  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (key_type): Drop.
	(REG_AUTO): Define.
	(value_type): Replace key_type.  Use REG_xxx values directly.
	Accomodate change throughout.
	(longopts): Add --dword, --dword-le, --none, --qword and --hex options.
	(opts): Add -d, -D, -n, -Q and -x options.
	(types): Array to convert REG_xxx into strings.
	(hex): New variable to keep value of --hex option.
	(usage): Accomodate new options.  Print only the necessary by default.
	Only be verbose in case of -h/--help option.
	(cmd_list): Use key separator from -K option when printing.
	Print value type when verbose option is given.  Handle so far not
	handled REG_xxx types.
	(cmd_set): Avoid SEGV due to missing argument.  Handle so far not
	handled REG_xxx types.
	(cmd_get): Handle --binary option type agnostic.  Handle so far not
	handled REG_xxx types.
	(main): Handle new options.

2006-10-19  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (longopts): Add --wow32 option.
	(opts): Add -W option.
	(usage): Add text for --wow32/-W option.
	(main): Handle --wow32/-W option.
	* utils.sgml: Document the new -W option.

2006-10-16  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (KEY_WOW64_64KEY): Drop definition.  Instead define
	WINVER to 0x0502 before including windows.h.

2006-10-16  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (KEY_WOW64_64KEY): Define.
	(longopts): Add --wow64 option.
	(opts): Add -w option.
	(wow64): New variable to control usage of KEY_WOW64_64KEY access flag.
	(usage): Add text for --wow64/-w option.
	(print_version): Fix copyright.
	(find_key): Use wow64 value in calls to RegOpenKeyEx and RegCreateKeyEx.
	(cmd_add): Use wow64 value in call to RegCreateKeyEx.
	(regDeleteKeyEx): New function pointer to load RegDeleteKeyEx function
	dynamically.
	(cmd_remove): Load and use regDeleteKeyEx when wow64 is set.
	(main): Handle --wow64/-w option.
	* utils.sgml: Document the new -w option.

@


1.356.4.3
log
@	* Makefile.in (cygcheck.exe): Don't link to ntdll.
	* bloda.cc (pNtQuerySystemInformation): Add.
	(pRtlAnsiStringToUnicodeString): Add.
	(get_process_list): Use function pointers for NT functions.
	(dump_dodgy_apps): Skip dodgy app check on non-NT platforms.
	Use GetProcAddress for NT-specific functions.
@
text
@a0 9
2007-12-23  Brian Dessent  <brian@@dessent.net>

	* Makefile.in (cygcheck.exe): Don't link to ntdll.
	* bloda.cc (pNtQuerySystemInformation): Add.
	(pRtlAnsiStringToUnicodeString): Add.
	(get_process_list): Use function pointers for NT functions.
	(dump_dodgy_apps): Skip dodgy app check on non-NT platforms.
	Use GetProcAddress for NT-specific functions.

@


1.356.4.4
log
@	* mkpasswd.c (main): Simplify generating SYSTEM entry.  Add entries
	for LocalService and NetworkService accounts.  Change comments.
@
text
@a0 5
2008-02-28  Corinna Vinschen  <corinna@@vinschen.de>

	* mkpasswd.c (main): Simplify generating SYSTEM entry.  Add entries
	for LocalService and NetworkService accounts.  Change comments.

@


1.355
log
@update to newer autoconf
@
text
@d1 5
@


1.354
log
@* strace.cc (proc_child): Propagate return code from child process.
(dostrace): Ditto.
(main): Ditto.
@
text
@d3 7
@


1.353
log
@	* regtool.cc (options): Add 'binary'.
	(usage): Document 'load|unload|save' and '-b'.
	(find_key): Add 'options' parameter, add load/unload.
	(cmd_set): Add KT_BINARY case.
	(cmd_get): Add hex output in KT_BINARY case.
	(cmd_load): New function.
	(cmd_unload): New function.
	(set_privilege): New function.
	(cmd_save): New function.
	(commands): Add load, unload and save.
	(main): Add '-b'
	* utils.sgml (regtool): Document it.
@
text
@d1 6
@


1.352
log
@	* cygpath.cc (get_long_name): Load GetLongPathNameA instead of incorrect
	GetLongPathName.
	(doit): Create mixed filename after converting to short or long pathname
	respectively.
@
text
@d1 15
@


1.351
log
@	* ps.cc (main): Set aflag if -p option is given.
@
text
@d1 7
@


1.350
log
@	* ps.cc (longopts): Add --process option.
	(opts): Add -p option.
	(usage): Mention -p/--process option.
	(main): Handle -p option.
	* utils.sgml: Describe -p/--process option.
@
text
@d1 4
@


1.349
log
@	* regtool.cc (usage): Clarify help for "-K".
@
text
@d1 8
@


1.348
log
@	* cygcheck.cc (find_on_path): Update copyright text.
@
text
@d1 4
@


1.347
log
@	* cygcheck.cc (find_on_path): Create copy of rv on successful access
	check, since rv can be reused in subsequent calls.
@
text
@d3 4
@


1.346
log
@* cygcheck.cc (common_paths): Add "patch".
@
text
@d1 5
@


1.345
log
@* cygcheck.cc (init_paths): Record first_nonsys_path.
(find_on_path): Start on first nonsys path when !search_sysdirs.
@
text
@d3 4
@


1.344
log
@white space
@
text
@d1 5
@


1.343
log
@Wasn't going to check this in but since it did get checked in, here's a ChangeLog.
@
text
@d12 1
a12 1
	* cygpath.cc (dowin):  Remove stray debugging printf statement.
@


1.342
log
@* cygpath.cc (dowin):  Remove stray debugging printf statement.
@
text
@d1 9
@


1.341
log
@	* Makefile.in: Replace etcdir with sysconfdir.
@
text
@d1 4
@


1.340
log
@	* Makefile.in (cygcheck.exe): Do not link against libwininet.a.
	* cygcheck.cc (pInternetCloseHandle): Define global function pointer.
	(display_internet_error): Use it.
	(package_grep): Attempt to load wininet.dll at runtime.  Call WinInet
	API through function pointers throughout.
@
text
@d1 4
@


1.339
log
@	* cygcheck.cc (dump_sysinfo): Convert k32 to HMODULE.
@
text
@d1 8
@


1.338
log
@	* cygcheck.cc (dump_sysinfo): Convert osname to const and remove casts
	in subsequent assignments.  Recognize Longhorn/Vista and report as not
	yet supported.  Recognize when running under WOW64 and report native
	CPU type.  Slightly rearrange \n printing.
@
text
@d3 4
@


1.337
log
@* cygcheck.cc: Replace ` with ' throughout.
@
text
@d1 7
@


1.336
log
@* cygcheck.cc (dump_sysinfo): Report the failing drive to prevent having to
guess.
@
text
@d1 4
@


1.335
log
@*** cygwin DLL Changes:
* child_info.h (CURR_CHILD_INFO_MAGIC): Reset.
(child_info::dwProcessId): Delete.
(child_info::straced): New variable.
(child_info::handle_fork): New member function.
* dcrt0.cc (in_forkee): New global variable.
(__cygwin_user_data::forkee): Mark as obsolete.
(do_global_ctors): Use in_forkee rather than user_data->forkee.
(get_cygwin_startup_info): Ditto.  Deal with new straced field to allow strace
to deal with children of attached processes.
(initial_env): Accommodate changes to strace::hello.
(child_info_fork::handle_fork): Rename from plain old 'handle_fork'.  Move
alloc_stack() call elsewhere.
(dll_crt0_0): Fill out more of user_data.  Reference handle_fork via fork_info.
Add some debugging output.
(_dll_crt0): Don't wait for sync thread if sync_startup is invalid.  Zero
sync_startup here.  Call alloc_stack() here, if appropriate.
(dll_crt0_1): Use in_forkee rather than user_data->forkee.
(dll_crt0): Ditto.
* malloc_wrapper.cc (malloc_init): Ditto.
* dll_init.cc (in_forkee): Remove local static version of this variable.
(dll_list::load_after_fork): Don't set in_forkee here.
* external.cc (cygwin_internal): Use strace method rather than accessing field
directly.
* fhandler.cc (fhandler_base::read): Ditto.
* fhandler_tty.cc (fhandler_tty_common::__acquire_output_mutex): Ditto.
* fork.cc (frok::parent): Invoke strace write_childpid to communicate with
potential strace.
(child_copy): Add more detail to debugging output.
* init.cc (calibration_id): New static variable.
(prime_threads): Set sync_startup to invalid handle if we already know about
thread_func_ix.  Use static calibration_id to hold calibration thread id.
* munge_threadfunc (munge_threadfunc): Don't try to debug if we don't find
threadfunc_ix.
(dll_entry): Avoid calling munge_threadfunc and _cygtls::remove on non-cygwin
threads invoked during process startup.
* pinfo.cc (set_myself): Always call strace.hello here regardless of DEBUGGING.
* sigproc.cc (child_info::child_info): Remove spurious handling of dwProcessId.
Set straced as appropriate.
* spawn.cc (spawn_guts): Rename ciresrv to ch.  Invoke strace write_childpid to
communicate with potential strace.
* strace.cc: Include child_info.h.
(strace::hello): Remove inited test.  Use active() method to test if strace has
been activated.  Handle case where we are started before
(mypid): New function.
(strace::vsprntf): Try to deal more intelligently with case where progname may
not be filled out.  Put pid in parentheses if it is a windows pid rather than a
cygwin pid.  myself has been filled out.
(strace::write_childpid): New function for notifying strace about the creation
of children.
(strace::vprntf): Use strace method rather than accessing field directly.
(strace_printf): Ditto.
(strace::wm): Ditto.
* winsup.h (in_forkee): Declare.
* include/sys/strace.h (strace::write_childpid): Declare new function.
(strace::attached): Define new function.
(strace::active): Ditto.
(strace::active_val): Ditto.
(_STRACE_ON): Delete.
(_STRACE_OFF): Ditto.
(define_strace0): Use strace method rather than accessing field directly.
(strace_printf_wrap): Ditto.
(strace_printf_wrap1): Ditto.

*** cygwin utils changes:
* strace.cc (nprocesses): Make static global.
(quiet): New variable.
(strace_active): Ditto.
(add_child): Increment nprocesses here.  Don't add a child if it is already
added (windows bug?).  Report on child if not quiet.
(get_child): Just return NULL if child not found.
(remove_child): Report on child if not quiet.
(attach_process): Don't complain if given a windows process.  Use windows pid
in error.
(handle_output_debug_string): Issue error if trying to manipulate a process
that we don't know about.  Handle _STRACE_CHILD_PID - attach to reported child
when we get this.
(proc_child): Move nprocesses to file scope.  Report on exceptions.
(longopts): Implement "--quiet".
(opts): Implement "-q".
(main): Manipulate quiet flag.
* utils.sgml (strace): Add words describing '-q'.
@
text
@d1 5
@


1.334
log
@* cygcheck.cc (common_apps): Add crontab, vi, vim.
@
text
@d3 20
@


1.333
log
@	* dump_setup.cc (package_find): Fix is_alias computation for "/usr/lib".
@
text
@d1 4
@


1.332
log
@* cygcheck.cc (common_apps): Add a few more binaries to look for.
@
text
@d1 4
@


1.331
log
@* strace.cc (show_usecs): Renamed from 'usecs'.
(main): Use show_usecs rather than usecs.  Toggle delta if '-u' is specified.
(handle_output_debug_string): Avoid printing microsecond timestamp if
show_usecs == 0.
* utils.sgml (strace): Add words to describe '-u'.
@
text
@d1 4
@


1.330
log
@* Makefile.in: Link cygcheck with libwininet.a.
* cygcheck.cc: Add includes.
(grep_packages): New global variable.
(display_internet_error): New function.
(safe_chars): New global variable.
(base_url): Ditto.
(package_grep): New function.
(usage): Reword --help output for clarity.  Document new argument.
(longopts): Add 'package-query' option.
(opts): Add 'p' option, reorder to be consistent with 'longopts'.
(main): Accommodate new option.
* utils.sgml (cygcheck): Update --help output.  Document new -p option.
@
text
@d1 9
@


1.329
log
@	Fix typo.
@
text
@d1 15
d475 1
a475 1
	output. Accomodate new options.
d477 1
a477 1
	(main): Accomodate new options for setting UF_PASSWD_CANT_CHANGE,
@


1.328
log
@	Align error message handling to mkpasswd's error messages throughout.
	* mkgroup.c (print_win_error): Create macro calling ...
	(_print_win_error): ... this function created from former
	print_win_error.  Move up in source.
	(PDOMAIN_CONTROLLER_INFOW): Define return type of DcGetDcNameW.
	(dsgetdcname): New function pointer for DcGetDcNameW.
	(load_netapi): Get DcGetDcNameW address.
	(main): If DcGetDcNameW is available, use it.
	* mkpasswd.c (PDOMAIN_CONTROLLER_INFOW): Define return type of
	DcGetDcNameW.
	(dsgetdcname): New function pointer for DcGetDcNameW.
	(load_netapi): Get DcGetDcNameW address.
	(main): If DcGetDcNameW is available, use it.  Rename local variable
	domain_name_specified to domain_specified as in mkgroup.c.
@
text
@d7 4
a10 4
	(PDOMAIN_CONTROLLER_INFOW): Define return type of DcGetDcNameW.
	(dsgetdcname): New function pointer for DcGetDcNameW.
	(load_netapi): Get DcGetDcNameW address.
	(main): If DcGetDcNameW is available, use it.
d12 4
a15 4
	DcGetDcNameW.
	(dsgetdcname): New function pointer for DcGetDcNameW.
	(load_netapi): Get DcGetDcNameW address.
	(main): If DcGetDcNameW is available, use it.  Rename local variable
@


1.327
log
@	* regtool.cc: Extend copyright-years.
	(print_version): Ditto.
	(cmd_list): Don't depend on terminating '\0' being present on
	string-values.
	(cmd_get): Don't attempt to read more than present, but keep
	extra space for terminating '\0'. Really output REG_BINARY.
	Don't leak memory.
	(cmd_set): Include trailing '\0' in string's length.
@
text
@d1 17
@


1.326
log
@	* passwd.c (longopts): Add --logonserver option.
	(opts): Add -d option.
	(GetPW): Add server parameter which is given to Net functions.
	(ChangePW): Ditto.
	(PrintPW): Ditto.
	(SetModals): Ditto.
	(usage): Add description for -d/--logonserver option.
	(main): Add option handling for -d/--logonserver.  Use LOGONSERVER
	environment variable content for server to contact, unless
	-d/--logonserver option is given.  If both is missing, use NULL.
@
text
@d1 11
@


1.325
log
@        * cygcheck.cc (dump_sysinfo_services): Properly null-terminate 'buf'.
        Avoid extraneous cygrunsrv invocation if 'verbose' is true.
@
text
@d1 13
d16 2
a17 2
        * cygcheck.cc (dump_sysinfo_services): Properly null-terminate 'buf'.
        Avoid extraneous cygrunsrv invocation if 'verbose' is true.
@


1.324
log
@	* mount.cc (longopts): Fix typo which disallows --options option.
@
text
@d1 5
@


1.323
log
@* cygcheck.cc (find_on_path): Perform .exe magic on non-PATH search.
@
text
@d1 4
@


1.322
log
@* cygcheck.cc (track_down, cygcheck): Return true on success.
(main): Reflect cygcheck failures in exit status.
@
text
@d1 5
@


1.321
log
@	* parse_pe.c (exclusion::sort_and_check): Remove crude cast.
@
text
@d1 5
d161 1
a161 1
	* kill.cc (forcekill): Do not pass negative pids to 
d163 1
a163 1
	(main): Make pid a long long and distinguish between pids, gpids 
@


1.320
log
@	* cygcheck.cc (dump_sysinfo): Recognize XP Media Center and Tablet PC
	Editions. Change .NET to 2003 throughout.  Recognize 2003 Web Server
	and Datacenter Server. Report when running in terminal server session.
@
text
@d1 4
@


1.319
log
@* cygcheck.cc (load_cygwin): Make half-hearted attempt to work with older DLLs.
* strace.cc (load_cygwin): Ditto.
@
text
@d1 6
@


1.318
log
@	* cygcheck.cc (dump_sysinfo_services): Add new function that uses
	new cygrunsrv options to dump service info.
	(dump_sysinfo): Call dump_sysinfo_services if running under NT.
	Change 'Cygnus' to 'Cygwin' in output.
@
text
@d1 6
@


1.317
log
@* cygcheck.cc (load_cygwin): Remove debugging statement.
@
text
@d1 7
@


1.316
log
@* cygcheck.cc (dump_sysinfo): Don't attempt to use path if it is not set.
(nuke): Fix off by one error in allocation of environment variable.
(load_cygwin): Always set PATH even if cygwin environment is empty.
@
text
@d3 4
@


1.315
log
@* cygcheck.cc (cygwin_internal): Define as a "C" function.
* strace.cc (cygwin_internal): Ditto.
* cygpath.cc (print_version): Update copyright.
@
text
@d1 7
@


1.314
log
@* cygcheck.cc (load_cygwin): Avoid calling putenv with a NULL path.
@
text
@d1 7
@


1.313
log
@	* cygcheck.cc (load_cygwin): Don't touch $PATH for now.
	(print_version): Fix copyright.
	* strace.cc (print_version): Ditto.
@
text
@d1 4
@


1.312
log
@* mount.cc (mount_commands): Display "-X" option when appropriate.
@
text
@d1 6
@


1.311
log
@* cygcheck.cc (nuke): New function.
(load_cygwin): New function.
(main): Use load_cygwin to load argv/envp from cygwin environment, if
appropriate.
@
text
@d1 4
a27 4
2005-04-25  Christopher Faylor  <cgf@@timesys.com>

	* mount.cc (mount_commands): Display "-X" option when appropriate.

@


1.310
log
@* strace.cc (attach_process): Don't call load_cygwin().  Assume that it's
already happened.
(dotoggle): Ditto.
(main): Set argv from cygwin environment, if it exists.
@
text
@d3 7
@


1.309
log
@* mount.cc (usage): Clarify action of -m option.
@
text
@d1 7
@


1.308
log
@* path.cc (getmntent): Add previously-omitted 'noexec' and 'managed'flags to
mnt_opts string if present in mount flags.
@
text
@d1 4
@


1.307
log
@* mount.cc (mount_commands): Display "-X" option when appropriate.
@
text
@d1 5
@


1.306
log
@	* utils.sgml (mount): Clarify setting cygdrive prefix for user
	and system-wide.
@
text
@d1 4
@


1.305
log
@	* cygcheck.cc (init_paths): Use full path instead of "." for the
	current directory.  Do not add "." if present in $PATH.
	(dump_sysinfo): Skip placeholder first value of paths[].
@
text
@d1 5
@


1.304
log
@* kill.cc (getsig): Rectify bug introduced by 2005-02-26 change.  Don't pad
signal name with spaces.
@
text
@d1 6
@


1.303
log
@	* strace.cc (handle_output_debug_string): Fix compiler warning.
@
text
@d1 5
d27 1
a27 1
	* kill (getsig): Avoid buffer overflow when generating a signal name.
@


1.302
log
@* cygpath.cc (usage): Pass in one more copy of program_name to printf to avoid
a SEGV.
@
text
@d1 4
@


1.301
log
@* regtool.cc (opts): The argument to 'K' is not optional.
(main): Revert previous change.  Just let getopt deal with missing argument.
@
text
@d1 5
@


1.300
log
@* regtool.cc (main): Avoid a SEGV when nothing follows -K.
@
text
@d3 6
@


1.299
log
@* kill (getsig): Avoid buffer overflow when generating a signal name.
* strace.cc (handle_output_debug_string): Make error a little more specific.
@
text
@d1 4
@


1.298
log
@
* cygpath.cc (usage): Clarify help output to indicate acceptance
of multiple file names as arguments.
@
text
@d1 6
@


1.297
log
@* ps.cc (main): Eliminate use of PID_ZOMBIE.
* strace.cc (main): Recognize new option for displaying hex value of strace
type.
(handle_output_debug_string): Prepend output with hex value of strace message
if -H is specified.
@
text
@d1 5
@


1.296
log
@2005-01-11  Pierre Humblet <pierre.humblet@@ieee.org>

        * mkpasswd.c (print_win_error): Transform into macro.
        (_print_win_error): Upgrade former print_win_error by
        printing the line.
        (current_user): Call _print_win_error.
        (enum_users): Print name in case of lookup failure.
        (enum_local_groups): Ditto.
@
text
@d1 8
@


1.295
log
@* cygcheck.cc (eprintf): New function.
@
text
@d1 9
@


1.294
log
@* cygcheck.cc (find_on_path): Clear show_error and/or print_failed
parameters to display_error.
(rva_to_offset): Ditto.
(dll_info): Ditto.
(track_down): Ditto.
@
text
@d1 4
@


1.293
log
@2004-11-13  Pierre Humblet <pierre.humblet@@ieee.org>

	* kill.cc (forcekill): Do not pass negative pids to
	cygwin_internal. Check if sig == 0. Improve error messages.
	(main): Make pid a long long and distinguish between pids, gpids
	(i.e. negative pids) and Win9x pids.
@
text
@d1 8
@


1.292
log
@* cygcheck.cc: Change "keyeprint" to "display_error" throughout.
@
text
@d1 7
@


1.291
log
@* cygcheck.cc (main): Allow a '-l' without an additional argument.
@
text
@d1 5
a5 1
2004-11-10  Christopher Faylor  <cgf@@timesys.com>
@


1.290
log
@* cygcheck.cc (keyeprint): New optional parameters: show_error and
print_failed.
@
text
@d1 4
@


1.289
log
@* cygcheck.cc (get_dword): Fix errormessage.
(cygwin_info): Ditto.
(track_down): Ditto.
(check_keys): Ditto.
@
text
@d1 5
@


1.288
log
@* cygcheck.cc (dump_sysinfo): Warn about missing or multiple cygwin1
dlls.
@
text
@d1 7
@


1.287
log
@whitespace
@
text
@d1 5
@


1.286
log
@* cygcheck.cc (dump_sysinfo): Add leading newline before legend for
drive-list.
@
text
@d5 1
a5 1
			
@


1.285
log
@fix whitespace, update some copyrights
@
text
@d1 5
@


1.284
log
@Remove CRs
@
text
@d11 1
a11 1
2004-10-18  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>  
@


1.283
log
@* cygcheck.cc (dump_sysinfo): In legend for drive-list: Add ``ram'' and
``unk''. Use single puts. Add leading newline. Line up equal-signs.
@
text
@d1 5
a5 5
2004-10-22  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>

	* cygcheck.cc (dump_sysinfo): In legend for drive-list: Add ``ram'' and
	``unk''. Use single puts. Add leading newline. Line up equal-signs.

@


1.282
log
@* cygcheck.cc (dump_sysinfo): Allow for larger drives in drive-list.  Change
``Used'' to ``Free'' in helptext-title for drive-list.
@
text
@d1 5
@


1.281
log
@	* cygcheck.cc (pretty_id): Don't let i become negative. Fix
	printf-format.
@
text
@d1 5
@


1.280
log
@fix date
@
text
@d1 5
@


1.279
log
@* cygcheck.cc (pretty_id): Allocate space for ')' in uid and guid.
@
text
@d1 1
a1 1
2004-10-15  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>
d5 1
a5 1
2004-10-15  Bas van Gompel  <cygwin-patch.buzz@@bavag.tmfweb.nl>
@


1.278
log
@* cygcheck.cc (pretty_id): Allocate space for trailing '\0' on uid and guid.
@
text
@d2 4
d8 1
a8 1
	* cygcheck.cc (pretty_id): Allocate space for trailing '\0' on uid and
@


1.277
log
@* cygcheck.cc (pretty_id): Don't exit on id error.  Fix size calculations.
@
text
@d4 6
@


1.276
log
@* cygcheck.cc (pretty_id): Correct column calculations.  Abort if id is acting
funny.
@
text
@d1 6
@


1.275
log
@minor change
@
text
@d1 6
@


1.274
log
@* cygcheck.cc (add_path): Don't leak memory when path is already in ``paths''.
@
text
@d22 1
a22 1
	* cygcheck.cc (dump_sysinfo): Warn about empty path-components.
@


1.273
log
@* cygcheck.cc (dump_sysinfo): Warn about trailing (back)slash on mount entries.
@
text
@d3 5
@


1.272
log
@* cygcheck.cc (dump_sysinfo): Don't warn about empty path components, just
display ``.''.
@
text
@d3 5
@


1.271
log
@	* strace.cc (_impure_ptr): Remove.
@
text
@d1 5
d53 1
a53 1
	* ssp.c (usage): Add missing linefeed. 
@


1.270
log
@	* cygcheck.cc (dump_sysinfo): Warn about empty path-components.
@
text
@d1 4
@


1.269
log
@	* cygcheck.cc (pretty_id): Close pipe.
@
text
@d1 4
@


1.268
log
@	* dump_setup.cc (dump_setup): Remove unneeded strlen when check_files
	is not set.
@
text
@d1 4
@


1.267
log
@	* dump_setup.cc (dump_setup): Avoid trailing spaces on package-list.
@
text
@d1 5
@


1.266
log
@	* getfacl.c (main): Correct layout when nopt is set.
@
text
@d1 5
@


1.265
log
@	* mkgroup.cc (netapibufferallocate,netgroupgetinfo): New function
	pointers.
	(load_netapi): Load NetApiBufferAllocate and NetGroupGetInfo.
	(enum_local_groups,enum_groups): Add disp_groupname parameter.
	Load info for disp_groupname if specified.
	(usage): Add description of "-g/--group" option.
	(longopts,opts): Add "-g/--group" option.
	(main): Process "-g/--group" option.
	* utils.sgml (mkgroup): Add description of "-g/--group" option
@
text
@d1 4
@


1.264
log
@	* dumper.cc (dumper::prepare_core_dump): Use bfd_get_section_size
	instead of _raw_size.
	(dumper::write_core_dump): Likewise.
	* parse_pe.cc (select_data_section): Likewise.
@
text
@d1 12
@


1.263
log
@
2004-05-29  John Paul Wallington  <jpw@@gnu.org>

	* ssp.c (usage): Add missing linefeed.
@
text
@d1 7
@


1.262
log
@clarify last entry slightly.
@
text
@d1 4
@


1.261
log
@* kill.cc (listsig): NSIG includes Signal 0, so we need to avoid calling
strtosigno with NSIG - 1.
@
text
@d3 2
a4 2
	* kill.cc (listsig): NSIG includes Signal 0, so we need to avoid
	calling strtosigno with NSIG - 1.
@


1.260
log
@* cygcheck.cc (dump_sysinfo): Remove "Win95/NT" from output.
@
text
@d1 5
@


1.259
log
@* cygpath.cc (usage): Don't issue helpful message if -i is used.
(from Igor Pechtchanski)
@
text
@d1 4
@


1.258
log
@	* kill.cc (get_debug_priv): New function.
	(forcekill): Call get_debug_priv before trying to kill process.
@
text
@d1 5
@


1.257
log
@* cygpath.cc (long_options): Add "mode" option.
(options): Ditto.
(usage): Report on new option.
(report_mode): New function.
(main): Implement -M option.
@
text
@d1 5
@


1.256
log
@* Makefile.in (build_dumper): Detect missing iconv library.
* cygpath.cc (dowin): Report on filename conversion errors.
(doit): Ditto.
* strace.cc (main): Use symbolic constant for _STRACE_ALL when setting mask.
@
text
@d1 8
@


1.255
log
@	* ssp.c (opts): Add leading '+' to force posixly correct behaviour.
@
text
@d1 10
@


1.254
log
@	* strace.cc (opts): Add leading '+' to force posixly correct
	behaviour.
	(main): Revert POSIXLY_CORRECT manipulations.
@
text
@d1 4
@


1.253
log
@* strace.cc (main): Guard against previous setting of POSIXLY_CORRECT.
@
text
@d1 6
@


1.252
log
@* strace.cc: Update copyrights.
* cygcheck.cc: Update copyrights.
@
text
@d3 4
@


1.251
log
@* strace.cc (main): Ensure POSIXLY_CORRECT argument ordering.
* cygcheck.cc (main): Ditto.
@
text
@d3 5
@


1.250
log
@* cygcheck.cc (pretty_id): Make more robust in absence of id.exe.
@
text
@d1 5
@


1.249
log
@	* cygpath.cc (dowin): Revert accidental checkin from November.
@
text
@d1 4
@


1.248
log
@	* mkgroup.c (main): Print "root" group with local admins group sid
	and gid 0.
@
text
@d1 4
@


1.247
log
@	* Makefile.in: Add rules to build ipcrm and ipcs.
	* ipcrm.c: New file.
	* ipcs.c: New file.
@
text
@d1 5
@


1.246
log
@	Revert most of last check in to ChangeLog.  It duplicated
	accidentally a big bunch of old entries.
@
text
@d1 6
@


1.245
log
@	* mkgroup.c: Avoid compiler warnings throughout.
	* mkpasswd.c: Ditto.
	* passwd.c: Ditto.
@
text
@a6 1237
2003-09-10  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (MINGW_CXX): Define and use for mingw-compiled files.
	* path.cc: Include more path info in cygwin-specific includes since the
	cygwin directory is no longer included by default.

2003-09-10  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: More fixups to adjust for the fact that mingw_getopt.o
	is no longer built.

2003-09-10  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Remove references to getopt since it is now part of
	mingwex.

2003-09-08  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Rename libz.h -> zlib.h.

2003-09-07  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Detect existence of mingw zlib headers and libraries.
	Build cygcheck without package checking if they are unavailable.
	* dump_setup.cc: Generate dummy zlib macros when zlib is not available.
	(open_package_list): Use zlib functions to uncompress package lists.
	Return gzFile rather than FILE *.
	(check_package_files): Change fp to gzFile to accommodate zlib
	functions.  Use gzgets to read from package file.  Use gzclose to close
	the handle.
	(package_list): Ditto.
	(package_find): Ditto.

2003-09-05  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* dump_setup.cc (check_package_files): Don't fail on empty package.

2003-09-01  AJ Reins  <reinsaj@@yahoo.com>

	* mount.cc (mount_commands): Ensure user mode is actually user mode and
	not the default system mode.

2003-08-31  Christopher Faylor  <cgf@@redhat.com>

	* kill.cc (forcekill): Silence some compiler warnings.

2003-08-31  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Oops.  Put the '...' in the right place.

2003-08-31  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Display "..." when not-verbose.

	* kill.cc (forcekill): Default to entered pid when pinfo fails.  Issue
	some warnings when things don't work.

2003-08-17  David Rothenberger  <daveroth@@acm.org>

	* dump_setup.cc (check_package_files): Strip leading / and ./ from
	package file names.

2003-08-16  David Rothenberger  <daveroth@@acm.org>

	* dump_setup.cc (package_find): Don't stop searching on missing
	file list.
	(package_list): Ditto.

2003-08-16  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* dump_setup.cc: (package_list): Make output terse unless
	verbose requested.  Fix formatting.
	(package_find): Ditto.

2003-08-15  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (main): Fix some formatting and help text printing.

2003-08-15  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* cygcheck.cc (find_package,list_package): New global
	variables.
	(usage): Add "--find-package" and "--list-package" options,
	reformat output.
	(longopts, opts): Add "--find-package" and "--list-package"
	options.
	(main): Process the "--find-package" and "--list-package"
	flags.  Add new semantic checks.  Add calls to find_package()
	and list_package().
	* dump_setup.cc: Fix header comment.
	(match_argv): Change return type to int to distinguish
	between real matches and default ones.
	(open_package_list): New static function.
	(check_package_files): Factor out opening the package list
	file into open_package_list().
	(get_packages): New static function.
	(dump_setup): Factor out getting a list of packages into
	get_packages().
	(package_list, package_find): New global functions.

2003-08-15  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc (usage): Add missing linefeed.  Move example to --help
	text.  Fix forward slash description.

2003-08-13  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>

	* dump_setup.cc (check_package_files): Fix extra '/' in filename.
	Resize command buffer.  Fix buffer overflow bug.

2003-08-09  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>
	    Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (dump_setup): Check for the existence of the package
	list file.  Rework slightly to use static buffer for popen commands.

2003-08-07  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>
	    Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (version_len): New static variable.
	(could_not_access,directory_exists): New static function.
	(file_exists): Ditto.
	(check_package_files): Ditto.
	(dump_setup): Check the contents of each package if check_files is true
	and output the result in the "Status" column.  Flush output after each
	package.

2003-08-07  Igor Pechtchanski  <pechtcha@@cs.nyu.edu>
	    Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (dump_setup): Remove redundant null check.  Add
	informative message if package info not found.

2003-07-26  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (do_mount): Issue warning when using managed mount option on
	non-empty directory.

2003-07-25  Christopher Faylor  <cgf@@redhat.com>

	* configure.in: Use 'install-sh -c'.
	* configure: Regenerate.

2003-07-25  Christopher Faylor  <cgf@@redhat.com>

	* configure.in: Always use install-sh.
	* configure: Regenerate.

2003-07-03  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (struct opt): Remove posix option.

2003-07-03  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (longopts): Add long "options" keyword.
	(opts): Add -o option.
	(usage): Display -o option.
	(struct opt): New.
	(concat3): New function.
	(main): Handle -o flag.

2003-06-12  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (pretty_id): Rework slightly to not rely on spaces.

2003-06-12  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc: Throughout, always return error when GetShortPathName
	returns 0.

2003-04-26  Joshua Daniel Franklin <joshuadfranklin at yahoo dot com>

	* mkpasswd.c (usage) Remove extra newline from description output.

2003-04-26  Joshua Daniel Franklin <joshuadfranklin at yahoo dot com>

	* cygcheck.cc (usage) Add description output.
	* cygpath.cc (usage) Add description output.
	* dumper.cc (usage) Add newline to description output.
	* kill.cc (usage) Add description output.
	* mkgroup.c (usage) Grammatical change to description output.
	* mkpasswd.c (usage) Grammatical change to description output.
	* mount.cc (usage) Add description output.
	* passwd.c (usage) Add description output.
	* ps.cc (usage) Add description output.
	* regtool.cc (usage) Add description output.
	* setfacl.c (usage) Remove extra newline from description output.
	* ssp.c (usage) Add description output.
	* strace.cc (usage) Add description output.
	* umount.cc (usage) Add description output.

2003-04-10  Pierre Humblet  <pierre.humblet@@ieee.org>

	* mkpasswd.c (current_user): print uid and gid as unsigned.
	(enum_users): Ditto. Do not free servername.
	(usage): Update to allow several domains and improve -p.
	(main): On Win9x limit uids to 1000. Only print specials
	when -l is specified. Add a loop to allow several domains
	and free servername in the loop.
	* mkgroup.c (enum_groups): Do not free servername.
	(usage): Update to allow several domains. Change uid to gid.
	(main): Only print specials when -l is specified. Add a
	loop to allow several domains and free servername in the loop.

2003-03-24  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (dump_sysinfo): Ensure that CYGWIN environment variable
	is correctly set.

2003-03-09  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl.c (username): Fix ambiguous printf calls.
	(groupname): Ditto.
	(main): Ditto.

2003-03-04  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (strace.exe): Include mingw_getopt.o in link line.
	* cygcheck.cc (print_version): Update copyright.
	* strace.cc (print_version): Ditto.
	(main): Allow cygwin paths for -o option.
	(create_child): Allow cygwin path as argv[0].
	* path.cc (path.cc): Allow UNC paths.

2003-03-01  Pierre Humblet  <pierre.humblet@@ieee.org>

	* mkpasswd.cc (main): On Win95, output both a default line and a
	line for the current user (if known) with a pseudorandom uid. If
	the -u switch is given, produce a line for the specified user.
	* mkgroup.cc (main): On Win95 change the group name from "unknown" to
	"all".

2003-02-28  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (cygcheck.o): Fix so that actual mingw include files are
	used.
	* cygcheck.cc (find_on_path): Translate from cygwin path when qualified
	path name found.
	(pretty_id): New function.  Dump output of id command.
	(dump_sysinfo): Call pretty_id for CYGWIN=ntsec and CYGWIN=nontsec cases.

2003-02-12  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc (doit): Allocate more space for non-path filename.

2003-02-07  Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (compar): Use case insensitive comparisons.
	(dump_setup): Calculate package_len based on already used "len".  Don't
	bother with version_len.

2003-02-07  Igor Pechtchanski <pechtcha@@cs.nyu.edu>

	* dump_setup.cc (dump_setup): Compute the longest package name
	and align columns properly.

2003-02-06  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (common_apps): Add some more apps.
	* path.cc (get_cygdrive): Correctly set system flag.

2003-01-22  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (ALL_LDFLAGS): Remove newlib/libm from tools paths.
	(MINGW_LDFLAGS): Remove in favor of definition from Makefile.common.

2003-01-15  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Fix copyright date.
	* mkpasswd.c: Ditto.
	* setfacl.c: Ditto.

2003-01-09  Pierre Humblet  <pierre.humblet@@ieee.org>

	* setfacl.c (usage): Remove double ":" for mask and other.

2003-01-07  Pierre Humblet <pierre.humblet@@ieee.org>

	* mkpasswd.c (current_user): Create.
	(usage): Reorganize to support Win95/98/ME.
	(main): Add option for -c. Reorganize to parse options for
	Win95/98/ME and to call current_user. Add username in gecos field
	on Win95/98/ME.
	* mkgroup.c (enum_groups): Print gid with %u.
	(print_win_error): Create from passwd.cc.
	(current_group): Create.
	(usage): Reorganize to support Win95/98/ME.
	(main): Add option for -c. Reorganize to parse options for
	Win95/98/ME and to call current_group.

2002-12-14  Pierre Humblet <pierre.humblet@@ieee.org>

	* setfacl.c (main): Place a single : after other and mask.
	* getfacl.c (getaclentry): Allow both : and :: for other and mask.
	(main): Remove extraneous break.

2002-11-25  Corinna Vinschen  <corinna@@vinschen.de>

	* mkpasswd.c (main): Set pw_passwd field to '*' on 9x/Me.

2002-11-24  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (getperm): Set only `other' permission bits.
	(getaclentry): Set a_id to -1 by default.

2002-11-24  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl.c (permstr): Use `other' permission bits for requesting
	ace permissions.

2002-11-08  Corinna Vinschen  <corinna@@vinschen.de>

	* setfacl.c (usage): Add missing LF.

2002-10-30  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc (get_long_path_name_w32impl): Define similarly to
	GetLongPathName.
	(get_long_name): Correctly prototype GetLongPathName.
	(get_long_paths): Implement using get_long_name to cut down on code
	duplication.
	(doit): Do various things to make path output work predictably.

2002-10-19  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (usage): Correctly report default mode.
	* strace.cc (main): Use strtoul as appropriate.

2002-09-29  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc (close_arg): Remove unused static.
	* mkgroup.c (enum_local_users): Avoid compiler warning.
	(enum_users): Ditto.
	* mkpasswd.c: Ditto throughout.
	* ssp.c: Ditto throughout.

2002-09-18  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Include sys/time.h rather than time.h to avoid a
	compiler error.

2002-09-17  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Reorder includes to avoid compiler error.

2002-09-15  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* cygcheck.cc (print_version) Add final newline.
	* getfacl.c (print_version) Add final newline.
	* kill.cc (print_version) Add final newline.
	* mkgroup.c (print_version) Add final newline.
	* mkpasswd.c (print_version) Add final newline.
	* mount.cc (print_version) Add final newline.
	* passwd.c (print_version) Add final newline.
	* ps.cc (print_version) Add final newline.
	* regtool.cc (print_version) Add final newline.
	* setfacl.c (print_version) Add final newline.
	* ssp.c (print_version) Add final newline.
	* strace.cc (print_version) Add final newline.
	* umount.cc (print_version) Add final newline.

2002-09-12  Igor Pechtchanski <pechtcha@@cs.nyu.edu>

	* cygpath.cc (options) New global variable.
	(main) Make short options global for easier change.
	(print_version) Add a missing newline.

2002-08-07  Igor Pechtchanski <pechtcha@@cs.nyu.edu>

	* regtool.cc (find_key): Add support for custom key separator.
	(usage): Document it.

2002-08-02  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Don't print an entry for "Everyone".
	* mkpasswd.c (print_special): Set pw_gid to 544 for SYSTEM user.
	(main): Don't print an entry for "Everyone".

2002-07-06  Christopher Faylor  <cgf@@redhat.com>

	* configure.in: Check for libiconv.a.
	* configure: Regenerate.
	* Makefile.in: Add libiconv.a to libraries required for dumper.exe.

2002-07-06  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Use MINGW stuff from Makefile.common.

2002-07-01  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Add function pointers for functions from advapi32.dll.
	(load_netapi): Load used functions from advapi32.dll.
	(main): Use function pointers instead of statically linked functions
	from advapi32.dll.

2002-07-01  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (main): Ensure that mount_already_exists() also gets default
	flag that is passed to do_mount.

2002-06-22  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* cygpath.cc (long_options): Add "dos" and "mixed", correct "close",
	"file" and "type" to use NULL flag.
	(usage): Clean up usage output (more), accomodate new options.
	(main): Add --dos and --mixed options; accomodate all output forms in
	--type.  Make UNIXy output default.

2002-06-18  Joshua Daniel Franklin  <joshuadfranklin@@yahoo.com>

	* cygpath.cc (usage): Clean up usage output.
	(dowin): Correct output of -t mixed for -ADHPSW options.

2002-06-14  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.c: Rearrange includes to avoid unnecessary warnings.
	(GetPW): Add parameter to (dis)allow printing of Windows username.
	Use defines instead of numerical constants where possible.
	Try avoiding impersonation problem.  Rearrange to print Windows
	username only if it's different from Cygwin username.
	(ChangePW): Use defines instead of numerical constants where possible.
	(main): Call GetPW with additional parameter.  Change error text.

2002-06-14  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* passwd.c (GetPW): Handle case of user-edited /etc/passwd
	with cygwin_internal (CW_EXTRACT_DOMAIN_AND_USER, ...).

2002-06-09  Christopher Faylor  <cgf@@redhat.com>

	* path.cc (cygpath): Change MOUNT_AUTO to MOUNT_CYGDRIVE.
	(getmntent): Ditto.

2002-06-09  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (main): Use default system/user flag for cygdrive stuff,
	too.
	(change_cygdrive_prefix): Change MOUNT_AUTO to MOUNT_CYGDRIVE.
	* umount.cc (remove_cygdrive_prefix): Ditto.
	(main): Use default system/user flag for cygdrive stuff, too.

2002-06-08  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (opts): Remove '-i' option.
	(usage): Ditto.
	(main): Ditto.
	(longopts): Remove --import-old-mounts option.

2002-06-07  David Peterson  <chief@@mail.idrive.com>
	    Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc: Add option to output windows paths in different formats:
	"dos" and "mixed".
	(main): Process options.
	(doit): Check new options flags.

2002-06-06  Egor Duda <deo@@logos-m.ru>

	* regtool.cc (Fail): Be more verbose.
	(find_key): Add support for remote registry access.
	(usage): Document it.
	* utils.sgml: Document it.

2002-06-06  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (main): Make toggle a local variable.

2002-06-07  Conrad Scott  <conrad.scott@@dsl.pipex.com>

	* strace.cc (toggle): New global variable.
	(error): Use exit instead of ExitProcess so that stdio buffers get
	flushed.
	(create_child): Remove command line error checking.
	(dostrace): Ditto.
	(dotoggle): New function.
	(usage): Add entry for new option -T|--toggle.  Alphabetize.
	(longopts): Add new option -T|--toggle.
	(opts): Ditto.
	(main): Handle new -T|--toggle option.  Move all command line checking
	here from other functions.
	* utils.sgml: Update section for strace.

2002-06-05  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* strace.cc (version): New global variable.
	(usage): Accommodate stdout output.
	(print_version): New function.

2002-06-03  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* ssp.c (version): New global variable.
	(longopts): Ditto.
	(opts): Ditto.
	(run_program): Correct cmd_line typos to cmdline.
	(usage): New function.  Standardize usage output.  Add ssp.txt to
	--help output.
	(print_version): New function.
	(main): Accommodate getopt.

2002-06-03  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* umount.cc (version): New global variable.
	(longopts): Accommodate new --version option.
	(opts): Ditto.
	(usage): Standardize usage output.
	(print_version): New function.
	(main): Accommodate --help, --version options.

2002-06-02  Joshua Daniel Franklin  <joshuadfranklin@@yahoo.com>

	* regtool.cc (prog_name): New global variable.
	(longopts): Ditto.
	(opts): Ditto.
	(usage): Standardize usage output.  Rearrange/add descriptions.
	(print_version): New function.
	(main): Accommodate longopts and new --help, --version options.  Add
	check for (_argv[optind+1] == NULL).

2002-06-02  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (forkdebug): Make true by default.
	(attach_process): Use window pid if cygwin pid isn't available (yet).
	(create_child): Use either DEBUG_ONLY_THIS_PROCESS or DEBUG_PROCESS,
	exclusively. (Suggested by Conrad.Scott@@dsl.pipex.com)

2002-05-30  Christopher Faylor  <cgf@@redhat.com>

	* mkpasswd.cc (main): Don't reset to binmode if stdout is a terminal.

2002-05-29  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (main): Make -b the default.

2002-05-29  Corinna Vinschen  <corinna@@vinschen.de>

	* ps.cc (main): Use uid or uid32 member of struct external_pinfo
	dependent of the value of the struct's version member.

2002-05-29  Corinna Vinschen  <corinna@@vinschen.de>

	* ps.cc (main): Change print format for uid to unsigned.  Use uid32
	member of struct external_pinfo instead of uid.

2002-05-28  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* passwd.c (prog_name): New global variable.
	(longopts): Ditto.
	(opts): Ditto.
	(usage): Standardize output. Accommodate new options.
	(print_version): New function.
	(main): Accommodate longopts and new --help, --version options.

2002-05-28  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* ps.cc (usage): Fix typo.

2002-05-27  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* ps.cc (prog_name): New global variable.
	(longopts): Ditto.
	(opts): Ditto.
	(usage): New function.
	(print_version): New function.
	(main): Accommodate longopts and new --help, --version options.

2002-05-26  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (attach_process): Don't tell process to start stracing
	here.
	(proc_child): Do it here, instead, after first debug event.  This
	should work around inexplicable races with DebugActiveProcess.
	(dostrace): Pass any pid argument to proc_child.

2002-05-23  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* getfacl.c (usage): Standardize usage output. Change return type to
	static void.
	(print_version): New function.
	(longopts): Added longopts for all options.
	(main): Accommodate new help and version options.

2002-05-22  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* mount.cc (version): New global variable.
	(usage): Standardize usage output.  Accommodate new version option.
	(print_version): New function.
	(longopts): Accommodate new version option.
	(opts): Ditto.
	(main): Ditto.

2002-05-22  Corinna Vinschen  <corinna@@vinschen.de>

	* cygpath.cc (usage): Change usage output slightly.

2002-05-20  Joerg Schaible <joerg.schaible@@gmx.de>

	* cygpath.cc (main): Add option l to support conversion to
	Windows long file names.  Refactured code for capital options.
	Support of options from file for capital options.
	(dowin): New function.  Refactured from main.
	(doit): Call long path conversion.
	(get_long_name): New function.
	(get_long_paths): New function.
	(get_long_path_name_w32impl): New function.  Reimplementation
	of Windows API function GetLongPathName (only 98/Me/2000/XP or
	higher).
	(get_short_name): Call GetShortPathName only once.
	(get_short_paths): Fix calculating buffer size.
	* utils.sgml: Update cygpath section for l option.

2002-05-18  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (add_child): Use calloc since new requires working
	libstdc++.a.
	(remove_child): Ditto for delete/free.

2002-05-15  Mark Blackburn  <marklist@@fangorn.ca>

	* cygpath.cc (get_short_paths): Fix more error checking.
	(get_short_name): Ditto.

2002-05-14  Joerg Schaible <joerg.schaible@@gmx.de>

	* cygpath.cc (main): Add option H to show the Windows' profiles
	directory.  Support short names for options DPSW.  Clean up
	copied code lines.
	* utils.sgml: Update cygpath section for H option and s support.

2002-05-14  Mark Blackburn  <marklist@@fangorn.ca>

	* cygpath.cc (get_short_paths): Fix error checking.

2002-05-13  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* kill.cc (prog_name): New global variable.
	(usage): Standardize usage output.  Add descriptions.
	(print_version): New function.
	(longopts): Accommodate new version option.
	(opts): Ditto.
	(main): Ditto.

2002-05-13  Christopher Faylor  <cgf@@redhat.com>

	* kill.cc (listsig): Display numeric id when given symbolic input.

2002-05-13  Christopher Faylor  <cgf@@redhat.com>

	* kill.cc (usage): Show new options.  Allow specification of output
	stream.
	(main): Implement 'h' option.

2002-05-13  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (kill.exe): Add as a specific target.
	* kill.cc (longopts): New.
	(opts): Ditto.
	(get_sig): Accept const char * parameter.  Return -1 on unknown signal.
	(test_for_unknown_sig): New function.
	(listsig): New function.
	(main): Use getopt_long for option parsing.  Implement -l, and -s
	options.  Use test_for_unknown_sig() to test for signal validity.

	* mount.cc (longopts): Make static.
	(opts): Ditto.

2002-05-12  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (do_mount): Default to non-exec option for remote drives.
	Report warnings before attempting a mount.
	(longopts): Add no-executable option.
	(mount_commands): Ditto.
	(opts): Ditto.
	(usage): Ditto.  Indicate that system mount is now the default.
	(main): Accommodate no-executable option.  Make system mount the
	default.
	* umount.cc (usage): Indicate that system umount is now the default.
	(main): Make system umount the default.

2002-05-07  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* dumper.cc (usage): Standardize usage output.  Generalize to allow use
	for help.
	(longopts): New struct.  Added longopts for all options.
	(print_version): New function.
	(main): Change getopt to getopt_long.  Accommodate new help and version
	options.

2002-03-29  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): Change call to exit() to a return statement.
	* mkpasswd.c (main): Ditto.

2002-03-27  Joshua Daniel Franklin  joshuadfranklin@@yahoo.com

	* mkpasswd.c (usage): Simplify usage output.  Generalize to allow use
	for help. Correct '?' typo to 'h'.
	(longopts): Add version option.
	(opts): Add 'v' version option.
	(print_version): New function.
	(main): Accommodate new version option.  Accommodate usage parameter
	changes.

2002-03-19  Christopher Faylor  <cgf@@redhat.com>

	* mkgroup.c (usage): Use one just fprintf + string concatenation for
	output message.
	(print_version): Add void to function type and update copyright.

2002-03-16  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* mkgroup.c (usage): Simplify usage output.  Generalize to allow use
	for help. Correct '?' typo to 'h'.
	(longopts): Add version option.
	(opts): Add 'v' version option.
	(print_version): New function.
	(main): Accommodate new version option.  Accommodate usage parameter
	changes.  Use usage to output help message.

2002-03-15  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): When generating group 513, check for computer's
	primary domain instead of current user's domain.

2002-03-14  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): When generating group 513, check for domain SID
	if computer name isn't mapped to a SID.

2001-03-11 Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* kill.cc (usage): Move to top of file.
	(getsig): Ditto.
	(forcekill): Ditto.

2002-03-06  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Reformat.

2002-03-06  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (longopts): Use correct short option for --version.

2002-03-06  Christopher Faylor  <cgf@@redhat.com>

	* cygpath.cc: Reformat.

2002-02-27 Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* cygpath.cc (print_version): New function.
	(main): Accommodate new version function.  Initialize 'o' to prevent
	warning.

2002-02-27  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (main): Eliminate non-GNU formatting glitch.

2002-02-27  Christopher Faylor  <cgf@@redhat.com>

	* ssp.c (help_desk): Fix compiler warning.

2002-02-27  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>
	    Christopher Faylor  <cgf@@redhat.com>

	Change appropriate globals to statics throughout.
	* cygcheck.cc (usage): Simplify usage output.  Generalize to allow use
	for help.
	(longopts): Add version option.
	(opts): Add 'V" version option.
	(print_version): New function.
	(main): Accommodate new version option.  Accommodate usage parameter
	changes.  Use usage to output help message.

002-02-19  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (CXXFLAGS): Add override so that HAVE_DECL_GETOPT is
	defined.
	(libbfd): Use -B rather than -L so that bfd from build directory is
	correctly found.
	(libintl): Ditto.

2002-02-15  Christopher Faylor  <cgf@@redhat.com>

	* mount.cc (usage): Fix typo in output.

2002-02-14  Christopher Faylor  <cgf@@redhat.com>

	* strace.cc (attach_process): Change CW_STRACE_ON to CW_STRACE_TOGGLE.

2002-01-31  Corinna Vinschen  <corinna@@vinschen.de>

	* mkpasswd.c (main): Set default home path for 9x/Me if --path-to-home
	isn't given.

2002-01-30  Corinna Vinschen  <corinna@@vinschen.de>

	* passwd.cc (ChangePW): Add parameter to differ between called for
	checking old password and called for changing password.  If called
	for checking old password, return non-zero only if password is surely
	incorrect.
	(main): Call ChangePW() with additional parameter.

2002-01-29  Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc (parse_filename): Don't consider '_' part of the
	version.

2002-01-28  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Fix typo.  Remove uid_t kludge.  Rely on kludge in
	sys/cygwin.h instead.
	* getfacl.c: Add include to remove warning.
	* mkgroup.c (main): Assign variables outside of parameter passing.
	This seems to eliminate some compiler warnings.

2002-01-28  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc: Use specific cygwin includes, as required.

2002-01-28  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (MINGW_INCLUDES): Change cygwin include.
	* strace.cc: Use specific cygwin includes, as required.
	(load_cygwin): New function.  Loads cygwin DLL, if necessary.
	(attach_process): Attaches strace to a running process.
	(dostrace): Accept pid argument.  Attach to pid if supplied.
	(usage): Describe -p option.  Correct system description.
	(longopts): Alphabetize.
	(opts): Ditto.
	(main): Ditto.  Handle -p option.

2002-01-21  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (CXXFLAGS): Ensure that important settings are preserved
	even when overriden by command line.

2002-01-21  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Build intermediate cygcheck.o to force use of MINGW_CXXFLAGS.
	* cygcheck.cc (cygwin_info): Intitialize variable to quiet g++ warning.
	(dump_sysinfo): Make variables unsigned to quiet g++ warnings.
	* strace.cc (version_string): Rename from SCCSid.
	(add_child): Remove unused variable.
	(version): Use version_string.  Avoid use of fprintf.

2002-01-21  DJ Delorie  <dj@@redhat.com>

	* Makefile.in: Use CXX instead of CC to compile C++ sources.

2002-01-17  DJ Delorie  <dj@@redhat.com>

	* cygcheck.cc (already_did): Avoid default constructors, which may
	require exception support.

2001-01-16  Joshua Daniel Franklin  <joshuadfranklin@@yahoo.com>

	* cygpath.cc (main): Add options to show Desktop and Start
	Menu's Programs directory for current user or all users.
	Move bulk of DPWS options outside the getopt case statement.
	* utils.sgml: Update cygpath section for ADPWS options.

2002-01-15  Joerg Schaible <joerg.schaible@@gmx.de>

	* cygpath.cc (doit): Empty file ignored using option -i.

2002-01-15  Mark Bradshaw  <bradshaw@@crosswalk.com>

	* mkpasswd.c (print_win_error): Add a new function.
	(enum_users): Use print_win_error.
	(enum_local_groups): Ditto.
	(main): Ditto.

2001-12-26  Jonathan Kamens  <jik@@curl.com>

	* cygpath.cc (doit): Detect and warn about an empty path.  Detect and
	warn about errors converting a path.
	(main): Set prog_name correctly -- don't leave an extra slash or
	backslash at the beginning of it.

Fri Dec 14 14:04:37 2001  Jason Tishler <jason@@tishler.net>

	* mkpasswd.c (enum_users): Change to unconditionally use
	the --path-to-home option, if supplied by the user.  Use default
	--path-to-home option value, if appropriate.
	(usage): Change usage statement to reflect new semantics.
	(main): Remove defaulting of the --path-to-home option.

Fri Dec 14 12:10:39 2001  Jason Tishler <jason@@tishler.net>

	* mkpasswd.c (opts): Add indication that '-p' option requires an
	argument.

2001-12-11  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Add define to CXXFLAGS.

2001-12-03  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (usage): Add -c description.
	* cygpath.cc (usage): Alphabetize options.
	* strace.cc (usage): Ditto.

2001-11-21  Christopher Faylor  <cgf@@redhat.com>

	* path.cc (cygpath): Don't consider cygdrive stuff when trying to derive
	native paths.

2001-11-20  Mark Bradshaw  <bradshaw@@staff.crosswalk.com>

	* mkpasswd.c: include lmerr.h
	(main): New -u option to allow specifying a
	specific user.  If specified, groups aren't displayed and
	output is limited to only the specified user.
	(enum_users): If specific user is specified, via -u option,
	display only that user's record.  With -u use NetUserGetInfo
	instead of NetUserEnum.
	(load_netapi): Added netusergetinfo.

2001-11-15  Gary R. Van Sickle  <g.r.vansickle@@worldnet.att.net>

	* strace.cc (main): Change getopt() to getopt_long().
	Add support for help and version info.
	Use new parse_mask() function for -m/--mask option.
	(longopts): Add long options structure.
	(opts): Move options string from getopts call to static var.
	(usage): Print usage information.
	(SCCSid): Version info.
	(version): New function for displaying version info.
	(parse_mask): New function supporting parsing of mnemonics,
	hex, and basic expressions in masks.
	(mnemonic2ul): New mnemonic parsing function.
	(tag_mask_mnemonic): New type.
	(mnemonic_table): New table of mnemonics for mnemonic2ul() to
	search through.

2001-11-12  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Redefine output format slightly.
	Print correct build number on 9x/ME systems.

2001-11-12  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (main): Slight formatting tweak.

2001-11-12  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Add some more details.

2001-11-12  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Print more detailed OS information string
	using OSVERSIONINFOEX information.

2001-11-11  Christopher Faylor  <cgf@@redhat.com>

	* path.h: New file.

2001-11-11  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (scan_registry): Open registry with read-only access.
	(main): Reflect argument change for dump_setup.
	* dump_setup.cc (dump_setup): Add preliminary extra argument for future
	use.
	* path.cc (read_mounts): Open registry with read-only access.

2001-11-11  Christopher Faylor  <cgf@@redhat.com>

	* cygcheck.cc (main): Display package info when '-s' is specified.
	* dump_setup.cc (dump_setup): Change header.  Remove typo.  Always sort
	packages output.

2001-11-11  Christopher Faylor  <cgf@@redhat.com>

	* dump_setup.cc: New file.
	* Makefile.in: Add info for dump_setup.o.
	* cygcheck.cc (main): Recognize '-c' option for checking setup
	installed base.
	* path.cc (cygpath): Read mount table if not loaded.

2001-11-10  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in (cygcheck.exe): Compile as -mno-cygwin executable.
	* path.cc: New file.
	* cygcheck.cc (init_paths): Use MS-DOS path syntax.
	(cygwin_info): Properly display cygwin version numbers.  Prettify some
	output.
	(dump_sysinfo): Calculate max names of posix and ms-dos paths for
	prettier output.

2001-11-09  Corinna Vinschen  <corinna@@vinschen.de>

	* cygcheck.cc (dump_sysinfo): Print more detailed OS information string.

2001-11-04  Corinna Vinschen  <corinna@@vinschen.de>

	* getfacl.c (username): New function.
	(groupname): Ditto.
	(usage): Ditto.  Add more user friendly help text.
	(main): Add -n and --help option.  Print names instead of IDs
	unless -n option is given.
	* setfacl.c (getperm): Tolerate whitespace and comment chars in input.
	(getaclentry): Fix several input string misdetections.
	(getaclentries): Allow - as input file name to read from stdin.
	Tolerate whitespace and comment chars in input.
	(usage): Add more user friendly help text.
	(main): Add --help option.

2001-11-04  Egor Duda  <deo@@logos-m.ru>

	* strace.cc (main): New option '-w'. Start traced process in separate
	window. New option '-S x'. Flush buffered output every x seconds.
	(create_child): Start child process in new window, when requested.
	When requested, periodically flush debugging output.

2001-10-24  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Remove EXEEXT consideration.  We always need .exe
	extensions.

2001-10-20  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c: Avoid compiler warnings.
	(print_special): New function.
	(main): Print special accounts by calling print_special().
	* mkpasswd.c: Avoid compiler warnings.
	(enum_users): Print additional U-domain\username info in gecos
	field when SIDs are printed.
	(print_special): New function.
	(main): Print special accounts by calling print_special().

2001-10-15  Christopher Faylor  <cgf@@redhat.com>

	* mkpasswd.cc (enum_users): Shorten "unused" passwd field.

2001-10-13  Christopher Faylor  <cgf@@redhat.com>

	* Makefile.in: Allow stdinc searching for dumper.

Tue Oct  9 21:59:00 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in (MINGW_INCLUDES): Accommodate changes in Makefile.common.

Sun Oct  7 23:06:39 2001  Christopher Faylor <cgf@@cygnus.com>

	* kill.cc (main): Set exit value to 1 on invalid pid.  Perform minor
	cleanup.

Fri Sep 21 20:40:30 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in (mingw_getopt.o): Ensure that newlib include directories
	are not searched.

Thu Sep 20 21:00:20 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in (MINGW_INCLUDES): Still need cygwin/include directory.

Wed Sep 19 12:22:08 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Filter newlib includes from mingw compilation.

2001-09-14  Egor Duda  <deo@@logos-m.ru>

	* dumper.cc (dumper::dumper): Print error code in case of error.
	(dumper::add_thread): Ditto.
	(dumper::collect_memory_sections): Ditto.
	(dumper::dump_memory_region): Ditto.
	(dumper::collect_process_information): Ditto.
	(print_section_name): Fix formatting.

2001-09-13  Egor Duda  <deo@@logos-m.ru>

	* dumper.cc (main): Properly recognize negative pids (used by w9x).

2001-09-09  Egor Duda  <deo@@logos-m.ru>

	* dumper.cc (main): Change command-line arguments format to be
	similar to gdb. Allow adding error_start=x:\path\to\dumper.exe to
	CYGWIN environment variable to perform core dumping in case of
	program crash.
	(usage): Ditto.

Wed Sep  5 22:37:21 2001  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in (dumper): Change logic for libbfd and libintl so that
	they will be found either in the build tree or the installed directory.
	* mkpasswd.c (enum_users): Add a comment as a password for NT.

2001-09-03  Michael A Chase <mchase@@ix.netcom.com>

	* mount.cc (mount_commands): Don't write /cygdrive/u mount points.

2001-09-03  Michael A Chase <mchase@@ix.netcom.com>

	* mount.cc (longopts): Add mount-commands to options list.
	(usage): Add mount-commands option.
	(mount_commands): New function.  Write commands to recreate current
	mounts.

Sat Sep  1 15:58:11 2001  Christopher Faylor <cgf@@cygnus.com>

	* mount.cc (main): Eliminate excess arguments in printf.

2001-08-30  Egor Duda  <deo@@logos-m.ru>

	* dumper.h: Update copyright notice.
	* dumper.cc: Ditto.
	* dumper.cc: (dumper::print_core_section_list): New function.
	* dumper.h: (dumper::print_core_section_list): Declare it.
	* dumper.cc (print_section_name): New function.
	(dumper::collect_process_information): Augment debugging output.
	Stop debugee processing if it posts double exception.
	(usage): Fix typo in option name.

Tue Aug 28 14:45:02 2001  Christopher Faylor <cgf@@cygnus.com>

	* mount.cc (main): Issue correct warning for 'not enough arguments'.

2001-08-14  Joerg Schaible <joerg.schaible@@gmx.de>

	* cygpath.cc (main): Support -w for Windows (System) directories and
	return physical correct orthography for the Windows System dir.

2001-07-14   Chris Genly  <chgenly@@alum.mit.edu>

	* regtool.cc (find_key): Handle keys with only one subkey.

Wed Jun 27 22:46:10 2001  Christopher Faylor <cgf@@cygnus.com>

	* regtool.cc (find_key): Revert previous change.

Wed Jun 27 13:37:41 2001  Keith Starsmeare" <keith_starsmeare@@yahoo.co.uk>

	* regtool.cc (find_key): Allow '/' as a synonym for '\\'.

Fri Jun 15 00:49:21 2001  Christopher Faylor <cgf@@cygnus.com>

	* mkpasswd.c (main): Output passwd file in binary mode so that there
	are no CRs in the file.
	* umount.cc (remove_all_user_mounts): Don't try to remove /cygdrive
	mounts.

Tue May  1 10:50:48 2001  Christopher Faylor <cgf@@cygnus.com>

	* mkpasswd.c (enum_users): Use /bin/bash as the default shell.
	(main): Ditto.

Sat Apr 28 22:32:01 2001  Christopher Faylor <cgf@@cygnus.com>

	* passwd.cc (ttymnam): New function.
	(main): Use ttynam() to report name of tty.

2001-04-19  Egor Duda  <deo@@logos-m.ru>

	* dumper.cc (dumper::init_core_dump): Set architecture field in dump
	header.

Mon Apr 16 15:08:00 2001  Corinna Vinschen <vinschen@@redhat.com>

	* mkgroup.c: Add function pointers `netlocalgroupgetmembers' and
	`netgroupgetusers'.
	(load_netapi): Load function pointers `netlocalgroupgetmembers'
	and `netgroupgetusers'.
	(enum_local_users): New function.
	(enum_local_groups): Call `enum_local_users' for each group if
	`print_users' is set.
	(enum_users): New function.
	(enum_groups): Call `enum_users' for each group if `print_users' is set.
	(usage): Add usage text for `-u/--users'.
	(longopts): Add option `--users'.
	(opts): Add option character `u'.
	(main): Set `print_users' according to option `-u/--users'.
	Call `enum_local_groups' and `enum_groups' with additional parameter
	`print_users'.

2001-04-15  Michael A Chase <mchase@@ix.netcom.com>

	* mount.cc (longopts): Add help to options list.
	(opts): Add 'h' to options string.
	* umount.cc (longopts): Add help to options list.
	(opts): Add 'h' to options string and change 'R' to 'A'.

2001-04-13  Kazuhiro Fujieda  <fujieda@@jaist.ac.jp>

	* mkgroup.c (enum_groups): Use RID + offset specified an additional
	argument as ID.
	(usage): Add description of -o option.
	(longopts, opts): Add specifications of -o/--id-offset option.
	(main): Add -o option.  Invoke enum_groups with specified offset.
	* mkpasswd.c (enum_users): Just like mkgroup.c.
	(usage, longopts, opts): Ditto.
	(main): Add -o option.  Invoke enum_users with specified offset only
	against domain accounts.

2001-04-11  Egor Duda  <deo@@logos-m.ru>

	* mkgroup.c (uni2ansi): Use native method to convert from Unicode
	to multi-byte strings.
	* mkpasswd.c (uni2ansi): Ditto.
	(enum_users): Pass buffer size when converting string.
	(enum_local_groups): Ditto.
	* mkgroup.c (enum_groups): Ditto.
	(enum_local_groups): Ditto.

Mon Apr  2 22:41:33 2001  Christopher Faylor <cgf@@cygnus.com>

	* mount.cc (main): Use getopt_long for parsing arguments.
	(usage): Reformat, show long and short options.
	* umount.cc (main): Ditto, all of the above.

Mon Apr  2 10:58:26 2001  Christopher Faylor <cgf@@cygnus.com>

	* mount.cc (show_mounts): Change format string to more closely resemble
	UNIX when displaying mount table.

Sat Mar 17 21:46:06 2001  Christopher Faylor <cgf@@cygnus.com>

	* kill.cc (forcekill): Use dwProcessId when opening a process, not the
	Cygwin pid.

Mon Mar  5 18:50:00 2001  Corinna Vinschen <vinschen@@redhat.com>

	* getfacl.c: Add copyright hint.
	* setfacl.c: Ditto.
	* strace.cc: Ditto.

Tue Jan 09 10:26:23 2001  Tony Sideris  <tonys1110@@home.com>

	* regtool.cc (cmd_list): Add new registry display options.
	(cmd_list): Add code to implement -p, -k, and -l options.

	* regtool.cc (Fail): Add call to LocalFree to free memory allocated by
	FormatMessage.

Wed Jan 10 09:16:57 2001  Christopher Faylor <cgf@@cygnus.com>

	* regtool.cc (translate): Ensure that 'c' is initialized.
	(cmd_set): Ditto for rv.

@


1.244
log
@	* cygpath.cc (main): Allow multiple pathnames on command line.
@
text
@d1 1243
@


1.243
log
@	* passwd.c (PrintPW): Turn around meaning printed for "Password not
	required" option to be in line with Windows meaning.
	(main): Use more appropriate 1008 option when calling
	NetUserSetInfo to change flag values.
@
text
@d1 4
@


1.242
log
@	* passwd.c (UF_LOCKOUT): Remove (defined in lmaccess.h).
	(version): Bump version number to 1.5.
	(longopts): Add -c, -C, -e, -E, -p, -P options.
	(opts): Ditto.
	(PrintPW): Print values of UF_PASSWD_CANT_CHANGE and
	UF_DONT_EXPIRE_PASSWD flags. Slightly reformat output. Don't suppress
	correct system password settings just because the account has admin
	privileges.
	(usage): Define as "noreturn" function. Restructure and rephrase
	output. Accomodate new options.
	(print_version): Fix copyright dates.
	(main): Accomodate new options for setting UF_PASSWD_CANT_CHANGE,
	UF_DONT_EXPIRE_PASSWD and UF_PASSWD_NOTREQD settings.
@
text
@d3 7
@


1.241
log
@* cygcheck.cc (pretty_id): Don't exec if `id' program is not found.
@
text
@d1 16
@


1.240
log
@* kill.cc (main): Allow negative pids (indicates process groups).
@
text
@d1 4
@


1.239
log
@* parse_pe.cc (exclusion::sort_and_check): Make error message a little more
explicit and ignore (hopefully) harmless region overlap.
@
text
@d1 4
@


1.239.2.1
log
@* kill.cc (main): Allow negative pids (indicates process groups).
@
text
@a0 4
2003-09-20  Christopher Faylor  <cgf@@redhat.com>

	* kill.cc (main): Allow negative pids (indicates process groups).

@


1.238
log
@* kill.c (forcekill): Wait for process to terminate even if TerminateProcess
says it failed.
@
text
@d1 5
@


1.237
log
@* Makefile.in: Tweak mingw libz.a detection to make it more reliably detect
when libz.a is not available.
@
text
@d1 5
@


1.236
log
@	* cygcheck.cc (dump_only): New global variable.
	(usage): Add "--dump-only" option, fix "--verbose" line.
	(longopts, opts): Add "--dump-only" option.
	(main): Process the "--dump-only" flag.  Add new semantic check.
	Pass dump_only information to dump_setup().
@
text
@d1 5
@


1.235
log
@	* getfacl (main): Remove extern declaration of optind.
	* setfacl (main): Remove extern declaration of optarg and optind.
@
text
@d1 8
@


1.234
log
@* Makefile.in (cygcheck.o): Use MINGW_CXX for compilation.
* cygcheck.cc: Just include <getopt.h> rather than cygwin version.
(pretty_id): Avoid compiler warnings.
* cygpath.cc (usage): Ditto.
@
text
@d1 5
@


1.233
log
@* Makefile.in (MINGW_CXX): Define and use for mingw-compiled files.
* path.cc: Include more path info in cygwin-specific includes since the cygwin
directory is no longer included by default.
@
text
@d3 7
@


1.232
log
@* Makefile.in: More fixups to adjust for the fact that mingw_getopt.o is no
longer built.
@
text
@d3 6
@


1.231
log
@* Makefile.in: Remove references to getopt since it is now part of mingwex.
@
text
@d3 5
@


1.230
log
@fix typo
@
text
@d1 5
@


1.229
log
@* Makefile.in (zlib_h): Rename libz.h -> zlib.h.
@
text
@d8 1
a8 1
	Build cygcheck wihtout package checking if they are unavailable.
@


1.228
log
@* Makefile.in: Detect existence of mingw zlib headers and libraries.  Build
cygcheck wihtout package checking if they are unavailable.
* dump_setup.cc: Generate dummy zlib macros when zlib is not available.
(open_package_list): Use zlib functions to uncompress package lists.  Return
gzFile rather than FILE *.
(check_package_files): Change fp to gzFile to accommodate zlib functions.  Use
gzgets to read from package file.  Use gzclose to close the handle.
(package_list): Ditto.
(package_find): Ditto.
@
text
@d1 4
@


1.227
log
@* dump_setup.cc (check_package_files): Don't fail on empty package.
@
text
@d1 13
@


1.226
log
@* mount.cc (mount_commands): Ensure user mode is actually user mode and not the
default system mode.
@
text
@d1 4
@


1.225
log
@* kill.cc (forcekill): Silence some compiler warnings.
@
text
@d1 5
@


1.224
log
@* Makefile.in: Oops.  Put the '...' in the right place.
@
text
@d3 4
@


1.223
log
@* Makefile.in: Display "..." when not-verbose.
* kill.cc (forcekill): Default to entered pid when pinfo fails.  Issue some
warnings when things don't work.
@
text
@d3 4
@


1.222
log
@	* dump_setup.cc (check_package_files): Strip leading / and ./ from
	package file names.
@
text
@d1 7
@


1.221
log
@	* dump_setup.cc (package_find): Don't stop searching on missing
	file list.
	(package_list): Ditto.

	* dump_setup.cc: (package_list): Make output terse unless
	verbose requested.  Fix formatting.
	(package_find): Ditto.
@
text
@d1 5
@


1.220
log
@	* cygcheck.cc (main): Fix some formatting and help text printing.

	* cygcheck.cc (find_package,list_package): New global
	variables.
	(usage): Add "--find-package" and "--list-package" options,
	reformat output.
	(longopts, opts): Add "--find-package" and "--list-package"
	options.
	(main): Process the "--find-package" and "--list-package"
	flags.  Add new semantic checks.  Add calls to find_package()
	and list_package().
	* dump_setup.cc: Fix header comment.
	(match_argv): Change return type to int to distinguish
	between real matches and default ones.
	(open_package_list): New static function.
	(check_package_files): Factor out opening the package list
	file into open_package_list().
	(get_packages): New static function.
	(dump_setup): Factor out getting a list of packages into
	get_packages().
	(package_list, package_find): New global functions.
@
text
@d1 12
@


1.219
log
@	* regtool.cc (usage): Add missing linefeed.  Move example to --help
	text.  Fix forward slash description.
@
text
@d3 26
@


1.218
log
@	* dump_setup.cc (check_package_files): Fix extra '/' in filename.
	Resize command buffer.  Fix buffer overflow bug.
@
text
@d1 5
@


1.217
log
@* dump_setup.cc (dump_setup): Check for the existence of the package list file.
Rework slightly to use static buffer for popen commands.
@
text
@d1 5
@


1.216
log
@* dump_setup.cc (version_len): New static variable.
(could_not_access,directory_exists): New static function.
(file_exists): Ditto.
(check_package_files): Ditto.
(dump_setup): Check the contents of each package if check_files is true and
output the result in the "Status" column.  Flush output after each package.
* dump_setup.cc (dump_setup): Remove redundant null check.  Add informative
message if package info not found.
@
text
@d1 6
@


1.215
log
@* mount.cc (do_mount): Issue warning when using managed mount option on
non-empty directory.
@
text
@d1 17
d86 1
a86 1
	(main): Only print specials when -l is specified. Add a 
d111 1
a111 1
	* mkpasswd.cc (main): On Win95, output both a default line and a 
d114 2
a115 2
	* mkgroup.cc (main): On Win95 change the group name from "unknown" to 
	"all". 
d169 1
a169 1
	(print_win_error): Create from passwd.cc.  
d173 1
a173 1
	Win95/98/ME and to call current_group.   
d576 1
a576 1
	
d890 1
a890 1
	
@


1.214
log
@* configure.in: Use 'install-sh -c'.
* configure: Regenerate.
@
text
@d1 5
@


1.213
log
@* configure.in: Always use install-sh.
* configure: Regenerate.
@
text
@d3 5
@


1.212
log
@* mount.cc (struct opt): Remove posix option.
@
text
@d1 5
@


1.211
log
@* mount.cc (longopts): Add long "options" keyword.
(opts): Add -o option.
(usage): Display -o option.
(struct opt): New.
(concat3): New function.
(main): Handle -o flag.
@
text
@d3 4
@


1.210
log
@* cygcheck.cc (pretty_id): Rework slightly to not rely on spaces.
@
text
@d1 9
@


1.209
log
@clarify
@
text
@d3 4
@


1.208
log
@Throughout, always return error when GetShortPathName returns 0.
@
text
@d3 2
a4 1
	Throughout, always return error when GetShortPathName returns 0.
@


1.207
log
@* mkpasswd.c (usage) Remove extra newline from description output.
@
text
@d1 4
@


1.206
log
@* cygcheck.cc (usage) Add description output.
@
text
@d3 4
@


1.205
log
@
2003-04-10  Pierre Humblet  <pierre.humblet@@ieee.org>

        * mkpasswd.c (current_user): print uid and gid as unsigned.
        (enum_users): Ditto. Do not free servername.
        (usage): Update to allow several domains and improve -p.
        (main): On Win9x limit uids to 1000. Only print specials
        when -l is specified. Add a loop to allow several domains
        and free servername in the loop.
        * mkgroup.c (enum_groups): Do not free servername.
        (usage): Update to allow several domains. Change uid to gid.
        (main): Only print specials when -l is specified. Add a
        loop to allow several domains and free servername in the loop.
@
text
@d1 17
@


1.204
log
@* cygcheck.cc (dump_sysinfo): Ensure that CYGWIN environment variable is
correctly set.
@
text
@d1 13
@


1.203
log
@	* getfacl.c (username): Fix ambiguous printf calls.
	(groupname): Ditto.
	(main): Ditto.
@
text
@d1 5
@


1.202
log
@* Makefile.in (strace.exe): Include mingw_getopt.o in link line.
* cygcheck.cc (print_version): Update copyright.
* strace.cc (print_version): Ditto.
(main): Allow cygwin paths for -o option.
(create_child): Allow cygwin path as argv[0].
* path.cc (path.cc): Allow UNC paths.
@
text
@d1 6
@


1.201
log
@
2003-03-01  Pierre Humblet  <pierre.humblet@@ieee.org>

       * mkpasswd.cc (main): On Win95, output both a default line and a
       line for the current user (if known) with a pseudorandom uid. If
       the -u switch is given, produce a line for the specified user.
       * mkgroup.cc (main): On Win95 change the group name from "unknown" to
       "all".
@
text
@d1 9
@


1.200
log
@* Makefile.in (cygcheck.o): Fix so that actual mingw include files are used.
* cygcheck.cc (find_on_path): Translate from cygwin path when qualified path
name found.
(pretty_id): New function.  Dump output of id command.
(dump_sysinfo): Call pretty_id for CYGWIN=ntsec and CYGWIN=nontsec cases.
@
text
@d1 8
@


1.199
log
@* cygpath.cc (doit): Allocate more space for non-path filename.
@
text
@d1 9
@


1.198
log
@* dump_setup.cc (compar): Use case insensitive comparisons.
(dump_setup): Calculate package_len based on already used "len".  Don't bother
with version_len.
@
text
@d1 4
@


1.197
log
@	* dump_setup.cc (dump_setup): Compute the longest package name
	and align columns properly.
@
text
@d1 6
@


1.196
log
@* cygcheck.cc (common_apps): Add some more apps.
* path.cc (get_cygdrive): Correctly set system flag.
@
text
@d1 5
@


1.195
log
@	* Makefile.in (ALL_LDFLAGS): Remove newlib/libm from tools paths.
	(MINGW_LDFLAGS): Remove in favor of definition from Makefile.common.
@
text
@d1 5
@


1.194
log
@	* mkgroup.c: Fix copyright date.
	* mkpasswd.c: Ditto.
	* setfacl.c: Ditto.

	Fix ChangeLog typos.
@
text
@d1 5
@


1.193
log
@	* setfacl (usage): Remove double ":" for mask and other.
@
text
@d1 6
d9 1
a9 1
	* setfacl (usage): Remove double ":" for mask and other.
d13 1
a13 1
	* mkpasswd.cc (current_user): Create.
d18 1
a18 1
	* mkgroup.cc (enum_groups): Print gid with %u.
@


1.192
log
@	* mkpasswd.cc (current_user): Create.
	(usage): Reorganize to support Win95/98/ME.
	(main): Add option for -c. Reorganize to parse options for
	Win95/98/ME and to call current_user. Add username in gecos field
	on Win95/98/ME.
	* mkgroup.cc (enum_groups): Print gid with %u.
	(print_win_error): Create from passwd.cc.
	(current_group): Create.
	(usage): Reorganize to support Win95/98/ME.
	(main): Add option for -c. Reorganize to parse options for
	Win95/98/ME and to call current_group.
@
text
@d1 4
@


1.191
log
@minor reformatting
@
text
@d1 14
@


1.190
log
@	* setfacl.c (main): Place a single : after other and mask.
	* getfacl.c (getaclentry): Allow both : and :: for other and mask.
	(main): Remove extraneous break.
@
text
@d57 1
d73 1
@


1.189
log
@	* mkpasswd.c (main): Set pw_passwd field to '*' on 9x/Me.
@
text
@d1 6
@


1.188
log
@	* setfacl.c (getperm): Set only `other' permission bits.
	(getaclentry): Set a_id to -1 by default.
@
text
@d1 4
@


1.187
log
@	* getfacl.c (permstr): Use `other' permission bits for requesting
	ace permissions.
@
text
@d3 5
@


1.186
log
@	* setfacl.c (usage): Add missing LF.
@
text
@d1 5
@


1.185
log
@* cygpath.cc (get_long_path_name_w32impl): Define similarly to GetLongPathName.
(get_long_name): Correctly prototype GetLongPathName.
(get_long_paths): Implement using get_long_name to cut down on code
duplication.
(doit): Do various things to make path output work predictably.
@
text
@d1 4
@


1.184
log
@fix changelog
@
text
@d1 9
@


1.183
log
@* mount.cc (usage): Correctly report default mode.
@
text
@d4 1
@


1.182
log
@* cygpath.cc (close_arg): Remove unused static.
* mkgroup.c (enum_local_users): Avoid compiler warning.
(enum_users): Ditto.
* mkpasswd.c: Ditto throughout.
* ssp.c: Ditto throughout.
@
text
@d1 4
@


1.181
log
@* cygcheck.cc: Include sys/time.h rather than time.h to avoid a compiler error.
@
text
@d1 8
@


1.180
log
@* cygcheck.cc: Reorder includes to avoid compiler error.
@
text
@d1 5
@


1.179
log
@Add final newlines to utils
@
text
@d1 4
@


1.178
log
@2002-09-12  Igor Pechtchanski <pechtcha@@cs.nyu.edu>
	* cygpath.cc (options) New global variable.
	(main) Make short options global for easier change.
	(print_version) Add a missing newline.
@
text
@d1 15
@


1.177
log
@* regtool.cc (find_key): Add support for custom key separator.
(usage): Document it.
@
text
@d1 5
@


1.176
log
@	* mkgroup.c (main): Don't print an entry for "Everyone".
	* mkpasswd.c (print_special): Set pw_gid to 544 for SYSTEM user.
	(main): Don't print an entry for "Everyone".
@
text
@d1 5
@


1.175
log
@* configure.in: Check for libiconv.a.
* configure: Regenerate.
* Makefile.in: Add libiconv.a to libraries required for dumper.exe.
@
text
@d1 6
@


1.174
log
@* Makefile.in: Use MINGW stuff from Makefile.common.
@
text
@d3 6
@


1.173
log
@	* mkgroup.c: Add function pointers for functions from advapi32.dll.
	(load_netapi): Load used functions from advapi32.dll.
	(main): Use function pointers instead of statically linked functions
	from advapi32.dll.
@
text
@d1 4
@


1.172
log
@* mount.cc (main): Ensure that mount_already_exists() also gets default flag
that is passed to do_mount.
* cygpath.cc (long_options): Add "dos" and "mixed", correct "close", "file" and
"type" to use NULL flag.
(usage): Clean up usage output (more), accomodate new options.
(main): Add --dos and --mixed options; accomodate all output forms in --type.
Make UNIXy output default.
@
text
@d1 7
@


1.171
log
@* cygpath.cc (usage): Clean up usage output.
(dowin): Correct output of -t mixed for -ADHPSW options.
@
text
@d1 13
a177 8

2002-05-23  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

	* setfacl.c (usage): Standardize usage output. Change return type to
	static void.
	(print_version): New function.
	(longopts): Added longopts for all options.
	(main): Accommodate changes in usage function and new version option.
@


1.170
log
@	* passwd.c: Rearrange includes to avoid unnecessary warnings.
	(GetPW): Add parameter to (dis)allow printing of Windows username.
	Use defines instead of numerical constants where possible.
	Try avoiding impersonation problem.  Rearrange to print Windows
	username only if it's different from Cygwin username.
	(ChangePW): Use defines instead of numerical constants where possible.
	(main): Call GetPW with additional parameter.  Change error text.

	* passwd.c (GetPW): Handle case of user-edited /etc/passwd
	with cygwin_internal (CW_EXTRACT_DOMAIN_AND_USER, ...).
@
text
@d1 5
@


1.169
log
@* path.cc (cygpath): Change MOUNT_AUTO to MOUNT_CYGDRIVE.
(getmntent): Ditto.
@
text
@d1 15
@


1.168
log
@* mount.cc (main): Use default system/user flag for cygdrive stuff, too.
(change_cygdrive_prefix): Change MOUNT_AUTO to MOUNT_CYGDRIVE.
* umount.cc (remove_cygdrive_prefix): Ditto.
(main): Use default system/user flag for cygdrive stuff, too.
@
text
@d3 5
@


1.167
log
@* mount.cc (opts): Remove '-i' option.
(usage): Ditto.
(main): Ditto.
(longopts): Remove --import-old-mounts option.
@
text
@d1 8
@


1.166
log
@* cygpath.cc: Add option to output windows paths in different formats: "dos"
and "mixed".
(main): Process options.
(doit): Check new options flags.
@
text
@d1 7
@


1.165
log
@	* regtool.cc (Fail): Be more verbose.
	(find_key): Add support for remote registry access.
	(usage): Document it.
	* utils.sgml: Document it.
@
text
@d1 8
d38 1
a38 1
	(usage): Accomodate stdout output.
@


1.164
log
@* strace.cc (main): Make toggle a local variable.
@
text
@d1 7
@


1.163
log
@* strace.cc (toggle): New global variable.
(error): Use exit instead of ExitProcess so that stdio buffers get flushed.
(create_child): Remove command line error checking.
(dostrace): Ditto.
(dotoggle): New function.
(usage): Add entry for new option -T|--toggle.  Alphabetize.
(longopts): Add new option -T|--toggle.
(opts): Ditto.
(main): Handle new -T|--toggle option.  Move all command line checking here
from other functions.
* utils.sgml: Update section for strace.
@
text
@d1 4
@


1.162
log
@* strace.cc (version): New global variable.
(usage): Accomodate stdout output.
(print_version): New function.
@
text
@d1 15
@


1.161
log
@* ssp.c (version): New global variable.
(longopts): Ditto.
(opts): Ditto.
(run_program): Correct cmd_line typos to cmdline.
(usage): New function.  Standardize usage output.  Add ssp.txt to --help
output.
(print_version): New function.
(main): Accommodate getopt.
@
text
@d1 6
@


1.160
log
@* umount.cc (version): New global variable.
(longopts): Accommodate new --version option.
(opts): Ditto.
(usage): Standardize usage output.
(print_version): New function.
(main): Accommodate --help, --version options.
@
text
@d3 11
@


1.159
log
@* regtool.cc (prog_name): New global variable.
(longopts): Ditto.
(opts): Ditto.
(usage): Standardize usage output.  Rearrange/add descriptions.
(print_version): New function.
(main): Accomodate longopts and new --help, --version options.  Add check for
(_argv[optind+1] == NULL).
@
text
@d1 9
d17 1
a17 1
	(main): Accomodate longopts and new --help, --version options.  Add
d50 1
a50 1
	(usage): Standardize output. Accomodate new options.
d52 1
a52 1
	(main): Accomodate longopts and new --help, --version options.
d65 1
a65 1
	(main): Accomodate longopts and new --help, --version options.
d94 1
a94 1
	(usage): Standardize usage output.  Accomodate new version option.
d96 1
a96 1
	(longopts): Accomodate new version option.
d147 1
a147 1
	(longopts): Accomodate new version option.
@


1.158
log
@* strace.cc (forkdebug): Make true by default.
(attach_process): Use window pid if cygwin pid isn't available (yet).
(create_child): Use either DEBUG_ONLY_THIS_PROCESS or DEBUG_PROCESS,
exclusively.  (Suggested by Conrad.Scott@@dsl.pipex.com)
@
text
@d1 10
d68 5
a72 5
        * setfacl.c (usage): Standardize usage output. Change return type to
        static void.
        (print_version): New function.
        (longopts): Added longopts for all options.
        (main): Accommodate changes in usage function and new version option.
d97 1
a97 1
	* cygpath.cc (main): Add option l to support conversion to   
d105 1
a105 1
	of Windows API function GetLongPathName (only 98/Me/2000/XP or  
@


1.157
log
@* mkpasswd.cc (main): Don't reset to binmode if stdout is a terminal.
@
text
@d1 7
@


1.156
log
@* mount.cc (main): Make -b the default.
@
text
@d1 4
@


1.155
log
@	* ps.cc (main): Use uid or uid32 member of struct external_pinfo
	dependent of the value of the struct's version member.
@
text
@d1 4
@


1.154
log
@	* ps.cc (main): Change print format for uid to unsigned.  Use uid32
	member of struct external_pinfo instead of uid.
@
text
@d3 5
@


1.153
log
@	* passwd.c (prog_name): New global variable.
	(longopts): Ditto.
	(opts): Ditto.
	(usage): Standardize output. Accomodate new options.
	(print_version): New function.
	(main): Accomodate longopts and new --help, --version options.
@
text
@d1 5
@


1.152
log
@	* ps.cc (usage): Fix typo.
@
text
@d3 9
@


1.151
log
@* ps.cc (prog_name): New global variable.
(longopts): Ditto.
(opts): Ditto.
(usage): New function.
(print_version): New function.
(main): Accomodate longopts and new --help, --version options.
@
text
@d1 4
@


1.150
log
@* strace.cc (attach_process): Don't tell process to start stracing here.
(proc_child): Do it here, instead, after first debug event.  This should work
around inexplicable races with DebugActiveProcess.
(dostrace): Pass any pid argument to proc_child.
@
text
@d1 9
@


1.149
log
@Fix typos.
@
text
@d1 8
@


1.148
log
@        * setfacl.c (usage): Standardize usage output. Change return type to
        static void.
        (print_version): New function.
        (longopts): Added longopts for all options.
        (main): Accommodate changes in usage function and new version option.
@
text
@d19 6
a24 6
	* mount.cc (version) New global variable.
	(usage) Standardize usage output.  Accomodate new version option.
	(print_version) New function.
	(longopts) Accomodate new version option.
	(opts) Ditto.
	(main) Ditto.
d70 6
a75 6
	* kill.cc (prog_name) New global variable.
	(usage) Standardize usage output.  Add descriptions.
	(print_version) New function.
	(longopts) Accomodate new version option.
	(opts) Ditto.
	(main) Ditto.
d116 1
a116 1
	* dumper.cc (usage) Standardize usage output.  Generalize to allow use
d118 3
a120 3
	(longopts) New struct.  Added longopts for all options.
	(print_version) New function.
	(main) Change getopt to getopt_long.  Accommodate new help and version
@


1.147
log
@	* getfacl.c (usage): Standardize usage output. Change return type to
	static void.
	(print_version): New function.
	(longopts): Added longopts for all options.
	(main): Accommodate new help and version options.
@
text
@d3 8
@


1.146
log
@fix typo.
@
text
@d1 8
@


1.145
log
@* mount.cc (version) New global variable.
(usage) Standardize usage output.  Accomodate new version option.
(print_version) New function.
(longopts) Accomodate new version option.
(opts) Ditto.
(main) Ditto.
@
text
@d34 1
a34 1
	(fhandler_disk_file::fstat): Ditto for delete/free.
@


1.144
log
@	* cygpath.cc (usage): Change usage output slightly.

	* cygpath.cc (main): Add option l to support conversion to
	Windows long file names.  Refactured code for capital options.
	Support of options from file for capital options.
	(dowin): New function.  Refactured from main.
	(doit): Call long path conversion.
	(get_long_name): New function.
	(get_long_paths): New function.
	(get_long_path_name_w32impl): New function.  Reimplementation
	of Windows API function GetLongPathName (only 98/Me/2000/XP or
	higher).
	(get_short_name): Call GetShortPathName only once.
	(get_short_paths): Fix calculating buffer size.
	* utils.sgml: Update cygpath section for l option.
@
text
@d1 9
@


1.143
log
@* strace.cc (add_child): Use calloc since new requires working libstdc++.a.
(fhandler_disk_file::fstat): Ditto for delete/free.
@
text
@d1 20
@


1.142
log
@	* cygpath.cc (get_short_paths): Fix more error checking.
	(get_short_name): Ditto.

	* cygpath.cc (main): Add option H to show the Windows' profiles
	directory.  Support short names for options DPSW.  Clean up
	copied code lines.
	* utils.sgml: Update cygpath section for H option and s support.
@
text
@d1 6
@


1.141
log
@	* cygpath.cc (get_short_name): Fix error checking.
@
text
@d1 12
d15 1
a15 1
	* cygpath.cc (get_short_name): Fix error checking.
@


1.140
log
@* kill.cc (prog_name) New global variable.
(usage) Standardize usage output.  Add descriptions.
(print_version) New function.
(longopts) Accomodate new version option.
(opts) Ditto.
(main) Ditto.
@
text
@d1 4
@


1.139
log
@* kill.cc (listsig): Display numeric id when given symbolic input.
@
text
@d1 9
@


1.138
log
@* kill.cc (usage): Show new options.  Allow specification of output stream.
(main): Implement 'h' option.
@
text
@d3 4
@


1.137
log
@Update ChangeLog with missing entry.
@
text
@d3 6
@


1.136
log
@* Makefile.in (kill.exe): Add as a specific target.
* kill.cc (longopts): New.
(opts): Ditto.
(get_sig): Accept const char * parameter.  Return -1 on unknown signal.
(test_for_unknown_sig): New function.
(listsig): New function.
(main): Use getopt_long for option parsing.  Implement -l, and -s options.  Use
test_for_unknown_sig() to test for signal validity.
@
text
@d12 3
@


1.135
log
@* mount.cc (do_mount): Default to non-exec option for remote drives.  Report
warnings before attempting a mount.
(longopts): Add no-executable option.
(mount_commands): Ditto.
(opts): Ditto.
(usage): Ditto.  Indicate that system mount is now the default.
(main): Accommodate no-executable option.  Make system mount the default.
* umount.cc (usage): Indicate that system umount is now the default.
(main): Make system umount the default.
@
text
@d1 11
@


1.134
log
@* dumper.cc (usage) Standardize usage output.  Generalize to allow use for
help.
(longopts) New struct.  Added longopts for all options.
(print_version) New function.
(main) Change getopt to getopt_long.  Accommodate new help and version options.
@
text
@d1 13
d375 1
a375 1
	* Makefile.in (MINGW_INCLUDES): Accomodate changes in Makefile.common.
@


1.133
log
@	* mkgroup.c (main): Change call to exit() to a return statement.
	* mkpasswd.c (main): Ditto.

	* mkpasswd.c (usage): Simplify usage output.  Generalize to allow use
	for help. Correct '?' typo to 'h'.
	(longopts): Add version option.
	(opts): Add 'v' version option.
	(print_version): New function.
	(main): Accommodate new version option.  Accommodate usage parameter
	changes.
@
text
@d1 9
@


1.132
log
@* mkgroup.c (usage): Use one just fprintf + string concatenation for output
message.
(print_version): Add void to function type and update copyright.
@
text
@d1 15
@


1.131
log
@	* mkgroup.c (usage): Simplify usage output.  Generalize to allow use
	for help. Correct '?' typo to 'h'.
	(longopts): Add version option.
	(opts): Add 'v' version option.
	(print_version): New function.
	(main): Accommodate new version option.  Accommodate usage parameter
	changes.  Use usage to output help message.
@
text
@d1 6
@


1.130
log
@2002-03-15  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): When generating group 513, check for computer's
	primary domain instead of current user's domain.

2002-03-14  Corinna Vinschen  <corinna@@vinschen.de>

	* mkgroup.c (main): When generating group 513, check for domain SID
	if computer name isn't mapped to a SID.
@
text
@d1 10
@


1.129
log
@* kill.cc (usage): Move to top of file.
(getsig): Ditto.
(forcekill): Ditto.
@
text
@d1 10
@


1.128
log
@* cygcheck.cc: Reformat.
@
text
@d1 6
@


1.127
log
@* cygcheck.cc (longopts): Use correct short option for --version.
@
text
@d3 4
@


1.126
log
@* cygpath.cc: Reformat.
* cygpath.cc (print_version): New function.
(main): Accommodate new version function.  Initialize 'o' to prevent warning.
* cygcheck.cc (main): Eliminate non-GNU formatting glitch.
@
text
@d3 4
@


1.125
log
@* ssp.c (help_desk): Fix compiler warning.  Christopher Faylor <cgf@@redhat.com>
Change appropriate globals to statics throughout.
* cygcheck.cc (usage): Simplify usage output.  Generalize to allow use for
help.
(longopts): Add version option.
(opts): Add 'V" version option.
(print_version): New function.
(main): Accommodate new version option.  Accommodate usage parameter changes.
Use usage to output help message.
* Makefile.in (CXXFLAGS): Add override so that HAVE_DECL_GETOPT is defined.
(libbfd): Use -B rather than -L so that bfd from build directory is correctly
found.
(libintl): Ditto.
@
text
@d1 14
@


1.124
log
@* mount.cc (usage): Fix typo in output.
@
text
@d1 24
@


1.123
log
@* strace.cc (attach_process): Change CW_STRACE_ON to CW_STRACE_TOGGLE.
@
text
@d1 4
@


1.122
log
@	* mkpasswd.c (main): Set default home path for 9x/Me if --path-to-home
	isn't given.
@
text
@d1 4
@


1.121
log
@	* passwd.cc (ChangePW): Add parameter to differ between called for
	checking old password and called for changing password.  If called
	for checking old password, return non-zero only if password is surely
	incorrect.
	(main): Call ChangePW() with additional parameter.
@
text
@d1 5
@


1.120
log
@* dump_setup.cc (parse_filename): Don't consider '_' part of the version.
@
text
@d1 8
@


1.119
log
@* cygcheck.cc: Fix typo.  Remove uid_t kludge.  Rely on kludge in sys/cygwin.h
instead.
* getfacl.c: Add include to remove warning.
* mkgroup.c (main): Assign variables outside of parameter passing.  This seems
to eliminate some compiler warnings.
@
text
@d1 5
@


1.118
log
@* cygcheck.cc: Use specific cygwin includes, as required.
@
text
@d3 8
@


1.117
log
@* Makefile.in (MINGW_INCLUDES): Change cygwin include.
* strace.cc: Use specific cygwin includes, as required.
(load_cygwin): New function.  Loads cygwin DLL, if necessary.
(attach_process): Attaches strace to a running process.
(dostrace): Accept pid argument.  Attach to pid if supplied.
(usage): Describe -p option.  Correct system description.
(longopts): Alphabetize.
(opts): Ditto.
(main): Ditto.  Handle -p option.
* Makefile.in (CXXFLAGS): Ensure that important settings are preserved even
when overriden by command line.
@
text
@d3 4
@


1.116
log
@* Makefile.in: Build intermediate cygcheck.o to force use of MINGW_CXXFLAGS.
* cygcheck.cc (cygwin_info): Intitialize variable to quiet g++ warning.
(dump_sysinfo): Make variables unsigned to quiet g++ warnings.
* strace.cc (version_string): Rename from SCCSid.
(add_child): Remove unused variable.
(version): Use version_string.  Avoid use of fprintf.
@
text
@d1 17
@


1.115
log
@* Makefile.in: Use CXX instead of CC to compile C++ sources.
@
text
@d1 9
@


1.114
log
@* cygcheck.cc (already_did): Avoid default constructors, which may require
exception support.
@
text
@d1 4
@


1.113
log
@	* cygpath.cc (main): Add options to show Desktop and Start
	Menu's Programs directory for current user or all users.
	Move bulk of DPWS options outside the getopt case statement.
	* utils.sgml: Update cygpath section for ADPWS options.
@
text
@d1 5
@


1.112
log
@	* cygpath.cc (doit): Empty file ignored using option -i.
@
text
@d1 7
@


1.111
log
@	* mkpasswd.c (print_win_error): Add a new function.
	(enum_users): Use print_win_error.
	(enum_local_groups): Ditto.
	(main): Ditto.
@
text
@d1 4
@


1.110
log
@* cygpath.cc (doit): Detect and warn about an empty path.  Detect and warn
about errors converting a path.
(main): Set prog_name correctly -- don't leave an extra slash or backslash at
the beginning of it.
@
text
@d1 7
@


1.109
log
@	* mkpasswd.c (enum_users): Change to unconditionally use
	the --path-to-home option, if supplied by the user.  Use default
	--path-to-home option value, if appropriate.
	(usage): Change usage statement to reflect new semantics.
	(main): Remove defaulting of the --path-to-home option.
@
text
@d1 7
@


1.108
log
@* mkpasswd.c (opts): Add indication that '-p' option requires an argument.
@
text
@d1 8
@


1.107
log
@* Makefile.in: Add define to CXXFLAGS.
@
text
@d1 5
@


1.106
log
@* cygcheck.cc (usage): Add -c description.
* cygpath.cc (usage): Alphabetize options.
* strace.cc (usage): Ditto.
@
text
@d1 4
@


1.105
log
@Fix typo.
@
text
@d1 6
@


1.104
log
@* path.cc (cygpath): Don't consider cygpath stuff when trying to derive native
paths.
@
text
@d3 1
a3 1
	* path.cc (cygpath): Don't consider cygpath stuff when trying to derive
@


1.103
log
@	Patch by Mark Bradshaw <bradshaw@@staff.crosswalk.com>:
	* mkpasswd.c: include lmerr.h
	(main): New -u option to allow specifying a
	specific user.  If specified, groups aren't displayed and
	output is limited to only the specified user.
	(enum_users): If specific user is specified, via -u option,
	display only that user's record.  With -u use NetUserGetInfo
	instead of NetUserEnum.
	(load_netapi): Added netusergetinfo.
@
text
@d1 5
d131 1
a131 1
	* mkpasswd.cc (enum_users): Shorten "unused" passwd field. 
@


1.102
log
@	* strace.cc (main): Change getopt() to getopt_long().
	Add support for help and version info.
	Use new parse_mask() function for -m/--mask option.
	(longopts): Add long options structure.
	(opts): Move options string from getopts call to static var.
	(usage): Print usage information.
	(SCCSid): Version info.
	(version): New function for displaying version info.
	(parse_mask): New function supporting parsing of mnemonics,
	hex, and basic expressions in masks.
	(mnemonic2ul): New mnemonic parsing function.
	(tag_mask_mnemonic): New type.
	(mnemonic_table): New table of mnemonics for mnemonic2ul() to
	search through.
@
text
@d1 11
@


1.101
log
@	Fix ChangeLog entry.
@
text
@d1 17
@


1.100
log
@        * cygcheck.cc (dump_sysinfo): Redefine output format slightly.
@
text
@d4 1
@


1.99
log
@* cygcheck.cc (main): Slight formatting tweak.
@
text
@d1 4
@


1.98
log
@        * cygcheck.cc (dump_sysinfo): Add some more details.
@
text
@d1 4
@


1.97
log
@Add missing ChangeLog entry.
@
text
@d3 4
@


1.96
log
@	* cygcheck.cc (dump_sysinfo): Print more detailed OS information string
	using OSVERSIONINFOEX information.
@
text
@d8 4
@


1.95
log
@* cygcheck.cc (scan_registry): Open registry with read-only access.
(main): Reflect argument change for dump_setup.
* dump_setup.cc (dump_setup): Add preliminary extra argument for future use.
* path.cc (read_mounts): Open registry with read-only access.
@
text
@d1 5
@


1.94
log
@* cygcheck.cc (main): Display package info when '-s' is specified.
* dump_setup.cc (dump_setup): Change header.  Remove typo.  Always sort
packages output.
@
text
@d3 8
@


1.93
log
@* dump_setup.cc: New file.
* Makefile.in: Add info for dump_setup.o.
* cygcheck.cc (main): Recognize '-c' option for checking setup installed base.
* path.cc (cygpath): Read mount table if not loaded.
@
text
@d3 6
@


1.92
log
@* Makefile.in (cygcheck.exe): Compile as -mno-cygwin executable.
* path.cc: New file.
* cygcheck.cc (init_paths): Use MS-DOS path syntax.
(cygwin_info): Properly display cygwin version numbers.  Prettify some output.
(dump_sysinfo): Calculate max names of posix and ms-dos paths for prettier
output.
@
text
@d1 8
@


1.91
log
@	* cygcheck.cc (dump_sysinfo): Print more detailed OS information string.
@
text
@d1 10
@


1.90
log
@	* getfacl.c (username): New function.
	(groupname): Ditto.
	(usage): Ditto.  Add more user friendly help text.
	(main): Add -n and --help option.  Print names instead of IDs
	unless -n option is given.
	* setfacl.c (getperm): Tolerate whitespace and comment chars in input.
	(getaclentry): Fix several input string misdetections.
	(getaclentries): Allow - as input file name to read from stdin.
	Tolerate whitespace and comment chars in input.
	(usage): Add more user friendly help text.
	(main): Add --help option.
@
text
@d1 4
@


1.89
log
@* strace.cc (main): New option '-w'. Start traced process in separate
window. New option '-S x'. Flush buffered output every x seconds.
(create_child): Start child process in new window, when requested.
When requested, periodically flush debugging output.
@
text
@d1 14
@


1.88
log
@Clarify checkin comment slightly.
@
text
@d1 7
@


1.87
log
@* Makefile.in: Remove EXEEXT consideration.  We always need EXEEXT.
@
text
@d3 2
a4 1
	* Makefile.in: Remove EXEEXT consideration.  We always need EXEEXT.
@


1.86
log
@        * mkgroup.c: Avoid compiler warnings.
        (print_special): New function.
        (main): Print special accounts by calling print_special().
        * mkpasswd.c: Avoid compiler warnings.
        (enum_users): Print additional U-domain\username info in gecos
        field when SIDs are printed.
        (print_special): New function.
        (main): Print special accounts by calling print_special().
@
text
@d1 4
@


1.85
log
@* mkpasswd.cc (enum_users): Shorten "unused" passwd field.
@
text
@d1 11
@


1.84
log
@* Makefile.in: Allow stdinc searching for dumper.
@
text
@d1 4
@


1.83
log
@* Makefile.in (MINGW_INCLUDES): Accomodate changes in Makefile.common.
@
text
@d1 4
@


1.82
log
@* kill.cc (main): Set exit value to 1 on invalid pid.  Perform minor cleanup.
@
text
@d1 4
@


1.81
log
@* Makefile.in (mingw_getopt.o): Ensure that newlib include directories are not
searched.
@
text
@d1 5
@


1.80
log
@* Makefile.in (MINGW_INCLUDES): Still need cygwin/include directory.
@
text
@d1 5
@


1.79
log
@* Makefile.in: Filter newlib includes from mingw compilation.
@
text
@d1 4
@


1.78
log
@* dumper.cc (dumper::dumper): Print error code in case of error.
(dumper::add_thread): Ditto.
(dumper::collect_memory_sections): Ditto.
(dumper::dump_memory_region): Ditto.
(dumper::collect_process_information): Ditto.
(print_section_name): Fix formatting.
@
text
@d1 4
@


1.77
log
@* dumper.cc (main): Properly recognize negative pids (used by w9x).
@
text
@d1 9
@


1.76
log
@* dumper.cc (main): Change command-line arguments format to be
similar to gdb. Allow adding error_start=x:\path\to\dumper.exe to
CYGWIN environment variable to perform core dumping in case of
program crash.
(usage): Ditto.
@
text
@d1 4
@


1.75
log
@* Makefile.in (dumper): Change logic for libbfd and libintl so that they will
be found either in the build tree or the installed directory.
* mkpasswd.c (enum_users): Add a comment as a password for NT.
@
text
@d1 8
@


1.74
log
@* mount.cc (mount_commands): Don't write /cygdrive/u mount points.
@
text
@d1 6
@


1.73
log
@* mount.cc (longopts): Add mount-commands to options list.
(usage): Add mount-commands option.
(mount_commands): New function.  Write commands to recreate current mounts.
@
text
@d3 4
d89 1
a89 1
  
@


1.72
log
@* mount.cc (main): Eliminate excess arguments in printf.
@
text
@d1 7
@


1.71
log
@* dumper.h: Update copyright notice.
* dumper.cc: Ditto.
* dumper.cc: (dumper::print_core_section_list): New function.
* dumper.h: (dumper::print_core_section_list): Declare it.
* dumper.cc (print_section_name): New function.
(dumper::collect_process_information): Augment debugging output.
Stop debugee processing if it posts double exception.
(usage): Fix typo in option name.
@
text
@d1 4
@


1.70
log
@* mount.cc (main): Issue correct warning for 'not enough arguments'.
@
text
@d1 11
@


1.69
log
@* cygpath.cc (main): Support -w for Windows (System) directories and return
physical correct orthography for the Windows System dir.
@
text
@d1 4
@


1.68
log
@        * regtool.cc (find_key): Handle keys with only one subkey.
@
text
@d1 5
@


1.67
log
@* regtool.cc (find_key): Revert previous change.
@
text
@d1 4
@


1.66
log
@* regtool.cc (find_key): Allow '/' as a synonym for '\\'.
@
text
@d1 4
@


1.65
log
@* mkpasswd.c (main): Output passwd file in binary mode so that there are no CRs
in the file.
* umount.cc (remove_all_user_mounts): Don't try to remove /cygdrive mounts.
@
text
@d1 4
@


1.64
log
@* mkpasswd.c (enum_users): Use /bin/bash as the default shell.
(main): Ditto.
@
text
@d1 7
@


1.63
log
@* passwd.cc (ttymnam): New function.
(main): Use ttynam() to report name of tty.
@
text
@d1 5
@


1.62
log
@* dumper.cc (dumper::init_core_dump): Set architecture field in dump
header.
@
text
@d1 5
@


1.61
log
@        * mkgroup.c: Add function pointers `netlocalgroupgetmembers' and
        `netgroupgetusers'.
        (load_netapi): Load function pointers `netlocalgroupgetmembers'
        and `netgroupgetusers'.
        (enum_local_users): New function.
        (enum_local_groups): Call `enum_local_users' for each group if
        `print_users' is set.
        (enum_users): New function.
        (enum_groups): Call `enum_users' for each group if `print_users' is set.
        (usage): Add usage text for `-u/--users'.
        (longopts): Add option `--users'.
        (opts): Add option character `u'.
        (main): Set `print_users' according to option `-u/--users'.
        Call `enum_local_groups' and `enum_groups' with additional parameter
        `print_users'.
@
text
@d1 5
@


1.60
log
@* mount.cc (longopts): Add help to options list.
(opts): Add 'h' to options string.
* umount.cc (longopts): Add help to options list.
(opts): Add 'h' to options string and change 'R' to 'A'.
@
text
@d1 18
@


1.59
log
@Patch by Kazuhiro Fujieda  <fujieda@@jaist.ac.jp>:
        * mkgroup.c (enum_groups): Use RID + offset specified an additional
        argument as ID.
        (usage): Add description of -o option.
        (longopts, opts): Add specifications of -o/--id-offset option.
        (main): Add -o option. Invoke enum_groups with specified offset.
        * mkpasswd.c (enum_users): Just like mkgroup.c.
        (usage, longopts, opts): Ditto.
        (main): Add -o option. Invoke enum_users with specified offset
        only against domain accounts.
@
text
@d1 7
d14 1
a14 1
	(main): Add -o option. Invoke enum_groups with specified offset.
d17 2
a18 2
	(main): Add -o option. Invoke enum_users with specified offset
	only against domain accounts.
d48 3
a50 3
        * getfacl.c: Add copyright hint.
        * setfacl.c: Ditto.
        * strace.cc: Ditto.
@


1.58
log
@* mkgroup.c (uni2ansi): Use native method to convert from Unicode
to multi-byte strings.
* mkpasswd.c (uni2ansi): Ditto.
(enum_users): Pass buffer size when converting string.
(enum_local_groups): Ditto.
* mkgroup.c (enum_groups): Ditto.
(enum_local_groups): Ditto.
@
text
@d1 12
@


1.57
log
@* mount.cc (main): Use getopt_long for parsing arguments.
(usage): Reformat, show long and short options.
* umount.cc (main): Ditto, all of the above.
@
text
@d1 10
@


1.56
log
@* mount.cc (show_mounts): Change format string to more closely resemble UNIX
when displaying mount table.
@
text
@d1 6
@


1.55
log
@* kill.cc (forcekill): Use dwProcessId when opening a process, not the Cygwin
pid.
@
text
@d1 5
@


1.54
log
@        * getfacl.c: Add copyright hint.
        * setfacl.c: Ditto.
        * strace.cc: Ditto.
@
text
@d1 5
@


1.53
log
@* regtool.cc (cmd_list): Add new registry display options.
(cmd_list): Add code to implement -p, -k, and -l options.
* regtool.cc (Fail): Add call to LocalFree to free memory allocated by
FormatMessage.
@
text
@d1 6
@


1.52
log
@* regtool.cc (translate): Ensure that 'c' is initialized.
(cmd_set): Ditto for rv.
@
text
@d1 8
@


1.51
log
@* cygcheck.cc (cygwin_info): Add some more bounds checking.  From Matt Harget
<matt@@use.net>:
* utils/cygcheck.cc (keyeprint): Move declaration before other functions so it
could be used by all functions to report error messages.  Add comment.
(add_path): Check for NULL return from malloc.
(find_on_path): Check initial uses of pointers for NULL.
(rva_to_offset): Ditto.
(init_paths): Add checking for return values of Win32 calls.
(get_dword): Ditto.
(get_word): Ditto.
(dll_info): Ditto, also add NULL pointer checks.
(scan_registry): Ditto.
(check_keys): Ditto.
(dump_sysinfo): Ditto.  Add default case to switch.  Add error reporting if
GetVolumeInformation fails, except when it returns ERROR_NOT_READY.
(track_down): Add checking for NULL pointers and return values of Win32 calls.
(cygwin_info): Ditto.  Correct small memory leak.
@
text
@d1 1
a1 1
Fri Dec 15 23:41:48 2000  Christopher Faylor <cgf@@cygnus.com>
d3 2
a4 345
	* cygcheck.cc (cygwin_info): Add some more bounds checking.

Fri Dec 15 23:41:34 2000  Christopher Faylor <cgf@@cygnus.com>

	From Matt Harget <matt@@use.net>:
	* utils/cygcheck.cc (keyeprint): Move declaration before other
	functions so it could be used by all functions to report error
	messages. Add comment.
	(add_path): Check for NULL return from malloc.
	(find_on_path): Check initial uses of pointers for NULL.
	(rva_to_offset): Ditto.
	(init_paths): Add checking for return values of Win32 calls.
	(get_dword): Ditto.
	(get_word): Ditto.
	(dll_info): Ditto, also add NULL pointer checks.
	(scan_registry): Ditto.
	(check_keys): Ditto.
	(dump_sysinfo): Ditto. Add default case to switch. Add error
	reporting if GetVolumeInformation fails, except when it
	returns ERROR_NOT_READY.
	(track_down): Add checking for NULL pointers and
	return values of Win32 calls.
	(cygwin_info): Ditto.  Correct small memory leak.

Sun Dec 10 19:08:58 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Compile/link dumper.exe with c++.

Tue Dec  7 11:15:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* mkpasswd.c: Slight formatting changes to the below patch.
	(longopts): Fix typo in `local-groups' option.
	(main): Initialize `passed_home_path' before first usage.

Tue Dec  7 11:15:00 2000  Chris Abbey <cabbey@@bresnanlink.net>

	* mkpasswd.c: make default home directory /home/$user if one
	can't be found in user registry. Allow user to override
	that with command line arg.

Sun Dec  3 00:40:47 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Use CXX to build the DLL.
	* configure.in: Find correct c++ compiler.
	* configure: Regenerate.

Sat Nov 18 23:53:59 2000  Christopher Faylor <cgf@@cygnus.com>

	* utils.sgml: Document new options for ps and strace.

Wed Nov  8 08:49:27 2000 Jason Tishler <jt@@dothill.com>

	* mount.cc (main): Call show_cygdrive_info instead of
	show_cygdrive_prefixes.
	* mount.cc (show_cygdrive_prefixes): Remove function.
	* mount.cc (show_cygdrive_info): New function.  Actually,
	show_cygdrive_info is really an enhanced version of
	show_cygdrive_prefixes renamed to show_cygdrive_info that also displays
	the user and system flags.

Wed Nov  8 15:52:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* mkgroup.c (load_netapi): New function to load netapi32.dll functions
	dynamically so that mkgroup works on 9x/ME as well.
	Use corresponding function pointers throughout.
	(usage): Change to `int'. Change text to be conformant to mkpasswd.
	(main): Use `getlongopt' to process options.
	Special handling to create a group entry on 9x/ME.
	* mkpasswd.c (load_netapi): New function to load netapi32.dll functions
	dynamically so that mkpasswd works on 9x/ME as well.
	Use corresponding function pointers throughout.
	(usage): Change to `int'. Change text to be conformant to mkgroup.
	(main): Use `getlongopt' to process options.
	Special handling to create a passwd entry on 9x/ME.
	Change conditional to create an entry for the local administrators
	group when appropriate.

Thu Nov  2  2:01:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* kill.cc (main): Return 1 in case of errors.

Sat Oct 28 01:37:55 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Accomodate newer gcc's which require linking of c++
	programs with g++.  Fixup output for some compilations.
	* cygcheck.cc: Respond to compiler warnings.
	* dumper.cc (main): Ditto.
	* parse_pe.cc (exclusion::sort_and_check): Ditto.
	* setfacl.cc (getaclentry): Ditto.

Fri Oct 27 20:20:29 2000  Christopher Faylor <cgf@@cygnus.com>

	* strace.cc (main): Add a '-b' option.

2000-10-18  DJ Delorie  <dj@@redhat.com>

	* ssp.c: new
	* ssp.txt: new
	* Makefile.in: build ssp.exe

Wed Oct 18 18:57:46 2000  Christopher Faylor <cgf@@cygnus.com>

	* ps.cc (main): Add some extra space to Windows pid output for
	Windows 95.

Tue Oct 17 23:49:04 2000  Christopher Faylor <cgf@@cygnus.com>

	* ps.cc (main): Add some extra space to pid output for Windows 95.

Tue Oct 17  1:09:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	Patch suggested by Brad Town <btown@@ceddec.com>:
	* cygcheck.cc (main): Fix argument counting.

Sat Oct 14 23:42:58 2000  Christopher Faylor <cgf@@cygnus.com>

	* ps.cc (main): Accomodate new PID_ constant.

Thu Oct 12 02:19:12 2000  Christopher Faylor <cgf@@cygnus.com>

	* strace.cc (proc_child): Handle exceptions correctly.

Sun Oct  8 23:11:17 2000  Christopher Faylor <cgf@@cygnus.com>

	* ps.cc (main): Change order of reporting slightly so that windows pids
	are more obvious.
	* strace.cc (add_child): Just add child's pid directly.
	(remove_child): No need to close the child process pid since
	ContinueDebugEvent does that automatically.
	(proc_child): Ditto for child thread.

Fri Sep 29 13:12:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* cygcheck.cc (keyeprint): New function.
	(check_keys): New function. Perform checking keycodes.
	(main): Add option `-k' for invoking check_keys.
	Change option processing to use long options and getopt_long.
	* cygkeycheck.cc: Removed. Functionality moved to `cygcheck.cc'.
	* Makefile.in: Remove cygkeycheck from the dependencies.

Wed Sep 27 16:24:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* cygkeycheck.cc: New file. Utility to retrieve keycodes.
	* Makefile.in: Add cygkeycheck to the dependencies.

2000-09-15  Joerg Schaible <joerg.schaible@@gmx.de>

	* cygpath.cc: Add new options: -s and -i.
	* utils.sgml: Document the new options.

Tue Sep 12 22:45:28 2000  Christopher Faylor <cgf@@cygnus.com>

	* kill.cc (main): Change behavior of -f so that it will force the
	killing of a cygwin process after waiting 2 tenths of a second for it
	to terminate.
	(forcekill): Add an extra argument determining whether to wait for the
	process to exit.

Sun Sep 10 12:50:02 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Refine dumper.exe message.

Mon Aug 28 21:55:56 2000  Christopher Faylor <cgf@@cygnus.com>

	* kill.c (main): Avoid skipping next argument when a signal number is
	specified.
	* Makefile.in: Always clean dumper.exe.

Fri Aug 25 12:41:53 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Only build dumper.exe when all of its library and
	include dependencies are available.

Fri Aug 25 11:44:29 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Make failure to build dumper.exe a non-error.

Thu Aug 24 18:02:35 2000  Christopher Faylor <cgf@@cygnus.com>

	* ps.cc (main): Always print a cygwin process using cygwin paths.

2000-08-24  Egor Duda  <deo@@logos-m.ru>

	* Makefile.in: Add dumper.exe target and associated mechanisms for building it.
	* dumper.cc: New file.
	* dumper.h: New file.
	* module_info.cc: New file.
	* parse_pe.cc: New file.

Mon Jul 31 15:12:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* passwd.c (main): Initialize oldpwd before beeing used.

Sat Jul 29 00:44:46 2000  Christopher Faylor <cgf@@cygnus.com>

	* kill.cc (main): Add '-f' option to force termination of a process.
	(forcekill): New function.
	* ps.cc (main): Add '-W' option to list Windows pids as well as Cygwin
	pids.
	(dummyprocessmodules): New function.
	(GetModuleFileNameEx95): New function.
	(init_win): New function.
	(to_time_t): New function.

Thu Jul 27 22:54:28 2000  Jason Tishler <jt@@dothill.com>

	* utils/mount.cc (main): Add --show-cygdrive-prefixes option.
	(show_cygdrive_prefixes): New function.
	* utils/umount.cc (main): Add --remove-cygdrive-prefix option.
	(error): Change signature from 'char *' to 'const char *'.
	(remove_cygdrive_prefix): New function.

Thu Jul 13 22:24:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* mount.cc (mount_already_exists): Slightly rearrange.
	Change message texts.

Thu Jul 13 13:02:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* mount.cc (mount_already_exists): Additional warning message
	if mount point exists with another mount type.

Sat Jul  1 00:19:27 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Find getopt.c in cygwin/lib subdirectory.

Sat Jun 24 23:16:33 2000  Christopher Faylor <cgf@@cygnus.com>

	* cygcheck.cc (cygwin_info): New function.  Scans DLL for Cygwin
	version info.
	(dll_info): Add path parameter for checking "cygwin1.dll".
	(track_down): Accomodate additional parameter for dll_info.
	(ls): Ditto.
	(dump_sys_info): Always print cygwin1.dll last.

2000-06-07  Kazuhiro Fujieda <fujieda@@jaist.ac.jp>

	* mount.cc (error): New function to report an error and exit.
	* umount.cc (error): Ditto.
	(remove_all_automounts): Check return status of cygwin_umount.
	(remove_all_user_mounts): Ditto.
	(remove_all_system_mounts): Ditto.

2000-06-05  DJ Delorie  <dj@@cygnus.com>

	* mount.cc: add stdlib.h for exit
	* umount.cc: ditto
	* strace.cc: add #define for alloca

Fri May 20  0:01:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* regtool.cc (find_key): Add parameter `access'.
	Call `RegOpenKeyEx' with that desired access.
	(cmd_add, cmd_remove, cmd_set, cmd_unset): Call
	`find_key' with KEY_ALL_ACCESS access.
	(cmd_list, cmd_check, cmd_get): Call `find_key'
	with KEY_READ access.

2000-05-19  DJ Delorie  <dj@@cygnus.com>

	* cygpath.cc: add --windir/--sysdir options
	* utils.sgml: and document them

Thu May 18 14:38:26 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Eliminate WINSUP_DEPS.
	* cygpath.cc: Reorganize includes to accomodate sys/cygwin.h changes.
	* mkgroup.c: Ditto.
	* mkpasswd.c: Ditto.
	* mount.cc: Ditto. Eliminate use of cygwin source specific includes.
	* ps.cc: Ditto.
	* cygwin.cc: Eliminate obsolete file.

Wed Apr 26 23:43:25 2000  Christopher Faylor <cgf@@cygnus.com>

	* mount.cc (main): Add "-X" option to specify a "Cygwin executable".

Sat Apr 15 23:34:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* mkpasswd.c (main): Use GetDCName instead of GetAnyDCName.
	Don't create extra passwd entry for administrators group
	if local_groups is set.
	(usage): Change usage text slightly.
	(enum_users): Loop while ERROR_MORE_DATA is returned.
	(enum_local_groups): Ditto.
	* mkgroup.c (enum_local_groups): Ditto.
	(enum_groups) Ditto.
	(usage): Change usage text slightly.

Thu Apr 13 01:22:35 2000  Christopher Faylor <cgf@@cygnus.com>

	* cygpath.cc (main): Add -a -o and -c options.
	(doit): Ditto.

Mon Apr 10 22:56:07 2000  Christopher Faylor <cgf@@cygnus.com>

	* cygpath.cc (main): Add -f option for processing a group of paths from
	a file.
	(doit): New function.

Sat Mar 18 22:52:37 2000  Christopher Faylor <cgf@@cygnus.com>

	Patch suggested by Mumit Khan  <khan@@xraylith.wisc.edu>:
	* strace.cc (_impure_ptr): New global variable to make strace build
	under Cygwin gcc.

Sat Mar 18 12:45:10 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Make CXXFLAGS consistent with cygwin.

Wed Mar 15 00:53:58 2000  Christopher Faylor <cgf@@cygnus.com>

	* Makefile.in: Use MINGW_CXXFLAGS when compiling strace.

Sun Mar 12 21:22:25 2000  Christopher Faylor <cgf@@cygnus.com>

	* strace.cc: Throughout, track information like start_time, etc.  on a
	per-process basis.

Sun Feb 27 23:37:32 2000  Christopher Faylor <cgf@@cygnus.com>

	* strace.cc (handle_output_debug_string): Parse strace output to allow
	various types of time output.

Fri Jan 21 02:10:26  Corinna Vinschen  <corinna@@vinschen.de>

	* utils/regtool.cc (translate): Added unix like backslash
	processing.

2000-01-20  Corinna Vinschen  <corinna@@vinschen.de>

	* regtool.cc: allow forward slashes as key separators

2000-01-19  DJ Delorie  <dj@@redhat.com>

	* regtool.cc: New file.
	* Makefile.in: add regtool
	* utils.sgml: add regtool

Sat Jan  8 17:13:51 2000  Christopher Faylor <cgf@@cygnus.com>

	* getfacl.c: New file.
	* setfacl.c: New file.
	* Makefile.in: Add getfacl.exe and setfacl.exe to list of PROGS.
	Fix link flags in MINGW case.
@


1.50
log
@* Makefile.in: Compile/link dumper.exe with c++.
@
text
@d1 26
d45 3
a47 3
        * Makefile.in: Use CXX to build the DLL.
        * configure.in: Find correct c++ compiler.
        * configure: Regenerate.
@


1.49
log
@        * mkpasswd.c: make default home directory /home/$user if one
        can't be found in user registry. Allow user to override
        that with command line arg.
        (longopts): Fix typo in `local-groups' option.
        (main): Initialize `passed_home_path' before first usage.
@
text
@d1 4
@


1.48
log
@* Makefile.in: Use CXX to build the DLL.
* configure.in: Find correct c++ compiler.
* configure: Regenerate.
@
text
@d1 12
@


1.47
log
@* utils.sgml: Document new options for ps and strace.
@
text
@d1 6
@


1.46
log
@* mount.cc (main): Call show_cygdrive_info instead of show_cygdrive_prefixes.
* mount.cc (show_cygdrive_prefixes): Remove function.
* mount.cc (show_cygdrive_info): New function.  Actually, show_cygdrive_info is
really an enhanced version of show_cygdrive_prefixes renamed to
show_cygdrive_info that also displays the user and system flags.
@
text
@d1 4
@


1.45
log
@        * mkgroup.c (load_netapi): New function to load netapi32.dll functions
        dynamically so that mkgroup works on 9x/ME as well.
        Use corresponding function pointers throughout.
        (usage): Change to `int'. Change text to be conformant to mkpasswd.
        (main): Use `getlongopt' to process options.
        Special handling to create a group entry on 9x/ME.
        * mkpasswd.c (load_netapi): New function to load netapi32.dll functions
        dynamically so that mkpasswd works on 9x/ME as well.
        Use corresponding function pointers throughout.
        (usage): Change to `int'. Change text to be conformant to mkgroup.
        (main): Use `getlongopt' to process options.
        Special handling to create a passwd entry on 9x/ME.
        Change conditional to create an entry for the local administrators
        group when appropriate.
@
text
@d1 10
@


1.44
log
@        * kill.cc (main): Return 1 in case of errors.
@
text
@d1 17
@


1.43
log
@* Makefile.in: Accomodate newer gcc's which require linking of c++ programs
with g++.  Fixup output for some compilations.
* cygcheck.cc: Respond to compiler warnings.
* dumper.cc (main): Ditto.
* parse_pe.cc (exclusion::sort_and_check): Ditto.
* setfacl.cc (getaclentry): Ditto.
@
text
@d1 4
@


1.42
log
@* strace.cc (main): Add a '-b' option.
@
text
@d1 9
@


1.41
log
@* ssp.c: new
* ssp.txt: new
* Makefile.in: build ssp.exe
@
text
@d1 4
@


1.40
log
@* ps.cc (main): Add some extra space to Windows pid output for Windows 95.
@
text
@d1 6
@


1.39
log
@* ps.cc (main): Add some extra space to pid output for Windows 95.
@
text
@d1 5
@


1.38
log
@        * cygcheck.cc (main): Fix argument counting.
@
text
@d1 4
@


1.37
log
@* ps.cc (main): Accomodate new PID_ constant.
@
text
@d1 5
@


1.36
log
@* strace.cc (proc_child): Handle exceptions correctly.
@
text
@d1 4
@


1.35
log
@* ps.cc (main): Change order of reporting slightly so that windows pids are
more obvious.
* strace.cc (add_child): Just add child's pid directly.
(remove_child): No need to close the child process pid since ContinueDebugEvent
does that automatically.
(proc_child): Ditto for child thread.
@
text
@d1 4
@


1.34
log
@        * cygcheck.cc (keyeprint): New function.
        (check_keys): New function. Perform checking keycodes.
        (main): Add option `-k' for invoking check_keys.
        Change option processing to use long options and getopt_long.
        * cygkeycheck.cc: Removed. Functionality moved to `cygcheck.cc'.
        * Makefile.in: Remove cygkeycheck from the dependencies.
@
text
@d1 9
@


1.33
log
@        * cygkeycheck.cc: New file. Utility to retrieve keycodes.
        * Makefile.in: Add cygkeycheck to the dependencies.
@
text
@d1 9
@


1.32
log
@* cygpath.cc: Add new options: -s and -i.
* utils.sgml: Document the new options.
@
text
@d1 5
@


1.31
log
@* kill.cc (main): Change behavior of -f so that it will force the killing of a
cygwin process after waiting 2 tenths of a second for it to terminate.
(forcekill): Add an extra argument determining whether to wait for the process
to exit.
@
text
@d1 5
d35 1
a35 1
        * ps.cc (main): Always print a cygwin process using cygwin paths.
@


1.30
log
@* Makefile.in: Refine dumper.exe message.
@
text
@d1 8
@


1.29
log
@* kill.c (main): Avoid skipping next argument when a signal number is
specified.
* Makefile.in: Always clean dumper.exe.
@
text
@d1 4
@


1.28
log
@* Makefile.in: Only build dumper.exe when all of its library and include
dependencies are available.
@
text
@d1 6
@


1.27
log
@* Makefile.in: Make failure to build dumper.exe a non-error.
@
text
@d1 5
@


1.26
log
@* ps.cc (main): Always print a cygwin process using cygwin paths.
@
text
@d1 4
@


1.25
log
@Change attribution.
@
text
@d1 4
@


1.24
log
@* Makefile.in: Add dumper.exe target and associated mechanisms for building it.
* dumper.cc: New file.
* dumper.h: New file.
* module_info.cc: New file.
* parse_pe.cc: New file.
@
text
@d1 1
a1 1
Thu Aug 24 15:00:31 2000  Christopher Faylor <cgf@@cygnus.com>
@


1.23
log
@* passwd.c (main): Initialize oldpwd before beeing used.
@
text
@d1 8
@


1.22
log
@* kill.cc (main): Add '-f' option to force termination of a process.
(forcekill): New function.
* ps.cc (main): Add '-W' option to list Windows pids as well as Cygwin pids.
(dummyprocessmodules): New function.
(GetModuleFileNameEx95): New function.
(init_win): New function.
(to_time_t): New function.
@
text
@d1 4
@


1.21
log
@Fix typo.
@
text
@d1 11
d45 5
a49 5
        mount.cc (error): New function to report an error and exit.
        umount.cc (error): Ditto.
        (remove_all_automounts): Check return status of cygwin_umount.
        (remove_all_user_mounts): Ditto.
        (remove_all_system_mounts): Ditto.
@


1.21.2.1
log
@* passwd.c (main): Initialize oldpwd before beeing used.
@
text
@a0 4
Mon Jul 31 15:12:00 2000  Corinna Vinschen <corinna@@vinschen.de>

	* passwd.c (main): Initialize oldpwd before beeing used.

@


1.20
log
@* utils/mount.cc (main): Add --show-cygdrive-prefixes option.
(show_cygdrive_prefixes): New function.
* utils/umount.cc (main): Add --remove-cygdrive-prefix option.
(error): Change signature from 'char *' to 'const char *'.
(remove_cygdrive_prefix): New function.
@
text
@d5 1
a5 1
	* utils/umount.cc (main): Add --remove_cygdrive_prefix option.
@


1.19
log
@        * mount.cc (mount_already_exists): Slightly rearrange.
        Change message texts.
@
text
@d1 8
@


1.18
log
@        * mount.cc (mount_already_exists): Additional warning message
        if mount point exists with another mount type.
@
text
@d1 5
@


1.17
log
@* Makefile.in: Find getopt.c in cygwin/lib subdirectory.
@
text
@d1 5
@


1.16
log
@* cygcheck.cc (cygwin_info): New function.  Scans DLL for Cygwin version info.
(dll_info): Add path parameter for checking "cygwin1.dll".
(track_down): Accomodate additional parameter for dll_info.
(ls): Ditto.
(dump_sys_info): Always print cygwin1.dll last.
@
text
@d1 4
@


1.15
log
@        mount.cc (error): New function to report an error and exit.
        umount.cc (error): Ditto.
        (remove_all_automounts): Check return status of cygwin_umount.
        (remove_all_user_mounts): Ditto.
        (remove_all_system_mounts): Ditto.
@
text
@d1 9
@


1.14
log
@* mount.cc: add stdlib.h for exit
* umount.cc: ditto
* strace.cc: add #define for alloca
@
text
@d1 8
@


1.13
log
@        * regtool.cc (find_key): Add parameter `access'.
        Call `RegOpenKeyEx' with that desired access.
        (cmd_add, cmd_remove, cmd_set, cmd_unset): Call
        `find_key' with KEY_ALL_ACCESS access.
        (cmd_list, cmd_check, cmd_get): Call `find_key'
        with KEY_READ access.
@
text
@d1 6
@


1.12
log
@* cygpath.cc: add --windir/--sysdir options
* utils.sgml: and document them
@
text
@d1 9
@


1.11
log
@* Makefile.in: Eliminate WINSUP_DEPS.
* cygpath.cc: Reorganize includes to accomodate sys/cygwin.h changes.
* mkgroup.c: Ditto.
* mkpasswd.c: Ditto.
* mount.cc: Ditto.  Eliminate use of cygwin source specific includes.
* ps.cc: Ditto.
* cygwin.cc: Eliminate obsolete file.
@
text
@d1 5
@


1.10
log
@* mount.cc (main): Add "-X" option to specify a "Cygwin executable".
@
text
@d1 10
@


1.9
log
@        * mkpasswd.c (main): Use GetDCName instead of GetAnyDCName.
        Don't create extra passwd entry for administrators group
        if local_groups is set.
        (usage): Change usage text slightly.
        (enum_users): Loop while ERROR_MORE_DATA is returned.
        (enum_local_groups): Ditto.
        * mkgroup.c (enum_local_groups): Ditto.
        (enum_groups) Ditto.
        (usage): Change usage text slightly.
@
text
@d1 4
d7 9
a15 9
        * mkpasswd.c (main): Use GetDCName instead of GetAnyDCName.
        Don't create extra passwd entry for administrators group
        if local_groups is set.
        (usage): Change usage text slightly.
        (enum_users): Loop while ERROR_MORE_DATA is returned.
        (enum_local_groups): Ditto.
        * mkgroup.c (enum_local_groups): Ditto.
        (enum_groups) Ditto.
        (usage): Change usage text slightly.
@


1.8
log
@* cygpath.cc (main): Add -a -o and -c options.
(doit): Ditto.
@
text
@d1 12
@


1.7
log
@* cygpath.cc (main): Add -f option for processing a group of paths from a file.
(doit): New function.
@
text
@d1 5
@


1.6
log
@Patch suggested by Mumit Khan <khan@@xraylith.wisc.edu>:
* strace.cc (_impure_ptr): New global variable to make strace build under
Cygwin gcc.
@
text
@d1 6
@


1.5
log
@* Makefile.in: Make CXXFLAGS consistent with cygwin.
@
text
@d1 6
@


1.4
log
@* Makefile.in: Use MINGW_CXXFLAGS when compiling strace.
@
text
@d1 4
@


1.3
log
@* strace.cc: Throughout, track information like start_time, etc.  on a
per-process basis.
@
text
@d1 4
@


1.2
log
@* strace.cc (handle_output_debug_string): Parse strace output to allow various
types of time output.
@
text
@d1 5
@


1.1
log
@Initial revision
@
text
@d1 5
@


1.1.1.1
log
@import winsup-2000-02-17 snapshot
@
text
@@
