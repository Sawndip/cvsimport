head	1.72;
access;
symbols
	cygwin-64bit-postmerge:1.70
	cygwin-64bit-premerge-branch:1.70.0.2
	cygwin-64bit-premerge:1.70
	cygwin-1_7_18-release:1.70
	cygwin-1_7_17-release:1.66
	cygwin-64bit-branch:1.66.0.2
	cygwin-1_7_16-release:1.66
	cygwin-1_7_15-release:1.65
	cygwin-1_7_14_2-release:1.65
	cygwin-1_7_14-release:1.65
	cygwin-1_7_12-release:1.65
	cygwin-1_7_11-release:1.64
	cygwin-1_7_10-release:1.64
	cygwin-1_7_9-release:1.60
	cygwin-1_7_8-release:1.60
	cygwin-1_7_7-release:1.59
	cygwin-1_7_5-release:1.53
	cygwin-1_7_4-release:1.53
	cygwin-1_7_3-release:1.53
	cygwin-1_7_2-release:1.52
	cygwin-1_7_1-release:1.48
	cv-branch-2:1.43.0.2
	cr-0x5f1:1.21.0.2
	cv-branch:1.20.0.4
	cr-0x3b58:1.20.0.2
	cr-0x9e:1.10.0.4
	cr-0x9d:1.10.0.2
	corinna-01:1.9
	cr-0x9c:1.9.0.4
	cr-0x9b:1.9.0.2
	cr-0x99:1.9
	Z-emcb-cygwin_daemon:1.8.0.2
	w32api-2_2:1.7
	mingw-runtime-2_4:1.7
	cygnus_cvs_20020108_pre:1.7
	Z-cygwin_daemon_merge-new_HEAD:1.4
	Z-cygwin_daemon_merge_HEAD:1.4
	cygwin_daemon:1.4.0.8;
locks; strict;
comment	@# @;
expand	@o@;


1.72
date	2013.05.01.23.30.23;	author tangent;	state dead;
branches;
next	1.71;

1.71
date	2013.04.23.15.59.21;	author corinna;	state Exp;
branches;
next	1.70;

1.70
date	2013.02.13.18.07.24;	author cgf;	state Exp;
branches;
next	1.69;

1.69
date	2013.02.13.17.57.19;	author cgf;	state Exp;
branches;
next	1.68;

1.68
date	2012.12.20.16.47.26;	author corinna;	state Exp;
branches;
next	1.67;

1.67
date	2012.12.14.11.10.29;	author corinna;	state Exp;
branches;
next	1.66;

1.66
date	2012.07.20.09.23.44;	author corinna;	state Exp;
branches;
next	1.65;

1.65
date	2012.03.29.18.23.32;	author corinna;	state Exp;
branches;
next	1.64;

1.64
date	2012.02.04.11.40.44;	author corinna;	state Exp;
branches;
next	1.63;

1.63
date	2012.01.24.09.48.59;	author corinna;	state Exp;
branches;
next	1.62;

1.62
date	2011.11.18.11.39.31;	author corinna;	state Exp;
branches;
next	1.61;

1.61
date	2011.05.02.11.56.36;	author corinna;	state Exp;
branches;
next	1.60;

1.60
date	2010.09.27.16.46.34;	author corinna;	state Exp;
branches;
next	1.59;

1.59
date	2010.08.27.18.56.28;	author corinna;	state Exp;
branches;
next	1.58;

1.58
date	2010.08.19.10.35.25;	author corinna;	state Exp;
branches;
next	1.57;

1.57
date	2010.08.18.15.28.15;	author corinna;	state Exp;
branches;
next	1.56;

1.56
date	2010.08.13.11.52.13;	author corinna;	state Exp;
branches;
next	1.55;

1.55
date	2010.08.11.11.12.10;	author corinna;	state Exp;
branches;
next	1.54;

1.54
date	2010.04.29.10.58.17;	author corinna;	state Exp;
branches;
next	1.53;

1.53
date	2010.03.25.12.52.32;	author cgf;	state Exp;
branches;
next	1.52;

1.52
date	2010.02.15.13.35.53;	author corinna;	state Exp;
branches;
next	1.51;

1.51
date	2010.01.25.10.50.21;	author corinna;	state Exp;
branches;
next	1.50;

1.50
date	2010.01.11.18.00.14;	author corinna;	state Exp;
branches;
next	1.49;

1.49
date	2009.12.23.10.43.45;	author corinna;	state Exp;
branches;
next	1.48;

1.48
date	2009.11.16.12.30.00;	author corinna;	state Exp;
branches;
next	1.47;

1.47
date	2009.10.28.10.11.22;	author corinna;	state Exp;
branches;
next	1.46;

1.46
date	2009.10.09.11.19.18;	author corinna;	state Exp;
branches;
next	1.45;

1.45
date	2009.09.30.09.45.01;	author corinna;	state Exp;
branches;
next	1.44;

1.44
date	2009.07.08.23.23.02;	author cgf;	state Exp;
branches;
next	1.43;

1.43
date	2009.05.27.02.30.42;	author cgf;	state Exp;
branches;
next	1.42;

1.42
date	2009.05.14.11.03.43;	author corinna;	state Exp;
branches;
next	1.41;

1.41
date	2009.05.14.10.03.25;	author corinna;	state Exp;
branches;
next	1.40;

1.40
date	2009.05.14.03.25.45;	author cgf;	state Exp;
branches;
next	1.39;

1.39
date	2009.05.13.15.11.39;	author corinna;	state Exp;
branches;
next	1.38;

1.38
date	2009.04.03.11.51.31;	author corinna;	state Exp;
branches;
next	1.37;

1.37
date	2009.03.26.12.25.11;	author corinna;	state Exp;
branches;
next	1.36;

1.36
date	2009.03.25.14.33.05;	author corinna;	state Exp;
branches;
next	1.35;

1.35
date	2009.03.25.10.37.06;	author corinna;	state Exp;
branches;
next	1.34;

1.34
date	2009.03.09.10.23.44;	author corinna;	state Exp;
branches;
next	1.33;

1.33
date	2009.03.03.09.11.45;	author corinna;	state Exp;
branches;
next	1.32;

1.32
date	2009.02.13.10.13.28;	author corinna;	state Exp;
branches;
next	1.31;

1.31
date	2009.02.13.09.04.51;	author corinna;	state Exp;
branches;
next	1.30;

1.30
date	2009.02.03.09.03.18;	author corinna;	state Exp;
branches;
next	1.29;

1.29
date	2009.01.24.15.31.18;	author corinna;	state Exp;
branches;
next	1.28;

1.28
date	2009.01.24.12.26.10;	author corinna;	state Exp;
branches;
next	1.27;

1.27
date	2008.12.15.09.37.50;	author corinna;	state Exp;
branches;
next	1.26;

1.26
date	2008.12.13.21.14.44;	author cgf;	state Exp;
branches;
next	1.25;

1.25
date	2008.12.12.15.14.06;	author corinna;	state Exp;
branches;
next	1.24;

1.24
date	2008.08.13.16.34.49;	author corinna;	state Exp;
branches;
next	1.23;

1.23
date	2008.07.17.11.49.45;	author corinna;	state Exp;
branches;
next	1.22;

1.22
date	2007.12.16.21.19.29;	author cgf;	state Exp;
branches;
next	1.21;

1.21
date	2006.07.18.19.41.02;	author corinna;	state Exp;
branches;
next	1.20;

1.20
date	2005.06.05.02.16.07;	author joshuadfranklin;	state Exp;
branches;
next	1.19;

1.19
date	2005.04.20.12.26.45;	author corinna;	state Exp;
branches;
next	1.18;

1.18
date	2005.03.06.02.46.54;	author cgf;	state Exp;
branches;
next	1.17;

1.17
date	2004.12.27.19.03.56;	author joshuadfranklin;	state Exp;
branches;
next	1.16;

1.16
date	2004.12.24.21.58.38;	author joshuadfranklin;	state Exp;
branches;
next	1.15;

1.15
date	2004.05.30.06.47.09;	author joshuadfranklin;	state Exp;
branches;
next	1.14;

1.14
date	2004.03.29.08.07.39;	author corinna;	state Exp;
branches;
next	1.13;

1.13
date	2004.03.29.05.56.46;	author joshuadfranklin;	state Exp;
branches;
next	1.12;

1.12
date	2004.03.27.06.48.11;	author joshuadfranklin;	state Exp;
branches;
next	1.11;

1.11
date	2004.01.24.08.08.13;	author joshuadfranklin;	state Exp;
branches;
next	1.10;

1.10
date	2004.01.11.08.32.09;	author joshuadfranklin;	state Exp;
branches;
next	1.9;

1.9
date	2003.09.01.12.56.01;	author corinna;	state Exp;
branches;
next	1.8;

1.8
date	2003.07.16.02.12.00;	author cgf;	state Exp;
branches;
next	1.7;

1.7
date	2001.12.04.04.20.31;	author cgf;	state Exp;
branches;
next	1.6;

1.6
date	2001.10.16.16.03.22;	author corinna;	state Exp;
branches;
next	1.5;

1.5
date	2001.10.16.15.16.02;	author corinna;	state Exp;
branches;
next	1.4;

1.4
date	2000.09.29.22.23.37;	author corinna;	state Exp;
branches;
next	1.3;

1.3
date	2000.09.29.21.53.52;	author corinna;	state Exp;
branches;
next	1.2;

1.2
date	2000.04.19.00.55.19;	author dj;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.17.19.38.31;	author cgf;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.02.17.19.38.31;	author cgf;	state Exp;
branches;
next	;


desc
@@


1.72
log
@Modernized user guide, API reference, and FAQ generation.  Overall
effect is to move away from DocBook SGML and DJ Delorie's doctool and
toward pure DocBook XSL.  (There remains just one use of doctool, and
we have plans for replacing it, too.)  See ChangeLog for details.
@
text
@<sect1 id="using-pathnames"><title>Mapping path names</title>

<sect2 id="pathnames-intro"><title>Introduction</title>

<para>Cygwin supports both POSIX- and Win32-style paths.  Directory
delimiters may be either forward slashes or backslashes.  Paths using
backslashes or starting with a drive letter are always handled as
Win32 paths.  POSIX paths must only use forward slashes as delimiter,
otherwise they are treated as Win32 paths and file access might fail
in surprising ways.</para>

<note><para>The usage of Win32 paths, though possible, is deprecated,
since it circumvents important internal path handling mechanisms. 
See <xref linkend="pathnames-win32"></xref> and
<xref linkend="pathnames-win32-api"></xref> for more information.
</para></note>

<para>POSIX operating systems (such as Linux) do not have the concept
of drive letters.  Instead, all absolute paths begin with a
slash (instead of a drive letter such as "c:") and all file systems
appear as subdirectories (for example, you might buy a new disk and
make it be the <filename>/disk2</filename> directory).</para>

<para>Because many programs written to run on UNIX systems assume
the existence of a single unified POSIX file system structure, Cygwin
maintains a special internal POSIX view of the Win32 file system
that allows these programs to successfully run under Windows.  Cygwin
uses this mapping to translate from POSIX to Win32 paths as
necessary.</para>

</sect2>

<sect2 id="mount-table"><title>The Cygwin Mount Table</title>

<para>The <filename>/etc/fstab</filename> file is used to map Win32
drives and network shares into Cygwin's internal POSIX directory tree.
This is a similar concept to the typical UNIX fstab file.  The mount
points stored in <filename>/etc/fstab</filename> are globally set for
all users.  Sometimes there's a requirement to have user specific
mount points.  The Cygwin DLL supports user specific fstab files.
These are stored in the directory <filename>/etc/fstab.d</filename>
and the name of the file is the Cygwin username of the user, as it's
stored in the <filename>/etc/passwd</filename> file.  The structure of the
user specific file is identical to the system-wide
<filename>fstab</filename> file.</para>

<para>The file fstab contains descriptive information about the various file
systems.  fstab is only read by programs, and not written; it is the
duty of the system administrator to properly create and maintain this
file.  Each filesystem is described on a separate line; fields on each
line are separated by tabs or spaces.  Lines starting with '#' are
comments.</para>

<para>The first field describes the block special device or
remote filesystem to be mounted.  On Cygwin, this is the native Windows
path which the mount point links in.  As path separator you MUST use a
slash.  Usage of a backslash might lead to unexpected results.  UNC
paths (using slashes, not backslashes) are allowed.  If the path
contains spaces these can be escaped as <literal>'\040'</literal>.</para>

<para>The second field describes the mount point for the filesystem. 
If the name of the mount point contains spaces these can be
escaped as '\040'.</para>

<para>The third field describes the type of the filesystem.  Cygwin supports
any string here, since the file system type is usually not evaluated.  So it
doesn't matter if you write <literal>FAT</literal> into this field even if
the filesystem is NTFS.  Cygwin figures out the filesystem type and its
capabilities by itself.</para>

<para>The only exception is the file system type cygdrive.  This type is
used to set the cygdrive prefix.  For a description of the cygdrive prefix
see <xref linkend="cygdrive"></xref></para>

<para>The fourth field describes the mount options associated
with the filesystem.  It is formatted as a comma separated list of
options.  It contains at least the type of mount (binary or text) plus
any additional options appropriate to the filesystem type.  Recognized
options are binary, text, nouser, user, exec, notexec, cygexec, nosuid,
posix=[0|1].  The meaning of the options is as follows.</para>

<screen>
  acl       - Cygwin uses the filesystem's access control lists (ACLs) to
              implement real POSIX permissions (default).  This flag only
	      affects filesystems supporting ACLs (NTFS, for instance) and
	      is ignored otherwise.
  auto      - Ignored.
  binary    - Files default to binary mode (default).
  bind      - Allows to remount part of the file hierarchy somewhere else.
              In contrast to other entries, the first field in the fstab
	      line specifies an absolute POSIX path.  This path is remounted
	      to the POSIX path specified as the second path.  The conversion
	      to a Win32 path is done on the fly.  Only the root path and
	      paths preceding the bind entry in the fstab file are used to
	      convert the POSIX path in the first field to an absolute Win32
	      path.  Note that symlinks are ignored while performing this path
	      conversion.
  cygexec   - Treat all files below mount point as cygwin executables.
  dos       - Always convert leading spaces and trailing dots and spaces to
	      characters in the UNICODE private use area.  This allows to use
	      broken filesystems which only allow DOS filenames, even if they
	      are not recognized as such by Cygwin.
  exec      - Treat all files below mount point as executable.
  ihash     - Always fake inode numbers rather than using the ones returned
	      by the filesystem.  This allows to use broken filesystems which
	      don't return unambiguous inode numbers, even if they are not
	      recognized as such by Cygwin.
  noacl     - Cygwin ignores filesystem ACLs and only fakes a subset of
	      permission bits based on the DOS readonly attribute.  This
	      behaviour is the default on FAT and FAT32.  The flag is
	      ignored on NFS filesystems.
  nosuid    - No suid files are allowed (currently unimplemented).
  notexec   - Treat all files below mount point as not executable.
  nouser    - Mount is a system-wide mount.
  override  - Force the override of an immutable mount point (currently "/").
  posix=0   - Switch off case sensitivity for paths under this mount point
	      (default for the cygdrive prefix).
  posix=1   - Switch on case sensitivity for paths under this mount point
	      (default for all other mount points).
  sparse    - Switch on support for sparse files.  This option only makes
              sense on NTFS and then only if you really need sparse files.
	      Cygwin does not try to create sparse files by default for
	      performance reasons.
  text      - Files default to CRLF text mode line endings.
  user      - Mount is a user mount.
</screen>

<para>While normally the execute permission bits are used to evaluate
executability, this is not possible on filesystems which don't support
permissions at all (like FAT/FAT32), or if ACLs are ignored on filesystems
supporting them (see the aforementioned <literal>acl</literal> mount option).
In these cases, the following heuristic is used to evaluate if a file is
executable: Files ending in certain extensions (.exe, .com, .bat, .btm,
.cmd) are assumed to be executable.  Files whose first two characters begin
with '#!' are also considered to be executable.
The <literal>exec</literal> option is used to instruct Cygwin that the
mounted file is "executable".  If the <literal>exec</literal> option is used
with a directory then all files in the directory are executable.
This option allows other files to be marked as executable and avoids the
overhead of opening each file to check for a '#!'.  The
<literal>cygexec</literal> option is very similar to <literal>exec</literal>,
but also prevents Cygwin from setting up commands and environment variables
for a normal Windows program, adding another small performance gain.  The
opposite of these options is the <literal>notexec</literal> option, which
means that no files should be marked as executable under that mount point.</para>
<para>A correct root directory is quite essential to the operation of
Cygwin.  A default root directory is evaluated at startup so a
<filename>fstab</filename> entry for the root directory is not necessary.
If it's wrong, nothing will work as expected.  Therefore, the root directory
evaluated by Cygwin itself is treated as an immutable mount point and can't
be overridden in /etc/fstab... unless you think you really know what you're
doing.  In this case, use the <literal>override</literal> flag in the options
field in the <filename>/etc/fstab</filename> file.  Since this is a dangerous
thing to do, do so at your own risk.</para>

<para><filename>/usr/bin</filename> and <filename>/usr/lib</filename> are
by default also automatic mount points generated by the Cygwin DLL similar
to the way the root directory is evaluated.  <filename>/usr/bin</filename>
points to the directory the Cygwin DLL is installed in,
<filename>/usr/lib</filename> is supposed to point to the
<filename>/lib</filename> directory.  This choice is safe and usually
shouldn't be changed.  An fstab entry for them is not required.</para>

<para><literal>nouser</literal> mount points are not overridable by a later
call to <command>mount</command>.
Mount points given in <filename>/etc/fstab</filename> are by default
<literal>nouser</literal> mount points, unless you specify the option
<literal>user</literal>.  This allows the administrator to set certain
paths so that they are not overridable by users.  In contrast, all mount
points in the user specific fstab file are <literal>user</literal> mount
points.</para>

<para>The fifth and sixth field are ignored.  They are
so far only specified to keep a Linux-like fstab file layout.</para>

<para>Note that you don't have to specify an fstab entry for the root dir,
unless you want to have the root dir pointing to somewhere entirely
different (hopefully you know what you're doing), or if you want to
mount the root dir with special options (for instance, as text mount).</para>

<para>Example entries:</para>

<itemizedlist spacing="compact">
<listitem>
  <para>Just a normal mount point:</para>
  <screen>  c:/foo /bar fat32 binary 0 0</screen>
</listitem>
<listitem>
  <para>A mount point for a textmode mount with case sensitivity switched off:</para>
  <screen>  C:/foo /bar/baz ntfs text,posix=0 0 0</screen>
</listitem>
<listitem>
  <para>A mount point for a Windows directory with spaces in it:</para>
  <screen>  C:/Documents\040and\040Settings /docs ext3 binary 0 0</screen>
</listitem>
<listitem>
  <para>A mount point for a remote directory, don't store POSIX permissions in ACLs:</para>
  <screen>  //server/share/subdir /srv/subdir smbfs binary,noacl 0 0</screen>
</listitem>
<listitem>
  <para>This is just a comment:</para>
  <screen>  # This is just a comment</screen>
</listitem>
<listitem>
  <para>Set the cygdrive prefix to /mnt:</para>
  <screen>  none /mnt cygdrive binary 0 0</screen>
</listitem>
<listitem>
  <para>Remount /var to /usr/var:</para>
  <screen>  /var /usr/var none bind</screen>
  <para>Assuming <filename>/var</filename> points to
  <filename>C:/cygwin/var</filename>, <filename>/usr/var</filename> now
  also points to <filename>C:/cygwin/var</filename>.  This is equivalent
  to the Linux <literal>bind</literal> option available since
  Linux 2.4.0.</para>
</listitem>
</itemizedlist>

<para>Whenever Cygwin generates a Win32 path from a POSIX one, it uses
the longest matching prefix in the mount table.  Thus, if
<filename>C:</filename> is mounted as <filename>/c</filename> and also
as <filename>/</filename>, then Cygwin would translate
<filename>C:/foo/bar</filename> to <filename>/c/foo/bar</filename>.
This translation is normally only used when trying to derive the
POSIX equivalent current directory.  Otherwise, the handling of MS-DOS
filenames bypasses the mount table.
</para>

<para>If you want to see the current set of mount points valid in your
session, you can invoke the Cygwin tool <command>mount</command> without
arguments:</para>

<example id="pathnames-mount-ex">
<title>Displaying the current set of mount points</title>
<screen>
  <prompt>bash$</prompt> <userinput>mount</userinput>
  f:/cygwin/bin on /usr/bin type ntfs (binary,auto)
  f:/cygwin/lib on /usr/lib type ntfs (binary,auto)
  f:/cygwin on / type ntfs (binary,auto)
  e:/src on /usr/src type vfat (binary)
  c: on /cygdrive/c type ntfs (binary,posix=0,user,noumount,auto)
  e: on /cygdrive/e type vfat (binary,posix=0,user,noumount,auto)
</screen>
</example>

<para>You can also use the <command>mount</command> command to add
new mount points, and the <command>umount</command> to delete
them.  However, since they are only stored in memory, these mount
points will disappear as soon as your last Cygwin process ends.
See <xref linkend="mount"></xref> and <xref linkend="umount"></xref> for more
information.</para>

<note><para>
When you upgrade an existing older Cygwin installation to Cygwin 1.7,
your old system mount points (stored in the HKEY_LOCAL_MACHINE branch
of your registry) are read by a script and the <filename>/etc/fstab</filename>
file is generated from these entries.  Note that entries for
<filename>/</filename>, <filename>/usr/bin</filename>, and
<filename>/usr/lib</filename> are <emphasis role='bold'>never</emphasis>
generated.
</para>

<para>
The old user mount points in your HKEY_CURRENT_USER branch of the registry
are not used to generate <filename>/etc/fstab</filename>.  If you want
to create a user specific <filename>/etc/fstab.d/${USER}</filename> file
from your old entries, there's a script available which does exactly
that for you, <filename>/bin/copy-user-registry-fstab</filename>.  Just
start the script and it will create your user specific fstab file.  Stop
all your Cygwin processes and restart them, and you can simply use your
old user mount points as before.
</para></note>

</sect2>

<sect2 id="unc-paths"><title>UNC paths</title>

<para>Apart from the unified POSIX tree starting at the <filename>/</filename>
directory, UNC pathnames starting with two slashes and a server name
(<filename>//machine/share/...</filename>) are supported as well.
They are handled as POSIX paths if only containing forward slashes.  There's
also a virtual directory <filename>//</filename> which allows to enumerate
the fileservers known to the local machine with <command>ls</command>.
Same goes for the UNC paths of the type <filename>//machine</filename>,
which allow to enumerate the shares provided by the server
<literal>machine</literal>. For often used UNC paths it makes sense to
add them to the mount table (see <xref linkend="mount-table"></xref> so
they are included in the unified POSIX path tree.</para>

</sect2>

<sect2 id="cygdrive"><title>The cygdrive path prefix</title>

<para>As already outlined in <xref linkend="ov-hi-files"></xref>, you can
access arbitary drives on your system by using the cygdrive path prefix.
The default value for this prefix is <filename>/cygdrive</filename>, and
a path to any drive can be constructed by using the cygdrive prefix and
appending the drive letter as subdirectory, like this:</para>

<screen>
  bash$ ls -l /cygdrive/f/somedir
</screen>

<para>This lists the content of the directory F:\somedir.</para>

<para>The cygdrive prefix is a virtual directory under which all drives
on a system are subsumed.  The mount options of the cygdrive prefix is
used for all file access through the cygdrive prefixed drives.  For instance,
assuming the cygdrive mount options are <literal>binary,posix=0</literal>,
then any file <filename>/cygdrive/x/file</filename> will be opened in
binary mode by default (mount option <literal>binary</literal>), and the case
of the filename doesn't matter (mount option <literal>posix=0</literal>).
</para>

<para>The cygdrive prefix flags are also used for all UNC paths starting with
two slashes, unless they are accessed through a mount point.  For instance,
consider these <filename>/etc/fstab</filename> entries:</para>

<screen>
  //server/share /mysrv    ntfs     posix=1,acl   0 0
  none           /cygdrive cygdrive posix=0,noacl 0 0
</screen>

<para>Assume there's a file <filename>\\server\share\foo</filename> on the
share.  When accessing it as <filename>/mysrv/foo</filename>, then the flags
<literal>posix=1,acl</literal> of the /mysrv mount point are used.  When
accessing it as <filename>//server/share/foo</filename>, then the flags
for the cygdrive prefix, <literal>posix=0,noacl</literal> are used.</para>

<note><para>This only applies to UNC paths using forward slashes.  When
using backslashes the flags for native paths are used.  See
<xref linkend="pathnames-win32"></xref>.</para></note>

<para>The cygdrive prefix may be changed in the fstab file as outlined above.
Please note that you must not use the cygdrive prefix for any other mount
point.  For instance this:</para>

<screen>
  none /cygdrive cygdrive binary 0 0
  D:   /cygdrive/d somefs text 0 0
</screen>

<para>will not make file access using the /mnt/d path prefix suddenly using
textmode.  If you want to mount any drive explicitly in another mode than
the cygdrive prefix, use a distinct path prefix:</para>

<screen>
  none /cygdrive cygdrive binary 0 0
  D:   /mnt/d somefs text 0 0
</screen>

</sect2>

<sect2 id="pathnames-win32"><title>Using native Win32 paths</title>

<para>Using native Win32 paths in Cygwin, while possible, is generally
inadvisable.  Those paths circumvent all internal integrity checking and
bypass the information given in the Cygwin mount table.</para>

<para>The following paths are treated as native Win32 paths in Cygwin:</para>

<itemizedlist spacing="compact">
  <listitem>
    <para>All paths starting with a drive specifier</para>
<screen>
  C:\foo
  C:/foo
</screen>
  </listitem>
  <listitem>
    <para>All paths containing at least one backslash as path component</para>
<screen>
  C:/foo/bar<emphasis role='bold'>\</emphasis>baz/...
</screen>
  </listitem>
  <listitem>
    <para>UNC paths using backslashes</para>
<screen>
  \\server\share\...
</screen>
  </listitem>
</itemizedlist>

<para>When accessing files using native Win32 paths as above, Cygwin uses a
default setting for the mount flags.  All paths using DOS notation will be
treated as case insensitive, and permissions are just faked as if the
underlying drive is a FAT drive.  This also applies to NTFS and other
filesystems which usually are capable of case sensitivity and storing
permissions.</para>

</sect2>

<sect2 id="pathnames-win32-api"><title>Using the Win32 file API in Cygwin applications</title>

<para>Special care must be taken if your application uses Win32 file API
functions like <function>CreateFile</function> to access files using
relative pathnames, or if your application uses functions like
<function>CreateProcess</function> or <function>ShellExecute</function>
to start other applications.</para>

<para>When a Cygwin application is started, the Windows idea of the current
working directory (CWD) is not necessarily the same as the Cygwin CWD.
There are a couple of restrictions in the Win32 API, which disallow certain
directories as Win32 CWD:</para>

<itemizedlist spacing="compact">
  <listitem>
    <para>The Windows subsystem only supports CWD paths of up to 258 chars.
    This restriction doesn't apply for Cygwin processes, at least not as
    long as they use the POSIX API (chdir, getcwd).  This means, if a Cygwin
    process has a CWD using an absolute path longer than 258 characters, the
    Cygwin CWD and the Windows CWD differ.</para>
  </listitem>

  <listitem>
    <para>The Win32 API call to set the current directory,
    <function>SetCurrentDirectory</function>, fails for directories for which
    the user has no permissions, even if the user is an administrator.  This
    restriction doesn't apply for Cygwin processes, if they are running under
    an administrator account.</para>
  </listitem>

  <listitem>
    <para><function>SetCurrentDirectory</function> does not support
    case-sensitive filenames.
    </para>
  </listitem>

  <listitem>
    <para>Last, but not least, <function>SetCurrentDirectory</function> can't
    work on virtual Cygwin paths like /proc or /cygdrive.  These paths only
    exists in the Cygwin realm so they have no meaning to a native Win32
    process.</para>
  </listitem>
</itemizedlist>

<para>As long as the Cygwin CWD is usable as Windows CWD, the Cygwin and
Windows CWDs are in sync within a process.  However, if the Cygwin process
changes its working directory into one of the directories which are
unusable as Windows CWD, we're in trouble.  If the process uses the
Win32 API to access a file using a relative pathname, the resulting
absolute path would not match the expectations of the process.  In the
worst case, the wrong files are deleted.</para>

<para>To workaround this problem, Cygwin sets the Windows CWD to a special
directory in this case.  This special directory points to a virtual
filesystem within the native NT namespace (<filename>\??\PIPE\</filename>).
Since it's not a real filesystem, the deliberate effect is that a call to,
for instance, <function>CreateFile ("foo", ...);</function> will fail,
as long as the processes CWD doesn't work as Windows CWD.</para>

<para>So, in general, don't use the Win32 file API in Cygwin applications.
If you <emphasis role='bold'>really</emphasis> need to access files using
the Win32 API, or if you <emphasis role='bold'>really</emphasis> have to use
<function>CreateProcess</function> to start applications, rather than
the POSIX <function>exec(3)</function> family of functions, you have to
make sure that the Cygwin CWD is set to some directory which is valid as
Win32 CWD.</para>

</sect2>

<sect2 id="pathnames-additional"><title>Additional Path-related Information</title>

<para>The <command>cygpath</command> program provides the ability to
translate between Win32 and POSIX pathnames in shell scripts. See
<xref linkend="cygpath"></xref> for the details.</para>

<para>The <envar>HOME</envar>, <envar>PATH</envar>, and
<envar>LD_LIBRARY_PATH</envar> environment variables are automatically
converted from Win32 format to POSIX format (e.g.  from
<filename>c:/cygwin\bin</filename> to <filename>/bin</filename>, if
there was a mount from that Win32 path to that POSIX path) when a Cygwin
process first starts.</para>

<para>Symbolic links can also be used to map Win32 pathnames to POSIX.
For example, the command
<command>ln -s //pollux/home/joe/data /data</command> would have about
the same effect as creating a mount point from
<filename>//pollux/home/joe/data</filename> to <filename>/data</filename>
using <command>mount</command>, except that symbolic links cannot set
the default file access mode.  Other differences are that the mapping is
distributed throughout the file system and proceeds by iteratively
walking the directory tree instead of matching the longest prefix in a
kernel table.  Note that symbolic links will only work on network
drives that are properly configured to support the "system" file
attribute.  Many do not do so by default (the Unix Samba server does
not by default, for example).</para>

</sect2>

</sect1>

<sect1 id="using-specialnames"><title>Special filenames</title>

<sect2 id="pathnames-etc"><title>Special files in /etc</title>

<para>Certain files in Cygwin's <filename>/etc</filename> directory are
read by Cygwin before the mount table has been established.  The list
of files is</para>

<screen>
  /etc/fstab
  /etc/fstab.d/$USER
  /etc/passwd
  /etc/group
</screen>

<para>These file are read using native Windows NT functions which have
no notion of Cygwin symlinks or POSIX paths.  For that reason
there are a few requirements as far as <filename>/etc</filename> is
concerned.</para>

<para>To access these files, the Cygwin DLL evaluates it's own full
Windows path, strips off the innermost directory component and adds
"\etc".  Let's assume the Cygwin DLL is installed as
<filename>C:\cygwin\bin\cygwin1.dll</filename>.  First the DLL name as
well as the innermost directory (<filename>bin</filename>) is stripped
off: <filename>C:\cygwin\</filename>.  Then "etc" and the filename to
look for is attached: <filename>C:\cygwin\etc\fstab</filename>.  So the
/etc directory must be parallel to the directory in which the cygwin1.dll
exists and <filename>/etc</filename> must not be a Cygwin symlink
pointing to another directory.  Consequentially none of the files from
the above list, including the directory <filename>/etc/fstab.d</filename>
is allowed to be a Cygwin symlink either.</para>

<para>However, native NTFS symlinks and reparse points are transparent
when accessing the above files so all these files as well as
<filename>/etc</filename> itself may be NTFS symlinks or reparse
points.</para>

<para>Last but not least, make sure that these files are world-readable.
Every process of any user account has to read these files potentially,
so world-readability is essential.  The only exception are the user
specific files <filename>/etc/fstab.d/$USER</filename>, which only have
to be readable by the $USER user account itself.</para>

</sect2>

<sect2 id="pathnames-dosdevices"><title>Invalid filenames</title>

<para>Filenames invalid under Win32 are not necessarily invalid
under Cygwin since release 1.7.0.  There are a few rules which
apply to Windows filenames.  Most notably, DOS device names like
<filename>AUX</filename>, <filename>COM1</filename>,
<filename>LPT1</filename> or <filename>PRN</filename> (to name a few)
cannot be used as filename or extension in a native Win32 application.
So filenames like <filename>prn.txt</filename> or <filename>foo.aux</filename>
are invalid filenames for native Win32 applications.</para>

<para>This restriction doesn't apply to Cygwin applications.  Cygwin
can create and access files with such names just fine.  Just don't try
to use these files with native Win32 applications.</para>

</sect2>

<sect2 id="pathnames-specialchars">
<title>Forbidden characters in filenames</title>

<para>Some characters are disallowed in filenames on Windows filesystems.
These forbidden characters are the ASCII control characters from ASCII
value 1 to 31, plus the following characters which have a special meaning
in the Win32 API:</para>

<screen>
  "   *   :   &lt;   &gt;   ?   |   \
</screen>

<para>Cygwin can't fix this, but it has a method to workaround this
restriction.  All of the above characters, except for the backslash,
are converted to special UNICODE characters in the range 0xf000 to 0xf0ff
(the "Private use area") when creating or accessing files.</para>

<para>The backslash has to be exempt from this conversion, because Cygwin
accepts Win32 filenames including backslashes as path separators on input. 
Converting backslashes using the above method would make this impossible.</para>

<para>Additionally Win32 filenames can't contain trailing dots and spaces
for DOS backward compatibility.  When trying to create files with trailing
dots or spaces, all of them are removed before the file is created.  This
restriction only affects native Win32 applications.  Cygwin applications
can create and access files with trailing dots and spaces without problems.
</para>

<para>An exception from this rule are some network filesystems (NetApp,
NWFS) which choke on these filenames.  They return with an error like
"No such file or directory" when trying to create such files.  Starting
with Cygwin 1.7.6, Cygwin recognizes these filesystems and works around
this problem by applying the same rule as for the other forbidden characters. 
Leading spaces and trailing dots and spaces will be converted to UNICODE
characters in the private use area.  This behaviour can be switched on
explicitely for a filesystem or a directory tree by using the mount option
<literal>dos</literal>.</para>

</sect2>

<sect2 id="pathnames-unusual">
<title>Filenames with unusual (foreign) characters</title>

<para> Windows filesystems use Unicode encoded as UTF-16
to store filename information.  If you don't use the UTF-8
character set (see <xref linkend="setup-locale"></xref>) then there's a
chance that a filename is using one or more characters which have no
representation in the character set you're using.</para>

<note><para>In the default "C" locale, Cygwin creates filenames using
the UTF-8 charset.  This will always result in some valid filename by
default, but again might impose problems when switching to a non-"C"
or non-"UTF-8" charset.</para></note>

<note><para>To avoid this scenario altogether, always use UTF-8 as the
character set.</para></note>

<para>If you don't want or can't use UTF-8 as character set for whatever
reason, you will nevertheless be able to access the file.  How does that
work?  When Cygwin converts the filename from UTF-16 to your character
set, it recognizes characters which can't be converted.  If that occurs,
Cygwin replaces the non-convertible character with a special character
sequence.  The sequence starts with an ASCII CAN character (hex code
0x18, equivalent Control-X), followed by the UTF-8 representation of the
character.  The result is a filename containing some ugly looking
characters.  While it doesn't <emphasis role='bold'>look</emphasis> nice, it
<emphasis role='bold'>is</emphasis> nice, because Cygwin knows how to convert
this filename back to UTF-16.  The filename will be converted using your
usual character set.  However, when Cygwin recognizes an ASCII CAN
character, it skips over the ASCII CAN and handles the following bytes as
a UTF-8 character.  Thus, the filename is symmetrically converted back to
UTF-16 and you can access the file.</para>

<note><para>Please be aware that this method is not entirely foolproof.
In some character set combinations it might not work for certain native
characters.</para>

<para>Only by using the UTF-8 charset you can avoid this problem safely.
</para></note>

</sect2>

<sect2 id="pathnames-casesensitive">
<title>Case sensitive filenames</title>

<para>In the Win32 subsystem filenames are only case-preserved, but not
case-sensitive.  You can't access two files in the same directory which
only differ by case, like <filename>Abc</filename> and
<filename>aBc</filename>.  While NTFS (and some remote filesystems)
support case-sensitivity, the NT kernel starting with Windows XP does
not support it by default.  Rather, you have to tweak a registry setting
and reboot.  For that reason, case-sensitivity can not be supported by Cygwin,
unless you change that registry value.</para>

<para>If you really want case-sensitivity in Cygwin, you can switch it
on by setting the registry value</para>

<screen>
HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\kernel\obcaseinsensitive
</screen>

<para>to 0 and reboot the machine.</para>

<note>
<para>
When installing Microsoft's Services For Unix (SFU), you're asked if
you want to use case-sensitive filenames.  If you answer "yes" at this point,
the installer will change the aforementioned registry value to 0, too.  So, if
you have SFU installed, there's some chance that the registry value is already
set to case sensitivity.
</para>
</note>

<para>After you set this registry value to 0, Cygwin will be case-sensitive
by default on NTFS and NFS filesystems.  However, there are limitations: 
while two <emphasis role='bold'>programs</emphasis> <filename>Abc.exe</filename>
and <filename>aBc.exe</filename> can be created and accessed like other files,
starting applications is still case-insensitive due to Windows limitations
and so the program you try to launch may not be the one actually started.  Also,
be aware that using two filenames which only differ by case might
result in some weird interoperability issues with native Win32 applications.  
You're using case-sensitivity at your own risk.  You have been warned! </para>

<para>Even if you use case-sensitivity, it might be feasible to switch to
case-insensitivity for certain paths for better interoperability with
native Win32 applications (even if it's just Windows Explorer).  You can do
this on a per-mount point base, by using the "posix=0" mount option in
<filename>/etc/fstab</filename>, or your <filename>/etc/fstab.d/$USER</filename>
file.</para>

<para><filename>/cygdrive</filename> paths are case-insensitive by default.
The reason is that the native Windows %PATH% environment variable is not
always using the correct case for all paths in it.  As a result, if you use
case-sensitivity on the <filename>/cygdrive</filename> prefix, your shell
might claim that it can't find Windows commands like <command>attrib</command>
or <command>net</command>.  To ease the pain, the <filename>/cygdrive</filename>
path is case-insensitive by default and you have to use the "posix=1" setting
explicitly in <filename>/etc/fstab</filename> or
<filename>/etc/fstab.d/$USER</filename> to switch it to case-sensitivity,
or you have to make sure that the native Win32 %PATH% environment variable
is using the correct case for all paths throughout.</para>

<para>Note that mount points as well as device names and virtual
paths like /proc are always case-sensitive!  The only exception are
the subdirectories and filenames under /proc/registry, /proc/registry32
and /proc/registry64.  Registry access is always case-insensitive.
Read on for more information.</para>

</sect2>

<sect2 id="pathnames-posixdevices"> <title>POSIX devices</title>
<para>While there is no need to create a POSIX <filename>/dev</filename> 
directory, the directory is automatically created as part of a Cygwin
installation.  It's existence is often a prerequisit to run certain
applications which create symbolic links, fifos, or UNIX sockets in
<filename>/dev</filename>.  Also, the directories <filename>/dev/shm</filename>
and <filename>/dev/mqueue</filename> are required to exist to use named POSIX
semaphores, shared memory, and message queues, so a system without a real
<filename>/dev</filename> directory is functionally crippled.
</para>

<para>Apart from that, Cygwin automatically simulates POSIX devices
internally.  Up to Cygwin 1.7.11, these devices couldn't be seen with the
command <command>ls /dev/</command> although commands such as
<command>ls /dev/tty</command> worked fine.  Starting with Cygwin 1.7.12,
the <filename>/dev</filename> directory is automagically populated with
existing POSIX devices by Cygwin in a way comparable with a
<ulink url="http://en.wikipedia.org/wiki/Udev">udev</ulink> based virtual
<filename>/dev</filename> directory under Linux.</para>

<para>
Cygwin supports the following character devices commonly found on POSIX systems:
</para>

<screen>
/dev/null
/dev/zero
/dev/full

/dev/console	Pseudo device name for the current console window of a session.
		Up to Cygwin 1.7.9, this was the only name for a console.
		Different consoles were indistinguishable.
		Cygwin's /dev/console is not quite comparable with the console
		device on UNIX machines.

/dev/cons0      Starting with Cygwin 1.7.10, Console sessions are numbered from 
/dev/cons1	/dev/cons0 upwards.  Console device names are pseudo device
...		names, only accessible from processes within this very console
		session.  This is due to a restriction in Windows.

/dev/tty	The current controlling tty of a session.

/dev/ptmx	Pseudo tty master device.

/dev/pty0	Pseudo ttys are numbered from /dev/pty0 upwards as they are
/dev/pty1	requested.
...

/dev/ttyS0	Serial communication devices.  ttyS0 == Win32 COM1,
/dev/ttyS1	ttyS1 == COM2, etc.
...

/dev/pipe
/dev/fifo

/dev/mem	The physical memory of the machine.  Note that access to the
/dev/port	physical memory has been restricted with Windows Server 2003.
/dev/kmem	Since this OS, you can't access physical memory from user space.

/dev/kmsg	Kernel message pipe, for usage with sys logger services.

/dev/random	Random number generator.
/dev/urandom

/dev/dsp	Default sound device of the system.
</screen>

<para>
Cygwin also has several Windows-specific devices:
</para>

<screen>
/dev/com1	The serial ports, starting with COM1 which is the same as ttyS0.
/dev/com2	Please use /dev/ttySx instead.
...

/dev/conin	Same as Windows CONIN$.
/dev/conout	Same as Windows CONOUT$.
/dev/clipboard	The Windows clipboard, text only
/dev/windows	The Windows message queue.
</screen>

<para>
Block devices are accessible by Cygwin processes using fixed POSIX device
names.  These POSIX device names are generated using a direct conversion
from the POSIX namespace to the internal NT namespace.
E.g. the first harddisk is the NT internal device \device\harddisk0\partition0
or the first partition on the third harddisk is \device\harddisk2\partition1.
The first floppy in the system is \device\floppy0, the first CD-ROM is
\device\cdrom0 and the first tape drive is \device\tape0.</para>

<para>The mapping from physical device to the name of the device in the
internal NT namespace can be found in various places.  For hard disks and
CD/DVD drives, the Windows "Disk Management" utility (part of the
"Computer Management" console) shows that the mapping of "Disk 0" is
\device\harddisk0.  "CD-ROM 2" is \device\cdrom2.  Another place to find
this mapping is the "Device Management" console.  Disks have a
"Location" number, tapes have a "Tape Symbolic Name", etc.
Unfortunately, the places where this information is found is not very
well-defined.</para>

<para>
For external disks (USB-drives, CF-cards in a cardreader, etc) you can use
Cygwin to show the mapping.  <filename>/proc/partitions</filename>
contains a list of raw drives known to Cygwin.  The <command>df</command>
command shows a list of drives and their respective sizes.  If you match
the information between <filename>/proc/partitions</filename> and the
<command>df</command> output, you should be able to figure out which
external drive corresponds to which raw disk device name.</para>

<note><para>Apart from tape devices which are not block devices and are
by default accessed directly, accessing mass storage devices raw
is something you should only do if you know what you're doing and know how to
handle the information.  <emphasis role='bold'>Writing</emphasis> to a raw
mass storage device you should only do if you
<emphasis role='bold'>really</emphasis> know what you're doing and are aware
of the fact that any mistake can destroy important information, for the
device, and for you.  So, please, handle this ability with care.
<emphasis role='bold'>You have been warned.</emphasis></para></note>

<para>
Last but not least, the mapping from POSIX /dev namespace to internal
NT namespace is as follows:
</para>

<screen>
POSIX device name     Internal NT device name

/dev/st0	      \device\tape0, rewind
/dev/nst0	      \device\tape0, no-rewind
/dev/st1	      \device\tape1
/dev/nst1	      \device\tape1
...
/dev/st15
/dev/nst15

/dev/fd0	      \device\floppy0
/dev/fd1	      \device\floppy1
...
/dev/fd15

/dev/sr0	      \device\cdrom0
/dev/sr1	      \device\cdrom1
...
/dev/sr15

/dev/scd0	      \device\cdrom0
/dev/scd1	      \device\cdrom1
...
/dev/scd15

/dev/sda	      \device\harddisk0\partition0	(whole disk)
/dev/sda1	      \device\harddisk0\partition1	(first partition)
...
/dev/sda15	      \device\harddisk0\partition15	(fifteenth partition)

/dev/sdb	      \device\harddisk1\partition0
/dev/sdb1	      \device\harddisk1\partition1

[up to]

/dev/sddx	      \device\harddisk127\partition0
/dev/sddx1	      \device\harddisk127\partition1
...
/dev/sddx15	      \device\harddisk127\partition15
</screen>

<para>
if you don't like these device names, feel free to create symbolic
links as they are created on Linux systems for convenience:
</para>

<screen>
ln -s /dev/sr0 /dev/cdrom
ln -s /dev/nst0 /dev/tape
...
</screen>

</sect2>

<sect2 id="pathnames-exe"><title>The .exe extension</title>

<para>Win32 executable filenames end with <filename>.exe</filename>
but the <filename>.exe</filename> need not be included in the command,
so that traditional UNIX names can be used.  However, for programs that
end in <filename>.bat</filename> and <filename>.com</filename>, you
cannot omit the extension.  </para>

<para>As a side effect, the <command> ls filename</command> gives
information about <filename>filename.exe</filename> if
<filename>filename.exe</filename> exists and <filename>filename</filename>
does not.  In the same situation the function call
<function>stat("filename",..)</function> gives information about
<filename>filename.exe</filename>.  The two files can be distinguished
by examining their inodes, as demonstrated below.
<screen>
<prompt>bash$</prompt> <userinput>ls * </userinput>
a      a.exe     b.exe
<prompt>bash$</prompt> <userinput>ls -i a a.exe</userinput>
445885548 a       435996602 a.exe
<prompt>bash$</prompt> <userinput>ls -i b b.exe</userinput>
432961010 b       432961010 b.exe
</screen>
If a shell script <filename>myprog</filename> and a program
<filename>myprog.exe</filename> coexist in a directory, the shell
script has precedence and is selected for execution of
<command>myprog</command>.  Note that this was quite the reverse up to
Cygwin 1.5.19.  It has been changed for consistency with the rest of Cygwin.
</para>

<para>The <command>gcc</command> compiler produces an executable named
<filename>filename.exe</filename> when asked to produce
<filename>filename</filename>. This allows many makefiles written
for UNIX systems to work well under Cygwin.</para>

</sect2>

<sect2 id="pathnames-proc"><title>The /proc filesystem</title> 
<para>
Cygwin, like Linux and other similar operating systems, supports the
<filename>/proc</filename> virtual filesystem. The files in this
directory are representations of various aspects of your system,
for example the command <userinput>cat /proc/cpuinfo</userinput> 
displays information such as what model and speed processor you have.
</para>
<para>
One unique aspect of the Cygwin <filename>/proc</filename> filesystem
is <filename>/proc/registry</filename>, see next section.
</para>
<para>
The Cygwin <filename>/proc</filename> is not as complete as the
one in Linux, but it provides significant capabilities. The
<systemitem>procps</systemitem> package contains several utilities
that use it.
</para>
</sect2>

<sect2 id="pathnames-proc-registry"><title>The /proc/registry filesystem</title>
<para>
The <filename>/proc/registry</filename> filesystem provides read-only
access to the Windows registry.  It displays each <literal>KEY</literal>
as a directory and each <literal>VALUE</literal> as a file.  As anytime
you deal with the Windows registry, use caution since changes may result
in an unstable or broken system.  There are additionally subdirectories called
<filename>/proc/registry32</filename> and <filename>/proc/registry64</filename>.
They are identical to <filename>/proc/registry</filename> on 32 bit
host OSes.  On 64 bit host OSes, <filename>/proc/registry32</filename>
opens the 32 bit processes view on the registry, while
<filename>/proc/registry64</filename> opens the 64 bit processes view.
</para>
<para>
Reserved characters ('/', '\', ':', and '%') or reserved names
(<filename>.</filename> and <filename>..</filename>) are converted by
percent-encoding:
<screen>
<prompt>bash$</prompt> <userinput>regtool list -v '\HKEY_LOCAL_MACHINE\SYSTEM\MountedDevices'</userinput>
...
\DosDevices\C: (REG_BINARY) = cf a8 97 e8 00 08 fe f7
...
<prompt>bash$</prompt> <userinput>cd /proc/registry/HKEY_LOCAL_MACHINE/SYSTEM</userinput>
<prompt>bash$</prompt> <userinput>ls -l MountedDevices</userinput>
...
-r--r----- 1 Admin SYSTEM  12 Dec 10 11:20 %5CDosDevices%5CC%3A
...
<prompt>bash$</prompt> <userinput>od -t x1 MountedDevices/%5CDosDevices%5CC%3A</userinput>
0000000 cf a8 97 e8 00 08 fe f7 01 00 00 00
</screen>
The unnamed (default) value of a key can be accessed using the filename
<filename>@@</filename>.
</para>
<para>
If a registry key contains a subkey and a value with the same name
<filename>foo</filename>, Cygwin displays the subkey as
<filename>foo</filename> and the value as <filename>foo%val</filename>.
</para>
</sect2>

<sect2 id="pathnames-at"><title>The @@pathnames</title> 
<para>To circumvent the limitations on shell line length in the native
Windows command shells, Cygwin programs, when invoked by non-Cygwin processes, expand their arguments
starting with "@@" in a special way.  If a file
<filename>pathname</filename> exists, the argument
<filename>@@pathname</filename> expands recursively to the content of
<filename>pathname</filename>. Double quotes can be used inside the
file to delimit strings containing blank space. 
In the following example compare the behaviors
<command>/bin/echo</command> when run from bash and from the Windows command prompt.</para>

<example id="pathnames-at-ex"><title> Using @@pathname</title>
<screen>
<prompt>bash$</prompt> <userinput>/bin/echo  'This   is   "a     long"  line' > mylist</userinput>
<prompt>bash$</prompt> <userinput>/bin/echo @@mylist</userinput>
@@mylist
<prompt>bash$</prompt> <userinput>cmd</userinput>
<prompt>c:\&gt;</prompt> <userinput>c:\cygwin\bin\echo @@mylist</userinput>
This is a     long line
</screen>
</example>
</sect2> 
</sect1>
@


1.71
log
@	* Throughout, eliminate Windows 2000 from the documentation.
	* overview.sgml (brief-history): Mention native AMD64 support.
@
text
@@


1.70
log
@* pathnames.sgml: Remove stray '@@'.
@
text
@d657 1
a657 6
<para>to 0 and reboot the machine.  For least surprise, Cygwin expects
this registry value also on Windows 2000, which usually doesn't know this
registry key.  If you want case-sensitivity on Windows 2000, just create
that registry value and set it to 0.  <emphasis role='bold'>Only</emphasis>
on Windows 2000 you don't have to reboot to bring it into effect, rather
stopping all Cygwin processes and then restarting them is sufficient.</para>
@


1.69
log
@* pathnames.sgml: Clarify '@@' processing.
@
text
@d1001 1
a1001 1
<prompt>bash$</prompt> <userinput>@@/bin/echo  'This   is   "a     long"  line' > mylist</userinput>
@


1.68
log
@	* pathnames.sgml (pathnames-at): Drop confusing description on
	"embedded double quotes".
@
text
@d990 1
a990 1
Windows command shells, Cygwin programs expand their arguments
d996 2
a997 2
In the following example compare the behaviors of the bash built-in
<command>echo</command> and of the program <command>/bin/echo</command>.</para>
d1001 2
a1002 2
<prompt>bash$</prompt> <userinput>echo  'This   is   "a     long"  line' > mylist</userinput>
<prompt>bash$</prompt> <userinput>echo @@mylist</userinput>
@


1.67
log
@	* new-features.sgml (ov-new1.7.18): Add sparse change.
	* pathnames.sgml (mount-table): Document sparse mount option.
@
text
@a995 1
Embedded double quotes must be repeated.
@


1.66
log
@	* pathnames.sgml (pathnames-intro): Remove paragraph on UNC paths.
	Try to be clearer on POSIX vs. Win32 paths.
	(unc-paths): New section.
	(cygdrive): Fix a few SGML qualifiers.
	* setup-net.sgml: Move ntsec section from here...
	* using.sgml: ..to here.
@
text
@d120 4
@


1.65
log
@	* new-features.sgml (ov-new1.7.12): Create.  Move mountinfo here.
	Add /dev notice.
	* pathnames.sgml (pathnames-posixdevices): Rephrase to account for
	/dev change in 1.7.12.
@
text
@d5 1
a5 1
<para>Cygwin supports both Win32- and POSIX-style paths.  Directory
d7 4
a10 4
backslashes are always handled as Win32 paths.  POSIX paths must only
use forward slashes as delimiter, otherwise they are treated as Win32
paths and file access might fail in surprising ways.  UNC pathnames
(starting with two slashes and a network name) are also supported.</para>
d272 16
d292 1
a292 1
The default value for this prefix is <literal>/cygdrive</literal>, and
d306 1
a306 1
then any file <literal>/cygdrive/x/file</literal> will be opened in
@


1.64
log
@	* faq-using.xml: Fix typos.
	* ntsec.sgml: Ditto.
	* pathnames.sgml: Ditto.
	* setup2.sgml: Ditto.
	* setup-net.sgml: Ditto.
	(setup-dir): Drop paragraph on Unix/DOS file mode.
@
text
@d692 18
a709 12
<para>There is no need to create a POSIX <filename>/dev</filename> 
directory as Cygwin automatically simulates it internally. 
These devices cannot be seen with the command <command>ls /dev/</command>
although commands such as <command>ls /dev/tty</command> work fine.
If you want to be able to see all well-known devices in
<filename>/dev/</filename>, you can use Igor Pechtchanski's
<ulink
url="http://cygwin.com/ml/cygwin/2004-03/txt00028.txt">create_devices.sh</ulink>
script.  This script does not add the raw disk devices, though.  Again,
it's not necessary to see an existing device in /dev to access it.  The script
is just for the fun of it.
</para>
@


1.63
log
@	* pathnames.sgml (mount-table): Rephrase a few expressions for
	clearness.
@
text
@d25 1
a25 1
the existance of a single unified POSIX file system structure, Cygwin
d226 1
a226 1
session, you can invoking the Cygwin tool <command>mount</command> without
d291 2
a292 2
binary mode by default (mount option <literal>binary</literal>, and the case
of the filename doesn't matter (mount option <literal>posix=0</literal>.
d366 1
a366 1
treated as caseinsensitive, and permissions are just faked as if the
d368 1
a368 1
filesystems which usually are capable of casesensitivity and storing
@


1.62
log
@	* faq-using.xml (faq.using.converting-paths): Remove reference to
	cygwin.bat.
	(faq.using.emacs): Drop "CYGWIN=tty" setting.
	* pathnames.sgml (pathnames-posixdevices): Align list of device names
	with changes in 1.7.10.
	* setup2.sgml (setup-env-ov): Drop text which assumes that Cygwin
	processes are started in console window.  Align wording to lessened
	relevance of $CYGWIN.  Don't use dropped CYGWIN setting in example.
	(setup-locale-how): Put using console and Cygwin.bat file into
	perspective.
	(setup-locale-problems): Ditto.
@
text
@d65 9
a73 4
<para>The third field describes the type of the filesystem.
Cygwin supports any string here, since the file system type is usually
not evaluated.  The notable exception is the file system type
cygdrive.  This type is used to set the cygdrive prefix.</para>
d85 2
a86 2
	      affects filesystems supporting ACLs (NTFS) and is ignored
	      otherwise.
d193 1
a193 1
  <para>A mount point for a remote directory without ACL support:</para>
@


1.61
log
@	Throughout remove NT4 from documentation.

	* new-features.sgml (ov-new1.7.10): Document change in passwd command.
@
text
@d709 12
a720 4
/dev/console	Pseudo device name for the standard console window created
		by Windows.  Same as the one used for cmd.exe.  Every one
		of them has this name.  It's not quite comparable with the
		console device on UNIX machines.
a721 1
/dev/tty	The current tty of a session running in a pseudo tty.
a722 1
/dev/ttym
d724 2
a725 2
/dev/tty0	Pseudo ttys are numbered from /dev/tty0 upwards as they are
/dev/tty1	requested.
@


1.60
log
@	* pathnames.sgml (mount-table): Fix pathnames-mount-ex example.  Change
	an expression.
@
text
@d633 5
a637 6
this registry value also on Windows NT4 and Windows 2000, which usually
both don't know this registry key.  If you want case-sensitivity on these
systems, create that registry value and set it to 0.  On these systems
(and <emphasis role='bold'>only</emphasis> on these systems) you don't have to reboot to bring it
into effect, rather stopping all Cygwin processes and then restarting them
is sufficient.</para>
@


1.59
log
@	* new-features.sgml (ov-new1.7.7): Change to describe partial
	reversion to pre-1.7.6 behaviour.
	(ov-new1.7.6): Deprecate description of CWD handling.
	* pathnames.sgml (pathnames-win32-api): Rewrite to reflect new CWD
	behaviour.
@
text
@d228 6
a233 6
  f:/cygwin/bin on /usr/bin type system (binary,auto)
  f:/cygwin/lib on /usr/lib type system (binary,auto)
  f:/cygwin on / type system (binary,auto)
  e:/src on /usr/src type system (binary)
  c: on /cygdrive/c type user (binary,posix=0,user,noumount,auto)
  e: on /cygdrive/e type user (binary,posix=0,user,noumount,auto)
d239 1
a239 1
them.  However, since they are only noted in memory, these mount
@


1.58
log
@	* new-features.sgml (ov-new1.7.7): New section.
	* pathnames.sgml: Throughout, align style of screen elements.
	Throughout, make all emphasis elements bold.
	(pathnames-win32-api): Rewrite section.
@
text
@d376 4
a379 16
<para>When a Cygwin application is started, the Win32 idea of the current
working directory (CWD) is set to an <emphasis role='bold'>invalid</emphasis>
directory.  This works around the problem that the Win32 CWD is locked
in a way which restricts certain POSIX functionality.  However, the side
effect is that a call to, for instance, <function>CreateFile ("foo",
...);</function> will fail, since the Win32 notion of the CWD is
not the same as the Cygwin notion of the CWD, and worse, it's a
directory entirely unsuitable for normal file operations.</para>

<para>So, in general, don't use the Win32 file API in Cygwin applications.
If you <emphasis role='bold'>really</emphasis> need to access files using
the Win32 API, or if you <emphasis role='bold'>really</emphasis> have to use
<function>CreateProcess</function> to start applications, rather than
the POSIX <function>exec(3)</function> familiy of functions, you have to
make sure that the Win32 CWD is set to some valid directory.  To
accomplish that, you can choose from several methods.</para>
d383 6
a388 10
    <para>The easiest method is to call</para>
    
<screen>
  #include &lt;sys/cygwin.h&gt;

  cygwin_internal (CW_SYNC_WINCWD);
</screen>

    <para>prior to calling the Win32 functions which require a valid Win32 CWD.
    This function synchronizes the Win32 CWD with the Cygwin CWD.</para>
a389 35
    <para>Note that the <function>cygwin_internal (CW_SYNC_WINCWD)</function>
    call may fail.  In that case, it returns with a non-zero value and
    errno is set appropriately:</para>

    <segmentedlist>
      <?dbhtml list-presentation="table"?>
      <seglistitem>
	<seg><emphasis role='bold'>ENOTDIR</emphasis></seg>
	<seg>The Cygwin CWD is a virtual path, like /proc, or //, which does not
	     exist as valid directory in the Win32 namespace.</seg>
      </seglistitem>
      <seglistitem>
	<seg><emphasis role='bold'>EACCES</emphasis></seg>
	<seg>The Cygwin CWD is a directory with restrictive permissions,
	     which make it unusable as Win32 directory.</seg>
      </seglistitem>
      <seglistitem>
	<seg><emphasis role='bold'>ENAMETOOLONG</emphasis></seg>
	<seg>The Cygwin CWD is too long to be used as Win32 CWD.
	     The Win32 CWD is restricted to 258 characters.</seg>
      </seglistitem>
    </segmentedlist>

    <para>You should make sure that you test the return value of
    <function>cygwin_internal (CW_SYNC_WINCWD)</function>, otherwise
    your application will potentially not work correctly.  If the call
    failed, you can use the Win32 call <function>SetCurrentDirectory</function>
    to move to some well-known directory.</para>

    <note><para>After you've synchronized the Win32 CWD with the Cygwin CWD,
    be aware that the directory is locked, until the process exited, or
    until the process set the Win32 CWD to some other directory.  During that
    period it will not be possible to rename or remove the directory from
    other Cygwin applications.</para></note>
  </listitem>
d391 5
a395 2
    <para>If you know where to go to, you can also just call the Win32 function
    <function>SetCurrentDirectory</function> immediately.</para>
d397 1
d399 3
a401 5
    <para>If you need a valid Win32 CWD only for a child application started
    via <function>CreateProcess</function> and friends, you don't have to
    set your own Win32 CWD.  In that case, just utilize the lpCurrentDirectory
    parameter.  See the description of the <function>CreateProcess</function>
    function in the MSDN manual pages.</para>
d403 1
d405 4
a408 3
    <para>Last, but not least, if you don't need any POSIX function from
    Cygwin in your specific applciation, consider to compile your application
    as native Win32 (mingw) executable, rather than as Cygwin executable.</para>
d412 23
@


1.57
log
@	* pathnames.sgml (pathnames-win32-api): Try to use a more clear wording.
@
text
@d177 1
a177 1
  <screen>c:/foo /bar fat32 binary 0 0</screen>
d181 1
a181 1
  <screen>C:/foo /bar/baz ntfs text,posix=0 0 0</screen>
d185 1
a185 1
  <screen>C:/Documents\040and\040Settings /docs ext3 binary 0 0</screen>
d189 1
a189 1
  <screen>//server/share/subdir /srv/subdir smbfs binary,noacl 0 0</screen>
d193 1
a193 1
  <screen># This is just a comment</screen>
d197 1
a197 1
  <screen>none /mnt cygdrive binary 0 0</screen>
d201 1
a201 1
  <screen>/var /usr/var none bind</screen>
d227 7
a233 7
<prompt>bash$</prompt> <userinput>mount</userinput>
f:/cygwin/bin on /usr/bin type system (binary,auto)
f:/cygwin/lib on /usr/lib type system (binary,auto)
f:/cygwin on / type system (binary,auto)
e:/src on /usr/src type system (binary)
c: on /cygdrive/c type user (binary,posix=0,user,noumount,auto)
e: on /cygdrive/e type user (binary,posix=0,user,noumount,auto)
d250 2
a251 1
<filename>/usr/lib</filename> are <emphasis>never</emphasis> generated.
d340 4
a343 4
    <screen>
       C:\foo
       C:/foo
    </screen>
d347 3
a349 3
    <screen>
       C:/foo/bar<emphasis role='bold'>\</emphasis>baz/...
    </screen>
d353 3
a355 3
    <screen>
       \\server\share\...
    </screen>
d370 5
a374 3
<para>Special care must be taken when your application uses Win32 file API
functions like <function>CreateFile</function> to access files using relative
pathnames.</para>
d377 7
a383 6
working directory (CWD) is set to an invalid directory.  This works around
the problem that the Win32 CWD is locked in a way which restricts POSIX
functionality.  However, the side effect is that a call to, for instance,
<function>CreateFile ("foo", ...);</function> will fail, since the Win32
notion of the CWD is <emphasis>not</emphasis> the same as the Cygwin notion
of the CWD.</para>
d386 6
a391 3
If you <emphasis>really</emphasis> need to access files using the Win32 API,
and if you <emphasis>really</emphasis> have to use relative pathnames,
you have two choices.</para>
d395 56
a450 4
    <para>Either you call <function>SetCurrentDirectory</function> before
    calling the Win32 function which requires a valid Win32 CWD
    (<function>CreateFile</function>, <function>CreateProcess</function>,
    etc).</para>
d453 3
a455 2
    <para>Or you compile your application as native Win32 (mingw) executable,
    rather than as Cygwin executable.</para>
d620 3
a622 3
characters.  While it doesn't <emphasis>look</emphasis> nice, it
<emphasis>is</emphasis> nice, because Cygwin knows how to convert this
filename back to UTF-16.  The filename will be converted using your
@


1.56
log
@	* faq-programming.xml (faq.programming.win32-api): Remove simplicity.
	Add note and xrefs to User's Guide chapters explaining restrictions
	using the Win32 API.
	* new-features.sgml (ov-new1.7.6): Add note about Win CWD.
	* overview2.sgml (ov-hi-intro): Add note and xrefs about Win32 API
	restrictions.  Tone down flexibility.
	* pathnames.sgml (pathnames-intro): Add xref to pathnames-win32-api
	section.
	(pathnames-win32-api): New section describing Win32 CWD restriction.
	* setup2.sgml (setup-env-ov): New sub-section.
	(setup-env-win32): Ditto, describing Win32 environment restriction.
@
text
@d376 1
a376 1
functionality.  However, the side effect is that a call to, say,
d389 3
a391 1
    calling <function>CreateFile</function>.</para>
@


1.55
log
@	* new-features.sgml (ov-new1.7.6): Document "bind" option.
	* pathnames.sgml (mount-table): Add "bind" option with example.
@
text
@d14 2
a15 1
See <xref linkend="pathnames-win32"></xref> for more information.
d367 32
@


1.54
log
@	* new-features.sgml (ov-new1.7.6): Add new "dos" and "inode" mount
	options.
	* pathnames.sgml (mount-table): Ditto.
	(pathnames-specialchars): Change description order.  Add paragraph
	to explain new behaviour in terms of leading spaces and trailing dots
	and spaces in pathnames.
@
text
@d83 9
d198 9
@


1.53
log
@* pathnames.sgml: Clarify wording of user-specific fstab files.  Fix typo.
@
text
@d84 4
d89 4
d445 4
a448 10
<para>Win32 filenames can't contain trailing dots and spaces for backward
compatibility.  When trying to create files with trailing dots or spaces,
all of them are removed before the file is created.  This restriction only
affects native Win32 applications.  Cygwin applications can create and
access files with trailing dots and spaces without problems.</para>

<para>Additionally, some characters are disallowed in filenames on Windows
filesystems.  These forbidden characters are the ASCII control characters
from ASCII value 1 to 31, plus the following characters which have a special
meaning in the Win32 API:</para>
d463 17
@


1.52
log
@	* new-features.sgml (ov-new1.7.2): Add native DOS path and UNC path
	change.
	* pathnames.sgml (pathnames-intro): Make the Win32 path text a note
	and xref to new pathnames-win32 section.
	(cygdrive): Add description how the cygdrive mount flags apply to
	UNC paths starting with slashes.
	(pathnames-win32): New section describing native path handling.
@
text
@d42 2
a43 2
stored in the <filename>/etc/passwd</filename> file.  The content of the
user specifc file is identical to the system-wide
@


1.51
log
@	* faq-using.xml: Fix typos and remove incorrect locale-specific
	documentation.
	* new-features.sgml: Ditto.
	* pathnames.sgml: Ditto.
@
text
@d9 7
a15 5
paths and file access might fail in surprising ways.  Note that the
usage of Win32 paths, though possible, is deprecated, since it
circumvents important internal path handling mechanisms.  UNC pathnames
(starting with two slashes and a network name) are also supported.
</para>
d262 19
d301 39
@


1.50
log
@	* pathnames.sgml (mount-table): Add info that posix=0 is default for
	the cygdrive prefix.
@
text
@d406 2
a407 2
<para> Windows filesystems use the Unicode character set in the UTF-16
encoding to store filename information.  If you don't use the UTF-8
a411 10
<para>For instance, there are no Chinese characters in the ISO-8859-1
character set.  So, converting a filename containing a Chinese character
to ISO-8859-1 leaves you with a wrongly converted filename, for instance,
containing a question mark '?' as replacement for the unconvertable
character.  When trying to access the file, Cygwin has to convert the
filename back to UTF-16.  However, this doesn't result in the original
filename because the question mark will not translate back to the original
Chinese character, but to a simple question mark instead.  This in turn
results in strange "File not found" messages.</para>

@


1.49
log
@	* pathnames.sgml (mount-table): Add missing slash in pathname.
@
text
@d91 2
a92 1
  posix=0   - Switch off case sensitivity for paths under this mount point.
d94 1
a94 1
	      (default).
@


1.48
log
@	* pathnames.sgml (pathnames-specialchars): Fix typos.
@
text
@d228 1
a228 1
that for you, <filename>bin/copy-user-registry-fstab</filename>.  Just
@


1.47
log
@	* pathnames.sgml: Add limitation of case sensitivity with CreateProcess.
@
text
@d384 2
a385 2
from ASCII value 1 to 31, plus the following charcters which have a special
menaing in the Win32 API:</para>
@


1.46
log
@	* pathnames.sgml (pathnames-specialchars): Add control chars to the
	list.  Explain backslash exception.
@
text
@d492 8
a499 4
by default on NTFS and NFS filesystems.  Be aware that using two filenames
which only differ by case might result in some weird interoperability
issues with native Win32 applications.  You're using case-sensitivity 
at your own risk.  You have been warned!</para>
@


1.45
log
@	* new-features.sgml (ov-new1.7-file): Ctrl-X, not Ctrl-N.
	* pathnames.sgml (pathnames-unusual): Ditto.
	* setup2.sgml (setup-locale-ov): Change description according to
	latest changes.
	(setup-locale-how): Rewrite.
	(setup-locale-console): Enable section again.  Change to reflect
	recent changes.
	(setup-locale-problems): Change to reflect recent changes.
@
text
@d382 4
a385 1
<para>Some characters are disallowed in filenames on Windows filesystems:</para>
d396 4
@


1.44
log
@* pathnames.sgml: Fix typo.
@
text
@d427 2
a428 2
sequence.  The sequence starts with an ASCII SO character (hex code
0x0e, equivalent Control-N), followed by the UTF-8 representation of the
d433 2
a434 2
usual character set.  However, when Cygwin recognizes an ASCII SO
character, it skips over the ASCII SO and handles the following bytes as
@


1.43
log
@Change explicitely to explicitly throughout.
@
text
@d130 1
a130 1
<filename>/usr/lib</filename> is suppsoed to point to the
@


1.42
log
@	* faq-setup.xml (faq.setup.upgrade-mountpoints): New entry.
	* faq-using.xml (faq.using.directory-structure): Align example to
	latest mount output.
	* pathnames.sgml (mount-table): Add note about upgrade helper scripts
	to create /etc/fstab and /etc/fstab.f/${USER}.
@
text
@d269 1
a269 1
textmode.  If you want to mount any drive explicitely in another mode than
d504 1
a504 1
explicitely in <filename>/etc/fstab</filename> or
@


1.41
log
@	* new-features.sgml: Add automounting of /, /usr/bin, and /usr/lib.
	* pathnames.sgml (pathnames-intro): Be more verbose about POSIX and
	Win32 paths.
	(mount-table): Add "auto" flag.  Add a paragraph about /usr/bin and
	/usr/lib.
	(pathnames-mount-ex): Enhance flags output.
@
text
@d214 20
@


1.40
log
@cygwin ChangeLog
2009-05-13  Corinna Vinschen  <corinna@@vinschen.de>
	    Christopher Faylor  <me+cygwin@@cgf.cx>

	* mount.cc (mount_info::got_usr_bin): Define.
	(mount_info::got_usr_lib): Ditto.
	(mount_info::root_idx): Ditto.
	(mount_info::create_root_entry): Create root entry as immutable and
	flag as automatic.
	(mount_info::init): Remove "Huh?  No /etc/fstab..." warning.
	Unconditionally call from_fstab for user and system tables.  Fill in
	/usr/bin and /usr/lib if they have not been specified in /etc/fstab.
	(oopts): Alphabetize.  Add "override" option to allow overriding
	immutable mount points.
	(mount_info::add_item): Accommodate new MOUNT_IMMUTABLE flag intended
	for root mount.
	(mount_info::add_item): Detect "/usr/bin", "/usr/lib", and "/" and set
	appropriate global state.
	(fillout_mntent): Add ,auto to mount points added by Cygwin DLL.
	(mount): Remove masking of MOUNT_SYSTEM.  Allow user to shoot
	themselves.  Add comment.
	* mount.h (mount_info::got_usr_bin): Declare.
	(mount_info::got_usr_lib): Ditto.
	(mount_info::root_idx): Ditto.
	* include/sys/mount.h: Reformat enum.
	Add MOUNT_{OVERRIDE,IMMUTABLE,AUTOMATIC}.

doc ChangeLog
2009-05-13  Corinna Vinschen  <corinna@@vinschen.de>
	    Christopher Faylor  <me+cygwin@@cgf.cx>

	* pathnames.sgml (mount-table): Sort mount options and add override
	option.  Add description of root mount handling.

utils ChangeLog
2009-05-13  Corinna Vinschen  <corinna@@vinschen.de>
	    Christopher Faylor  <me+cygwin@@cgf.cx>

	* mount.cc (oopts): Sort.  Add override option.  Add dummy "auto"
	option for consistency.
	(mount_entries): Avoid adding auto-mounted entries to -m output.

	* utils.sgml: Sort mount options.  Add description of override option.
@
text
@d5 9
a13 4
<para>Cygwin supports both Win32- and POSIX-style paths, where
directory delimiters may be either forward or back slashes.  UNC
pathnames (starting with two slashes and a network name) are also
supported.</para>
d79 1
d126 8
d198 3
a200 3
f:/cygwin/bin on /usr/bin type system (binary)
f:/cygwin/lib on /usr/lib type system (binary)
f:/cygwin on / type system (binary)
d202 2
a203 2
c: on /cygdrive/c type user (binary,noumount)
e: on /cygdrive/e type user (binary,noumount)
@


1.39
log
@	* pathnames.sgml (pathnames-unusual): Talk about using UTF-8 in C
	locale.
	* setup2.sgml (setup-locale-problems): Ditto.
@
text
@d70 20
a89 19
  acl      - Cygwin uses the filesystem's access control lists (ACLs) to
             implement real POSIX permissions (default).  This flag only
	     affects filesystems supporting ACLs (NTFS) and is ignored
	     otherwise.
  noacl    - Cygwin ignores filesystem ACLs and only fakes a subset of
	     permission bits based on the DOS readonly attribute.  This
	     behaviour is the default on FAT and FAT32.  The flag is
	     ignored on NFS filesystems.
  binary   - Files default to binary mode (default).
  text     - Files default to CRLF text mode line endings.
  nouser   - Mount is a system-wide mount.
  user     - Mount is a user mount.
  exec     - Treat all files below mount point as executable.
  notexec  - Treat all files below mount point as not executable.
  cygexec  - Treat all files below mount point as cygwin executables.
  nosuid   - No suid files are allowed (currently unimplemented).
  posix=0  - Switch off case sensitivity for paths under this mount point.
  posix=1  - Switch on case sensitivity for paths under this mount point
	     (default).
d109 10
a118 2
means that no files should be marked as executable under that mount point.
</para>
@


1.38
log
@	* Various syntactical and semantical fixes throughout.
@
text
@d371 5
@


1.37
log
@	* cygwinenv.sgml: Add text to explain new UTF-16 symlinks.
	* faq-api.xml: Add FAQ entry "Why do some of my old symlinks don't
	work anymore?"
	* new-features.sgml: Fix symlink text.  Add new UTF-16 symlinks.
	* overview2.sgml: Add text about new UTF-16 symlinks and potential
	problems with old symlinks.
	* pathnames.sgml: Fix typo.
	* setup2.sgml: Extend text about problems with symlinks.
@
text
@d59 1
a59 1
not evaluated.  The noticable exception is the file system type
d326 1
a326 1
to use these files with native Win32 aqpplications...</para>
d335 2
a336 2
all of them are removed before the file is created.  This restriction does
only affect native Win32 applications.  Cygwin applications can create and
d361 3
a363 3
<para>For instance, there are no chinese characters in the ISO-8859-1
character set.  So, converting a filename containing a chinese character
to ISO-8859-1 leaves you with a wrongly converted filename, for instance
d368 1
a368 1
chinese character, but to a simple question mark instead.  This in turn
d371 1
a371 1
<note><para>To avoid this scenario altogether, just use always UTF-8 as
d454 1
a454 1
or <command>net</command>.  To ease the pain the <filename>/cygdrive</filename>
d463 1
a463 1
the subdirs and filenames under /proc/registry, /proc/registry32
d550 6
a555 5
CD/DVD drives the Windows "Disk management" (part of the "Computer Management"
console) shoes the mapping "Disk 0" is \device\harddisk0, "CD-ROM 2" is
\device\cdrom2.  Another place to find this mapping is the "Device Management"
console.  Disks have a "Location" number, tapes have a "Tape Symbolic Name",
etc.  Unfortunately the places where to find this information is not very
d560 1
a560 1
Cygwin to find out the mapping.  <filename>/proc/partitions</filename>
@


1.36
log
@	* pathnames.sgml: Add a note that ASCII SO handling isn't foolproof
	under all circumstances.
@
text
@d294 1
a294 1
/etc directory must be parallel to the directory in which the cygwn1.dll
d297 2
a298 3
the above list, including the directory
<filename>/etc/fstab.d</filename>is allowed to be a Cygwin symlink
either.</para>
@


1.35
log
@	* new-features.sgml: Add missing GB2312 and eucKR character sets.
	* pathnames.sgml: Change "DOS devices" title to "Invalid filenames"
	and rephrase that section.
	Add section "Filenames with unusual (foreign) characters".
	Fix an emphasis.
	* setup-net.sgml: Integrate setup-locale section.
	* setup2.sgml: Add locale variables to section "Environment Variables".
	Add section "Internationalization".
@
text
@d391 6
a396 1
<para>Again, by using UTF-8 you can avoid this problem entirely.</para>
@


1.34
log
@	* pathnames.sgml: Try to be more clear explain raw devices.
@
text
@d314 1
a314 1
<sect2 id="pathnames-dosdevices"><title>DOS devices</title>
d317 2
a318 2
under Cygwin since release 1.7.0.  There are a couple of rules which
apply to Windows filenames.  First of all, DOS device names like
d321 7
a327 3
cannot be used in a native Win32 application, even with an
extension (<filename>prn.txt</filename>).  Cygwin can handle files with
these names just fine.</para>
d332 1
a332 1
<title>Special characters in filenames</title>
d353 42
d418 1
a418 1
(and *only* on these systems) you don't have to reboot to bring it
@


1.33
log
@	* pathnames.sgml: Remove reference to managed mountpoints in mount
	entry example.
@
text
@d424 1
a424 1
If you want to be able to see all devices in
d428 3
a430 1
script.
d496 33
a528 2
\device\cdrom0 and the first tape drive is \device\tape0.  The mapping
to the POSIX /dev namespace is as follows:
d532 6
a537 4
/dev/st0	\device\tape0, rewind
/dev/nst0	\device\tape0, no-rewind
/dev/st1	\device\tape1
/dev/nst1	\device\tape1
d542 2
a543 2
/dev/fd0	\device\floppy0
/dev/fd1	\device\floppy1
d547 2
a548 2
/dev/sr0	\device\cdrom0
/dev/sr1	\device\cdrom1
d552 2
a553 2
/dev/scd0	\device\cdrom0
/dev/scd1	\device\cdrom1
d557 2
a558 2
/dev/sda	\device\harddisk0\partition0	(whole disk)
/dev/sda1	\device\harddisk0\partition1	(first partition)
d560 1
a560 1
/dev/sda15	\device\harddisk0\partition15	(fifteenth partition)
d562 2
a563 2
/dev/sdb	\device\harddisk1\partition0
/dev/sdb1	\device\harddisk1\partition1
d567 2
a568 2
/dev/sddx	\device\harddisk127\partition0
/dev/sddx1	\device\harddisk127\partition1
d570 1
a570 1
/dev/sddx15	\device\harddisk127\partition15
@


1.32
log
@	* pathnames.sgml: Add a cygdrive section.
@
text
@d136 2
a137 2
  <para>A mount point for a managed, textmode mount:</para>
  <screen>C:/foo /bar/baz ntfs text,managed 0 0</screen>
d144 2
a145 2
  <para>A mount point for a remote directory:</para>
  <screen>//server/share/subdir /srv/subdir smbfs binary 0 0</screen>
@


1.31
log
@	* pathnames.sgml: Replace "binmode" with new "binary" output of mount.
@
text
@d91 6
a96 1
<para>Normally, files ending in certain extensions (.exe, .com, .bat, .btm,
d111 8
a118 5
<para>Note that nouser mount points are not overridable by a later call
to <command>mount</command>.  This is only possible for user mount points. 
Mount points given in <filename>/etc/fstab</filename> are by default nouser
mount points, unless you specify the option user.  In contrast, all mount
points in the user specific fstab file are user mount points.</para>
d191 42
a232 9
<para>Whenever Cygwin cannot use any of the existing mounts to convert
from a particular Win32 path to a POSIX one, Cygwin will
automatically default to an imaginary mount point under the default POSIX
path <filename>/cygdrive</filename>.  For example, if Cygwin accesses
<filename>Z:/foo</filename> and the Z drive is not currently in the
mount table, then <filename>Z:/</filename> would be automatically
converted to <filename>/cygdrive/Z</filename>.  The default
prefix of <filename>/cygdrive</filename> may be changed in the fstab file
as outlined above.</para>
@


1.30
log
@	* pathnames.sgml: Rephrase the "Case sensitive filenames" chapter
	slightly.
@
text
@d167 6
a172 6
f:/cygwin/bin on /usr/bin type system (binmode)
f:/cygwin/lib on /usr/lib type system (binmode)
f:/cygwin on / type system (binmode)
e:/src on /usr/src type system (binmode)
c: on /cygdrive/c type user (binmode,noumount)
e: on /cygdrive/e type user (binmode,noumount)
@


1.29
log
@	* pathnames.sgml: Add requirement for world-readability of special
	/etc files.
@
text
@d317 1
a317 1
and reboot.  For that reason, case-sensitivity is not supported by Cygwin,
d332 2
a333 1
into effect.</para>
d337 1
a337 1
Note that when installing Microsoft's Services For Unix (SFU), you're asked if
d355 2
a356 1
/etc/fstab, or your /etc/fstab.d/$USER file.</para>
d358 11
a368 13
<para>For a start, it might be best to switch the cygdrive path to
case-insensitivity, because the default Windows $PATH variable is not
always using the correct case by default.  As a result, your shell will
claim that it can't find Windows commands like <command>attrib</command>
or <command>net</command>.  Here's an example how you can switch the
cygdrive prefix to case-insensitivity:</para>

<example id="mount-caseinsensitive">
<title>Example mount point to enforce case-insensitivity on cygdrive paths</title>
<screen>
none /cygdrive cygdrive binary,posix=0 0 0
</screen>
</example>
@


1.28
log
@	* pathnames.sgml: Add section about accessing /etc files.
@
text
@d265 6
@


1.27
log
@	* gcc.sgml: Use 'bash$' as Cygwin prompt throughout.
	* gdb.sgml: Ditto.
	* pathnames.sgml: Ditto.  Fix the @@ expansion example.
@
text
@d228 40
a267 2
<sect2 id="pathnames-dosdevices">
<title>DOS devices</title>
@


1.26
log
@* pathnames.sgml: Convert some backslashes to slashes.
@
text
@d166 1
a166 1
<prompt>bash-3.2$</prompt> <userinput>mount</userinput>
d482 1
a482 1
<prompt>C:/&gt;</prompt> <userinput>ls * </userinput>
d484 1
a484 1
<prompt>C:/&gt;</prompt> <userinput>ls -i a a.exe</userinput>
d486 1
a486 1
<prompt>C:/&gt;</prompt> <userinput>ls -i b b.exe</userinput>
d580 1
@


1.25
log
@	* pathnames.sgml: New section for /proc/registry. Document registry
	name encoding.
@
text
@d167 4
a170 4
f:\cygwin\bin on /usr/bin type system (binmode)
f:\cygwin\lib on /usr/lib type system (binmode)
f:\cygwin on / type system (binmode)
e:\src on /usr/src type system (binmode)
d187 2
a188 2
<filename>Z:\foo</filename> and the Z drive is not currently in the
mount table, then <filename>Z:\</filename> would be automatically
d204 1
a204 1
<filename>c:\cygwin\bin</filename> to <filename>/bin</filename>, if
d482 1
a482 1
<prompt>C:\&gt;</prompt> <userinput>ls * </userinput>
d484 1
a484 1
<prompt>C:\&gt;</prompt> <userinput>ls -i a a.exe</userinput>
d486 1
a486 1
<prompt>C:\&gt;</prompt> <userinput>ls -i b b.exe</userinput>
@


1.24
log
@	* pathnames.sgml: Move description for (cyg,not)exec mount options
	from utils.sgml here.  Clarify nouser mount points.
@
text
@d513 17
a529 5
is <filename>/proc/registry</filename>, which displays the Windows
registry with each <literal>KEY</literal> as a directory and each
<literal>VALUE</literal> as a file. As anytime you deal with the
Windows registry, use caution since changes may result in an unstable
or broken system.  There are additionally subdirectories called
d537 23
a559 4
The Cygwin <filename>/proc</filename> is not as complete as the
one in Linux, but it provides significant capabilities. The
<systemitem>procps</systemitem> package contains several utilities
that use it.
@


1.23
log
@	* Revamp documentation for Cygwin 1.7, part 1.
@
text
@d91 15
d107 4
a110 4
to mount(2).  This is only possible for user mount points.  Mount points
are by default nouser mount points, unless you specify the option user. 
In contrast, all mount points in the user specific fstab file are user
mount points.</para>
@


1.22
log
@* pathnames.xml: Fix a typo.
@
text
@d3 1
a3 1
<sect2><title>Introduction</title>
d27 106
a132 35
<para>The <command>mount</command> utility program is used to
to map Win32 drives and network shares into Cygwin's internal POSIX
directory tree.  This is a similar concept to the typical UNIX mount
program.  For those people coming from a Windows background, the
<command>mount</command> utility is very similar to the old DOS
<command>join</command>, in that it makes your drive letters appear as
subdirectories somewhere else.</para>

<para>The mapping is stored in the current user's Cygwin
<firstterm>mount table</firstterm> in the Windows registry so that the
information will be retrieved next time the user logs in.  Because it
is sometimes desirable to have system-wide as well as user-specific
mounts, there is also a system-wide mount table that all Cygwin users
inherit.  The system-wide table may only be modified by a user with
the appropriate privileges (Administrator privileges in Windows
NT).</para>

<para>The current user's table is located under
"HKEY_CURRENT_USER/Software/Cygnus Solutions/Cygwin/mounts
v&lt;version&gt;"
where &lt;version&gt; is the latest registry version associated with
the Cygwin library (this version is not the same as the release
number).  The system-wide table is located under the same subkeys
under HKEY_LOCAL_SYSTEM.  The user mount table takes precedence over 
the system-wide table if a path is mounted in both.  This includes the
setting of the cygdrive prefix.</para>

<para>The <command>mount</command> command can set the POSIX root
<filename>/</filename> to any directory in the Windows file system.
In absence of such a mount, Cygwin maps <filename>/</filename> to the
root of the current Windows working directory (for example, 
<filename>H:\</filename> or <filename>\\computer\share</filename>). 
Normally Cygwin's <command>setup.exe</command> creates the initial
mount point for the POSIX root. 
</para>
d144 3
a146 8
<para>Invoking <command>mount</command> without any arguments displays
Cygwin's current set of mount points.
In the following example, the C
drive is the POSIX root and D drive is mapped to
<filename>/d</filename>.  Note that in this case, the root mount is a
system-wide mount point that is visible to all users running Cygwin
programs, whereas the <filename>/d</filename> mount is only visible
to the current user.</para>
d148 1
a148 1
<example>
d151 1
a151 1
<prompt>c:\&gt;</prompt> <userinput>mount</userinput>
d163 4
a166 3
them.  See <xref linkend="mount"></xref> and <xref linkend="umount"></xref> for more
information on how to use these utilities to set up your Cygwin POSIX
file system.</para>
d175 2
a176 9
prefix of <filename>/cygdrive</filename> may be changed (see the
<xref linkend="mount"></xref> for more information).</para>

<para>It is possible to assign some special attributes to each mount
point.  Automatically mounted partitions are displayed as "auto"
mounts.  Mounts can also be marked as either "textmode" or "binmode"
-- whether text files are read in the same manner as binary files by
default or not (see <xref linkend="using-textbinary"></xref> for more
information on text and binary modes.</para>
d180 1
a180 1
<sect2><title>Additional Path-related Information</title>
d213 2
a214 1
<sect2> <title>DOS devices</title>
d216 3
a218 2
<para>Windows filenames invalid under Windows are also invalid under
Cygwin.  This means that base filenames such as 
d221 95
a315 7
cannot be used in a regular Cygwin Windows or POSIX path, even with an
extension (<filename>prn.txt</filename>). However the special names can be
used as filename extensions (<filename>file.aux</filename>). You can use
the special names as you would under DOS, for example you can print on your
default printer with the command <command>cat filename > PRN</command>
(make sure to end with a Form Feed).
</para>
d319 1
a319 1
<sect2> <title>POSIX devices</title>
d330 42
a372 10
Cygwin supports the following devices commonly found on POSIX systems:
<filename>/dev/dsp</filename>, <filename>/dev/null</filename>, 
<filename>/dev/zero</filename>, <filename>/dev/console</filename>,
<filename>/dev/tty</filename>, <filename>/dev/ttym</filename>, 
<filename>/dev/ttyX</filename>, <filename>/dev/ttySX</filename>, 
<filename>/dev/pipe</filename>, <filename>/dev/port</filename>, 
<filename>/dev/ptmx</filename>, <filename>/dev/mem</filename>,
<filename>/dev/random</filename>, and <filename>/dev/urandom</filename>.
Some other POSIX devices, such as 
<filename>/dev/kmem</filename>, are planned for development.
a373 17
<filename>/dev/comX</filename> (the serial ports, starting with 
<filename>COM1</filename> which is the same as <filename>ttyS0</filename>),
<filename>/dev/conin</filename> (Windows <filename>CONIN$</filename>),
<filename>/dev/conout</filename> (Windows <filename>CONOUT$</filename>),
<filename>/dev/clipboard</filename> (the Windows clipboard, currently
text only), and <filename>/dev/windows</filename> (the Windows message
queue).
</para>

<para>Windows NT/W2K/XP additionally support raw devices like floppies,
disks, partitions and tapes.  These are accessed from Cygwin applications
using POSIX device names which are supported in two different ways.
</para>

<para>Up to Cygwin 1.3.3 the only way to access those devices was
to mount the Win32 device names to a POSIX device name but this usage
is discouraged since Cygwin 1.3.4 and only kept for backward compatibility.
d376 11
d388 3
a390 3
Beginning with Cygwin 1.3.4, raw devices are accessible by Cygwin processes
using fixed POSIX device names.  These fixed POSIX device names are generated
using a direct conversion from the POSIX namespace to the internal NT namespace.
d394 2
a395 1
\device\cdrom0 and the first tape drive is \device\tape0.
a397 3
<para>The new fixed POSIX names are mapped to NT internal devices as
follows:</para>

d402 1
d404 2
d410 6
d420 1
a420 4

/dev/sr0	\device\cdrom0
/dev/sr1	\device\cdrom1
...
d432 2
a433 2
/dev/sdl	\device\harddisk11\partition0
/dev/sdl1	\device\harddisk11\partition1
d435 1
a435 1
/dev/sdl15	\device\harddisk11\partition15
d444 2
a445 2
ln -s /dev/scd0 /dev/cdrom
ln -s /dev/nst0  /dev/tape
a448 16
<warning>
<para>
Note that you can't use the mount table to map from a fixed device name
to your own device name or to map from internal NT device name to
your own device name.  Also using symbolic links to map from the internal
NT device name to your own device name will not do what you want.
The following three examples will not work as expected:
</para>

<screen>
mount -f -b /dev/nst0 /dev/tape     # DOES NOT WORK
mount -f -b /device/tape0 /dev/tape # DOES NOT WORK
ln -s /device/tape0 /dev/tape       # DOES NOT WORK
</screen>
</warning>

d451 1
a451 1
<sect2><title>The .exe extension</title>
d453 1
a453 1
<para> Executable program filenames end with <filename>.exe</filename>
a485 9
<para>Unfortunately, the <command>install</command> and
<command>strip</command> commands do distinguish between
<filename>filename</filename> and <filename>filename.exe</filename>. They
fail when working on a non-existing <filename>filename</filename> even if
<filename>filename.exe</filename> exists, thus breaking some makefiles.
This problem can be solved by writing <command>install</command> and
<command>strip</command> shell scripts to provide the extension ".exe"
when needed.
</para>
d488 1
a488 1
<sect2><title>The /proc filesystem</title> 
d502 6
a507 1
or broken system.
d517 1
a517 1
<sect2><title>The @@pathnames</title> 
d529 1
a529 1
<example><title> Using @@pathname</title>
@


1.21
log
@	* pathnames.sgml: Change text for the order in which executables
	are evaluated.
@
text
@d271 1
a271 1
Note that you can't use the mount table to map from fixed device name
@


1.20
log
@Slight rearragement
@
text
@d311 5
a315 3
<filename>myprog.exe</filename> coexist in a directory, the program
has precedence and is selected for execution of
<command>myprog</command>.</para>
@


1.19
log
@	* pathnames.sgml (mount-table): Indicate that user-specific
	mounts override system-wide.
@
text
@d54 7
a60 5
<para>Since Windows uses drive letters instead of a single filesystem
root, the POSIX root <filename>/</filename> must be set to a directory
in the Windows file system using the <command>mount</command> command.
Without a <filename>/</filename> mount, Cygwin processes cannot
distinguish between the Windows CurrentDrive and SystemDrive.
@


1.18
log
@* pathnames.sgml: Clarify binmode/textmode behavior slightly.
* textbinary.sgml: Ditto.
@
text
@d50 3
a52 1
under HKEY_LOCAL_SYSTEM.</para>
@


1.17
log
@Update Makefile to use xmlto
@
text
@d20 1
a20 1
uses this mapping to translate between Win32 and POSIX paths as
d41 1
a41 1
the appropriate priviledges (Administrator priviledges in Windows
d59 1
a59 1
<para>Whenever Cygwin generates a POSIX path from a Win32 one, it uses
d63 5
a67 1
<filename>C:/foo/bar</filename> to <filename>/c/foo/bar</filename>.</para>
@


1.16
log
@	* .sgml: Cleanup markup for XML validity.
@
text
@d52 9
a60 5
<para>By default, the POSIX root <filename>/</filename> points to the
system partition but it can be relocated to any directory in the
Windows file system using the <command>mount</command> command.
Whenever Cygwin generates a POSIX path from a Win32 one, it uses the
longest matching prefix in the mount table.  Thus, if
@


1.15
log
@	* pathnames.sgml: Remove /dev/kmem from the supported POSIX
	device list.

	* cygwinenv.sgml: Fix typo in check_case description.
@
text
@d36 1
a36 1
<FirstTerm>mount table</FirstTerm> in the Windows registry so that the
d85 1
a85 1
them.  See <Xref Linkend="mount"> and <Xref Linkend="umount"> for more
d97 1
a97 1
<Xref Linkend="mount"> for more information).</para>
d103 1
a103 1
default or not (see <Xref Linkend="using-textbinary"> for more
d112 1
a112 1
<Xref Linkend="cygpath"> for the details.</para>
d114 2
a115 2
<para>The <EnVar>HOME</EnVar>, <EnVar>PATH</EnVar>, and
<EnVar>LD_LIBRARY_PATH</EnVar> environment variables are automatically
@


1.14
log
@	* pathnames.sgml: Fix /dev/srX description.
@
text
@d175 1
a175 2
<filename>/dev/ptmx</filename>, <filename>/dev/kmem</filename>,
<filename>/dev/mem</filename>,
d177 2
@


1.13
log
@2004-03-28  Joshua Daniel Franklin  <joshuadfranklin@@yahoo.com>

        * how-programming.texinfo: Add note about gcc .lib linking.
        * pathnames.sgml: Mention create_devices.sh for /dev/ creation.
@
text
@d225 4
a251 1
ln -s /dev/scd2 /dev/sr2      # actually srX are real device nodes on Linux but who cares.
@


1.12
log
@2004-03-26  Joshua Daniel Franklin  <joshuadfranklin@@yahoo.com>
        * cygwinenv.sgml: Add example for CYGWIN=error_start.
        * pathnames.sgml: Update list of /dev/ devices.
@
text
@d162 5
d175 2
a176 1
<filename>/dev/ptmx</filename>, <filename>/dev/mem</filename>,
d184 2
a185 2
text only), and
<filename>/dev/windows</filename> (the Windows message queue).
d263 3
a265 3
mount -f -b /dev/nst0 /dev/tape 
mount -f -b /device/tape0 /dev/tape
ln -s /device/tape0 /dev/tape
d273 5
a277 5
<para> Executable program filenames end with .exe but the .exe need
not be included in the command, so that traditional UNIX names can be
used.  However, for programs that end in ".bat" and ".com", you cannot
omit the extension.
</para>
@


1.11
log
@
2004-01-24  Joshua Daniel Franklin  <joshuadfranklin@@yahoo.com>
	* cygwinenv.sgml: Cleanup minor markup problems.
	* dll.sgml: Cleanup minor markup problems.
	* effectively.sgml: Cleanup minor markup problems.
	* gcc.sgml: Cleanup minor markup problems.
	* ntsec.sgml: Cleanup minor markup problems.
	* pathnames.sgml: Cleanup minor markup problems.
	* setup-net.sgml: Cleanup minor markup problems.
	* textbinary.sgml: Cleanup minor markup problems.
	* windres.sgml: Cleanup minor markup problems.
@
text
@d159 2
a160 8
directory as it is simulated within Cygwin automatically.
It supports the following devices: <filename>/dev/null</filename>,
<filename>/dev/zero</filename>, <filename>/dev/tty</filename>,
<filename>/dev/ttyX</filename>, <filename>/dev/ptmx</filename>,
<filename>/dev/comX</filename> (the serial ports),
<filename>/dev/windows</filename> (the windows message queue),
<filename>/dev/random</filename> and <filename>/dev/urandom</filename>.
These devices cannot be seen with the command <command>ls /dev</command>
d163 18
d247 1
d257 1
a257 1
mount -f -b /dev/nst0 /dev/tape
d261 1
@


1.10
log
@2004-01-11  Joshua Daniel Franklin <joshuadfranklin@@yahoo.com>

        * Makefile.in: Add new target for single-file User's Guide, use new
        cygwin.dsl for output.
        * cygwin.dsl: New file, DSSSL stylesheet for custom Cygwin output.
        * cygwin-api.in.sgml: Update to DocBook SGML 4.2 DTD.
        * cygwin-ug-net.in.sgml: Update to DocBook SGML 4.2 DTD.
        * cygwin-ug.in.sgml: Update to DocBook SGML 4.2 DTD.
        * cygwinenv.sgml: Correct some tags. Add description of default values
        to ntsec, export, and error_start items.
        * dll.sgml: Add explanation of cyg prefix for DLLs.
        * effectively.sgml: Use systemitem tag for names of Cygwin packages.
        * how-programming.texinfo: Add example to FAQ entry.
        * pathnames.sgml: Add discussion of /proc filesystem.
	* setup-net.sgml: Correct some typos and grammar.
@
text
@d157 1
a157 1
<sect2> <Title>POSIX devices</title>
@


1.9
log
@	* pathnames.sgml: Remove description how to mount raw devices and
	dicourage it.  Desparately try to make usage of raw devices a bit
	clearer.
@
text
@d295 24
@


1.8
log
@* pathnames.sgml: Use correct registry key.  Clarify '@@' operation.
* ntsec.sgml: Reword references to "ntsec patch".
@
text
@a172 2
Up to 1.3.3, Cygwin only uses Win32 device names, since 1.3.4
it additionally uses NT internal device names.
d175 3
a177 2
<para>Up to Cygwin 1.3.3 the only way to access those devices is
to mount the Win32 device names to a POSIX device name.
d181 3
a183 47
The Win32 device name for a partition is the drive letter
with leading <filename>\\.\</filename>, so the floppy would be
<filename>\\.\A:</filename>, the first partition typically
<filename>\\.\C:</filename>. Complete drives (except floppies and CD-ROMS
which are supported as partitions only) are named
<filename>\\.\PHYSICALDRIVEx</filename>. The <literal>x</literal>
is the drive number which you can check in the disk manager.
Each drive line has prepended the text "Disk x".
</para>

<para>To access tape drives the Win32 file name <filename>\\.\TAPEx</filename>
is used. For example the first installed tape device is named
<filename>\\.\tape0</filename>.
</para>

<para>
The naming convention is simple: The name of the POSIX device has to begin with
<filename>/dev/</filename> and the rest is as you like. The only
exception are tape devices. To identify if the tape device is
used as a rewind or a no-rewind device the name must not begin with
<literal>n</literal> (rewind) or has to begin with <literal>n</literal>
(no-rewind).
</para>

<para>Some examples:</para>

<screen>
mount -b //./A: /dev/fd0              # mount floppy as raw block special
mount -b //./physicaldrive1 /dev/hdb  # mount "Disk 1"
mount -b //./tape0 /dev/st0           # mount first tape as the rewind device...
mount -b //./tape0 /dev/nst0          # ...and as the no-rewind device
</screen>

<para>Note the usage of the <literal>-b</literal> option. It is best to
include the -b option when mounting these devices to ensure that all
file I/O is in "binary mode".
</para>

<para>
Since Cygwin 1.3.4 raw devices are accessible from inside of Cygwin processes
using fixed POSIX device names.  That means, you don't have to mount the devices
anymore which results in a more cleaner mount table.
</para>

<para>
These new fixed POSIX device names are generated using a direct conversion
from the POSIX namespace to the internal NT namespace.
d230 2
a231 1
ln -s /dev/st0  /dev/tape
d238 3
a240 1
your own device name.  The following two examples will not work:
d244 3
a246 2
mount -s -f -b /dev/st0 /dev/tape
mount -s -f -b /device/tape0 /dev/tape
@


1.7
log
@Cleanup copyrights and Cygnus'isms throughout.
* setup.sgml: Nuke ancient instructions.
@
text
@d45 1
a45 1
"HKEY_CURRENT_USER/Software/Red Hat, Inc./Cygwin/mounts
d353 1
a353 1
<prompt>bash$</prompt> <userinput>/bin/echo @@mylist</userinput>
a354 3
<prompt>bash$</prompt> <userinput>rm mylist</userinput>
<prompt>bash$</prompt> <userinput>/bin/echo @@mylist</userinput>
@@mylist
@


1.6
log
@        * pathnames.sgml: Cleanup raw device text to be more coherent.
@
text
@d45 1
a45 1
"HKEY_CURRENT_USER/Software/Cygnus Solutions/Cygwin/mounts
d73 7
a79 4
<prompt>c:\cygnus\&gt;</prompt> <userinput>mount</userinput>
Device           Directory           Type        Flags
D:               /d                  user        textmode
C:               /                   system      textmode
a107 37
<sect2><title>Cygwin Mount Table Strategies</title>

<para>Which set of mounts is right for a given Cygwin user depends
largely on how closely you want to simulate a POSIX environment,
whether you mix Windows and Cygwin programs, and how many drive
letters you are using.  If you want to be very POSIX-like (assuming
"CygwinRoot" is the top directory of your Cygwin distribution), you may
want to do something like this:</para>

<example><title>POSIX-like mount setup</title>
<screen>
<prompt>C:\&gt;</prompt> <userinput>mount c:\Cygnus\CygwinRoot /</userinput>
<prompt>C:\&gt;</prompt> <userinput>mount c:\ /c</userinput>
<prompt>C:\&gt;</prompt> <userinput>mount d:\ /d</userinput>
<prompt>C:\&gt;</prompt> <userinput>mount e:\ /cdrom</userinput>
</screen>
</example>

<para>However, if you mix Windows and Cygwin programs a lot, you might
want to create an "identity" mapping, so that conversions between the
two (see <Xref Linkend="cygpath">) can be eliminated:</para>

<example><title>Identity mount setup</title>
<screen>
<prompt>C:\&gt;</prompt> <userinput>mount c:\ /</userinput>
<prompt>C:\&gt;</prompt> <userinput>mount d:\foo /foo</userinput>
<prompt>C:\&gt;</prompt> <userinput>mount d:\bar /bar</userinput>
<prompt>C:\&gt;</prompt> <userinput>mount e:\grill /grill</userinput>
</screen>
</example>

<para>You'd have to repeat this for all top-level subdirectories on
all drives, but then you'd always have the top-level directories
available as the same names in both systems.</para>

</sect2>

d116 4
a119 4
converted from Win32 format to POSIX format (e.g. from
<filename>C:\cygnus\cygwin-b20\H-i586-cygwin32\bin</filename> to
<filename>/bin</filename>, if there was a mount from that Win32 path to
that POSIX path) when a Cygwin process first starts.</para>
d308 1
a308 1
<prompt>C:\Cygnus\&gt;</prompt> <userinput>ls * </userinput>
d310 1
a310 1
<prompt>C:\Cygnus\&gt;</prompt> <userinput>ls -i a a.exe</userinput>
d312 1
a312 1
<prompt>C:\Cygnus\&gt;</prompt> <userinput>ls -i b b.exe</userinput>
d350 2
a351 2
<prompt>/Cygnus$</prompt> <userinput>echo  'This   is   "a     long"  line' > mylist</userinput>
<prompt>/Cygnus$</prompt> <userinput>echo @@mylist</userinput>
d353 1
a353 1
<prompt>/Cygnus$</prompt> <userinput>/bin/echo @@mylist</userinput>
d355 2
a356 2
<prompt>/Cygnus$</prompt> <userinput>rm mylist</userinput>
<prompt>/Cygnus$</prompt> <userinput>/bin/echo @@mylist</userinput>
@


1.5
log
@	* pathnames.sgml: Add description for new fixed device paths.
@
text
@d204 5
a208 5
<para>However, on Windows NT/W2K there are different devices which are
supported but have to be created as mount points. These are the raw block
special devices and tape devices. These devices need a special handling
which is enabled through the mount points. The usage of the native Windows
device names is not sufficent.
d211 6
a216 2
<para>NT/W2K supports raw block special device support for partitions
and drives. The Win32 device name for a partition is the drive letter
d219 1
a219 1
<filename>\\.\C:</filename>. Complete drives (except floppies
d226 3
a228 3
<para>To access tape drives, NT/W2K uses the Win32 file name
<filename>\\.\TAPEx</filename>. For example the first installed tape device
is named <filename>\\.\tape0</filename>.
d231 2
a232 4
<para>Up to Cygwin 1.3.3 this is the only way to use those devices.
To access them you have to mount them and you have to use the posix
name of the device to be recognized by Cygwin.
The naming convention is simple: The name has to begin with
d255 8
a262 3
NT knows another way of accessing these devices. In the internal NT
namespace the devices are using different names.  The Win32 names are
only a sort of symbolic link to the NT internal device name.
a266 6
</para>

<para>
Since Cygwin 1.3.4 these devices are accessible from inside of Cygwin processes
using fixed device names.  That means, you don't have to mount the devices
anymore which results in a more cleaner mount table.
@


1.4
log
@Added missing article
@
text
@d212 1
a212 1
and drives. The device names for partitions is the drive letter
d222 1
a222 1
<para>To access tape drives, NT/W2K uses the file name
d227 3
a229 2
<para>To access those devices you have to mount them and you have to
use the posix name of the device to be recognized by Cygwin.
d251 71
@


1.3
log
@        * pathnames.sgml: Add documentation about raw block special
        devices and tape devices to the "POSIX devices" chapter.
@
text
@d232 1
a232 1
used as rewind or no-rewind device the name must not begin with
@


1.2
log
@clean up SGML for latest version of jade/docbook
@
text
@d129 1
a129 1
<prompt>C:\&gt;</prompt> <userinput>mount c:\ \</userinput>
d195 5
a199 2
<filename>/dev/tty</filename> and
<filename>/dev/comX</filename> (the serial ports).
d202 47
a248 4
<comment>
FIXME: Are there other devices under /dev. What about the funny ones
mounted by default, such as /dev/fd1. What do they really do?
</comment>
@


1.1
log
@Initial revision
@
text
@d112 1
a112 1
want to do something like this:
d189 2
d205 2
d261 1
a261 1
<command>echo</command> and of the program <command>/bin/echo</command>.
@


1.1.1.1
log
@import winsup-2000-02-17 snapshot
@
text
@@
