head	1.14;
access;
symbols
	cygwin-1_7_35-release:1.14
	cygwin-1_7_34-release:1.14
	cygwin-1_7_33-release:1.14
	cygwin-1_7_32-release:1.14
	cygwin-1_7_31-release:1.14
	cygwin-1_7_30-release:1.14
	cygwin-1_7_29-release:1.14
	cygwin-1_7_29-release-branchpoint:1.14.0.2
	cygwin-pre-user-db:1.14
	cygwin-1_7_28-release:1.14
	cygwin-1_7_27-release:1.14
	cygwin-1_7_26-release:1.14
	cygwin-1_7_25-release:1.13
	cygwin-1_7_24-release:1.13
	cygwin-1_7_23-release:1.13
	cygwin-1_7_22-release:1.13
	cygwin-1_7_21-release:1.13
	cygwin-1_7_20-release:1.13
	cygwin-1_7_19-release:1.13
	cygwin-64bit-postmerge:1.13
	cygwin-64bit-premerge-branch:1.12.0.8
	cygwin-64bit-premerge:1.12
	cygwin-1_7_18-release:1.12
	post-ptmalloc3:1.12.6.1
	pre-ptmalloc3:1.12.6.1
	cygwin-1_7_17-release:1.12
	cygwin-64bit-branch:1.12.0.6
	cygwin-1_7_16-release:1.12
	cygwin-1_7_15-release:1.12
	cygwin-1_7_14_2-release:1.12
	cygwin-1_7_14-release:1.12
	cygwin-1_7_12-release:1.12
	cygwin-1_7_11-release:1.12
	cygwin-1_7_10-release:1.12
	signal-rewrite:1.12.0.4
	pre-notty:1.12
	cygwin-1_7_9-release:1.12
	cv-post-1_7_9:1.12.0.2
	cygwin-1_7_8-release:1.12
	cygwin-1_7_7-release:1.12
	cygwin-1_7_5-release:1.12
	cygwin-1_7_4-release:1.12
	cygwin-1_7_3-release:1.12
	cygwin-1_7_2-release:1.12
	fifo_doover3:1.11.0.4
	cygwin-1_7_1-release:1.11
	prefifo:1.11
	cv-branch-2:1.11.0.2
	pre-ripout-set_console_state_for_spawn:1.11
	EOL_registry_mounts:1.11
	preoverlapped:1.11
	drop_9x_support_start:1.8
	cr-0x5f1:1.8.0.24
	cv-branch:1.8.0.22
	pre-ptymaster-archetype:1.8
	cr-0x3b58:1.8.0.20
	cr-0x5ef:1.8.0.18
	after-mmap-privanon-noreserve:1.8
	after-mmap-revamp:1.8
	before-mmap-revamp:1.8
	cgf-more-exit-sync:1.8
	post_wait_sig_exit:1.8
	pre_wait_sig_exit:1.8
	reparent-point:1.8
	noreparent:1.8.0.16
	cr-0x5e6:1.8.0.14
	cr-0x9e:1.8.0.12
	cr-0x9d:1.8.0.10
	cgf-deleteme:1.8.0.8
	pre-sigrewrite:1.8
	corinna-01:1.8
	cr-0x9c:1.8.0.6
	cr-0x9b:1.8.0.4
	cr-0x99:1.8
	Z-emcb-cygwin_daemon:1.8.0.2
	w32api-2_2:1.5
	mingw-runtime-2_4:1.5
	pre-cgf-merge:1.8
	cgf-dev-branch:1.5.0.4
	predaemon:1.2
	Z-cygwin_daemon_merge_HEAD:1.4
	cygwin_daemon_merge_HEAD:1.2
	cygwin_daemon:1.2.0.2
	Z-cygwin_daemon_merge-new_HEAD:1.4
	pregp02r1:1.1.0.2;
locks; strict;
comment	@ * @;


1.14
date	2013.11.25.11.38.08;	author corinna;	state Exp;
branches;
next	1.13;

1.13
date	2013.04.23.09.44.35;	author corinna;	state Exp;
branches;
next	1.12;

1.12
date	2010.02.26.09.36.21;	author corinna;	state Exp;
branches
	1.12.6.1;
next	1.11;

1.11
date	2007.03.13.13.22.00;	author corinna;	state Exp;
branches;
next	1.10;

1.10
date	2007.03.06.14.56.44;	author corinna;	state Exp;
branches;
next	1.9;

1.9
date	2007.03.06.14.48.25;	author corinna;	state Exp;
branches;
next	1.8;

1.8
date	2003.08.26.07.45.38;	author corinna;	state Exp;
branches;
next	1.7;

1.7
date	2003.05.11.00.10.11;	author cgf;	state Exp;
branches;
next	1.6;

1.6
date	2003.04.01.16.11.41;	author corinna;	state Exp;
branches;
next	1.5;

1.5
date	2002.12.12.03.09.38;	author cgf;	state Exp;
branches
	1.5.4.1;
next	1.4;

1.4
date	2002.06.06.15.35.08;	author corinna;	state Exp;
branches;
next	1.3;

1.3
date	2002.06.03.17.44.09;	author corinna;	state Exp;
branches;
next	1.2;

1.2
date	2002.02.25.17.47.51;	author corinna;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2002.02.09.20.39.55;	author corinna;	state Exp;
branches;
next	;

1.12.6.1
date	2012.08.13.20.04.38;	author corinna;	state Exp;
branches;
next	;

1.5.4.1
date	2003.04.03.01.32.33;	author cgf;	state Exp;
branches;
next	1.5.4.2;

1.5.4.2
date	2003.05.26.19.39.07;	author cgf;	state Exp;
branches;
next	1.5.4.3;

1.5.4.3
date	2003.08.27.20.19.56;	author cgf;	state Exp;
branches;
next	;

1.2.2.1
date	2002.02.28.12.53.30;	author rbcollins;	state Exp;
branches;
next	1.2.2.2;

1.2.2.2
date	2002.06.13.14.34.19;	author rbcollins;	state Exp;
branches;
next	;


desc
@@


1.14
log
@	Throughout, keep function definitions and declarations in sync with
	newlib in terms of C99 "restrict" keyword.
@
text
@/* cygwin/stat.h

   Copyright 2002, 2007, 2010, 2013 Red Hat Inc.
   Written by Corinna Vinschen <corinna@@vinschen.de>

This file is part of Cygwin.

This software is a copyrighted work licensed under the terms of the
Cygwin license.  Please consult the file "CYGWIN_LICENSE" for
details. */

#ifndef _CYGWIN_STAT_H
#define _CYGWIN_STAT_H

#ifdef __cplusplus
extern "C" {
#endif

struct stat
{
  dev_t         st_dev;
  ino_t         st_ino;
  mode_t        st_mode;
  nlink_t       st_nlink;
  uid_t         st_uid;
  gid_t         st_gid;
  dev_t         st_rdev;
  off_t         st_size;
  timestruc_t   st_atim;
  timestruc_t   st_mtim;
  timestruc_t   st_ctim;
  blksize_t     st_blksize;
  blkcnt_t      st_blocks;
  timestruc_t   st_birthtim;
};

#if defined (__INSIDE_CYGWIN__) || defined (_COMPILING_NEWLIB)
#ifndef __x86_64__
struct __stat32
{
  __dev16_t	st_dev;
  __ino32_t	st_ino;
  mode_t	st_mode;
  nlink_t       st_nlink;
  __uid16_t     st_uid;
  __gid16_t     st_gid;
  __dev16_t     st_rdev;
  _off_t        st_size;
  timestruc_t   st_atim;
  timestruc_t   st_mtim;
  timestruc_t   st_ctim;
  blksize_t     st_blksize;
  __blkcnt32_t  st_blocks;
  long          st_spare4[2];
};
#endif

extern int fstat64 (int fd, struct stat *buf);
extern int stat64 (const char *__restrict file_name,
		   struct stat *__restrict buf);
extern int lstat64 (const char *__restrict file_name,
		    struct stat *__restrict buf);

#endif

#define st_atime st_atim.tv_sec
#define st_mtime st_mtim.tv_sec
#define st_ctime st_ctim.tv_sec
#define st_birthtime st_birthtim.tv_sec

/* POSIX IPC objects are not implemented as distinct file types, so the
   below macros have to return 0.  The expression is supposed to catch
   illegal usage with non-stat parameters. */
#define S_TYPEISMQ(buf)  ((void)(buf)->st_mode,0)
#define S_TYPEISSEM(buf) ((void)(buf)->st_mode,0)
#define S_TYPEISSHM(buf) ((void)(buf)->st_mode,0)

#ifdef __cplusplus
}
#endif

#endif /* _CYGWIN_STAT_H */
@


1.13
log
@	* Merge in cygwin-64bit-branch.
@
text
@d3 1
a3 1
   Copyright 2002, 2007, 2010 Red Hat Inc.
d59 4
a62 2
extern int stat64 (const char *file_name, struct stat *buf);
extern int lstat64 (const char *file_name, struct stat *buf);
@


1.12
log
@	Remove all traces of __CYGWIN_USE_BIG_TYPES__.

	* include/cygwin/config.h: Move Cygwin-specific build flags from
	newlib's sys/config.h here.  Add a comment.
@
text
@d19 18
d38 1
d56 1
d58 3
a60 21
struct __stat64
{
  __dev32_t     st_dev;
  __ino64_t     st_ino;
  mode_t        st_mode;
  nlink_t       st_nlink;
  __uid32_t     st_uid;
  __gid32_t     st_gid;
  __dev32_t     st_rdev;
  _off64_t      st_size;
  timestruc_t   st_atim;
  timestruc_t   st_mtim;
  timestruc_t   st_ctim;
  blksize_t     st_blksize;
  __blkcnt64_t  st_blocks;
  timestruc_t   st_birthtim;
};

extern int fstat64 (int fd, struct __stat64 *buf);
extern int stat64 (const char *file_name, struct __stat64 *buf);
extern int lstat64 (const char *file_name, struct __stat64 *buf);
a63 18
struct stat
{
  dev_t         st_dev;
  ino_t         st_ino;
  mode_t        st_mode;
  nlink_t       st_nlink;
  uid_t         st_uid;
  gid_t         st_gid;
  dev_t         st_rdev;
  off_t         st_size;
  timestruc_t   st_atim;
  timestruc_t   st_mtim;
  timestruc_t   st_ctim;
  blksize_t     st_blksize;
  blkcnt_t      st_blocks;
  timestruc_t   st_birthtim;
};

@


1.12.6.1
log
@	* include/cygwin/stat.h (struct __stat64): Drop entirely in favor of
	struct stat.  Accommodate throughout Cygwin.
	* include/cygwin/types.h: Throughout, drop current, internal types
	used since Cygwin 1.5 with the base type they have been used for.
	Throughout, define types based on bitsize-specific types where
	appropriate.  Accommodate throughout Cygwin.
	* include/sys/cygwin.h: Drop __uid32_t and __gid32_t in favor of
	uid_t and gid_t.  Define uid/gid types based on bitsize-specific types.
	(struct external_pinfo): Accommodate above change.
	* cygtls.h (struct _local_storage): Drop unused members grp and
	namearray,
	* tlsoffsets.h: Regenerate.
	* devices.h (_dev_t): Drop definition.  Use dev_t throughout instead.
	* devices.cc: Regenerate.

	Probably temporary patch to drop unneeded functionality on x86_64:
	* fcntl.cc (_fcntl): Alias to fcntl64 on x86_64.
	* glob.cc (CYGWIN_gl_stat): Simplify on x86_64.
	* grp.cc (grp32togrp16): Don't define on x86_64.
	(getgrgid): Alias to getgrgid32 on x86_64.
	(getgrnam): Alias to getgrnam32 on x86_64.
	(getgrent): Alias to getgrent32 on x86_64.
	(getgroups): Alias to getgroups32 on x86_64.
	(initgroups): Alias to initgroups32 on x86_64.
	(setgroups): Alias to setgroups32 on x86_64.
	* mmap.cc (mmap): Alias to mmap64 on x86_64.
	* passwd.cc (getpwuid): Alias to getpwuid32 on x86_64.
	(getpwuid_r): Alias to getpwuid_r32 on x86_64.
	(getpwduid): Don't define on x86_64.
	* syscalls.cc (lseek): Alias to lseek64 on x86_64.
	(_lseek): Alias to lseek64 on x86_64.
	(chown): Alias to chown32 on x86_64.
	(lchown): Alias to lchown32 on x86_64.
	(fchown): Alias to fchown32 on x86_64.
	(stat64_to_stat32): Don't define on x86_64.
	(fstat): Alias to fstat64 on x86_64.
	(_fstat_r): Alias to _fstat64_r on x86_64.
	(stat): Alias to stat64 on x86_64.
	(_stat_r): Alias to _stat64_r on x86_64.
	(lstat): Alias to lstat64 on x86_64.
	(ftruncate): Alias to ftruncate64 on x86_64.
	(truncate): Alias to truncate64 on x86_64.
	(seteuid): Alias to seteuid32 on x86_64.
	(setuid): Alias to setuid32 on x86_64.
	(setreuid): Alias to setreuid32 on x86_64.
	(setegid): Alias to setegid32 on x86_64.
	(setgid): Alias to setgid32 on x86_64.
	(setregid): Alias to setregid32 on x86_64.
	* uinfo.cc (getuid): Alias to getuid32 on x86_64.
	(getgid): Alias to getgid32 on x86_64.
	(geteuid): Alias to geteuid32 on x86_64.
	(getegid): Alias to getegid32 on x86_64.
	* winsup.h (ILLEGAL_UID16): Don't define on x86_64.
	(ILLEGAL_GID16): Ditto.
	(uid16touid32): Don't declare on x86_64.
	(gid16togid32): Don't declare on x86_64.
@
text
@a18 18
struct stat
{
  dev_t         st_dev;
  ino_t         st_ino;
  mode_t        st_mode;
  nlink_t       st_nlink;
  uid_t         st_uid;
  gid_t         st_gid;
  dev_t         st_rdev;
  off_t         st_size;
  timestruc_t   st_atim;
  timestruc_t   st_mtim;
  timestruc_t   st_ctim;
  blksize_t     st_blksize;
  blkcnt_t      st_blocks;
  timestruc_t   st_birthtim;
};

a19 1
#ifndef __x86_64__
a36 1
#endif
d38 21
a58 3
extern int fstat64 (int fd, struct stat *buf);
extern int stat64 (const char *file_name, struct stat *buf);
extern int lstat64 (const char *file_name, struct stat *buf);
d62 18
@


1.11
log
@	* include/cygwin/stat.h (S_TYPEISSHM, S_TYPEISSEM, S_TYPEISSHM):
	Avoid compiler warnings.
@
text
@d3 1
a3 1
   Copyright 2002, 2007 Red Hat Inc.
a76 1
#ifdef __CYGWIN_USE_BIG_TYPES__
a77 3
#else
  long          st_spare4[2];
#endif
a82 1
#ifdef __CYGWIN_USE_BIG_TYPES__
a83 1
#endif
@


1.10
log
@	* include/cygwin/stat.h (S_TYPEISMQ): Define.
	(S_TYPEISSEM): Dttio.
	(S_TYPEISSHM): Ditto.
@
text
@d94 3
a96 3
#define S_TYPEISMQ(buf)  ((buf)->st_mode,0)
#define S_TYPEISSEM(buf) ((buf)->st_mode,0)
#define S_TYPEISSHM(buf) ((buf)->st_mode,0)
@


1.9
log
@	* fhandler_mailslot.cc (fhandler_mailslot::fstat): Set new stat member
	st_birthtim to useful value.
	* fhandler_process.cc (fhandler_process::fstat): Ditto.
	* fhandler_disk_file.cc (fhandler_base::fstat_by_handle): Take
	additional parameter for creation time.  Fill st_birthtim with it.
	Accomodate additional creation time parameter throughout.
	* fhandler_raw.cc (fhandler_dev_raw::fstat): Set new stat member
	st_birthtim to useful value.
	* fhandler.cc (fhandler_base::fstat): Ditto.
	* fhandler_registry.cc (fhandler_registry::fstat): Ditto.
	* include/cygwin/version.h: Bump API minor number.
	* include/cygwin/stat.h (struct __stat64): Replace st_spare4 with
	timestruc_t st_birthtim.
	(struct stat): Ditto if __CYGWIN_USE_BIG_TYPES__ is defined.
	(st_birthtime): Define if __CYGWIN_USE_BIG_TYPES__ is defined.
@
text
@d91 7
@


1.8
log
@	* include/cygwin/stat.h: Allow definition of internal stat structures
	also when compiling newlib.
@
text
@d3 1
a3 1
   Copyright 2002 Red Hat Inc.
d53 1
a53 1
  long          st_spare4[2];
d77 3
d81 1
d87 3
@


1.7
log
@* dir.cc (readdir): Fill out new old_d_ino field.
* fhandler.h (fhandler_base::namehash): Define as ino_t.
(fhandler_base::get_namehash): Ditto.
* fhandler_disk_file.cc (fhandler_disk_file::fstat_helper): Accommodate new 64
bit st_ino.
* fhandler_socket.cc (fhandler_socket::fstat): Ditto.
* path.cc (hash_path_name): Return ino_t.
* syscalls.cc (stat64_to_stat32): Convert 64 bit inode to 32 bit.
* winsup.h (hash_path_name): Declare as returning ino_t.
* include/cygwin/stat.h (__stat32): Use 32 bit st_ino.
(__stat64): Use 64 bit st_ino.
* include/cygwin/types.h (__ino64_t): Define.
(__ino32_t): Ditto.
(ino_t): Define appropriately.
@
text
@d19 1
a19 1
#ifdef __INSIDE_CYGWIN__
@


1.6
log
@	* dir.cc: Change __off32_t to _off_t and __off64_t to _off64_t
	throughout.
	* fhandler.cc: Ditto.
	* fhandler.h: Ditto.
	* fhandler_clipboard.cc: Ditto.
	* fhandler_disk_file.cc: Ditto.
	* fhandler_dsp.cc: Ditto.
	* fhandler_floppy.cc: Ditto.
	* fhandler_mem.cc: Ditto.
	* fhandler_proc.cc: Ditto.
	* fhandler_process.cc: Ditto.
	* fhandler_random.cc: Ditto.
	* fhandler_registry.cc: Ditto.
	* fhandler_tape.cc: Ditto.
	* fhandler_termios.cc: Ditto.
	* fhandler_virtual.cc: Ditto.
	* fhandler_zero.cc: Ditto.
	* mmap.cc: Ditto.
	* pipe.cc: Ditto.
	* syscalls.cc: Ditto.
	* winsup.h: Ditto.
	* include/cygwin/stat.h: Ditto.
	* include/cygwin/types.h: Ditto.  Remove definition of __off32_t
	and __off64_t.
@
text
@d22 3
a24 3
  __dev16_t     st_dev;
  ino_t         st_ino;
  mode_t        st_mode;
d41 1
a41 1
  ino_t         st_ino;
@


1.5
log
@whitespace
@
text
@d29 1
a29 1
  __off32_t     st_size;
d47 1
a47 1
  __off64_t     st_size;
@


1.5.4.1
log
@merge from trunk
@
text
@d29 1
a29 1
  _off_t        st_size;
d47 1
a47 1
  _off64_t      st_size;
@


1.5.4.2
log
@merge from trunk
@
text
@d22 3
a24 3
  __dev16_t	st_dev;
  __ino32_t	st_ino;
  mode_t	st_mode;
d41 1
a41 1
  __ino64_t     st_ino;
@


1.5.4.3
log
@merge from trunk
@
text
@d19 1
a19 1
#if defined (__INSIDE_CYGWIN__) || defined (_COMPILING_NEWLIB)
@


1.4
log
@	* fhandler.cc (fhandler_base::fstat): Initialise tv_nsec member of
	st_atim, st_mtim, and st_ctim fields.
	* fhandler_disk_file.cc (fhandler_disk_file::fstat_helper): Ditto.
	* fhandler_process.cc (fhandler_process::fstat): Ditto.
	* glob.c (stat32_to_STAT): Copy across the whole st_atim,
	st_mtime, and st_ctim fields.
	* syscalls.cc (stat64_to_stat32): Ditto.
	* times.cc (to_timestruc_t): New function.
	(time_as_timestruc_t): New function.
	* winsup.h: Add to_timestruc_t and time_as_timestruc_t functions.
	* include/cygwin/stat.h: Replace time_t with timestruc_t
	throughout for all file times, removing the st_spare1, st_spare2,
	and st_spare3 fields in the process. Add macros to access tv_sec
	fields by old names.
	* include/cygwin/types.h: Typedef timespec_t and timestruc_t as
	struct timespec.
@
text
@d63 1
a63 1
{ 
@


1.3
log
@	* syscalls.cc (stat64_to_stat32): Transform st_dev correctly.
	(fstat64): Add evaluating st_ino and st_dev.
	(stat_worker): Evaluate st_dev as 32 bit value.
	* include/cygwin/stat.h: Use new dev_t definition throughout.
	* include/cygwin/types.h: Define __dev16_t and __dev32_t.  Define
	dev_t according to __CYGWIN_USE_BIG_TYPES__ setting.
	* include/sys/sysmacros.h: Define major, minor and makedev
	according to __CYGWIN_USE_BIG_TYPES__ setting.
@
text
@d30 3
a32 6
  time_t        st_atime;
  long          st_spare1;
  time_t        st_mtime;
  long          st_spare2;
  time_t        st_ctime;
  long          st_spare3;
d48 3
a50 6
  time_t        st_atime;
  long          st_spare1;
  time_t        st_mtime;
  long          st_spare2;
  time_t        st_ctime;
  long          st_spare3;
d72 3
a74 6
  time_t        st_atime;
  long          st_spare1;
  time_t        st_mtime;
  long          st_spare2;
  time_t        st_ctime;
  long          st_spare3;
d79 4
@


1.2
log
@	* cygwin.din (fstat64): New symbol.
	(ftruncate64): Ditto.
	(lseek64): Ditto.
	(lstat64): Ditto.
	(mmap64): Ditto.
	(seekdir64): Ditto.
	(stat64): Ditto.
	(telldir64): Ditto.
	(truncate64): Ditto.
	* dir.cc (telldir64): New function.
	(telldir): Call telldir64().
	(seekdir64): New function.
	(seekdir): Call seekdir64().
	* fhandler.h: Redefine all methods using __off32_t to use __off64_t.
	* fhandler.cc: Use __off64_t and struct __stat64 throughout.
	* fhandler_clipboard.cc: Ditto.
	* fhandler_disk_file.cc: Ditto.
	* fhandler_dsp.cc: Ditto.
	* fhandler_floppy.cc: Ditto.
	* fhandler_mem.cc: Ditto.
	* fhandler_random.cc: Ditto.
	* fhandler_socket.cc: Ditto.
	* fhandler_tape.cc: Ditto.
	* fhandler_zero.cc: Ditto.
	* pipe.cc: Ditto.
	* glob.c: Ditto, call lstat64 and stat64 in Cygwin.
	* mmap.cc: Use __off64_t throughout.
	(mmap64): New function.
	* sec_acl.cc (acl_worker): Use struct __stat64, call stat64 and lstat64.
	* syscalls.cc (lseek64): New function.
	(stat64_to_stat32): Ditto.
	(fstat64): Ditto.
	(stat64): Ditto.
	(lstat64): Ditto.
	(ftruncate64): Ditto.
	(truncate64): Ditto.
	(_fstat): Call fstat64.
	(_stat): Call stat64.
	(cygwin_lstat): Rename to avoid declaration problem.  Call lstat64.
	(stat_worker): Use struct __stat64.
	(access): Ditto.
	(ftruncate): Call ftruncate64.
	(truncate): Call truncate64.
	* wincap.cc: Set flag has_64bit_file_access appropriately.
	* wincap.h: Add flag has_64bit_file_access.
	* winsup.h (ILLEGAL_SEEK): Define as __off64_t.
	(stat_dev): Declare using struct __stat64.
	(stat_worker): Ditto.
	* include/cygwin/stat.h (struct __stat32): Define if compiling Cygwin.
	(struct __stat64): Ditto.
	(struct stat): Revert definition with explicitly sized datatypes.
	Eliminate sized field names.
	* include/cygwin/types.h (blksize_t): New type.
	(__blkcnt32_t): Ditto.
	(__blkcnt64_t): Ditto.
	(blkcnt_t): Ditto.
@
text
@d22 1
a22 1
  dev_t         st_dev;
d28 1
a28 1
  dev_t         st_rdev;
d43 1
a43 1
  dev_t         st_dev;
d49 1
a49 1
  dev_t         st_rdev;
@


1.2.2.1
log
@Merged changes from HEAD
@
text
@@


1.2.2.2
log
@Merged changes from HEAD
@
text
@d22 1
a22 1
  __dev16_t     st_dev;
d28 1
a28 1
  __dev16_t     st_rdev;
d30 6
a35 3
  timestruc_t   st_atim;
  timestruc_t   st_mtim;
  timestruc_t   st_ctim;
d43 1
a43 1
  __dev32_t     st_dev;
d49 1
a49 1
  __dev32_t     st_rdev;
d51 6
a56 3
  timestruc_t   st_atim;
  timestruc_t   st_mtim;
  timestruc_t   st_ctim;
d78 6
a83 3
  timestruc_t   st_atim;
  timestruc_t   st_mtim;
  timestruc_t   st_ctim;
a87 4

#define st_atime st_atim.tv_sec
#define st_mtime st_mtim.tv_sec
#define st_ctime st_ctim.tv_sec
@


1.1
log
@	* include/cygwin/grp.h: New file.
	* include/cygwin/stat.h: Ditto.
	* include/cygwin/types.h: Add definitions for __off32_t,
	__off64_t, off_t, __uid16_t, __uid32_t, uid_t, __gid16_t,
	__gid32_t and gid_t.
	* include/sys/cygwin.h: Use correct uid and gid types.
@
text
@d19 50
a68 1
struct  stat
d70 17
a86 17
  dev_t     st_dev;
  ino_t     st_ino;
  mode_t    st_mode;
  nlink_t   st_nlink;
  __uid16_t __st_uid16;
  __gid16_t __st_gid16;
  dev_t     st_rdev;
  __off32_t __st_size32;
  time_t    st_atime;
  __uid32_t __st_uid32;
  time_t    st_mtime;
  __uid32_t __st_gid32;
  time_t    st_ctime;
  long      st_spare3;
  long      st_blksize;
  long      st_blocks;
  __off64_t __st_size64;
a87 10

#ifdef __CYGWIN_USE_BIG_TYPES__
#define st_uid  __st_uid32
#define st_gid  __st_gid32
#define st_size __st_size64
#else
#define st_uid  __st_uid16
#define st_gid  __st_gid16
#define st_size __st_size32
#endif /* __CYGWIN_USE_BIG_TYPES__ */
@

