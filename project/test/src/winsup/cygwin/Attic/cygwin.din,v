head	1.259;
access;
symbols
	cygwin-64bit-postmerge:1.258
	cygwin-64bit-premerge-branch:1.257.0.2
	cygwin-64bit-premerge:1.257
	cygwin-1_7_18-release:1.257
	post-ptmalloc3:1.256.2.2
	pre-ptmalloc3:1.256.2.2
	cygwin-1_7_17-release:1.256
	cygwin-64bit-branch:1.256.0.2
	cygwin-1_7_16-release:1.256
	cygwin-1_7_15-release:1.254
	cygwin-1_7_14_2-release:1.254
	cygwin-1_7_14-release:1.254
	cygwin-1_7_12-release:1.254
	cygwin-1_7_11-release:1.254
	cygwin-1_7_10-release:1.253
	signal-rewrite:1.246.0.2
	pre-notty:1.244
	cygwin-1_7_9-release:1.233
	cv-post-1_7_9:1.232.0.2
	cygwin-1_7_8-release:1.232
	cygwin-1_7_7-release:1.224
	cygwin-1_7_5-release:1.222
	cygwin-1_7_4-release:1.222
	cygwin-1_7_3-release:1.222
	cygwin-1_7_2-release:1.222
	fifo_doover3:1.217.0.2
	cygwin-1_7_1-release:1.217
	prefifo:1.214
	cv-branch-2:1.211.0.2
	pre-ripout-set_console_state_for_spawn:1.189
	EOL_registry_mounts:1.185
	preoverlapped:1.179
	drop_9x_support_start:1.171
	cr-0x5f1:1.163.0.4
	cv-branch:1.163.0.2
	pre-ptymaster-archetype:1.160
	cr-0x3b58:1.152.0.4
	cr-0x5ef:1.152.0.2
	after-mmap-privanon-noreserve:1.151
	after-mmap-revamp:1.151
	before-mmap-revamp:1.151
	cgf-more-exit-sync:1.146
	post_wait_sig_exit:1.146
	pre_wait_sig_exit:1.146
	reparent-point:1.122
	noreparent:1.122.0.2
	cr-0x5e6:1.119.0.2
	cr-0x9e:1.111.0.6
	cr-0x9d:1.111.0.4
	cgf-deleteme:1.111.0.2
	pre-sigrewrite:1.104
	corinna-01:1.102
	cr-0x9c:1.97.2.1.0.2
	cr-0x9b:1.97.0.2
	cr-0x99:1.93
	Z-emcb-cygwin_daemon:1.93.0.2
	w32api-2_2:1.76
	mingw-runtime-2_4:1.76
	pre-cgf-merge:1.98
	cgf-dev-branch:1.73.0.2
	predaemon:1.44
	cygwin_daemon_merge_HEAD:1.44
	pregp02r1:1.43.0.8
	cygnus_cvs_20020108_pre:1.41
	Z-cygwin_daemon_merge-new_HEAD:1.63
	Z-cygwin_daemon_merge_HEAD:1.63
	cygwin_daemon:1.37.0.2;
locks; strict;
comment	@# @;
expand	@o@;


1.259
date	2013.04.30.23.43.07;	author cgf;	state dead;
branches;
next	1.258;

1.258
date	2013.04.23.09.44.31;	author corinna;	state Exp;
branches;
next	1.257;

1.257
date	2012.11.21.20.13.06;	author yselkowitz;	state Exp;
branches;
next	1.256;

1.256
date	2012.07.18.11.17.24;	author corinna;	state Exp;
branches
	1.256.2.1;
next	1.255;

1.255
date	2012.05.10.08.35.22;	author corinna;	state Exp;
branches;
next	1.254;

1.254
date	2012.02.22.01.58.24;	author yselkowitz;	state Exp;
branches;
next	1.253;

1.253
date	2012.01.28.14.44.01;	author corinna;	state Exp;
branches;
next	1.252;

1.252
date	2012.01.06.07.12.17;	author yselkowitz;	state Exp;
branches;
next	1.251;

1.251
date	2012.01.01.18.54.25;	author yselkowitz;	state Exp;
branches;
next	1.250;

1.250
date	2011.12.30.20.22.27;	author yselkowitz;	state Exp;
branches;
next	1.249;

1.249
date	2011.11.07.20.05.48;	author cgf;	state Exp;
branches;
next	1.248;

1.248
date	2011.10.28.09.26.42;	author corinna;	state Exp;
branches;
next	1.247;

1.247
date	2011.10.11.23.20.37;	author cgf;	state Exp;
branches;
next	1.246;

1.246
date	2011.08.03.19.17.02;	author yselkowitz;	state Exp;
branches;
next	1.245;

1.245
date	2011.07.21.09.39.21;	author yselkowitz;	state Exp;
branches;
next	1.244;

1.244
date	2011.05.19.07.23.28;	author yselkowitz;	state Exp;
branches;
next	1.243;

1.243
date	2011.05.18.01.25.41;	author yselkowitz;	state Exp;
branches;
next	1.242;

1.242
date	2011.05.17.17.08.09;	author yselkowitz;	state Exp;
branches;
next	1.241;

1.241
date	2011.05.15.18.49.39;	author corinna;	state Exp;
branches;
next	1.240;

1.240
date	2011.05.09.08.57.46;	author yselkowitz;	state Exp;
branches;
next	1.239;

1.239
date	2011.05.06.18.53.21;	author yselkowitz;	state Exp;
branches;
next	1.238;

1.238
date	2011.05.04.22.12.15;	author yselkowitz;	state Exp;
branches;
next	1.237;

1.237
date	2011.05.03.01.13.36;	author yselkowitz;	state Exp;
branches;
next	1.236;

1.236
date	2011.04.18.12.00.03;	author corinna;	state Exp;
branches;
next	1.235;

1.235
date	2011.04.15.09.22.14;	author yselkowitz;	state Exp;
branches;
next	1.234;

1.234
date	2011.03.29.10.32.40;	author corinna;	state Exp;
branches;
next	1.233;

1.233
date	2011.03.28.14.55.20;	author corinna;	state Exp;
branches;
next	1.232;

1.232
date	2011.02.22.01.32.42;	author cgf;	state Exp;
branches
	1.232.2.1;
next	1.231;

1.231
date	2011.02.10.17.36.51;	author ericb;	state Exp;
branches;
next	1.230;

1.230
date	2011.02.10.10.51.13;	author yselkowitz;	state Exp;
branches;
next	1.229;

1.229
date	2011.01.13.13.48.12;	author corinna;	state Exp;
branches;
next	1.228;

1.228
date	2010.12.26.21.11.38;	author cgf;	state Exp;
branches;
next	1.227;

1.227
date	2010.10.18.15.14.17;	author cgf;	state Exp;
branches;
next	1.226;

1.226
date	2010.10.08.10.51.17;	author corinna;	state Exp;
branches;
next	1.225;

1.225
date	2010.09.11.06.53.26;	author davek;	state Exp;
branches;
next	1.224;

1.224
date	2010.07.19.18.22.40;	author ericb;	state Exp;
branches;
next	1.223;

1.223
date	2010.04.28.10.00.24;	author corinna;	state Exp;
branches;
next	1.222;

1.222
date	2010.03.04.09.37.52;	author corinna;	state Exp;
branches;
next	1.221;

1.221
date	2010.03.03.15.05.18;	author corinna;	state Exp;
branches;
next	1.220;

1.220
date	2010.01.22.22.31.31;	author corinna;	state Exp;
branches;
next	1.219;

1.219
date	2010.01.15.15.40.05;	author corinna;	state Exp;
branches;
next	1.218;

1.218
date	2010.01.14.18.46.01;	author corinna;	state Exp;
branches;
next	1.217;

1.217
date	2009.11.12.14.40.47;	author corinna;	state Exp;
branches;
next	1.216;

1.216
date	2009.09.26.21.01.10;	author ericb;	state Exp;
branches;
next	1.215;

1.215
date	2009.09.25.23.55.00;	author ericb;	state Exp;
branches;
next	1.214;

1.214
date	2009.07.07.20.12.44;	author davek;	state Exp;
branches;
next	1.213;

1.213
date	2009.07.03.13.01.16;	author corinna;	state Exp;
branches;
next	1.212;

1.212
date	2009.06.28.18.23.35;	author cgf;	state Exp;
branches;
next	1.211;

1.211
date	2009.03.31.09.42.58;	author corinna;	state Exp;
branches;
next	1.210;

1.210
date	2009.03.23.09.46.38;	author corinna;	state Exp;
branches;
next	1.209;

1.209
date	2009.03.19.09.22.01;	author corinna;	state Exp;
branches;
next	1.208;

1.208
date	2009.03.15.13.45.01;	author corinna;	state Exp;
branches;
next	1.207;

1.207
date	2009.03.11.13.00.28;	author corinna;	state Exp;
branches;
next	1.206;

1.206
date	2009.03.11.12.03.43;	author corinna;	state Exp;
branches;
next	1.205;

1.205
date	2009.03.09.13.22.37;	author corinna;	state Exp;
branches;
next	1.204;

1.204
date	2009.03.06.16.31.25;	author corinna;	state Exp;
branches;
next	1.203;

1.203
date	2009.03.06.10.09.55;	author corinna;	state Exp;
branches;
next	1.202;

1.202
date	2009.02.19.09.22.51;	author corinna;	state Exp;
branches;
next	1.201;

1.201
date	2009.02.18.17.38.16;	author corinna;	state Exp;
branches;
next	1.200;

1.200
date	2009.02.16.20.22.38;	author corinna;	state Exp;
branches;
next	1.199;

1.199
date	2009.02.16.15.36.00;	author corinna;	state Exp;
branches;
next	1.198;

1.198
date	2009.02.13.18.39.37;	author corinna;	state Exp;
branches;
next	1.197;

1.197
date	2009.02.13.08.33.11;	author corinna;	state Exp;
branches;
next	1.196;

1.196
date	2009.02.05.17.30.17;	author corinna;	state Exp;
branches;
next	1.195;

1.195
date	2008.12.31.21.33.34;	author cgf;	state Exp;
branches;
next	1.194;

1.194
date	2008.12.15.12.40.29;	author corinna;	state Exp;
branches;
next	1.193;

1.193
date	2008.09.12.22.32.07;	author cgf;	state Exp;
branches;
next	1.192;

1.192
date	2008.09.11.06.22.31;	author cgf;	state Exp;
branches;
next	1.191;

1.191
date	2008.07.30.04.58.23;	author cgf;	state Exp;
branches;
next	1.190;

1.190
date	2008.07.29.10.40.36;	author corinna;	state Exp;
branches;
next	1.189;

1.189
date	2008.04.24.09.59.54;	author corinna;	state Exp;
branches;
next	1.188;

1.188
date	2008.04.23.11.13.52;	author corinna;	state Exp;
branches;
next	1.187;

1.187
date	2008.04.22.16.55.23;	author corinna;	state Exp;
branches;
next	1.186;

1.186
date	2008.04.10.09.27.58;	author corinna;	state Exp;
branches;
next	1.185;

1.185
date	2008.03.24.14.48.58;	author corinna;	state Exp;
branches;
next	1.184;

1.184
date	2008.03.12.12.41.49;	author corinna;	state Exp;
branches;
next	1.183;

1.183
date	2008.02.10.15.43.04;	author corinna;	state Exp;
branches;
next	1.182;

1.182
date	2007.12.30.21.12.08;	author davek;	state Exp;
branches;
next	1.181;

1.181
date	2007.12.19.17.38.18;	author corinna;	state Exp;
branches;
next	1.180;

1.180
date	2007.07.06.20.05.44;	author corinna;	state Exp;
branches;
next	1.179;

1.179
date	2007.07.05.07.36.11;	author corinna;	state Exp;
branches;
next	1.178;

1.178
date	2007.06.28.17.55.01;	author corinna;	state Exp;
branches;
next	1.177;

1.177
date	2007.06.27.12.46.35;	author ericb;	state Exp;
branches;
next	1.176;

1.176
date	2007.06.21.15.57.54;	author corinna;	state Exp;
branches;
next	1.175;

1.175
date	2007.06.21.07.22.16;	author corinna;	state Exp;
branches;
next	1.174;

1.174
date	2007.06.12.15.24.46;	author corinna;	state Exp;
branches;
next	1.173;

1.173
date	2007.06.11.17.38.27;	author corinna;	state Exp;
branches;
next	1.172;

1.172
date	2007.05.15.01.23.30;	author cgf;	state Exp;
branches;
next	1.171;

1.171
date	2007.02.20.15.48.04;	author corinna;	state Exp;
branches;
next	1.170;

1.170
date	2007.02.14.10.06.45;	author corinna;	state Exp;
branches;
next	1.169;

1.169
date	2007.02.08.13.36.53;	author corinna;	state Exp;
branches;
next	1.168;

1.168
date	2007.02.07.17.22.40;	author corinna;	state Exp;
branches;
next	1.167;

1.167
date	2007.01.21.22.54.04;	author corinna;	state Exp;
branches;
next	1.166;

1.166
date	2006.12.11.19.59.05;	author corinna;	state Exp;
branches;
next	1.165;

1.165
date	2006.08.07.19.29.14;	author corinna;	state Exp;
branches;
next	1.164;

1.164
date	2006.07.25.19.23.23;	author corinna;	state Exp;
branches;
next	1.163;

1.163
date	2006.07.05.16.06.50;	author cgf;	state Exp;
branches
	1.163.2.1;
next	1.162;

1.162
date	2006.07.05.15.59.39;	author cgf;	state Exp;
branches;
next	1.161;

1.161
date	2006.06.15.17.22.56;	author corinna;	state Exp;
branches;
next	1.160;

1.160
date	2006.04.22.23.09.44;	author cgf;	state Exp;
branches;
next	1.159;

1.159
date	2006.03.12.23.57.03;	author cgf;	state Exp;
branches;
next	1.158;

1.158
date	2006.03.01.21.31.24;	author cgf;	state Exp;
branches;
next	1.157;

1.157
date	2006.02.28.15.32.48;	author corinna;	state Exp;
branches;
next	1.156;

1.156
date	2006.02.24.02.08.56;	author cgf;	state Exp;
branches;
next	1.155;

1.155
date	2006.02.16.18.21.49;	author corinna;	state Exp;
branches;
next	1.154;

1.154
date	2006.02.02.22.46.36;	author corinna;	state Exp;
branches;
next	1.153;

1.153
date	2006.01.21.02.24.16;	author cgf;	state Exp;
branches;
next	1.152;

1.152
date	2006.01.09.12.37.08;	author corinna;	state Exp;
branches;
next	1.151;

1.151
date	2005.11.18.17.48.23;	author corinna;	state Exp;
branches;
next	1.150;

1.150
date	2005.11.11.16.42.15;	author cgf;	state Exp;
branches;
next	1.149;

1.149
date	2005.11.08.22.08.39;	author cgf;	state Exp;
branches;
next	1.148;

1.148
date	2005.10.20.14.26.23;	author corinna;	state Exp;
branches;
next	1.147;

1.147
date	2005.10.18.18.51.33;	author corinna;	state Exp;
branches;
next	1.146;

1.146
date	2005.08.28.17.30.33;	author cgf;	state Exp;
branches;
next	1.145;

1.145
date	2005.08.20.06.19.54;	author cgf;	state Exp;
branches;
next	1.144;

1.144
date	2005.08.08.09.45.39;	author corinna;	state Exp;
branches;
next	1.143;

1.143
date	2005.07.29.17.04.44;	author cgf;	state Exp;
branches;
next	1.142;

1.142
date	2005.07.09.08.22.36;	author corinna;	state Exp;
branches;
next	1.141;

1.141
date	2005.07.08.08.24.12;	author corinna;	state Exp;
branches;
next	1.140;

1.140
date	2005.06.17.20.01.58;	author corinna;	state Exp;
branches;
next	1.139;

1.139
date	2005.06.10.12.11.33;	author corinna;	state Exp;
branches;
next	1.138;

1.138
date	2005.06.09.22.33.55;	author cgf;	state Exp;
branches;
next	1.137;

1.137
date	2005.05.29.02.26.29;	author cgf;	state Exp;
branches;
next	1.136;

1.136
date	2005.05.25.03.40.06;	author cgf;	state Exp;
branches;
next	1.135;

1.135
date	2005.04.19.08.32.56;	author corinna;	state Exp;
branches;
next	1.134;

1.134
date	2005.04.14.17.34.03;	author cgf;	state Exp;
branches;
next	1.133;

1.133
date	2005.03.28.19.31.22;	author cgf;	state Exp;
branches;
next	1.132;

1.132
date	2005.03.27.01.57.37;	author cgf;	state Exp;
branches;
next	1.131;

1.131
date	2005.03.23.17.47.29;	author cgf;	state Exp;
branches;
next	1.130;

1.130
date	2005.03.22.11.37.52;	author corinna;	state Exp;
branches;
next	1.129;

1.129
date	2005.03.03.22.08.11;	author corinna;	state Exp;
branches;
next	1.128;

1.128
date	2005.02.23.17.39.45;	author corinna;	state Exp;
branches;
next	1.127;

1.127
date	2005.02.23.13.12.41;	author corinna;	state Exp;
branches;
next	1.126;

1.126
date	2005.02.22.19.45.40;	author corinna;	state Exp;
branches;
next	1.125;

1.125
date	2005.02.22.15.30.07;	author corinna;	state Exp;
branches;
next	1.124;

1.124
date	2005.01.25.22.45.09;	author corinna;	state Exp;
branches;
next	1.123;

1.123
date	2004.12.15.17.28.54;	author corinna;	state Exp;
branches;
next	1.122;

1.122
date	2004.09.17.08.34.31;	author corinna;	state Exp;
branches;
next	1.121;

1.121
date	2004.09.16.09.14.28;	author corinna;	state Exp;
branches;
next	1.120;

1.120
date	2004.09.16.03.49.02;	author cgf;	state Exp;
branches;
next	1.119;

1.119
date	2004.05.25.03.21.34;	author cgf;	state Exp;
branches;
next	1.118;

1.118
date	2004.05.17.16.06.00;	author corinna;	state Exp;
branches;
next	1.117;

1.117
date	2004.04.14.09.12.03;	author corinna;	state Exp;
branches;
next	1.116;

1.116
date	2004.02.26.05.10.47;	author cgf;	state Exp;
branches;
next	1.115;

1.115
date	2004.02.08.19.59.27;	author cgf;	state Exp;
branches;
next	1.114;

1.114
date	2004.02.05.19.57.03;	author cgf;	state Exp;
branches;
next	1.113;

1.113
date	2004.01.22.19.14.07;	author cgf;	state Exp;
branches;
next	1.112;

1.112
date	2004.01.19.05.46.54;	author cgf;	state Exp;
branches;
next	1.111;

1.111
date	2004.01.03.18.15.03;	author cgf;	state Exp;
branches
	1.111.2.1
	1.111.6.1;
next	1.110;

1.110
date	2003.12.31.06.30.47;	author cgf;	state Exp;
branches;
next	1.109;

1.109
date	2003.12.23.16.26.29;	author cgf;	state Exp;
branches;
next	1.108;

1.108
date	2003.12.01.17.26.28;	author corinna;	state Exp;
branches;
next	1.107;

1.107
date	2003.11.29.23.00.51;	author corinna;	state Exp;
branches;
next	1.106;

1.106
date	2003.11.28.21.39.08;	author cgf;	state Exp;
branches;
next	1.105;

1.105
date	2003.11.28.20.55.58;	author cgf;	state Exp;
branches;
next	1.104;

1.104
date	2003.11.19.18.50.20;	author corinna;	state Exp;
branches;
next	1.103;

1.103
date	2003.11.17.17.25.58;	author corinna;	state Exp;
branches;
next	1.102;

1.102
date	2003.11.06.21.36.17;	author corinna;	state Exp;
branches;
next	1.101;

1.101
date	2003.10.27.13.06.56;	author corinna;	state Exp;
branches;
next	1.100;

1.100
date	2003.10.27.11.48.28;	author corinna;	state Exp;
branches;
next	1.99;

1.99
date	2003.10.22.10.07.58;	author corinna;	state Exp;
branches;
next	1.98;

1.98
date	2003.09.14.01.58.03;	author cgf;	state Exp;
branches;
next	1.97;

1.97
date	2003.09.10.19.13.04;	author corinna;	state Exp;
branches
	1.97.2.1;
next	1.96;

1.96
date	2003.09.10.15.51.58;	author corinna;	state Exp;
branches;
next	1.95;

1.95
date	2003.09.08.20.08.52;	author corinna;	state Exp;
branches;
next	1.94;

1.94
date	2003.09.08.08.53.01;	author corinna;	state Exp;
branches;
next	1.93;

1.93
date	2003.08.13.11.28.42;	author corinna;	state Exp;
branches;
next	1.92;

1.92
date	2003.07.25.16.13.11;	author cgf;	state Exp;
branches;
next	1.91;

1.91
date	2003.07.24.19.33.13;	author cgf;	state Exp;
branches;
next	1.90;

1.90
date	2003.06.16.03.24.09;	author cgf;	state Exp;
branches;
next	1.89;

1.89
date	2003.06.06.08.11.18;	author corinna;	state Exp;
branches;
next	1.88;

1.88
date	2003.05.20.12.38.03;	author corinna;	state Exp;
branches;
next	1.87;

1.87
date	2003.05.09.22.11.25;	author corinna;	state Exp;
branches;
next	1.86;

1.86
date	2003.04.16.03.03.44;	author cgf;	state Exp;
branches;
next	1.85;

1.85
date	2003.04.10.08.22.41;	author corinna;	state Exp;
branches;
next	1.84;

1.84
date	2003.03.18.20.01.06;	author tpfaff;	state Exp;
branches;
next	1.83;

1.83
date	2003.03.17.19.08.10;	author cgf;	state Exp;
branches;
next	1.82;

1.82
date	2003.03.09.21.51.00;	author corinna;	state Exp;
branches;
next	1.81;

1.81
date	2003.03.01.02.02.39;	author cgf;	state Exp;
branches
	1.81.2.1;
next	1.80;

1.80
date	2003.02.22.23.02.15;	author cgf;	state Exp;
branches;
next	1.79;

1.79
date	2003.02.22.19.35.03;	author cgf;	state Exp;
branches;
next	1.78;

1.78
date	2003.02.16.19.31.07;	author cgf;	state Exp;
branches;
next	1.77;

1.77
date	2003.02.15.21.45.08;	author cgf;	state Exp;
branches;
next	1.76;

1.76
date	2003.01.24.15.23.15;	author corinna;	state Exp;
branches;
next	1.75;

1.75
date	2003.01.22.10.43.38;	author corinna;	state Exp;
branches;
next	1.74;

1.74
date	2003.01.17.13.08.05;	author corinna;	state Exp;
branches;
next	1.73;

1.73
date	2003.01.10.12.19.15;	author corinna;	state Exp;
branches
	1.73.2.1;
next	1.72;

1.72
date	2002.12.06.19.48.03;	author cgf;	state Exp;
branches;
next	1.71;

1.71
date	2002.12.04.20.44.17;	author cgf;	state Exp;
branches;
next	1.70;

1.70
date	2002.11.27.16.11.38;	author cgf;	state Exp;
branches;
next	1.69;

1.69
date	2002.11.27.02.12.50;	author cgf;	state Exp;
branches;
next	1.68;

1.68
date	2002.11.15.19.04.36;	author cgf;	state Exp;
branches;
next	1.67;

1.67
date	2002.11.07.09.08.39;	author corinna;	state Exp;
branches;
next	1.66;

1.66
date	2002.11.07.02.19.51;	author cgf;	state Exp;
branches;
next	1.65;

1.65
date	2002.10.21.01.00.56;	author cgf;	state Exp;
branches
	1.65.4.1;
next	1.64;

1.64
date	2002.10.20.04.15.50;	author cgf;	state Exp;
branches;
next	1.63;

1.63
date	2002.09.03.12.26.50;	author corinna;	state Exp;
branches;
next	1.62;

1.62
date	2002.08.30.13.30.26;	author corinna;	state Exp;
branches;
next	1.61;

1.61
date	2002.08.30.13.01.58;	author corinna;	state Exp;
branches;
next	1.60;

1.60
date	2002.08.30.12.18.54;	author corinna;	state Exp;
branches;
next	1.59;

1.59
date	2002.08.28.10.50.26;	author corinna;	state Exp;
branches;
next	1.58;

1.58
date	2002.08.18.05.49.25;	author cgf;	state Exp;
branches;
next	1.57;

1.57
date	2002.08.16.19.41.39;	author cgf;	state Exp;
branches;
next	1.56;

1.56
date	2002.07.29.12.51.52;	author corinna;	state Exp;
branches;
next	1.55;

1.55
date	2002.07.24.07.38.03;	author corinna;	state Exp;
branches;
next	1.54;

1.54
date	2002.07.12.21.32.31;	author cgf;	state Exp;
branches;
next	1.53;

1.53
date	2002.07.02.08.44.54;	author corinna;	state Exp;
branches;
next	1.52;

1.52
date	2002.06.11.02.08.00;	author cgf;	state Exp;
branches;
next	1.51;

1.51
date	2002.06.10.01.10.44;	author rbcollins;	state Exp;
branches;
next	1.50;

1.50
date	2002.06.06.00.09.55;	author cgf;	state Exp;
branches;
next	1.49;

1.49
date	2002.06.05.01.42.27;	author cgf;	state Exp;
branches;
next	1.48;

1.48
date	2002.05.29.15.04.26;	author corinna;	state Exp;
branches;
next	1.47;

1.47
date	2002.05.28.14.10.51;	author corinna;	state Exp;
branches;
next	1.46;

1.46
date	2002.05.13.19.53.46;	author cgf;	state Exp;
branches;
next	1.45;

1.45
date	2002.04.09.23.47.25;	author cgf;	state Exp;
branches;
next	1.44;

1.44
date	2002.02.25.17.47.46;	author corinna;	state Exp;
branches;
next	1.43;

1.43
date	2002.01.19.16.11.00;	author corinna;	state Exp;
branches;
next	1.42;

1.42
date	2002.01.17.10.39.36;	author corinna;	state Exp;
branches;
next	1.41;

1.41
date	2001.12.28.15.53.26;	author corinna;	state Exp;
branches;
next	1.40;

1.40
date	2001.12.20.02.55.08;	author cgf;	state Exp;
branches;
next	1.39;

1.39
date	2001.11.28.00.06.35;	author cgf;	state Exp;
branches;
next	1.38;

1.38
date	2001.10.01.19.47.37;	author cgf;	state Exp;
branches;
next	1.37;

1.37
date	2001.09.19.01.07.10;	author cgf;	state Exp;
branches
	1.37.2.1;
next	1.36;

1.36
date	2001.09.11.15.25.08;	author cgf;	state Exp;
branches;
next	1.35;

1.35
date	2001.09.08.01.35.54;	author cgf;	state Exp;
branches;
next	1.34;

1.34
date	2001.09.03.16.36.54;	author corinna;	state Exp;
branches;
next	1.33;

1.33
date	2001.07.27.16.33.19;	author cgf;	state Exp;
branches;
next	1.32;

1.32
date	2001.07.26.20.42.52;	author cgf;	state Exp;
branches;
next	1.31;

1.31
date	2001.06.24.22.26.49;	author cgf;	state Exp;
branches;
next	1.30;

1.30
date	2001.06.10.10.00.20;	author corinna;	state Exp;
branches;
next	1.29;

1.29
date	2001.04.25.16.18.42;	author duda;	state Exp;
branches;
next	1.28;

1.28
date	2001.04.20.23.38.43;	author cgf;	state Exp;
branches;
next	1.27;

1.27
date	2001.04.18.21.10.11;	author cgf;	state Exp;
branches;
next	1.26;

1.26
date	2001.04.13.15.28.20;	author cgf;	state Exp;
branches;
next	1.25;

1.25
date	2001.04.12.04.04.53;	author rbcollins;	state Exp;
branches;
next	1.24;

1.24
date	2001.04.09.00.44.25;	author cgf;	state Exp;
branches;
next	1.23;

1.23
date	2001.03.26.22.17.06;	author cgf;	state Exp;
branches;
next	1.22;

1.22
date	2001.03.17.01.14.57;	author cgf;	state Exp;
branches;
next	1.21;

1.21
date	2001.03.05.06.28.23;	author cgf;	state Exp;
branches;
next	1.20;

1.20
date	2001.02.20.02.53.55;	author cgf;	state Exp;
branches;
next	1.19;

1.19
date	2001.01.22.15.55.34;	author cgf;	state Exp;
branches;
next	1.18;

1.18
date	2000.12.27.00.13.57;	author corinna;	state Exp;
branches;
next	1.17;

1.17
date	2000.12.07.19.43.37;	author corinna;	state Exp;
branches;
next	1.16;

1.16
date	2000.11.25.10.23.55;	author corinna;	state Exp;
branches;
next	1.15;

1.15
date	2000.10.14.08.55.44;	author corinna;	state Exp;
branches;
next	1.14;

1.14
date	2000.07.29.16.24.37;	author cgf;	state Exp;
branches;
next	1.13;

1.13
date	2000.07.09.05.29.51;	author cgf;	state Exp;
branches;
next	1.12;

1.12
date	2000.07.04.16.58.49;	author corinna;	state Exp;
branches;
next	1.11;

1.11
date	2000.07.01.04.26.45;	author cgf;	state Exp;
branches;
next	1.10;

1.10
date	2000.07.01.03.51.55;	author cgf;	state Exp;
branches;
next	1.9;

1.9
date	2000.06.16.19.36.07;	author corinna;	state Exp;
branches;
next	1.8;

1.8
date	2000.06.08.00.55.27;	author dj;	state Exp;
branches;
next	1.7;

1.7
date	2000.05.11.15.12.31;	author dj;	state Exp;
branches;
next	1.6;

1.6
date	2000.04.24.15.44.11;	author dj;	state Exp;
branches;
next	1.5;

1.5
date	2000.04.13.06.53.23;	author corinna;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.02.20.42.42;	author corinna;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.07.05.33.09;	author cgf;	state Exp;
branches;
next	1.2;

1.2
date	2000.02.21.03.18.37;	author cgf;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.17.19.38.31;	author cgf;	state Exp;
branches
	1.1.1.1;
next	;

1.256.2.1
date	2012.11.22.11.05.50;	author corinna;	state Exp;
branches;
next	1.256.2.2;

1.256.2.2
date	2013.02.22.10.02.14;	author corinna;	state Exp;
branches;
next	;

1.232.2.1
date	2011.03.11.11.37.49;	author corinna;	state Exp;
branches;
next	1.232.2.2;

1.232.2.2
date	2011.03.28.20.16.56;	author corinna;	state Exp;
branches;
next	;

1.163.2.1
date	2006.07.06.14.04.32;	author corinna;	state Exp;
branches;
next	1.163.2.2;

1.163.2.2
date	2006.07.12.13.30.47;	author corinna;	state Exp;
branches;
next	1.163.2.3;

1.163.2.3
date	2006.07.18.12.31.00;	author corinna;	state Exp;
branches;
next	;

1.111.2.1
date	2004.01.19.05.38.24;	author cgf;	state Exp;
branches;
next	;

1.111.6.1
date	2004.01.22.20.41.27;	author cgf;	state Exp;
branches;
next	;

1.97.2.1
date	2003.09.19.01.55.54;	author cgf;	state Exp;
branches;
next	;

1.81.2.1
date	2003.03.17.19.11.22;	author cgf;	state Exp;
branches;
next	;

1.73.2.1
date	2003.01.24.04.04.20;	author cgf;	state Exp;
branches;
next	1.73.2.2;

1.73.2.2
date	2003.01.25.01.18.28;	author cgf;	state Exp;
branches;
next	1.73.2.3;

1.73.2.3
date	2003.02.15.22.05.06;	author cgf;	state Exp;
branches;
next	1.73.2.4;

1.73.2.4
date	2003.02.16.19.31.25;	author cgf;	state Exp;
branches;
next	1.73.2.5;

1.73.2.5
date	2003.02.23.06.00.21;	author cgf;	state Exp;
branches;
next	1.73.2.6;

1.73.2.6
date	2003.03.01.02.05.42;	author cgf;	state Exp;
branches;
next	1.73.2.7;

1.73.2.7
date	2003.03.10.00.07.01;	author cgf;	state Exp;
branches;
next	1.73.2.8;

1.73.2.8
date	2003.03.19.19.59.53;	author cgf;	state Exp;
branches;
next	1.73.2.9;

1.73.2.9
date	2003.05.10.17.20.52;	author cgf;	state Exp;
branches;
next	1.73.2.10;

1.73.2.10
date	2003.05.26.19.39.05;	author cgf;	state Exp;
branches;
next	1.73.2.11;

1.73.2.11
date	2003.07.06.05.10.42;	author cgf;	state Exp;
branches;
next	1.73.2.12;

1.73.2.12
date	2003.08.06.03.58.57;	author cgf;	state Exp;
branches;
next	1.73.2.13;

1.73.2.13
date	2003.08.27.20.19.55;	author cgf;	state Exp;
branches;
next	1.73.2.14;

1.73.2.14
date	2003.09.10.16.23.39;	author cgf;	state Exp;
branches;
next	1.73.2.15;

1.73.2.15
date	2003.09.11.04.47.22;	author cgf;	state Exp;
branches;
next	;

1.65.4.1
date	2002.11.07.03.47.46;	author cgf;	state Exp;
branches;
next	;

1.37.2.1
date	2001.09.25.06.31.04;	author rbcollins;	state Exp;
branches;
next	1.37.2.2;

1.37.2.2
date	2001.09.30.13.56.37;	author rbcollins;	state Exp;
branches;
next	1.37.2.3;

1.37.2.3
date	2001.10.02.12.09.53;	author rbcollins;	state Exp;
branches;
next	1.37.2.4;

1.37.2.4
date	2002.01.04.03.56.06;	author rbcollins;	state Exp;
branches;
next	1.37.2.5;

1.37.2.5
date	2002.01.22.04.52.39;	author rbcollins;	state Exp;
branches;
next	1.37.2.6;

1.37.2.6
date	2002.02.28.12.53.23;	author rbcollins;	state Exp;
branches;
next	1.37.2.7;

1.37.2.7
date	2002.06.13.14.34.01;	author rbcollins;	state Exp;
branches;
next	1.37.2.8;

1.37.2.8
date	2002.07.02.10.58.17;	author scottc;	state Exp;
branches;
next	1.37.2.9;

1.37.2.9
date	2002.07.10.14.40.16;	author scottc;	state Exp;
branches;
next	1.37.2.10;

1.37.2.10
date	2002.07.13.20.39.24;	author scottc;	state Exp;
branches;
next	1.37.2.11;

1.37.2.11
date	2002.07.26.19.03.36;	author scottc;	state Exp;
branches;
next	1.37.2.12;

1.37.2.12
date	2002.07.30.13.31.46;	author scottc;	state Exp;
branches;
next	1.37.2.13;

1.37.2.13
date	2002.08.16.21.46.48;	author scottc;	state Exp;
branches;
next	1.37.2.14;

1.37.2.14
date	2002.08.18.12.09.27;	author scottc;	state Exp;
branches;
next	1.37.2.15;

1.37.2.15
date	2002.08.28.16.09.14;	author scottc;	state Exp;
branches;
next	1.37.2.16;

1.37.2.16
date	2002.08.30.22.08.50;	author scottc;	state Exp;
branches;
next	1.37.2.17;

1.37.2.17
date	2002.09.03.13.52.06;	author scottc;	state Exp;
branches;
next	;

1.1.1.1
date	2000.02.17.19.38.31;	author cgf;	state Exp;
branches;
next	;


desc
@@


1.259
log
@* i686.din: New file.
* x86_64.din: New file.
* common.din: New file.
* cygwin.din: Delete.
* cygwin64.din: Delete.
* gendef: Rework to take options rather than using positional parameters.
Accept multiple files as input.
@
text
@LIBRARY "cygwin1.dll" BASE=0x61000000

EXPORTS
__argc DATA
__argv DATA
_check_for_executable DATA
__check_rhosts_file DATA
_ctype_ DATA
__ctype_ptr__ DATA
__cygwin_environ DATA
__cygwin_user_data DATA
_daylight DATA
error_message_count DATA
error_one_per_line DATA
error_print_progname DATA
_fe_dfl_env DATA
_fe_nomask_env DATA
h_errno DATA
_impure_ptr DATA
in6addr_any DATA
in6addr_loopback DATA
__mb_cur_max DATA
optarg DATA
opterr DATA
optind DATA
optopt DATA
optreset DATA
__progname DATA
program_invocation_name DATA
program_invocation_short_name DATA
__rcmd_errstr DATA
reent_data DATA
sys_errlist = _sys_errlist DATA
_sys_errlist DATA
sys_nerr = _sys_nerr DATA
_sys_nerr DATA
sys_sigabbrev DATA
sys_siglist DATA
_timezone DATA
_tzname DATA
_Exit SIGFE
a64l NOSIGFE
abort NOSIGFE
_abort = abort NOSIGFE
abs NOSIGFE
_abs = abs NOSIGFE
accept = cygwin_accept SIGFE
accept4 SIGFE
access SIGFE
_access = access SIGFE
acl SIGFE
_acl = acl SIGFE
_acl32 = acl32 SIGFE
aclcheck NOSIGFE
_aclcheck = aclcheck NOSIGFE
_aclcheck32 = aclcheck32 NOSIGFE
aclfrommode SIGFE
_aclfrommode = aclfrommode SIGFE
_aclfrommode32 = aclfrommode32 SIGFE
aclfrompbits SIGFE
_aclfrompbits = aclfrompbits SIGFE
_aclfrompbits32 = aclfrompbits32 SIGFE
aclfromtext SIGFE
_aclfromtext = aclfromtext SIGFE
_aclfromtext32 = aclfromtext32 SIGFE
aclsort SIGFE
_aclsort = aclsort SIGFE
_aclsort32 = aclsort32 SIGFE
acltomode SIGFE
_acltomode = acltomode SIGFE
_acltomode32 = acltomode32 SIGFE
acltopbits SIGFE
_acltopbits = acltopbits SIGFE
_acltopbits32 = acltopbits32 SIGFE
acltotext SIGFE
_acltotext = acltotext SIGFE
_acltotext32 = acltotext32 SIGFE
acos NOSIGFE
_acos = acos NOSIGFE
acosf NOSIGFE
_acosf = acosf NOSIGFE
acosh NOSIGFE
_acosh = acosh NOSIGFE
acoshf NOSIGFE
_acoshf = acoshf NOSIGFE
alarm SIGFE
_alarm = alarm SIGFE
_alloca NOSIGFE
alphasort NOSIGFE
_alphasort = alphasort NOSIGFE
argz_add SIGFE
__argz_add = argz_add SIGFE
argz_add_sep SIGFE
__argz_add_sep = argz_add_sep SIGFE
argz_append SIGFE
__argz_append = argz_append SIGFE
argz_count NOSIGFE
__argz_count = argz_count NOSIGFE
argz_create SIGFE
__argz_create = argz_create SIGFE
argz_create_sep SIGFE
__argz_create_sep = argz_create_sep SIGFE
argz_delete SIGFE
__argz_delete = argz_delete SIGFE
argz_extract NOSIGFE
__argz_extract = argz_extract NOSIGFE
argz_insert SIGFE
__argz_insert = argz_insert SIGFE
argz_next NOSIGFE
__argz_next = argz_next NOSIGFE
argz_replace SIGFE
__argz_replace = argz_replace SIGFE
argz_stringify NOSIGFE
__argz_stringify = argz_stringify NOSIGFE
asctime SIGFE
_asctime = asctime SIGFE
asctime_r SIGFE
_asctime_r = asctime_r SIGFE
asin NOSIGFE
_asin = asin NOSIGFE
asinf NOSIGFE
_asinf = asinf NOSIGFE
asinh NOSIGFE
_asinh = asinh NOSIGFE
asinhf NOSIGFE
_asinhf = asinhf NOSIGFE
asnprintf SIGFE
asprintf SIGFE
_asprintf = asprintf SIGFE
asprintf_r = _asprintf_r SIGFE
_asprintf_r SIGFE
__assert NOSIGFE
__assert_func NOSIGFE
__assertfail NOSIGFE
atan NOSIGFE
_atan = atan NOSIGFE
atan2 NOSIGFE
_atan2 = atan2 NOSIGFE
atan2f NOSIGFE
_atan2f = atan2f NOSIGFE
atanf NOSIGFE
_atanf = atanf NOSIGFE
atanh NOSIGFE
_atanh = atanh NOSIGFE
atanhf NOSIGFE
_atanhf = atanhf NOSIGFE
atexit = cygwin_atexit SIGFE
_atexit = cygwin_atexit SIGFE
atof SIGFE
_atof = atof SIGFE
atoff SIGFE
_atoff = atoff SIGFE
atoi NOSIGFE
_atoi = atoi NOSIGFE
atol NOSIGFE
_atol = atol NOSIGFE
atoll NOSIGFE
basename NOSIGFE
bcmp NOSIGFE
_bcmp = bcmp NOSIGFE
bcopy NOSIGFE
_bcopy = bcopy NOSIGFE
bind = cygwin_bind SIGFE
bindresvport = cygwin_bindresvport SIGFE
bindresvport_sa = cygwin_bindresvport_sa SIGFE
bsearch NOSIGFE
_bsearch = bsearch NOSIGFE
btowc NOSIGFE
bzero NOSIGFE
_bzero = bzero NOSIGFE
cabs NOSIGFE
_cabs = cabs NOSIGFE
cabsf NOSIGFE
_cabsf = cabsf NOSIGFE
cacos NOSIGFE
cacosf NOSIGFE
cacosh NOSIGFE
cacoshf NOSIGFE
calloc SIGFE
_calloc = calloc SIGFE
canonicalize_file_name SIGFE
carg NOSIGFE
cargf NOSIGFE
casin NOSIGFE
casinf NOSIGFE
casinh NOSIGFE
casinhf NOSIGFE
catan NOSIGFE
catanf NOSIGFE
catanh NOSIGFE
catanhf NOSIGFE
cbrt NOSIGFE
_cbrt = cbrt NOSIGFE
cbrtf NOSIGFE
_cbrtf = cbrtf NOSIGFE
ccos NOSIGFE
ccosf NOSIGFE
ccosh NOSIGFE
ccoshf NOSIGFE
ceil NOSIGFE
_ceil = ceil NOSIGFE
ceilf NOSIGFE
_ceilf = ceilf NOSIGFE
cexp NOSIGFE
cexpf NOSIGFE
cfgetispeed NOSIGFE
cfgetospeed NOSIGFE
cfmakeraw NOSIGFE
cfsetispeed SIGFE
cfsetospeed SIGFE
cfsetspeed SIGFE
chdir SIGFE
_chdir = chdir SIGFE
chmod SIGFE
_chmod = chmod SIGFE
chown SIGFE
_chown = chown SIGFE
_chown32 = chown32 SIGFE
chroot SIGFE
_chroot = chroot SIGFE
cimag NOSIGFE
cimagf NOSIGFE
cleanup_glue NOSIGFE
clearerr SIGFE
_clearerr = clearerr SIGFE
clock SIGFE
_clock = clock SIGFE
clock_getcpuclockid SIGFE
clock_getres SIGFE
clock_gettime SIGFE
clock_nanosleep SIGFE
clock_setres SIGFE
clock_settime SIGFE
clog NOSIGFE
clogf NOSIGFE
close SIGFE
_close = close SIGFE
closedir SIGFE
_closedir = closedir SIGFE
closelog SIGFE
confstr NOSIGFE
conj NOSIGFE
conjf NOSIGFE
connect = cygwin_connect SIGFE
copysign NOSIGFE
_copysign = copysign NOSIGFE
copysignf NOSIGFE
_copysignf = copysignf NOSIGFE
cos NOSIGFE
_cos = cos NOSIGFE
cosf NOSIGFE
_cosf = cosf NOSIGFE
cosh NOSIGFE
_cosh = cosh NOSIGFE
coshf NOSIGFE
_coshf = coshf NOSIGFE
cpow NOSIGFE
cpowf NOSIGFE
cproj NOSIGFE
cprojf NOSIGFE
creal NOSIGFE
crealf NOSIGFE
creat SIGFE
_creat = creat SIGFE
csin NOSIGFE
csinf NOSIGFE
csinh NOSIGFE
csinhf NOSIGFE
csqrt NOSIGFE
csqrtf NOSIGFE
ctan NOSIGFE
ctanf NOSIGFE
ctanh NOSIGFE
ctanhf NOSIGFE
ctermid SIGFE
ctime SIGFE
_ctime = ctime SIGFE
ctime_r SIGFE
_ctime_r = ctime_r SIGFE
cuserid NOSIGFE
_cuserid = cuserid NOSIGFE
cwait SIGFE
_cwait = cwait SIGFE
cygwin32_attach_handle_to_fd = cygwin_attach_handle_to_fd SIGFE
cygwin32_conv_to_full_posix_path = cygwin_conv_to_full_posix_path SIGFE
cygwin32_conv_to_full_win32_path = cygwin_conv_to_full_win32_path SIGFE
cygwin32_conv_to_posix_path = cygwin_conv_to_posix_path SIGFE
cygwin32_conv_to_win32_path = cygwin_conv_to_win32_path SIGFE
cygwin32_detach_dll = cygwin_detach_dll SIGFE_MAYBE
cygwin32_internal = cygwin_internal SIGFE
cygwin32_posix_path_list_p = cygwin_posix_path_list_p NOSIGFE
cygwin32_posix_to_win32_path_list = cygwin_posix_to_win32_path_list SIGFE
cygwin32_posix_to_win32_path_list_buf_size = cygwin_posix_to_win32_path_list_buf_size SIGFE
cygwin32_split_path = cygwin_split_path NOSIGFE
cygwin32_win32_to_posix_path_list = cygwin_win32_to_posix_path_list SIGFE
cygwin32_win32_to_posix_path_list_buf_size = cygwin_win32_to_posix_path_list_buf_size SIGFE
cygwin32_winpid_to_pid = cygwin_winpid_to_pid SIGFE
cygwin_attach_handle_to_fd SIGFE
cygwin_conv_path SIGFE
cygwin_conv_path_list SIGFE
cygwin_conv_to_full_posix_path SIGFE
cygwin_conv_to_full_win32_path SIGFE
cygwin_conv_to_posix_path SIGFE
cygwin_conv_to_win32_path SIGFE
cygwin_create_path SIGFE
cygwin_detach_dll SIGFE_MAYBE
cygwin_dll_init NOSIGFE
cygwin_internal NOSIGFE
cygwin_logon_user SIGFE
cygwin_posix_path_list_p NOSIGFE
cygwin_posix_to_win32_path_list SIGFE
cygwin_posix_to_win32_path_list_buf_size SIGFE
cygwin_set_impersonation_token SIGFE
cygwin_split_path NOSIGFE
cygwin_stackdump SIGFE
cygwin_umount SIGFE
cygwin_win32_to_posix_path_list SIGFE
cygwin_win32_to_posix_path_list_buf_size SIGFE
cygwin_winpid_to_pid SIGFE
daemon SIGFE
difftime NOSIGFE
_difftime = difftime NOSIGFE
dirfd SIGFE
_dirfd = dirfd SIGFE
dirname NOSIGFE
div NOSIGFE
_div = div NOSIGFE
dlclose SIGFE
dlerror NOSIGFE
dlfork NOSIGFE
_dll_crt0@@0 NOSIGFE
dll_crt0__FP11per_process NOSIGFE # dll_crt0(per_process *)
dll_dllcrt0 NOSIGFE
dll_entry@@12 NOSIGFE
dll_noncygwin_dllcrt0 NOSIGFE
dlopen SIGFE
dlsym SIGFE
dn_comp = __dn_comp SIGFE
__dn_comp SIGFE
dn_expand = __dn_expand SIGFE
__dn_expand SIGFE
dn_skipname = __dn_skipname SIGFE
__dn_skipname SIGFE
dprintf SIGFE
drand48 NOSIGFE
_drand48 = drand48 NOSIGFE
drem NOSIGFE
_drem = drem NOSIGFE
dremf NOSIGFE
_dremf = dremf NOSIGFE
dup SIGFE
_dup = dup SIGFE
dup2 SIGFE
_dup2 = dup2 SIGFE
dup3 SIGFE
eaccess = euidaccess SIGFE
ecvt SIGFE
_ecvt = ecvt SIGFE
ecvtbuf SIGFE
_ecvtbuf = ecvtbuf SIGFE
ecvtf SIGFE
_ecvtf = ecvtf SIGFE
endgrent NOSIGFE
_endgrent = endgrent NOSIGFE
endhostent NOSIGFE
endmntent NOSIGFE
_endmntent = endmntent NOSIGFE
endprotoent = cygwin_endprotoent SIGFE
endpwent NOSIGFE
_endpwent = endpwent NOSIGFE
endservent = cygwin_endservent SIGFE
endusershell SIGFE
endutent SIGFE
_endutent = endutent SIGFE
endutxent SIGFE
envz_add SIGFE
__envz_add = envz_add SIGFE
envz_entry NOSIGFE
__envz_entry = envz_entry NOSIGFE
envz_get NOSIGFE
__envz_get = envz_get NOSIGFE
envz_merge SIGFE
__envz_merge = envz_merge SIGFE
envz_remove SIGFE
__envz_remove = envz_remove SIGFE
envz_strip SIGFE
__envz_strip = envz_strip SIGFE
__eprintf SIGFE
erand48 NOSIGFE
_erand48 = erand48 NOSIGFE
erf NOSIGFE
_erf = erf NOSIGFE
erfc NOSIGFE
_erfc = erfc NOSIGFE
erfcf NOSIGFE
_erfcf = erfcf NOSIGFE
erff NOSIGFE
_erff = erff NOSIGFE
err SIGFE
__errno NOSIGFE
error SIGFE
error_at_line SIGFE
errx SIGFE
euidaccess SIGFE
execl SIGFE
_execl = execl SIGFE
execle SIGFE
_execle = execle SIGFE
execlp SIGFE
_execlp = execlp SIGFE
execv SIGFE
_execv = execv SIGFE
execve SIGFE
_execve = execve SIGFE
execvp SIGFE
_execvp = execvp SIGFE
execvpe SIGFE
exit = cygwin_exit SIGFE
_exit SIGFE
exp NOSIGFE
_exp = exp NOSIGFE
exp10 NOSIGFE
exp10f NOSIGFE
exp2 NOSIGFE
exp2f NOSIGFE
expf NOSIGFE
_expf = expf NOSIGFE
expm1 NOSIGFE
_expm1 = expm1 NOSIGFE
expm1f NOSIGFE
_expm1f = expm1f NOSIGFE
_f_atan2 NOSIGFE
__f_atan2 = _f_atan2 NOSIGFE
_f_atan2f NOSIGFE
__f_atan2f = _f_atan2f NOSIGFE
_f_exp NOSIGFE
__f_exp = _f_exp NOSIGFE
_f_expf NOSIGFE
__f_expf = _f_expf NOSIGFE
_f_frexp NOSIGFE
__f_frexp = _f_frexp NOSIGFE
_f_frexpf NOSIGFE
__f_frexpf = _f_frexpf NOSIGFE
_f_ldexp NOSIGFE
__f_ldexp = _f_ldexp NOSIGFE
_f_ldexpf NOSIGFE
__f_ldexpf = _f_ldexpf NOSIGFE
_f_llrint NOSIGFE
_f_llrintf NOSIGFE
_f_llrintl NOSIGFE
_f_log NOSIGFE
__f_log = _f_log NOSIGFE
_f_log10 NOSIGFE
__f_log10 = _f_log10 NOSIGFE
_f_log10f NOSIGFE
__f_log10f = _f_log10f NOSIGFE
_f_logf NOSIGFE
__f_logf = _f_logf NOSIGFE
_f_lrint NOSIGFE
_f_lrintf NOSIGFE
_f_lrintl NOSIGFE
_f_pow NOSIGFE
__f_pow = _f_pow NOSIGFE
_f_powf NOSIGFE
__f_powf = _f_powf NOSIGFE
_f_rint NOSIGFE
_f_rintf NOSIGFE
_f_rintl NOSIGFE
_f_tan NOSIGFE
__f_tan = _f_tan NOSIGFE
_f_tanf NOSIGFE
__f_tanf = _f_tanf NOSIGFE
fabs NOSIGFE
_fabs = fabs NOSIGFE
fabsf NOSIGFE
_fabsf = fabsf NOSIGFE
faccessat SIGFE
facl SIGFE
_facl = facl SIGFE
_facl32 = facl32 SIGFE
fchdir SIGFE
_fchdir = fchdir SIGFE
fchmod SIGFE
_fchmod = fchmod SIGFE
fchmodat SIGFE
fchown SIGFE
_fchown = fchown SIGFE
_fchown32 = fchown32 SIGFE
fchownat SIGFE
fclose SIGFE
_fclose = fclose SIGFE
fcloseall SIGFE
_fcloseall = fcloseall SIGFE
fcloseall_r = _fcloseall_r SIGFE
_fcloseall_r SIGFE
fcntl SIGFE
_fcntl = fcntl SIGFE
_fcntl64 = fcntl64 SIGFE
fcvt SIGFE
_fcvt = fcvt SIGFE
fcvtbuf SIGFE
_fcvtbuf = fcvtbuf SIGFE
fcvtf SIGFE
_fcvtf = fcvtf SIGFE
fdatasync SIGFE
fdim NOSIGFE
fdimf NOSIGFE
fdopen SIGFE
_fdopen = fdopen SIGFE
_fdopen64 = fdopen64 SIGFE
fdopendir SIGFE
feclearexcept NOSIGFE
fedisableexcept NOSIGFE
feenableexcept SIGFE
fegetenv NOSIGFE
fegetexcept NOSIGFE
fegetexceptflag NOSIGFE
fegetprec NOSIGFE
fegetround NOSIGFE
feholdexcept SIGFE
_feinitialise NOSIGFE
feof SIGFE
_feof = feof SIGFE
feraiseexcept SIGFE
ferror SIGFE
_ferror = ferror SIGFE
fesetenv SIGFE
fesetexceptflag SIGFE
fesetprec NOSIGFE
fesetround NOSIGFE
fetestexcept NOSIGFE
feupdateenv SIGFE
fexecve SIGFE
fflush SIGFE
_fflush = fflush SIGFE
ffs NOSIGFE
_ffs = ffs NOSIGFE
fgetc SIGFE
_fgetc = fgetc SIGFE
fgetpos SIGFE
_fgetpos = fgetpos SIGFE
_fgetpos64 = fgetpos64 SIGFE
fgets SIGFE
_fgets = fgets SIGFE
fgetwc SIGFE
fgetws SIGFE
fgetxattr SIGFE
fileno SIGFE
_fileno = fileno SIGFE
finite NOSIGFE
_finite = finite NOSIGFE
finitef NOSIGFE
_finitef = finitef NOSIGFE
fiprintf SIGFE
_fiprintf = fiprintf SIGFE
flistxattr SIGFE
flock SIGFE
flockfile SIGFE
floor NOSIGFE
_floor = floor NOSIGFE
floorf NOSIGFE
_floorf = floorf NOSIGFE
fma NOSIGFE
fmaf NOSIGFE
fmax NOSIGFE
fmaxf NOSIGFE
fmemopen SIGFE
fmin NOSIGFE
fminf NOSIGFE
fmod NOSIGFE
_fmod = fmod NOSIGFE
fmodf NOSIGFE
_fmodf = fmodf NOSIGFE
fnmatch NOSIGFE
_fnmatch = fnmatch NOSIGFE
fopen SIGFE
_fopen = fopen SIGFE
_fopen64 = fopen64 SIGFE
fopencookie SIGFE
fork SIGFE
_fork = fork SIGFE
forkpty SIGFE
fpathconf SIGFE
__fpclassifyd NOSIGFE
__fpclassifyf NOSIGFE
fprintf SIGFE
_fprintf = fprintf SIGFE
fpurge SIGFE
__fpurge SIGFE
fputc SIGFE
_fputc = fputc SIGFE
fputs SIGFE
_fputs = fputs SIGFE
fputwc SIGFE
fputws SIGFE
fread SIGFE
_fread = fread SIGFE
free SIGFE
_free = free SIGFE
freeaddrinfo = cygwin_freeaddrinfo SIGFE
freeifaddrs SIGFE
fremovexattr SIGFE
freopen SIGFE
_freopen = freopen SIGFE
_freopen64 = freopen64 SIGFE
frexp NOSIGFE
_frexp = frexp NOSIGFE
frexpf NOSIGFE
_frexpf = frexpf NOSIGFE
fscanf SIGFE
_fscanf = fscanf SIGFE
fscanf_r = _fscanf_r SIGFE
_fscanf_r SIGFE
fseek SIGFE
_fseek = fseek SIGFE
fseeko SIGFE
_fseeko = fseeko SIGFE
_fseeko64 = fseeko64 SIGFE
fsetpos SIGFE
_fsetpos = fsetpos SIGFE
_fsetpos64 = fsetpos64 SIGFE
fsetxattr SIGFE
fstat SIGFE
_fstat = fstat SIGFE
_fstat64 = fstat64 SIGFE
fstatat SIGFE
fstatfs SIGFE
_fstatfs = fstatfs SIGFE
fstatvfs SIGFE
fsync SIGFE
_fsync = fsync SIGFE
ftell SIGFE
_ftell = ftell SIGFE
ftello SIGFE
_ftello = ftello SIGFE
_ftello64 = ftello64 SIGFE
ftime SIGFE
_ftime = ftime SIGFE
ftok SIGFE
_ftok = ftok SIGFE
ftruncate SIGFE
_ftruncate = ftruncate SIGFE
_ftruncate64 = ftruncate64 SIGFE
ftrylockfile SIGFE
fts_children SIGFE
fts_close SIGFE
fts_get_clientptr NOSIGFE
fts_get_stream NOSIGFE
fts_open SIGFE
fts_read SIGFE
fts_set NOSIGFE
fts_set_clientptr NOSIGFE
ftw SIGFE
funlockfile SIGFE
funopen SIGFE
futimens SIGFE
futimes SIGFE
futimesat SIGFE
fwide SIGFE
fwprintf SIGFE
fwrite SIGFE
_fwrite = fwrite SIGFE
fwscanf SIGFE
gai_strerror = cygwin_gai_strerror NOSIGFE
gamma NOSIGFE
_gamma = gamma NOSIGFE
gamma_r NOSIGFE
_gamma_r = gamma_r NOSIGFE
gammaf NOSIGFE
_gammaf = gammaf NOSIGFE
gammaf_r NOSIGFE
_gammaf_r = gammaf_r NOSIGFE
gcvt SIGFE
_gcvt = gcvt SIGFE
gcvtf SIGFE
_gcvtf = gcvtf SIGFE
get_avphys_pages SIGFE
get_current_dir_name SIGFE
get_nprocs SIGFE
get_nprocs_conf SIGFE
_get_osfhandle SIGFE
get_osfhandle = _get_osfhandle SIGFE
get_phys_pages SIGFE
getaddrinfo = cygwin_getaddrinfo SIGFE
getc SIGFE
_getc = getc SIGFE
getc_unlocked SIGFE
_getc_unlocked = getc_unlocked SIGFE
getchar SIGFE
_getchar = getchar SIGFE
getchar_unlocked SIGFE
_getchar_unlocked = getchar_unlocked SIGFE
getcwd SIGFE
_getcwd = getcwd SIGFE
getdelim = __getdelim SIGFE
__getdelim SIGFE
getdomainname SIGFE
_getdomainname = getdomainname SIGFE
getdtablesize NOSIGFE
_getdtablesize = getdtablesize NOSIGFE
getegid NOSIGFE
_getegid = getegid NOSIGFE
_getegid32 = getegid32 NOSIGFE
getenv NOSIGFE
_getenv = getenv NOSIGFE
geteuid NOSIGFE
_geteuid = geteuid NOSIGFE
_geteuid32 = geteuid32 NOSIGFE
getgid NOSIGFE
_getgid = getgid NOSIGFE
_getgid32 = getgid32 NOSIGFE
getgrent SIGFE
_getgrent = getgrent SIGFE
_getgrent32 = getgrent32 SIGFE
getgrgid SIGFE
_getgrgid = getgrgid SIGFE
_getgrgid32 = getgrgid32 SIGFE
getgrgid_r SIGFE
getgrnam SIGFE
_getgrnam = getgrnam SIGFE
_getgrnam32 = getgrnam32 SIGFE
getgrnam_r SIGFE
getgrouplist SIGFE
getgroups SIGFE
_getgroups = getgroups SIGFE
_getgroups32 = getgroups32 SIGFE
gethostbyaddr = cygwin_gethostbyaddr SIGFE
gethostbyname = cygwin_gethostbyname SIGFE
gethostbyname2 SIGFE
gethostid SIGFE
gethostname = cygwin_gethostname SIGFE
_gethostname = cygwin_gethostname SIGFE
getifaddrs SIGFE
getitimer SIGFE
getline = __getline SIGFE
__getline SIGFE
getlogin NOSIGFE
_getlogin = getlogin NOSIGFE
getlogin_r NOSIGFE
getmntent SIGFE
_getmntent = getmntent SIGFE
getmntent_r SIGFE
getmode SIGFE
_getmode = getmode SIGFE
getnameinfo = cygwin_getnameinfo SIGFE
getopt SIGFE
getopt_long SIGFE
getopt_long_only SIGFE
getpagesize SIGFE
_getpagesize = getpagesize SIGFE
getpass SIGFE
_getpass = getpass SIGFE
getpeereid SIGFE
getpeername = cygwin_getpeername SIGFE
getpgid SIGFE
getpgrp SIGFE
_getpgrp = getpgrp SIGFE
getpid NOSIGFE
_getpid = getpid NOSIGFE
getppid NOSIGFE
_getppid = getppid NOSIGFE
getpriority SIGFE
getprogname NOSIGFE
getprotobyname = cygwin_getprotobyname SIGFE
getprotobynumber = cygwin_getprotobynumber SIGFE
getprotoent = cygwin_getprotoent SIGFE
getpt SIGFE
getpwduid NOSIGFE
_getpwduid = getpwduid NOSIGFE
getpwent SIGFE
_getpwent = getpwent SIGFE
getpwnam SIGFE
_getpwnam = getpwnam SIGFE
getpwnam_r SIGFE
getpwuid SIGFE
_getpwuid = getpwuid SIGFE
_getpwuid32 = getpwuid32 SIGFE
getpwuid_r SIGFE
_getpwuid_r32 = getpwuid_r32 SIGFE
__getreent NOSIGFE
getrlimit SIGFE
_getrlimit = getrlimit SIGFE
getrusage SIGFE
_getrusage = getrusage SIGFE
gets SIGFE
_gets = gets SIGFE
getservbyname = cygwin_getservbyname SIGFE
getservbyport = cygwin_getservbyport SIGFE
getservent = cygwin_getservent SIGFE
getsid SIGFE
getsockname = cygwin_getsockname SIGFE
getsockopt = cygwin_getsockopt SIGFE
getsubopt NOSIGFE
gettimeofday SIGFE
_gettimeofday = gettimeofday SIGFE
getuid NOSIGFE
_getuid = getuid NOSIGFE
_getuid32 = getuid32 NOSIGFE
getusershell SIGFE
getutent SIGFE
_getutent = getutent SIGFE
getutid SIGFE
_getutid = getutid SIGFE
getutline SIGFE
getutxent SIGFE
getutxid SIGFE
getutxline SIGFE
getw SIGFE
_getw = getw SIGFE
getwc SIGFE
getwchar SIGFE
getwd SIGFE
_getwd = getwd SIGFE
getxattr SIGFE
glob SIGFE
glob_pattern_p
globfree SIGFE
gmtime SIGFE
_gmtime = gmtime SIGFE
gmtime_r SIGFE
_gmtime_r = gmtime_r SIGFE
grantpt NOSIGFE
hcreate SIGFE
hcreate_r SIGFE
hdestroy SIGFE
hdestroy_r SIGFE
herror = cygwin_herror SIGFE
hsearch SIGFE
hsearch_r SIGFE
hstrerror = cygwin_hstrerror NOSIGFE
htonl NOSIGFE
_htonl = htonl NOSIGFE
htons NOSIGFE
_htons = htons NOSIGFE
hypot NOSIGFE
_hypot = hypot NOSIGFE
hypotf NOSIGFE
_hypotf = hypotf NOSIGFE
if_freenameindex SIGFE
if_indextoname SIGFE
if_nameindex SIGFE
if_nametoindex SIGFE
ilogb NOSIGFE
_ilogb = ilogb NOSIGFE
ilogbf NOSIGFE
_ilogbf = ilogbf NOSIGFE
imaxabs = llabs NOSIGFE
imaxdiv = lldiv NOSIGFE
index NOSIGFE
_index = index NOSIGFE
inet_addr = cygwin_inet_addr SIGFE
inet_aton = cygwin_inet_aton SIGFE
inet_makeaddr NOSIGFE
inet_netof NOSIGFE
inet_network = cygwin_inet_network SIGFE
inet_ntoa = cygwin_inet_ntoa SIGFE
inet_ntop = cygwin_inet_ntop SIGFE
inet_pton = cygwin_inet_pton SIGFE
infinity NOSIGFE
_infinity = infinity NOSIGFE
__infinity NOSIGFE
infinityf NOSIGFE
_infinityf = infinityf NOSIGFE
initgroups SIGFE
_initgroups32 = initgroups32 SIGFE
initstate NOSIGFE
insque NOSIGFE
ioctl SIGFE
_ioctl = ioctl SIGFE
iprintf SIGFE
_iprintf = iprintf SIGFE
iruserok SIGFE
iruserok_sa SIGFE
isalnum NOSIGFE
_isalnum = isalnum NOSIGFE
isalpha NOSIGFE
_isalpha = isalpha NOSIGFE
isascii NOSIGFE
_isascii = isascii NOSIGFE
isatty SIGFE
_isatty = isatty SIGFE
isblank NOSIGFE
iscntrl NOSIGFE
_iscntrl = iscntrl NOSIGFE
isdigit NOSIGFE
_isdigit = isdigit NOSIGFE
isgraph NOSIGFE
_isgraph = isgraph NOSIGFE
isinf NOSIGFE
_isinf = isinf NOSIGFE
__isinfd NOSIGFE
isinff NOSIGFE
_isinff = isinff NOSIGFE
__isinff NOSIGFE
islower NOSIGFE
_islower = islower NOSIGFE
isnan NOSIGFE
_isnan = isnan NOSIGFE
__isnand NOSIGFE
isnanf NOSIGFE
_isnanf = isnanf NOSIGFE
__isnanf NOSIGFE
isprint NOSIGFE
_isprint = isprint NOSIGFE
ispunct NOSIGFE
_ispunct = ispunct NOSIGFE
isspace NOSIGFE
_isspace = isspace NOSIGFE
isupper NOSIGFE
_isupper = isupper NOSIGFE
iswalnum NOSIGFE
iswalpha NOSIGFE
iswblank NOSIGFE
iswcntrl NOSIGFE
iswctype NOSIGFE
iswdigit NOSIGFE
iswgraph NOSIGFE
iswlower NOSIGFE
iswprint NOSIGFE
iswpunct NOSIGFE
iswspace NOSIGFE
iswupper NOSIGFE
iswxdigit NOSIGFE
isxdigit NOSIGFE
_isxdigit = isxdigit NOSIGFE
j0 NOSIGFE
_j0 = j0 NOSIGFE
j0f NOSIGFE
_j0f = j0f NOSIGFE
j1 NOSIGFE
_j1 = j1 NOSIGFE
j1f NOSIGFE
_j1f = j1f NOSIGFE
jn NOSIGFE
_jn = jn NOSIGFE
jnf NOSIGFE
_jnf = jnf NOSIGFE
jrand48 NOSIGFE
_jrand48 = jrand48 NOSIGFE
kill SIGFE
_kill = kill SIGFE
killpg SIGFE
l64a NOSIGFE
labs NOSIGFE
_labs = labs NOSIGFE
lacl SIGFE
_lacl = lacl SIGFE
lchown SIGFE
_lchown = lchown SIGFE
_lchown32 = lchown32 SIGFE
lcong48 NOSIGFE
_lcong48 = lcong48 NOSIGFE
ldexp NOSIGFE
_ldexp = ldexp NOSIGFE
ldexpf NOSIGFE
_ldexpf = ldexpf NOSIGFE
ldiv NOSIGFE
_ldiv = ldiv NOSIGFE
lfind NOSIGFE
lgamma NOSIGFE
_lgamma = lgamma NOSIGFE
lgamma_r NOSIGFE
_lgamma_r = lgamma_r NOSIGFE
lgammaf NOSIGFE
_lgammaf = lgammaf NOSIGFE
lgammaf_r NOSIGFE
_lgammaf_r = lgammaf_r NOSIGFE
lgetxattr SIGFE
link SIGFE
_link = link SIGFE
linkat SIGFE
listen = cygwin_listen SIGFE
listxattr SIGFE
llabs NOSIGFE
lldiv NOSIGFE
llistxattr SIGFE
llrint = _f_llrint NOSIGFE
llrintf = _f_llrintf NOSIGFE
llrintl = _f_llrintl NOSIGFE
llround NOSIGFE
llroundf NOSIGFE
__locale_mb_cur_max NOSIGFE
localeconv NOSIGFE
_localeconv = localeconv NOSIGFE
localtime SIGFE
_localtime = localtime SIGFE
localtime_r SIGFE
_localtime_r = localtime_r SIGFE
lockf SIGFE
log NOSIGFE
_log = log NOSIGFE
log10 NOSIGFE
_log10 = log10 NOSIGFE
log10f NOSIGFE
_log10f = log10f NOSIGFE
log1p NOSIGFE
_log1p = log1p NOSIGFE
log1pf NOSIGFE
_log1pf = log1pf NOSIGFE
log2 NOSIGFE
log2f NOSIGFE
logb NOSIGFE
_logb = logb NOSIGFE
logbf NOSIGFE
_logbf = logbf NOSIGFE
logf NOSIGFE
_logf = logf NOSIGFE
login SIGFE
login_tty SIGFE
logout SIGFE
logwtmp SIGFE
longjmp NOSIGFE
_longjmp = longjmp NOSIGFE
lrand48 NOSIGFE
_lrand48 = lrand48 NOSIGFE
lremovexattr SIGFE
lrint = _f_lrint NOSIGFE
lrintf = _f_lrintf NOSIGFE
lrintl = _f_lrintl NOSIGFE
lround NOSIGFE
lroundf NOSIGFE
lsearch NOSIGFE
lseek SIGFE
_lseek = lseek SIGFE
_lseek64 = lseek64 SIGFE
lsetxattr SIGFE
lstat SIGFE
_lstat = lstat SIGFE
_lstat64 = lstat64 SIGFE
lutimes SIGFE
__main NOSIGFE
madvise = posix_madvise SIGFE
mallinfo SIGFE
malloc SIGFE
_malloc = malloc SIGFE
malloc_stats SIGFE
malloc_trim SIGFE
malloc_usable_size SIGFE
mallopt SIGFE
matherr NOSIGFE
_matherr = matherr NOSIGFE
mblen NOSIGFE
_mblen = mblen NOSIGFE
mbrlen NOSIGFE
mbrtowc NOSIGFE
mbsinit NOSIGFE
mbsnrtowcs NOSIGFE
mbsrtowcs NOSIGFE
mbstowcs NOSIGFE
_mbstowcs = mbstowcs NOSIGFE
mbtowc NOSIGFE
_mbtowc = mbtowc NOSIGFE
memalign SIGFE
memccpy NOSIGFE
_memccpy = memccpy NOSIGFE
memchr NOSIGFE
_memchr = memchr NOSIGFE
memcmp NOSIGFE
_memcmp = memcmp NOSIGFE
memcpy NOSIGFE
_memcpy = memcpy NOSIGFE
memmem NOSIGFE
memmove NOSIGFE
_memmove = memmove NOSIGFE
mempcpy NOSIGFE
__mempcpy = mempcpy NOSIGFE
memrchr NOSIGFE
memset NOSIGFE
_memset = memset NOSIGFE
mkdir SIGFE
_mkdir = mkdir SIGFE
mkdirat SIGFE
mkdtemp SIGFE
mkfifo SIGFE
mkfifoat SIGFE
mknod SIGFE
_mknod = mknod SIGFE
_mknod32 = mknod32 SIGFE
mknodat SIGFE
mkostemp SIGFE
mkostemps SIGFE
mkstemp SIGFE
_mkstemp = mkstemp SIGFE
mkstemps SIGFE
mktemp SIGFE
_mktemp = mktemp SIGFE
mktime SIGFE
_mktime = mktime SIGFE
mlock SIGFE
mmap SIGFE
_mmap64 = mmap64 SIGFE
modf NOSIGFE
_modf = modf NOSIGFE
modff NOSIGFE
_modff = modff NOSIGFE
mount SIGFE
_mount = mount SIGFE
mprotect SIGFE
mq_close SIGFE
mq_getattr SIGFE
mq_notify SIGFE
mq_open SIGFE
mq_receive SIGFE
mq_send SIGFE
mq_setattr SIGFE
mq_timedreceive SIGFE
mq_timedsend SIGFE
mq_unlink SIGFE
mrand48 NOSIGFE
msgctl SIGFE
msgget SIGFE
msgrcv SIGFE
msgsnd SIGFE
msync SIGFE
munlock SIGFE
munmap SIGFE
nan NOSIGFE
_nan = nan NOSIGFE
nanf NOSIGFE
_nanf = nanf NOSIGFE
nanosleep SIGFE
_nanosleep = nanosleep SIGFE
nearbyint NOSIGFE
nearbyintf NOSIGFE
nextafter NOSIGFE
_nextafter = nextafter NOSIGFE
nextafterf NOSIGFE
_nextafterf = nextafterf NOSIGFE
nftw SIGFE
nice SIGFE
_nice = nice SIGFE
nl_langinfo SIGFE
_nl_langinfo = nl_langinfo SIGFE
nrand48 NOSIGFE
_nrand48 = nrand48 NOSIGFE
ntohl NOSIGFE
_ntohl = ntohl NOSIGFE
ntohs NOSIGFE
_ntohs = ntohs NOSIGFE
on_exit SIGFE
open SIGFE
_open = open SIGFE
_open64
open_memstream SIGFE
open_wmemstream SIGFE
openat SIGFE
opendir SIGFE
__opendir_with_d_ino SIGFE
openlog SIGFE
_openlog = openlog SIGFE
openpty SIGFE
pathconf SIGFE
_pathconf = pathconf SIGFE
pause SIGFE
pclose SIGFE
_pclose = pclose SIGFE
perror SIGFE
_perror = perror SIGFE
pipe SIGFE
_pipe SIGFE
pipe2 SIGFE
poll SIGFE
_poll = poll SIGFE
popen SIGFE
_popen = popen SIGFE
posix_fadvise SIGFE
posix_fallocate SIGFE
posix_madvise SIGFE
posix_memalign SIGFE
posix_openpt SIGFE
posix_regcomp = regcomp SIGFE
posix_regerror = regerror SIGFE
posix_regexec = regexec SIGFE
posix_regfree = regfree SIGFE
pow NOSIGFE
_pow = pow NOSIGFE
pow10 NOSIGFE
pow10f NOSIGFE
powf NOSIGFE
_powf = powf NOSIGFE
ppoll SIGFE
pread SIGFE
printf SIGFE
_printf = printf SIGFE
pselect SIGFE
psiginfo SIGFE
psignal SIGFE
pthread_atfork SIGFE
pthread_attr_destroy SIGFE
pthread_attr_getdetachstate SIGFE
pthread_attr_getguardsize SIGFE
pthread_attr_getinheritsched SIGFE
pthread_attr_getschedparam SIGFE
pthread_attr_getschedpolicy SIGFE
pthread_attr_getscope SIGFE
pthread_attr_getstack SIGFE
pthread_attr_getstackaddr SIGFE
pthread_attr_getstacksize SIGFE
pthread_attr_init SIGFE
pthread_attr_setdetachstate SIGFE
pthread_attr_setguardsize SIGFE
pthread_attr_setinheritsched SIGFE
pthread_attr_setschedparam SIGFE
pthread_attr_setschedpolicy SIGFE
pthread_attr_setscope SIGFE
pthread_attr_setstack SIGFE
pthread_attr_setstackaddr SIGFE
pthread_attr_setstacksize SIGFE
pthread_cancel SIGFE
_pthread_cleanup_pop SIGFE
_pthread_cleanup_push SIGFE
pthread_cond_broadcast SIGFE
pthread_cond_destroy SIGFE
pthread_cond_init SIGFE
pthread_cond_signal SIGFE
pthread_cond_timedwait SIGFE
pthread_cond_wait SIGFE
pthread_condattr_destroy SIGFE
pthread_condattr_getclock SIGFE
pthread_condattr_getpshared SIGFE
pthread_condattr_init SIGFE
pthread_condattr_setclock SIGFE
pthread_condattr_setpshared SIGFE
pthread_continue SIGFE
pthread_create SIGFE
pthread_detach SIGFE
pthread_equal SIGFE
pthread_exit SIGFE
pthread_getattr_np SIGFE
pthread_getconcurrency SIGFE
pthread_getcpuclockid SIGFE
pthread_getschedparam SIGFE
pthread_getsequence_np SIGFE
pthread_getspecific SIGFE
pthread_join SIGFE
pthread_key_create SIGFE
pthread_key_delete SIGFE
pthread_kill SIGFE
pthread_mutex_destroy SIGFE
pthread_mutex_getprioceiling SIGFE
pthread_mutex_init SIGFE
pthread_mutex_lock SIGFE
pthread_mutex_setprioceiling SIGFE
pthread_mutex_trylock SIGFE
pthread_mutex_unlock SIGFE
pthread_mutexattr_destroy SIGFE
pthread_mutexattr_getprioceiling SIGFE
pthread_mutexattr_getprotocol SIGFE
pthread_mutexattr_getpshared SIGFE
pthread_mutexattr_gettype SIGFE
pthread_mutexattr_init SIGFE
pthread_mutexattr_setprioceiling SIGFE
pthread_mutexattr_setprotocol SIGFE
pthread_mutexattr_setpshared SIGFE
pthread_mutexattr_settype SIGFE
pthread_once SIGFE
pthread_rwlock_destroy SIGFE
pthread_rwlock_init SIGFE
pthread_rwlock_rdlock SIGFE
pthread_rwlock_tryrdlock SIGFE
pthread_rwlock_trywrlock SIGFE
pthread_rwlock_unlock SIGFE
pthread_rwlock_wrlock SIGFE
pthread_rwlockattr_destroy SIGFE
pthread_rwlockattr_getpshared SIGFE
pthread_rwlockattr_init SIGFE
pthread_rwlockattr_setpshared SIGFE
pthread_self SIGFE
pthread_setcancelstate SIGFE
pthread_setcanceltype SIGFE
pthread_setconcurrency SIGFE
pthread_setschedparam SIGFE
pthread_setschedprio SIGFE
pthread_setspecific SIGFE
pthread_sigmask SIGFE
pthread_sigqueue SIGFE
pthread_suspend SIGFE
pthread_spin_destroy SIGFE
pthread_spin_init SIGFE
pthread_spin_lock SIGFE
pthread_spin_trylock SIGFE
pthread_spin_unlock SIGFE
pthread_testcancel SIGFE
pthread_yield = sched_yield SIGFE
ptsname SIGFE
ptsname_r SIGFE
putc SIGFE
_putc = putc SIGFE
putc_unlocked SIGFE
_putc_unlocked = putc_unlocked SIGFE
putchar SIGFE
_putchar = putchar SIGFE
putchar_unlocked SIGFE
_putchar_unlocked = putchar_unlocked SIGFE
putenv SIGFE
_putenv = putenv SIGFE
puts SIGFE
_puts = puts SIGFE
pututline SIGFE
_pututline = pututline SIGFE
pututxline SIGFE
putw SIGFE
_putw = putw SIGFE
putwc SIGFE
putwchar SIGFE
pwrite SIGFE
qsort NOSIGFE
_qsort = qsort NOSIGFE
raise SIGFE
_raise = raise SIGFE
rand NOSIGFE
_rand = rand NOSIGFE
rand_r NOSIGFE
random NOSIGFE
rcmd = cygwin_rcmd SIGFE
rcmd_af = cygwin_rcmd_af SIGFE
read SIGFE
_read = read SIGFE
readdir SIGFE
_readdir = readdir SIGFE
readdir_r SIGFE
readlink SIGFE
_readlink = readlink SIGFE
readlinkat SIGFE
readv SIGFE
_readv = readv SIGFE
realloc SIGFE
_realloc = realloc SIGFE
reallocf SIGFE
realpath SIGFE
recv = cygwin_recv SIGFE
recvfrom = cygwin_recvfrom SIGFE
recvmsg = cygwin_recvmsg SIGFE
regcomp SIGFE
regerror SIGFE
regexec SIGFE
regfree SIGFE
remainder NOSIGFE
_remainder = remainder NOSIGFE
remainderf NOSIGFE
_remainderf = remainderf NOSIGFE
remove SIGFE
_remove = remove SIGFE
removexattr SIGFE
remque NOSIGFE
remquo NOSIGFE
remquof NOSIGFE
rename SIGFE
_rename = rename SIGFE
renameat SIGFE
res_close = __res_close SIGFE
__res_close SIGFE
res_init = __res_init SIGFE
__res_init SIGFE
res_mkquery = __res_mkquery SIGFE
__res_mkquery SIGFE
res_nclose = __res_nclose SIGFE
__res_nclose SIGFE
res_ninit = __res_ninit SIGFE
__res_ninit SIGFE
res_nmkquery = __res_nmkquery SIGFE
__res_nmkquery SIGFE
res_nquery = __res_nquery SIGFE
__res_nquery SIGFE
res_nquerydomain = __res_nquerydomain SIGFE
__res_nquerydomain SIGFE
res_nsearch = __res_nsearch SIGFE
__res_nsearch SIGFE
res_nsend = __res_nsend SIGFE
__res_nsend SIGFE
res_query = __res_query SIGFE
__res_query SIGFE
res_querydomain = __res_querydomain SIGFE
__res_querydomain SIGFE
res_search = __res_search SIGFE
__res_search SIGFE
res_send = __res_send SIGFE
__res_send SIGFE
__res_state SIGFE
revoke SIGFE
rewind SIGFE
_rewind = rewind SIGFE
rewinddir SIGFE
_rewinddir = rewinddir SIGFE
rexec = cygwin_rexec SIGFE
rindex NOSIGFE
_rindex = rindex NOSIGFE
rint = _f_rint NOSIGFE
rintf = _f_rintf NOSIGFE
rintl = _f_rintl NOSIGFE
rmdir SIGFE
_rmdir = rmdir SIGFE
round NOSIGFE
roundf NOSIGFE
rresvport = cygwin_rresvport SIGFE
rresvport_af = cygwin_rresvport_af SIGFE
ruserok SIGFE
sbrk SIGFE
_sbrk = sbrk SIGFE
scalb NOSIGFE
_scalb = scalb NOSIGFE
scalbf NOSIGFE
_scalbf = scalbf NOSIGFE
scalbln NOSIGFE
scalblnf NOSIGFE
scalbn NOSIGFE
_scalbn = scalbn NOSIGFE
scalbnf NOSIGFE
_scalbnf = scalbnf NOSIGFE
scandir SIGFE
_scandir = scandir SIGFE
scandirat SIGFE
scanf SIGFE
_scanf = scanf SIGFE
scanf_r = _scanf_r SIGFE
_scanf_r SIGFE
sched_get_priority_max SIGFE
sched_get_priority_min SIGFE
sched_getparam SIGFE
sched_getscheduler NOSIGFE
sched_rr_get_interval SIGFE
sched_setparam SIGFE
sched_setscheduler SIGFE
sched_yield SIGFE
seed48 NOSIGFE
_seed48 = seed48 NOSIGFE
seekdir SIGFE
_seekdir = seekdir SIGFE
_seekdir64 = seekdir64 SIGFE
select = cygwin_select SIGFE
_select = cygwin_select SIGFE
sem_close SIGFE
sem_destroy SIGFE
sem_getvalue SIGFE
sem_init SIGFE
sem_open SIGFE
sem_post SIGFE
sem_timedwait SIGFE
sem_trywait SIGFE
sem_unlink SIGFE
sem_wait SIGFE
semctl SIGFE
semget SIGFE
semop SIGFE
send = cygwin_send SIGFE
sendmsg = cygwin_sendmsg SIGFE
sendto = cygwin_sendto SIGFE
setbuf SIGFE
_setbuf = setbuf SIGFE
setbuffer SIGFE
setdtablesize SIGFE
_setdtablesize = setdtablesize SIGFE
setegid SIGFE
_setegid = setegid SIGFE
_setegid32 = setegid32 SIGFE
setenv SIGFE
_setenv = setenv SIGFE
seteuid SIGFE
_seteuid = seteuid SIGFE
_seteuid32 = seteuid32 SIGFE
setgid SIGFE
_setgid = setgid SIGFE
_setgid32 = setgid32 SIGFE
setgrent NOSIGFE
_setgrent = setgrent NOSIGFE
setgroups SIGFE
_setgroups = setgroups SIGFE
_setgroups32 = setgroups32 SIGFE
sethostent NOSIGFE
setitimer SIGFE
setjmp NOSIGFE
_setjmp = setjmp NOSIGFE
setlinebuf SIGFE
setlocale NOSIGFE
_setlocale = setlocale NOSIGFE
setlogmask NOSIGFE
setmntent SIGFE
_setmntent = setmntent SIGFE
setmode = cygwin_setmode SIGFE
_setmode = cygwin_setmode SIGFE
setpassent NOSIGFE
_setpassent = setpassent NOSIGFE
setpgid SIGFE
_setpgid = setpgid SIGFE
setpgrp SIGFE
_setpgrp = setpgrp SIGFE
setpriority SIGFE
setprogname NOSIGFE
setprotoent = cygwin_setprotoent SIGFE
setpwent NOSIGFE
_setpwent = setpwent NOSIGFE
setregid SIGFE
_setregid = setregid SIGFE
setregid32 SIGFE
_setregid32 = setregid32 SIGFE
setreuid SIGFE
_setreuid = setreuid SIGFE
setreuid32 SIGFE
_setreuid32 = setreuid32 SIGFE
setrlimit SIGFE
_setrlimit = setrlimit SIGFE
setservent = cygwin_setservent SIGFE
setsid SIGFE
_setsid = setsid SIGFE
setsockopt = cygwin_setsockopt SIGFE
setstate NOSIGFE
settimeofday SIGFE
_settimeofday = settimeofday SIGFE
setuid SIGFE
_setuid = setuid SIGFE
_setuid32 = setuid32 SIGFE
setusershell SIGFE
setutent SIGFE
_setutent = setutent SIGFE
setutxent SIGFE
setvbuf SIGFE
_setvbuf = setvbuf SIGFE
setxattr SIGFE
sexecl = sexecve_is_bad SIGFE
sexecle = sexecve_is_bad SIGFE
sexeclp = sexecve_is_bad SIGFE
sexeclpe = sexecve_is_bad SIGFE
sexecp = sexecve_is_bad SIGFE
sexecv = sexecve_is_bad SIGFE
sexecve = sexecve_is_bad SIGFE
sexecvpe = sexecve_is_bad SIGFE
shm_open SIGFE
shm_unlink SIGFE
shmat SIGFE
shmctl SIGFE
shmdt SIGFE
shmget SIGFE
shutdown = cygwin_shutdown SIGFE
sigaction SIGFE
sigaddset SIGFE
sigdelset SIGFE
sigemptyset NOSIGFE
sigfillset NOSIGFE
sighold SIGFE
sigignore SIGFE
siginterrupt SIGFE
sigismember SIGFE
signal SIGFE
__signbitd NOSIGFE
__signbitf NOSIGFE
__signgam NOSIGFE
significand NOSIGFE
significandf NOSIGFE
sigpause SIGFE
sigpending SIGFE
sigprocmask SIGFE
sigqueue SIGFE
sigrelse SIGFE
sigset SIGFE
sigsuspend SIGFE
sigwait SIGFE
sigwaitinfo SIGFE
sin NOSIGFE
_sin = sin NOSIGFE
sincos NOSIGFE
sincosf NOSIGFE
sinf NOSIGFE
_sinf = sinf NOSIGFE
sinh NOSIGFE
_sinh = sinh NOSIGFE
sinhf NOSIGFE
_sinhf = sinhf NOSIGFE
siprintf SIGFE
_siprintf = siprintf SIGFE
sleep SIGFE
_sleep = sleep SIGFE
snprintf SIGFE
_snprintf = snprintf SIGFE
socket = cygwin_socket SIGFE
socketpair SIGFE
spawnl SIGFE
_spawnl = spawnl SIGFE
spawnle SIGFE
_spawnle = spawnle SIGFE
spawnlp SIGFE
_spawnlp = spawnlp SIGFE
spawnlpe SIGFE
_spawnlpe = spawnlpe SIGFE
spawnv SIGFE
_spawnv = spawnv SIGFE
spawnve SIGFE
_spawnve = spawnve SIGFE
spawnvp SIGFE
_spawnvp = spawnvp SIGFE
spawnvpe SIGFE
_spawnvpe = spawnvpe SIGFE
sprintf SIGFE
_sprintf = sprintf SIGFE
sqrt NOSIGFE
_sqrt = sqrt NOSIGFE
sqrtf NOSIGFE
_sqrtf = sqrtf NOSIGFE
srand NOSIGFE
_srand = srand NOSIGFE
srand48 NOSIGFE
_srand48 = srand48 NOSIGFE
srandom NOSIGFE
__srget SIGFE
__srget_r SIGFE
sscanf SIGFE
_sscanf = sscanf SIGFE
sscanf_r = _sscanf_r SIGFE
_sscanf_r SIGFE
stat SIGFE
_stat = stat SIGFE
_stat64 = stat64 SIGFE
statfs SIGFE
_statfs = statfs SIGFE
statvfs SIGFE
stpcpy NOSIGFE
stpncpy NOSIGFE
strcasecmp NOSIGFE
_strcasecmp = strcasecmp NOSIGFE
strcasestr NOSIGFE
strcat NOSIGFE
_strcat = strcat NOSIGFE
strchr NOSIGFE
_strchr = strchr NOSIGFE
strchrnul NOSIGFE
strcmp NOSIGFE
_strcmp = strcmp NOSIGFE
strcoll NOSIGFE
_strcoll = strcoll NOSIGFE
strcpy NOSIGFE
_strcpy = strcpy NOSIGFE
strcspn NOSIGFE
_strcspn = strcspn NOSIGFE
strdup SIGFE
_strdup = strdup SIGFE
strerror SIGFE
_strerror = strerror SIGFE
strerror_r SIGFE
_strerror_r = strerror_r SIGFE
strfmon SIGFE
strftime SIGFE
_strftime = strftime SIGFE
strlcat NOSIGFE
_strlcat = strlcat NOSIGFE
strlcpy NOSIGFE
_strlcpy = strlcpy NOSIGFE
strlen NOSIGFE
_strlen = strlen NOSIGFE
strlwr NOSIGFE
_strlwr = strlwr NOSIGFE
strncasecmp NOSIGFE
_strncasecmp = strncasecmp NOSIGFE
strncat NOSIGFE
_strncat = strncat NOSIGFE
strncmp NOSIGFE
_strncmp = strncmp NOSIGFE
strncpy NOSIGFE
_strncpy = strncpy NOSIGFE
strndup SIGFE
strnlen NOSIGFE
strpbrk NOSIGFE
_strpbrk = strpbrk NOSIGFE
strptime SIGFE
_strptime = strptime SIGFE
strrchr NOSIGFE
_strrchr = strrchr NOSIGFE
strsep NOSIGFE
_strsep = strsep NOSIGFE
strsignal SIGFE
strspn NOSIGFE
_strspn = strspn NOSIGFE
strstr NOSIGFE
_strstr = strstr NOSIGFE
strtod SIGFE
_strtod = strtod SIGFE
strtodf = strtof SIGFE
_strtodf = strtof SIGFE
strtof SIGFE
strtoimax = strtoll NOSIGFE
strtok NOSIGFE
_strtok = strtok NOSIGFE
strtok_r NOSIGFE
_strtok_r = strtok_r NOSIGFE
strtol NOSIGFE
_strtol = strtol NOSIGFE
_strtold SIGFE
strtoll NOSIGFE
_strtoll = strtoll NOSIGFE
strtosigno NOSIGFE
strtoul NOSIGFE
_strtoul = strtoul NOSIGFE
strtoull NOSIGFE
_strtoull = strtoull NOSIGFE
strtoumax = strtoull NOSIGFE
strupr NOSIGFE
_strupr = strupr NOSIGFE
strxfrm NOSIGFE
_strxfrm = strxfrm NOSIGFE
swab NOSIGFE
_swab = swab NOSIGFE
__swbuf SIGFE
__swbuf_r SIGFE
swprintf SIGFE
swscanf SIGFE
symlink SIGFE
_symlink = symlink SIGFE
symlinkat SIGFE
sync SIGFE
sysconf SIGFE
_sysconf = sysconf SIGFE
sysinfo SIGFE
syslog SIGFE
_syslog = syslog SIGFE
system SIGFE
_system = system SIGFE
tan NOSIGFE
_tan = tan NOSIGFE
tanf NOSIGFE
_tanf = tanf NOSIGFE
tanh NOSIGFE
_tanh = tanh NOSIGFE
tanhf NOSIGFE
_tanhf = tanhf NOSIGFE
tcdrain SIGFE
tcflow SIGFE
tcflush SIGFE
tcgetattr SIGFE
tcgetpgrp SIGFE
tcgetsid SIGFE
tcsendbreak SIGFE
tcsetattr SIGFE
tcsetpgrp SIGFE
tdelete SIGFE
tdestroy NOSIGFE
telldir SIGFE
_telldir = telldir SIGFE
_telldir64 = telldir64 SIGFE
tempnam SIGFE
_tempnam = tempnam SIGFE
tfind NOSIGFE
tgamma NOSIGFE
tgammaf NOSIGFE
time SIGFE
_time = time SIGFE
timegm NOSIGFE
timelocal SIGFE
timer_create SIGFE
timer_delete SIGFE
timer_gettime SIGFE
timer_settime SIGFE
times SIGFE
_times = times SIGFE
timezone SIGFE
tmpfile SIGFE
_tmpfile = tmpfile SIGFE
_tmpfile64 = tmpfile64 SIGFE
tmpnam SIGFE
_tmpnam = tmpnam SIGFE
toascii NOSIGFE
_toascii = toascii NOSIGFE
tolower NOSIGFE
_tolower = tolower NOSIGFE
toupper NOSIGFE
_toupper = toupper NOSIGFE
towctrans NOSIGFE
towlower NOSIGFE
towupper NOSIGFE
trunc NOSIGFE
truncate SIGFE
_truncate = truncate SIGFE
_truncate64 = truncate64 SIGFE
truncf NOSIGFE
tsearch SIGFE
ttyname SIGFE
_ttyname = ttyname SIGFE
ttyname_r SIGFE
ttyslot NOSIGFE
twalk NOSIGFE
tzset SIGFE
_tzset = tzset SIGFE
ualarm SIGFE
_ualarm = ualarm SIGFE
umask NOSIGFE
_umask = umask NOSIGFE
umount SIGFE
_umount = umount SIGFE
uname SIGFE
_uname = uname SIGFE
ungetc SIGFE
_ungetc = ungetc SIGFE
ungetwc SIGFE
unlink SIGFE
_unlink = unlink SIGFE
unlinkat SIGFE
unlockpt NOSIGFE
unsetenv SIGFE
_unsetenv = unsetenv SIGFE
updwtmp SIGFE
updwtmpx SIGFE
usleep SIGFE
_usleep = usleep SIGFE
utime SIGFE
_utime = utime SIGFE
utimensat SIGFE
utimes SIGFE
_utimes = utimes SIGFE
utmpname SIGFE
_utmpname = utmpname SIGFE
utmpxname SIGFE
valloc SIGFE
vasnprintf SIGFE
vasprintf SIGFE
_vasprintf = vasprintf SIGFE
vasprintf_r = _vasprintf_r SIGFE
_vasprintf_r SIGFE
vdprintf SIGFE
verr SIGFE
verrx SIGFE
vfiprintf SIGFE
_vfiprintf = vfiprintf SIGFE
vfork SIGFE
_vfork = vfork SIGFE
vfprintf SIGFE
_vfprintf = vfprintf SIGFE
vfscanf SIGFE
_vfscanf = vfscanf SIGFE
vfscanf_r = _vfscanf_r SIGFE
_vfscanf_r SIGFE
vfwprintf SIGFE
vfwscanf SIGFE
vhangup SIGFE
_vhangup = vhangup SIGFE
vprintf SIGFE
_vprintf = vprintf SIGFE
vscanf SIGFE
_vscanf = vscanf SIGFE
vscanf_r = _vscanf_r SIGFE
_vscanf_r SIGFE
vsnprintf SIGFE
_vsnprintf = vsnprintf SIGFE
vsprintf SIGFE
_vsprintf = vsprintf SIGFE
vsscanf SIGFE
_vsscanf = vsscanf SIGFE
vsscanf_r = _vsscanf_r SIGFE
_vsscanf_r SIGFE
vswprintf SIGFE
vswscanf SIGFE
vsyslog SIGFE
vwarn SIGFE
vwarnx SIGFE
vwprintf SIGFE
vwscanf SIGFE
wait SIGFE
_wait = wait SIGFE
wait3 SIGFE
wait4 SIGFE
waitpid SIGFE
_waitpid = waitpid SIGFE
warn SIGFE
warnx SIGFE
wcpcpy NOSIGFE
wcpncpy NOSIGFE
wcrtomb NOSIGFE
wcscasecmp NOSIGFE
wcscat NOSIGFE
wcschr NOSIGFE
wcscmp NOSIGFE
_wcscmp = wcscmp NOSIGFE
wcscoll NOSIGFE
wcscpy NOSIGFE
wcscspn NOSIGFE
wcsdup NOSIGFE
wcsftime SIGFE
wcslcat NOSIGFE
wcslcpy NOSIGFE
wcslen NOSIGFE
_wcslen = wcslen NOSIGFE
wcsncasecmp NOSIGFE
wcsncat NOSIGFE
wcsncmp NOSIGFE
wcsncpy NOSIGFE
wcsnlen NOSIGFE
wcsnrtombs NOSIGFE
wcspbrk NOSIGFE
wcsrchr NOSIGFE
wcsrtombs NOSIGFE
wcsspn NOSIGFE
wcsstr NOSIGFE
wcstod NOSIGFE
wcstof NOSIGFE
wcstoimax = wcstoll NOSIGFE
wcstok NOSIGFE
wcstol NOSIGFE
wcstoll NOSIGFE
wcstombs NOSIGFE
_wcstombs = wcstombs NOSIGFE
wcstoul NOSIGFE
wcstoull NOSIGFE
wcstoumax = wcstoull NOSIGFE
wcswidth NOSIGFE
wcsxfrm NOSIGFE
wctob NOSIGFE
wctomb NOSIGFE
_wctomb = wctomb NOSIGFE
wctrans NOSIGFE
wctype NOSIGFE
wcwidth NOSIGFE
wmemchr NOSIGFE
wmemcmp NOSIGFE
wmemcpy NOSIGFE
wmemmove NOSIGFE
wmemset NOSIGFE
wordexp NOSIGFE
wordfree NOSIGFE
wprintf SIGFE
write SIGFE
_write = write SIGFE
writev SIGFE
_writev = writev SIGFE
wscanf SIGFE
xdr_array SIGFE
xdr_bool SIGFE
xdr_bytes SIGFE
xdr_char SIGFE
xdr_double SIGFE
xdr_enum SIGFE
xdr_float SIGFE
xdr_free SIGFE
xdr_hyper SIGFE
xdr_int SIGFE
xdr_int16_t SIGFE
xdr_int32_t SIGFE
xdr_int64_t SIGFE
xdr_int8_t SIGFE
xdr_long SIGFE
xdr_longlong_t SIGFE
xdr_netobj SIGFE
xdr_opaque SIGFE
xdr_pointer SIGFE
xdr_reference SIGFE
xdr_short SIGFE
xdr_sizeof SIGFE
xdr_string SIGFE
xdr_u_char SIGFE
xdr_u_hyper SIGFE
xdr_u_int SIGFE
xdr_u_int16_t SIGFE
xdr_u_int32_t SIGFE
xdr_u_int64_t SIGFE
xdr_u_int8_t SIGFE
xdr_u_long SIGFE
xdr_u_longlong_t SIGFE
xdr_u_short SIGFE
xdr_uint16_t SIGFE
xdr_uint32_t SIGFE
xdr_uint64_t SIGFE
xdr_uint8_t SIGFE
xdr_union SIGFE
xdr_vector SIGFE
xdr_void SIGFE
xdr_wrapstring SIGFE
xdrmem_create SIGFE
xdrrec_create SIGFE
xdrrec_endofrecord SIGFE
xdrrec_eof SIGFE
xdrrec_skiprecord SIGFE
__xdrrec_getrec SIGFE
__xdrrec_setnonblock SIGFE
xdrstdio_create SIGFE
__xpg_strerror_r SIGFE
y0 NOSIGFE
y0f NOSIGFE
y1 NOSIGFE
y1f NOSIGFE
yn NOSIGFE
ynf NOSIGFE
__wrap__ZdaPv NOSIGFE               # void operator delete[](void *p) throw()
__wrap__ZdaPvRKSt9nothrow_t NOSIGFE # void operator delete[](void *p, const std::nothrow_t &nt) throw()
__wrap__ZdlPv NOSIGFE               # void operator delete(void *p) throw()
__wrap__ZdlPvRKSt9nothrow_t NOSIGFE # void operator delete(void *p, const std::nothrow_t &nt) throw()
__wrap__Znaj NOSIGFE                # void *operator new[](std::size_t sz) throw (std::bad_alloc)
__wrap__ZnajRKSt9nothrow_t NOSIGFE  # void *operator new[](std::size_t sz, const std::nothrow_t &nt) throw()
__wrap__Znwj NOSIGFE                # void *operator new(std::size_t sz) throw (std::bad_alloc)
__wrap__ZnwjRKSt9nothrow_t NOSIGFE  # void *operator new(std::size_t sz, const std::nothrow_t &nt) throw()
@


1.258
log
@	* Merge in cygwin-64bit-branch.
@
text
@@


1.257
log
@* termios.cc (cfsetspeed): New function.
* cygwin.din (cfsetspeed): Export.
* posix.sgml (std-bsd): Add cfsetspeed.
* include/sys/termios.h (cfsetspeed): Declare.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d681 2
a682 2
get_osfhandle SIGFE
_get_osfhandle = get_osfhandle SIGFE
@


1.256
log
@	* cygwin.din (getmntent_r): Export.
	* mount.cc (getmntent_r): New function.
	* posix.sgml (std-gnu): Add getmntent_r.
	* include/mntent.h (getmntent_r): Declare.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d211 1
@


1.256.2.1
log
@Pull in changes from HEAD
@
text
@a210 1
cfsetspeed SIGFE
@


1.256.2.2
log
@	* cygwin.din (_get_osfhandle): Make main export.  Define get_osfhandle
	from here.
	* cygwin64.din (_get_osfhandle): Rename from get_osfhandle.
	(_setmode): Rename from setmode.
	* include/io.h: Ditto. Define unprefixed names with preprocessor
	macros for backwards source compatibility.
	(access): Remove.
	* syscalls.cc (_setmode): Rename from setmode.
	(cygwin_setmode): Call _setmode.
	(_get_osfhandle): Rename from get_osfhandle.
@
text
@d681 2
a682 2
_get_osfhandle SIGFE
get_osfhandle = _get_osfhandle SIGFE
@


1.255
log
@	* cygwin.din (memrchr): Export.
	* posix.sgml (std-gnu): Add memrchr.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d741 1
@


1.254
log
@	* cygwin.din (scandirat): Export.
	* posix.sgml (std-gnu): Add scandirat.
	* syscalls.cc (scandirat): New function.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
	* include/sys/dirent.h (scandirat): Declare.
@
text
@d1065 1
@


1.253
log
@	* cygwin.din: Fix order (DATA first).
@
text
@d1409 1
@


1.252
log
@	* cygwin.din (pthread_sigqueue): Export.
	* posix.sgml (std-gnu): Add pthread_sigqueue.
	* thread.cc (pthread_sigqueue): New function.
	* include/thread.h (pthread_sigqueue): New function.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d16 2
d29 2
a510 2
_fe_dfl_env DATA
_fe_nomask_env DATA
a1180 2
program_invocation_name DATA
program_invocation_short_name DATA
@


1.251
log
@	* cygwin.din (get_current_dir_name): Export.
	* path.cc (get_current_dir_name): New function.
	* posix.sgml (std-gnu): Add get_current_dir_name.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d1273 1
@


1.250
log
@	* cygwin.din (getpt): Export.
	* posix.sgml (std-gnu): Add getpt.
	* tty.cc (getpt): New function.
	* include/cygwin/stdlib.h [!__STRICT_ANSI__] (getpt): Declare.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d675 1
@


1.249
log
@* cygwin.din (ptsname_r): Export.
* fhandler.cc (fhandler_base::ptsname_r): Define.
* fhandler.h (fhandler_base::ptsname): Delete.
(fhandler_base::ptsname_r): Declare.
(fhandler_pty_master::ptsname_r): Declare.
* fhandler_tty.cc (fhandler_pty_master::ptsname): Delete.
(fhandler_pty_master::ptsname_r): New reentrant function derived from previous
ptsname.
* syscalls.cc (ptsname_r): Implement new function with functionality similar to
Linux.
(ptsname): Use ptsname_r () to fill out buf.
* include/cygwin/stdlib.h (ptsname_r): Declare.
* include/cygwin/version.h: Bump CYGWIN_VERSION_API_MINOR to 255 to reflect
export of ptsname_r.
* pinfo.cc (pinfo::wait): Return bool rather than int.
* pinfo.h (info::wait): Ditto.
(pinfo::reattach): Define !defined(_SIGPROC_H) case for consistency.
* sigproc.cc (child_info_spawn::reattach_children): Use correct dwProcessId
rather than pid when duplicating handle.
@
text
@d762 1
@


1.248
log
@	* cygwin.din (getgrouplist): Export.
	* grp.cc (get_groups): New static function to run the core functionality
	of initgroups and getgrouplist.
	(initgroups32): Call get_groups and just create supplementary group
	list in cygheap.  Rename name of first argument to "user".  Add an
	assertion to test for a NULL user name.
	(initgroups): Rename name of first argument to "user".
	(getgrouplist): New function.
	* posix.sgml (std-bsd): Add getgrouplist.
	* include/cygwin/grp.h (getgrouplist): Declare.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1280 1
@


1.247
log
@* cygwin.din: Remove some _tc* exports.  Add tcgetsid().
* dtable.cc (fh_alloc): Revert ill-advised setting of major/minor.  Use new
is_dev_tty to remember that this device was opened as /dev/tty.
* fhandler.cc (fhandler_base::fstat): Remove leftover debugging statement.
(fhandler_base::tcgetsid): New function.
* fhandler.h ((fhandler_base::tcgetsid): Declare new function.
(fhandler_base::is_dev_tty): Ditto.
(fhandler_termios::opened_as_dev_tty): Declare new field.
(fhandler_termios::is_dev_tty): Declare new function.
(fhandler_termios::tcgetsid): Ditto.
(fhandler_pty_common::use_archetype): Move here from subclass.
(fhandler_pty_slave::use_archetype): Move up.
(fhandler_pty_master::use_archetype): Ditto.
* fhandler_console.cc (fhandler_console::ioctl): Rename second argument from
`buf' to `arg' for consistency.  Call ioctl_termios for common fhandler_termios
ioctl handling.
* fhandler_tty.cc (fhandler_pty_slave::ioctl): Call ioctl_termios for common
fhandler_termios ioctl handling.
(fhandler_pty_master::ioctl): Ditto.
* fhandler_termios.cc (fhandler_termios::tcgetsid): Implement new function.
(fhandler_termios::ioctl_termios): Ditto.  Implements TIOCSCTTY handling.
* syscalls.cc (stat_worker): Set /dev/tty device info when appropriate.
* termios.cc (tcgetpgrp): Avoid extraneous "isatty" check.
(tcgetsid): Implement new function.
* include/cygwin/version.h: Bump CYGWIN_VERSION_API_MINOR to 253.
* include/sys/termios.h (TIOCSCTTY): Define.
@
text
@d719 1
@


1.246
log
@* cygwin.din (clock_nanosleep): Export.
* posix.sgml (std-notimpl): Move clock_nanosleep from here...
(std-susv4): ... to here.
(std-notes): Note limitations of clock_nanosleep.
* signal.cc (clock_nanosleep): Renamed from nanosleep, adding clock_id
and flags arguments and changing return values throughout.
Improve checks for illegal rqtp values.  Add support for
CLOCK_MONOTONIC and TIMER_ABSTIME.
(nanosleep): Rewrite in terms of clock_nanosleep.
(sleep): Ditto.
(usleep): Ditto.
* thread.cc: Mark clock_nanosleep in list of cancellation points.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@a1714 1
_tcdrain = tcdrain SIGFE
a1715 1
_tcflow = tcflow SIGFE
a1716 1
_tcflush = tcflush SIGFE
a1717 1
_tcgetattr = tcgetattr SIGFE
d1719 1
a1719 1
_tcgetpgrp = tcgetpgrp SIGFE
a1720 1
_tcsendbreak = tcsendbreak SIGFE
a1721 1
_tcsetattr = tcsetattr SIGFE
a1722 1
_tcsetpgrp = tcsetpgrp SIGFE
@


1.245
log
@* cygwin.din (pthread_condattr_getclock): Export.
(pthread_condattr_setclock): Export.
* posix.sgml (std-notimpl): Move pthread_condattr_getclock and
pthread_condattr_setclock from here...
(std-susv4): ... to here.
* sysconf.cc (sca): Set _SC_CLOCK_SELECTION to _POSIX_CLOCK_SELECTION.
* thread.cc: (pthread_condattr::pthread_condattr): Initialize clock_id.
(pthread_cond::pthread_cond): Initialize clock_id.
(pthread_cond_timedwait): Use clock_gettime() instead of gettimeofday()
in order to support all allowed clocks.
(pthread_condattr_getclock): New function.
(pthread_condattr_setclock): New function.
* thread.h (class pthread_condattr): Add clock_id member.
(class pthread_cond): Ditto.
* include/pthread.h: Remove obsolete comment.
(pthread_condattr_getclock): Declare.
(pthread_condattr_setclock): Declare.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d226 1
@


1.244
log
@* cygwin.din (__fpurge): Export.
* posix.sgml (std-solaris): Add __fpurge.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d1212 1
d1215 1
@


1.243
log
@* cygwin.din (error): Export.
(error_at_line): Export.
(error_message_count): Export.
(error_one_per_line): Export.
(error_print_progname): Export.
* errno.cc (error_message_count): Define.
(error_one_per_line): Define.
(error_print_progname): Define.
(_verror): New static function.
(error): New function.
(error_at_line): New function.
* posix.sgml (std-gnu): Add error, error_at_line.
* include/error.h: New header.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d585 1
@


1.242
log
@* cygwin.din (clock_getcpuclockid): Export.
(pthread_getcpuclockid): Export.
* hires.h (PID_TO_CLOCKID): New macro.
(CLOCKID_TO_PID): New macro.
(CLOCKID_IS_PROCESS): New macro.
(THREADID_TO_CLOCKID): New macro.
(CLOCKID_TO_THREADID): New macro.
(CLOCKID_IS_THREAD): New macro.
* ntdll.h (enum _THREAD_INFORMATION_CLASS): Add ThreadTimes.
* posix.sgml (std-notimpl): Add clock_getcpuclockid and
pthread_getcpuclockid from here...
(std-susv4): ... to here.
(std-notes): Remove limitations of clock_getres and clock_gettime.
Note limitation of timer_create to CLOCK_REALTIME.
* sysconf.cc (sca): Set _SC_CPUTIME to _POSIX_CPUTIME, and
_SC_THREAD_CPUTIME to _POSIX_THREAD_CPUTIME.
* thread.cc (pthread_getcpuclockid): New function.
* timer.cc (timer_create): Set errno to ENOTSUP for CPU-time clocks.
* times.cc (clock_gettime): Handle CLOCK_PROCESS_CPUTIME_ID and
CLOCK_THREAD_CPUTIME_ID.
(clock_getres): Ditto.
(clock_settime): Set errno to EPERM for CPU-time clocks.
(clock_getcpuclockid): New function.
* include/pthread.h (pthread_getcpuclockid): Declare.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d13 3
d395 2
@


1.241
log
@	* cygwin.din (pthread_attr_getguardsize): Export.
	(pthread_attr_setguardsize): Export.
	(pthread_attr_setstack): Export.
	(pthread_attr_setstackaddr): Export.
	* init.cc (dll_entry): Remove wow64_test_stack_marker.  Check for
	unusual stack address by testing stack addresses from current TEB.
	Check validity of _my_tls by testing if it's within the stack as
	given in current TEB.
	* miscfuncs.cc (struct thread_wrapper_arg): New structure used to
	push all required information to thread_wrapper function.
	(thread_wrapper): Wrapper function for actual thread function.
	If an application stack has been given, change %ebp and %esp so that
	the thread function runs on that stack.  If the thread has been created
	by CygwinCreateThread, set up the POSIX guard pages if necessary.
	(CygwinCreateThread): New function.
	* miscfuncs.h (CygwinCreateThread): Declare.
	* ntdll.h (struct _TEB): Define all members up to Peb.
	* posix.sgml (std-susv4): Move pthread_attr_getguardsize,
	pthread_attr_setguardsize and pthread_attr_setstack here.
	(std-deprec): Add pthread_attr_setstackaddr.
	* sysconf.cc (sca): Set _SC_THREAD_ATTR_STACKADDR to
	_POSIX_THREAD_ATTR_STACKADDR.
	* thread.cc (pthread::precreate): Copy pthread_attr stackaddr and
	guardsize members.
	(pthread::create): Call CygwinCreateThread.
	(pthread_attr::pthread_attr): Initialize guardsize.
	(pthread_attr_setstack): New function.
	(pthread_attr_setstackaddr): New function.
	(pthread_attr_setguardsize): New function.
	(pthread_attr_getguardsize): New function.
	(pthread_getattr_np): Copy attr.guardsize.
	* thread.h (pthread_attr): Add member guardsize.
	* include/pthread.h (pthread_attr_getguardsize): Declare.
	(pthread_attr_setguardsize): Declare.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d220 1
d1216 1
@


1.240
log
@* times.cc (settimeofday): Add EFAULT handler.
Set errno to EINVAL if tv.tv_nsec is invalid, and to EPERM if
SetSystemTime fails.  Return -1 in case of failure, all for
compatibility with BSD and Linux.
(clock_settime): New function.
* cygwin.din (clock_settime): Export.
* posix.sgml (std-susv4): Add clock_settime.
Move clock_setres from here...
(std-deprec): ... to here.
(std-notes): Correct limitation of clock_setres to only CLOCK_REALTIME.
Add limitation of clock_settime to only CLOCK_REALTIME.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d1177 1
d1187 1
d1192 2
@


1.239
log
@* sysconf.cc (sysinfo): New function.
* cygwin.din (sysinfo): Export.
* posix.sgml (std-gnu): Add sysinfo.
* include/sys/sysinfo.h (struct sysinfo): Define.
(sysinfo): Declare.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d223 1
@


1.238
log
@* cygwin.din (psiginfo): Export.
(psignal): Export.
(sys_siglist): Export.
* posix.sgml (std-notimpl): Move psiginfo and psignal from here...
(std-susv4): ... to here.
(std-deprec): Add sys_siglist.
* strsig.cc (sys_siglist): New array.
(psiginfo): New function.
* include/cygwin/signal.h (sys_siglist): Declare.
(psiginfo): Declare.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d1685 1
@


1.237
log
@* cygwin.din (pthread_attr_getstack): Export.
(pthread_attr_getstackaddr): Export.
(pthread_getattr_np): Export.
* ntdll.h (enum _THREAD_INFORMATION_CLASS): Add ThreadBasicInformation.
(struct _THREAD_BASIC_INFORMATION): Define.
(NtQueryInformationThread): Declare.
* posix.sgml (std-susv4): Add pthread_attr_getstack.
(std-gnu): Add pthread_getattr_np.
(std-deprec): Add pthread_attr_getstackaddr.
(std-notimpl): Remove pthread_attr_[gs]etstackaddr, as they were
removed from SUSv4.
* thread.cc (pthread_attr::pthread_attr): Initialize stackaddr.
(pthread_attr_getstack): New function.
(pthread_attr_getstackaddr): New function.
(pthread_attr_setstacksize): Return EINVAL if passed size less than
PTHREAD_STACK_MIN, as required by POSIX.
(pthread_getattr_np): New function.
* thread.h (class pthread_attr): Add stackaddr member.
* include/pthread.h (pthread_attr_getstack): Declare.
(pthread_attr_getstackaddr): Declare unconditionally.
(pthread_attr_setstack): Declare inside false conditional for reference.
(pthread_getattr_np): Declare.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d31 1
d1171 2
@


1.236
log
@	* cygwin.din (ppoll): Export.
	* poll.cc (ppoll): Implement.
	* posix.sgml (std-gnu): Add ppoll.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/poll.h (ppoll): Declare.
@
text
@d1177 2
d1205 1
@


1.235
log
@* thread.cc (pthread_setschedprio): New function.
* include/pthread.h (pthread_setschedprio): Declare.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
* cygwin.din (pthread_setschedprio): Export.
* posix.sgml (std-notimpl) Move pthread_setschedprio from here...
(std-susv4) ...to here.
@
text
@d1163 1
@


1.234
log
@	* cygwin.din (pthread_spin_destroy): Export.
	(pthread_spin_init): Export.
	(pthread_spin_lock): Export.
	(pthread_spin_trylock): Export.
	(pthread_spin_unlock): Export.
	* posix.sgml (std-susv4): Add pthread_spin_destroy, pthread_spin_init,
	pthread_spin_lock, pthread_spin_trylock, pthread_spin_unlock.
	(std-notimpl): Remove pthread_spin_[...].
	* pthread.cc (pthread_spin_init): New function.
	* thread.cc (pthread_spinlock::is_good_object): New function.
	(pthread_mutex::pthread_mutex): Rearrange initializers to accommodate
	protected data in pthread_mutex.
	(pthread_spinlock::pthread_spinlock): New constructor.
	(pthread_spinlock::lock): New method.
	(pthread_spinlock::unlock): New method.
	(pthread_spinlock::init): New method.
	(pthread_spin_lock): New function.
	(pthread_spin_trylock): New function.
	(pthread_spin_unlock): New function.
	(pthread_spin_destroy): New function.
	* thread.h (PTHREAD_SPINLOCK_MAGIC): Define.
	(class pthread_mutex): Change access level of members shared with
	derived classes to protected.
	(pthread_mutex::set_shared): New protected method.
	(class pthread_spinlock): New class, derived class of pthread_mutex.
	* include/pthread.h (pthread_spin_destroy): Declare.
	(pthread_spin_init): Declare.
	(pthread_spin_lock): Declare.
	(pthread_spin_trylock): Declare.
	(pthread_spin_unlock): Declare.
	* include/cygwin/types.h (pthread_spinlock_t): New typedef.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d1244 1
@


1.233
log
@	* cygwin.din (strchrnul): Export.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
	* posix.sgml (std-gnu): Add strchrnul.
@
text
@d1247 5
@


1.232
log
@* cygwin.din: Mark __assert* and _abort as NOSIGFE.
@
text
@d1586 1
@


1.232.2.1
log
@	* cygwin.din (pthread_spin_destroy): Export.
	(pthread_spin_init): Export.
	(pthread_spin_lock): Export.
	(pthread_spin_trylock): Export.
	(pthread_spin_unlock): Export.
	* posix.sgml (std-susv4): Add pthread_spin_destroy, pthread_spin_init,
	pthread_spin_lock, pthread_spin_trylock, pthread_spin_unlock.
	(std-notimpl): Remove pthread_spin_[...].
	* pthread.cc (pthread_spin_init): New function.
	* thread.cc (pthread_spinlock::is_good_object): New function.
	(pthread_mutex::pthread_mutex): Rearrange initializers to accommodate
	protected data in pthread_mutex.
	(pthread_spinlock::pthread_spinlock): New constructor.
	(pthread_spinlock::lock): New method.
	(pthread_spinlock::unlock): New method.
	(pthread_spinlock::init): New method.
	(pthread_spin_lock): New function.
	(pthread_spin_trylock): New function.
	(pthread_spin_unlock): New function.
	(pthread_spin_destroy): New function.
	* thread.h (PTHREAD_SPINLOCK_MAGIC): Define.
	(class pthread_mutex): Change access level of members shared with
	derived classes to protected.
	(pthread_mutex::set_shared): New protected method.
	(class pthread_spinlock): New class, derived class of pthread_mutex.
	* include/pthread.h (pthread_spin_destroy): Declare.
	(pthread_spin_init): Declare.
	(pthread_spin_lock): Declare.
	(pthread_spin_trylock): Declare.
	(pthread_spin_unlock): Declare.
	* include/cygwin/types.h (pthread_spinlock_t): New typedef.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@a1246 5
pthread_spin_destroy SIGFE
pthread_spin_init SIGFE
pthread_spin_lock SIGFE
pthread_spin_trylock SIGFE
pthread_spin_unlock SIGFE
@


1.232.2.2
log
@Pull in HEAD changes
@
text
@a1590 1
strchrnul NOSIGFE
@


1.231
log
@strerror_r: obey POSIX, and match newlib header change

* errno.cc (__xpg_strerror_r): New function.
(strerror_r): Update to copy newlib's fixes.
(strerror): Set errno on failure.
(_sys_errlist): Cause EINVAL failure for reserved values.
* cygwin.din: Export new function.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Combine
this into minor 236.
@
text
@d36 1
a36 1
_abort = abort SIGFE
d124 3
a126 3
__assert SIGFE
__assert_func SIGFE
__assertfail SIGFE
@


1.230
log
@* cygwin.din (pthread_yield): Export as alias to sched_yield.
* include/pthread.h (pthread_yield): Declare.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
* posix.sgml (std-deprec): Add pthread_yield.
@
text
@d1937 1
@


1.229
log
@Really check in now
@
text
@d1248 1
@


1.228
log
@cygwin:
	* cygwin.din: Export program_invocation_name and
	program_invocation_short_name.
	* dcrt0.cc: Set program_invocation*name to correct values, based on
	argv[0].
	* globals.cc (program_invocation_name): Define.
	(program_invocation_short_name): Ditto
newlib:
	* libc/include/sys/errno.h (program_invocation_name): Declare.
	(program_invocation_short_name): Ditto.
@
text
@d1015 1
@


1.227
log
@* winsup/cygwin/cygwin.din: Add llround and llroundf.
@
text
@d1164 2
@


1.226
log
@	* cygwin.din: Export new complex math functions from newlib.
	* posix.sgml: Move newly exported complex functions to implemented
	SUSv4 functions.
	* include/cygwin/version.h: Bump API minor version.
@
text
@d963 2
@


1.225
log
@winsup/cygwin/ChangeLog:

	* Makefile.in (DLL_OFILES): Add new fenv.o module.
	(fenv_CFLAGS): New flags definition for fenv.o compile.
	* autoload.cc (std_dll_init): Use fenv.h functions instead of direct
	manipulation of x87 FPU registers.
	* crt0.c (mainCRTStartup): Likewise.
	* cygwin.din (feclearexcept, fegetexceptflag, feraiseexcept,
	fesetexceptflag, fetestexcept, fegetround, fesetround, fegetenv,
	feholdexcept, fesetenv, feupdateenv, fegetprec, fesetprec,
	feenableexcept, fedisableexcept, fegetexcept, _feinitialise,
	_fe_dfl_env, _fe_nomask_env): Export new functions and data items.
	* fenv.cc: New file.
	* posix.sgml: Update status of newly-implemented APIs.
	* include/fenv.h: Likewise related header.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d167 4
d174 10
d188 4
d196 2
d212 2
d222 2
d230 2
d245 6
d253 10
@


1.224
log
@Add mkostemp and mkostemps.

* mktemp.cc (_gettemp): Add flags argument.  All callers updated.
(mkostemp, mkostemps): New functions.
* cygwin.din (mkostemp, mkostemps): Export.
* posix.sgml: Document them.
* include/cygwin/version.h: Bump version.
@
text
@d456 12
d470 1
d473 6
@


1.223
log
@	* cygwin.din (__locale_mb_cur_max): Export.
	* nlsfuncs.cc (__getlocaleinfo): Drop conversion to multibyte.
	(__charfromwchar): New function to convert to multibyte.
	(__eval_datetimefmt): Convert to return wchar_t pointer.  Work on
	wide char string.
	(__set_lc_time_from_win): Take additional pointer to "C" category info
	to accommodate C.foo locales.  Rework to fill wide char members in
	category info.
	(__set_lc_ctype_from_win): New function.
	(__set_lc_numeric_from_win): Take additional pointer to "C" category
	info to accommodate C.foo locales.  Rework to fill wide char members
	in category info.
	(__set_lc_monetary_from_win): Ditto.
	(__set_lc_messages_from_win): Ditto.
	(__get_current_collate_codeset): New function, called from nl_langinfo.
	* include/cygwin/config.h (__HAVE_LOCALE_INFO_EXTENDED__): Define.
@
text
@d998 2
@


1.222
log
@	* cygwin.din: Export __xdr functions.
	* include/cygwin/version.h: Bump version.
	* posix.sgml: Add a few more XDR functions to list
	of implemented Solaris functions.
@
text
@d902 1
@


1.221
log
@	Add XDR support.
	* cygwin.din: Export xdr functions.
	* include/cygwin/version.h: Bump version.
	* cygxdr.cc: New.
	* cygxdr.h: New.
	* dcrt0.cc (dll_crt0_1): Print the (rare) xdr-related
	error messages to stderr.
	* Makefile.in: Add cygxdr.
	* posix.sgml: Add new XDR functions to list of implemented Solaris
	functions.
@
text
@d1864 2
@


1.220
log
@	* Makefile.in (DLL_OFILES): Add nlsfunc.o and strfmon.o.
	* autoload.cc (LocaleNameToLCID): Define.
	* cygwin.din (strfmon): Export.
	* nlsfuncs.cc: New file.  Define a lot of internal functions called
	from setlocale.
	(wcscoll): Implement locale-aware here, using CompareStringW function.
	(strcoll): Ditto.
	(wcsxfrm): Implement locale-aware here, usingLCMapStringW function.
	(strxfrm): Ditto.
	(__set_charset_from_locale): Replace __set_charset_from_codepage.
	Return Linux-compatible charset.
	* strfuncs.cc (__set_charset_from_codepage): Remove.
	* wchar.h (__set_charset_from_codepage): Drop definition.
	* wincap.h (wincaps::has_localenames): New element.
	* wincap.cc: Implement above element throughout.
	* libc/strfmon.c: New file.
	* libc/strptime.cc: Remove locale constant strings in favor of
	access to locale-specifc data.
	(strptime): Point _CurrentTimeLocale to locale-specific data.
	Throughout use correct locale-specific format fields for all
	locale-specific formats.
	* include/monetary.h: New file.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d1818 47
@


1.219
log
@	* cygwin.din (accept4): Export.
	* fhandler.h (fhandler_socket::accept4): Rename from accept.  Take
	additional flag parameter.
	* fhandler_socket.cc (fhandler_socket::accept4): Ditto.  Handle
	SOCK_NONBLOCK and SOCK_CLOEXEC flags.
	* net.cc (cygwin_socket): Handle SOCK_NONBLOCK and SOCK_CLOEXEC flags
	in type.  Check for invalid flag values.
	(socketpair): Ditto.
	(cygwin_accept): Accommodate renaming of fhandler_socket::accept
	function to accept4.
	(accept4): New function.
	* posix.sgml: Mention accept4 as GNU extensions.
	* include/cygwin/socket.h (SOCK_NONBLOCK): Define.
	(SOCK_CLOEXEC): Define.
	(_SOCK_FLAG_MASK): Define when building Cygwin.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
	* include/sys/socket.h (accept4): Declare.
@
text
@d1530 1
@


1.218
log
@	* cygwin.din (dup3): Export.
	(pipe2): Export.
	* dtable.cc (dtable::dup_worker): Take additional flags parameter.
	Handle O_CLOEXEC flag.
	(dtable::dup3): Rename from dup2.  Take additional flags parameter.
	Check for valid flags.  Drop check for newfd == oldfd.
	* dtable.h (dtable::dup_worker): Add flags parameter.
	(dtable::dup3): Rename from dup2.
	* fcntl.cc (fcntl64): Add F_DUPFD_CLOEXEC case.
	* fhandler.h (fhandler_mailslot::get_object_attr): Add flags parameter.
	* fhandler.cc (fhandler_base::open): Use security attribute with
	inheritance according to setting of O_CLOEXEC flag.
	* fhandler_console.cc (fhandler_console::open): Ditto.
	* fhandler_fifo.cc (sec_user_cloexec): New inline function to
	create security attribute with inheritance according to setting of
	O_CLOEXEC flag.
	(fhandler_fifo::open): Call sec_user_cloexec to fetch security
	attribute.
	(fhandler_fifo::wait): Ditto.
	* fhandler_mem.cc (fhandler_dev_mem::open): Ditto.
	* fhandler_mailslot.cc (fhandler_mailslot::get_object_attr): Take
	additional flags parameter.  Use security attribute with inheritance
	according to setting of O_CLOEXEC flag.
	(fhandler_mailslot::open): Call get_object_attr with flags parameter.
	* fhandler_registry.cc (fhandler_registry::open): Call set_close_on_exec
	on real handles to accommodate O_CLOEXEC flag.
	* fhandler_tty.cc (fhandler_tty_slave::open): Ditto.
	* fhandler_tape.cc: Create mutex with inheritance according to setting
	of O_CLOEXEC flag.
	* pipe.cc: Replace usage of O_NOINHERIT with O_CLOEXEC.
	 (fhandler_pipe::init): Simplify setting close_on_exec flag.
	(fhandler_pipe::open): Remove setting close_on_exec flag.
	(fhandler_pipe::create): Use security attribute with inheritance
	according to setting of O_CLOEXEC flag.
	(pipe2): New exported function.
	* posix_ipc.cc: Throughout, open backing files with O_CLOEXEC
	flag to follow POSIX semantics.
	* security.h (sec_none_cloexec): New define.
	* syscalls.cc (dup): Add missing extern "C" qualifier.  Accommodate
	renaming of dtable::dup2 to dtable::dup3.
	(dup2): Ditto.  Check newfd == oldfd here.
	(dup3): New function.  Check newfd == oldfd here.
	(open): Set close_on_exec flag according to O_CLOEXEC flag before
	calling fhandler->open.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d40 1
@


1.217
log
@	* sysconf.cc (get_nprocs): New function.
	(get_nprocs_conf): Ditto.
	(get_avphys_pages): Ditto.
	(get_phys_pages): Ditto.
	* cygwin.din: Export them.
	* include/sys/sysinfo.h: New header, decalre above new functions.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
	* posix.sgml: Mention them as GNU extensions.
@
text
@d300 1
d1075 1
@


1.216
log
@Add fexecve, execvpe.

* exec.cc (fexecve): New function.
* cygwin.din (execvpe, fexecve): Export new fexecve and existing
execvpe.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
* posix.sgml: Mention them.
@
text
@d601 3
d606 1
@


1.215
log
@Provide euidaccess, canonicalize_file_name; fix fchmodat.

* syscalls.cc (fchmodat): lchmod is not yet implemented.
(euidaccess): New function.
* path.cc (realpath): Update comment.
(canonicalize_file_name): New function.
* include/cygwin/stdlib.h (canonicalize_file_name): Declare it.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
* cygwin.din: Export canonicalize_file_name, eaccess, euidaccess.
* posix.sgml: Mention them.
@
text
@d359 1
d458 1
@


1.214
log
@winsup/ChangeLog:

	* Makefile.common (COMPILE_CXX): Add support for per-file overrides
	to exclude $(nostdinc) and $(nostdincxx) from compiler flags.
	(COMPILE_CC): Likewise for $(nostdinc).

winsup/cygwin/ChangeLog:

	* Makefile.in (DLL_OFILES): Add libstdcxx_wrapper.o
	(libstdcxx_wrapper_CFLAGS): Add flags for new module.
	(_cygwin_crt0_common_STDINCFLAGS): Define per-file override.
	(libstdcxx_wrapper_STDINCFLAGS, cxx_STDINCFLAGS): Likewise.
	* cxx.cc: Include "cygwin-cxx.h".
	(operator new): Tweak prototype for full standards compliance.
	(operator new[]): Likewise.
	(operator new (nothrow)): New fallback function.
	(operator new[] (nothrow), operator delete (nothrow),
	operator delete[] (nothrow)): Likewise.
	(default_cygwin_cxx_malloc): New struct of pointers to the above,
	for final last-resort fallback default.
	* cygwin-cxx.h: New file.
	(struct per_process_cxx_malloc): Define.
	(default_cygwin_cxx_malloc): Declare extern.
	* cygwin.din (__wrap__ZdaPv): Export new wrapper.
	(__wrap__ZdaPvRKSt9nothrow_t, __wrap__ZdlPv,
	__wrap__ZdlPvRKSt9nothrow_t, __wrap__Znaj,
	__wrap__ZnajRKSt9nothrow_t, __wrap__Znwj,
	__wrap__ZnwjRKSt9nothrow_t): Likewise.
	* globals.cc (__cygwin_user_data): Init newly-repurposed 'forkee'
	field (now 'cxx_malloc') to point to default_cygwin_cxx_malloc.
	* libstdcxx_wrapper.cc: New file.
	(__wrap__ZdaPv, __wrap__ZdaPvRKSt9nothrow_t, __wrap__ZdlPv,
	__wrap__ZdlPvRKSt9nothrow_t, __wrap__Znaj,
	__wrap__ZnajRKSt9nothrow_t, __wrap__Znwj,
	__wrap__ZnwjRKSt9nothrow_t): Define wrapper functions for libstdc++
	malloc operators and their overrides.
	* winsup.h (default_cygwin_cxx_malloc): Declare extern.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
	* include/sys/cygwin.h (struct per_process_cxx_malloc): Forward
	declare here.
	(struct per_process::forkee): Rename and repurpose from this ...
	(struct per_process::cxx_malloc): ... to this.
	* lib/_cygwin_crt0_common.cc: Include cygwin-cxx.h.
	(WEAK): Define shorthand helper macro.
	(__cygwin_cxx_malloc): Define and populate with weak references
	to whatever libstdc++ malloc operators will be visible at final
	link time for Cygwin apps and dlls.
	(_cygwin_crt0_common): Always look up cygwin DLL's internal
	per_process data, and don't test for (impossible) failure.  Inherit
	any members of __cygwin_cxx_malloc that we don't have overrides
	for from the DLL's default and store the resulting overall set of
	overrides back into the DLL's global per_process data.
@
text
@d168 1
d300 1
d346 1
@


1.213
log
@	* cygwin.din (fpurge, mkstemps): New exports.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
	* mktemp.cc (_gettemp): Add parameter.
	(mkstemps): New function.
	(mkstemp, mkdtemp, mktemp): Adjust clients.
@
text
@d1811 8
@


1.212
log
@* gendef (cleanup): Rename from 'nocr'.  Remove comments and trailing spaces.
* cygwin.din: Add long-needed comment describing what dll_crt0__FP11per_process
demangles to.
@
text
@d508 1
d988 1
@


1.211
log
@	* ctype.cc: Remove implementation of ctype functions in favor of
	pointer-based newlib implementation.
	(_ctype_b): Declare.
	(__ctype_cp): Move to newlib. Declare.
	(__ctype_iso): Ditto.
	(__set_ctype): Implement changing __ctype_ptr__.  Only copy character
	class data in applications built under older Cygwin.
	* cygwin.din (__ctype_ptr__): Export.
	* include/ctype.h: Remove in favor of newlib implementation.
	* include/cygwin/config.h (__EXPORT): Define alongside __IMPORT.
	* include/cygwin/version.h (CYGWIN_VERSION_CHECK_FOR_OLD_CTYPE):
	Define check for old vs. new ctype implementation.
	Bump API minor number.
@
text
@d276 1
a276 1
dll_crt0__FP11per_process NOSIGFE
@


1.210
log
@	* cygwin.din: Export wordexp, wordfree.
	* posix.sgml: Move them to SUSv4 list.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d9 1
@


1.209
log
@	* cygwin.din: Export log2, log2f as functions.
	* posix.sgml: Add them to SUSv4 list.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1794 2
@


1.208
log
@	* cygwin.din: Export wcsdup.
	* posix.sgml: Add wcsdup to SUSv4 list.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d906 2
@


1.207
log
@	* cygwin.din: Export wcscasecmp, wcsncasecmp.
	* posix.sgml: Move wcscasecmp, wcsncasecmp to SUSv4 list.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1751 1
@


1.206
log
@	* cygwin.din: Export wscanf, fwscanf, swscanf, vwscanf, vfwscanf,
	vswscanf.
	* posix.sgml: Move fwscanf, swscanf, vwscanf, vfwscanf, vswscanf
	to SUSv4 list.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1743 1
d1756 1
@


1.205
log
@	* cygwin.din: Export wcsftime.
	* posix.sgml: Move wcsftime to SUSv4 list.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d580 1
d1576 1
d1708 1
d1726 1
d1731 1
d1794 1
@


1.204
log
@	* cygwin.din: Export gethostbyname2.
	* net.cc: define _CYGWIN_IN_H and include resolv.h.
	(realloc_ent): New function.
	(dup_ent): Call realloc_ent.
	(memcpy4to6): New function.
	(dn_length1): New function.
	(gethostby_helper): New function.
	(gethostbyname2): New function.
	* posix.sgml: Add gethostbyname2.
	* include/cygwin/version.h: Bump API minor number.
	* libc/minires.c (get_options): Look for "inet6" and apply bounds
	to "retry" and "retrans".
	(res_ninit): Set the default options at the beginning.
	(dn_expand): Fix "off by one".
@
text
@d1745 1
@


1.203
log
@	* cygwin.din: Export wprintf, fwprintf, swprintf, vwprintf, vfwprintf,
	vswprintf.  Sort.
	* posix.sgml: Move fwprintf, swprintf, vwprintf, vfwprintf, vswprintf
	to SUSv4 list.  Sort SUSv4 list.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d639 1
@


1.202
log
@	* cygwin.din: Export mbsnrtowcs and wcsnrtombs.
	* posix.sgml: Move mbsnrtowcs and wcsnrtombs to SUSv4 section.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d28 1
a29 1
_sys_nerr DATA
d577 1
d723 1
a724 1
glob_pattern_p
d1573 1
d1704 1
d1721 1
d1725 1
d1782 1
@


1.201
log
@	* cygwin.din: Export open_wmemstream.
	* posix.sgml: Move open_wmemstream to SUSv4 section.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d947 1
d1747 1
@


1.200
log
@	* cygwin.din: Export reallocf.
	* malloc_wrapper.cc( reallocf): New function.
	* posix.sgml: Add reallocf to BSD section.
	* include/cygwin/version.h: Bump API minor number.
	* libc/fts.c: Remove erroneous reallocf definition.
@
text
@d1040 1
@


1.199
log
@	* cygwin.din: Export wcstoimax, wcstoumax.
	* posix.sgml: Move wcstoimax and wcstoumax to SUSv4 section.
	* include/inttypes.h: Declare wcstoimax and wcstoumax.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1200 1
@


1.198
log
@	* cygwin.din: Export wcsnlen.
	* posix.sgml: Move wcsnlen to SUSv4 section.
	* include/cygwin/version.h: Bump API minor number.
@
text
@a1748 1
wcstok NOSIGFE
d1751 2
d1759 1
@


1.197
log
@	* cygwin.din: Export wcstod and wcstof.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1743 1
@


1.196
log
@	* cygwin.din: Export wcstok.
	* posix.sgml: Move wcstok from unimplemented to susv3.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1749 2
@


1.195
log
@* glob_pattern_p.cc: New file.
* Makefile.in (DLL_OFILES): Add glob_pattern_p.o.
* glob.h: Add declaration for glob_pattern_p.
* pinfo.cc (pinfo::thisproc): Remove __stdcall attribute.
@
text
@d1748 1
@


1.194
log
@	* cygwin.din: Export fgetwc, fgetws, fputwc, fputws, fwide, getwc,
	getwchar, putwc, putwchar, ungetwc.
	* posix.sgml: Move above functions (add missing) into "implemented
	SUSv3" section.
	* include/cygwin/version.h: Bump api minor number.
@
text
@a721 1
_glob = glob SIGFE
d723 1
a723 1
_globfree = globfree SIGFE
@


1.193
log
@* Makefile.in: Add -c option which is now removed from COMPILE_C*.
* cygwin.din (cfmakeraw): Export.
* termios.cc (cfmakeraw): Implement.
* include/sys/termios.h (cfmakeraw): Declare.
* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR): Bump.
@
text
@d464 2
d511 2
d576 1
d716 2
d1176 2
d1662 1
@


1.192
log
@* cygwin.din (sys_sigabbrev): Add this here.
* dcrt0.cc (__argc,__argv,_check_for_executable): Remove dllexport decoration
since it is already handled in cygwin.din.
* errno.cc (_sys_errlist): Ditto.
* strsig.cc (sys_sigabbrev): Ditto.
* include/cygwin/signal.h: Protect use of dllimport when __INSIDE_CYGWIN__.
* libc/getopt.c: Revert previous changes.  Define __INSIDE_CYGWIN__.
@
text
@d177 1
@


1.191
log
@* cygwin.din (_getutline): Remove.
* lib/bsdlib.cc (login): Make argument const as per linux.
(logout): Ditto.
* syscalls.cc (getutid): Ditto.
(getutline): Ditto.
(pututline): Ditto.
(getutxent): Add comment mentioning non-thread-safety.
(getutxid): Ditto.
(getutxline): Ditto.
(pututxline): Ditto.
* sys/utmp.h: Declare arguments to various functions as const as per linux.
Remove bogus _getutline definition.
@
text
@d28 1
@


1.190
log
@	* Makefile.in (DLL_OFILES): Remove v8 regexp files.
	(OBSOLETE_FUNCTIONS): Remove v8 regexp functions.
	(NEW_FUNCTIONS): Remove POSIX regex functions.
	* cygwin.din: Export POSIX regex functions with their correct symbol
	name.  Export with posix_ prefix for backward compatibility.
	* syscalls.cc (regfree): Remove ancient fake function.
	* regex/regex.h: Remove renaming regex functions within Cygwin.
	* regexp/*: Remove.
	* include /cygwin/version,.h: Bump API minor number.
@
text
@a703 1
_getutline = getutline SIGFE
@


1.189
log
@	* cygwin.din (futimens): Export.
	(utimensat): Export.
	* fhandler.cc (fhandler_base::utimens): Replace fhandler_base::utimes.
	Call utimens_fs.
	* fhandler.h (class fhandler_base): Declare utimens_fs instead of
	utimes_fs, utimens instead of utimes.
	(class fhandler_disk_file): Declare utimens instead of utimes.
	* fhandler_disk_file.cc (fhandler_disk_file::utimens): Replace
	fhandler_disk_file::utimes.
	(fhandler_base::utimens_fs): Replace fhandler_base::utimes_fs.
	Implement tv_nsec handling according to SUSv4.
	* syscalls.cc (utimensat): New function.
	* times.cc (timespec_to_filetime): New function.
	(timeval_to_timespec): New function.
	(utimens_worker): Replace utimes_worker.
	(utimes): Convert timeval to timespec and call utimens_worker.
	(lutimes): Ditto.
	(futimens): Take over implementation from futimes.
	(futimes): Convert timeval to timespec and call futimens.
	* winsup.h (timespec_to_filetime): Declare.
	* include/cygwin/version.h: Bump API minor number.
	* posix.sgml: Add SUSv4 section.  Add futimens and utimensat to it.
@
text
@d1057 4
a1060 4
posix_regcomp SIGFE
posix_regerror SIGFE
posix_regexec SIGFE
posix_regfree SIGFE
d1195 4
@


1.188
log
@	* cygwin.din: Sort.
	(faccessat): Export.
	(fchmodat): Export.
	(fchownat): Export.
	(fstatat): Export.
	(futimesat): Export.
	(linkat): Export.
	(mkdirat): Export.
	(mkfifoat): Export.
	(mknodat): Export.
	(openat): Export.
	(readlinkat): Export.
	(renameat): Export.
	(symlinkat): Export.
	(unlinkat): Export.
	* path.cc (readlink): Align definition to POSIX.
	* syscalls.cc (gen_full_path_at): New static function.
	(faccessat): Implement.
	(fchmodat): Implement.
	(fchownat): Implement.
	(fstatat): Implement.
	(futimesat): Implement.
	(linkat): Implement.
	(mkdirat): Implement.
	(mkfifoat): Implement.
	(mknodat): Implement.
	(openat): Implement.
	(readlinkat): Implement.
	(renameat): Implement.
	(symlinkat): Implement.
	(unlinkat): Implement.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d567 1
d1660 1
@


1.187
log
@	* cygwin.din (fmemopen): Export.
	(open_memstream): Export.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d412 1
d420 1
d424 1
d537 1
d568 1
d869 1
d962 1
d965 1
d969 1
d1030 1
d1032 1
a1032 1
_open64
d1185 1
d1206 1
d1557 1
d1649 1
@


1.186
log
@	* cygwin.din (wprintf): Remove.
	(_wprintf): Ditto.
	* syscalls.cc (wprintf): Ditto.
	* include/cygwin/version.h: Add FIXME comment.
@
text
@d479 1
d1021 1
@


1.185
log
@	* fhandler.cc (fhandler_base::dup): Drop setting flags in the parent.

	Implement advisory file locking.
	* cygheap.h (struct init_cygheap): Add inode_list member.
	* cygwin.din (lockf): Export.
	* dcrt0.cc (child_info_spawn::handle_spawn): Call
	fixup_lockf_after_exec.
	* dtable.h (class dtable): Add fhandler_disk_file as friend class.
	* fhandler.cc (fhandler_base::close): Call del_my_locks if node is set.
	(fhandler_base::fhandler_base): Initialize node to NULL.
	(fhandler_base::fixup_after_fork): Ditto.
	* fhandler.h (class fhandler_base): Add member node.
	* fhandler_disk_file.cc (fhandler_disk_file::lock): Delete.
	* flock.cc: Implement all advisory file locking here.
	(fhandler_disk_file::lock): Implement here.
	(flock): Call fcntl with F_FLOCK bit set.  Remove test main function.
	(lockf): New function.
	* fork.cc (frok::child): Call fixup_lockf_after_fork.
	* ntdll.h (DIRECTORY_ALL_ACCESS): Define.
	(struct _OBJECT_BASIC_INFORMATION): Define.
	(enum _EVENT_TYPE): Define.
	(NtCreateDirectoryObject): Declare.
	(NtCreateEvent): Declare.
	(NtCreateMutant): Declare.
	(NtOpenEvent): Declare.
	(NtOpenMutant): Declare.
	* include/cygwin/version.h: Bump API minor number.
@
text
@a1734 2
wprintf SIGFE
_wprintf = wprintf SIGFE
@


1.184
log
@	* winsup.h (NT_MAX_PATH): Revert ill-advised change to 32767.
	Accommodate change throughout.

	* cygwin.din (cygwin_conv_path): Export.
	(cygwin_conv_path_list): Export.
	(cygwin_create_path): Export.
	* dcrt0.cc (dll_crt0_1): Use cygwin_conv_path.
	* dtable.cc (handle_to_fn): Ditto.  Don't expect UNICODE_STRING being
	0-terminated.
	* environ.cc (env_plist_to_posix): New helper function.
	(env_plist_to_win32): Ditto.
	(env_path_to_posix): Ditto.
	(env_path_to_win32): Ditto.
	(return_MAX_PATH): Remove.
	(conv_envvars): Use new helper functions.  Drop removed members.
	(win_env::operator =): Accommodate removal of path length functions.
	(win_env::add_cache): Accommodate new env helper function API.
	(posify): Ditto.
	* environ.h (struct win_env): Ditto. Remove path length function
	pointers since they are unused.
	* path.cc (warn_msdos): Use cygwin_conv_path.
	(getfileattr): Use new tmp_pathbuf::u_get method.
	(fillout_mntent): Ditto.
	(symlink_info::check): Ditto.
	(path_conv::check): Use sizeof (WCHAR) instead of constant 2.
	(symlink_info::check_reparse_point): Ditto.
	(conv_path_list): Get max size of target string as argument.  Call
	cygwin_conv_path as helper function.
	(cygwin_conv_path): New function.
	(cygwin_create_path): New function.
	(cygwin_conv_to_win32_path): Just call cygwin_conv_path with size set
	to MAX_PATH.
	(cygwin_conv_to_full_win32_path): Ditto.
	(cygwin_conv_to_posix_path): Ditto.
	(cygwin_conv_to_full_posix_path): Ditto.
	(conv_path_list_buf_size): Add FIXME comment.
	(env_PATH_to_posix): Rename from env_win32_to_posix_path_list.
	Add size argument as required for env helper functions.
	(cygwin_win32_to_posix_path_list): Call conv_path_list with size set to
	MAX_PATH.
	(cygwin_posix_to_win32_path_list): Ditto.
	(cygwin_conv_path_list): New function.
	(cwdstuff::get): Fix length argument in call to sys_wcstombs.
	* spawn.cc (find_exec): Use cygwin_conv_path_list.
	* tls_pbuf.h (tmp_pathbuf::u_get: New method.
	* uinfo.cc (cygheap_user::ontherange): Allocate temporary path buffers
	using tmp_pathbuf.  Use cygwin_conv_path.
	* winf.cc (av::unshift): Use cygwin_conv_path.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/cygwin.h: Comment out old cygwin32_XXX API.
	Mark old path handling API as deprecated.
	(cygwin_conv_path_t): Typedef.  Define values.
	(cygwin_conv_path): Declare.
	(cygwin_create_path): Declare.
	(cygwin_conv_path_list): Declare.
@
text
@d877 1
@


1.183
log
@	* Makefile.in (DLL_OFILES): Add ntea.o.
	* cygwin.din (getxattr, listxattr, removexattr, setxattr, lgetxattr,
	llistxattr, lremovexattr, lsetxattr, fgetxattr, flistxattr,
	fremovexattr, fsetxattr): Export Linux extended attribute functions.
	Sort.
	* errno.cc (errmap): Add mappings for ERROR_EAS_DIDNT_FIT,
	ERROR_EAS_NOT_SUPPORTED, ERROR_EA_LIST_INCONSISTENT,
	ERROR_EA_TABLE_FULL, ERROR_FILE_CORRUPT, ERROR_INVALID_EA_NAME.
	* fhandler.h (class fhandler_base): Declare new fgetxattr and
	fsetxattr methods.
	(class fhandler_disk_file): Ditto.
	* fhandler.cc (fhandler_base::fgetxattr): New method.
	(fhandler_base::fsetxattr): New method.
	* fhandler_disk_file.cc (fhandler_disk_file::fgetxattr): New method.
	(fhandler_disk_file::fsetxattr): New method.
	* ntdll.h (STATUS_EA_TOO_LARGE): Define.
	(STATUS_NONEXISTENT_EA_ENTRY): Define.
	(STATUS_NO_EAS_ON_FILE): Define.
	* ntea.cc (read_ea): Rewrite for long pathnames and for using with
	Linux extended attribute functions.
	(write_ea): Ditto.
	(getxattr_worker): New static function.
	(getxattr): New function.
	(lgetxattr): New function.
	(fgetxattr): New function.
	(listxattr): New function.
	(llistxattr): New function.
	(flistxattr): New function.
	(setxattr_worker): New static function.
	(setxattr): New function.
	(lsetxattr): New function.
	(fsetxattr): New function.
	(removexattr): New function.
	(lsetxattr): New function.
	(fsetxattr): New function.
	* security.h (read_ea): Change declaration according to above changes.
	(write_ea): Ditto.
	* include/cygwin/version.h: Bump API minor version.
@
text
@d240 2
d246 1
@


1.182
log
@	* cygwin.din (_f_llrint, _f_llrintf, _f_llrintl, _f_lrint, _f_lrintf,
	_f_lrintl, _f_rint, _f_rintf, _f_rintl):  Export fast *rint* functions.
	(lrint, lrintf, rint, rintf):  Redirect exports to alias _f_ versions.
	(llrint, llrintf, llrintl, lrintl, rintl):  Add exports aliasing _f_*
	versions likewise.
	* include/cygwin/version.h (CYGWIN_VERSION_API_MINOR):  Bump.
@
text
@d31 1
a351 1
_Exit SIGFE
a434 1
fdopendir SIGFE
d440 1
d456 1
d465 1
d506 1
d526 1
d702 1
d857 1
d861 1
d864 1
d898 1
d908 1
d1183 1
d1355 1
d1364 2
a1369 2
shm_open SIGFE
shm_unlink SIGFE
@


1.181
log
@	* cygwin.din: Export wcpcpy, wcpncpy.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d380 3
d391 3
d398 3
d857 3
d890 3
a892 2
lrint NOSIGFE
lrintf NOSIGFE
d1215 3
a1217 4
rint NOSIGFE
_rint = rint NOSIGFE
rintf NOSIGFE
_rintf = rintf NOSIGFE
@


1.180
log
@
	* cygwin.din: Export wcstol, wcstoll, wcstoul, wcstoull, wcsxfrm.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1666 2
@


1.179
log
@	Check in missing cygwin.din change from 2007-06-29.
@
text
@d1686 2
d1690 2
d1693 1
@


1.178
log
@	* cygwin.din: Export stpcpy, stpncpy.
	* posix.sgml: Add stpcpy and stpncpy to list of implemented
	GNU extensions.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d426 1
@


1.177
log
@	* assert.cc (__assert_func): New function, to match newlib header
	change.
	* cygwin.din: Export __assert_func.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1427 2
@


1.176
log
@	* autoload.cc (WSAIoctl): Remove.
	* cygwin.din: Export freeifaddrs, getifaddrs.
	* fhandler_socket.cc (fhandler_socket::ioctl): Drop SOCKET parameter
	from get_ifconf.
	* net.cc: Include ifaddrs.h.
	(in_are_prefix_equal): Match addresses in network byte order.
	(ip_addr_prefix): Convert address into host byte order before
	testing with IN_LOOPBACK.
	(struct ifall): Define.
	(get_xp_ifs): Replace get_xp_ifconf.  Return struct ifall array.
	(get_2k_ifs): Ditto, replace get_2k_ifconf.
	(get_nt_ifs): Ditto, replace get_nt_ifconf.
	(getifaddrs): New function.
	(freeifaddrs): New function.
	(get_ifconf): Call matching get_XX_ifs function and create
	ifc content from here.  Drop lo fake since it's now in get_nt_ifs.
	* posix.sgml: Add freeifaddrs and getifaddrs to list of implemented
	BSD functions.
	* wincap.h (wincapc::has_broken_if_oper_status): New element.
	* wincap.cc: Implement above element throughout.
	* include/ifaddrs.h: New file.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d121 1
@


1.175
log
@	* cygwin.din: Export exp10, exp10f, pow10, pow10f, strcasestr,
	funopen, fopencookie.
	* include/cygwin/version.h: Bump API minor number.
	* posix.sgml: Minor improvements.
@
text
@d492 1
d609 1
@


1.174
log
@	* Makefile.in (DLL_OFILES): Add xsique.o.
	* cygwin.din (confstr): Make NOSIGFE.
	(insque): Export.
	(remque): Export.
	* lsearch.cc: Remove superfluous _SEARCH_PRIVATE define.
	* posix.sgml: Move insque to defined SUSv3 interfaces.  Remove
	comment for remque.
	* include/search.h: Remove _SEARCH_PRIVATE guarded definitions.
	Add struct qelem definition.  Add insque and remque declarations.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/queue.h: Remove insque/remque definitions so as not
	to collide with SUSv3 compatible declaration in search.h.
	* libc/xsique.cc: New file implementing insque and remque.
@
text
@d353 2
d474 1
d542 1
d1019 2
d1426 1
@


1.173
log
@	* cygwin.din (confstr): Export.
	* posix.sgml (confstr): Move to list of implemented SUSv3 functions.
	* sysconf.cc (confstr): Implement.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d198 1
a198 1
confstr SIGFE
d734 1
d1150 1
@


1.172
log
@* cygwin.din (asnprintf, dprint, _Exit, vasnprintf, vdprintf): Export.
* include/cygwin/version.h: Bump API minor number.
@
text
@d198 1
@


1.171
log
@	* cygwin.din (sem_unlink): Export.
	* posix_ipc.cc: Include thread.h and semaphore.h.  Remove TODO
	comment.
	(ipc_names): Add max_len member.  Set to maximum length of the path
	before tacking on the prefix path.  Set prefix path for named semaphors
	to /dev/shm, as on Linux.
	(enum ipc_type_t): Change sem to semaphore to avoid name conflicts.
	(check_path): Detect empty paths.  Use ipc_names's max_len member.
	Use __small_sprintf to create full object path name.  Special case
	semaphores.
	(ipc_cond_init): Drop superfluous strcpy.
	(class ipc_flock): New class to simplify file locking in subsequent
	code.
	(struct mq_hdr): Raise size of mqh_uname to allow adding a unique
	LUID to the name.
	(mq_open): Fix formatting.  Create unique synchronization object names
	using AllocateLocallyUniqueId.
	(struct sem_finfo): New structure defining named semaphore file content.
	(sem_open): Move here.  Rework implementation to allow kernel
	persistent implementation of POSIX named semaphores.
	(_sem_close): Implement sem_close.
	(sem_close): Move here.  Just call _sem_close with do_close parameter
	set to true.
	(sem_unlink): New function.
	* pthread.cc (mangle_sem_name): Remove.
	(sem_open): Move to posix_ipc.cc.
	(sem_close): Ditto.
	* syscalls.cc (close_all_files): Call semaphore::terminate here.
	* thread.cc: Fix formatting.  Rearrange semaphore functions so that
	they are close together.
	(semaphore::semaphore): Rework to play nicely with new named semaphore
	implementation.
	(semaphore::_terminate): Call _sem_close if semaphore is a named
	semaphore.
	(semaphore::destroy): Don't destroy named semaphores.  Return EINVAL
	instead.
	(semaphore::close): Only destroy named semaphores.  Return EINVAL
	otherwise.
	(semaphore::open): Rework to play nicely with new named semaphore
	implementation.  Loop through existing semaphores to be able to
	return same sem_t pointer as a former call on the same named semaphore.
	(semaphore::getinternal): New function called from _sem_close.
	* thread.h (class List): Make mx and head public.
	(class semaphore): Fix formatting.  Align method declarations with
	implementation in thread.cc.  Add members used for named semaphores.
	(semaphore::terminate): New static method.
	* include/semaphore.h: Redefine SEM_FAILED.  Fix formatting.
	(sem_unlink): Add declaration.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d115 1
d279 1
d349 1
d1605 1
d1610 1
@


1.170
log
@	* Makefile.in (DLL_OFILES): Add posix_ipc.o.
	* cygwin.din (mq_close): Export.
	(mq_getattr): Export.
	(mq_notify): Export.
	(mq_open): Export.
	(mq_receive): Export.
	(mq_send): Export.
	(mq_setattr): Export.
	(mq_timedreceive): Export.
	(mq_timedsend): Export.
	(mq_unlink): Export.
	* posix_ipc.cc: New file implementing the above functions.  Move
	shm_open and shm_unlink from syscalls.cc here.
	* sysconf.cc (sca): Set value of _SC_MQ_OPEN_MAX to MQ_OPEN_MAX,
	_SC_MQ_PRIO_MAX to MQ_PRIO_MAX, _SC_MESSAGE_PASSING to
	_POSIX_MESSAGE_PASSING.
	* include/limits.h (MQ_OPEN_MAX): Define.
	(MQ_PRIO_MAX): Define.
	* include/mqueue.h: New file.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1238 1
@


1.169
log
@	* cygwin.din (shm_open): Export.
	(shm_unlink): Export.
	* syscalls.cc (shm_open): New function.
	(shm_unlink): New function.
	* sysconf.cc (sca): Set value of _SC_SHARED_MEMORY_OBJECTS to
	_POSIX_SHARED_MEMORY_OBJECTS.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/mman.h (shm_open): Add prototype.
	(shm_unlink): Ditto.
@
text
@d936 10
@


1.168
log
@	* cygmalloc.h (MALLOC_FAILURE_ACTION): Define empty.
	* cygwin.din (posix_madvise): Export.
	(posix_memalign): Export.
	* fhandler.cc (fhandler_base::fpathconf): Return useful values in
	_PC_VDISABLE, _PC_SYNC_IO and _PC_SYMLINK_MAX cases.
	* malloc_wrapper.cc (malloc): Set errno here since it's not set in
	dlmalloc.c anymore.
	(realloc): Ditto.
	(calloc): Ditto.
	(memalign): Ditto.
	(valloc): Ditto.
	(posix_memalign): New function.
	* mmap.cc (posix_madvise): New function.
	* sysconf.cc (get_open_max): New function.
	(get_page_size): Ditto.
	(get_nproc_values): Ditto.
	(get_avphys): Ditto.
	(sc_type): New type.
	(sca): New array to map _SC_xxx options to sysconf return values.
	(sysconf): Reimplement using sca array.
	* include/limits.h: Add all missing values as defined by SUSv3.
	* include/pthread.h (PTHREAD_DESTRUCTOR_ITERATIONS): Move definition
	to sys/limits.h.
	(PTHREAD_KEYS_MAX): Ditto.
	* include/semaphore.h (SEM_VALUE_MAX): Ditto.
	* include/cygwin/stdlib.h (posix_memalign): Declare.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/mman.h: Add posix_madvise flags.
	(posix_madvise): Declare.
	* include/sys/termios.h (_POSIX_VDISABLE): Move definition to
	sys/limits.h.
@
text
@d1317 2
@


1.167
log
@	* autoload.cc (WSAIoctl): Define.
	(SendARP): Define.
	* cygwin.din: Export if_freenameindex, if_indextoname, if_nameindex and
	if_nametoindex.
	* fhandler_procnet.cc: Drop including wchar.h.  Drop definitions of
	GAA_FLAG_INCLUDE_ALL_INTERFACES, IP_ADAPTER_UNICAST_ADDRESS_VISTA.
	(fhandler_procnet::exists): Check for has_gaa_prefixes.  Call
	get_adapters_addresses here.
	(fhandler_procnet::readdir): Ditto.
	(prefix): Move to net.cc.
	(fhandler_procnet::fill_filebuf): Call get_adapters_addresses here.
	Simplify allocation.  Use AdapterName rather than FriendlyName as
	interface name.  Use IfIndex if available, Ipv6IfIndex otherwise.
	(in6_are_prefix_equal): Move to net.cc.
	* fhandler_socket.cc: Define old SIOCGxxx values.
	(CONV_OLD_TO_NEW_SIO): Convert old SIOCGxxx value to new one.
	(struct __old_ifreq): Define old struct ifreq.
	(fhandler_socket::ioctl): Handle old SIOCGxxx values.  Handle new
	SIOCGIFFRNDLYNAM command.  Simplify copying ifreq data to user space.
	Call get_ifconf with additional SOCKET parameter.
	* net.cc (IP_ADAPTER_UNICAST_ADDRESS_LH): Define.
	(IP_ADAPTER_ADDRESSES_LH): Define.
	(SIO_GET_INTERFACE_LIST): Define.
	(sockaddr_in6_old): Define.
	(sockaddr_gen): Define.
	(INTERFACE_INFO): Define.
	(IN_LOOPBACK): Define.
	(in_are_prefix_equal): New static function.
	(ip_addr_prefix): New function, replaces prefix function, add AF_INET
	handling.
	(GAA_FLAG_INCLUDE_ALL_INTERFACES): Define.
	(get_adapters_addresses): New function.
	(WS_IFF_xxx): Define Winsock interface flag values.
	(convert_ifr_flags): New function to convert Winsock interface flag
	values to Cygwin interface flag values.
	(get_xp_ifconf): New get_ifconf implementation for XP SP1 and above.
	(get_2k_ifconf): Fix interface index.  Fix formatting.
	(get_nt_ifconf): Fix formatting.
	(get_95_ifconf): Ditto.
	(get_ifconf): Take additional SOCKET parameter.  Call get_xp_ifconf
	on XP SP1 and above.
	(if_nametoindex): New function.
	(if_indextoname): New function.
	(if_nameindex): New function.
	(if_freenameindex): New function.
	(in6_are_prefix_equal): Moved here from fhandler_procnet.cc.
	* wincap.cc (wincap_xp): Define has_gaa_prefixes as true by default.
	(wincapc::init): Assume has_osversioninfoex by default.  Call
	GetVersionEx with OSVERSIONINFOEX first.  Call with OSVERSIONINFO only
	if that fails.  Simplify NT4 case and try to avoid strcmp.  Check XP
	Service Pack using version.wServicePackMajor to avoid strcmp.
	* include/asm/socket.h (SIOCGIFFRNDLYNAM): Define.
	* include/cygwin/if.h: Fix formatting.
	(IFF_POINTTOPOINT): Define.
	(IFF_NOARP): Define.
	(IFF_LOWER_UP): Define.
	(IFF_DORMANT): Define.
	(struct if_nameindex): Define.
	(IFRF_FRIENDLYNAMESIZ): Define.
	(struct ifreq_frndlyname): Define.
	(IFNAMSIZ): Redefine as 44.
	(IF_NAMESIZE): Define.
	(struct ifreq): Redefine ifru_flags as int.  Define ifru_data.  Pad size
	to sizeof sockaddr_in6 for further extensions.
	(ifr_data): Define.
	(ifr_frndlyname): Define.
	(if_nametoindex): Declare.
	(if_indextoname): Declare.
	(if_nameindex): Declare.
	(if_freenameindex): Declare.
	* include/cygwin/version.h: Bump API minor number.
	(CYGWIN_VERSION_CHECK_FOR_OLD_IFREQ): Define check for old vs. new
	ifreq structure.
@
text
@d991 2
@


1.166
log
@	* Makefile.in (DLL_OFILES): Add minires-os-if.o and minires.o.
	(SUBLIBS): Add libresolv.a.
	Add rule for libresolv.a.
	* autoload.cc: Fix return code handling for IP Helper API in case
	of being unable to load iphlpapi.dll.
	(DnsQuery_A): Define.
	(DnsRecordListFree): Define.
	* cygwin.din: Export resolver functions.
	* include/resolv.h: New header.
	* include/arpa/nameser.h: New header.
	* include/arpa/nameser_compat.h: New header.
	* include/cygwin/version.h: Bump API minor number.
	* libc/minires-os-if.c: New file.
	* libc/minires.c: New file.
	* libc/minires.h: New file.
@
text
@d702 4
@


1.165
log
@	* autoload.cc (NtSetInformationFile): Define.
	* cygwin.din: Export posix_fadvise and posix_fallocate.
	* fhandler.cc (fhandler_base::fadvise): New method.
	(fhandler_base::ftruncate): Add allow_truncate parameter.
	* fhandler.h (class fhandler_base): Add fadvise method.  Accomodate
	new parameter to ftruncate.
	(class fhandler_pipe): Add fadvise and ftruncate methods.
	(class fhandler_disk_file): Add fadvise method.  Accomodate new
	parameter to ftruncate.
	* fhandler_disk_file.cc (fhandler_disk_file::fadvise): New method.
	(fhandler_disk_file::ftruncate): Accomodate new allow_truncate
	parameter.  Set EOF using NtSetInformationFile on NT.
	* ntdll.h (struct _FILE_END_OF_FILE_INFORMATION): Define.
	(NtSetInformationFile): Declare.
	* pipe.cc (fhandler_pipe::fadvise): New method.
	(fhandler_pipe::ftruncate): Ditto.
	* syscalls.cc (posix_fadvise): New function.
	(posix_fallocate): Ditto.
	(ftruncate64): Accomodate second parameter to fhandler's ftruncate
	method.
	* include/fcntl.h: Add POSIX_FADV_* flags.  Add declarations of
	posix_fadvise and posix_fallocate.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d272 6
d1133 29
@


1.164
log
@2006-07-25  Corinna Vinschen  <corinna@@vinschen.de>

	* include/cygwin/version.h: Bump DLL version to 1.7.0.

2006-07-25  Corinna Vinschen  <corinna@@vinschen.de>

	* select.h: Remove.
	* fhandler_socket.cc: Don't include select.h.
	* select.cc: Ditto.

2006-07-25  Corinna Vinschen  <corinna@@vinschen.de>

	* cygtls.h: Drop socket related includes.
	(struct _local_storage): Remove exitsock and exitsock_sin. Add
	select_sockevt.
	* cygtls.cc: Accomodate above change throughout.
	* fhandler.h (class fhandler_socket): Make wsock_evt public.
	* fhandler_socket.cc (fhandler_socket::fhandler_socket): Accomodate
	reordering members.
	(fhandler_socket::evaluate_events): Drop FD_CONNECT event as soon as
	it gets read once.  Never remove FD_WRITE event here.
	(fhandler_socket::wait_for_events): Wait 50 ms instead of INFINITE for
	socket events.
	(fhandler_socket::accept): Fix conditional.  Set wsock_events members
	of accepted socket to useful start values.
	(fhandler_socket::recv_internal): Always drop FD_READ/FD_OOB events from
	wsock_events after the call to WSARecvFrom.
	(fhandler_socket::send_internal): Drop FD_WRITE event from wsock_events
	if the call to WSASendTo fails with WSAEWOULDBLOCK.  Fix return value
	condition.
	* select.cc (struct socketinf): Change to accomodate using socket event
	handling.
	(peek_socket): Use event handling for peeking socket.
	(thread_socket): Ditto.
	(start_thread_socket): Ditto.
	(socket_cleanup): Same here.
	* tlsoffsets.h: Regenerate.

2006-07-20  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler.h (class fhandler_socket): Rearrange slightly to keep
	event handling methods and members together.  Drop owner status flag.
	Split wait method.  Rename event handling methods for readability.
	* fhandler_socket.cc (struct wsa_event): Add owner field.
	(LOCK_EVENTS): New macro.
	(UNLOCK_EVENTS): Ditto.
	(fhandler_socket::init_events): rename from prepare.
	(fhandler_socket::evaluate_events): First half of former wait method.
	Do everything but wait.  Allow specifiying whether or not events from
	event_mask should be erased from wsock_events->events.  Simplify
	OOB handling.  Allow sending SIGURG to any process (group).
	(fhandler_socket::wait_for_events): Second half of former wait method.
	Call evaluate_events and wait in a loop if socket is blocking.
	(fhandler_socket::release_events): Rename from release.
	(fhandler_socket::connect): Accomodate above name changes.
	(fhandler_socket::accept): Ditto.
	(fhandler_socket::recv_internal): Ditto.
	(fhandler_socket::send_internal): Ditto.
	(fhandler_socket::close): Ditto.
	(fhandler_socket::fcntl): Always set owner to given input value on
	F_SETOWN.  Handle F_GETOWN.
	* net.cc (fdsock): Accomodate above name changes.

2006-07-20  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_socket.cc (fhandler_socket::wait): Set Winsock errno to
	WSAEWOULDBLOCK instead of WSAEINPROGRESS.

2006-07-18  Brian Ford  <Brian.Ford@@FlightSafety.com>
	    Corinna Vinschen  <corinna@@vinschen.de>

	* winsup.h (mmap_region_status): New enum.
	(mmap_is_attached_or_noreserve_page): Adjust prototype and rename
	as below.
	* mmap.cc (mmap_is_attached_or_noreserve_page):  Rename
	mmap_is_attached_or_noreserve.  Add region length parameter.
	Return enum above.
	* exceptions.cc (_cygtls::handle_exceptions): Accomodate above.
	* fhandler.cc (fhandler_base::raw_read): Call above for NOACCESS
	errors and retry on success to allow reads into untouched
	MAP_NORESERVE buffers.

2006-07-18  Corinna Vinschen  <corinna@@vinschen.de>

	* cygwin.din (posix_openpt): Export.
	* tty.cc (posix_openpt): New function.
	* include/cygwin/stdlib.h (posix_openpt): Declare.
	* include/cygwin/version.h: Bump API minor number.

2006-07-14  Corinna Vinschen  <corinna@@vinschen.de>

	* security.cc (get_token_group_sidlist): Always add the interactive
	group to the token.  Add comment.  Create logon_id group SID by
	copying it from incoming group list.
	(create_token): Add subauth_token parameter.  Use information in
	subauth_token if present.  Tweak SourceIdentifier if subauth_token
	is present for debugging purposes.
	* security.h (create_token): Add subauth_token parameter in declaration.
	* syscalls.cc (seteuid32): Call subauth first.  Call create_token
	regardless.  Use subauth token in call to create_token if subauth
	succeeded.

2006-07-13  Corinna Vinschen  <corinna@@vinschen.de>

	* include/netinet/in.h: Update copyright.

2006-07-13  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_socket.cc (fhandler_socket::wait): Rework function so that
	WaitForMultipleObjects is really only called when necessary.

2006-07-12  Corinna Vinschen  <corinna@@vinschen.de>

	* include/netdb.h: Declare rcmd, rcmd_af, rexec, rresvport,
	rresvport_af, iruserok, iruserok_sa, ruserok.

2006-07-12  Corinna Vinschen  <corinna@@vinschen.de>

	* Makefile.in (DLL_OFILES): Drop iruserok.o.  Add rcmd.o.
	* autoload.cc (rcmd): Drop definition.
	* cygwin.din: Export bindresvport, bindresvport_sa, iruserok_sa,
	rcmd_af, rresvport_af.
	* net.cc (cygwin_rcmd): Remove.
	(last_used_bindresvport): Rename from last_used_rrecvport.
	(cygwin_bindresvport_sa): New function implementing bindresvport_sa.
	(cygwin_bindresvport): New function implementing bindresvport.
	(cygwin_rresvport): Remove.
	* include/cygwin/version.h: Bump API minor number.
	* include/netinet/in.h: Declare bindresvport and bindresvport_sa.
	* libc/iruserok.c: Remove file.
	* libc/rcmd.cc: New file implementing rcmd, rcmd_af, rresvport,
	rresvport_af, iruserok_sa, iruserok and ruserok.

2006-07-12  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_socket.cc (fhandler_socket::getsockname): Return valid
	result for unbound sockets.

2006-07-11  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler_socket.cc (fhandler_socket::fixup_after_fork): Handle
	wsock_mtx and wsock_evt on fork, thus handling close_on_exec correctly.
	(fhandler_socket::fixup_after_exec): Drop misguided attempt to handle
	close_on_exec here.
	(fhandler_socket::dup): Call fixup_after_fork with NULL parent.
	Add comment.
	(fhandler_socket::set_close_on_exec): Handle wsock_mtx and wsock_evt.

2006-07-10  Corinna Vinschen  <corinna@@vinschen.de>

	* fhandler.h (class fhandler_socket): Add wsock_mtx, wsock_evt
	and wsock_events members.  Remove closed status flag, add listener
	status flag.  Accomodate new implementation of socket event handling
	methods.  Declare recv* and send* functions ssize_t as the POSIX
	equivalents.
	(fhandler_socket::recv_internal): Declare.
	(fhandler_socket::send_internal): Ditto.
	* fhandler_socket.cc (EVENT_MASK): Define mask of selected events.
	(fhandler_socket::fhandler_socket): Initialize new members.
	(fhandler_socket::af_local_setblocking): Don't actually set the
	socket to blocking mode.  Keep sane event selection.
	(fhandler_socket::af_local_unsetblocking): Don't actually set the
	socket to previous blocking setting, just remember it.
	(struct wsa_event): New structure to keep event data per shared
	socket.
	(NUM_SOCKS): Define number of shared sockets concurrently handled by
	all active Cygwin processes.
	(wsa_events): New shared datastructure keeping all wsa_event records.
	(socket_serial_number): New shared variable to identify shared sockets.
	(wsa_slot_mtx): Global mutex to serialize wsa_events access.
	(search_wsa_event_slot): New static function to select a new wsa_event
	slot for a new socket.
	(fhandler_socket::prepare): Rewrite.  Prepare event selection
	per new socket.
	(fhandler_socket::wait): Rewrite.  Wait for socket events in thread
	safe and multiple process safe.
	(fhandler_socket::release): Rewrite.  Close per-socket descriptor
	mutex handle and event handle.
	(fhandler_socket::dup): Duplicate wsock_mtx and wsock_evt.  Fix
	copy-paste error in debug output.
	(fhandler_socket::connect): Accomodate new event handling.
	(fhandler_socket::listen): Set listener flag on successful listen.
	(fhandler_socket::accept): Accomodate new event handling.
	(fhandler_socket::recv_internal): New inline method centralizing
	common recv code.
	(fhandler_socket::recvfrom): Call recv_internal now.
	(fhandler_socket::recvmsg): Ditto.  Streamline copying from iovec
	to WSABUF.
	(fhandler_socket::send_internal): New inline method centralizing
	common send code.
	(fhandler_socket::sendto): Call send_internal now.
	(fhandler_socket::sendmsg): Ditto.  Streamline copying from iovec
	to WSABUF.
	(fhandler_socket::close): Call release now.
	(fhandler_socket::ioctl): Never actually switch to blocking mode.
	Just keep track of the setting.
	* net.cc (fdsock): Call prepare now.
	(cygwin_connect): Revert again to event driven technique.
	(cygwin_accept): Ditto.
	* poll.cc (poll): Don't call recvfrom on a listening socket.
	Remove special case for failing recvfrom.
	* include/sys/socket.h: Declare recv* and send* functions ssize_t as
	requested by POSIX.

2006-07-07  Corinna Vinschen  <corinna@@vinschen.de>

	* net.cc (cygwin_inet_ntop): Fix data type of forth parameter.

2006-07-06  Corinna Vinschen  <corinna@@vinschen.de>

	* include/cygwin/in6.h (struct in6_addr): Fix typo.

2006-07-06  Corinna Vinschen  <corinna@@vinschen.de>

	* cygwin.din: Export in6addr_any, in6addr_loopback, freeaddrinfo,
	gai_strerror, getaddrinfo, getnameinfo.
	* fhandler_socket.cc: Include cygwin/in6.h.
	(get_inet_addr): Accomodate AF_INET6 usage.
	(fhandler_socket::connect): Ditto.
	(fhandler_socket::listen): Ditto.
	(fhandler_socket::sendto): Ditto.
	* net.cc: Include cygwin/in6.h.
	(in6addr_any): Define.
	(in6addr_loopback): Define.
	(cygwin_socket): Accomodate AF_INET6 usage.
	(socketpair): Bind socketpairs only to loopback for security.
	(inet_pton4): New static function.
	(inet_pton6): Ditto.
	(cygwin_inet_pton): New AF_INET6 aware inet_pton implementation.
	(inet_ntop4): New static function.
	(inet_ntop6): Ditto.
	(cygwin_inet_ntop): New AF_INET6 aware inet_ntop implementation.
	(ga_aistruct): New static function.
	(ga_clone): Ditto.
	(ga_echeck): Ditto.
	(ga_nsearch): Ditto.
	(ga_port): Ditto.
	(ga_serv): Ditto.
	(ga_unix): Ditto.
	(gn_ipv46): Ditto.
	(ipv4_freeaddrinfo): Ditto.
	(ipv4_getaddrinfo): Ditto.
	(ipv4_getnameinfo): Ditto.
	(gai_errmap_t): New structure holding error code - error string mapping.
	(cygwin_gai_strerror): New function implementing gai_strerror.
	(w32_to_gai_err): New static function.
	(get_ipv6_funcs): Ditto.
	(load_ipv6_funcs): Ditto.
	(cygwin_freeaddrinfo): New function implementing freeaddrinfo.
	(cygwin_getaddrinfo): New function implementing getaddrinfo.
	(cygwin_getnameinfo): New function implementing getnameinfo.
	* include/netdb.h: Include stdint.h and cygwin/socket.h.  Define
	data types and macros used by getaddrinfo and friends.  Declare
	freeaddrinfo, gai_strerror, getaddrinfo and getnameinfo.
	* include/cygwin/in.h: Add IPv6 related IPPROTOs. Remove definition
	of struct sockaddr_in6.  Include cygwin/in6.h instead.
	* include/cygwin/in6.h: New header file defining IPv6 releated
	data types and macros.
	* include/cygwin/socket.h: Enable AF_INET6 and PF_INET6.  Add
	IPv6 related socket options.
	* include/cygwin/version.h: Bump API minor number.

2006-07-06  Corinna Vinschen  <corinna@@vinschen.de>

	* autoload.cc (DsGetDcNameA): Define.
	(NetGetAnyDCName): Define.
	* security.cc: Include dsgetdc.h.
	(DsGetDcNameA): Declare.
	(DS_FORCE_REDISCOVERY): Define.
	(get_logon_server): Add bool parameter to control rediscovery of DC.
	Use DsGetDcNameA function if supported, NetGetDCName/NetGetAnyDCName
	otherwise.
	(get_server_groups): Rediscover DC if get_user_groups fails and
	try again.
	(get_reg_security): Use correct error code macro when testing
	RegGetKeySecurity return value.
	* security.h (get_logon_server): Remove default vaue from wserver
	parameter.  Add rediscovery parameter.
	* uinfo.cc (cygheap_user::env_logsrv): Accomodate rediscovery parameter
	in call to get_logon_server.
@
text
@d979 2
@


1.163
log
@* sortdin: Ignore all leading underscores when deriving a sort key.
* cygwin.din: Resort.
@
text
@d14 2
d150 2
d478 1
d532 1
d547 1
d604 1
d725 1
d979 1
d1099 1
d1142 1
@


1.163.2.1
log
@	* cygwin.din: Export in6addr_any, in6addr_loopback, freeaddrinfo,
	gai_strerror, getaddrinfo, getnameinfo.
	* fhandler_socket.cc: Include cygwin/in6.h.
	(get_inet_addr): Accomodate AF_INET6 usage.
	(fhandler_socket::connect): Ditto.
	(fhandler_socket::listen): Ditto.
	(fhandler_socket::sendto): Ditto.
	* net.cc: Include cygwin/in6.h.
	(in6addr_any): Define.
	(in6addr_loopback): Define.
	(cygwin_socket): Accomodate AF_INET6 usage.
	(socketpair): Bind socketpairs only to loopback for security.
	(inet_pton4): New static function.
	(inet_pton6): Ditto.
	(cygwin_inet_pton): New AF_INET6 aware inet_pton implementation.
	(inet_ntop4): New static function.
	(inet_ntop6): Ditto.
	(cygwin_inet_ntop): New AF_INET6 aware inet_ntop implementation.
	(ga_aistruct): New static function.
	(ga_clone): Ditto.
	(ga_echeck): Ditto.
	(ga_nsearch): Ditto.
	(ga_port): Ditto.
	(ga_serv): Ditto.
	(ga_unix): Ditto.
	(gn_ipv46): Ditto.
	(ipv4_freeaddrinfo): Ditto.
	(ipv4_getaddrinfo): Ditto.
	(ipv4_getnameinfo): Ditto.
	(gai_errmap_t): New structure holding error code - error string mapping.
	(cygwin_gai_strerror): New function implementing gai_strerror.
	(w32_to_gai_err): New static function.
	(get_ipv6_funcs): Ditto.
	(load_ipv6_funcs): Ditto.
	(cygwin_freeaddrinfo): New function implementing freeaddrinfo.
	(cygwin_getaddrinfo): New function implementing getaddrinfo.
	(cygwin_getnameinfo): New function implementing getnameinfo.
	* include/netdb.h: Include stdint.h and cygwin/socket.h.  Define
	data types and macros used by getaddrinfo and friends.  Declare
	freeaddrinfo, gai_strerror, getaddrinfo and getnameinfo.
	* include/cygwin/in.h: Add IPv6 related IPPROTOs. Remove definition
	of struct sockaddr_in6.  Include cygwin/in6.h instead.
	* include/cygwin/in6.h: New header file defining IPv6 releated
	data types and macros.
	* include/cygwin/socket.h: Enable AF_INET6 and PF_INET6.  Add
	IPv6 related socket options.
	* include/cygwin/version.h: Bump API minor number.
@
text
@a13 2
in6addr_any DATA
in6addr_loopback DATA
a473 1
freeaddrinfo = cygwin_freeaddrinfo SIGFE
a526 1
gai_strerror = cygwin_gai_strerror NOSIGFE
a540 1
getaddrinfo = cygwin_getaddrinfo SIGFE
a596 1
getnameinfo = cygwin_getnameinfo SIGFE
@


1.163.2.2
log
@	* Makefile.in (DLL_OFILES): Drop iruserok.o.  Add rcmd.o.
	* autoload.cc (rcmd): Drop definition.
	* cygwin.din: Export bindresvport, bindresvport_sa, iruserok_sa,
	rcmd_af, rresvport_af.
	* net.cc (cygwin_rcmd): Remove.
	(last_used_bindresvport): Rename from last_used_rrecvport.
	(cygwin_bindresvport_sa): New function implementing bindresvport_sa.
	(cygwin_bindresvport): New function implementing bindresvport.
	(cygwin_rresvport): Remove.
	* include/cygwin/version.h: Bump API minor number.
	* include/netinet/in.h: Declare bindresvport and bindresvport_sa.
	* libc/iruserok.c: Remove file.
	* libc/rcmd.cc: New file implementing rcmd, rcmd_af, rresvport,
	rresvport_af, iruserok_sa, iruserok and ruserok.
@
text
@a149 2
bindresvport = cygwin_bindresvport SIGFE
bindresvport_sa = cygwin_bindresvport_sa SIGFE
a722 1
iruserok_sa SIGFE
a1094 1
rcmd_af = cygwin_rcmd_af SIGFE
a1136 1
rresvport_af = cygwin_rresvport_af SIGFE
@


1.163.2.3
log
@	* cygwin.din (posix_openpt): Export.
	* tty.cc (posix_openpt): New function.
	* include/cygwin/stdlib.h (posix_openpt): Declare.
	* include/cygwin/version.h: Bump API minor number.
@
text
@a978 1
posix_openpt SIGFE
@


1.162
log
@* sortdin: New program.
* cygwin.din: Sort.
@
text
@d6 1
d8 1
a10 5
__mb_cur_max DATA
__progname DATA
__rcmd_errstr DATA
_check_for_executable DATA
_ctype_ DATA
d14 1
d20 2
a28 58
__argz_add = argz_add SIGFE
__argz_add_sep = argz_add_sep SIGFE
__argz_append = argz_append SIGFE
__argz_count = argz_count NOSIGFE
__argz_create = argz_create SIGFE
__argz_create_sep = argz_create_sep SIGFE
__argz_delete = argz_delete SIGFE
__argz_extract = argz_extract NOSIGFE
__argz_insert = argz_insert SIGFE
__argz_next = argz_next NOSIGFE
__argz_replace = argz_replace SIGFE
__argz_stringify = argz_stringify NOSIGFE
__assert SIGFE
__assertfail SIGFE
__envz_add = envz_add SIGFE
__envz_entry = envz_entry NOSIGFE
__envz_get = envz_get NOSIGFE
__envz_merge = envz_merge SIGFE
__envz_remove = envz_remove SIGFE
__envz_strip = envz_strip SIGFE
__eprintf SIGFE
__errno NOSIGFE
__f_atan2 = _f_atan2 NOSIGFE
__f_atan2f = _f_atan2f NOSIGFE
__f_exp = _f_exp NOSIGFE
__f_expf = _f_expf NOSIGFE
__f_frexp = _f_frexp NOSIGFE
__f_frexpf = _f_frexpf NOSIGFE
__f_ldexp = _f_ldexp NOSIGFE
__f_ldexpf = _f_ldexpf NOSIGFE
__f_log = _f_log NOSIGFE
__f_log10 = _f_log10 NOSIGFE
__f_log10f = _f_log10f NOSIGFE
__f_logf = _f_logf NOSIGFE
__f_pow = _f_pow NOSIGFE
__f_powf = _f_powf NOSIGFE
__f_tan = _f_tan NOSIGFE
__f_tanf = _f_tanf NOSIGFE
__fpclassifyd NOSIGFE
__fpclassifyf NOSIGFE
__getdelim SIGFE
__getline SIGFE
__getreent NOSIGFE
__infinity NOSIGFE
__isinfd NOSIGFE
__isinff NOSIGFE
__isnand NOSIGFE
__isnanf NOSIGFE
__main NOSIGFE
__mempcpy = mempcpy NOSIGFE
__opendir_with_d_ino SIGFE
__signbitd NOSIGFE
__signbitf NOSIGFE
__signgam NOSIGFE
__srget SIGFE
__srget_r SIGFE
__swbuf SIGFE
__swbuf_r SIGFE
d78 1
d80 1
d82 1
d84 1
d86 1
d88 1
d90 1
d92 1
d94 1
d96 1
d98 1
d100 1
d117 2
d298 1
d300 1
d302 1
d304 1
d306 1
d308 2
d321 1
d348 1
d350 1
d352 1
d354 1
d356 1
d358 1
d360 1
d362 1
d364 1
d366 1
d368 1
d370 1
d372 1
d374 1
d376 1
d378 1
d462 2
d552 1
d589 1
d630 1
d706 1
d734 1
d737 1
d742 1
d745 1
d858 1
d891 1
d953 1
d1273 3
d1332 2
d1424 2
@


1.161
log
@	* cygwin.din: Export __srget_r, __swbuf_r.
	* include/cygwin/version.h: Bump API minor number to 156.
@
text
@a6 1
_ctype_ DATA
d15 1
a16 7
_sys_errlist DATA
sys_errlist = _sys_errlist DATA
_sys_nerr DATA
sys_nerr = _sys_nerr DATA
_timezone DATA
_tzname DATA
h_errno DATA
d23 18
a40 2
_alloca NOSIGFE
dll_entry@@12 NOSIGFE
d43 6
a50 21
__fpclassifyd NOSIGFE
__fpclassifyf NOSIGFE
__getreent NOSIGFE
__infinity NOSIGFE
__isinff NOSIGFE
__isinfd NOSIGFE
__isnanf NOSIGFE
__isnand NOSIGFE
__main NOSIGFE
__signbitd NOSIGFE
__signbitf NOSIGFE
__signgam NOSIGFE
__srget SIGFE
__srget_r SIGFE
__swbuf SIGFE
__swbuf_r SIGFE
_asprintf_r SIGFE
asprintf_r = _asprintf_r SIGFE
_dll_crt0@@0 NOSIGFE
_exit SIGFE
_f_atan2 NOSIGFE
a51 1
_f_atan2f NOSIGFE
a52 1
_f_exp NOSIGFE
a53 1
_f_expf NOSIGFE
a54 1
_f_frexp NOSIGFE
a55 1
_f_frexpf NOSIGFE
a56 1
_f_ldexp NOSIGFE
a57 1
_f_ldexpf NOSIGFE
a58 1
_f_log NOSIGFE
a59 1
_f_log10 NOSIGFE
a60 1
_f_log10f NOSIGFE
a61 1
_f_logf NOSIGFE
a62 1
_f_pow NOSIGFE
a63 1
_f_powf NOSIGFE
a64 1
_f_tan NOSIGFE
a65 1
_f_tanf NOSIGFE
d67 20
a86 25
_fcloseall_r SIGFE
fcloseall_r = _fcloseall_r SIGFE
_fscanf_r SIGFE
fscanf_r = _fscanf_r SIGFE
fstat SIGFE
_fstat = fstat SIGFE
_pipe SIGFE
_pthread_cleanup_pop SIGFE
_pthread_cleanup_push SIGFE
_scanf_r SIGFE
scanf_r = _scanf_r SIGFE
_sscanf_r SIGFE
sscanf_r = _sscanf_r SIGFE
stat SIGFE
_stat = stat SIGFE
_strtold SIGFE
trunc NOSIGFE
_vasprintf_r SIGFE
vasprintf_r = _vasprintf_r SIGFE
_vfscanf_r SIGFE
vfscanf_r = _vfscanf_r SIGFE
_vscanf_r SIGFE
vscanf_r = _vscanf_r SIGFE
_vsscanf_r SIGFE
vsscanf_r = _vsscanf_r SIGFE
d92 1
d132 1
a135 1
__argz_add = argz_add SIGFE
a136 1
__argz_add_sep = argz_add_sep SIGFE
a137 1
__argz_append = argz_append SIGFE
a138 1
__argz_count = argz_count NOSIGFE
a139 1
__argz_create = argz_create SIGFE
a140 1
__argz_create_sep = argz_create_sep SIGFE
a141 1
__argz_delete = argz_delete SIGFE
a142 1
__argz_extract = argz_extract NOSIGFE
a143 1
__argz_insert = argz_insert SIGFE
a144 1
__argz_next = argz_next NOSIGFE
a145 1
__argz_replace = argz_replace SIGFE
a146 1
__argz_stringify = argz_stringify NOSIGFE
d161 2
d191 1
d229 1
a230 1
clock_getres SIGFE
d237 1
d261 14
a274 1
accept = cygwin_accept SIGFE
a275 3
cygwin32_attach_handle_to_fd = cygwin_attach_handle_to_fd SIGFE
bind = cygwin_bind SIGFE
connect = cygwin_connect SIGFE
a276 1
cygwin32_conv_to_full_posix_path = cygwin_conv_to_full_posix_path SIGFE
a277 1
cygwin32_conv_to_full_win32_path = cygwin_conv_to_full_win32_path SIGFE
a278 1
cygwin32_conv_to_posix_path = cygwin_conv_to_posix_path SIGFE
a279 1
cygwin32_conv_to_win32_path = cygwin_conv_to_win32_path SIGFE
a280 1
cygwin32_detach_dll = cygwin_detach_dll SIGFE_MAYBE
a281 30
endprotoent = cygwin_endprotoent SIGFE
endservent = cygwin_endservent SIGFE
endusershell SIGFE
err SIGFE
errx SIGFE
gethostbyaddr = cygwin_gethostbyaddr SIGFE
gethostbyname = cygwin_gethostbyname SIGFE
_gethostname = cygwin_gethostname SIGFE
gethostname = cygwin_gethostname SIGFE
getpeereid SIGFE
getpeername = cygwin_getpeername SIGFE
getprogname NOSIGFE
getprotobyname = cygwin_getprotobyname SIGFE
getprotobynumber = cygwin_getprotobynumber SIGFE
getprotoent = cygwin_getprotoent SIGFE
getservbyname = cygwin_getservbyname SIGFE
getservbyport = cygwin_getservbyport SIGFE
getservent = cygwin_getservent SIGFE
getsockname = cygwin_getsockname SIGFE
getsockopt = cygwin_getsockopt SIGFE
getsubopt NOSIGFE
getusershell SIGFE
herror = cygwin_herror SIGFE
hstrerror = cygwin_hstrerror NOSIGFE
inet_addr = cygwin_inet_addr SIGFE
inet_aton = cygwin_inet_aton SIGFE
inet_pton = cygwin_inet_pton SIGFE
inet_network = cygwin_inet_network SIGFE
inet_ntoa = cygwin_inet_ntoa SIGFE
inet_ntop = cygwin_inet_ntop SIGFE
a282 2
cygwin32_internal = cygwin_internal SIGFE
listen = cygwin_listen SIGFE
a283 2
lstat SIGFE
_lstat = lstat SIGFE
a284 1
cygwin32_posix_path_list_p = cygwin_posix_path_list_p NOSIGFE
a285 1
cygwin32_posix_to_win32_path_list = cygwin_posix_to_win32_path_list SIGFE
a286 15
cygwin32_posix_to_win32_path_list_buf_size = cygwin_posix_to_win32_path_list_buf_size SIGFE
rcmd = cygwin_rcmd SIGFE
recv = cygwin_recv SIGFE
recvfrom = cygwin_recvfrom SIGFE
recvmsg = cygwin_recvmsg SIGFE
rexec = cygwin_rexec SIGFE
rresvport = cygwin_rresvport SIGFE
_select = cygwin_select SIGFE
select = cygwin_select SIGFE
pread SIGFE
pwrite SIGFE
pselect SIGFE
send = cygwin_send SIGFE
sendmsg = cygwin_sendmsg SIGFE
sendto = cygwin_sendto SIGFE
a287 7
setprogname NOSIGFE
setprotoent = cygwin_setprotoent SIGFE
setservent = cygwin_setservent SIGFE
setsockopt = cygwin_setsockopt SIGFE
setusershell SIGFE
shutdown = cygwin_shutdown SIGFE
socket = cygwin_socket SIGFE
a288 1
cygwin32_split_path = cygwin_split_path NOSIGFE
a291 1
cygwin32_win32_to_posix_path_list = cygwin_win32_to_posix_path_list SIGFE
a292 1
cygwin32_win32_to_posix_path_list_buf_size = cygwin_win32_to_posix_path_list_buf_size SIGFE
a293 1
cygwin32_winpid_to_pid = cygwin_winpid_to_pid SIGFE
d305 1
d308 1
d333 1
d336 2
a341 1
__envz_add = envz_add SIGFE
a342 1
__envz_entry = envz_entry NOSIGFE
a343 1
__envz_get = envz_get NOSIGFE
a344 1
__envz_merge = envz_merge SIGFE
a345 1
__envz_remove = envz_remove SIGFE
a346 1
__envz_strip = envz_strip SIGFE
d357 2
d372 1
d383 16
d417 2
d428 1
a458 12
ftrylockfile SIGFE
fts_children SIGFE
fts_close SIGFE
fts_get_clientptr NOSIGFE
fts_get_stream NOSIGFE
fts_open SIGFE
fts_read SIGFE
fts_set NOSIGFE
fts_set_clientptr NOSIGFE
ftw SIGFE
nftw SIGFE
funlockfile SIGFE
d501 2
d511 2
a516 1
fdatasync SIGFE
d531 12
a568 1
__getdelim SIGFE
a587 1
getgrgid_r SIGFE
d591 1
a591 1
getgrnam_r SIGFE
d595 1
d599 2
d602 2
a604 1
__getline SIGFE
a605 1
getlogin_r NOSIGFE
d608 1
d620 2
d630 4
d652 3
d656 3
d664 1
d691 1
d694 1
d711 2
d715 4
a730 1
ruserok SIGFE
d823 1
a851 2
updwtmp SIGFE
updwtmpx SIGFE
d864 2
d867 1
d896 1
a899 2
__mempcpy = mempcpy NOSIGFE
memmem NOSIGFE
d915 1
a924 2
mlock SIGFE
munlock SIGFE
d931 1
d945 1
a960 1
__opendir_with_d_ino SIGFE
d972 1
d985 1
d988 1
d1005 2
a1051 1
pthread_rwlock_wrlock SIGFE
d1054 3
a1057 1
pthread_rwlockattr_getpshared SIGFE
a1058 1
pthread_rwlockattr_destroy SIGFE
d1086 1
d1095 1
d1108 3
d1126 1
d1137 2
d1155 2
d1170 2
d1184 3
d1227 2
d1241 1
d1244 1
d1251 1
d1269 1
a1276 1
sigqueue SIGFE
d1285 1
d1307 1
d1338 4
d1401 2
d1404 1
a1404 2
_strtodf = strtof SIGFE
strtodf = strtof SIGFE
d1411 1
a1413 1
strtoimax = strtoll NOSIGFE
a1432 1
vsyslog SIGFE
d1470 2
a1472 2
timegm NOSIGFE
_time = time SIGFE
d1494 1
d1522 2
a1529 2
futimes SIGFE
lutimes SIGFE
d1536 2
a1539 2
vwarn SIGFE
vwarnx SIGFE
d1548 2
d1556 2
d1564 5
@


1.160
log
@* abort.cc (abort): Set incyg manually to help get a reliable gdb stack trace.
* cygwin.din (abort): Make NOSIGFE.
@
text
@d49 1
d51 1
@


1.159
log
@* cygtls.h (CYGTLS_INITIALIZED): Change to a little more unlikely value.
(CYGTLSMAGIC): Delete.
* dcrt0.cc (dll_crt0_0): Call sigproc_init during init startup.
(_dll_crt0): Don't worry about sync_startup.  Just wait for sigthread here.
* dll_init.cc (cygwin_detach_dll): Only pick up tls version of retaddr if we
have a valid tls.
* fork.cc (frok::child): Remove sigproc_init initialization since it happens
much earlier now.
* gendef: Recognize SIGFE_MAYBE.
(fefunc): Generate calls to _sigfe_maybe, if appropriate.
(_sigfe_maybe): New function.
* init.cc (search_for): Always initialize search_for, even on fork.
(calibration_thread): Delete.
(calibration_id): Delete.
(prime_threads): Delete.
(munge_threadfunc): Remove calibration_thread special case.  Avoid calling
thread function if we haven't yet hit the "search_for" thread.
(dll_entry): Remove prime_threads call.  Only call munge_threadfunc when
hwait_sig is active.  Ditto.  for _my_tls.remove ();
* sigproc.cc (hwait_sig): Make global.
(sigproc_init): Don't bother with sync_startup.
(sig_send): Treat flush as a no-op when signals are held.
(wait_sig): Cause signals to be held after fork.
@
text
@d112 1
a112 1
abort SIGFE
@


1.158
log
@* cygwin.din: Fix some erroneous SIGFE/NOSIGFE settings.
* cygthread.cc (cygthread::callfunc): Revert below change.  Make ev a manual
reset event again.  so that it will be reset by WaitFor*Object as appropriate.
(cygthread::stub): Ditto.
(cygthread::terminate_thread): Reset ev if it was found to have been set.
@
text
@d304 2
a305 2
cygwin_detach_dll SIGFE
cygwin32_detach_dll = cygwin_detach_dll SIGFE
@


1.157
log
@	* cygwin.din: Export __isinff, __isinfd, __isnanf, __isnand.
	* include/cygwin/version.h: Bump API minor number to 155.
@
text
@d218 1
a218 1
basename SIGFE
d256 2
a257 2
clearerr NOSIGFE
_clearerr = clearerr NOSIGFE
d267 1
a267 2
closelog NOSIGFE
_closelog = closelog NOSIGFE
d282 1
a282 1
ctermid NOSIGFE
d304 2
a305 2
cygwin_detach_dll NOSIGFE
cygwin32_detach_dll = cygwin_detach_dll NOSIGFE
d327 1
a327 1
getsubopt SIGFE
d338 1
a338 1
cygwin32_internal = cygwin_internal NOSIGFE
d345 2
a346 2
cygwin_posix_to_win32_path_list NOSIGFE
cygwin32_posix_to_win32_path_list = cygwin_posix_to_win32_path_list NOSIGFE
d364 1
a364 1
setprogname SIGFE
d375 2
a376 2
cygwin_win32_to_posix_path_list NOSIGFE
cygwin32_win32_to_posix_path_list = cygwin_win32_to_posix_path_list NOSIGFE
d386 1
a386 1
dirname SIGFE
d502 2
a503 2
ferror NOSIGFE
_ferror = ferror NOSIGFE
d515 2
a516 2
fileno NOSIGFE
_fileno = fileno NOSIGFE
d632 2
a633 2
__getdelim NOSIGFE
getdelim = __getdelim NOSIGFE
d665 2
a666 2
__getline NOSIGFE
getline = __getline NOSIGFE
d688 1
a688 1
getpriority NOSIGFE
d1060 1
a1060 1
pthread_getspecific NOSIGFE
d1099 1
a1099 1
pthread_setspecific NOSIGFE
d1246 1
a1246 1
setpriority NOSIGFE
d1371 4
a1374 4
strerror NOSIGFE
_strerror = strerror NOSIGFE
strerror_r NOSIGFE
_strerror_r = strerror_r NOSIGFE
d1403 1
a1403 1
strsignal NOSIGFE
d1436 1
a1436 2
sync NOSIGFE
_sync = sync NOSIGFE
d1480 1
a1480 1
timegm SIGFE
d1528 2
a1529 2
unsetenv NOSIGFE
_unsetenv = unsetenv NOSIGFE
@


1.156
log
@* cygwin.din (_exit): Use signal front end.
(exit): Ditto.
@
text
@d40 4
@


1.155
log
@	* cygwin.din: Export sigignore and sigset.
	* exceptions.cc (sigset): New function.
	(sigignore): New function.
	* include/cygwin/signal.h (SIG_HOLD): Define.
	(sigignore): Declare.
	(sigset): Declare.
	* include/cygwin/version.h: Bump API minor number to 154.
@
text
@d49 1
a49 1
_exit NOSIGFE
d454 1
a454 1
exit = cygwin_exit NOSIGFE
@


1.154
log
@	* cygwin.din (updwtmpx): Export.
	* syscalls.cc (updwtmpx): New function.
	* include/utmpx.h (updwtmpx): Declare.
	* include/cygwin/version.h: Bump API minor number to 153.
@
text
@d1287 1
d1298 1
@


1.153
log
@* include/cygwin/version.h: Bump API minor number to 151.
* dir.cc (__opendir_with_d_ino): New function.
(opendir): Set flag if we should be calculating inodes.
(readdir_worker): Calculate d_ino by calling stat if the user has asked for it.
(seekdir64): Maintain all persistent flag settings.
* fhandler.h (dirent_states): Add dirent_set_d_ino.
* fhandler_disk_file.cc (fhandler_disk_file::opendir): Reflect changes to
dirent structure.
* fhandler_virtual.cc (fhandler_virtual::opendir): Ditto.
* include/sys/dirent.h (struct dirent): Coalesce two similar structures.
Remove all threads of the apparently highly confusing references to inodes.
Add support for calculating a real inode if __USE_EXPENSIVE_CYGWIN_D_INO is
defined.
@
text
@d890 1
@


1.152
log
@	* cygwin.din: Export getsubopt.
	* include/cygwin/version.h: Bump API minor version.
@
text
@d996 1
a996 1
_opendir = opendir SIGFE
@


1.151
log
@	* libc: Add subdirectory.
	* Makefile.in (VPATH): Add libc subdir.
	(DLL_OFILES): Add strptime.o and timelocal.o.
	* cygwin.din: Export timelocal and timegm.
	* localtime.cc: Define STD_INSPIRED unconditionally.
	* include/cygwin/time.h (timelocal): Add declaration.
	(timegm): Ditto.
	* include/cygwin/version.h: Bump API minor version.
	* libc/strptime.cc: New file.
	* libc/timelocal.cc: New file.
	* libc/timelocal.h: New file.
@
text
@d324 1
@


1.150
log
@* cygheap.h (init_cygheap::_gtod): Remove.
* cygwin.din: Export clock_getres and clock_setres.
* hires.h (hires_ms::minperiod): Delete declaration.
(hires_ms::began_period): Ditto.
(hires_ms::prime): Make void.
(hires_ms::resolution): Just define here.
(hires_ms::usecs): Remove unneeded argument.
(gtod): Redeclare as a variable.
* timer.cc (timer_thread): Eliminate argument to gtod.usecs().
(timer_tracker::gettime): Ditto.
(timer_tracker::settime): Ditto.
* times.cc (gettimeofday): Ditto.
(hires_ms::began_period): Delete declaration.
(hires_us::prime): Remove debugging.
(hires_ms::prime): Make void.  Eliminate period stuff.
(hires_ms::usecs): Eliminate argument to gtod.usecs().
(hires_ms::resolution): New function.
(clock_getres): Ditto.
(clock_setres): Ditto.
* version.h: Bump API version to 143.
* include/cygwin/time.h: New file.
@
text
@d1473 2
@


1.149
log
@* memmem.cc: New file.
* include/cygwin/version.h: Bump API version number to 142.
* cygwin.din: Export memmem.
@
text
@d257 2
@


1.148
log
@	* cygwin.din (futimes): Export.
	(lutimes): Export.
	* times.cc (utimes_worker): Created from utimes, add nofollow flag
	to implement utimes and lutimes.
	(utimes): Just call utimes_worker.
	(lutimes): New function.
	(futimes): Ditto.
	* include/cygwin/version.h: Bump API minor version.
@
text
@d932 1
@


1.147
log
@	* autoload.cc (NtLockVirtualMemory): Import.
	(NtUnlockVirtualMemory): Import.
	(GetProcessWorkingSetSize): Import.
	(SetProcessWorkingSetSize): Import.
	* cygwin.din (mlock): Export.
	(munlock): Export.
	* mmap.cc (mlock): New function.
	(munlock): Ditto.
	* ntdll.h (STATUS_WORKING_SET_QUOTA): Define.
	(LOCK_VM_IN_WSL): Define.
	(LOCK_VM_IN_RAM): Define.
	(NtLockVirtualMemory): Declare.
	(NtUnlockVirtualMemory): Declare.
	* sysconf.cc (sysconf): Implement _SC_MEMLOCK_RANGE.
	* wincap.h: Implement has_working_virtual_lock throughout.
	* wincap.cc: Ditto.
	* include/cygwin/version.h: Bump API minor version.
	* include/sys/mman.h (mlock): Declare,
	(munlock): Declare.
@
text
@d1525 2
@


1.146
log
@* cygwin.din: Correct readdir_r typo.
@
text
@d956 2
@


1.145
log
@* cygerrno.h (geterrno_from_win_error): Change declaration to default to using
GetLastError and EACCESS.
* cygwin.din: Export readdir_r.
* include/cygwin/version.h: Bump API version number to 138.
* syscalls.cc (readdir_worker): New function, renamed from old readdir()
function.
(readdir): Use readdir_worker.
(readdir_r): New function.
* fhandler.h (fhandler_base::readdir): Accommodate second argument indicating
dirent buffer.
(fhandler_disk_file::readdir): Ditto.
(fhandler_cygdrive::readdir): Ditto.
(fhandler_proc::readdir): Ditto.
(fhandler_netdrive::readdir): Ditto.
(fhandler_registry::readdir): Ditto.
(fhandler_process::readdir): Ditto.
* fhandler.cc (fhandler_base::readdir): Ditto.
* fhandler_disk_file.cc (fhandler_disk_file::readdir): Ditto.
* fhandler_cygdrive.cc (fhandler_cygdrive::readdir): Ditto.
* fhandler_proc.cc (fhandler_proc::readdir): Ditto.
* fhandler_netdrive.cc (fhandler_netdrive::readdir): Ditto.
* fhandler_registry.cc (fhandler_registry::readdir): Ditto.
* fhandler_process.cc (fhandler_process::readdir): Ditto.
@
text
@d1123 1
a1123 1
readdir_r = readdir SIGFE
@


1.144
log
@	* Makefile.in (DLL_OFILES): Add fts.o, ftw.o, nftw.o.
	* cygwin.din: Export fts_children, fts_close, fts_get_clientptr,
	fts_get_stream, fts_open, fts_read, fts_set, fts_set_clientptr,
	ftw, nftw.
	* fts.c: New file, imported from FreeBSD.
	* ftw.c: Ditto.
	* nftw.c: Ditto.
	* include/fts.h: Ditto.
	* include/ftw.h: Ditto.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1123 1
@


1.143
log
@* fhandler.h (fhandler_base::pread): Declare new function.
(fhandler_base::pwrite): Ditto.
(fhandler_disk_file::pread): Ditto.
(fhandler_disk_file::pwrite): Ditto.
* fhandler.cc (fhandler_base::pread): Define new function.
(fhandler_base::pwrite): Ditto.
* fhandler_disk_file.cc (fhandler_base::pread): Ditto.
(fhandler_base::pwrite): Ditto.
* syscalls.cc (pread): Define new function.
(pwrite): Ditto.
* cygwin.din: Export pread, pwrite.
* include/sys/ioctl.h: Guard some _IO* declarations to avoid conflict with
socket.h.
@
text
@d520 10
@


1.142
log
@	* cygwin.din (getline): Export.
	(getdelim): Export.
	* include/sys/stdio.h (getline): Replace macro with function prototype.
	(getdelim):  Likewise.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d351 2
@


1.141
log
@	* cygwin.din (__getline): Export.
	(__getdelim): Export.
	* include/sys/stdio.h (getline): Define as __getline.
	(getdelim): Define as __getdelim.
	* include/cygwin/version.h: Bump API minor number.
@
text
@a37 2
__getline NOSIGFE
__getdelim NOSIGFE
d614 2
d647 2
@


1.140
log
@	* cygwin.din (inet_pton): Export.
	(inet_ntop): Export.
	* net.cc (cygwin_inet_pton): Implement inet_pton for AF_INET for now.
	(cygwin_inet_ntop): Implement inet_ntop for AF_INET for now.
	* include/arpa/inet.h (inet_pton): Declare.
	(inet_ntop): Declare.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d38 2
@


1.139
log
@	* cygwin.din (imaxabs): Export.
	(imaxdiv): Export.
	(llabs): Export.
	(lldiv): Export.
	(strtoimax): Export.
	(strtoumax): Export.
	* include/inttypes.h (imaxabs): Activate declaration.
	(imaxdiv): Ditto.
	(strtoimax): Ditto.
	(strtoumax): Ditto.
	* include/cygwin/version.h: Bump API minor.
@
text
@d327 1
d330 1
@


1.138
log
@* cygtls.h (_local_storage::setmode_file): New element.
(_local_storage::setmode_mode): New element.
* tlsoffsets.h: Regenerate.
* cygwin.din (setmode): Define as cygwin_getmode.
* syscalls.cc (setmode_helper): Use setmode_* variables from tls rather than
using unthreadsafe static.
(setmode): Break out fwalk stuff.
(cygwin_setmode): New function.  Put fwalk stdio stuff here.
@
text
@d729 2
d840 2
d1390 1
d1396 1
@


1.137
log
@* cygwin.din: Remove signal front end from pthread_[gs]etspecific.
@
text
@d1205 2
a1206 2
setmode SIGFE
_setmode = setmode SIGFE
@


1.136
log
@* cygwin.din: Export mkdtemp.
* mktemp.cc: New file.
* Makefile.in (DLL_OFILES): Add mktemp.o
@
text
@d1028 1
a1028 1
pthread_getspecific SIGFE
d1067 1
a1067 1
pthread_setspecific SIGFE
@


1.135
log
@	* cygwin.din (pselect): Export.
	* select.cc (pselect): New function.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/select.h: Include signal.h.  Declare pselect.
@
text
@d652 1
d914 1
@


1.134
log
@* dcrt0.cc (do_global_dtors): Run DLL dtors.
(__main): Don't rely on atexit to run dtors.
(do_exit): Specifically call do_global_dtors here.
(cygwin_exit): Ditto.
* dll_init.cc (dll_global_dtors): Make global.  Only run dtors once.
(dll_list::init): Just set flag that dtors should be run.  Don't rely on
atexit.
* dll_init.h (dll_global_dtors): Declare.
* exceptions.cc (sigrelse): Define.
* path.h (is_fs_device): New method.
(is_lnk_special): Ditto.
* fhandler_disk_file.cc (fhandler_disk_file::link): Use "is_lnk_special" rather
than "is_lnk_symlink".
* syscalls.cc (rename): Ditto.
* hookapi.cc (ld_preload): Use colon as a separator rather than space.
@
text
@d349 1
@


1.133
log
@* cygthread.cc (cygthread::detach): Revert to just waiting for thred event
since waiting for anything else is racy.
* timer.cc (timer_tracker::hcancel): Rename from cancel.
(timer_tracker::cancel): New method.
(timer_tracker::th): Remove.
(timer_tracker::~timer_tracker): Call cancel method.
(timer_tracker::timer_tracker): Ditto.
(timer_tracker::timer_tracker): Always, clear cancel, even though it is
probably not strictly necessary for ttstart.
(timer_thread): Accommodate cancel -> hcancel rename.
(timer_tracker::settime): Ditto.
(timer_tracker::gettime): Ditto.
(timer_delete): Ditto.
* cygwin.din: Export _ctype_.
* include/ctype.h: Mark that _ctype_ is imported.
@
text
@d1263 1
@


1.132
log
@* wininfo.h (wininfo::timer_active): Delete.
(wininfo::itv): Ditto.
(wininfo::start_time): Ditto.
(wininfo::window_started): Ditto.
(wininfo::getitimer): Ditto.
(wininfo::setitimer): Ditto.
(wininfo::wininfo): Ditto.
(wininfo::lock): New method.
(wininfo::release): Ditto.
* window.cc: Use new lock/acquire wininfo methods throughout.
(wininfo::wininfo): Delete
(wininfo::getitimer): Ditto.
(wininfo::setitimer): Ditto.
(getitimer): Ditto.
(setitimer): Ditto.
(ualarm): Ditto.
(alarm): Ditto.
(wininfo::lock): Define new function.
(wininfo::release): Ditto.
(wininfo::process): Delete WM_TIMER handling.
* timer.cc (struct timetracker): Delete it, flags.  Add it_interval,
interval_us, sleepto_us, running, init_muto(), syncthread, and gettime().
(ttstart): Make NO_COPY.
(lock_timer_tracker): New class.
(timer_tracker::timer_tracker): Distinguish ttstart case.
(timer_tracker::~timer_tracker): New destructor.  Clean out events, and reset
magic.
(timer_tracker::init_muto): New method.
(to_us): Round up as per POSIX.
(timer_thread): Reorganize to match timer_tracker::settime and
timer_tracker::gettime.  Call sig_send without wait.  Call auto_release.
(timer_tracker::settime): Reorganize logic to avoid race.  Call gettime to
recover old value.
(timer_tracker::gettime): New method.
(timer_create): Properly set errno on invalid timerid.  Use new
lock_timer_tracker method.
(timer_delete): Ditto.  Simplify code slightly.
(timer_gettime): New function.
(fixup_timers_after_fork): Reinit ttstart.
(getitimer): New implementation.
(setitimer): Ditto.
(ualarm): Ditto.
(alarm): Ditto.
* cygwin.din: Export timer_gettime.
* winsup.h: Remove has has_visible_window_station declaration.
* Makefile.in (DLL_OFILES): Add lsearch.o.
* cygthread.h (cygthread::notify_detached): New element.
(cygthread::cygthread): Take optional fourth argument signifying event to
signal on thread completion.
* cygthread.cc (cygthread::stub): Signal notify_detached event, if it exists.
(cygthread::cygthread): Initialize notify_detached from fourth argument.
(cygthread::detach): Wait for notify_detached field is present.
* lsearch.cc: New file.
* search.h: Ditto.
* include/cygwin/version.h: Bump API minor number to 126.
* cygwin.din: Export lsearch, lfind.
@
text
@d7 1
@


1.131
log
@checkin previously missed file.
@
text
@d824 1
d870 1
d1441 1
@


1.130
log
@	* cygwin.din (__ctype_ptr): Export.
	* include/cygwin/version.h: Bump API minor version.
@
text
@a13 1
__ctype_ptr DATA
@


1.129
log
@	* cygwin.din (utmpxname): Export.
	* syscalls.cc (utmpxname): Create export alias to utmpname.
	* include/utmpx.h: Define ut_name and ut_xtime if not already defined.
	(utmpxname): Add prototype.
	* include/sys/utmp.h: Only define ut_name if not already defined.
	* include/cygwin/version.h: Bump API minor version.
@
text
@d14 1
@


1.128
log
@	* cygwin.din (getpeereid): Export.
	* fhandler.h (class fhandler_socket): Add pipe and id members to
	exchange eid credentials for AF_LOCAL sockets.
	(eid_pipe_name): Declare new method.
	(getpeereid): Ditto.
	* fhandler_socket.cc (fhandler_socket::eid_pipe_name): New method.
	(fhandler_socket::fhandler_socket): Initialize sec_pipe.
	(fhandler_socket::connect): Exchange eid credentials with accepting
	socket process.
	(fhandler_socket::listen): Prepare eid credential transaction.
	(fhandler_socket::accept): Exchange eid credentials with connecting
	socket process.
	(fhandler_socket::close): Close eid credentials pipe if open.
	(fhandler_socket::getpeereid): New method.
	* net.cc (cygwin_getsockopt): Add SO_PEERCRED handling.
	(getpeereid): New function.
	* include/asm/socket.h (SO_PEERCRED): Define.
	* include/cygwin/socket.h (struct ucred): Define new type.
	* include/cygwin/version.h: Bump API minor version.
@
text
@d1492 1
@


1.127
log
@	* cygwin.din (fstatvfs): Export.
	(statvfs): Export.
	* syscalls.cc: Include sys/statvfs.h.
	(statvfs): New function.  Move statfs functionality here.
	(fstatvfs): New function.
	(statfs): Just call statvfs and copy structure.  Check validity of
	incoming struct statfs pointer.
	* include/cygwin/types.h (fsblkcnt_t): Define.
	(fsfilcnt_t): Define.
	* include/cygwin/version.h: Bump API minor version.
	* include/sys/statvfs.h: New file.
@
text
@d310 1
@


1.126
log
@	* cygwin.din (basename): Export.
	(dirname): Export.
	* path.cc (basename): New function.
	(dirname): New function.
	* include/libgen.h: New file.
	* include/cygwin/version.h: Bump API minor version.
@
text
@d567 1
d1311 1
@


1.125
log
@	* cygwin.din (fdatasync): Export.
	* fhandler.cc (fhandler_base::fsync): Return with EINVAL if no
	handle is available.
	* syscalls.cc (fdatasync): Create export alias to fsync.
	* include/cygwin/version.h: Bump API minor version.
@
text
@d213 1
d373 1
@


1.124
log
@	* cygwin.din: Export getpriority and setpriority.
	* fork.cc (fork_parent): Copy parent's nice value into child.
	* spawn.cc (spawn_guts): Ditto.
	* miscfuncs.cc (winprio_to_nice): New function.
	(nice_to_winprio): Ditto.
	* pinfo.cc (pinfo_init): If parent is not a Cygwin process, set
	default nice value according to current Win32 priority class.
	* pinfo.h (class _pinfo): Add nice member.
	* syscalls.cc (setpriority): New function, only implementing
	PRIO_PROCESS for now.
	(getpriority): Ditto.
	(nice): Just call setpriority.
	* wincap.h (wincaps::has_extended_priority_class): New element.
	* wincap.cc: Implement above element throughout.
	* winsup.h: Add prototypes for winprio_to_nice and nice_to_winprio.
	* include/limits.h (NZERO): New define.
	* include/cygwin/types.h (id_t): New datatype.
	* include/cygwin/version.h: Bump API minor version.
	* include/sys/resource.h: Add PRIO_XXX defines and prototypes for
	getpriority and setpriority.
@
text
@d565 1
@


1.123
log
@	* cygwin.din: Add utmpx symbols.
	* syscalls.cc: Include utmpx.h.  Implement utmpx functions as stubs
	to utmp functions.
	(copy_ut_to_utx): New static function.
	(pututline): Change from void to struct utmp * as on Linux.
	(setutxent): New function.
	(endutxent): New function.
	(getutxent): New function.
	(getutxid): New function.
	(getutxline): New function.
	(pututxline): New function.
	* include/utmpx.h: New file.
	* include/cygwin/utmp.h: New file.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/utmp.h: Include cygwin/utmp.h.  Move stuff common with
	utmpx functionality there.
	(pututline): Declare struct utmp *.
@
text
@d656 1
d1202 1
@


1.122
log
@	* cygwin.din (_impure_ptr): And export again. There are libs out there.
@
text
@d407 1
d686 3
d1074 1
d1223 1
@


1.121
log
@	* cygwin.din (_impure_ptr): Don't export.
	(reent_data): Export.
	* lib/_cygwin_crt0_common.cc (_impure_ptr): Drop entirely.  Don't
	initialize _impure_ptr or u->impure_ptr_ptr.
@
text
@d15 1
@


1.120
log
@* cygwin.din (_impure_ptr): Export.
(reent_data): Don't export.
* dcrt0.cc (reent_data): Drop.
(__cygwin_user_data): Initialize impure_ptr as GLOBAL_REENT.
(_dll_crt0): Initialize _impure_ptr as GLOBAL_REENT.
* lib/_cygwin_crt0_common.cc (_impure_ptr): Drop.  Declare extern as dllimport
instead.
@
text
@a14 1
_impure_ptr DATA
d27 1
@


1.119
log
@* include/cygwin/version.h: Bump api minor version number.
* cygwin.din: Export atoll.
@
text
@d15 1
a27 1
reent_data DATA
@


1.118
log
@	* cygwin.din: Add symbols flockfile, ftrylockfile, funlockfile,
	getgrgid_r, getgrnam_r and getlogin_r.
	* grp.cc (getgrgid_r): New function.
	(getgrnam_r): Ditto.
	* syscalls.cc (flockfile): Ditto.
	(ftrylockfile): Ditto.
	(funlockfile): Ditto.
	* sysconf.cc (sysconf): Return LOGIN_NAME_MAX in case of
	_SC_LOGIN_NAME_MAX.
	* thread.cc (__cygwin_lock_trylock): Define int.  Return value from
	call to pthread_mutex_trylock.
	* uinfo.cc (getlogin_r): New function.
	* include/limits.h: Define LOGIN_NAME_MAX.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/lock.h: Add declarations for __cygwin_lock_xxx functions.
	* include/sys/stdio.h: Add define for _ftrylockfile.
@
text
@d211 1
@


1.117
log
@	* cygwin.din: Export rand_r and ttyname_r.
	* syscalls.cc (ttyname_r): New function.
	(ttyname): Move functionality to ttyname_r.  Call it from here.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d506 3
d620 1
d624 1
d633 1
@


1.116
log
@* exceptions.cc (setup_handler): Signal event for any sigwaitinfo if it exists
to force signal to be handled.  Zero event here to prevent races.
* signal.cc (sigwaitinfo): Use local handle value for everything since signal
thread could zero event element at any time.  Detect when awaking due to thread
not in mask and set return value and errno accordingly.  Don't set signal
number to zero unless we've recognized the signal.
* sigproc.cc (sigq): Rename from sigqueue throughout.
* thread.cc (pthread::join): Handle signals received while waiting for thread
to terminate.
* cygwin.din: Export sighold, sigqueue.
* exceptions.cc (sighold): Define new function.
* signal.cc (handle_sigprocmask): Set correct errno for invalid signal.
Simplify debugging output.
(sigqueue): Define new function.
* include/cygwin/signal.h (sighold): Declare new function.
(sigqueue): Ditto.
* include/cygwin/version.h: Bump API minor version number.
* include/limits.h (TIMER_MAX): Define.
(_POSIX_TIMER_MAX): Ditto.
@
text
@d1070 1
d1442 1
@


1.115
log
@* localtime.cc (localtime_r): Call tzset.
* Makefile.in: Make version.h/cygwin.din version check a warning since it is
not foolproof.
* cygheap.h (CYGHEAPSIZE): Bump size down.
* cygtls.h (_threadinfo::stacklock): New element.
(_threadinfo::pop): Make regparm.
(_threadinfo::lock): New function.
(_threadinfo::unlock): New function.
* cygtls.cc (_threadinfo::push): Wait for a lock on the stack before performing
the operation.
(_threadinfo::pop): Move to another file.
* cygwin.din: More SIGFE changes.
* exceptions.cc (try_to_debug): Always display messages on console.
(handle_exceptions): Unwind stack only when actually about to call sig_send.
(setup_handler): Lock stack prior to performing any operations.
* gendef (_sigfe): Ditto.
(_sigbe): Ditto.
(_threadinfo::pop): Ditto.  Move here.
* gen_tlsoffsets: Generate positive offsets.
* tlsoffsets.h: Regenerate.
@
text
@d1228 2
@


1.114
log
@* cygwin.din: Make many more functions SIGFE.
* include/cygwin/version.h (CYGWIN_VERSION_SHARED_DATA): Bump.
@
text
@d482 2
a483 2
feof NOSIGFE
_feof = feof NOSIGFE
d486 2
a487 2
fflush NOSIGFE
_fflush = fflush NOSIGFE
d492 3
a494 3
fgetpos NOSIGFE
_fgetpos = fgetpos NOSIGFE
_fgetpos64 = fgetpos64 NOSIGFE
a505 1
flock SIGFE
d561 5
a565 5
ftell NOSIGFE
_ftell = ftell NOSIGFE
ftello NOSIGFE
_ftello = ftello NOSIGFE
_ftello64 = ftello64 NOSIGFE
@


1.113
log
@* dcrt0.cc (reent_data): Make global.
* cygwin.din: Reexport reent_data.
@
text
@d87 2
a88 2
_pthread_cleanup_pop NOSIGFE
_pthread_cleanup_push NOSIGFE
d99 2
a100 2
_vfscanf_r NOSIGFE
vfscanf_r = _vfscanf_r NOSIGFE
d532 2
a533 2
fputc NOSIGFE
_fputc = fputc NOSIGFE
d594 4
a597 4
getchar NOSIGFE
_getchar = getchar NOSIGFE
getchar_unlocked NOSIGFE
_getchar_unlocked = getchar_unlocked NOSIGFE
d664 2
a665 2
gets NOSIGFE
_gets = gets NOSIGFE
d821 2
a822 2
localtime_r NOSIGFE
_localtime_r = localtime_r NOSIGFE
d972 7
a978 7
pthread_attr_destroy NOSIGFE
pthread_attr_getdetachstate NOSIGFE
pthread_attr_getinheritsched NOSIGFE
pthread_attr_getschedparam NOSIGFE
pthread_attr_getschedpolicy NOSIGFE
pthread_attr_getscope NOSIGFE
pthread_attr_getstacksize NOSIGFE
d980 7
a986 7
pthread_attr_setdetachstate NOSIGFE
pthread_attr_setinheritsched NOSIGFE
pthread_attr_setschedparam NOSIGFE
pthread_attr_setschedpolicy NOSIGFE
pthread_attr_setscope NOSIGFE
pthread_attr_setstacksize NOSIGFE
pthread_cancel NOSIGFE
d988 1
a988 1
pthread_cond_destroy NOSIGFE
d993 2
a994 2
pthread_condattr_destroy NOSIGFE
pthread_condattr_getpshared NOSIGFE
d996 1
a996 1
pthread_condattr_setpshared NOSIGFE
d1000 6
a1005 6
pthread_equal NOSIGFE
pthread_exit NOSIGFE
pthread_getconcurrency NOSIGFE
pthread_getschedparam NOSIGFE
pthread_getsequence_np NOSIGFE
pthread_getspecific NOSIGFE
d1008 1
a1008 1
pthread_key_delete NOSIGFE
d1010 1
a1010 1
pthread_mutex_destroy NOSIGFE
d1017 5
a1021 5
pthread_mutexattr_destroy NOSIGFE
pthread_mutexattr_getprioceiling NOSIGFE
pthread_mutexattr_getprotocol NOSIGFE
pthread_mutexattr_getpshared NOSIGFE
pthread_mutexattr_gettype NOSIGFE
d1023 4
a1026 4
pthread_mutexattr_setprioceiling NOSIGFE
pthread_mutexattr_setprotocol NOSIGFE
pthread_mutexattr_setpshared NOSIGFE
pthread_mutexattr_settype NOSIGFE
d1028 1
a1028 1
pthread_rwlock_destroy NOSIGFE
d1036 7
a1042 7
pthread_rwlockattr_getpshared NOSIGFE
pthread_rwlockattr_setpshared NOSIGFE
pthread_rwlockattr_destroy NOSIGFE
pthread_self NOSIGFE
pthread_setcancelstate NOSIGFE
pthread_setcanceltype NOSIGFE
pthread_setconcurrency NOSIGFE
d1044 1
a1044 1
pthread_setspecific NOSIGFE
d1047 1
a1047 1
pthread_testcancel NOSIGFE
d1053 4
a1056 4
putchar NOSIGFE
_putchar = putchar NOSIGFE
putchar_unlocked NOSIGFE
_putchar_unlocked = putchar_unlocked NOSIGFE
d1138 1
a1138 1
sem_destroy NOSIGFE
d1337 1
a1337 1
strsignal SIGFE
d1355 1
a1355 1
strtosigno SIGFE
@


1.112
log
@* cygwin/include/signal.h: Add copyright notice.
* cygwin.din: Make clock SIGFE.  Add clock_gettime, sigwaitinfo, timer_create,
timer_delete, timer_settime.
* include/cygwin/version.h: Reflect above additions.
* fork.cc (fork_child): Call fixup_timers_after_fork.
* signal.cc (sigwait): Remove unused variable.
* timer.cc: New file.
(clock_gettime): Define new function.
(timer_tracker): Define new struct used by timer functions.
(timer_tracker::timer_tracker): New function.
(to_us): New function.
(timer_thread): New function.
(timer_tracker::settime): New function.
(timer_create): New function.
(timer_settime): New function.
(timer_delete): New function.
(fixup_timers_after_fork): New function.
* cygthread.cc: Bump thread count.
* signal.cc (sigwaitinfo): Define new function.
(sigwait): Redefine based on sigwaitinfo.
* include/cygwin/signal.h (sigwaitinfo): Declare.
(sigwait): Ditto.
* dtable.cc (dtable::vfork_parent_restore): Avoid double close of ctty when
ctty == ctty_on_hold.
* cygtls.h (_threadinfo::threadkill): New element.
(_threadinfo::set_threadkill): Declare new function.
(_threadinfo::reset_threadkill): Declare new function.
* dcrt0.cc (dcrt0_1): Call here so that it will be possible to attach to
running process with #(*& Windows Me/9x.
(initial_env): Try to initialize strace if uninitialized.
* gendef: Don't zero signal if threadkill is set since that will happen in the
called function.
* signal.cc (sigwait): Ensure cleanup in error conditions.
* sigproc.cc (sig_send): Clear packet mask storage.
(wait_subproc): Fill in child exit code in siginfo_t structure.
* thread.cc (pthread_kill): Set threadkill flag.
* tlsoffsets.h: Regenerate.  Throughout, use siginfo_t to fill out all signal
information for "kernel" signals.
* cygtls.h (_threadinfo::set_siginfo): Declare new function.
* cygtls.cc (_threadinfo::set_siginfo): Define new function.
* dcrt0.cc (do_exit): Accommodate siginfo_t considerations.
* exceptions.cc (handle_exceptions): Ditto.
(sig_handle_tty_stop): Ditto.
(ctrl_c_handler): Use killsys() to send signal.
(sigpacket::process): Rename from sig_handle.  Use siginfo_t field from
sigpacket for everything.
(tty_min::kill_pgrp): Accommodate siginfo_t considerations.
(fhandler_termios::bg_check): Ditto.
* fhandler_tty.cc (fhandler_tty_slave::ioctl): Use killsys() to send signal.
* signal.cc (kill_worker): Rewrite to use siginfo_t second argument.
(kill_pgrp): Ditto.
(kill0): Define new function pulled from kill().
(kill): Rewrite as frontend to kill0.
(killsys): Define new function.
* sigproc.cc (sigelem): Eliminate.
(sigpacket): Move to sigproc.h.  Subsume sigelem.
(pending_signals): Use sigpacket rather than sigelem for everything.
(sig_clear): Ditto.
(wait_sig): Ditto.
(sig_send): Rewrite to use siginfo_t argument.
(sig_send): New function wratpper to sig_send with siginfo_t argument.
(wait_subproc): Accommodate siginfo_t considerations.
* thread.cc (pthread_kill): Ditto.
* sigproc.h (sigpacket): Move here.
(sigpacket::process): Declare "new" function.
(sig_handle): Eliminate declaration.
(sig_send): Declare with new paramaters.
(killsys): Declare new function.
(kill_pgrp): Declare.
* winsup.h: Move some signal-specific stuff to sigproc.h.
* include/cygwin/signal.h: Tweak some siginfo_t stuff.
@
text
@d27 1
@


1.111
log
@* cygheap.h (init_cygheap): Play more vfork shell games and move ctty_on_hold
and open_fhs_on_hold (back) here.
* dcrt0.cc (_dll_crt0): Just set impure_ptr_ptr here and let later
initialization deal with tls.
* dtable.cc (dtable::vfork_child_fixup): Move ctty considerations here.
(dtable:vfork_parent_restore): And here.
* fork.cc (vfork): Reflect change to ctty handling.
* perthread.h (vfork_save::fhctty): Eliminate.
* cygwin.din: Make more exports NOSIGFE that will never be interrupted by a
signal.
* init.cc (dll_entry): Set stackptr to NULL to catch problems earlier.
@
text
@d249 3
a251 2
clock NOSIGFE
_clock = clock NOSIGFE
d1238 1
d1412 3
@


1.111.6.1
log
@* dcrt0.cc (reent_data): Make global.
* cygwin.din: Reexport reent_data.
* cygtls.cc (_threadinfo::remove): Don't assume that we are removing _my_tls.
* exceptions.cc (setup_handler): Improve debugging output.
(call_signal_handler_now): Remove ill-advised debugger call.
* sigproc.cc (sigcomplete_main): Delete.
(sig_send): Honor FIXME and avoid using main thread's completion event for
everything or suffer races.
(pending_signals::add): Default stored mask to current process mask rather than
mask at time of signal send.
(wait_sig): Add debugging output.
* sigproc.h (sigpacket::mask_storage): Delete.
* fhandler.cc (fhandler_base::open): Revert isfs change.
@
text
@a26 1
reent_data DATA
@


1.111.2.1
log
@* cygwin/include/signal.h: Add copyright notice.
* cygwin.din: Make clock SIGFE.  Add clock_gettime, sigwaitinfo, timer_create,
timer_delete, timer_settime.
* include/cygwin/version.h: Reflect above additions.
* fork.cc (fork_child): Call fixup_timers_after_fork.
* signal.cc (sigwait): Remove unused variable.
* timer.cc: New file.
(clock_gettime): Define new function.
(timer_tracker): Define new struct used by timer functions.
(timer_tracker::timer_tracker): New function.
(to_us): New function.
(timer_thread): New function.
(timer_tracker::settime): New function.
(timer_create): New function.
(timer_settime): New function.
(timer_delete): New function.
(fixup_timers_after_fork): New function.
* cygthread.cc: Bump thread count.
@
text
@d249 2
a250 3
clock SIGFE
_clock = clock SIGFE
clock_gettime SIGFE
a1236 1
sigwaitinfo SIGFE
a1409 3
timer_create SIGFE
timer_delete SIGFE
timer_settime SIGFE
@


1.110
log
@* cygwin.din: Make crt0 functions NOSIGFE.
* include/cygwin/version.h: Gratuitous comment change.
* lib/_cygwin_crt0_common.cc: Remove unneeded declaration.
@
text
@d37 1
a37 1
__main SIGFE
d46 1
a46 1
_exit SIGFE
d293 3
a295 3
cygwin_detach_dll SIGFE
cygwin32_detach_dll = cygwin_detach_dll SIGFE
cygwin_dll_init SIGFE
d437 1
a437 1
exit = cygwin_exit SIGFE
@


1.109
log
@* exceptions.cc (set_signal_mask): Redefine to not pass by address.  Report
calculated mask in debugging output.
* sigproc.h (set_signal_mask): Reflect above change in declaration.
* path.cc (mount_item::build_win32): Take path apart before feeding it to
fnmunge.  Throughout, change use of _reent_winsup()-> to _my_tls.locals.
instead.  Throughout, remove obsolete MT_SAFE/_CYG_THREAD_FAILSAFE
considerations.  Througout, add cygtls.h include.
* Makefile.in (DLL_OFILES): Add cygtls.o.  Add some more objects to the
-fomit-frame-pointer list.
* acconfig.h: Remove obsolete settings.
* config.h.in: Ditto.
* bsdlib.cc: Add cygtls.h include.
* configure.in: Remove --enable-extra-threadsafe-checking.
* configure: Regenerate.
* cygtls.h (_local_storage): New struct renamed from _winsup_t (sic).
(_threadinfo:local_clib): Add new field.
(_threadinfo::locals): Ditto.
(_threadinfo::init_thread): Accept second _reent * argument.
(_threadinfo::call): Define as regparm.
(CYGTLS_PADSIZE): Remove unnecessary slop.
(_getreent): Define as a macro.
* thread.h: Remove _CYG_THREAD_FAILSAFE and MT_SAFE stuff.
(_winsup_t): Move to cygtls.h.
(ResourceLocks::ResourceLocks): Eliminate empty constructor.
(MTinterface::reents): Eliminate.
(MTinterface::thread_self_key): Eliminate.
(MTinterface::MTinterface): Eliminate.
* dcrt0.cc: Include stdio.h for _impure_ptr initialization.
(do_global_ctors): Remove run_ctors_p (sic) considerations.  Don't call atexit
here.
(__main): Initialize destructors for user here.
(dll_crt0_1): Accept a dummy argument.  Don't call init_thread here.  Don't set
_impure_ptr here.  Call do_global_ctors after more things have been
initialized.
(_dll_crt0): Define zeros buffer as max of needed size of CYGTLS_PADSIZE so
that it can be used for two purposes while minimizing stack usage.  Initialize
_impure_ptr specifically, for speed.  Call dll_crt0_1 with buffer argument.
(cygwin_dll_init): Call dll_crt0_1 with dummy argument.
* dtable.cc (dtable::find_unused_handle): Remove call to AssertResourceOwner.
* exceptions.cc: Move _threadinfo stuff to new file.
* cygtls.cc: New file.
* gentls_offsets: Accommodate increasing complexity of cygtls.h.
* hires.h (hires_base::~hires_base): Remove.
* init.cc (dll_entry): Remove setting of reents.
* thread.cc: Remove syslog.h include.
(__getreent): Simplify to use _my_tls.
(_reent_winsup): Delete.
(AssertResourceOwner): Delete.
(MTinterface::Init): Remove setting of _clib and _winsup, with all that
entails.
(MTinterface::fixup_after_fork): Ditto.
(pthread::thread_init_wrapper): Ditto.  Also remove call to
set_tls_self_pointer.
(pthread::set_tls_self_pointer): Eliminate.
(pthread::get_tls_self_pointer): Just return _my_tls.tid;
(__reent_t::init_clib): Eliminate.
* tlsoffsets.h: Regenerate.
@
text
@d322 2
a323 2
cygwin_internal SIGFE
cygwin32_internal = cygwin_internal SIGFE
d373 3
a375 3
dll_crt0__FP11per_process SIGFE
dll_dllcrt0 SIGFE
dll_noncygwin_dllcrt0 SIGFE
@


1.108
log
@	* Makefile.in (OBSOLETE_FUNCTIONS): Add fcntl.
	(NEW_FUNCTIONS): Add fcntl64.
	* cygwin.din: Export fcntl64.  Make fcntl being SIGFE.
	* fcntl.cc (fcntl_worker): New function.
	(fcntl64): New function.
	(_fcntl): Call fcntl_worker.  Convert 32 bit flock structure into
	64 bit flock structure and vice versa.
	* fhandler.cc (fhandler_base::lock): Change 2nd parameter to
	struct __flock64 *.
	* fhandler_disk_file.cc (fhandler_disk_file::lock): Ditto.  Rework
	to be 64 bit aware.
	* fhandler.h: Accomodate above method argument changes.
	* include/cygwin/types.h: Add struct __flock32 and __flock64.
	Define struct flock according to setting of __CYGWIN_USE_BIG_TYPES__.
	* include/cygwin/version.h: Bump API minor number.
@
text
@a26 1
reent_data DATA
@


1.107
log
@	* Makefile.in: (DLL_OFILES): Add flock.o.
	* cygwin.din: Export flock.
	* flock.c: New file.
	* include/sys/file.h: Include sys/cdefs.h.
	Add function prototype for flock().
	Add some comments from BSD's header for further clarity.
	(L_SET, L_CURR, L_INCR, L_XTND): Redefine as the macros
	SEEK_SET, SEEK_CUR, SEEK_CUR, & SEEK_END respectively.
	(LOCK_SH,LOCK_EX,LOCK_NB,LOCK_UN): New macros for flock().
	* include/cygwin/version.h: Bump API minor number.
@
text
@d467 3
a469 2
fcntl NOSIGFE
_fcntl = fcntl NOSIGFE
d504 1
@


1.106
log
@* cygwin.din: Re-add inexplicably missing semaphore/msg functions.
@
text
@d503 1
@


1.105
log
@Eliminate use of sigframe and sigthread throughout.
* Makefile.in (DLL_OFILES): Add sigfe.o.  Remove reliance on cygwin.def from
cygwin0.dll dependency since dependence on sigfe.o implies that.  Generate def
file on the fly using 'gendef'.
* configure.in: Don't auto-generate cygwin.def.
* configure: Regenerate.
* cygwin.din: Add SIGFE stuff where appropriate.
* dcrt0.cc (dll_crt0_1): Initialize cygwin tls early in process startup.  Set
_main_tls to address of the main thread's cygwin tls.
* debug.h: Remove now unneeded WFSO and WFMO declarations.
* exceptions.cc (_last_thread): Define.
(set_thread_state_for_signals): New function.
(reset_thread_exception_for_signals): Ditto.
(init_thread_for_signals): Ditto.
(delete_thread_for_signals): Ditto.
(capture_thread_for_signals): Ditto.
(handle_exceptions): Set return address explicitly for exceptions prior to
calling sig_send.
(interrupt_on_return): Eliminate.
(setup_handler): Add preliminary implementation for dealing with
thread-specific signals by querying _main_tls.
(signal_exit): Use cygthread::main_thread_id instead of mainthread.id.
(call_signal_handler_now): For now, just handle the main thread.
* fork.cc (vfork): Save and restore main _my_tls.
* gendef: New file.  Generates def file and sigfe.s file.
* gentls_offsets: New file.  Generates offsets for perl to use in sigfe.s.
* how-signals-work.txt: Mention that info is obsolete.
* init.cc (dll_entry): Initialize cygwin tls storage here.
* miscfuncs.cc (low_priority_sleep): Make a C function for easier calling from
asm.
* perthread.h (vfork_save::tls): New element.
* signal.cc (nanosleep): Replace previous use of
sigframe.call_signal_handler_now with straight call to call_signal_handler_now.
(abort): Ditto.
* syscalls.cc (readv): Ditto.
* termios.cc (tcsetattr): Ditto.
* wait.cc (wait4): Ditto.
* sigproc.cc (sig_dispatch_pending): Ditto.
(sig_send): Ditto.
* sigproc.h: Declare call_signal_handler_now.
* thread.cc (pthread::thread_init_wrapper): Initialize cygwin tls.  Remove
obsolete and unworking signal stuff.
* thread.h (verifyable_object::sigs): Eliminate.
(verifyable_object::sigmask): Eliminate.
(verifyable_object::sigtodo): Eliminate.
(verifyable_object::exit): Make attribute noreturn.
(verifyable_object::thread_init_wrapper): Ditto.
(pthread_null::exit): Ditto.
* winbase.h (__stackbase): Always define.
* winsup.h (low_priority_sleep): Declare as a "C" function.
* include/cygwin/version.h: Bump API version to reflect sigwait export.
* include/sys/queue.h: Protect SLIST_ENTRY from previous declaration.
* signal.cc (sigwait): Implement.
* select.cc (fhandler_base::ready_for_read): Add debugging output.
* devices.h: Define more device pointers via their storage.
* devices.in: Don't parse things like /dev/inet/tcp, as they really have no
meaning.
* devices.cc: Regenerate.
* gendevices: Set proper protection for output file.
* cygtls.h: New file.
* gendef: New file.
* gentls_offsets: New file.
* tlsoffsets.h: New file.  Autogenerated.
* config/i386/longjmp.c: Remove.  File subsumed by gendef output.
* config/i386/makefrag: Remove obsolete file.
* fhandler.cc: Remove spurious access_worker declaration.
* spawn.cc (spawnve): Make debugging output more accurate.
* cygwin-gperf: Remove.
* devices.cc: Remove.
@
text
@d908 4
d1133 1
d1135 1
d1137 1
d1139 1
d1142 3
@


1.104
log
@	* cygserver.h (client_request::request_code_t): Add
	CYGSERVER_REQUEST_MSG and CYGSERVER_REQUEST_SEM.
	(admininstrator_group_sid): Add extern declaration.
	* cygserver_ipc.h: Rewrite.
	* cygserver_msg.h: New file.
	* cygserver_sem.h: New file.
	* cygserver_shm.h: More or less rewrite.
	* cygwin.din: Add msgctl, msgget, msgrcv, msgsnd, semctl, semget and
	semop.
	* msg.cc: Rewrite.
	* safe_memory.h: Remove.
	* sem.cc: Rewrite.
	* shm.cc: Rewrite.
	* include/cygwin/ipc.h: Use appropriate guard.
	(struct ipc_perm): Add seq.
	(IPCID_TO_IX): New define from BSD.
	(IPCID_TO_SEQ): Ditto.
	(IXSEQ_TO_IPCID): Ditto.
	(IPC_R): Ditto.
	(IPC_W): Ditto.
	(IPC_M): Ditto.
	* include/cygwin/msg.h: Use appropriate guard. #ifdef _KERNEL all stuff
	not explicitely defined by SUSv3. Use signed types in structs to match
	types used in BSD.
	(msgqnum_t): Define unsigned.
	(msglen_t): Ditto.
	(struct msqid_ds): Add msg_first and msg_last.
	(struct msginfo): Remove msgpool. Add msgssz and msgseg.
	* include/cygwin/sem.h: Use appropriate guard. #ifdef _KERNEL all stuff
	not explicitely defined by SUSv3. Use signed types in structs to match
	types used in BSD.
	(SEM_UNDO): Define appropriately.
	(struct semid_ds): Add sem_base.
	(struct seminfo): Add semmap and semusz.
	(SEM_A): New define from BSD.
	(SEM_R): Ditto.
	(SEM_ALLOC): Ditto.
	(union semun): Define.
	* include/cygwin/shm.h: Use appropriate guard. #ifdef _KERNEL all stuff
	not explicitely defined by SUSv3. Use signed types in structs to match
	types used in BSD.
	(SHMLBA): Define using cygwin_internal(CW_GET_SHMLBA) call.
	(struct shmid_ds): Add shm_internal.
	(struct shm_info): Rename shm_ids to used_ids as in BSD.  Add define
	for shm_ids.
	* include/cygwin/sysproto.h: New file.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/ipc.h: New file.
	* include/sys/msg.h: New file.
	* include/sys/queue.h: New file from BSD.
	* include/sys/sem.h: New file.
	* include/sys/shm.h: New file.
	* include/sys/sysproto.h: New file.
@
text
@d28 907
a934 916
@@ALLOCA@@
@@DEF_DLL_ENTRY@@
__assert
__assertfail
__eprintf
__errno
__fpclassifyd
__fpclassifyf
__getreent
__infinity
__main
__signbitd
__signbitf
__signgam
__srget
__swbuf
_asprintf_r
asprintf_r = _asprintf_r
_dll_crt0@@0
_exit
_f_atan2
__f_atan2 = _f_atan2
_f_atan2f
__f_atan2f = _f_atan2f
_f_exp
__f_exp = _f_exp
_f_expf
__f_expf = _f_expf
_f_frexp
__f_frexp = _f_frexp
_f_frexpf
__f_frexpf = _f_frexpf
_f_ldexp
__f_ldexp = _f_ldexp
_f_ldexpf
__f_ldexpf = _f_ldexpf
_f_log
__f_log = _f_log
_f_log10
__f_log10 = _f_log10
_f_log10f
__f_log10f = _f_log10f
_f_logf
__f_logf = _f_logf
_f_pow
__f_pow = _f_pow
_f_powf
__f_powf = _f_powf
_f_tan
__f_tan = _f_tan
_f_tanf
__f_tanf = _f_tanf
_fcloseall_r
fcloseall_r = _fcloseall_r
_fscanf_r
fscanf_r = _fscanf_r
fstat
_fstat = fstat
_pipe
_pthread_cleanup_pop
_pthread_cleanup_push
_scanf_r
scanf_r = _scanf_r
_sscanf_r
sscanf_r = _sscanf_r
stat
_stat = stat
_strtold
trunc
_vasprintf_r
vasprintf_r = _vasprintf_r
_vfscanf_r
vfscanf_r = _vfscanf_r
_vscanf_r
vscanf_r = _vscanf_r
_vsscanf_r
vsscanf_r = _vsscanf_r
a64l
abort
_abort = abort
abs
_abs = abs
access
_access = access
acl
_acl = acl
_acl32 = acl32
aclcheck
_aclcheck = aclcheck
_aclcheck32 = aclcheck32
aclfrommode
_aclfrommode = aclfrommode
_aclfrommode32 = aclfrommode32
aclfrompbits
_aclfrompbits = aclfrompbits
_aclfrompbits32 = aclfrompbits32
aclfromtext
_aclfromtext = aclfromtext
_aclfromtext32 = aclfromtext32
aclsort
_aclsort = aclsort
_aclsort32 = aclsort32
acltomode
_acltomode = acltomode
_acltomode32 = acltomode32
acltopbits
_acltopbits = acltopbits
_acltopbits32 = acltopbits32
acltotext
_acltotext = acltotext
_acltotext32 = acltotext32
acos
_acos = acos
acosf
_acosf = acosf
acosh
_acosh = acosh
acoshf
_acoshf = acoshf
alarm
_alarm = alarm
alphasort
_alphasort = alphasort
argz_add
__argz_add = argz_add
argz_add_sep
__argz_add_sep = argz_add_sep
argz_append
__argz_append = argz_append
argz_count
__argz_count = argz_count
argz_create
__argz_create = argz_create
argz_create_sep
__argz_create_sep = argz_create_sep
argz_delete
__argz_delete = argz_delete
argz_extract
__argz_extract = argz_extract
argz_insert
__argz_insert = argz_insert
argz_next
__argz_next = argz_next
argz_replace
__argz_replace = argz_replace
argz_stringify
__argz_stringify = argz_stringify
asctime
_asctime = asctime
asctime_r
_asctime_r = asctime_r
asin
_asin = asin
asinf
_asinf = asinf
asinh
_asinh = asinh
asinhf
_asinhf = asinhf
asprintf
_asprintf = asprintf
atan
_atan = atan
atan2
_atan2 = atan2
atan2f
_atan2f = atan2f
atanf
_atanf = atanf
atanh
_atanh = atanh
atanhf
_atanhf = atanhf
atexit = cygwin_atexit
_atexit = cygwin_atexit
atof
_atof = atof
atoff
_atoff = atoff
atoi
_atoi = atoi
atol
_atol = atol
bcmp
_bcmp = bcmp
bcopy
_bcopy = bcopy
bsearch
_bsearch = bsearch
btowc
bzero
_bzero = bzero
cabs
_cabs = cabs
cabsf
_cabsf = cabsf
calloc
_calloc = calloc
cbrt
_cbrt = cbrt
cbrtf
_cbrtf = cbrtf
ceil
_ceil = ceil
ceilf
_ceilf = ceilf
cfgetispeed
cfgetospeed
cfsetispeed
cfsetospeed
chdir
_chdir = chdir
chmod
_chmod = chmod
chown
_chown = chown
_chown32 = chown32
chroot
_chroot = chroot
cleanup_glue
clearerr
_clearerr = clearerr
clock
_clock = clock
close
_close = close
closedir
_closedir = closedir
closelog
_closelog = closelog
copysign
_copysign = copysign
copysignf
_copysignf = copysignf
cos
_cos = cos
cosf
_cosf = cosf
cosh
_cosh = cosh
coshf
_coshf = coshf
creat
_creat = creat
ctermid
ctime
_ctime = ctime
ctime_r
_ctime_r = ctime_r
cuserid
_cuserid = cuserid
cwait
_cwait = cwait
accept = cygwin_accept
cygwin_attach_handle_to_fd
cygwin32_attach_handle_to_fd = cygwin_attach_handle_to_fd
bind = cygwin_bind
connect = cygwin_connect
cygwin_conv_to_full_posix_path
cygwin32_conv_to_full_posix_path = cygwin_conv_to_full_posix_path
cygwin_conv_to_full_win32_path
cygwin32_conv_to_full_win32_path = cygwin_conv_to_full_win32_path
cygwin_conv_to_posix_path
cygwin32_conv_to_posix_path = cygwin_conv_to_posix_path
cygwin_conv_to_win32_path
cygwin32_conv_to_win32_path = cygwin_conv_to_win32_path
cygwin_detach_dll
cygwin32_detach_dll = cygwin_detach_dll
cygwin_dll_init
endprotoent = cygwin_endprotoent
endservent = cygwin_endservent
endusershell
gethostbyaddr = cygwin_gethostbyaddr
gethostbyname = cygwin_gethostbyname
_gethostname = cygwin_gethostname
gethostname = cygwin_gethostname
getpeername = cygwin_getpeername
getprotobyname = cygwin_getprotobyname
getprotobynumber = cygwin_getprotobynumber
getprotoent = cygwin_getprotoent
getservbyname = cygwin_getservbyname
getservbyport = cygwin_getservbyport
getservent = cygwin_getservent
getsockname = cygwin_getsockname
getsockopt = cygwin_getsockopt
getusershell
herror = cygwin_herror
hstrerror = cygwin_hstrerror
inet_addr = cygwin_inet_addr
inet_aton = cygwin_inet_aton
inet_network = cygwin_inet_network
inet_ntoa = cygwin_inet_ntoa
cygwin_internal
cygwin32_internal = cygwin_internal
listen = cygwin_listen
cygwin_logon_user
lstat
_lstat = lstat
cygwin_posix_path_list_p
cygwin32_posix_path_list_p = cygwin_posix_path_list_p
cygwin_posix_to_win32_path_list
cygwin32_posix_to_win32_path_list = cygwin_posix_to_win32_path_list
cygwin_posix_to_win32_path_list_buf_size
cygwin32_posix_to_win32_path_list_buf_size = cygwin_posix_to_win32_path_list_buf_size
rcmd = cygwin_rcmd
recv = cygwin_recv
recvfrom = cygwin_recvfrom
recvmsg = cygwin_recvmsg
rexec = cygwin_rexec
rresvport = cygwin_rresvport
_select = cygwin_select
select = cygwin_select
send = cygwin_send
sendmsg = cygwin_sendmsg
sendto = cygwin_sendto
cygwin_set_impersonation_token
setprotoent = cygwin_setprotoent
setservent = cygwin_setservent
setsockopt = cygwin_setsockopt
setusershell
shutdown = cygwin_shutdown
socket = cygwin_socket
cygwin_split_path
cygwin32_split_path = cygwin_split_path
cygwin_stackdump
cygwin_umount
cygwin_win32_to_posix_path_list
cygwin32_win32_to_posix_path_list = cygwin_win32_to_posix_path_list
cygwin_win32_to_posix_path_list_buf_size
cygwin32_win32_to_posix_path_list_buf_size = cygwin_win32_to_posix_path_list_buf_size
cygwin_winpid_to_pid
cygwin32_winpid_to_pid = cygwin_winpid_to_pid
daemon
difftime
_difftime = difftime
dirfd
_dirfd = dirfd
div
_div = div
dlclose
dlerror
dlfork
dll_crt0__FP11per_process
dll_dllcrt0
dll_noncygwin_dllcrt0
dlopen
dlsym
drand48
_drand48 = drand48
drem
_drem = drem
dremf
_dremf = dremf
dup
_dup = dup
dup2
_dup2 = dup2
ecvt
_ecvt = ecvt
ecvtbuf
_ecvtbuf = ecvtbuf
ecvtf
_ecvtf = ecvtf
endgrent
_endgrent = endgrent
endhostent
endmntent
_endmntent = endmntent
endpwent
_endpwent = endpwent
endutent
_endutent = endutent
envz_add
__envz_add = envz_add
envz_entry
__envz_entry = envz_entry
envz_get
__envz_get = envz_get
envz_merge
__envz_merge = envz_merge
envz_remove
__envz_remove = envz_remove
envz_strip
__envz_strip = envz_strip
erand48
_erand48 = erand48
erf
_erf = erf
erfc
_erfc = erfc
erfcf
_erfcf = erfcf
erff
_erff = erff
err
errx
verr
verrx
warn
warnx
vwarn
vwarnx
execl
_execl = execl
execle
_execle = execle
execlp
_execlp = execlp
execv
_execv = execv
execve
_execve = execve
execvp
_execvp = execvp
exit = cygwin_exit
exp
_exp = exp
exp2
exp2f
expf
_expf = expf
expm1
_expm1 = expm1
expm1f
_expm1f = expm1f
fabs
_fabs = fabs
fabsf
_fabsf = fabsf
facl
_facl = facl
_facl32 = facl32
fchdir
_fchdir = fchdir
fchmod
_fchmod = fchmod
fchown
_fchown = fchown
_fchown32 = fchown32
fclose
_fclose = fclose
fcloseall
_fcloseall = fcloseall
fcntl
_fcntl = fcntl
fcvt
_fcvt = fcvt
fcvtbuf
_fcvtbuf = fcvtbuf
fcvtf
_fcvtf = fcvtf
fdim
fdimf
fdopen
_fdopen = fdopen
_fdopen64 = fdopen64
feof
_feof = feof
ferror
_ferror = ferror
fflush
_fflush = fflush
ffs
_ffs = ffs
fgetc
_fgetc = fgetc
fgetpos
_fgetpos = fgetpos
_fgetpos64 = fgetpos64
fgets
_fgets = fgets
fileno
_fileno = fileno
finite
_finite = finite
finitef
_finitef = finitef
fiprintf
_fiprintf = fiprintf
floor
_floor = floor
floorf
_floorf = floorf
fma
fmaf
fmax
fmaxf
fmin
fminf
fmod
_fmod = fmod
fmodf
_fmodf = fmodf
fnmatch
_fnmatch = fnmatch
fopen
_fopen = fopen
_fopen64 = fopen64
fork
_fork = fork
forkpty
fpathconf
fprintf
_fprintf = fprintf
fputc
_fputc = fputc
fputs
_fputs = fputs
fread
_fread = fread
free
_free = free
freopen
_freopen = freopen
_freopen64 = freopen64
frexp
_frexp = frexp
frexpf
_frexpf = frexpf
fscanf
_fscanf = fscanf
fseek
_fseek = fseek
fseeko
_fseeko = fseeko
_fseeko64 = fseeko64
fsetpos
_fsetpos = fsetpos
_fsetpos64 = fsetpos64
_fstat64 = fstat64
fstatfs
_fstatfs = fstatfs
fsync
_fsync = fsync
ftell
_ftell = ftell
ftello
_ftello = ftello
_ftello64 = ftello64
ftime
_ftime = ftime
ftok
_ftok = ftok
ftruncate
_ftruncate = ftruncate
_ftruncate64 = ftruncate64
fwrite
_fwrite = fwrite
gamma
_gamma = gamma
gamma_r
_gamma_r = gamma_r
gammaf
_gammaf = gammaf
gammaf_r
_gammaf_r = gammaf_r
gcvt
_gcvt = gcvt
gcvtf
_gcvtf = gcvtf
get_osfhandle
_get_osfhandle = get_osfhandle
getc
_getc = getc
getc_unlocked
_getc_unlocked = getc_unlocked
getchar
_getchar = getchar
getchar_unlocked
_getchar_unlocked = getchar_unlocked
getcwd
_getcwd = getcwd
getdomainname
_getdomainname = getdomainname
getdtablesize
_getdtablesize = getdtablesize
getegid
_getegid = getegid
_getegid32 = getegid32
getenv
_getenv = getenv
geteuid
_geteuid = geteuid
_geteuid32 = geteuid32
getgid
_getgid = getgid
_getgid32 = getgid32
getgrent
_getgrent = getgrent
_getgrent32 = getgrent32
getgrgid
_getgrgid = getgrgid
_getgrgid32 = getgrgid32
getgrnam
_getgrnam = getgrnam
_getgrnam32 = getgrnam32
getgroups
_getgroups = getgroups
_getgroups32 = getgroups32
gethostid
getitimer
getlogin
_getlogin = getlogin
getmntent
_getmntent = getmntent
getmode
_getmode = getmode
getopt
getopt_long
getpagesize
_getpagesize = getpagesize
getpass
_getpass = getpass
getpgid
getpgrp
_getpgrp = getpgrp
getpid
_getpid = getpid
getppid
_getppid = getppid
getprogname
getpwduid
_getpwduid = getpwduid
getpwent
_getpwent = getpwent
getpwnam
_getpwnam = getpwnam
getpwnam_r
getpwuid
_getpwuid = getpwuid
_getpwuid32 = getpwuid32
getpwuid_r
_getpwuid_r32 = getpwuid_r32
getrlimit
_getrlimit = getrlimit
getrusage
_getrusage = getrusage
gets
_gets = gets
getsid
gettimeofday
_gettimeofday = gettimeofday
getuid
_getuid = getuid
_getuid32 = getuid32
getutent
_getutent = getutent
getutid
_getutid = getutid
getutline
_getutline = getutline
getw
_getw = getw
getwd
_getwd = getwd
glob
_glob = glob
globfree
_globfree = globfree
gmtime
_gmtime = gmtime
gmtime_r
_gmtime_r = gmtime_r
grantpt
hcreate
hcreate_r
hdestroy
hdestroy_r
hsearch
hsearch_r
htonl
_htonl = htonl
htons
_htons = htons
hypot
_hypot = hypot
hypotf
_hypotf = hypotf
ilogb
_ilogb = ilogb
ilogbf
_ilogbf = ilogbf
index
_index = index
inet_makeaddr
inet_netof
infinity
_infinity = infinity
infinityf
_infinityf = infinityf
initgroups
_initgroups32 = initgroups32
initstate
ioctl
_ioctl = ioctl
iprintf
_iprintf = iprintf
iruserok
ruserok
isalnum
_isalnum = isalnum
isalpha
_isalpha = isalpha
isascii
_isascii = isascii
isatty
_isatty = isatty
isblank
iscntrl
_iscntrl = iscntrl
isdigit
_isdigit = isdigit
isgraph
_isgraph = isgraph
isinf
_isinf = isinf
isinff
_isinff = isinff
islower
_islower = islower
isnan
_isnan = isnan
isnanf
_isnanf = isnanf
isprint
_isprint = isprint
ispunct
_ispunct = ispunct
isspace
_isspace = isspace
isupper
_isupper = isupper
iswalnum
iswalpha
iswblank
iswcntrl
iswctype
iswdigit
iswgraph
iswlower
iswprint
iswpunct
iswspace
iswupper
iswxdigit
isxdigit
_isxdigit = isxdigit
j0
_j0 = j0
j0f
_j0f = j0f
j1
_j1 = j1
j1f
_j1f = j1f
jn
_jn = jn
jnf
_jnf = jnf
jrand48
_jrand48 = jrand48
kill
_kill = kill
killpg
l64a
labs
_labs = labs
lacl
_lacl = lacl
lchown
_lchown = lchown
_lchown32 = lchown32
lcong48
_lcong48 = lcong48
ldexp
_ldexp = ldexp
ldexpf
_ldexpf = ldexpf
ldiv
_ldiv = ldiv
lgamma
_lgamma = lgamma
lgamma_r
_lgamma_r = lgamma_r
lgammaf
_lgammaf = lgammaf
lgammaf_r
_lgammaf_r = lgammaf_r
link
_link = link
localeconv
_localeconv = localeconv
localtime
_localtime = localtime
localtime_r
_localtime_r = localtime_r
log
_log = log
log10
_log10 = log10
log10f
_log10f = log10f
log1p
_log1p = log1p
log1pf
_log1pf = log1pf
logb
_logb = logb
logbf
_logbf = logbf
logf
_logf = logf
login
login_tty
logout
logwtmp
updwtmp
longjmp
_longjmp = longjmp
lrand48
_lrand48 = lrand48
lrint
lrintf
lround
lroundf
lseek
_lseek = lseek
_lseek64 = lseek64
_lstat64 = lstat64
mallinfo
malloc
_malloc = malloc
malloc_stats
malloc_trim
malloc_usable_size
mallopt
matherr
_matherr = matherr
mblen
_mblen = mblen
mbrlen
mbrtowc
mbsinit
mbsrtowcs
mbstowcs
_mbstowcs = mbstowcs
mbtowc
_mbtowc = mbtowc
memalign
memccpy
_memccpy = memccpy
memchr
_memchr = memchr
memcmp
_memcmp = memcmp
memcpy
_memcpy = memcpy
memmove
_memmove = memmove
mempcpy
__mempcpy = mempcpy
memset
_memset = memset
mkdir
_mkdir = mkdir
mkfifo
mknod
_mknod = mknod
_mknod32 = mknod32
mkstemp
_mkstemp = mkstemp
mktemp
_mktemp = mktemp
mktime
_mktime = mktime
mmap
_mmap64 = mmap64
modf
_modf = modf
modff
_modff = modff
mount
_mount = mount
mprotect
mrand48
msgctl
msgget
msgrcv
msgsnd
msync
munmap
nan
_nan = nan
nanf
_nanf = nanf
nanosleep
_nanosleep = nanosleep
nearbyint
nearbyintf
nextafter
_nextafter = nextafter
nextafterf
_nextafterf = nextafterf
nice
_nice = nice
nl_langinfo
_nl_langinfo = nl_langinfo
nrand48
_nrand48 = nrand48
ntohl
_ntohl = ntohl
ntohs
_ntohs = ntohs
on_exit
open
_open = open
d936 593
a1528 607
opendir
_opendir = opendir
openlog
_openlog = openlog
openpty
pathconf
_pathconf = pathconf
pause
pclose
_pclose = pclose
perror
_perror = perror
pipe
poll
_poll = poll
popen
_popen = popen
posix_regcomp
posix_regerror
posix_regexec
posix_regfree
pow
_pow = pow
powf
_powf = powf
printf
_printf = printf
pthread_atfork
pthread_attr_destroy
pthread_attr_getdetachstate
pthread_attr_getinheritsched
pthread_attr_getschedparam
pthread_attr_getschedpolicy
pthread_attr_getscope
pthread_attr_getstacksize
pthread_attr_init
pthread_attr_setdetachstate
pthread_attr_setinheritsched
pthread_attr_setschedparam
pthread_attr_setschedpolicy
pthread_attr_setscope
pthread_attr_setstacksize
pthread_cancel
pthread_cond_broadcast
pthread_cond_destroy
pthread_cond_init
pthread_cond_signal
pthread_cond_timedwait
pthread_cond_wait
pthread_condattr_destroy
pthread_condattr_getpshared
pthread_condattr_init
pthread_condattr_setpshared
pthread_continue
pthread_create
pthread_detach
pthread_equal
pthread_exit
pthread_getconcurrency
pthread_getschedparam
pthread_getsequence_np
pthread_getspecific
pthread_join
pthread_key_create
pthread_key_delete
pthread_kill
pthread_mutex_destroy
pthread_mutex_getprioceiling
pthread_mutex_init
pthread_mutex_lock
pthread_mutex_setprioceiling
pthread_mutex_trylock
pthread_mutex_unlock
pthread_mutexattr_destroy
pthread_mutexattr_getprioceiling
pthread_mutexattr_getprotocol
pthread_mutexattr_getpshared
pthread_mutexattr_gettype
pthread_mutexattr_init
pthread_mutexattr_setprioceiling
pthread_mutexattr_setprotocol
pthread_mutexattr_setpshared
pthread_mutexattr_settype
pthread_once
pthread_rwlock_destroy
pthread_rwlock_init
pthread_rwlock_rdlock
pthread_rwlock_tryrdlock
pthread_rwlock_wrlock
pthread_rwlock_trywrlock
pthread_rwlock_unlock
pthread_rwlockattr_init
pthread_rwlockattr_getpshared
pthread_rwlockattr_setpshared
pthread_rwlockattr_destroy
pthread_self
pthread_setcancelstate
pthread_setcanceltype
pthread_setconcurrency
pthread_setschedparam
pthread_setspecific
pthread_sigmask
pthread_suspend
pthread_testcancel
ptsname
putc
_putc = putc
putc_unlocked
_putc_unlocked = putc_unlocked
putchar
_putchar = putchar
putchar_unlocked
_putchar_unlocked = putchar_unlocked
putenv
_putenv = putenv
puts
_puts = puts
pututline
_pututline = pututline
putw
_putw = putw
qsort
_qsort = qsort
raise
_raise = raise
rand
_rand = rand
random
read
_read = read
readdir
_readdir = readdir
readlink
_readlink = readlink
readv
_readv = readv
realloc
_realloc = realloc
realpath
remainder
_remainder = remainder
remainderf
_remainderf = remainderf
remove
_remove = remove
remquo
remquof
rename
_rename = rename
revoke
rewind
_rewind = rewind
rewinddir
_rewinddir = rewinddir
rindex
_rindex = rindex
rint
_rint = rint
rintf
_rintf = rintf
rmdir
_rmdir = rmdir
round
roundf
sbrk
_sbrk = sbrk
scalb
_scalb = scalb
scalbf
_scalbf = scalbf
scalbln
scalblnf
scalbn
_scalbn = scalbn
scalbnf
_scalbnf = scalbnf
scandir
_scandir = scandir
scanf
_scanf = scanf
sched_get_priority_max
sched_get_priority_min
sched_getparam
sched_getscheduler
sched_rr_get_interval
sched_setparam
sched_setscheduler
sched_yield
seed48
_seed48 = seed48
seekdir
_seekdir = seekdir
_seekdir64 = seekdir64
semctl
semget
semop
sem_close
sem_destroy
sem_getvalue
sem_init
sem_open
sem_post
sem_timedwait
sem_trywait
sem_wait
setbuf
_setbuf = setbuf
setbuffer
setdtablesize
_setdtablesize = setdtablesize
setegid
_setegid = setegid
_setegid32 = setegid32
setenv
_setenv = setenv
seteuid
_seteuid = seteuid
_seteuid32 = seteuid32
setgid
_setgid = setgid
_setgid32 = setgid32
setgrent
_setgrent = setgrent
setgroups
_setgroups = setgroups
_setgroups32 = setgroups32
sethostent
setitimer
setjmp
_setjmp = setjmp
setlinebuf
setlocale
_setlocale = setlocale
setlogmask
setmntent
_setmntent = setmntent
setmode
_setmode = setmode
setpassent
_setpassent = setpassent
setpgid
_setpgid = setpgid
setpgrp
_setpgrp = setpgrp
setprogname
setpwent
_setpwent = setpwent
setregid
_setregid = setregid
setregid32
_setregid32 = setregid32
setreuid
_setreuid = setreuid
setreuid32
_setreuid32 = setreuid32
setrlimit
_setrlimit = setrlimit
setsid
_setsid = setsid
setstate
settimeofday
_settimeofday = settimeofday
setuid
_setuid = setuid
_setuid32 = setuid32
setutent
_setutent = setutent
setvbuf
_setvbuf = setvbuf
sexecl = sexecve_is_bad
sexecle = sexecve_is_bad
sexeclp = sexecve_is_bad
sexeclpe = sexecve_is_bad
sexecp = sexecve_is_bad
sexecv = sexecve_is_bad
sexecve = sexecve_is_bad
sexecvpe = sexecve_is_bad
shmat
shmctl
shmdt
shmget
sigaction
_sigaction = sigaction
sigaddset
_sigaddset = sigaddset
sigdelset
_sigdelset = sigdelset
sigemptyset
_sigemptyset = sigemptyset
sigfillset
_sigfillset = sigfillset
siginterrupt
_siginterrupt = siginterrupt
sigismember
_sigismember = sigismember
signal
_signal = signal
significand
_significand = significand
significandf
_significandf = significandf
sigpause
sigpending
_sigpending = sigpending
sigprocmask
_sigprocmask = sigprocmask
sigsuspend
_sigsuspend = sigsuspend
sin
_sin = sin
sincos
sincosf
sinf
_sinf = sinf
sinh
_sinh = sinh
sinhf
_sinhf = sinhf
siprintf
_siprintf = siprintf
sleep
_sleep = sleep
snprintf
_snprintf = snprintf
socketpair
spawnl
_spawnl = spawnl
spawnle
_spawnle = spawnle
spawnlp
_spawnlp = spawnlp
spawnlpe
_spawnlpe = spawnlpe
spawnv
_spawnv = spawnv
spawnve
_spawnve = spawnve
spawnvp
_spawnvp = spawnvp
spawnvpe
_spawnvpe = spawnvpe
sprintf
_sprintf = sprintf
sqrt
_sqrt = sqrt
sqrtf
_sqrtf = sqrtf
srand
_srand = srand
srand48
_srand48 = srand48
srandom
sscanf
_sscanf = sscanf
_stat64 = stat64
statfs
_statfs = statfs
strcasecmp
_strcasecmp = strcasecmp
strcat
_strcat = strcat
strchr
_strchr = strchr
strcmp
_strcmp = strcmp
strcoll
_strcoll = strcoll
strcpy
_strcpy = strcpy
strcspn
_strcspn = strcspn
strdup
_strdup = strdup
strerror
_strerror = strerror
strerror_r
_strerror_r = strerror_r
strftime
_strftime = strftime
strlcat
_strlcat = strlcat
strlcpy
_strlcpy = strlcpy
strlen
_strlen = strlen
strlwr
_strlwr = strlwr
strncasecmp
_strncasecmp = strncasecmp
strncat
_strncat = strncat
strncmp
_strncmp = strncmp
strncpy
_strncpy = strncpy
strndup
strnlen
strpbrk
_strpbrk = strpbrk
strptime
_strptime = strptime
strrchr
_strrchr = strrchr
strsep
_strsep = strsep
strsignal
strspn
_strspn = strspn
strstr
_strstr = strstr
strtod
_strtod = strtod
strtof
_strtodf = strtof
strtodf = strtof
strtok
_strtok = strtok
strtok_r
_strtok_r = strtok_r
strtol
_strtol = strtol
strtoll
_strtoll = strtoll
strtosigno
strtoul
_strtoul = strtoul
strtoull
_strtoull = strtoull
strupr
_strupr = strupr
strxfrm
_strxfrm = strxfrm
swab
_swab = swab
symlink
_symlink = symlink
sync
_sync = sync
sysconf
_sysconf = sysconf
syslog
_syslog = syslog
vsyslog
system
_system = system
tan
_tan = tan
tanf
_tanf = tanf
tanh
_tanh = tanh
tanhf
_tanhf = tanhf
tcdrain
_tcdrain = tcdrain
tcflow
_tcflow = tcflow
tcflush
_tcflush = tcflush
tcgetattr
_tcgetattr = tcgetattr
tcgetpgrp
_tcgetpgrp = tcgetpgrp
tcsendbreak
_tcsendbreak = tcsendbreak
tcsetattr
_tcsetattr = tcsetattr
tcsetpgrp
_tcsetpgrp = tcsetpgrp
tdelete
tdestroy
telldir
_telldir = telldir
_telldir64 = telldir64
tempnam
_tempnam = tempnam
tfind
tgamma
tgammaf
time
_time = time
times
_times = times
timezone
tmpfile
_tmpfile = tmpfile
_tmpfile64 = tmpfile64
tmpnam
_tmpnam = tmpnam
toascii
_toascii = toascii
tolower
_tolower = tolower
toupper
_toupper = toupper
towctrans
towlower
towupper
truncate
_truncate = truncate
_truncate64 = truncate64
truncf
tsearch
ttyname
_ttyname = ttyname
ttyslot
twalk
tzset
_tzset = tzset
ualarm
_ualarm = ualarm
umask
_umask = umask
umount
_umount = umount
uname
_uname = uname
ungetc
_ungetc = ungetc
unlink
_unlink = unlink
unlockpt
unsetenv
_unsetenv = unsetenv
usleep
_usleep = usleep
utime
_utime = utime
utimes
_utimes = utimes
utmpname
_utmpname = utmpname
valloc
vasprintf
_vasprintf = vasprintf
vfiprintf
_vfiprintf = vfiprintf
vfork
_vfork = vfork
vfprintf
_vfprintf = vfprintf
vfscanf
_vfscanf = vfscanf
vhangup
_vhangup = vhangup
vprintf
_vprintf = vprintf
vscanf
_vscanf = vscanf
vsnprintf
_vsnprintf = vsnprintf
vsprintf
_vsprintf = vsprintf
vsscanf
_vsscanf = vsscanf
wait
_wait = wait
wait3
wait4
waitpid
_waitpid = waitpid
wcrtomb
wcscat
wcschr
wcscmp
_wcscmp = wcscmp
wcscoll
wcscpy
wcscspn
wcslcat
wcslcpy
wcslen
_wcslen = wcslen
wcsncat
wcsncmp
wcsncpy
wcspbrk
wcsrchr
wcsrtombs
wcsspn
wcsstr
wcstombs
_wcstombs = wcstombs
wcswidth
wctob
wctomb
_wctomb = wctomb
wctrans
wctype
wcwidth
wmemchr
wmemcmp
wmemcpy
wmemmove
wmemset
wprintf
_wprintf = wprintf
write
_write = write
writev
_writev = writev
y0
y0f
y1
y1f
yn
ynf
@


1.103
log
@	* bsdlib.cc (getprogname): New function.
	(setprogname): New funtion.
	* cygwin.din: Export getprogname and setprogname.
	* include/cygwin/version.h: Bumb API version number.
@
text
@d913 4
d1138 3
@


1.102
log
@	* Missing patch to cygwin.din.
@
text
@d648 1
d1182 1
@


1.101
log
@	* Makefile.in (OBSOLETE_FUNCTION):  Add tmpfile.
	(NEW_FUNCTIONS): Add _tmpfile64 -> tmpfile translation.
	* cygwin.din: Export _tmpfile64
	* include/cygwin/version.h: Bump api minor number.
@
text
@d422 8
@


1.100
log
@	* cygwin.din: Add sem_close, sem_getvalue, sem_open and sem_timedwait.
	* pthread.cc (+mangle_sem_name): New function.
	(sem_open): Ditto.
	(sem_close: Ditto.
	(sem_timedwait): Ditto.
	(sem_getvalue): Ditto.
	* thread.cc (semaphore::semaphore): Rearrange member initialization.
	Use appropriate security attribute for process shared semaphores.
	(semaphore::semaphore): New constructor for named semaphores.
	(semaphore::~semaphore): Care for semaphore name.
	(semaphore::_post): Accomodate failing ReleaseSemaphore. Use value
	returned by ReleaseSemaphore vor currentvalue.
	(semaphore::_getvalue): New method.
	(semaphore::_timedwait): Ditto.
	(semaphore::_fixup_after_fork): Rearrange. Don't fail for process
	shared semaphores.
	(semaphore::open): New method.
	(semaphore::timedwait): Ditto.
	(semaphore::post): Fix return value.  Set errno appropriately.
	(semaphore::getvalue): New method.
	* thread.h (class semaphore): Add prototypes for open, getvalue,
	timedwait, _getvalue, _timedwait.  Add prototypes for new constructor.
	Add name member.
	* include/semaphore.h: Add prototypes for sem_open, sem_close,
	sem_timedwait and sem_getvalue.
	include/cygwin/version.h: Bump API minor number.
@
text
@d1414 1
@


1.99
log
@	* Makefile.in: Add $(LIBSERVER) rule.
	* cygserver.h: Moved from include/cygwin to here.
	* cygserver_ipc.h: Moved from ../cygserver to here.
	* cygserver_shm.h: Ditto.
	* cygwin.din: Add shmat, shmctl, shmdt and shmget.
	* fhandler_tty.cc (fhandler_tty_slave::open): Don't warn about handle
	dup'ing if not build with USE_SERVER.
	* shm.cc: Include cygerrno.h unconditionally.
	(shmat): Set errno to ENOSYS and return -1 if not build with
	USE_SERVER.
	(shmctl): Ditto.
	(shmdt): Ditto.
	(shmget): Ditto.
	* woutsup.h: Remove.
	* include/cygwin/cygserver_process.h: Moved to ../cygserver directory.
	* include/cygwin/cygserver_transport.h: Ditto.
	* include/cygwin/cygserver_transport_pipes.h: Ditto.
	* include/cygwin/cygserver_transport_sockets.h: Ditto.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1125 1
d1127 1
d1129 1
d1131 1
@


1.98
log
@* Makefile.in: Make malloc_wrapper -fomit-frame-pointer.
* cygwin.din: Remove extraneous mallinfo definition.
* dcrt0.cc (quoted): Use strechr for efficiency.
* fhandler.cc (fhandler_base::write): Correctly use get_output_handle rather
than get_handle.
(fhandler_base::lseek): Use method for accessing name in debug output.
@
text
@d1201 4
@


1.97
log
@	* Makefile.in (DLL_OFILES): Add getopt.o and iruserok.o.
	* cygwin.din: Export __check_rhosts_file, __rcmd_errstr, optarg,
	opterr, optind, optopt, optreset, getopt, getopt_long, iruserok
	and ruserok.
	* getopt.c: Moved from lib to here.  Define opt* variables as
	dllexport.
	* iruserok.c: Moved from lib to here.  Rearrange function order.
	Prefer using 64/32 bit functions.
	* syscalls.cc (shell_fp): Define as struct __sFILE64.
	(getusershell): Use fopen64 instead of fopen.
	* winsup.h: Add declarations for seteuid32, fopen64,
	cygwin_gethostbyname and cygwin_inet_addr.
	* include/getopt.h: Declare opt* variables dllimport.
	* include/cygwin/version.h: Bump API minor number.
@
text
@a848 1
mallinfo
@


1.97.2.1
log
@* fhandler_disk_file.cc (path_conv::ndisk_links): Fix potential off-by-one
problem when first file in a directory is a directory.
* Makefile.in: Make malloc_wrapper -fomit-frame-pointer.
* cygwin.din: Remove extraneous mallinfo definition.
* dcrt0.cc (quoted): Use strechr for efficiency.
* exceptions.cc (sig_handle_tty_stop): Fix boneheaded mistake by using correct
check for parent state rather than inverted check.
* getopt.c (opterr): Reinstate initialization.
(optind): Ditto.
(optopt): Ditto.
@
text
@d849 1
@


1.96
log
@	* Makefile.in (DLL_OFILES): Add bsdlib.o.
	* autoload.cc (RegisterServiceProcess): Add.
	* bsdlib.cc: New file.
	(daemon): New function.
	(login_tty): Ditto.
	(openpty): Ditto.
	(forkpty): Ditto.
	* cygwin.din: Export daemon, forkpty, login_tty, logwtmp, updwtmp,
	openpty and revoke.
	* syscalls.cc (updwtmp): New function, writing to wtmp exclusively.
	(logwtmp): Ditto.
	(login): Call updwtmp instead of writing to wtmp by itself.
	(logout): Ditto.
	* tty.cc (revoke): New funtion.
	* include/paths.h: Define _PATH_DEVNULL.
	* include/pty.h: New header.
	* include/cygwin/version.h: Bump API minor number.
	* include/sys/utmp.h: Declare logwtmp with const arguments.
	Declare updwtmp.
	* lib/iruserok.c: New file.
	(ruserok): New function.
	(iruserok): Ditto.
	(__ivaliduser): Ditto.
	(__icheckhost): Ditto.
@
text
@d6 1
d11 1
d22 5
d627 2
d716 2
@


1.95
log
@	* cygwin.din: Export endusershell, getusershell and setusershell.
	* syscalls.cc (getusershell): New function.
	(setusershell): Ditto.
	(endusershell): Ditto.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d353 1
d513 1
d821 1
d823 2
d926 1
d1071 1
@


1.94
log
@	* cygwin.din: Export argz_add argz_add_sep argz_append argz_count
	argz_create argz_create_sep argz_delete argz_extract argz_insert
	argz_next argz_replace argz_stringify envz_add envz_entry envz_get
	envz_merge envz_remove envz_strip
	* include/cygwin/version.h: Bump api minor number.
@
text
@d292 1
d306 1
d340 1
@


1.93
log
@	* cygwin.din: Accomodate change from cygwin_lstat to lstat.
	* syscalls.cc: Add defines to avoid declaration issues when
	renaming cygwin_lstat back to lstat.
	(lstat): Reverted name change from cygwin_lstat.
@
text
@d144 24
d389 12
@


1.92
log
@* cygwin.din: Export _fdopen64
* Makefile.in (NEW_FUNCTIONS): Add _fdopen64 -> fdopen translation.
* include/cygwin/version.h: Bump api minor number.
* ntdll.h: Remove (now) duplicate FILE_SYNCHRONOUS_IO_NONALERT definition.
@
text
@d291 2
a292 2
_lstat = cygwin_lstat
lstat = cygwin_lstat
@


1.91
log
@* environ.cc (check_case_init): Use strncasematch.
* cygwin.din: Export __mempcpy.
* cygwin/version.h: Bump api minor number.
@
text
@d428 1
@


1.90
log
@Throughout, remove "include <errno.h>" from files which already include
cygerrno.h.
* include/cygwin/config.h (__DYNAMIC_REENT__): Define.
* include/cygwin/version.h: Bump API minor version.
* cygwin.din: Export __getreent
* cygerrno.h: Include errno.h.  Fix places where _impure_ptr is used directly
to store the errno value.
* debug.cc (__set_errno): Ditto.
* errno.cc: Remove _RRENT_ONLY define to get errno.cc compiled.
* signal.cc: Rename _reent_clib to _REENT throughout.
* thread.h (reent_clib): Remove prototype.
* thread.cc (reent_clib): Rename reent_clib to __getreent.  Return _impure_ptr
until MTinterface is initialized.
(reent_winsup): Fix a possible SEGV when _r == NULL.  Return NULL instead.
* MTinterface::fixup_after_fork: Switch reent back to _impure_ptr to keep
signal handling running when fork is called from a thread other than the
mainthread.
@
text
@d824 1
@


1.89
log
@	* cygwin.din: Add vsyslog.
	* fhandler.cc (fhandler_base::write): Only make file sparse if the
	seeked area is >= 128K.
	* syslog.cc (vsyslog): New function, overtaking functionality from
	syslog.
	(syslog): Just call vsyslog.
	* include/cygwin/version.h: Bump API minor.
	* include/sys/syslog.h: Add vsyslog declaration.
@
text
@d29 1
@


1.88
log
@	* winsup/cygwin/include/cygwin/version.h: Bump API minor version.
	* winsup/cygwin/include/cygwin/types.h: Define key_t as long long.
	* winsup/cygwin/cygwin.din: Add ftok, _ftok.
	* winsup/cygwin/ipc.cc (ftok): Rework implementation.
@
text
@d1303 1
@


1.87
log
@	* Makefile.in (NEW_FUNCTIONS): All 32/64 from 0.79 API get
	leading underscore.
	* cygwin.din: Ditto.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d511 2
@


1.86
log
@* termios.cc (setspeed): New function.
(cfsetospeed): Use setspeed to set speed.
(cfsetispeed): Use setspeed to set speed.
* autoload.cc: Add load statement for UuidCreate, and UuidCreateSequential.
* cpuid.h: New file.
* cygwin.din: Export gethostid.
* fhandler_proc.cc (cpuid): Move to cpuid.h.
(can_set_flag): Move to cpuid.h.
* syscalls.cc (gethostid): New function.
* version.h: Bump DLL minor version number to 83.
@
text
@d106 1
a106 1
acl32
d109 1
a109 1
aclcheck32
d112 1
a112 1
aclfrommode32
d115 1
a115 1
aclfrompbits32
d118 1
a118 1
aclfromtext32
d121 1
a121 1
aclsort32
d124 1
a124 1
acltomode32
d127 1
a127 1
acltopbits32
d130 1
a130 1
acltotext32
d212 1
a212 1
chown32
d403 1
a403 1
facl32
d410 1
a410 1
fchown32
d439 1
a439 1
fgetpos64
d468 1
a468 1
fopen64
d484 1
a484 1
freopen64
d495 1
a495 1
fseeko64
d498 1
a498 2
fsetpos64
fstat64
d508 1
a508 1
ftello64
d513 1
a513 1
ftruncate64
d546 1
a546 1
getegid32
d551 1
a551 1
geteuid32
d554 1
a554 1
getgid32
d557 1
a557 1
getgrent32
d560 1
a560 1
getgrgid32
d563 1
a563 1
getgrnam32
d566 1
a566 1
getgroups32
d595 1
a595 1
getpwuid32
d597 1
a597 1
getpwuid_r32
d609 1
a609 1
getuid32
d656 1
a656 1
initgroups32
d734 1
a734 1
lchown32
a786 1
lseek64
d788 1
a788 1
lstat64
d828 1
a828 1
mknod32
d836 1
a836 1
mmap64
d1063 1
a1063 1
seekdir64
d1076 1
a1076 1
setegid32
d1081 1
a1081 1
seteuid32
d1084 1
a1084 1
setgid32
d1089 1
a1089 1
setgroups32
d1113 1
d1117 1
d1127 1
a1127 1
setuid32
d1213 1
a1213 1
stat64
d1331 1
a1331 1
telldir64
d1357 1
a1357 1
truncate64
@


1.85
log
@	* cygwin.din: Export wcscoll, wcswidth and wcwidth.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d568 1
@


1.84
log
@
* cygwin.din: Add pthread_rwlock_destroy, pthread_rwlock_init,
pthread_rwlock_rdlock, pthread_rwlock_tryrdlock,
pthread_rwlock_wrlock, pthread_rwlock_trywrlock,
pthread_rwlock_unlock, pthread_rwlockattr_init,
pthread_rwlockattr_getpshared, pthread_rwlockattr_setpshared,
and pthread_rwlockattr_destroy.
* include/cygwin/version.h: Bump API minor number.
* include/pthread.h (PTHREAD_RWLOCK_INITIALIZER): Define a
reasonable value.
Add prototypes for pthread_rwlock_destroy, pthread_rwlock_init,
pthread_rwlock_rdlock, pthread_rwlock_tryrdlock,
pthread_rwlock_wrlock, pthread_rwlock_trywrlock,
pthread_rwlock_unlock, pthread_rwlockattr_init,
pthread_rwlockattr_getpshared, pthread_rwlockattr_setpshared,
and pthread_rwlockattr_destroy.
* thread.h (PTHREAD_ONCE_MAGIC): Remove superflous semicolon.
(PTHREAD_RWLOCK_MAGIC): New define.
(PTHREAD_RWLOCKATTR_MAGIC): Ditto.
(pthread_rwlockattr): New class.
(pthread_rwlock): Ditto.
(MTinterface::rwlocks): New member.
(MTinterface::MTinterface): Initialize rwlocks.
Add prototypes for __pthread_rwlock_destroy,
__pthread_rwlock_wrlock, __pthread_rwlock_trywrlock,
__pthread_rwlock_unlock, __pthread_rwlockattr_init,
__pthread_rwlockattr_getpshared, __pthread_rwlockattr_setpshared,
and __pthread_rwlockattr_destroy.
* thread.cc (MTinterface::Init): Initialize rwlock internal mutex.
(MTinterface::fixup_after_fork): Fixup rwlocks after fork.
(pthread_rwlockattr::isGoodObject): Implement.
(pthread_rwlockattr::pthread_rwlockattr): Ditto.
(pthread_rwlockattr::~pthread_rwlockattr): Ditto.
(pthread_rwlock::initMutex): Ditto.
(pthread_rwlock::pthread_rwlock): Ditto.
(pthread_rwlock::~pthread_rwlock): Ditto.
(pthread_rwlock::RdLock): Ditto.
(pthread_rwlock::TryRdLock): Ditto.
(pthread_rwlock::WrLock): Ditto.
(pthread_rwlock::TryWrLock): Ditto.
(pthread_rwlock::UnLock): Ditto.
(pthread_rwlock::addReader): Ditto.
(pthread_rwlock::removeReader): Ditto.
(pthread_rwlock::lookupReader): Ditto.
(pthread_rwlock::RdLockCleanup): Ditto.
(pthread_rwlock::WrLockCleanup): Ditto.
(pthread_rwlock::fixup_after_fork): Ditto.
(pthread_rwlock::isGoodObject): Ditto.
(pthread_rwlock::isGoodInitializer): Ditto.
(pthread_rwlock::isGoodInitializerOrObject): Ditto.
(pthread_rwlock::isGoodInitializerOrBadObject): Ditto.
(__pthread_rwlock_destroy): Ditto.
(pthread_rwlock::init): Ditto.
(__pthread_rwlock_rdlock): Ditto.
(__pthread_rwlock_tryrdlock): Ditto.
(__pthread_rwlock_wrlock): Ditto.
(__pthread_rwlock_trywrlock): Ditto.
@
text
@d1422 1
d1439 1
d1445 1
@


1.83
log
@* cygwin.din: Export btowc, trunc.
* include/cygwin/version.h: Reflect new exports.
* syscalls.cc (_stat): Rename to stat to avoid newlib wrapper.
* syscalls.cc (_fstat): Ditto.
* fhandler_console.cc (fhandler_console::close): Correct check for current tty.
Add debugging output when console is freed.
(set_console_state_for_spawn): Add debugging output.
* fhandler_tty.cc (fhandler_tty_slave::open): Don't decrement console open flag
when vforking.
* sigproc.cc (sigproc_terminate): Fix debugging output.
* spawn.cc (handle): Eliminate second argument.
(spawn_guts): Reflect elimination of argument change to handle.
* syscalls.cc (setsid): Add debugging output when console is freed.
* syscalls.cc (rename): Revert assumption that DELETE_ON_CLOSE works on Win9x.
@
text
@d957 11
@


1.82
log
@	Switch to 32/64 datatypes:
	* Makefile.in (OBSOLETE_FUNCTIONS): Add open acl aclcheck aclfrommode
	aclfrompbits aclfromtext aclsort acltomode acltopbits acltotext chown
	facl fchown fgetpos fopen freopen fseeko fsetpos fstat ftello
	ftruncate getegid geteuid getgid getgrent getgrgid getgrnam getgroups
	getpwuid getpwuid_r getuid initgroups lchown lseek lstat mknod mmap
	seekdir setegid seteuid setgid setgroups setregid setreuid setuid stat
	telldir truncate.
	(NEW_FUNCTIONS): Add _open64 acl32 aclcheck32 aclfrommode32
	aclfrompbits32 aclfromtext32 aclsort32 acltomode32 acltopbits32
	acltotext32 chown32 facl32 fchown32 fgetpos64 fopen64 freopen64
	fseeko64 fsetpos64 fstat64 ftello64 ftruncate64 getegid32 geteuid32
	getgid32 getgrent32 getgrgid32 getgrnam32 getgroups32 getpwuid32
	getpwuid_r32 getuid32 initgroups32 lchown32 lseek64 lstat64 mknod32
	mmap64 seekdir64 setegid32 seteuid32 setgid32 setgroups32 setregid32
	setreuid32 setuid32 stat64 telldir64 truncate64 to substitute the
	above.
	* cygserver_shm.h (class client_request_shm): Change uid_t and gid_t
	members to __uid32_t and __gid32_t.
	* cygwin.din: Add symbols acl32 aclcheck32 aclfrommode32
	aclfrompbits32 aclfromtext32 aclsort32 acltomode32 acltopbits32
	acltotext32 facl32 fgetpos64 fopen64 freopen64 fseeko64 fsetpos64
	_fstat64 ftello64 _lseek64 mknod32 _open64.
	* glob.c: Include perprocess.h.
	(globtilde): Call getpwuid32 and getuid32 instead of getpwuid and
	getuid.
	(g_lstat): Check for applications API version to call the appropriate
	typed gl_lstat function.
	(g_stat): Ditto for gl_stat.
	* shm.cc (client_request_shm::client_request_shm): Call geteuid32
	and getegid32 instead of geteuid and getegid throughout.
	* syscalls.cc (_open64): New alias for open.
	(_lseek64): New alias for lseek64.
	(_fstat64): New alias for fseek64.
	(mknod32): New function.
	(mknod): Calls mknod32 now.
	* winsup.h: Make function declarations for getuid32, geteuid32,
	and getpwuid32 accessible for plain C sources.  Add declarations
	for getegid32 and getpwnam.
	* include/cygwin/version.h: Bum API minor number to 78.
	* include/sys/cygwin.h: Guard C++ specific members of struct
	per_process against inclusion in plain C sources.
	* include/sys/mman.h (mman): Add guard to avoid type clash when
	compiling Cygwin.
@
text
@d76 2
a77 2
_fstat
fstat = _fstat
d85 2
a86 2
_stat
stat = _stat
d88 1
d185 1
@


1.81
log
@* cygwin.din: Wrap atexit and exit with cygwin, thread-safe functions.
* dcrt0.cc (cygwin_atexit): New function.
(cygwin_exit): Ditto.
@
text
@d105 1
d108 1
d111 1
d114 1
d117 1
d120 1
d123 1
d126 1
d129 1
d401 1
d437 1
d466 1
d482 1
d493 1
d496 1
d498 1
d507 1
d786 1
d827 1
d871 1
@


1.81.2.1
log
@* cygwin.din: Export btowc, trunc.
* include/cygwin/version.h: Reflect new exports.
* syscalls.cc (_stat): Rename to stat to avoid newlib wrapper.
* syscalls.cc (_fstat): Ditto.
@
text
@d76 2
a77 2
fstat
_fstat = fstat
d85 2
a86 2
stat
_stat = stat
a87 1
trunc
a174 1
btowc
@


1.80
log
@* cygmalloc.h: Remove MORECORE_CANNOT_TRIM.  It's not true.  # cygwin.din:
Export mallinfo.  # malloc_wrapper.cc (mallinfo): New function.
@
text
@d159 2
a160 2
atexit
_atexit = atexit
d375 1
a375 1
exit
@


1.79
log
@* syslog.cc (syslog): Do not print the Windows pid.  Print the Cygwin pid as an
unsigned decimal.  On Win95 print a timestamp and attempt to lock the file up
to four times in 3 ms.
@
text
@d771 1
@


1.78
log
@* cygwin.din: Export all appropriate newlibc libm functions.  Sort.
* include/cygwin/version.h: Bump API minor number.
@
text
@d770 1
@


1.77
log
@* cygwin.din: Export all appropriate newlib functions.
* include/cygwin/version.h: Bump API minor number.
@
text
@d4 19
d24 1
d36 61
a96 7
__argv DATA
__argc DATA
__progname DATA
_check_for_executable DATA
; __vc__10pinfo_listi
@@ALLOCA@@
cygwin_stackdump
d103 18
a146 2
_asprintf_r
asprintf_r = _asprintf_r
d191 1
d193 1
a193 1
cfgetispeed
a194 1
cfsetispeed
d202 2
d213 2
d229 1
d234 2
d238 76
d316 2
d320 3
a322 3
dirfd
_dirfd = dirfd
_dll_crt0@@0
a323 1
cygwin_dll_init
d326 4
a329 3
cygwin_detach_dll
cygwin32_detach_dll = cygwin_detach_dll
@@DEF_DLL_ENTRY@@
d346 5
d353 2
a375 1
_exit
d378 2
d390 2
a391 4
_f_atan2
__f_atan2 = _f_atan2
_f_atan2f
__f_atan2f = _f_atan2f
a402 2
_fcloseall_r
fcloseall_r = _fcloseall_r
d411 2
a418 4
_f_exp
__f_exp = _f_exp
_f_expf
__f_expf = _f_expf
d421 2
a422 4
_f_frexp
__f_frexp = _f_frexp
_f_frexpf
__f_frexpf = _f_frexpf
a428 2
ffs
_ffs = ffs
a436 12
_f_ldexp
__f_ldexp = _f_ldexp
_f_ldexpf
__f_ldexpf = _f_ldexpf
_f_log
__f_log = _f_log
_f_logf
__f_logf = _f_logf
_f_log10
__f_log10 = _f_log10
_f_log10f
__f_log10f = _f_log10f
d441 6
a446 2
fnmatch
_fnmatch = fnmatch
d451 2
d458 2
a459 6
_f_pow
__f_pow = _f_pow
_f_powf
__f_powf = _f_powf
fprintf
_fprintf = fprintf
a475 2
_fscanf_r
fscanf_r = _fscanf_r
a481 2
_fstat
fstat = _fstat
a486 4
_f_tan
__f_tan = _f_tan
_f_tanf
__f_tanf = _f_tanf
d510 2
d522 2
d529 2
d537 3
d549 1
a549 2
gethostname = cygwin_gethostname
_gethostname = cygwin_gethostname
a555 2
get_osfhandle
_get_osfhandle = get_osfhandle
d560 3
d567 12
d597 4
d609 1
d616 4
a619 1
h_errno DATA
d630 2
d638 1
d703 2
d707 1
d711 2
d716 2
d760 6
a768 2
lstat = cygwin_lstat
_lstat = cygwin_lstat
d783 1
d789 2
a814 3
mprotect
msync
munmap
d819 6
d831 2
d837 2
d841 6
d852 2
d856 3
a861 1
_pipe
d864 6
d876 67
d951 2
a965 2
initstate
setstate
d976 1
a976 4
posix_regcomp
posix_regerror
posix_regexec
posix_regfree
d983 2
d999 2
d1007 2
d1017 10
a1026 2
_scanf_r
scanf_r = _scanf_r
d1030 5
d1037 1
d1040 8
d1051 2
d1056 2
d1060 1
d1063 7
d1072 4
d1086 1
a1088 6
seteuid
_seteuid = seteuid
seteuid32
setegid
_setegid = setegid
setegid32
a1093 2
chroot
_chroot = chroot
d1096 8
a1109 2
sigismember
_sigismember = sigismember
d1116 2
d1124 1
d1133 2
d1145 3
a1165 2
snprintf
_snprintf = snprintf
d1172 2
a1176 4
_sscanf_r
sscanf_r = _sscanf_r
_stat
stat = _stat
d1200 6
d1222 2
d1226 3
d1236 1
a1237 1
_strtodf = strtof
a1243 1
_strtold
d1246 1
d1263 2
d1299 2
d1322 1
d1326 1
d1334 2
d1342 3
a1355 2
_vasprintf_r
vasprintf_r = _vasprintf_r
d1364 2
a1365 2
_vfscanf_r
vfscanf_r = _vfscanf_r
d1370 2
a1371 2
_vscanf_r
vscanf_r = _vscanf_r
a1373 2
vsnprintf
_vsnprintf = vsnprintf
a1375 2
_vsscanf_r
vsscanf_r = _vsscanf_r
d1378 2
a1381 3
wait3
wait4
mbsrtowcs
a1382 1
wctob
d1385 2
d1391 2
d1397 1
a1398 1
wcsrchr
d1401 2
a1405 2
wcstombs
_wcstombs = wcstombs
d1413 2
a1424 331
drand48
_drand48 = drand48
erand48
_erand48 = erand48
jrand48
_jrand48 = jrand48
lcong48
_lcong48 = lcong48
lrand48
_lrand48 = lrand48
mrand48
_lrand48 = lrand48
nrand48
_nrand48 = nrand48
seed48
_seed48 = seed48
srand48
_srand48 = srand48
setbuffer
setlinebuf
setmode
_setmode = setmode
__assertfail
getw
_getw = getw
getwd
_getwd = getwd
popen
_popen = popen
pclose
_pclose = pclose
strftime
_strftime = strftime
strlcat
_strlcat = strlcat
strlcpy
_strlcpy = strlcpy
strptime
_strptime = strptime
setgrent
_setgrent = setgrent
cuserid
_cuserid = cuserid
setpgrp
_setpgrp = setpgrp
mount
_mount = mount
setmntent
_setmntent = setmntent
endmntent
_endmntent = endmntent
umount
_umount = umount
wcscmp
_wcscmp = wcscmp
wcslen
_wcslen = wcslen
wprintf
_wprintf = wprintf
memccpy
_memccpy = memccpy
getpwent
_getpwent = getpwent
endpwent
_endpwent = endpwent
setpwent
_setpwent = setpwent
getpwduid
_getpwduid = getpwduid
getpwnam
_getpwnam = getpwnam
getpwnam_r
getpwuid
_getpwuid = getpwuid
getpwuid32
getpwuid_r
getpwuid_r32
getpgrp
_getpgrp = getpgrp
getgrent
_getgrent = getgrent
getgrent32
ntohl
_ntohl = ntohl
htonl
_htonl = htonl
htons
_htons = htons
ntohs
_ntohs = ntohs
a64l
accept = cygwin_accept
bind = cygwin_bind
connect = cygwin_connect
hstrerror = cygwin_hstrerror
herror = cygwin_herror
inet_addr = cygwin_inet_addr
inet_network = cygwin_inet_network
inet_netof
inet_makeaddr
listen = cygwin_listen
getdomainname
_getdomainname = getdomainname
gethostbyaddr = cygwin_gethostbyaddr
gethostbyname = cygwin_gethostbyname
getpeername = cygwin_getpeername
getprotobyname = cygwin_getprotobyname
getprotobynumber = cygwin_getprotobynumber
getservbyname = cygwin_getservbyname
getservbyport = cygwin_getservbyport
getsockname = cygwin_getsockname
getsockopt = cygwin_getsockopt
recv = cygwin_recv
select = cygwin_select
_select = cygwin_select
send = cygwin_send
socket = cygwin_socket
setsockopt = cygwin_setsockopt
inet_aton = cygwin_inet_aton
inet_ntoa = cygwin_inet_ntoa
recvfrom = cygwin_recvfrom
recvmsg = cygwin_recvmsg
sendmsg = cygwin_sendmsg
sendto = cygwin_sendto
shutdown = cygwin_shutdown
sethostent
endhostent
setpassent
_setpassent = setpassent
strsep
_strsep = strsep
syslog
_syslog = syslog
closelog
_closelog = closelog
openlog
_openlog = openlog
setlogmask
vhangup
_vhangup = vhangup
nice
_nice = nice
cygwin_conv_to_win32_path
cygwin_conv_to_full_win32_path
cygwin_conv_to_posix_path
cygwin_conv_to_full_posix_path
cygwin_posix_path_list_p
cygwin_win32_to_posix_path_list_buf_size
cygwin_posix_to_win32_path_list_buf_size
cygwin_win32_to_posix_path_list
cygwin_posix_to_win32_path_list
cygwin_split_path
cygwin_umount
cygwin32_conv_to_win32_path = cygwin_conv_to_win32_path
cygwin32_conv_to_full_win32_path = cygwin_conv_to_full_win32_path
cygwin32_conv_to_posix_path = cygwin_conv_to_posix_path
cygwin32_conv_to_full_posix_path = cygwin_conv_to_full_posix_path
cygwin32_posix_path_list_p = cygwin_posix_path_list_p
cygwin32_win32_to_posix_path_list_buf_size = cygwin_win32_to_posix_path_list_buf_size
cygwin32_posix_to_win32_path_list_buf_size = cygwin_posix_to_win32_path_list_buf_size
cygwin32_win32_to_posix_path_list = cygwin_win32_to_posix_path_list
cygwin32_posix_to_win32_path_list = cygwin_posix_to_win32_path_list
cygwin32_split_path = cygwin_split_path
cygwin_winpid_to_pid
cygwin32_winpid_to_pid = cygwin_winpid_to_pid
cygwin_logon_user
cygwin_set_impersonation_token
realpath
reent_data DATA
getenv
_getenv = getenv
putenv
_putenv = putenv
setenv
_setenv = setenv
unsetenv
_unsetenv = unsetenv
setitimer
getitimer
getpgid
killpg
pause
__cygwin_environ DATA
__cygwin_user_data DATA
_ctype_ DATA
_sys_errlist DATA
sys_errlist = _sys_errlist DATA
_sys_nerr DATA
sys_nerr = _sys_nerr DATA
__mb_cur_max DATA
_timezone DATA
_daylight DATA
_tzname DATA
ptsname
grantpt
unlockpt
sexecve = sexecve_is_bad
sexecl = sexecve_is_bad
sexecle = sexecve_is_bad
sexeclp = sexecve_is_bad
sexeclpe = sexecve_is_bad
sexecv = sexecve_is_bad
sexecp = sexecve_is_bad
sexecvpe = sexecve_is_bad
ttyslot
rcmd = cygwin_rcmd
rresvport = cygwin_rresvport
rexec = cygwin_rexec
socketpair
strsignal
strtosigno
ctermid
dlopen
dlclose
dlsym
dlerror
dlfork
sigpause
cygwin_attach_handle_to_fd
cygwin32_attach_handle_to_fd = cygwin_attach_handle_to_fd
cygwin_internal
cygwin32_internal = cygwin_internal
pthread_atfork
pthread_attr_destroy
pthread_attr_getdetachstate
pthread_attr_getinheritsched
pthread_attr_getschedparam
pthread_attr_getschedpolicy
pthread_attr_getscope
pthread_attr_getstacksize
pthread_attr_init
pthread_attr_setdetachstate
pthread_attr_setinheritsched
pthread_attr_setschedparam
pthread_attr_setschedpolicy
pthread_attr_setscope
pthread_attr_setstacksize
pthread_cancel
_pthread_cleanup_push
_pthread_cleanup_pop
pthread_cond_broadcast
pthread_cond_destroy
pthread_cond_init
pthread_cond_signal
pthread_cond_timedwait
pthread_cond_wait
pthread_condattr_destroy
pthread_condattr_getpshared
pthread_condattr_init
pthread_condattr_setpshared
pthread_create
pthread_detach
pthread_equal
pthread_exit
pthread_getconcurrency
pthread_getschedparam
pthread_getsequence_np
pthread_getspecific
pthread_join
pthread_key_create
pthread_key_delete
pthread_mutex_destroy
pthread_mutex_getprioceiling
pthread_mutex_init
pthread_mutex_lock
pthread_mutex_setprioceiling
pthread_mutex_trylock
pthread_mutex_unlock
pthread_mutexattr_destroy
pthread_mutexattr_getprioceiling
pthread_mutexattr_getprotocol
pthread_mutexattr_getpshared
pthread_mutexattr_gettype
pthread_mutexattr_init
pthread_mutexattr_setprioceiling
pthread_mutexattr_setprotocol
pthread_mutexattr_setpshared
pthread_mutexattr_settype
pthread_once
pthread_self
pthread_setcancelstate
pthread_setcanceltype
pthread_setconcurrency
pthread_setschedparam
pthread_setspecific
pthread_testcancel
pthread_suspend
pthread_continue
pthread_kill
pthread_sigmask
sem_init
sem_destroy
sem_wait
sem_trywait
sem_post
sched_get_priority_max
sched_get_priority_min
sched_getparam
sched_getscheduler
sched_rr_get_interval
sched_setparam
sched_setscheduler
sched_yield
acl
_acl = acl
facl
_facl = facl
lacl
_lacl = lacl
aclcheck
_aclcheck = aclcheck
aclsort
_aclsort = aclsort
acltomode
_acltomode = acltomode
aclfrommode
_aclfrommode = aclfrommode
acltopbits
_acltopbits = acltopbits
aclfrompbits
_aclfrompbits = aclfrompbits
acltotext
_acltotext = acltotext
aclfromtext
_aclfromtext = aclfromtext
setprotoent = cygwin_setprotoent
setservent = cygwin_setservent
getservent = cygwin_getservent
getprotoent = cygwin_getprotoent
endprotoent = cygwin_endprotoent
endservent = cygwin_endservent
@


1.76
log
@	* cygwin.din: Export setreuid32, setreuid, setregid32, setregid.
	* syscalls.cc (setreuid32): New function.
	(setreuid): Ditto.
	(setregid32): Ditto.
	(setregid): Ditto.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d429 6
d464 1
d489 13
d518 1
d582 3
d598 1
d633 1
d877 2
d898 1
d943 2
d950 1
d966 3
d972 1
d975 1
d1031 20
d1053 7
a1059 2
wctomb
_wctomb = wctomb
d1088 2
d1160 1
@


1.75
log
@	* cygwin.din: Export nanosleep().
	* signal.cc (nanosleep): New function.
	(sleep): Move old functionality to nanosleep().  Call nanosleep().
	(usleep): Remove old functionality.  Call nanosleep().
	* include/cygwin/version.h: Bump API minor number.
@
text
@d718 6
@


1.74
log
@	* cygwin.din: Add strerror_r.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d600 2
@


1.73
log
@	* cygwin.din: add asprintf and vasprintf, as well as the reentrant
	versions and underscore variants.
	* include/cygwin/version.h: bump CYGWIN_VERSION_API_MINOR.
@
text
@d829 2
@


1.73.2.1
log
@trunk merge
@
text
@a599 2
nanosleep
_nanosleep = nanosleep
a828 2
strerror_r
_strerror_r = strerror_r
@


1.73.2.2
log
@merge from trunk
@
text
@a717 6
setregid
_setregid = setregid
setregid32
setreuid
_setreuid = setreuid
setreuid32
@


1.73.2.3
log
@merge from trunk
@
text
@a428 6
hcreate
hcreate_r
hdestroy
hdestroy_r
hsearch
hsearch_r
a457 1
isblank
a481 13
iswalnum
iswalpha
iswblank
iswcntrl
iswctype
iswdigit
iswgraph
iswlower
iswprint
iswpunct
iswspace
iswupper
iswxdigit
a497 1
l64a
a560 3
mbrlen
mbrtowc
mbsinit
a573 1
mempcpy
a607 1
on_exit
a850 2
strndup
strnlen
a869 1
_strtold
a913 2
tdelete
tdestroy
a918 1
tfind
a933 3
towctrans
towlower
towupper
a936 1
tsearch
a938 1
twalk
d994 2
a995 18
mbsrtowcs
wcrtomb
wctob
wcscat
wcschr
wcscpy
wcscspn
wcslcat
wcslcpy
wcsncat
wcsncmp
wcsncpy
wcspbrk
wcsrtombs
wcsrchr
wcsspn
wcsstr
wctob
a997 9
wcstombs
_wcstombs = wcstombs
wctrans
wctype
wmemchr
wmemcmp
wmemcpy
wmemmove
wmemset
a1025 2
setbuffer
setlinebuf
a1095 1
a64l
@


1.73.2.4
log
@merge from trunk
@
text
@a3 19
__argc DATA
__argv DATA
__cygwin_environ DATA
__cygwin_user_data DATA
__mb_cur_max DATA
__progname DATA
_check_for_executable DATA
_ctype_ DATA
_daylight DATA
_sys_errlist DATA
sys_errlist = _sys_errlist DATA
_sys_nerr DATA
sys_nerr = _sys_nerr DATA
_timezone DATA
_tzname DATA
h_errno DATA
reent_data DATA
@@ALLOCA@@
@@DEF_DLL_ENTRY@@
a4 1
__assertfail
d16 7
a22 61
_asprintf_r
asprintf_r = _asprintf_r
_dll_crt0@@0
_exit
_f_atan2
__f_atan2 = _f_atan2
_f_atan2f
__f_atan2f = _f_atan2f
_f_exp
__f_exp = _f_exp
_f_expf
__f_expf = _f_expf
_f_frexp
__f_frexp = _f_frexp
_f_frexpf
__f_frexpf = _f_frexpf
_f_ldexp
__f_ldexp = _f_ldexp
_f_ldexpf
__f_ldexpf = _f_ldexpf
_f_log
__f_log = _f_log
_f_log10
__f_log10 = _f_log10
_f_log10f
__f_log10f = _f_log10f
_f_logf
__f_logf = _f_logf
_f_pow
__f_pow = _f_pow
_f_powf
__f_powf = _f_powf
_f_tan
__f_tan = _f_tan
_f_tanf
__f_tanf = _f_tanf
_fcloseall_r
fcloseall_r = _fcloseall_r
_fscanf_r
fscanf_r = _fscanf_r
_fstat
fstat = _fstat
_pipe
_pthread_cleanup_pop
_pthread_cleanup_push
_scanf_r
scanf_r = _scanf_r
_sscanf_r
sscanf_r = _sscanf_r
_stat
stat = _stat
_strtold
_vasprintf_r
vasprintf_r = _vasprintf_r
_vfscanf_r
vfscanf_r = _vfscanf_r
_vscanf_r
vscanf_r = _vscanf_r
_vsscanf_r
vsscanf_r = _vsscanf_r
a64l
a28 18
acl
_acl = acl
aclcheck
_aclcheck = aclcheck
aclfrommode
_aclfrommode = aclfrommode
aclfrompbits
_aclfrompbits = aclfrompbits
aclfromtext
_aclfromtext = aclfromtext
aclsort
_aclsort = aclsort
acltomode
_acltomode = acltomode
acltopbits
_acltopbits = acltopbits
acltotext
_acltotext = acltotext
d55 2
d101 1
d103 1
a103 1
cfgetospeed
a104 1
cfsetospeed
a111 2
chroot
_chroot = chroot
a120 2
closelog
_closelog = closelog
a134 1
ctermid
a138 2
cuserid
_cuserid = cuserid
a140 76
accept = cygwin_accept
cygwin_attach_handle_to_fd
cygwin32_attach_handle_to_fd = cygwin_attach_handle_to_fd
bind = cygwin_bind
connect = cygwin_connect
cygwin_conv_to_full_posix_path
cygwin32_conv_to_full_posix_path = cygwin_conv_to_full_posix_path
cygwin_conv_to_full_win32_path
cygwin32_conv_to_full_win32_path = cygwin_conv_to_full_win32_path
cygwin_conv_to_posix_path
cygwin32_conv_to_posix_path = cygwin_conv_to_posix_path
cygwin_conv_to_win32_path
cygwin32_conv_to_win32_path = cygwin_conv_to_win32_path
cygwin_detach_dll
cygwin32_detach_dll = cygwin_detach_dll
cygwin_dll_init
endprotoent = cygwin_endprotoent
endservent = cygwin_endservent
gethostbyaddr = cygwin_gethostbyaddr
gethostbyname = cygwin_gethostbyname
_gethostname = cygwin_gethostname
gethostname = cygwin_gethostname
getpeername = cygwin_getpeername
getprotobyname = cygwin_getprotobyname
getprotobynumber = cygwin_getprotobynumber
getprotoent = cygwin_getprotoent
getservbyname = cygwin_getservbyname
getservbyport = cygwin_getservbyport
getservent = cygwin_getservent
getsockname = cygwin_getsockname
getsockopt = cygwin_getsockopt
herror = cygwin_herror
hstrerror = cygwin_hstrerror
inet_addr = cygwin_inet_addr
inet_aton = cygwin_inet_aton
inet_network = cygwin_inet_network
inet_ntoa = cygwin_inet_ntoa
cygwin_internal
cygwin32_internal = cygwin_internal
listen = cygwin_listen
cygwin_logon_user
_lstat = cygwin_lstat
lstat = cygwin_lstat
cygwin_posix_path_list_p
cygwin32_posix_path_list_p = cygwin_posix_path_list_p
cygwin_posix_to_win32_path_list
cygwin32_posix_to_win32_path_list = cygwin_posix_to_win32_path_list
cygwin_posix_to_win32_path_list_buf_size
cygwin32_posix_to_win32_path_list_buf_size = cygwin_posix_to_win32_path_list_buf_size
rcmd = cygwin_rcmd
recv = cygwin_recv
recvfrom = cygwin_recvfrom
recvmsg = cygwin_recvmsg
rexec = cygwin_rexec
rresvport = cygwin_rresvport
_select = cygwin_select
select = cygwin_select
send = cygwin_send
sendmsg = cygwin_sendmsg
sendto = cygwin_sendto
cygwin_set_impersonation_token
setprotoent = cygwin_setprotoent
setservent = cygwin_setservent
setsockopt = cygwin_setsockopt
shutdown = cygwin_shutdown
socket = cygwin_socket
cygwin_split_path
cygwin32_split_path = cygwin_split_path
cygwin_stackdump
cygwin_umount
cygwin_win32_to_posix_path_list
cygwin32_win32_to_posix_path_list = cygwin_win32_to_posix_path_list
cygwin_win32_to_posix_path_list_buf_size
cygwin32_win32_to_posix_path_list_buf_size = cygwin_win32_to_posix_path_list_buf_size
cygwin_winpid_to_pid
cygwin32_winpid_to_pid = cygwin_winpid_to_pid
d143 2
d147 1
a147 5
div
_div = div
dlclose
dlerror
dlfork
d149 1
d152 3
a154 4
dlopen
dlsym
drand48
_drand48 = drand48
a170 5
endhostent
endmntent
_endmntent = endmntent
endpwent
_endpwent = endpwent
a172 2
erand48
_erand48 = erand48
d194 1
a196 2
exp2
exp2f
d207 4
a210 2
facl
_facl = facl
d222 2
a231 2
fdim
fdimf
d238 4
d244 4
a247 2
ffs
_ffs = ffs
d254 2
d264 12
d280 2
a281 6
fma
fmaf
fmax
fmaxf
fmin
fminf
a285 2
fnmatch
_fnmatch = fnmatch
d291 4
d313 2
d321 2
d328 4
a354 2
get_osfhandle
_get_osfhandle = get_osfhandle
a364 2
getdomainname
_getdomainname = getdomainname
a369 2
getenv
_getenv = getenv
a375 3
getgrent
_getgrent = getgrent
getgrent32
d385 2
a386 1
getitimer
d393 2
a398 3
getpgid
getpgrp
_getpgrp = getpgrp
a402 12
getpwduid
_getpwduid = getpwduid
getpwent
_getpwent = getpwent
getpwnam
_getpwnam = getpwnam
getpwnam_r
getpwuid
_getpwuid = getpwuid
getpwuid32
getpwuid_r
getpwuid_r32
a420 4
getw
_getw = getw
getwd
_getwd = getwd
a428 1
grantpt
d435 1
a435 4
htonl
_htonl = htonl
htons
_htons = htons
a445 2
inet_makeaddr
inet_netof
a451 1
initstate
a515 2
jrand48
_jrand48 = jrand48
a517 1
killpg
a520 2
lacl
_lacl = lacl
a523 2
lcong48
_lcong48 = lcong48
a565 6
lrand48
_lrand48 = lrand48
lrint
lrintf
lround
lroundf
d569 2
a584 1
mbsrtowcs
a589 2
memccpy
_memccpy = memccpy
d614 3
a620 6
mount
_mount = mount
mprotect
mrand48
msync
munmap
a626 2
nearbyint
nearbyintf
a630 2
nice
_nice = nice
a632 6
nrand48
_nrand48 = nrand48
ntohl
_ntohl = ntohl
ntohs
_ntohs = ntohs
a637 2
openlog
_openlog = openlog
a639 3
pause
pclose
_pclose = pclose
d643 1
a645 6
popen
_popen = popen
posix_regcomp
posix_regerror
posix_regexec
posix_regfree
a651 67
pthread_atfork
pthread_attr_destroy
pthread_attr_getdetachstate
pthread_attr_getinheritsched
pthread_attr_getschedparam
pthread_attr_getschedpolicy
pthread_attr_getscope
pthread_attr_getstacksize
pthread_attr_init
pthread_attr_setdetachstate
pthread_attr_setinheritsched
pthread_attr_setschedparam
pthread_attr_setschedpolicy
pthread_attr_setscope
pthread_attr_setstacksize
pthread_cancel
pthread_cond_broadcast
pthread_cond_destroy
pthread_cond_init
pthread_cond_signal
pthread_cond_timedwait
pthread_cond_wait
pthread_condattr_destroy
pthread_condattr_getpshared
pthread_condattr_init
pthread_condattr_setpshared
pthread_continue
pthread_create
pthread_detach
pthread_equal
pthread_exit
pthread_getconcurrency
pthread_getschedparam
pthread_getsequence_np
pthread_getspecific
pthread_join
pthread_key_create
pthread_key_delete
pthread_kill
pthread_mutex_destroy
pthread_mutex_getprioceiling
pthread_mutex_init
pthread_mutex_lock
pthread_mutex_setprioceiling
pthread_mutex_trylock
pthread_mutex_unlock
pthread_mutexattr_destroy
pthread_mutexattr_getprioceiling
pthread_mutexattr_getprotocol
pthread_mutexattr_getpshared
pthread_mutexattr_gettype
pthread_mutexattr_init
pthread_mutexattr_setprioceiling
pthread_mutexattr_setprotocol
pthread_mutexattr_setpshared
pthread_mutexattr_settype
pthread_once
pthread_self
pthread_setcancelstate
pthread_setcanceltype
pthread_setconcurrency
pthread_setschedparam
pthread_setspecific
pthread_sigmask
pthread_suspend
pthread_testcancel
ptsname
a659 2
putenv
_putenv = putenv
d673 2
d685 4
a688 1
realpath
a694 2
remquo
remquof
a708 2
round
roundf
a714 2
scalbln
scalblnf
d723 2
a724 10
sched_get_priority_max
sched_get_priority_min
sched_getparam
sched_getscheduler
sched_rr_get_interval
sched_setparam
sched_setscheduler
sched_yield
seed48
_seed48 = seed48
a727 5
sem_destroy
sem_init
sem_post
sem_trywait
sem_wait
a729 1
setbuffer
a731 8
setegid
_setegid = setegid
setegid32
setenv
_setenv = setenv
seteuid
_seteuid = seteuid
seteuid32
a734 2
setgrent
_setgrent = setgrent
a737 2
sethostent
setitimer
a739 1
setlinebuf
a741 7
setlogmask
setmntent
_setmntent = setmntent
setmode
_setmode = setmode
setpassent
_setpassent = setpassent
a743 4
setpgrp
_setpgrp = setpgrp
setpwent
_setpwent = setpwent
a753 1
setstate
d756 6
d767 2
a770 8
sexecl = sexecve_is_bad
sexecle = sexecve_is_bad
sexeclp = sexecve_is_bad
sexeclpe = sexecve_is_bad
sexecp = sexecve_is_bad
sexecv = sexecve_is_bad
sexecve = sexecve_is_bad
sexecvpe = sexecve_is_bad
d777 2
a784 2
sigismember
_sigismember = sigismember
a790 1
sigpause
a798 2
sincos
sincosf
a808 3
snprintf
_snprintf = snprintf
socketpair
d827 2
a834 2
srand48
_srand48 = srand48
d838 4
a864 6
strftime
_strftime = strftime
strlcat
_strlcat = strlcat
strlcpy
_strlcpy = strlcpy
a880 2
strptime
_strptime = strptime
d883 2
a884 5
strsep
_strsep = strsep
strsignal
strspn
_strspn = strspn
d890 1
a891 1
strtodf = strtof
d898 1
a900 1
strtosigno
a916 2
syslog
_syslog = syslog
a950 2
tgamma
tgammaf
a971 1
truncf
a974 1
ttyslot
a981 2
umount
_umount = umount
a987 3
unlockpt
unsetenv
_unsetenv = unsetenv
d999 2
d1009 2
a1010 2
vhangup
_vhangup = vhangup
d1015 4
a1020 2
vsprintf
_vsprintf = vsprintf
d1023 2
d1027 2
d1031 1
a1031 2
waitpid
_waitpid = waitpid
d1033 1
a1035 2
wcscmp
_wcscmp = wcscmp
a1039 2
wcslen
_wcslen = wcslen
d1044 1
a1045 1
wcsrtombs
a1047 2
wcstombs
_wcstombs = wcstombs
d1051 2
a1059 2
wprintf
_wprintf = wprintf
d1070 331
@


1.73.2.5
log
@merge from trunk
@
text
@a769 1
mallinfo
@


1.73.2.6
log
@merge from trunk
@
text
@d159 2
a160 2
atexit = cygwin_atexit
_atexit = cygwin_atexit
d375 1
a375 1
exit = cygwin_exit
@


1.73.2.7
log
@merge from trunk
@
text
@a104 1
acl32
a106 1
aclcheck32
a108 1
aclfrommode32
a110 1
aclfrompbits32
a112 1
aclfromtext32
a114 1
aclsort32
a116 1
acltomode32
a118 1
acltopbits32
a120 1
acltotext32
a391 1
facl32
a426 1
fgetpos64
a454 1
fopen64
a469 1
freopen64
a479 1
fseeko64
a481 1
fsetpos64
a482 1
_fstat64 = fstat64
a490 1
ftello64
a768 1
_lseek64 = lseek64
a807 1
mknod32
a850 1
_open64
@


1.73.2.8
log
@merge from trunk
@
text
@d76 2
a77 2
fstat
_fstat = fstat
d85 2
a86 2
stat
_stat = stat
a87 1
trunc
a183 1
btowc
a953 11
pthread_rwlock_destroy
pthread_rwlock_init
pthread_rwlock_rdlock
pthread_rwlock_tryrdlock
pthread_rwlock_wrlock
pthread_rwlock_trywrlock
pthread_rwlock_unlock
pthread_rwlockattr_init
pthread_rwlockattr_getpshared
pthread_rwlockattr_setpshared
pthread_rwlockattr_destroy
@


1.73.2.9
log
@merge from trunk
@
text
@d106 1
a106 1
_acl32 = acl32
d109 1
a109 1
_aclcheck32 = aclcheck32
d112 1
a112 1
_aclfrommode32 = aclfrommode32
d115 1
a115 1
_aclfrompbits32 = aclfrompbits32
d118 1
a118 1
_aclfromtext32 = aclfromtext32
d121 1
a121 1
_aclsort32 = aclsort32
d124 1
a124 1
_acltomode32 = acltomode32
d127 1
a127 1
_acltopbits32 = acltopbits32
d130 1
a130 1
_acltotext32 = acltotext32
d212 1
a212 1
_chown32 = chown32
d403 1
a403 1
_facl32 = facl32
d410 1
a410 1
_fchown32 = fchown32
d439 1
a439 1
_fgetpos64 = fgetpos64
d468 1
a468 1
_fopen64 = fopen64
d484 1
a484 1
_freopen64 = freopen64
d495 1
a495 1
_fseeko64 = fseeko64
d498 2
a499 1
_fsetpos64 = fsetpos64
d509 1
a509 1
_ftello64 = ftello64
d514 1
a514 1
_ftruncate64 = ftruncate64
d547 1
a547 1
_getegid32 = getegid32
d552 1
a552 1
_geteuid32 = geteuid32
d555 1
a555 1
_getgid32 = getgid32
d558 1
a558 1
_getgrent32 = getgrent32
d561 1
a561 1
_getgrgid32 = getgrgid32
d564 1
a564 1
_getgrnam32 = getgrnam32
d567 1
a567 2
_getgroups32 = getgroups32
gethostid
d595 1
a595 1
_getpwuid32 = getpwuid32
d597 1
a597 1
_getpwuid_r32 = getpwuid_r32
d609 1
a609 1
_getuid32 = getuid32
d656 1
a656 1
_initgroups32 = initgroups32
d734 1
a734 1
_lchown32 = lchown32
d787 1
d789 1
a789 1
_lstat64 = lstat64
d828 1
a828 1
_mknod32 = mknod32
d836 1
a836 1
_mmap64 = mmap64
d1063 1
a1063 1
_seekdir64 = seekdir64
d1076 1
a1076 1
_setegid32 = setegid32
d1081 1
a1081 1
_seteuid32 = seteuid32
d1084 1
a1084 1
_setgid32 = setgid32
d1089 1
a1089 1
_setgroups32 = setgroups32
a1112 1
_setregid32 = setregid32
a1115 1
_setreuid32 = setreuid32
d1125 1
a1125 1
_setuid32 = setuid32
d1211 1
a1211 1
_stat64 = stat64
d1329 1
a1329 1
_telldir64 = telldir64
d1355 1
a1355 1
_truncate64 = truncate64
a1420 1
wcscoll
a1436 1
wcswidth
a1441 1
wcwidth
@


1.73.2.10
log
@merge from trunk
@
text
@a510 2
ftok
_ftok = ftok
@


1.73.2.11
log
@merge from trunk
@
text
@a28 1
__getreent
a1301 1
vsyslog
@


1.73.2.12
log
@merge from trunk
@
text
@a427 1
_fdopen64 = fdopen64
a822 1
__mempcpy = mempcpy
@


1.73.2.13
log
@merge from trunk
@
text
@d291 2
a292 2
lstat
_lstat = lstat
@


1.73.2.14
log
@merge from trunk
@
text
@a143 24
argz_add
__argz_add = argz_add
argz_add_sep
__argz_add_sep = argz_add_sep
argz_append
__argz_append = argz_append
argz_count
__argz_count = argz_count
argz_create
__argz_create = argz_create
argz_create_sep
__argz_create_sep = argz_create_sep
argz_delete
__argz_delete = argz_delete
argz_extract
__argz_extract = argz_extract
argz_insert
__argz_insert = argz_insert
argz_next
__argz_next = argz_next
argz_replace
__argz_replace = argz_replace
argz_stringify
__argz_stringify = argz_stringify
a267 1
endusershell
a280 1
getusershell
a313 1
setusershell
a325 1
daemon
a364 12
envz_add
__envz_add = envz_add
envz_entry
__envz_entry = envz_entry
envz_get
__envz_get = envz_get
envz_merge
__envz_merge = envz_merge
envz_remove
__envz_remove = envz_remove
envz_strip
__envz_strip = envz_strip
a472 1
forkpty
a779 1
login_tty
a780 2
logwtmp
updwtmp
a880 1
openpty
a1024 1
revoke
@


1.73.2.15
log
@merge from trunk
@
text
@a5 1
__check_rhosts_file DATA
a9 1
__rcmd_errstr DATA
a19 5
optarg DATA
opterr DATA
optind DATA
optopt DATA
optreset DATA
a619 2
getopt
getopt_long
a706 2
iruserok
ruserok
@


1.72
log
@* cygwin.din: Reflect name change from strtodf to strtof.  Export strtof.
* include/cygwin/version.h: Bump API minor number.
@
text
@d53 4
d950 4
@


1.71
log
@* netdb.cc: New file.
* Makeile.in (DLL_OFILES): Add reference to the new netdb.cc file.
* cygwin.din : Add new aliased exports for service and protocol enumerations in
netdb.cc.
@
text
@d847 3
a849 2
strtodf
_strtodf = strtodf
@


1.70
log
@* cygwin.din: Export pthread_getsequence_np.
* include/cygwin/version.h: Bump API minor version.
@
text
@d1311 6
@


1.69
log
@* cygwin.din: Export nl_langinfo().
* include/cygwin/version.h: Bump API minor version.
@
text
@d1242 1
@


1.68
log
@* include/cygwin/version.h: Bump API_MINOR to accommodate below changes.
* cygwin.din (siginterrupt): New export.
* signal.cc (siginterrupt): New.
@
text
@d600 2
@


1.67
log
@	* cygwin.din: Export fseeko() and ftello().
	* include/cygwin/version.h: Bump API minor version.
@
text
@d743 2
@


1.66
log
@* include/cygwin/version.h: Bump API minor number for below export.
* cygwin.din (pututline): New exported function.
* syscalls.cc (login): Use pututiline().
(setutent): Open utmp as read/write.
(endutent): Check if utmp file is open.
(utmpname): call endutent() to close current utmp file.
(getutid): Enable all cases, use strncmp() to compare ut_id fields.
(pututline): New.
* tty.cc (create_tty_master): Set ut_pid to current pid.
@
text
@d313 2
d330 2
@


1.65
log
@Change _function() to function() throughout.
* cygwin.din: Remove last vestiges (?) of newlib wrappers.
* cygthread.cc (cygthread::detach): Always wait for event or suffer an
apparently inavoidable race.
* dcrt0.cc (dll_crt0_1): Allocate threads after stack has been relocated.
* debub.cc (lock_debug): Don't acquire lock on exit.
* fork.cc (fork_child): Recreate mmaps before doing anything else since Windows
has a habit of using blocks of memory in the child that could previously have
been occupied by shared memory in the parent.
* mmap.cc (fhandler_disk_file::fixup_mmap_after_fork): Issue error here and
provide some details about what went wrong.
(fixup_mmaps_after_fork): Remove error message.
* shared.cc (open_shared): Move warning message so that more detail is
possible.
* sigproc.cc (sigproc_init): Initialize sync_proc_subproc to avoid a race.
(sigproc_terminate): Specifically wait for process thread to terminate.
@
text
@d624 2
@


1.65.4.1
log
@* include/cygwin/version.h: Bump API minor number for below export.
* cygwin.din (pututline): New exported function.
* syscalls.cc (login): Use pututiline().
(setutent): Open utmp as read/write.
(endutent): Check if utmp file is open.
(utmpname): call endutent() to close current utmp file.
(getutid): Enable all cases, use strncmp() to compare ut_id fields.
(pututline): New.
* tty.cc (create_tty_master): Set ut_pid to current pid.
* fhandler.h (fhandler_serial::vmin_): Declare as size_t.
* fhandler_serial.cc (fhandler_serial::raw_read): Use correct type for
minchars.
(fhandler_serial::ioctl): Set errno if the ClearCommError fails.
(fhandler_serial::tcsetattr): Use correct value for vmin_.
(fhandler_serial::tcgetattr): Ditto.
* fhandler_socket.cc (fhandler_socket::recvmsg): Call if from == NULL
WSARecvFrom with fromlen = NULL.
@
text
@a623 2
pututline
_pututline = pututline
@


1.64
log
@Rename _kill() to kill() throughout.  Rename _raise() to raise() throughout.
Rename _pid() to pid() throughout.
* Makefile.in: Compile some objects with -fomit-frame-pointer.
* cygwin.din: Reverse aliasing for _kill.
* syscalls.cc (_getpid_r): New function, implemented for newlib compatibility.
* shared.cc (open_shared): Remove reserving of memory since previous change
eliminate the need for this hack.
@
text
@d113 2
a114 2
_close
close = _close
d220 2
a221 2
_fcntl
fcntl = _fcntl
d537 2
a538 2
_lseek
lseek = _lseek
d596 2
a597 2
_open
open = _open
d635 2
a636 2
_read
read = _read
d655 2
a656 2
_rename
rename = _rename
d896 2
a897 2
_times
times = _times
d924 2
a925 2
_unlink
unlink = _unlink
d959 2
a960 2
_wait
wait = _wait
d969 2
a970 2
_write
write = _write
@


1.63
log
@	* cygwin.din: Revert exporting new wchar functions.
	* include/cygwin/version.h: Change comment for API minor 62.
@
text
@d488 2
a489 2
_kill
kill = _kill
@


1.62
log
@	Sigh, mbsrtowcs was still missing...
@
text
@a1033 52
wcscat
_wcscat = wcscat
wcschr
_wcschr = wcschr
wcscpy
_wcscpy = wcscpy
wcscspn
_wcscspn = wcscspn
wcslcat
_wcslcat = wcslcat
wcslcpy
_wcslcpy = wcslcpy
wcsncat
_wcsncat = wcsncat
wcsncmp
_wcsncmp = wcsncmp
wcsncpy
_wcsncpy = wcsncpy
wcspbrk
_wcspbrk = wcspbrk
wcsrchr
_wcsrchr = wcsrchr
wcsspn
_wcsspn = wcsspn
wcsstr
_wcsstr = wcsstr
wmemchr
_wmemchr = wmemchr
wmemcmp
_wmemcmp = wmemcmp
wmemcpy
_wmemcpy = wmemcpy
wmemmove
_wmemmove = wmemmove
wmemset
_wmemset = wmemset
btowc
_btowc = btowc
wctob
_wctob = wctob
mbsinit
_mbsinit = mbsinit
mbrlen
_mbrlen = mbrlen
mbrtowc
_mbrtowc = mbrtowc
mbsrtowcs
_mbsrtowcs = mbsrtowcs
wcrtomb
_wcrtomb = wcrtomb
wcsrtombs
_wcsrtombs = wcsrtombs
@


1.61
log
@	* cygwin.din: Add more prototypes for new wchar functions in newlib.
@
text
@d1080 2
@


1.60
log
@	* cygwin.din: Add prototypes for new wchar functions in newlib.
	* include/cygwin/version.h: Bump API minor number.
@
text
@d1070 14
@


1.59
log
@	* cygwin.din: Export getc_unlocked, getchar_unlocked,
	putc_unlocked, putchar_unlocked functions.
	* include/cygwin/version.h: Bump api minor.
@
text
@d1034 36
@


1.58
log
@* perthread.h (vfork_save): Add ctty, sid, pgid, exitval fields.
(vfork_save::restore_pid): New method.
(vfork_save::restore_exit): New method.
* fork.cc (vfork): Save ctty, sid, pgid and restore them when returning to
"parent".  Use exitval field if exiting but never created a new process.
* syscalls.cc (setsid): Detect when in "vfork" and force an actual fork so that
pid will be allocated (UGLY!).
(getsid): New function.
* dcrt0.cc (do_exit): Use vfork_save::restore_exit method for returning from a
vfork.
* spawn.cc (spawnve): Use vfork_save::{restore_pid,restore_exit} methods for
returning from vfork.
* cygwin.din: Export getsid.
* include/cygwin/version.h: Bump api minor number.
* malloc.cc: #ifdef sYSTRIm for when MORECORE_CANNOT_TRIM is true.
@
text
@d349 2
d353 2
d616 2
d620 2
@


1.57
log
@* Makefile.in: Add support for new malloc.o and renamed malloc_wrapper.o.  Use
-fomit-frame-pointer for malloc.o compilation.
* malloc_wrapper.cc: New file.  Rename from malloc.cc.  Add support for more
malloc functions.  Eliminate export_* calls.  Just use straight malloc names.
Remove unused argument from malloc lock functions.
* cygwin.din: Just export straight malloc names.  Add malloc_stats,
malloc_trim, malloc_usable_size, mallopt, memalign, valloc.
* dcrt0.cc (__cygwin_user): Eliminate export_* malloc entries.
* fork.cc (fork_parent): Remove unused argument from malloc_lock argument.
* malloc.cc: New file.  Doug Lea's malloc v2.7.1.
* cygmalloc.h: New file.
* include/cygwin/version.h: Bump API_MINOR.
* sync.h (muto::acquire): Use appropriate number for regparm attribute.
(muto::reset): Ditto.
(muto::release): Ditto.
@
text
@d397 1
@


1.56
log
@	* security.cc: Change some formatting.
	* include/cygwin/version.h: Bump API minor version.

        * cygheap.h (class cygheap_user): Add member groups.
        * security.h (class cygsidlist): Add members type and maxcount,
        methods position, addfromgr, alloc_sids and free_sids and
        operator+= (const PSID psid). Modify contains () to call
        position () and optimize add () to use maxcount.
        (class user_groups): Create.
        Update declarations of verify_token and create_token.
        * security.cc (cygsidlist::alloc_sids): New.
        (cygsidlist::free_sids): New.
        (get_token_group_sidlist): Create from get_group_sidlist.
        (get_initgroups_sidlist): Create from get_group_sidlist.
        (get_group_sidlist): Suppress.
        (get_setgroups_sidlist): Create.
        (verify_token): Modify arguments. Add setgroups case.
        (create_token): Modify arguments. Call get_initgroups_sidlist and
        get_setgroups_sidlist as needed. Set SE_GROUP_LOGON_ID from auth_pos
        outside of the loop. Rename the various group sid lists consistently.
        * syscalls.cc (seteuid32): Modify to use cygheap->user.groups.
        (setegid32): Call cygheap->user.groups.update_pgrp.
        * grp.cc (setgroups): Create.
        (setgroups32): Create.
        * uinfo.cc (internal_getlogin): Initialize and update user.groups.pgsid.
        * cygwin.din: Add setgroups and setgroups32.
@
text
@d87 2
a88 2
calloc = export_calloc
_calloc = export_calloc
d299 2
a300 2
free = export_free
_free = export_free
d538 6
a543 2
malloc = export_malloc
_malloc = export_malloc
d552 1
d634 2
a635 2
realloc = export_realloc
_realloc = export_realloc
d925 1
@


1.55
log
@	* cygwin.din (fcloseall): Add symbol for export.
	(fcloseall_r): Ditto.
@
text
@d681 3
@


1.54
log
@* cygwin.in: Change erroneous entries.
@
text
@d216 4
@


1.53
log
@	* cygwin.din (__fpclassifyd): Add symbol.
	(__fpclassifyf): Ditto.
	(__signbitd): Ditto.
	(__signbitf): Ditto.
@
text
@d618 1
a618 1
read = read
a948 1
barfly = write
@


1.52
log
@* Makefile.in: Ensure that -MD gets added to CFLAGS regardless of CFLAGS
command-line setting.
* cygwin.din: Export sexec* functions as function which returns ENOSYS
(i.e., sexec* is deprecated).
* dtable.cc (dtable::vfork_child_dup): Ensure that impersonation is restored
even on failure.
* exec.cc: Throughout, remove references to sexec* and _spawnve.
* pinfo.h: Remove _spawnve declaration.
* spawn.cc: Rename _spawnve to spawnve and use throughout.
(spawn_guts): Eliminate hToken argument and processing of same.  Just perform
special actions if impersonating.
(spawnve): Rename from _spawnve.
@
text
@d7 2
d11 2
@


1.51
log
@2002-06-10  Robert Collins  <rbtcollins@@hotmail.com>

        * cygwin.din: Add _pthread_cleanup_push and _pthread_cleanup_pop.
        * pthread.cc: Change __pthread_self to pthread::self() thruoghout.
        (_pthread_cleanup_push): New function.
        (_pthread_cleanup_pop): Ditto.
        * thread.cc: Thanks to Thomas Pfaff for the pthread cleanup_push,_pop
        patch, this work is derived from that.
        Change __pthread_self to pthread::self() thruoghout.
        (__pthread_self): Rename to pthread::self.
        (pthread::self): New method.
        (pthread::pthread): Initialize new member.
        (pthread::push_cleanup_handler): New method.
        (pthread::pop_cleanup_handler): New method.
        (pthread::pop_all_cleanup_handlers): New method.
        (__pthread_exit): Pop all cleanup handlers.
        * thread.h (pthread::push_cleanup_handler): Declare.
        (pthread::pop_cleanup_handler): Ditto.
        (pthread::pop_all_cleanup_handlers): Ditto.
        (pthread::self): New static method.
        (__pthread_exit): Give C++ linkage.
        (__pthread_join): Ditto.
        (__pthread_detach): Ditto.
        (__pthread_self): Remove.

2002-04-24  Thomas Pfaff  <tpfaff@@gmx.net>

        * include/pthread.h (__pthread_cleanup_handler): New structure
        (pthread_cleanup_push): Rewritten .
        (pthread_cleanup_pop): Ditto.
        (_pthread_cleanup_push): New prototype.
        (_pthread_cleanup_pop) Ditto.

2002-04-24  Thomas Pfaff  <tpfaff@@gmx.net>

        * thread.cc (thread_init_wrapper): Check if thread is already joined.
        (__pthread_join): Set joiner first.
        (__pthread_detach): Ditto.
@
text
@d1147 8
a1154 8
sexecve
sexecl
sexecle
sexeclp
sexeclpe
sexecv
sexecp
sexecvpe
@


1.50
log
@* cygwin.din: Eliminate some newlib wrappers.
* path.cc (get_devn): Only consider first 99 potential com devices.
(get_device_number): Ditto.
* times.cc (_times): Eliminate.
(_times): Renamed from times().
@
text
@d1189 2
@


1.49
log
@Remove fcntl.h includes throughout.
* fhandler.h: Move fcntl.h include here.
(fhandler_base::set_flags): Accept supplied_bin argument.  Make non-inlined.
* dtable.cc (dtable::init_std_file_from_handle): Just use binmode from pc.
(reset_to_open_binmode): Use set_flags.
* cygwin.din (open): Avoid newlib wrapper.
(read): Ditto.
(unlink): Ditto.
(write): Ditto.
* fhandler.cc (fhandler_base::set_flags): Accept supplied_bin argument.  Make
binmode decisions here.
(fhandler_base::open): Avoid using pc if it is NULL.  Eliminate binmode logic.
Just call set_flags with binmode argument.
(fhandler_base::init): Call set_flags with binmode argument.
* fhandler_clipboard.cc (fhandler_dev_clipboard::open): Ditto.
* fhandler_console.cc (fhandler_console::open): Ditto.
(fhandler_console::init): Force binary on open.
* fhandler_disk_file.cc (fhandler_disk_file::open): Don't set binmode here.
Let it happen in base class.
* fhandler_dsp.cc (fhandler_dev_dsp::open): Force binmode open.  Set return
value appropriately if unable to open.
* fhandler_proc.cc (fhandler_proc::open): Make sure flags are set before
open_status.
* fhandler_process.cc (fhandler_process::open): Ditto.
* fhandler_registry.cc (fhandler_registry::open): Ditto.
* fhandler_random.cc (fhandler_dev_random::fhandler_dev_random): Ditto.
* fhandler_raw.cc (fhandler_dev_raw::open): Force O_BINARY by default.
* fhandler_serial.cc (fhandler_serial::init): Ditto.
* fhandler_tty.cc (fhandler_tty_slave::open): Ditto.
(fhandler_pty_master::open): Ditto.
* fhandler_virtual.cc (fhandler_virtual::open): Ditto.
* fhandler_windows.cc (fhandler_windows::open): Ditto.
* fhandler_zero.cc (fhandler_dev_zero::open): Ditto.
* net.cc (fdsock): Ditto.
* path.cc (path_conv::check): Avoid checking for extension when error or
directory.
(set_flags): Set PATH_TEXT explicitly, when appropriate.
(mount_info::conv_to_win32_path): Use set_flags() to set path flags.
* path.h (PATH_TEXT): New enum.
(path_conv::binmode): Return appropriate constant based on binmode.
* pipe.cc (make_pipe): Set binmode to O_TEXT xor O_BINARY.
* syscalls.cc (setmode_helper): Make debugging message a little clearer.
(setmode): Set binmode via set_flags.
@
text
@d109 2
a110 2
close
_close = close
d212 2
a213 2
fcntl
_fcntl = fcntl
d307 2
a308 2
fstat
_fstat = fstat
d475 2
a476 2
kill
_kill = kill
d524 2
a525 2
lseek
_lseek = lseek
d633 2
a634 2
rename
_rename = rename
d767 2
a768 2
stat
_stat = stat
d871 2
a872 2
times
_times = times
d933 2
a934 2
wait
_wait = wait
@


1.48
log
@	Change internal uid datatype from __uid16_t to __uid32_t
	throughout.
	* cygwin.din: Export new symbols getpwuid32, getpwuid_r32, getuid32,
	geteuid32, setuid32, seteuid32.
	* passwd.cc (getpwuid32): New function.
	(getpwuid_r32): Ditto.
	* syscalls.cc (seteuid32): Ditto.
	(setuid32): Ditto.
	* uinfo.cc (getuid32): Ditto.
	(geteuid32): Ditto.
	* winsup.h (uid16touid32): New macro, correclt casting from __uid16_t
	to __uid32_t.
	(gid16togid32): Ditto fir gids.
	(getuid32): Declare.
	(geteuid32): Ditto.
	(getpwuid32): Ditto.
	* include/sys/cygwin.h (struct external_pinfo): Add members uid32 and
	gid32.
@
text
@d578 2
a579 2
open
_open = open
d613 2
a614 2
read
_read = read
d899 2
a900 2
unlink
_unlink = unlink
d943 2
a944 2
write
_write = write
@


1.47
log
@	Change internal gid datatype from __gid16_t to __gid32_t
	throughout.
	* cygwin.din: Export new symbols chown32, fchown32, getegid32,
	getgid32, getgrgid32, getgrnam32, getgroups32, initgroups32, lchown32,
	setgid32, setegid32, getgrent32.
	* grp.cc (grp32togrp16): New static function.
	(getgrgid32): New function.
	(getgrnam32): Ditto.
	(getgrent32): Ditto.
	(getgroups32): Change name of internal function from getgroups.
	(getgroups32): New function.
	(initgroups32): Ditto.
	* syscalls.cc (chown32): Ditto.
	(lchown32): Ditto.
	(fchown32): Ditto.
	(setegid32): Ditto.
	(setgid32): Ditto.
	* uinfo.cc (getgid32): Ditto.
	(getegid32): Ditto.
	* include/cygwin/grp.h: Remove declaration of getgrgid() and getgrnam().
	Declare getgrgid32() and getgrnam32() instead.  Declare getgid32().
@
text
@d352 1
d393 1
d687 1
d693 1
d1026 1
d1028 1
@


1.46
log
@* cygwin.din: Add strlcat and strlcpy.
* include/cygwin/version.h: Increment API minor version number.
@
text
@d103 1
d209 1
d349 1
d354 1
d357 1
d360 1
d363 1
d422 1
d479 1
d670 1
d687 1
d1027 1
@


1.45
log
@* cygwin.din: Add strptime.
* include/cygwin/version.h: Increment API version number.
@
text
@d970 4
@


1.44
log
@	* cygwin.din (fstat64): New symbol.
	(ftruncate64): Ditto.
	(lseek64): Ditto.
	(lstat64): Ditto.
	(mmap64): Ditto.
	(seekdir64): Ditto.
	(stat64): Ditto.
	(telldir64): Ditto.
	(truncate64): Ditto.
	* dir.cc (telldir64): New function.
	(telldir): Call telldir64().
	(seekdir64): New function.
	(seekdir): Call seekdir64().
	* fhandler.h: Redefine all methods using __off32_t to use __off64_t.
	* fhandler.cc: Use __off64_t and struct __stat64 throughout.
	* fhandler_clipboard.cc: Ditto.
	* fhandler_disk_file.cc: Ditto.
	* fhandler_dsp.cc: Ditto.
	* fhandler_floppy.cc: Ditto.
	* fhandler_mem.cc: Ditto.
	* fhandler_random.cc: Ditto.
	* fhandler_socket.cc: Ditto.
	* fhandler_tape.cc: Ditto.
	* fhandler_zero.cc: Ditto.
	* pipe.cc: Ditto.
	* glob.c: Ditto, call lstat64 and stat64 in Cygwin.
	* mmap.cc: Use __off64_t throughout.
	(mmap64): New function.
	* sec_acl.cc (acl_worker): Use struct __stat64, call stat64 and lstat64.
	* syscalls.cc (lseek64): New function.
	(stat64_to_stat32): Ditto.
	(fstat64): Ditto.
	(stat64): Ditto.
	(lstat64): Ditto.
	(ftruncate64): Ditto.
	(truncate64): Ditto.
	(_fstat): Call fstat64.
	(_stat): Call stat64.
	(cygwin_lstat): Rename to avoid declaration problem.  Call lstat64.
	(stat_worker): Use struct __stat64.
	(access): Ditto.
	(ftruncate): Call ftruncate64.
	(truncate): Call truncate64.
	* wincap.cc: Set flag has_64bit_file_access appropriately.
	* wincap.h: Add flag has_64bit_file_access.
	* winsup.h (ILLEGAL_SEEK): Define as __off64_t.
	(stat_dev): Declare using struct __stat64.
	(stat_worker): Ditto.
	* include/cygwin/stat.h (struct __stat32): Define if compiling Cygwin.
	(struct __stat64): Ditto.
	(struct stat): Revert definition with explicitly sized datatypes.
	Eliminate sized field names.
	* include/cygwin/types.h (blksize_t): New type.
	(__blkcnt32_t): Ditto.
	(__blkcnt64_t): Ditto.
	(blkcnt_t): Ditto.
@
text
@d970 2
@


1.43
log
@        * cygwin.din: Add recvmsg and sendmsg.
        * net.cc: Add cygwin_recvmsg and cygwin_sendmsg.
        * /usr/include/sys/socket.h: Add recvmsg and sendmsg.
@
text
@d307 1
d322 1
d515 4
a518 2
lstat
_lstat = lstat
d551 1
d654 1
d754 1
d851 1
d871 1
@


1.42
log
@	* Makefile.in: Add fnmatch.o to DLL_OFILES.
	* cygwin.din: Add fnmatch export symbol.
	* fnmatch.c: New file.
	* include/fnmatch.h: Ditto.
	* include/cygwin/version.h: Bump API minor version to 50.
@
text
@d1039 2
@


1.41
log
@	* cygwin.din: Add symbols for endutent(), getutent(), getutid(),
	getutline(), setutent() and utmpname().
	* syscalls.cc (setutent): New function.
	(endutent): Ditto.
	(utmpname): Ditto.
	(getutent): Ditto.
	(getutid): Ditto.
	(getutline): Ditto.
	* include/cygwin/version.h: Bump API minor version.
@
text
@d266 2
@


1.40
log
@* Makefile.in (VPATH): Add regex directory.
(NM): new variable.
(OBSOLETE_FUNCTIONS): Ditto.
(NEW_FUNCTIONS): Ditto.
(install-headers): Install regex.h.
(install-man): New target.
(install): Use new target.
(DLL_OFILES): Add v8_reg* stuff.
(new-cygwin1.dll): Eliminate stamp-cygwin-lib creation.
(libcygwin.a): Remove obsolete functions from import lib.  Add new functions.
* configure.in: Detect 'nm' tool.
* configure: Regenerate.
* cygwin.din: Export posix_reg* functions.  Eliminate export of v8 reg*
functions.  This is now handled in object files themselves.
* regex/*: New files.
* regexp/v8_*.c: New files, renamed from non v8_ equivalents.
@
text
@d162 2
d381 6
d671 2
d881 2
@


1.39
log
@* cygwin.din (ualarm): New export.
* dcrt0.cc (_dll_crt0): Add experimental tls storage declaration.
(dll_crt0): Ditto.
* debug.cc (thread_stub): Ditto.
* thread.cc: Minor cleanup.
(__pthread_create): Add experimental tls storage declaration.
* miscfuncs.cc: Define tls index.
* winsup.h: Declare experimental tls storage.
* window.cc (alarm): Use old timer return from setitimer.
(ualarm): New function.
@
text
@d597 4
a600 10
regcomp
_regcomp = regcomp
regexec
_regexec = regexec
regerror
_regerror = regerror
regfree
_regfree = regfree
regsub
_regsub = regsub
d907 1
@


1.38
log
@* cygwin.din: export strtoll and strtoull
@
text
@d861 2
d871 2
a969 2
usleep
_usleep = usleep
@


1.37
log
@* cygwin.din (__argv): Export.
(__argc): Ditto.
(__progname): Ditto.
* include/getopt.h (getopt_long): constify arguments.
* lib/getopt.c: Import new file from NetBSD.
@
text
@d792 2
d796 2
@


1.37.2.1
log
@Tue Sep 25 16:22:00 2001 Robert Collins <rbtcollins@@hotmail.com>

        * autoload.cc: Add dynamic load statement for
	'ImpersonateNamedPipeClient'.
	* Makefile.in: Add new object files, and build
	instructions for cygserver.exe.
	* cygwin.din: Export ftok, shmat, shmctl and shmget.
	* dcrt0.cc: Additional includes for cygserver support.
	(dll_crt0_1): Initialise the cygserver client.
	* fhandler.h (fhandler_tty): New method cygserver_attach_tty.
	* fhandler_tty.cc: Additional includes for cygserver support.
	(fhandler_tty_slave::open): Attempt to use the cygserver when
	obtaining handles from the parent process. On failure or 9x
	use the current method.
	(fhandler_tty_slave::cygserver_attach_tty): New function.
	* fork.cc (fork_child): Fixup shm memory mapped areas.
	* pinfo.h: Declare fixup_shms_after_fork().
	* security.h: Declare alloc_sd().
	* tty.cc: Additonal includes to support cygserver.
	(tty::common_init): Don't allow others to open us if the cygserver is running.
	* winsup.h: Declare cygserver_running.
										CVS: ----------------------------------------------------------------------
@
text
@a1222 4
ftok
shmat
shmctl
shmget
@


1.37.2.2
log
@Sun Sep 30 23:41:00 2001  Robert Collins <rbtcollins@@hotmail.com>

        * Makefile.in: Add cygserver_process.o to cygserver.exe.
        * cygserver.cc: Include signal.h and cygwin_version.h.
        Define debug_printf as a macro.
        Define DEBUG to a value.
        (client_request_attach_tty::serve): Add beginning of process cache support.
        Change from #ifdef DEBUG to work with new DEBUG style.
        (client_request_get_version::serve): Add beginning of process cache support.
        (class server_request): New prototype for support of process cache.
        (class queue_process_param): New class to allow request loop threading.
        (class server_request_queue): Add beginning of process cache support.
        Allow request loop threading.
        (request_loop): Thread function for request loops.
        (server_request_queue::process_requests): Initiator for threaded request loops.
        (client_request_shutdown::serve): Add beginning of process cache support.
        (server_request::server_request): Ditto.
        (server_request::process): Use debug_printf. Add beginning of process cache support.
        (server_request_queue::cleanup): Kill off any request loop threads.
        (server_request_queue::add): Add beginning of process cache support.
        (handle_signal): Trigger a shutdown.
        (main): Print out some useful info at startup - version, date time.
        Add process cache support.
        Spawn a separate thread for the transport request loop, thus allowing concurrent
        support for multiple transports.
        * cygserver_client.cc (client_request_get_version::serve): Add process cache support.
        (client_request_attach_tty::serve): Add process cache support.
        (client_request_shutdown::serve): Add process cache support.
        * cygsserver_process.cc: New file with the process cache support.
        * cygserver_shm.cc: Redefine debug_printf to allow conditional output.
        * cygwin.din: Export shmdt().
        * shm.cc: Run indent.
        Update FIXME's.
        (shmdt): New function.
        * include/cygwin/cygserver.h (class client_request): Add process cache support.
        (class client_request_get_version): Ditto.
        (class client_request_shutdown): Ditto.
        (class client_request_attach_tty): Ditto.
        * include/cygwin/cygserver_process.h: New header for process cache support.
@
text
@a1225 1
shmdt
@


1.37.2.3
log
@Merged changes from HEAD
@
text
@a791 2
strtoll
_strtoll = strtoll
a793 2
strtoull
_strtoull = strtoull
@


1.37.2.4
log
@Merged changes from HEAD
@
text
@a161 2
endutent
_endutent = endutent
a378 6
getutent
_getutent = getutent
getutid
_getutid = getutid
getutline
_getutline = getutline
d597 10
a606 4
posix_regcomp
posix_regerror
posix_regexec
posix_regfree
a668 2
setutent
_setutent = setutent
a860 2
ualarm
_ualarm = ualarm
a868 2
usleep
_usleep = usleep
a872 2
utmpname
_utmpname = utmpname
a908 1
barfly = write
d966 2
@


1.37.2.5
log
@Merged changes from HEAD
@
text
@a265 2
fnmatch
_fnmatch = fnmatch
a1036 2
recvmsg = cygwin_recvmsg
sendmsg = cygwin_sendmsg
@


1.37.2.6
log
@Merged changes from HEAD
@
text
@a306 1
fstat64
a320 1
ftruncate64
d513 2
a514 4
lseek64
lstat = cygwin_lstat
_lstat = cygwin_lstat
lstat64
a546 1
mmap64
a648 1
seekdir64
a747 1
stat64
a843 1
telldir64
a862 1
truncate64
@


1.37.2.7
log
@Merged changes from HEAD
@
text
@a102 1
chown32
d108 2
a109 2
_close
close = _close
a207 1
fchown32
d210 2
a211 2
_fcntl
fcntl = _fcntl
d305 2
a306 2
_fstat
fstat = _fstat
a346 1
getegid32
a348 1
geteuid32
a350 1
getgid32
a352 1
getgrgid32
a354 1
getgrnam32
a356 1
getgroups32
a384 1
getuid32
a414 1
initgroups32
d465 2
a466 2
_kill
kill = _kill
a470 1
lchown32
d513 2
a514 2
_lseek
lseek = _lseek
d567 2
a568 2
_open
open = _open
d602 2
a603 2
_read
read = read
d622 2
a623 2
_rename
rename = _rename
a660 1
setgid32
a674 1
seteuid32
a676 1
setegid32
a678 1
setuid32
d752 2
a753 2
_stat
stat = _stat
d856 2
a857 2
_times
times = _times
d884 2
a885 2
_unlink
unlink = _unlink
d918 2
a919 2
_wait
wait = _wait
d928 2
a929 2
_write
write = _write
a969 6
strlcat
_strlcat = strlcat
strlcpy
_strlcpy = strlcpy
strptime
_strptime = strptime
a1004 1
getpwuid32
a1005 1
getpwuid_r32
a1009 1
getgrent32
d1123 8
a1130 8
sexecve = sexecve_is_bad
sexecl = sexecve_is_bad
sexecle = sexecve_is_bad
sexeclp = sexecve_is_bad
sexeclpe = sexecve_is_bad
sexecv = sexecve_is_bad
sexecp = sexecve_is_bad
sexecvpe = sexecve_is_bad
a1164 2
_pthread_cleanup_push
_pthread_cleanup_pop
@


1.37.2.8
log
@Merged changes from HEAD
@
text
@a6 2
__fpclassifyd
__fpclassifyf
a8 2
__signbitd
__signbitf
@


1.37.2.9
log
@	* msg.cc: New file of stub functions, no functionality.
	* sem.cc: Ditto.
	* shm.cc (client_shmmgr::shmctl): Add support for an out shm_info
	buffer for the SHM_INFO command.
	(client_shmmgr::shmget): Use %X to print keys.
	* include/sys/ipc.h: Comment all fields and values.
	(IPC_PRIVATE): Change to be non-negative.
	* include/sys/msg.h: New file with SUSv3 and ipcs(8) interfaces.
	* include/sys/sem.h: Ditto.
	* include/sys/shm.h: Comment all fields and values.
	(struct shm_info): New struct.
	* cygserver_shm.h (client_request_shm::shminfo): Rename.
	(client_request_shm::shm_info): New method.
	(client_request_shm::_parameters.out.hFileMap): Move into union.
	(client_request_shm::_parameters.out.shminfo): Rename.
	(client_request_shm::_parameters.out.shm_info): New field.
	* cygserver_shm.cc (server_shmmgr::_shm_ids): Rename.
	(server_shmmgr::_shm_tot): New field.
	(server_shmmgr::shmctl): Rename `out_shminfo' argument.  Add
	`out_shm_info' argument.  Fill in the `out_shm_info' argument in
	the SHM_INFO command.
	(server_shmmgr::shmget): Check `shmflg' against the mode of
	existing segments as per Stevens 1990, p. 123.
	(server_shmmgr::server_shmmgr): Initialize the new `_shm_tot'
	field.
	(server_shmmgr::new_segment): Set ENOMEM if CreateFileMapping
	fails.  Pass `size' to new_segment.
	(server_shmmgr::new_segment): Add size argument and use it to
	check against and update the new `_shm_tot' field.
	(server_shmmgr::delete_segment): Update the new `_shm_tot' field.
	* cygwin.din: Add the SysV IPC msg and sem interfaces.
	* Makefile.in (DLL_OFILES): Add new DLL object files.
@
text
@a1279 7
msgctl
msgget
msgrcv
msgsnd
semctl
semget
semop
@


1.37.2.10
log
@Merged changes from HEAD
@
text
@d618 1
a618 1
read = _read
d949 1
@


1.37.2.11
log
@Merged changes from HEAD
@
text
@a215 4
fcloseall
_fcloseall = fcloseall
_fcloseall_r
fcloseall_r = _fcloseall_r
@


1.37.2.12
log
@Merged changes from HEAD
@
text
@a680 3
setgroups
_setgroups = setgroups
setgroups32
@


1.37.2.13
log
@Merged changes from HEAD
@
text
@d87 2
a88 2
calloc
_calloc = calloc
d299 2
a300 2
free
_free = free
d538 2
a539 6
malloc
_malloc = malloc
malloc_stats
malloc_trim
malloc_usable_size
mallopt
a547 1
memalign
d629 2
a630 2
realloc
_realloc = realloc
a919 1
valloc
@


1.37.2.14
log
@Merged changes from HEAD
@
text
@a396 1
getsid
@


1.37.2.15
log
@Merged changes from HEAD
@
text
@a348 2
getc_unlocked
_getc_unlocked = getc_unlocked
a350 2
getchar_unlocked
_getchar_unlocked = getchar_unlocked
a611 2
putc_unlocked
_putc_unlocked = putc_unlocked
a613 2
putchar_unlocked
_putchar_unlocked = putchar_unlocked
@


1.37.2.16
log
@Merged changes from HEAD
@
text
@a1033 52
wcscat
_wcscat = wcscat
wcschr
_wcschr = wcschr
wcscpy
_wcscpy = wcscpy
wcscspn
_wcscspn = wcscspn
wcslcat
_wcslcat = wcslcat
wcslcpy
_wcslcpy = wcslcpy
wcsncat
_wcsncat = wcsncat
wcsncmp
_wcsncmp = wcsncmp
wcsncpy
_wcsncpy = wcsncpy
wcspbrk
_wcspbrk = wcspbrk
wcsrchr
_wcsrchr = wcsrchr
wcsspn
_wcsspn = wcsspn
wcsstr
_wcsstr = wcsstr
wmemchr
_wmemchr = wmemchr
wmemcmp
_wmemcmp = wmemcmp
wmemcpy
_wmemcpy = wmemcpy
wmemmove
_wmemmove = wmemmove
wmemset
_wmemset = wmemset
btowc
_btowc = btowc
wctob
_wctob = wctob
mbsinit
_mbsinit = mbsinit
mbrlen
_mbrlen = mbrlen
mbrtowc
_mbrtowc = mbrtowc
mbsrtowcs
_mbsrtowcs = mbsrtowcs
wcrtomb
_wcrtomb = wcrtomb
wcsrtombs
_wcsrtombs = wcsrtombs
@


1.37.2.17
log
@Merged changes from HEAD
@
text
@d1034 52
@


1.36
log
@* cygwin.din: Remove cygwin_getshared.
* shared.cc: Ditto.
* include/cygwin/version.h: Bump API minor number.
* dtable.cc (dtable::build_fhandler): Fix incorrect test for socket.
@
text
@d12 3
@


1.35
log
@* cygwin.din: Add gamm*_r function exports.
@
text
@a1039 2
cygwin_getshared
cygwin32_getshared = cygwin_getshared
@


1.34
log
@        * cygwin.din: Add `dirfd'.
        * dir.cc (dirfd): New function.
        (opendir): Open a directory file descriptor and save it in
        __d_dirent->d_fd.
        (closedir): Close directory file descriptor.
        * include/cygwin/version.h: Bump API minor version to 44.
@
text
@d318 2
d322 2
d464 2
d468 2
@


1.33
log
@* cygwin.din: Export sys_errlist, sys_nerr.
* include/cygwin/version.h: Bump minor version number.
@
text
@d133 2
@


1.32
log
@Christopher Faylor <cgf@@cygnus.com>
* cygwin.din: Export __signgam.
* include/cygwin/version.h: Bump minor version number.
@
text
@d1076 1
d1078 1
@


1.31
log
@forced commit
@
text
@d9 1
@


1.30
log
@         * cygwin.din: Add fchdir symbols.
         * path.cc (chdir): Guard against invalid parameter.
         (fchdir): New function.
         * include/cygwin/version.h: Bump API minor version to 40.
         * uinfo.cc (internal_getlogin): Remove unused variable.
@
text
@@


1.29
log
@* cygwin.din: Export asctime_r, ctime_r, gmtime_r, localtime_r
* include/cygwin/version.h: Bump CYGWIN_VERSION_API_MINOR to 39
@
text
@d194 2
@


1.28
log
@* cygwin.din: Add *scanf and *scan_r functions.
@
text
@d35 2
d124 2
d373 2
d463 2
@


1.27
log
@Throughout, change fdtab references to cygheap->fdtab.
* child_info.h (cygheap_exec_info): Eliminate special fdtab stuff.
* spawn.cc (spawn_guts): Ditto.
* cygheap.cc (cygheap_init): Initialize fdtab, if appropriate.
* cygheap.h (CYGHEAPSIZE): Include size of init_cygheap.
(_cmalloc_entry): Include fdtab here.
* dtable.h (dtable): Declare/define new methods.
* dtable.cc (dtable::vfork_child_fixup): New method.
(dtable::fixup_after_exec): Remove unneeded extra arguments.
* dcrt0.cc (dll_crt0_1): Ditto.
* environ.cc (getwinenv): Use case sensitive comparison.
(winenv): Make a copy of environment cache to avoid realloc problems when
duplicate environment variables exist in the environment.  (From Egor Duda)
* net.cc (cygwin_socket): Revert Apr 14 change.
* include/sys/file.h: Protect against previous X_OK definition.
* passwd.cc: Eliminate passwd_sem throughout.
* security.cc: Ditto.
* cygwin.din: Export New functions.
* passwd.cc (read_etc_passwd): Make race safe.
(getpwuid_r): New function.
(getpwnam_r): New function.
@
text
@d283 2
d617 2
d714 2
d851 4
d857 4
d865 4
@


1.26
log
@* fork.cc (fork_child): Call the __pthread_atforkchild function.
(fork_parent): Call the __pthread_atforkparent function.
* cygwin.din: Export pthread_atfork.
* thread.h (callback): New class.
(MTinterface): Use it.
* thread.cc (__pthread_atforkprepare): New function.
(__pthread_atforkparent): New function.
(__pthread_atforkchild): New function.
(__pthread_atfork): New function.
* pthread.cc (pthread_atfork): New function.
@
text
@d936 1
d939 1
@


1.25
log
@	* configure.in: Remove PTH_ALLOW.
	* cygwin.din: Remove @@PTH_ALLOW@@ prefixes to pthread functions.
	Add new pthread exports.
	* pthread.cc: New wrapper functions for the above new exports.
	* sched.cc (valid_sched_parameters): New function.
	(sched_setparam): Use it.
	(sched_set_thread_priority): New function. Used by pthread_sched*.
	* thread.cc (pthread_key_destructor::InsertAfter): New function.
	(pthread_key_destructor::UnlinkNext): New function.
	(pthread_key_destructor::Next): New function.
	(pthread_key_destructor_list::Insert): New function.
	(pthread_key_destructor_list::Remove): New function.
	(pthread_key_destructor_list::Pop): New function.
	(pthread_key_destructor::pthread_key_destructor): New function.
	(pthread_key_destructor_list::IterateNull): New function.
	(MTinterface::Init): Initialise new member.
	(pthread::pthread): Initialise new members.
	(pthread::create): Copy new attributes. Set the new thread priority.
	(pthread_attr::pthread_attr): Initialise new members.
	(pthread_key::pthread_key): Setup destructor function.
	(pthread_key::~pthread_key): Remove destructor function.
	(pthread_mutexattr::pthread_mutexattr): New function.
	(pthread_mutexattr::~pthread_mutexattr): New function.
	(__pthread_once): New function.
	(__pthread_cleanup): New function.
	(__pthread_cancel): New function.
	(__pthread_setcancelstate): New function.
	(__pthread_setcanceltype): New function.
	(__pthread_testcancel): New function.
	(__pthread_attr_getinheritsched): New function.
	(__pthread_attr_getschedparam): New function.
	(__pthread_attr_getschedpolicy): New function.
	(__pthread_attr_getscope): New function.
	(__pthread_attr_setinheritsched): New function.
	(__pthread_attr_setschedparam): New function.
	(__pthread_attr_setschedpolicy): New function.
	(__pthread_attr_setscope): New function.
	(__pthread_exit): Call any key destructors on thread exit.
	(__pthread_join): Use the embedded attr values.
	(__pthread_detach): Use the embedded attr values.
	(__pthread_getconcurrency): New function.
	(__pthread_getschedparam): New function.
	(__pthread_key_create): Pass the destructor on object creation.
	(__pthread_key_delete): Correct incorrect prototype.
	(__pthread_setconcurrency): New function.
	(__pthread_setschedparam): New function.
	(__pthread_cond_timedwait): Support static mutex initialisers.
	(__pthread_cond_wait): Ditto.
	(__pthread_mutex_getprioceiling): New function.
	(__pthread_mutex_lock): Support static mutex initialisers.
	(__pthread_mutex_trylock): Ditto.
	(__pthread_mutex_unlock): Ditto.
	(__pthread_mutex_destroy): Ditto.
	(__pthread_mutex_setprioceiling): New function.
	(__pthread_mutexattr_getprotocol): New function.
	(__pthread_mutexattr_getpshared): New function.
	(__pthread_mutexattr_gettype): New function.
	(__pthread_mutexattr_init): New function.
	(__pthread_mutexattr_destroy): New function.
	(__pthread_mutexattr_setprotocol): New function.
	(__pthread_mutexattr_setprioceiling): New function.
	(__pthread_mutexattr_getprioceiling): New function.
	(__pthread_mutexattr_setpshared): New function.
	(__pthread_mutexattr_settype): New function.
	Remove stubs for non MT_SAFE compilation.
	* thread.h: Remove duplicate #defines.
	Add prototypes for new functions in thread.cc.
	(pthread_key_destructor): New class.
	(pthread_key_destructor_list): New class.
	(pthread_attr): Add new members.
	(pthread): Remove members that are duplicated in the pthread_attr class.
	(pthread_mutex_attr): Add new members.
	(pthread_once): New class.
	* include/pthread.h: Add prototypes for new functions exported from cygwin1.dll.
	Remove typedefs.
	* include/sched.h: Add prototypes for new functions in sched.cc.
	* include/cygwin/types.h: Add typedefs from pthread.h
@
text
@d1079 1
@


1.24
log
@* Makefile.in: Put -lgcc last in list of libraries, since stdc++ library needs
it.
* cygwin.din: Remove obsolete "__empty" export.
* exceptions.cc (call_signal_handler_now): Force inclusion of function even
when -finline-functions is specified.
* sigproc.h: Remove obsolete call_signal_handler declaration.
* fhandler_console.cc (cp_get_internal): New function.
(cp_convert): New function.
(con_to_str): New function.
(str_to_con): New function.
(fhandler_console::read): Replace OemToCharBuff with con_to_str.
(fhandler_console::write_normal): Replace CharToOemBuff with str_to_con.
@
text
@d501 1
d1079 69
a1147 38
@@PTH_ALLOW@@pthread_create
@@PTH_ALLOW@@pthread_attr_init
@@PTH_ALLOW@@pthread_attr_destroy
@@PTH_ALLOW@@pthread_attr_setstacksize
@@PTH_ALLOW@@pthread_attr_getstacksize
@@PTH_ALLOW@@pthread_exit
@@PTH_ALLOW@@pthread_join
@@PTH_ALLOW@@pthread_detach
@@PTH_ALLOW@@pthread_suspend
@@PTH_ALLOW@@pthread_continue
@@PTH_ALLOW@@pthread_key_create
@@PTH_ALLOW@@pthread_key_delete
@@PTH_ALLOW@@pthread_setspecific
@@PTH_ALLOW@@pthread_getspecific
@@PTH_ALLOW@@pthread_kill
@@PTH_ALLOW@@pthread_sigmask
@@PTH_ALLOW@@pthread_self
@@PTH_ALLOW@@pthread_equal
@@PTH_ALLOW@@pthread_mutex_init
@@PTH_ALLOW@@pthread_mutex_lock
@@PTH_ALLOW@@pthread_mutex_trylock
@@PTH_ALLOW@@pthread_mutex_unlock
@@PTH_ALLOW@@pthread_mutex_destroy
@@PTH_ALLOW@@pthread_cond_init
@@PTH_ALLOW@@pthread_cond_destroy
@@PTH_ALLOW@@pthread_cond_broadcast
@@PTH_ALLOW@@pthread_cond_signal
@@PTH_ALLOW@@pthread_cond_wait
@@PTH_ALLOW@@pthread_cond_timedwait
@@PTH_ALLOW@@pthread_condattr_init
@@PTH_ALLOW@@pthread_condattr_destroy
@@PTH_ALLOW@@pthread_condattr_getpshared
@@PTH_ALLOW@@pthread_condattr_setpshared
@@PTH_ALLOW@@sem_init
@@PTH_ALLOW@@sem_destroy
@@PTH_ALLOW@@sem_wait
@@PTH_ALLOW@@sem_trywait
@@PTH_ALLOW@@sem_post
@


1.23
log
@add missing stuff.
@
text
@a940 1
__empty
@


1.22
log
@* cygwin.din: Export the new functions.
* pthread.cc (pthread_cond_*): Add wrapper functions that call __pthread_cond*
functions.
* thread.cc (__pthread_cond_*): Implement the pthread_cond* functions.
* thread.h: Add new class entries and prototypes for __pthread_cond* functions.
* include/pthread.h: user land header prototypes for pthread_cond* functions
and related defines.
@
text
@d1117 8
@


1.21
log
@* dlopen.c (dlopen): Return NULL when name is NULL (suggested by
chrisiasci@@aol.com).
* cygwin.din: Add a new, internally used export - _check_for_executable.
* dcrt0.cc (dll_crt0_1): Set _check_for_executable for older binaries.  Pass
user_data to premain functions.
* fhandler.cc (fhandler_disk_file::open): Only check for executable if the
linked program is intereested in the executable bit.
(fhandler_disk_file::check_execable_p): Delete.
* fhandler.h (executable_states): New enumeration of various states of
executable bit caring.
(fhandler_base::set_execable_p): New method.
* fhandler_termios.cc (fhandler_termios::line_edit): Flag when a signal has
been sent to the tty.  Return -1 when this is so.
* fhandler_console.cc (fhandler_console::read): Return -1 when signal sending
character encountered.
* path.cc (path_conv::check): Record when path refers to a disk device.  Move
executable extension check here.
(check_sysfile): Accomodate new EXEC path states.
(has_suffix): Remove.
(next_suffix): Remove.
(class suffix_scan): New clas.
(suffix_scan::has): New method.
(suffix_scan:next): New method.
(symlink_info::check): Use suffix_scan method to control for scanning for
suffixes.
* path.h (path_conv::exec_state): New method.
* perprocess.h: Make "C" friendly.
* include/cygwin/version.h: Define CYGWIN_VERSION_CHECK_FOR_S_IEXEC.  Bump
CYGWIN_VERSION_API_MINOR.
* include/sys/cygwin.h: Change premain declarations.
* winsup.h: Move __cplusplus test to after builtin defines.
@
text
@d1102 10
@


1.20
log
@* cygwin.din: Export rand48 functions.
* thread.cc (MTinterface::Init): Remove the initialization of `reent_data'.
* dcrt0.cc: Add the initalizer to the declaration of `reent_data'.
* include/cygwin/version.h: Bump CYGWIN_VERSION_API_MINOR to 35.
@
text
@d11 1
@


1.19
log
@* cygwin.din: Add export for setlogmask().
* syslog.cc (setlogmask): New function.
@
text
@d869 18
@


1.18
log
@        * cygwin.din: Add symbols for `getrlimit' and `setrlimit'.
        * exceptions.cc (stackdump): Avoid creating stackdump when
        `rlim_core' is 0.
        * resource.cc: New global variable `rlim_core'.
        (getrlimit): New function.
        (setrlimit): Ditto.
        include/cygwin/version.h: Bump minor API version to 32 due to
        adding `getrlimit' and `setrlimit'.
        include/sys/resource.h: Add defines, types and prototypes for
        `getrlimit' and `setrlimit'.
@
text
@d975 1
@


1.17
log
@        * cygwin.din: Declare strtok_r for the import lib. Already in the DLL.
@
text
@d350 2
d627 2
@


1.16
log
@        * net.cc (cygwin_inet_aton): New function.
        * cygwin.din: Export cygwin_inet_aton as inet_aton.
@
text
@d752 2
@


1.15
log
@        * cygwin.din: Add symbol hstrerror.
        * net.cc: Change meaning of member `s' of struct host_errmap.
        (set_host_errno): Fix error in loop condition.
        (hstrerror): Ditto.
        (herror): Add appropriate functionality.
        * include/netdb.h: Add declaration of hstrerror.
        * include/cygwin/version.h: Bump CYGWIN_VERSION_API_MINOR to 29.
@
text
@d952 1
@


1.14
log
@* include/cygwin/version.h: Bump DLL minor version number to 5 due to all of
the changes below.  Redefine process structure to avoid a fixed size table.
Redefine pinfo/_pinfo classes.  Use these throughout.
* dcrt0.cc (dll_crt0_1): Accomodate set_myself argument change.
(__api_fatal): Accomodate _pinfo::record_death argument change.
* exceptions.cc (really_exit): Ditto.
(sig_handle_tty_stop): Use pinfo constructor to access process info.
(events_init): Don't create pinfo_mutex since it is no longer required.
* external.cc (fillout_pinfo): Use winpids class to iterate over all system
pids.
(cygwin_internal): lock_pinfo_for_update and unlock_pinfo are now noops.
* fhandler_termios.cc (fhandler_termios::set_ctty): Use pinfo constructor to
access process info.
* fork.cc (fork): Reorganize to initialize child info after the child has
started since that is when we know the child's winpid, which is necessary to
allocate the pinfo shared memory.
* mmap.cc (recreate_mmaps_after_fork): Change arg type to _pinfo.
* pinfo.cc: Rename pinfo methods to _pinfo throughout.  Eliminate pinfo_list
stuff.
(set_myself): Accept a pid argument now.  Call pinfo initializer to initialize
myself.  Detect when this is an "execed" process and create an "indirect" pid
block.
(pinfo_init): Accomodate set_myself arg change.
(procinfo): Remove.
(pinfo::lock_pinfo): Remove.
(pinfo::unlock_pinfo): Remove.
(pinfo::init): New method.  Allocates shared memory space for process pinfo
structure.
(pinfo::record_death): Don't call locking functions.
(cygwin_winpid_to_pid): Simplify by using new pinfo constructor.
(EnumProcessesW95): New function for iterating over processes on Windows 95.
(winpids::winpids): New constructor for winpids class.  Sets up a list of
process ids.
(enum_init): Initialize w95/wnt pid enumerators.
* shared.cc (shared-info::initialize): Remove pid initialization.
* shared.h: Move pinfo stuff into pinfo.h.
(class shared_info): Remove pinfo_list element.
* signal.cc (kill_worker): Use pinfo constructor to access process info.
(kill_pgrp): Ditto.  Use winpids methods to access list of processes.
* sigproc.cc: Throughout, modify to use _pinfo where appropriate.
(proc_exists (pid_t)): New function.  Determines if a process exists based on
the pid.
(proc_exists (_pinfo *p): Use new proc_exists function above.
(proc_subproc): Copy pinfo stuff around rather than _pinfo pointers.  Try to be
careful about releasing shared memory when we don't need it anymore.  Remove
pinfo locks.
(remove_zombies): Remove pinfo memory when zombie is going away.
* sigproc.h: Reflect _pinfo/pinfo changes in sigproc.cc.
* spawn.cc (spawn_guts): Eliminate pinfo *child argument.  Reorganize to only
initialize child pinfo after process has been started and we know the windows
pid.
(_spawnve): Reflect spawn_guts changes.
* syscalls.cc (setpgid): Use pinfo constructor to access process info.
(getpgid): Ditto.
(internal_getlogin): Use _pinfo.
* winsup.h: Eliminate pinfo_mutex.  Eliminate spawn_guts declaration since it
is static now.  Reflect set_myself argument change.
* include/sys/cygwin.h: Add some PID_* enums to accomodate new pinfo stuff.
* include/cygwin/version.h: Update minor version for cygdrive changes below.
@
text
@d928 1
@


1.13
log
@* cygwin.din: Export _getmode and getmode to allow querying of binary state of
an fd.
* external.cc (cygwin_internal): Add handling of perfile_table setting.
* fhandler.cc (perfile_table): New global.
(fhandler_base::get_default_fmode): New method to return a file's default mode
based on its name.
(fhandler_base::open): Use get_default_mode method to determine a file's mode.
Record file mode in file flags.
* fhandler.h (fhandler_base): Declare get_default_fmode
* syscalls.cc (getmode): New function.
* sys/cygwin.h (__cygwin_perfile): New structure.
(cygwin_getinfo_types): Move outside of WINVER conditional.
(per_process): Move inside of WINVER conditional.
@
text
@d11 1
a11 1
__vc__10pinfo_listi
@


1.12
log
@        * poll.cc: New file. Implement `poll' system call.
        * include/poll.h: Ditto.
        * include/sys/poll.h: Ditto.
        * Makefile.in: Add poll.o as dependency.
        * cygwin.din: Add poll and _poll symbols.
@
text
@d338 2
@


1.11
log
@* dcrt0.cc (_dll_crt0): Renamed from dll_crt0 ().
* winsup.h: Accomodate above change.
* cygwin.din: Ditto.
* lib/cygwin_crt0.c: Ditto.
@
text
@d530 2
@


1.10
log
@* Makefile.in: Use variables rather than configure constructs where
appropriate.
(LIBCOS): Find additional stub library stuff in their own subdirectory.
* dcrt0.cc: Convert user_data pointer to static __cygwin_user_data area.
(do_global_ctors): Check magic_bisquit for initialization.
(dll_crt0_1): First group of premain functions prior to fd initialization.  Run
second group before calling main.
(dll_crt0 ()): New function, called from new initialization code.
(dll_crt0 (per_process *uptr)): Call new dll_crt0 () function on
initialization.
* debug.cc (thread_stub): Initialize bottom of stack with per-thread info.
* environ.cc (parse_thing): Use binmode global to control CYGWIN=binmode
behavior.
* fhandler.cc (fhandler_base::open): Allow explicit setting of __fmode to
O_BINARY or O_TEXT to override disk mount settings.
* libcmain.cc: Move to lib subdirectory.
* libccrt0.cc: Ditto.
* dll_main.cc: Ditto.
* dll_entry.cc: Ditto.
* getopt.c: Ditto.
* thread.cc (thread_init_wrapper): Call ExitThread explicitly rather than
returning, as a preliminary step towards placing per thread info at the bottom
of the stack.
* winsup.h: Move per_process class to include/sys/cygwin.h.  Declare new
dll_crt0().
* include/cygwin/version.h: Bump API minor version.
* binmode.c: New file.
* textmode.c: Ditto.
* lib/_cygwin_crt0_common.cc: Ditto.
* lib/crt0.h: Ditto.
* lib/cygwin_attach_dll.c: Ditto.
* lib/cygwin_crt0.c: Ditto.
* lib/dll_entry.cc: Ditto.
* lib/dll_main.cc: Ditto.
* lib/getopt.c: Ditto.
* lib/libcmain.c: Ditto.
* lib/premain0.c: Ditto.
* lib/premain1.c: Ditto.
* lib/premain2.c: Ditto.
* lib/premain3.c: Ditto.
@
text
@d127 1
a127 1
dll_crt0@@0
@


1.9
log
@        * cygwin.din: Define symbols for `cygwin_logon_user' and
        `cygwin_set_impersonation_token'.
        * dcrt0.cc (dll_crt0_1): Eliminate superfluous conditional
        statements.
        Add load statements for `ImpersonateLoggedOnUser', `LogonUserA'
        and `RevertToSelf'.
        * fork.cc (fork): Care for correct impersonation of parent
        and child process.
        * security.cc (cygwin_set_impersonation_token): New function.
        (cygwin_logon_user): Ditto.
        shared.h (class pinfo): New members `orig_uid', `orig_gid',
        `real_uid' nad `real_gid'.
        spawn.cc (spawn_guts): Care for impersonation when starting
        child process in a different user context.
        * syscalls.cc (setgid): Call `setegid' now. Set real_gid.
        (setuid): Call `seteuid' now. Set real_uid.
        (seteuid): Functionality moved from setuid to here. Care for
        correct impersonation.
        (setegid): Functionality moved from setgid to here.
        * uinfo.cc (uinfo_init): Initialization of additional pinfo
        members.
        (getuid): Return real uid.
        (getgid): Return real gid.
        (geteuid): Return effective uid.
        (getegid): Return effective gid.
        include/sys/cygwin.h: Add prototypes for `cygwin_logon_user' and
        `cygwin_set_impersonation_token'.
        include/cygwin/version.h: Bumb API minor version to 22.
@
text
@d127 1
d1010 1
@


1.8
log
@* cygwin.din: add cygwin_dll_init
* dcrt0.cc (cygwin_dll_init): new
(dll_crt0_1): short circuit if manually loaded
* path.cc (mount_info::init): don't init if manually loaded
@
text
@d991 2
@


1.7
log
@* cygwin.din: insure that regsub() is included in
cygwin1.dll
@
text
@d128 1
@


1.6
log
@* net.cc (cygwin_inet_network): new function.
* cygwin.din (inet_network): new export
@
text
@d569 2
@


1.5
log
@	* cygwin.din: Add symbol for `lacl'.
	* security.cc (ReadSD): Add debug output.
	(acl_worker):  New static function.
	(acl): Call acl_worker now.
	(lacl): New function.
	(facl): Call acl_worker now.
	* include/cygwin/acl.h: Add prototype for `lacl'.
@
text
@d922 1
@


1.4
log
@        * newlib/libc/include/sys/unistd.h: Add prototypes for
        fchmod, fchown, lchown.
        * winsup/cygwin/syscalls.cc (chown_worker): Use previous
        uid/gid if new uid/gid is -1.
        New static function with chown functionality.
        (chown): Call chown_worker with SYMLINK_FOLLOW.
        (fchown): New function. Call chown_worker with SYMLINK_FOLLOW.
        (lchown): New function. Call chown_worker with SYMLINK_IGNORE.
        * cygwin.din: Add symbols for fchown, lchown.
        * path.cc (symlink): Call `set_file_attribute()' and
        `SetFileAttributeA()' instead of `chmod()' to set
        uid/gid correct.
@
text
@d1071 2
@


1.3
log
@Throughout use strace class in place of individual functions and variables.
* cygwin.din: Eliminate _strace_wm.
* sigproc.cc (wait_sig): Temporarily add more debugging output.
* include/cygwin/version.h: Bump minor api to reflect export change.
@
text
@d189 2
d430 2
@


1.2
log
@Update.
@
text
@a13 1
_strace_wm
@


1.1
log
@Initial revision
@
text
@d184 4
d206 4
d212 4
d232 12
d257 4
d289 4
@


1.1.1.1
log
@import winsup-2000-02-17 snapshot
@
text
@@
