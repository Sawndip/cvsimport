head	1.4;
access;
symbols
	binutils-2_24-branch:1.4.0.4
	binutils-2_24-branchpoint:1.4
	binutils-2_21_1:1.2
	binutils-2_23_2:1.4
	binutils-2_23_1:1.4
	binutils-2_23:1.4
	binutils-2_23-branch:1.4.0.2
	binutils-2_23-branchpoint:1.4
	binutils-2_22_branch:1.2.0.44
	binutils-2_22:1.2
	binutils-2_22-branch:1.2.0.42
	binutils-2_22-branchpoint:1.2
	binutils-2_21:1.2
	binutils-2_21-branch:1.2.0.40
	binutils-2_21-branchpoint:1.2
	binutils-2_20_1:1.2
	binutils-2_20:1.2
	binutils-arc-20081103-branch:1.2.0.38
	binutils-arc-20081103-branchpoint:1.2
	binutils-2_20-branch:1.2.0.36
	binutils-2_20-branchpoint:1.2
	dje-cgen-play1-branch:1.2.0.34
	dje-cgen-play1-branchpoint:1.2
	arc-20081103-branch:1.2.0.32
	arc-20081103-branchpoint:1.2
	binutils-2_19_1:1.2
	binutils-2_19:1.2
	binutils-2_19-branch:1.2.0.30
	binutils-2_19-branchpoint:1.2
	binutils-2_18:1.2
	binutils-2_18-branch:1.2.0.28
	binutils-2_18-branchpoint:1.2
	binutils-csl-coldfire-4_1-32:1.2
	binutils-csl-sourcerygxx-4_1-32:1.2
	binutils-csl-innovasic-fido-3_4_4-33:1.2
	binutils-csl-sourcerygxx-3_4_4-32:1.2
	binutils-csl-coldfire-4_1-30:1.2
	binutils-csl-sourcerygxx-4_1-30:1.2
	binutils-csl-coldfire-4_1-28:1.2
	binutils-csl-sourcerygxx-4_1-29:1.2
	binutils-csl-sourcerygxx-4_1-28:1.2
	binutils-csl-arm-2006q3-27:1.2
	binutils-csl-sourcerygxx-4_1-27:1.2
	binutils-csl-arm-2006q3-26:1.2
	binutils-csl-sourcerygxx-4_1-26:1.2
	binutils-csl-sourcerygxx-4_1-25:1.2
	binutils-csl-sourcerygxx-4_1-24:1.2
	binutils-csl-sourcerygxx-4_1-23:1.2
	binutils-csl-sourcerygxx-4_1-21:1.2
	binutils-csl-arm-2006q3-21:1.2
	binutils-csl-sourcerygxx-4_1-22:1.2
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.2
	binutils-csl-sourcerygxx-4_1-20:1.2
	binutils-csl-arm-2006q3-19:1.2
	binutils-csl-sourcerygxx-4_1-19:1.2
	binutils-csl-sourcerygxx-4_1-18:1.2
	binutils-csl-renesas-4_1-9:1.2
	binutils-csl-sourcerygxx-3_4_4-25:1.2
	binutils-csl-renesas-4_1-8:1.2
	binutils-csl-renesas-4_1-7:1.2
	binutils-csl-renesas-4_1-6:1.2
	binutils-csl-sourcerygxx-4_1-17:1.2
	binutils-csl-sourcerygxx-4_1-14:1.2
	binutils-csl-sourcerygxx-4_1-15:1.2
	binutils-csl-sourcerygxx-4_1-13:1.2
	binutils-2_17:1.2
	binutils-csl-sourcerygxx-4_1-12:1.2
	binutils-csl-sourcerygxx-3_4_4-21:1.2
	binutils-csl-wrs-linux-3_4_4-24:1.2
	binutils-csl-wrs-linux-3_4_4-23:1.2
	binutils-csl-sourcerygxx-4_1-9:1.2
	binutils-csl-sourcerygxx-4_1-8:1.2
	binutils-csl-sourcerygxx-4_1-7:1.2
	binutils-csl-arm-2006q1-6:1.2
	binutils-csl-sourcerygxx-4_1-6:1.2
	binutils-csl-wrs-linux-3_4_4-22:1.2
	binutils-csl-coldfire-4_1-11:1.2
	binutils-csl-sourcerygxx-3_4_4-19:1.2
	binutils-csl-coldfire-4_1-10:1.2
	binutils-csl-sourcerygxx-4_1-5:1.2
	binutils-csl-sourcerygxx-4_1-4:1.2
	binutils-csl-wrs-linux-3_4_4-21:1.2
	binutils-csl-morpho-4_1-4:1.2
	binutils-csl-sourcerygxx-3_4_4-17:1.2
	binutils-csl-wrs-linux-3_4_4-20:1.2
	binutils-2_17-branch:1.2.0.26
	binutils-2_17-branchpoint:1.2
	binutils-csl-2_17-branch:1.2.0.24
	binutils-csl-2_17-branchpoint:1.2
	binutils-csl-gxxpro-3_4-branch:1.2.0.22
	binutils-csl-gxxpro-3_4-branchpoint:1.2
	binutils-2_16_1:1.2
	binutils-csl-arm-2005q1b:1.2
	binutils-2_16:1.2
	binutils-csl-arm-2005q1a:1.2
	binutils-csl-arm-2005q1-branch:1.2.0.20
	binutils-csl-arm-2005q1-branchpoint:1.2
	binutils-2_16-branch:1.2.0.18
	binutils-2_16-branchpoint:1.2
	csl-arm-2004-q3d:1.2
	csl-arm-2004-q3:1.2
	binutils-2_15:1.2
	binutils-2_15-branchpoint:1.2
	csl-arm-2004-q1a:1.2
	csl-arm-2004-q1:1.2
	binutils-2_15-branch:1.2.0.16
	cagney_bfdfile-20040213-branch:1.2.0.14
	cagney_bfdfile-20040213-branchpoint:1.2
	cagney_bigcore-20040122-branch:1.2.0.12
	cagney_bigcore-20040122-branchpoint:1.2
	csl-arm-2003-q4:1.2
	binutils-2_14:1.2
	binutils-2_14-branch:1.2.0.10
	binutils-2_14-branchpoint:1.2
	binutils-2_13_2_1:1.2
	binutils-2_13_2:1.2
	binutils-2_13_1:1.2
	binutils-2_13:1.2
	binutils-2_13-branchpoint:1.2
	binutils-2_13-branch:1.2.0.8
	binutils-2_12_1:1.2
	binutils-2_12:1.2
	binutils-2_12-branch:1.2.0.6
	binutils-2_12-branchpoint:1.2
	cygnus_cvs_20020108_pre:1.2
	binutils-2_11_2:1.2
	binutils-2_11_1:1.2
	binutils-2_11:1.2
	x86_64versiong3:1.2
	binutils-2_11-branch:1.2.0.4
	binutils-2_10_1:1.2
	binutils-2_10:1.2
	binutils-2_10-branch:1.2.0.2
	binutils-2_10-branchpoint:1.2
	binutils_latest_snapshot:1.4
	repo-unification-2000-02-06:1.2
	binu_ss_19990721:1.2
	binu_ss_19990602:1.1.1.1
	binu_ss_19990502:1.1.1.1
	cygnus:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2012.05.14.02.40.00;	author hjl;	state Exp;
branches;
next	1.3;

1.3
date	2012.04.12.16.26.00;	author davem;	state Exp;
branches;
next	1.2;

1.2
date	99.06.10.21.08.04;	author rth;	state Exp;
branches;
next	1.1;

1.1
date	99.05.03.07.28.52;	author rth;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.05.03.07.28.52;	author rth;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Print addend as signed in objdump

binutils/

	* objdump.c (disassemble_bytes): Print addend as signed.
	(dump_reloc_set): Likewise.

gas/testsuite/

	* gas/all/fwdexp.d: Expect addend as signed.
	* gas/alpha/elf-reloc-1.d: Likewise.
	* gas/i386/mixed-mode-reloc64.d: Likewise.
	* gas/i386/reloc64.d: Likewise.
	* gas/i386/ilp32/mixed-mode-reloc64.d: Expect addend as signed.
	* gas/i386/ilp32/reloc64.d: Likewise.
	* gas/ia64/pcrel.d: Likewise.
	* gas/mips/branch-misc-2-64.d: Likewise.
	* gas/mips/branch-misc-2pic-64.d: Likewise.
	* gas/mips/branch-misc-4-64.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/micromips@@branch-misc-2-64.d: Likewise.
	* gas/mips/micromips@@branch-misc-2pic-64.d: Likewise.
	* gas/mips/micromips@@branch-misc-4-64.d: Likewise.
	* gas/mips/mips16-hilo-n32.d: Likewise.
	* gas/ppc/astest.d: Likewise.
	* gas/ppc/astest2.d: Likewise.
	* gas/ppc/astest2_64.d: Likewise.
	* gas/ppc/astest64.d: Likewise.
	* gas/ppc/test1elf32.d: Likewise.
	* gas/ppc/test1elf64.d: Likewise.
	* gas/sparc/reloc64.d: Likewise.
@
text
@#as: -64 -Av9
#objdump: -dr
#name: sparc64 reloc64

.*: +file format .*sparc.*

Disassembly of section .text:

0+ <foo>:
   0:	03 04 8d 15 	sethi  %hi\(0x12345400\), %g1
   4:	82 10 62 78 	or  %g1, 0x278, %g1.*
   8:	01 00 00 00 	nop 
   c:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
			c: R_SPARC_HH22	.text
  10:	82 10 60 00 	mov  %g1, %g1	! 0 <foo>
			10: R_SPARC_HM10	.text
  14:	01 00 00 00 	nop 
  18:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
			18: R_SPARC_HH22	.text\+0x1234567800000000
  1c:	82 10 60 00 	mov  %g1, %g1	! 0 <foo>
			1c: R_SPARC_HM10	.text\+0x1234567800000000
  20:	01 00 00 00 	nop 
  24:	03 3f b7 2e 	sethi  %hi\(0xfedcb800\), %g1
  28:	82 10 62 98 	or  %g1, 0x298, %g1.*
  2c:	05 1d 95 0c 	sethi  %hi\(0x76543000\), %g2
  30:	84 10 62 10 	or  %g1, 0x210, %g2
  34:	01 00 00 00 	nop 
  38:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
			38: R_SPARC_HH22	.text
  3c:	82 10 60 00 	mov  %g1, %g1	! 0 <foo>
			3c: R_SPARC_HM10	.text
  40:	05 00 00 00 	sethi  %hi\((0x|)0\), %g2
			40: R_SPARC_LM22	.text
  44:	84 10 60 00 	mov  %g1, %g2
			44: R_SPARC_LO10	.text
  48:	01 00 00 00 	nop 
  4c:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
			4c: R_SPARC_HH22	.text\-0x123456789abcdf0
  50:	82 10 60 00 	mov  %g1, %g1	! 0 <foo>
			50: R_SPARC_HM10	.text\-0x123456789abcdf0
  54:	05 00 00 00 	sethi  %hi\((0x|)0\), %g2
			54: R_SPARC_LM22	.text\-0x123456789abcdf0
  58:	84 10 60 00 	mov  %g1, %g2
			58: R_SPARC_LO10	.text\-0x123456789abcdf0
  5c:	01 00 00 00 	nop 
  60:	03 2a 61 d9 	sethi  %hi\(0xa9876400\), %g1
  64:	82 10 61 43 	or  %g1, 0x143, %g1.*
  68:	82 10 62 10 	or  %g1, 0x210, %g1
  6c:	01 00 00 00 	nop 
  70:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
			70: R_SPARC_H44	.text
  74:	82 10 60 00 	mov  %g1, %g1	! 0 <foo>
			74: R_SPARC_M44	.text
  78:	82 10 60 00 	mov  %g1, %g1
			78: R_SPARC_L44	.text
  7c:	01 00 00 00 	nop 
  80:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
			80: R_SPARC_H44	.text\+0xa9876543210
  84:	82 10 60 00 	mov  %g1, %g1	! 0 <foo>
			84: R_SPARC_M44	.text\+0xa9876543210
  88:	82 10 60 00 	mov  %g1, %g1
			88: R_SPARC_L44	.text\+0xa9876543210
  8c:	01 00 00 00 	nop 
  90:	03 22 6a f3 	sethi  %hi\(0x89abcc00\), %g1
  94:	82 18 7e 10 	xor  %g1, -496, %g1
  98:	01 00 00 00 	nop 
  9c:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
			9c: R_SPARC_HIX22	.text
  a0:	82 18 60 00 	xor  %g1, 0, %g1
			a0: R_SPARC_LOX10	.text
  a4:	01 00 00 00 	nop 
  a8:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
			a8: R_SPARC_HIX22	.text-0x89abcdf0
  ac:	82 18 60 00 	xor  %g1, 0, %g1
			ac: R_SPARC_LOX10	.text-0x89abcdf0
  b0:	01 00 00 00 	nop 
  b4:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
			b4: R_SPARC_H34	.text\+0xa9876543210
  b8:	83 28 70 02 	sllx  %g1, 2, %g1
  bc:	82 10 60 00 	mov  %g1, %g1
			bc: R_SPARC_L44	.text\+0xa9876543210
  c0:	01 00 00 00 	nop 
@


1.3
log
@Support R_SPARC_WDISP10 and R_SPARC_H34.

include/

	* elf/sparc.h (R_SPARC_WDISP10): New reloc.
	* opcode/sparc.h: Define '=' as generating R_SPARC_WDISP10.

opcodes/

	* sparc-dis.c (X_DISP10): Define.
	(print_insn_sparc): Handle '='.

bfd/

	* reloc.c (BFD_RELOC_SPARC_H34, BFD_RELOC_SPARC_SIZE32,
	BFD_RELOC_SPARC_SIZE64, BFD_RELOC_SPARC_WDISP10): New relocs.
	* libbfd.h: Regenerate.
	* bfd-in2.h: Likewise.
	* elfxx-sparc.c (sparc_elf_wdisp10_reloc): New function.
	(_bfd_sparc_elf_howto_table): Add entries for R_SPARC_H34,
	R_SPARC_SIZE32, R_SPARC_64, and R_SPARC_WDISP10.
	(_bfd_sparc_elf_reloc_type_lookup): Handle new relocs.
	(_bfd_sparc_elf_check_relocs): Likewise.
	(_bfd_sparc_elf_gc_sweep_hook): Likewise.
	(_bfd_sparc_elf_relocate_section): Likewise.

gas/

	* config/tc-sparc.c (sparc_ip): Handle '=', "%h34", "%l34", and
	BFD_RELOC_SPARC_H34.
	(md_apply_fix): Handle BFD_RELOC_SPARC_WDISP10 and BFD_RELOC_SPARC_H34.
	(tc_gen_reloc): Likewise.

gas/testsuite/

	* gas/sparc/reloc64.s: Add abs34 code model tests.
	* gas/sparc/reloc64.d: Update.

elfcpp/

	* sparc.h (R_SPARC_WDISP10): New relocation.

gold/

	* sparc.cc (Reloc::wdisp10): New relocation method.
	(Reloc::h34): Likewise.
	(Target_sparc::Scan::check_non_pic): Handle R_SPARC_H34.
	(Target_sparc::Scan::get_reference_flags): Handle R_SPARC_H34 and
	R_SPARC_WDISP10.
	(Target_sparc::Scan::local): Likewise.
	(Target_sparc::Scan::global): Likewise.
	(Target_sparc::Relocate::relocate): Likewise.
@
text
@d38 1
a38 1
			4c: R_SPARC_HH22	.text\+0xfedcba9876543210
d40 1
a40 1
			50: R_SPARC_HM10	.text\+0xfedcba9876543210
d42 1
a42 1
			54: R_SPARC_LM22	.text\+0xfedcba9876543210
d44 1
a44 1
			58: R_SPARC_LO10	.text\+0xfedcba9876543210
d73 1
a73 1
			a8: R_SPARC_HIX22	.text\+0xffffffff76543210
d75 1
a75 1
			ac: R_SPARC_LOX10	.text\+0xffffffff76543210
@


1.2
log
@Jakub Jelinek  <jj@@ultra.linux.cz>
        * gas/sparc/synth64.s: Add checks for single register signx/clruw.
        * gas/sparc/set64.s: Add tests for setuw and setsw synthetic insns.
        * gas/sparc/prefetch.d: Add -64 as switch.
        * gas/sparc/rdpr.d: Ditto.
        * gas/sparc/wrpr.d: Ditto.
        * gas/sparc/synth64.d: Ditto, reflect synth64.s changes.
        * gas/sparc/reloc64.d: Add -64 as switch, be more tolerant, as
        current gas outputs %hi(0) and not %hi(0x0).
        * gas/sparc/set64.d: Add -64 as switch, reflect set64.s changes and
        optimizations for setx instruction.
        * gas/sparc/sparc.exp: Do sparc64*-*-* checks if it is any of the
        compiled-in targets.
@
text
@d77 6
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#as: -Av9
d13 1
a13 1
   c:	03 00 00 00 	sethi  %hi\(0x0\), %g1
d18 1
a18 1
  18:	03 00 00 00 	sethi  %hi\(0x0\), %g1
d28 1
a28 1
  38:	03 00 00 00 	sethi  %hi\(0x0\), %g1
d32 1
a32 1
  40:	05 00 00 00 	sethi  %hi\(0x0\), %g2
d37 1
a37 1
  4c:	03 00 00 00 	sethi  %hi\(0x0\), %g1
d41 1
a41 1
  54:	05 00 00 00 	sethi  %hi\(0x0\), %g2
d50 1
a50 1
  70:	03 00 00 00 	sethi  %hi\(0x0\), %g1
d57 1
a57 1
  80:	03 00 00 00 	sethi  %hi\(0x0\), %g1
d67 1
a67 1
  9c:	03 00 00 00 	sethi  %hi\(0x0\), %g1
d72 1
a72 1
  a8:	03 00 00 00 	sethi  %hi\(0x0\), %g1
@


1.1.1.1
log
@19990502 sourceware import
@
text
@@

