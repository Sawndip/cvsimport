head	1.1;
access;
symbols
	binutils-2_24-branch:1.1.0.38
	binutils-2_24-branchpoint:1.1
	binutils-2_21_1:1.1
	binutils-2_23_2:1.1
	binutils-2_23_1:1.1
	binutils-2_23:1.1
	binutils-2_23-branch:1.1.0.36
	binutils-2_23-branchpoint:1.1
	binutils-2_22_branch:1.1.0.34
	binutils-2_22:1.1
	binutils-2_22-branch:1.1.0.32
	binutils-2_22-branchpoint:1.1
	binutils-2_21:1.1
	binutils-2_21-branch:1.1.0.30
	binutils-2_21-branchpoint:1.1
	binutils-2_20_1:1.1
	binutils-2_20:1.1
	binutils-arc-20081103-branch:1.1.0.28
	binutils-arc-20081103-branchpoint:1.1
	binutils-2_20-branch:1.1.0.26
	binutils-2_20-branchpoint:1.1
	dje-cgen-play1-branch:1.1.0.24
	dje-cgen-play1-branchpoint:1.1
	arc-20081103-branch:1.1.0.22
	arc-20081103-branchpoint:1.1
	binutils-2_19_1:1.1
	binutils-2_19:1.1
	binutils-2_19-branch:1.1.0.20
	binutils-2_19-branchpoint:1.1
	binutils-2_18:1.1
	binutils-2_18-branch:1.1.0.18
	binutils-2_18-branchpoint:1.1
	binutils-csl-coldfire-4_1-32:1.1
	binutils-csl-sourcerygxx-4_1-32:1.1
	binutils-csl-innovasic-fido-3_4_4-33:1.1
	binutils-csl-sourcerygxx-3_4_4-32:1.1
	binutils-csl-coldfire-4_1-30:1.1
	binutils-csl-sourcerygxx-4_1-30:1.1
	binutils-csl-coldfire-4_1-28:1.1
	binutils-csl-sourcerygxx-4_1-29:1.1
	binutils-csl-sourcerygxx-4_1-28:1.1
	binutils-csl-arm-2006q3-27:1.1
	binutils-csl-sourcerygxx-4_1-27:1.1
	binutils-csl-arm-2006q3-26:1.1
	binutils-csl-sourcerygxx-4_1-26:1.1
	binutils-csl-sourcerygxx-4_1-25:1.1
	binutils-csl-sourcerygxx-4_1-24:1.1
	binutils-csl-sourcerygxx-4_1-23:1.1
	binutils-csl-sourcerygxx-4_1-21:1.1
	binutils-csl-arm-2006q3-21:1.1
	binutils-csl-sourcerygxx-4_1-22:1.1
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.1
	binutils-csl-sourcerygxx-4_1-20:1.1
	binutils-csl-arm-2006q3-19:1.1
	binutils-csl-sourcerygxx-4_1-19:1.1
	binutils-csl-sourcerygxx-4_1-18:1.1
	binutils-csl-renesas-4_1-9:1.1
	binutils-csl-sourcerygxx-3_4_4-25:1.1
	binutils-csl-renesas-4_1-8:1.1
	binutils-csl-renesas-4_1-7:1.1
	binutils-csl-renesas-4_1-6:1.1
	binutils-csl-sourcerygxx-4_1-17:1.1
	binutils-csl-sourcerygxx-4_1-14:1.1
	binutils-csl-sourcerygxx-4_1-15:1.1
	binutils-csl-sourcerygxx-4_1-13:1.1
	binutils-2_17:1.1
	binutils-csl-sourcerygxx-4_1-12:1.1
	binutils-csl-sourcerygxx-3_4_4-21:1.1
	binutils-csl-wrs-linux-3_4_4-24:1.1
	binutils-csl-wrs-linux-3_4_4-23:1.1
	binutils-csl-sourcerygxx-4_1-9:1.1
	binutils-csl-sourcerygxx-4_1-8:1.1
	binutils-csl-sourcerygxx-4_1-7:1.1
	binutils-csl-arm-2006q1-6:1.1
	binutils-csl-sourcerygxx-4_1-6:1.1
	binutils-csl-wrs-linux-3_4_4-22:1.1
	binutils-csl-coldfire-4_1-11:1.1
	binutils-csl-sourcerygxx-3_4_4-19:1.1
	binutils-csl-coldfire-4_1-10:1.1
	binutils-csl-sourcerygxx-4_1-5:1.1
	binutils-csl-sourcerygxx-4_1-4:1.1
	binutils-csl-wrs-linux-3_4_4-21:1.1
	binutils-csl-morpho-4_1-4:1.1
	binutils-csl-sourcerygxx-3_4_4-17:1.1
	binutils-csl-wrs-linux-3_4_4-20:1.1
	binutils-2_17-branch:1.1.0.16
	binutils-2_17-branchpoint:1.1
	binutils-csl-2_17-branch:1.1.0.14
	binutils-csl-2_17-branchpoint:1.1
	binutils-csl-gxxpro-3_4-branch:1.1.0.12
	binutils-csl-gxxpro-3_4-branchpoint:1.1
	binutils-2_16_1:1.1
	binutils-csl-arm-2005q1b:1.1
	binutils-2_16:1.1
	binutils-csl-arm-2005q1a:1.1
	binutils-csl-arm-2005q1-branch:1.1.0.10
	binutils-csl-arm-2005q1-branchpoint:1.1
	binutils-2_16-branch:1.1.0.8
	binutils-2_16-branchpoint:1.1
	csl-arm-2004-q3d:1.1
	csl-arm-2004-q3:1.1
	binutils-2_15:1.1
	binutils-2_15-branchpoint:1.1
	csl-arm-2004-q1a:1.1
	csl-arm-2004-q1:1.1
	binutils-2_15-branch:1.1.0.6
	cagney_bfdfile-20040213-branch:1.1.0.4
	cagney_bfdfile-20040213-branchpoint:1.1
	cagney_bigcore-20040122-branch:1.1.0.2
	cagney_bigcore-20040122-branchpoint:1.1
	csl-arm-2003-q4:1.1
	binutils_latest_snapshot:1.1;
locks; strict;
comment	@# @;


1.1
date	2003.10.18.16.00.21;	author hp;	state Exp;
branches;
next	;


desc
@@


1.1
log
@	* gas/mmix/op-0-1.d, gas/mmix/pushj-c.d, gas/mmix/weak1.d: Add
	--no-pushj-stubs option.
	* gas/mmix/reloclab-r.d, gas/mmix/reloclab.d: Add --no-stubs
	option.
	* gas/mmix/reloclab.l: Adjust for PUSHJ stub.
	* gas/mmix/pushj-cs.d, gas/mmix/reloclab-s.d, gas/mmix/relax2.s,
	gas/mmix/relax2.d, gas/mmix/op-0-1s.d, gas/mmix/reloclab-rs.d,
	gas/mmix/weak1-s.d: New tests.
@
text
@#objdump: -r
#as: -x

.*:     file format elf64-mmix
R.* \[\.text\.a0\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.a0
0+40018 R_MMIX_PUSHJ      \.text\.a0\+0x0+4
R.* \[\.text\.b0\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b0
0+40018 R_MMIX_PUSHJ      \.text\.b0\+0x0+4
0+4002c R_MMIX_PUSHJ      \.text\.b0\+0x0+8
R.* \[\.text\.c0\]:
O.*
0+ R_MMIX_PUSHJ      ca0
0+14 R_MMIX_PUSHJ      cb0
R.* \[\.text\.d0\]:
O.*
0+ R_MMIX_PUSHJ      da0
0+14 R_MMIX_PUSHJ      db0
0+28 R_MMIX_PUSHJ      dc0
R.* \[\.text\.a1\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.a1
0+40018 R_MMIX_PUSHJ_STUBBABLE  \.text\.a1\+0x0+4
R.* \[\.text\.b1\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b1
0+40018 R_MMIX_PUSHJ      \.text\.b1\+0x0+4
0+4002c R_MMIX_PUSHJ_STUBBABLE  \.text\.b1\+0x0+8
R.* \[\.text\.c1\]:
O.*
0+ R_MMIX_PUSHJ      ca1
0+14 R_MMIX_PUSHJ_STUBBABLE  cb1
R.* \[\.text\.d1\]:
O.*
0+ R_MMIX_PUSHJ      da1
0+14 R_MMIX_PUSHJ      db1
0+28 R_MMIX_PUSHJ_STUBBABLE  dc1

# The following shows a limitation of the PUSHJ relaxation code when
# PUSHJ:s are close, and about 256k away from the section limit: On the
# first relaxation iteration, the first (or second) PUSHJ looks like it
# could reach a stub.  However, the last PUSHJ is expanded and on the
# second iteration, the stubbed PUSHJ has to be expanded too because it
# can't reach the stubs anymore.  This continues for the next iterations,
# because the max stub size is five tetrabytes (4-bytes).  At the expense
# of much more complex relaxation code (including the relaxation machinery
# in write.c), this is fixable.  Anyway, as long as PUSHJ:s aren't closer
# than five instructions, the existing code does suffice; we're just here
# to check that the border case *works* and doesn't generate invalid code.

R.* \[\.text\.a2\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.a2
0+40018 R_MMIX_PUSHJ      \.text\.a2\+0x0+4
R.* \[\.text\.b2\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b2
0+40018 R_MMIX_PUSHJ      \.text\.b2\+0x0+4
0+4002c R_MMIX_PUSHJ      \.text\.b2\+0x0+8
R.* \[\.text\.c2\]:
O.*
0+ R_MMIX_PUSHJ      ca2
0+14 R_MMIX_PUSHJ      cb2
R.* \[\.text\.d2\]:
O.*
0+ R_MMIX_PUSHJ      da2
0+14 R_MMIX_PUSHJ      db2
0+28 R_MMIX_PUSHJ      dc2
R.* \[\.text\.a3\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.a3
0+40018 R_MMIX_PUSHJ      \.text\.a3\+0x0+4
R.* \[\.text\.b3\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b3
0+40018 R_MMIX_PUSHJ      \.text\.b3\+0x0+4
0+4002c R_MMIX_PUSHJ      \.text\.b3\+0x0+8
R.* \[\.text\.c3\]:
O.*
0+ R_MMIX_PUSHJ      ca3
0+14 R_MMIX_PUSHJ      cb3
R.* \[\.text\.d3\]:
O.*
0+ R_MMIX_PUSHJ      da3
0+14 R_MMIX_PUSHJ      db3
0+28 R_MMIX_PUSHJ      dc3
R.* \[\.text\.a4\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.a4
0+40018 R_MMIX_PUSHJ      \.text\.a4\+0x0+4
R.* \[\.text\.b4\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b4
0+40018 R_MMIX_PUSHJ      \.text\.b4\+0x0+4
0+4002c R_MMIX_PUSHJ      \.text\.b4\+0x0+8
R.* \[\.text\.c4\]:
O.*
0+ R_MMIX_PUSHJ      ca4
0+14 R_MMIX_PUSHJ      cb4
R.* \[\.text\.d4\]:
O.*
0+ R_MMIX_PUSHJ      da4
0+14 R_MMIX_PUSHJ      db4
0+28 R_MMIX_PUSHJ      dc4
R.* \[\.text\.a5\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.a5
0+40018 R_MMIX_PUSHJ      \.text\.a5\+0x0+4
R.* \[\.text\.b5\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b5
0+40018 R_MMIX_PUSHJ      \.text\.b5\+0x0+4
0+4002c R_MMIX_PUSHJ      \.text\.b5\+0x0+8
R.* \[\.text\.c5\]:
O.*
0+ R_MMIX_PUSHJ      ca5
0+14 R_MMIX_PUSHJ      cb5
R.* \[\.text\.d5\]:
O.*
0+ R_MMIX_PUSHJ      da5
0+14 R_MMIX_PUSHJ      db5
0+28 R_MMIX_PUSHJ      dc5
R.* \[\.text\.a6\]:
O.*
0+40004 R_MMIX_PUSHJ_STUBBABLE  \.text\.a6
0+40008 R_MMIX_PUSHJ_STUBBABLE  \.text\.a6\+0x0+4
R.* \[\.text\.b6\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b6
0+40018 R_MMIX_PUSHJ      \.text\.b6\+0x0+4
0+4002c R_MMIX_PUSHJ_STUBBABLE  \.text\.b6\+0x0+8
R.* \[\.text\.c6\]:
O.*
0+ R_MMIX_PUSHJ_STUBBABLE  ca6
0+4 R_MMIX_PUSHJ_STUBBABLE  cb6
R.* \[\.text\.d6\]:
O.*
0+ R_MMIX_PUSHJ      da6
0+14 R_MMIX_PUSHJ      db6
0+28 R_MMIX_PUSHJ_STUBBABLE  dc6
R.* \[\.text\.a7\]:
O.*
0+40004 R_MMIX_PUSHJ_STUBBABLE  \.text\.a7
0+40008 R_MMIX_PUSHJ_STUBBABLE  \.text\.a7\+0x0+4
R.* \[\.text\.b7\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b7
0+40018 R_MMIX_PUSHJ      \.text\.b7\+0x0+4
0+4002c R_MMIX_PUSHJ      \.text\.b7\+0x0+8
R.* \[\.text\.c7\]:
O.*
0+ R_MMIX_PUSHJ_STUBBABLE  ca7
0+4 R_MMIX_PUSHJ_STUBBABLE  cb7
R.* \[\.text\.d7\]:
O.*
0+ R_MMIX_PUSHJ      da7
0+14 R_MMIX_PUSHJ      db7
0+28 R_MMIX_PUSHJ      dc7
R.* \[\.text\.a8\]:
O.*
0+40004 R_MMIX_PUSHJ_STUBBABLE  \.text\.a8
0+40008 R_MMIX_PUSHJ_STUBBABLE  \.text\.a8\+0x0+4
R.* \[\.text\.b8\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b8
0+40018 R_MMIX_PUSHJ      \.text\.b8\+0x0+4
0+4002c R_MMIX_PUSHJ      \.text\.b8\+0x0+8
R.* \[\.text\.c8\]:
O.*
0+ R_MMIX_PUSHJ_STUBBABLE  ca8
0+4 R_MMIX_PUSHJ_STUBBABLE  cb8
R.* \[\.text\.d8\]:
O.*
0+ R_MMIX_PUSHJ      da8
0+14 R_MMIX_PUSHJ      db8
0+28 R_MMIX_PUSHJ      dc8
R.* \[\.text\.a9\]:
O.*
0+40004 R_MMIX_PUSHJ_STUBBABLE  \.text\.a9
0+40008 R_MMIX_PUSHJ_STUBBABLE  \.text\.a9\+0x0+4
R.* \[\.text\.b9\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b9
0+40018 R_MMIX_PUSHJ      \.text\.b9\+0x0+4
0+4002c R_MMIX_PUSHJ      \.text\.b9\+0x0+8
R.* \[\.text\.c9\]:
O.*
0+ R_MMIX_PUSHJ_STUBBABLE  ca9
0+4 R_MMIX_PUSHJ_STUBBABLE  cb9
R.* \[\.text\.d9\]:
O.*
0+ R_MMIX_PUSHJ      da9
0+14 R_MMIX_PUSHJ      db9
0+28 R_MMIX_PUSHJ      dc9
R.* \[\.text\.a10\]:
O.*
0+40004 R_MMIX_PUSHJ_STUBBABLE  \.text\.a10
0+40008 R_MMIX_PUSHJ_STUBBABLE  \.text\.a10\+0x0+4
R.* \[\.text\.b10\]:
O.*
0+40004 R_MMIX_PUSHJ      \.text\.b10
0+40018 R_MMIX_PUSHJ      \.text\.b10\+0x0+4
0+4002c R_MMIX_PUSHJ      \.text\.b10\+0x0+8
R.* \[\.text\.c10\]:
O.*
0+ R_MMIX_PUSHJ_STUBBABLE  ca10
0+4 R_MMIX_PUSHJ_STUBBABLE  cb10
R.* \[\.text\.d10\]:
O.*
0+ R_MMIX_PUSHJ      da10
0+14 R_MMIX_PUSHJ      db10
0+28 R_MMIX_PUSHJ      dc10
R.* \[\.text\.a11\]:
O.*
0+40004 R_MMIX_PUSHJ_STUBBABLE  \.text\.a11
0+40008 R_MMIX_PUSHJ_STUBBABLE  \.text\.a11\+0x0+4
R.* \[\.text\.b11\]:
O.*
0+40004 R_MMIX_PUSHJ_STUBBABLE  \.text\.b11
0+40008 R_MMIX_PUSHJ_STUBBABLE  \.text\.b11\+0x0+4
0+4000c R_MMIX_PUSHJ_STUBBABLE  \.text\.b11\+0x0+8
R.* \[\.text\.c11\]:
O.*
0+ R_MMIX_PUSHJ_STUBBABLE  ca11
0+4 R_MMIX_PUSHJ_STUBBABLE  cb11
R.* \[\.text\.d11\]:
O.*
0+ R_MMIX_PUSHJ_STUBBABLE  da11
0+4 R_MMIX_PUSHJ_STUBBABLE  db11
0+8 R_MMIX_PUSHJ_STUBBABLE  dc11
R.* \[\.text\.a12\]:
O.*
0+40004 R_MMIX_PUSHJ_STUBBABLE  \.text\.a12
0+40008 R_MMIX_PUSHJ_STUBBABLE  \.text\.a12\+0x0+4
R.* \[\.text\.b12\]:
O.*
0+40004 R_MMIX_PUSHJ_STUBBABLE  \.text\.b12
0+40008 R_MMIX_PUSHJ_STUBBABLE  \.text\.b12\+0x0+4
0+4000c R_MMIX_PUSHJ_STUBBABLE  \.text\.b12\+0x0+8
R.* \[\.text\.c12\]:
O.*
0+ R_MMIX_PUSHJ_STUBBABLE  ca12
0+4 R_MMIX_PUSHJ_STUBBABLE  cb12
R.* \[\.text\.d12\]:
O.*
0+ R_MMIX_PUSHJ_STUBBABLE  da12
0+4 R_MMIX_PUSHJ_STUBBABLE  db12
0+8 R_MMIX_PUSHJ_STUBBABLE  dc12
@
