head	1.11;
access;
symbols
	binutils-2_24-branch:1.11.0.2
	binutils-2_24-branchpoint:1.11
	binutils-2_21_1:1.6
	binutils-2_23_2:1.10
	binutils-2_23_1:1.10
	binutils-2_23:1.10
	binutils-2_23-branch:1.10.0.6
	binutils-2_23-branchpoint:1.10
	binutils-2_22_branch:1.10.0.4
	binutils-2_22:1.10
	binutils-2_22-branch:1.10.0.2
	binutils-2_22-branchpoint:1.10
	binutils-2_21:1.6
	binutils-2_21-branch:1.6.0.2
	binutils-2_21-branchpoint:1.6
	binutils-2_20_1:1.5
	binutils-2_20:1.5
	binutils-arc-20081103-branch:1.4.0.10
	binutils-arc-20081103-branchpoint:1.4
	binutils-2_20-branch:1.5.0.2
	binutils-2_20-branchpoint:1.5
	dje-cgen-play1-branch:1.4.0.8
	dje-cgen-play1-branchpoint:1.4
	arc-20081103-branch:1.4.0.6
	arc-20081103-branchpoint:1.4
	binutils-2_19_1:1.4
	binutils-2_19:1.4
	binutils-2_19-branch:1.4.0.4
	binutils-2_19-branchpoint:1.4
	binutils-2_18:1.4
	binutils-2_18-branch:1.4.0.2
	binutils-2_18-branchpoint:1.4
	binutils-csl-coldfire-4_1-32:1.1.2.1
	binutils-csl-sourcerygxx-4_1-32:1.1.2.1
	binutils-csl-innovasic-fido-3_4_4-33:1.1.2.1
	binutils-csl-coldfire-4_1-30:1.1.2.1
	binutils-csl-sourcerygxx-4_1-30:1.1.2.1
	binutils-csl-coldfire-4_1-28:1.1.2.1
	binutils-csl-sourcerygxx-4_1-29:1.1.2.1
	binutils-csl-sourcerygxx-4_1-28:1.1.2.1
	binutils-csl-arm-2006q3-27:1.1.2.1
	binutils-csl-sourcerygxx-4_1-27:1.1.2.1
	binutils-csl-arm-2006q3-26:1.1.2.1
	binutils-csl-sourcerygxx-4_1-26:1.1.2.1
	binutils-csl-sourcerygxx-4_1-25:1.1.2.1
	binutils-csl-sourcerygxx-4_1-24:1.1.2.1
	binutils-csl-sourcerygxx-4_1-23:1.1.2.1
	binutils-csl-sourcerygxx-4_1-21:1.1.2.1
	binutils-csl-arm-2006q3-21:1.1.2.1
	binutils-csl-sourcerygxx-4_1-22:1.1.2.1
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.1.2.1
	binutils-csl-sourcerygxx-4_1-20:1.1.2.1
	binutils-csl-arm-2006q3-19:1.1.2.1
	binutils-csl-sourcerygxx-4_1-19:1.1.2.1
	binutils-csl-sourcerygxx-4_1-18:1.1.2.1
	binutils-csl-renesas-4_1-9:1.1.2.1
	binutils-csl-renesas-4_1-8:1.1
	binutils-csl-renesas-4_1-7:1.1
	binutils-csl-renesas-4_1-6:1.1
	binutils-csl-sourcerygxx-4_1-17:1.1
	binutils-csl-sourcerygxx-4_1-14:1.1
	binutils-csl-sourcerygxx-4_1-15:1.1
	binutils-csl-sourcerygxx-4_1-13:1.1
	binutils-2_17:1.2
	binutils-csl-sourcerygxx-4_1-12:1.1
	binutils-csl-sourcerygxx-3_4_4-21:1.1
	binutils-csl-sourcerygxx-4_1-9:1.1
	binutils-csl-sourcerygxx-4_1-8:1.1
	binutils-csl-sourcerygxx-4_1-7:1.1
	binutils-csl-arm-2006q1-6:1.1
	binutils-csl-sourcerygxx-4_1-6:1.1
	binutils-csl-coldfire-4_1-11:1.1
	binutils-csl-sourcerygxx-3_4_4-19:1.1
	binutils-csl-coldfire-4_1-10:1.1
	binutils-csl-sourcerygxx-4_1-5:1.1
	binutils-csl-sourcerygxx-4_1-4:1.1
	binutils-csl-morpho-4_1-4:1.1
	binutils-csl-sourcerygxx-3_4_4-17:1.1
	binutils-2_17-branch:1.2.0.2
	binutils-2_17-branchpoint:1.2
	binutils-csl-2_17-branch:1.1.0.2
	binutils-csl-2_17-branchpoint:1.1
	binutils_latest_snapshot:1.11;
locks; strict;
comment	@# @;


1.11
date	2013.03.15.16.29.35;	author nickc;	state Exp;
branches;
next	1.10;

1.10
date	2011.04.19.07.44.11;	author nickc;	state Exp;
branches;
next	1.9;

1.9
date	2011.04.19.07.27.30;	author nickc;	state Exp;
branches;
next	1.8;

1.8
date	2011.04.11.18.49.05;	author jules;	state Exp;
branches;
next	1.7;

1.7
date	2011.04.11.15.23.08;	author nickc;	state Exp;
branches;
next	1.6;

1.6
date	2010.09.17.10.42.04;	author mgretton;	state Exp;
branches;
next	1.5;

1.5
date	2009.06.29.08.08.15;	author nickc;	state Exp;
branches;
next	1.4;

1.4
date	2007.02.28.14.39.15;	author nickc;	state Exp;
branches;
next	1.3;

1.3
date	2006.04.20.12.39.51;	author pbrook;	state Exp;
branches;
next	1.2;

1.2
date	2006.04.16.11.53.00;	author nickc;	state Exp;
branches;
next	1.1;

1.1
date	2006.02.24.15.36.36;	author pbrook;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2006.08.22.15.08.38;	author jsm28;	state Exp;
branches;
next	;


desc
@@


1.11
log
@	* gas/arm/arch7.d: Skip for non-ELF ARM targets.
	* gas/arm/arch7a-mp.d: Likewise.
	* gas/arm/arch7em.d: Likewise.
	* gas/arm/crc32-bad.d: Likewise.
	* gas/arm/crc32.d: Likewise.
@
text
@#name: ARM V7 instructions
#as: -march=armv7r
#objdump: -dr --prefix-addresses --show-raw-insn
#not-target: *-*-*coff *-*-pe *-*-wince *-*-*aout* *-*-netbsd *-*-riscix*

.*: +file format .*arm.*

Disassembly of section .text:
0+000 <[^>]*> f6d6f008 	pli	\[r6, r8\]
0+004 <[^>]*> f6d9f007 	pli	\[r9, r7\]
0+008 <[^>]*> f6d0f101 	pli	\[r0, r1, lsl #2\]
0+00c <[^>]*> f4d5f000 	pli	\[r5\]
0+010 <[^>]*> f4d5ffff 	pli	\[r5, #4095\].*
0+014 <[^>]*> f455ffff 	pli	\[r5, #-4095\].*
0+018 <[^>]*> e320f0f0 	dbg	#0
0+01c <[^>]*> e320f0ff 	dbg	#15
0+020 <[^>]*> f57ff05f 	dmb	sy
0+024 <[^>]*> f57ff05f 	dmb	sy
0+028 <[^>]*> f57ff04f 	dsb	sy
0+02c <[^>]*> f57ff04f 	dsb	sy
0+030 <[^>]*> f57ff047 	dsb	un
0+034 <[^>]*> f57ff04e 	dsb	st
0+038 <[^>]*> f57ff046 	dsb	unst
0+03c <[^>]*> f57ff06f 	isb	sy
0+040 <[^>]*> f57ff06f 	isb	sy
0+044 <[^>]*> f916 f008 	pli	\[r6, r8\]
0+048 <[^>]*> f919 f007 	pli	\[r9, r7\]
0+04c <[^>]*> f910 f021 	pli	\[r0, r1, lsl #2\]
0+050 <[^>]*> f995 f000 	pli	\[r5\]
0+054 <[^>]*> f995 ffff 	pli	\[r5, #4095\].*
0+058 <[^>]*> f915 fcff 	pli	\[r5, #-255\]
0+05c <[^>]*> f99f ffff 	pli	\[pc, #4095\]	; 0+0105f <[^>]*>
0+060 <[^>]*> f91f ffff 	pli	\[pc, #-4095\]	; f+ff065 <[^>]*>
0+064 <[^>]*> f3af 80f0 	dbg	#0
0+068 <[^>]*> f3af 80ff 	dbg	#15
0+06c <[^>]*> f3bf 8f5f 	dmb	sy
0+070 <[^>]*> f3bf 8f5f 	dmb	sy
0+074 <[^>]*> f3bf 8f4f 	dsb	sy
0+078 <[^>]*> f3bf 8f4f 	dsb	sy
0+07c <[^>]*> f3bf 8f47 	dsb	un
0+080 <[^>]*> f3bf 8f4e 	dsb	st
0+084 <[^>]*> f3bf 8f46 	dsb	unst
0+088 <[^>]*> f3bf 8f6f 	isb	sy
0+08c <[^>]*> f3bf 8f6f 	isb	sy
0+090 <[^>]*> fb99 f6fc 	sdiv	r6, r9, ip
0+094 <[^>]*> fb96 f9f3 	sdiv	r9, r6, r3
0+098 <[^>]*> fbb6 f9f3 	udiv	r9, r6, r3
0+09c <[^>]*> fbb9 f6fc 	udiv	r6, r9, ip
# V7M APSR has the same encoding as V7A CPSR_f
0+0a0 <[^>]*> f3ef 8000 	mrs	r0, (CPSR|APSR)
0+0a4 <[^>]*> f3ef 8001 	mrs	r0, IAPSR
0+0a8 <[^>]*> f3ef 8002 	mrs	r0, EAPSR
0+0ac <[^>]*> f3ef 8003 	mrs	r0, PSR
0+0b0 <[^>]*> f3ef 8005 	mrs	r0, IPSR
0+0b4 <[^>]*> f3ef 8006 	mrs	r0, EPSR
0+0b8 <[^>]*> f3ef 8007 	mrs	r0, IEPSR
0+0bc <[^>]*> f3ef 8008 	mrs	r0, MSP
0+0c0 <[^>]*> f3ef 8009 	mrs	r0, PSP
0+0c4 <[^>]*> f3ef 8010 	mrs	r0, PRIMASK
0+0c8 <[^>]*> f3ef 8011 	mrs	r0, BASEPRI
0+0cc <[^>]*> f3ef 8012 	mrs	r0, BASEPRI_MAX
0+0d0 <[^>]*> f3ef 8013 	mrs	r0, FAULTMASK
0+0d4 <[^>]*> f3ef 8014 	mrs	r0, CONTROL
0+0d8 <[^>]*> f380 8800 	msr	(CPSR_f|APSR_nzcvq), r0
0+0dc <[^>]*> f380 8801 	msr	IAPSR, r0
0+0e0 <[^>]*> f380 8802 	msr	EAPSR, r0
0+0e4 <[^>]*> f380 8803 	msr	PSR, r0
0+0e8 <[^>]*> f380 8805 	msr	IPSR, r0
0+0ec <[^>]*> f380 8806 	msr	EPSR, r0
0+0f0 <[^>]*> f380 8807 	msr	IEPSR, r0
0+0f4 <[^>]*> f380 8808 	msr	MSP, r0
0+0f8 <[^>]*> f380 8809 	msr	PSP, r0
0+0fc <[^>]*> f380 8810 	msr	PRIMASK, r0
0+100 <[^>]*> f380 8811 	msr	BASEPRI, r0
0+104 <[^>]*> f380 8812 	msr	BASEPRI_MAX, r0
0+108 <[^>]*> f380 8813 	msr	FAULTMASK, r0
0+10c <[^>]*> f380 8814 	msr	CONTROL, r0
0+110 <[^>]*> f3ef 8003 	mrs	r0, PSR
0+114 <[^>]*> f380 8803 	msr	PSR, r0
0+118 <[^>]*> df00      	svc	0
#...
@


1.10
log
@	* config/tc-arm.c (v7m_psrs): Revert previous delta.

	* gas/arm/mrs-msr-thumb-v7e-m.s: Restore name of basepri_max
	register.
	* gas/arm/mrs-msr-thumb-v7e-m.d: Likewise.
	* gas/arm/arch7.d: Likewise.
	* gas/arm/arch7.s: Likewise.

	* arm-dis.c: Revert previous reversion.
@
text
@d4 1
@


1.9
log
@	* gas/arm/arch7.s: Fix typo basepri_max should be basepri_mask.
	* gas/arm/mrs-msr-thumb-v7e-m.s: Likewise.
	* gas/arm/arch7.d: Update expected disassembly.
	* gas/arm/attr-march-armv7.d: Remove Microcontroller tag.
	* gas/arm/blx-bad.d: Only run for ELF based targets.
	* gas/arm/mrs-msr-thumb-v6t2.d: Likewise.
	* gas/arm/vldm-arm.d: Likewise.
	* gas/arm/mrs-msr-thumb-v7-m.d: Likewise.
	Remove qualifiers from PSR and IAPSR regsiter names.
	* gas/arm/mrs-msr-thumb-v7e-m.d: Likewise.
	* gas/arm/thumb2_bcond.d: Update expected disassembly to allow for
	relaxing of branch insns.
	* gas/arm/thumb32.d: Fix whitespace problems in disassembly.

	* config/tc-arm.c (parse_psr): Use selected_cpu not cpu_variant to
	detect M-profile targets.
	(do_t_swi): Exclude v7 and higher variants from arm_ext_os test.
	(v7m_psrs): Fix typo: basepri_max should be basepri_mask.

	* arm-dis.c (psr_name): Revert previous delta.

	* arm.h (ARM_AEXT_V7_ARM): Remove ARM_EXT_OS from bitmask.
@
text
@d60 1
a60 1
0+0cc <[^>]*> f3ef 8012 	mrs	r0, BASEPRI_MASK
d74 1
a74 1
0+104 <[^>]*> f380 8812 	msr	BASEPRI_MASK, r0
@


1.8
log
@    gas/
    * config/tc-arm.c (parse_psr): Add LHS argument. Improve support
    for *APSR bitmasks.
    (operand_parse_code): Replace OP_PSR with OP_wPSR and OP_rPSR.
    Remove OP_RVC_PSR.
    (parse_operands): Likewise.
    (do_mrs): Tweak error message for constraint.
    (do_t_mrs): Update constraints for changes to APSR support.
    (do_t_msr): Likewise. Don't set PSR_f flag here.
    (psrs): Remove "g", "nzcvq", "nzcvqg".
    (insns): Tweak entries for msr and mrs instructions.

    opcodes/
    * arm-dis.c (psr_name): Fix typo for BASEPRI_MAX.
    (print_insn_thumb32): Add APSR bitmask support.

    gas/testsuite/
    * gas/arm/mrs-msr-thumb-v7-m.s: New.
    * gas/arm/mrs-msr-thumb-v7-m.d: New.
    * gas/arm/mrs-msr-thumb-v7-m-bad.d: New.
    * gas/arm/mrs-msr-thumb-v7-m-bad.l: New.
    * gas/arm/mrs-msr-thumb-v7-m-bad.s: New.
    * gas/arm/mrs-msr-thumb-v7e-m.d: New.
    * gas/arm/mrs-msr-thumb-v7e-m.s: New.
    * gas/arm/mrs-msr-arm-v7-a-bad.d: New.
    * gas/arm/mrs-msr-arm-v7-a-bad.l: New.
    * gas/arm/mrs-msr-arm-v7-a-bad.s: New.
    * gas/arm/mrs-msr-arm-v7-a.d: New.
    * gas/arm/mrs-msr-arm-v7-a.s: New.
    * gas/arm/mrs-msr-arm-v6.d: New.
    * gas/arm/mrs-msr-arm-v6.s: New.
    * gas/arm/mrs-msr-thumb-v6t2.d: New.
    * gas/arm/mrs-msr-thumb-v6t2.s: New.
    * gas/arm/arch7.d: Fix typo in disassembly for BASEPRI_MAX,
    bitmasks for IAPSR etc.
    * gas/arm/arch7.s: Specify bitmask for APSR writes.
    * gas/arm/archv6m.s: Likewise.
    * msr-imm-bad.l: Tweak expected disassembly in error message.
    * msr-reg-bad.l: Likewise.
    * msr-imm.d: Tweak expected disassembly.
    * msr-reg.d: Likewise.
    * msr-reg-thumb.d: Likewise.
    * msr-imm.s: Specify bitmask on APSR writes.
    * msr-reg.s: Add comment about deprecated usage.
@
text
@d60 1
a60 1
0+0cc <[^>]*> f3ef 8012 	mrs	r0, BASEPRI_MAX
d64 3
a66 3
0+0dc <[^>]*> f380 8801 	msr	IAPSR_nzcvq, r0
0+0e0 <[^>]*> f380 8802 	msr	EAPSR_nzcvq, r0
0+0e4 <[^>]*> f380 8803 	msr	PSR_nzcvq, r0
d74 1
a74 1
0+104 <[^>]*> f380 8812 	msr	BASEPRI_MAX, r0
d78 1
a78 1
0+114 <[^>]*> f380 8803 	msr	PSR_nzcvq, r0
d80 1
@


1.7
log
@	PR gas/12296
	* arm.h (ARM_AEXT_V7_ARM): Add ARM_EXT_OS.

	* gas/arm/arch7.s: Add SVC insn.
	* gas/arm/arch7.d: Add disassembly of SVC insn.
	* gas/arm/attr-march-armv7.d: Add arch profile tag.
@
text
@d60 1
a60 1
0+0cc <[^>]*> f3ef 8012 	mrs	r0, BASEPRI_MASK
d63 4
a66 4
0+0d8 <[^>]*> f380 8800 	msr	(CPSR_f|APSR), r0
0+0dc <[^>]*> f380 8801 	msr	IAPSR, r0
0+0e0 <[^>]*> f380 8802 	msr	EAPSR, r0
0+0e4 <[^>]*> f380 8803 	msr	PSR, r0
d74 1
a74 1
0+104 <[^>]*> f380 8812 	msr	BASEPRI_MASK, r0
d78 1
a78 1
0+114 <[^>]*> f380 8803 	msr	PSR, r0
@


1.6
log
@2010-09-17  Tejas Belagod  <tejas.belagod@@arm.com>

	* config/tc-arm.c (parse_psr): Add condition for matching "APSR" on
	non-M-arch cpus.
	(psrs): Add entry for PSR flags, g, nzcvq, nzcvqg.

2010-09-17  Tejas Belagod  <tejas.belagod@@arm.com>

	* gas/arm/msr-reg.s: New file.
	* gas/arm/msr-reg.d: Likewise.
	* gas/arm/msr-imm.s: Likewise.
	* gas/arm/msr-imm.d: Likewise.
	* gas/arm/msr-imm-bad.d: Likewise.
	* gas/arm/msr-imm-bad.l: Likewise.
	* gas/arm/msr-reg-bad.d: Likewise.
	* gas/arm/msr-imm-bad.d: Likewise.
	* gas/arm/msr-reg-thumb.d: Likewise.
	* gas/arm/arch7.s: Add tests for xpsr.
	* gas/arm/arch7.d: Likewise.
@
text
@d79 1
@


1.5
log
@        PR 10288
        * arm-dis.c (enum opcode_sentinels): New:  Used to mark the
        boundary between variaant and generic coprocessor instuctions.
        (coprocessor): Use it.
        Fix architecture version of MCRR and MRRC instructions.
        (arm_opcdes): Fix patterns for STRB and STRH instructions.
        (print_insn_coprocessor): Check architecture and extension masks.
        Print a hexadecimal version of any decimal constant that is
        outside of the range of -16 to +32.
        (print_arm_address): Add a return value of the offset used in the
        adress, if it is worth printing a hexadecimal version of it.
        (print_insn_neon): Print a hexadecimal version of any decimal
        constant that is outside of the range of -16 to +32.
        (print_insn_arm): Likewise.
        (print_insn_thumb16): Likewise.
        (print_insn_thumb32): Likewise.

        PR 10297
        * arm-dis.c (UNDEFINED_INSTRUCTION): New macro for a description
        of an undefined instruction.
        (arm_opcodes): Use it.
        (thumb_opcod): Use it.
        (thumb32_opc): Use it.

        Update expected disassembly regrexps in GAS and LD testsuites.
@
text
@d77 2
@


1.4
log
@PR 3729: Fix unexpected failures in ARM GAS testsuite results.
@
text
@d12 2
a13 2
0+010 <[^>]*> f4d5ffff 	pli	\[r5, #4095\]
0+014 <[^>]*> f455ffff 	pli	\[r5, #-4095\]
d29 1
a29 1
0+054 <[^>]*> f995 ffff 	pli	\[r5, #4095\]
@


1.3
log
@2005-04-20  Paul Brook  <paul@@codesourcery.com>

gas/
	* config/tc-arm.c (s_arm_arch, s_arm_cpu, s_arm_fpu): Enable for
	all targets.
	(md_pseudo_table): Enable .arch, .cpu and .fpu for all targets.
gas/testsuite/
	* gas/arm/arch7.d: Remove skip.
	* gas/arm/svc.d: Ditto.
	* gas/arm/thumb2_bcond.d: Ditto.
	* gas/arm/thumb2_it_bad.d: Ditto.
@
text
@d31 2
a32 2
0+05c <[^>]*> f99f ffff 	pli	\[pc, #4095\]	; 0000105f <[^>]*>
0+060 <[^>]*> f91f ffff 	pli	\[pc, #-4095\]	; fffff065 <[^>]*>
@


1.2
log
@Skip ELF specific tests on non-ELF ARM targets
@
text
@a2 1
#skip: *-*-*coff *-*-pe *-*-wince *-*-*aout* *-*-netbsd *-*-riscix*
@


1.1
log
@2006-02-24  Paul Brook  <paul@@codesourcery.com>

gas/
	* config/arm/tc-arm.c (arm_ext_v6_notm, arm_ext_div, arm_ext_v7,
	arm_ext_v7a, arm_ext_v7r, arm_ext_v7m): New variables.
	(struct asm_barrier_opt): Define.
	(arm_v7m_psr_hsh, arm_barrier_opt_hsh): New variables.
	(parse_psr): Accept V7M psr names.
	(parse_barrier): New function.
	(enum operand_parse_code): Add OP_oBARRIER.
	(parse_operands): Implement OP_oBARRIER.
	(do_barrier): New function.
	(do_dbg, do_pli, do_t_barrier, do_t_dbg, do_t_div): New functions.
	(do_t_cpsi): Add V7M restrictions.
	(do_t_mrs, do_t_msr): Validate V7M variants.
	(md_assemble): Check for NULL variants.
	(v7m_psrs, barrier_opt_names): New tables.
	(insns): Add V7 instructions.  Mark V6 instructions absent from V7M.
	(md_begin): Initialize arm_v7m_psr_hsh and arm_barrier_opt_hsh.
	(arm_cpu_option_table): Add Cortex-M3, R4 and A8.
	(arm_arch_option_table): Add armv7, armv7a, armv7r and armv7m.
	(struct cpu_arch_ver_table): Define.
	(cpu_arch_ver): New.
	(aeabi_set_public_attributes): Use cpu_arch_ver.  Set
	Tag_CPU_arch_profile.
	* doc/c-arm.texi: Document new cpu and arch options.
gas/testsuite/
	* gas/arm/thumb32.d: Fix expected msr and mrs output.
	* gas/arm/arch7.d: New test.
	* gas/arm/arch7.s: New test.
	* gas/arm/arch7m-bad.l: New test.
	* gas/arm/arch7m-bad.d: New test.
	* gas/arm/arch7m-bad.s: New test.
include/opcode/
	* arm.h: Add V7 feature bits.
opcodes/
	* arm-dis.c (arm_opcodes): Add V7 instructions.
	(thumb32_opcodes): Ditto.  Handle V7M MSR/MRS variants.
	(print_arm_address): New function.
	(print_insn_arm): Use it.  Add 'P' and 'U' cases.
	(psr_name): New function.
	(print_insn_thumb32): Add 'U', 'C' and 'D' cases.
@
text
@d3 1
@


1.1.2.1
log
@Merge changes between binutils-csl-2_17-branchpoint and
binutils-2_17, except for the addition of generated files to CVS.
@
text
@a2 1
#skip: *-*-*coff *-*-pe *-*-wince *-*-*aout* *-*-netbsd *-*-riscix*
@


