head	1.10;
access;
symbols
	binutils-2_24-branch:1.10.0.2
	binutils-2_24-branchpoint:1.10
	binutils-2_21_1:1.7.2.1
	binutils-2_23_2:1.9
	binutils-2_23_1:1.9
	binutils-2_23:1.9
	binutils-2_23-branch:1.9.0.2
	binutils-2_23-branchpoint:1.9
	binutils-2_22_branch:1.8.0.4
	binutils-2_22:1.8
	binutils-2_22-branch:1.8.0.2
	binutils-2_22-branchpoint:1.8
	binutils-2_21:1.7.2.1
	binutils-2_21-branch:1.7.0.2
	binutils-2_21-branchpoint:1.7
	binutils-2_20_1:1.6
	binutils-2_20:1.6
	binutils-arc-20081103-branch:1.6.0.8
	binutils-arc-20081103-branchpoint:1.6
	binutils-2_20-branch:1.6.0.6
	binutils-2_20-branchpoint:1.6
	dje-cgen-play1-branch:1.6.0.4
	dje-cgen-play1-branchpoint:1.6
	arc-20081103-branch:1.6.0.2
	arc-20081103-branchpoint:1.6
	binutils-2_19_1:1.5
	binutils-2_19:1.5
	binutils-2_19-branch:1.5.0.8
	binutils-2_19-branchpoint:1.5
	binutils-2_18:1.5
	binutils-2_18-branch:1.5.0.6
	binutils-2_18-branchpoint:1.5
	binutils-csl-coldfire-4_1-32:1.5
	binutils-csl-sourcerygxx-4_1-32:1.5
	binutils-csl-innovasic-fido-3_4_4-33:1.5
	binutils-csl-coldfire-4_1-30:1.5
	binutils-csl-sourcerygxx-4_1-30:1.5
	binutils-csl-coldfire-4_1-28:1.5
	binutils-csl-sourcerygxx-4_1-29:1.5
	binutils-csl-sourcerygxx-4_1-28:1.5
	binutils-csl-arm-2006q3-27:1.5
	binutils-csl-sourcerygxx-4_1-27:1.5
	binutils-csl-arm-2006q3-26:1.5
	binutils-csl-sourcerygxx-4_1-26:1.5
	binutils-csl-sourcerygxx-4_1-25:1.5
	binutils-csl-sourcerygxx-4_1-24:1.5
	binutils-csl-sourcerygxx-4_1-23:1.5
	binutils-csl-sourcerygxx-4_1-21:1.5
	binutils-csl-arm-2006q3-21:1.5
	binutils-csl-sourcerygxx-4_1-22:1.5
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.5
	binutils-csl-sourcerygxx-4_1-20:1.5
	binutils-csl-arm-2006q3-19:1.5
	binutils-csl-sourcerygxx-4_1-19:1.5
	binutils-csl-sourcerygxx-4_1-18:1.5
	binutils-csl-renesas-4_1-9:1.5
	binutils-csl-renesas-4_1-8:1.5
	binutils-csl-renesas-4_1-7:1.5
	binutils-csl-renesas-4_1-6:1.5
	binutils-csl-sourcerygxx-4_1-17:1.5
	binutils-csl-sourcerygxx-4_1-14:1.5
	binutils-csl-sourcerygxx-4_1-15:1.5
	binutils-csl-sourcerygxx-4_1-13:1.5
	binutils-2_17:1.5
	binutils-csl-sourcerygxx-4_1-12:1.5
	binutils-csl-sourcerygxx-3_4_4-21:1.5
	binutils-csl-sourcerygxx-4_1-9:1.5
	binutils-csl-sourcerygxx-4_1-8:1.5
	binutils-csl-sourcerygxx-4_1-7:1.5
	binutils-csl-arm-2006q1-6:1.5
	binutils-csl-sourcerygxx-4_1-6:1.5
	binutils-csl-coldfire-4_1-11:1.5
	binutils-csl-sourcerygxx-3_4_4-19:1.5
	binutils-csl-coldfire-4_1-10:1.5
	binutils-csl-sourcerygxx-4_1-5:1.5
	binutils-csl-sourcerygxx-4_1-4:1.5
	binutils-csl-morpho-4_1-4:1.5
	binutils-csl-sourcerygxx-3_4_4-17:1.5
	binutils-2_17-branch:1.5.0.4
	binutils-2_17-branchpoint:1.5
	binutils-csl-2_17-branch:1.5.0.2
	binutils-csl-2_17-branchpoint:1.5
	binutils_latest_snapshot:1.10;
locks; strict;
comment	@# @;


1.10
date	2012.12.17.16.56.02;	author nickc;	state Exp;
branches;
next	1.9;

1.9
date	2012.05.06.10.56.25;	author arnoldm;	state Exp;
branches;
next	1.8;

1.8
date	2010.12.05.21.44.08;	author arnoldm;	state Exp;
branches;
next	1.7;

1.7
date	2009.10.25.16.18.04;	author arnoldm;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2008.09.14.14.04.00;	author arnoldm;	state Exp;
branches;
next	1.5;

1.5
date	2006.01.18.15.00.22;	author arnoldm;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.18.14.52.11;	author arnoldm;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.06.23.04.53;	author amodra;	state Exp;
branches;
next	1.2;

1.2
date	2005.10.26.01.32.25;	author hp;	state Exp;
branches;
next	1.1;

1.1
date	2005.10.25.17.40.18;	author nickc;	state Exp;
branches;
next	;

1.7.2.1
date	2010.12.06.23.05.57;	author arnoldm;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Add copyright notices
@
text
@# Copyright 2012
# Free Software Foundation, Inc.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA 02110-1301, USA.  

# run tests for target Z80.

if [istarget z80-*-*] then {
# test redefinitions
    run_dump_test "redef"
# test parsing of equ definitions
    run_dump_test "equ"
# test parsing of " and '
    run_dump_test "quotes"
# test suffixes
    run_dump_test "suffix"
# test assembling and disassembling instructions involving offsets
    run_dump_test "offset"
    gas_test_error "jr-forwf.s" "" "relative jump out of range (jr)"
    gas_test_error "jr-backf.s" "" "relative jump out of range (jr)"
    gas_test_error "djnz-backf.s" "" "relative jump out of range (djnz)"
 
# test assembling instruction with offset that is a label defined later
    run_dump_test "atend"
# test for data transfer instructions
    run_dump_test "ld-group"
# test for block instructions
    run_dump_test "block"
# test for arithmetic and logic
    run_dump_test "arith"
# test for rotate and shift
    run_dump_test "rotate"
# test for bit manipulations
    run_dump_test "bit"
# test for branch instructions
    run_dump_test "branch"
# test for input and output instructions
    run_dump_test "inout"
#test for other instructions
    run_dump_test "misc"
    gas_test_error "ill_op.s" "" "Illegal operand: ld hl,(sp+0)"
}
@


1.9
log
@2012-05-06  Arnold Metselaar  <arnold_m@@operamail.com>

	* gas/z80/jr-forwf.s: New file, adapted from z8k version.
	* gas/z80/jr-backf.s: Likewise.
	* gas/z80/djnz-backf.s: Likewise.
	* gas/z80/ill_op: New file, with illegal operand.
	* gas/z80/z80.exp: Run new tests.
@
text
@d1 17
@


1.8
log
@PR gas/12269
* config/tc-z80.c (emit_mx, emit_ldxhl): Do not use
  symbol_get_value_expression on a symbol that may not yet have
  a value.
* testsuite/gas/z80/atend.s: New file, test case for bug 12269,
  provided by Chris Smith.
* testsuite/gas/z80/atend.d: New file, expected results for atend.s.
* testsuite/gas/z80/z80.exp: Run new test case.
@
text
@d14 4
d36 1
@


1.7
log
@* gas/z80/equ.d, gas/z80/equ.s: Added test of parsing equ directives.
* gas/z80/z80.exp: Run it.

* gas/z80/redef.d: Expect little endian output only.
@
text
@d14 2
@


1.7.2.1
log
@Backport from trunk for PR gas/12269
 * config/tc-z80.c (emit_mx, emit_ldxhl): Do not use
   symbol_get_value_expression on a symbol that may not yet have
   a value.
 * testsuite/gas/z80/atend.s: New file, test case for bug 12269,
   provided by Chris Smith.
 * testsuite/gas/z80/atend.d: New file, expected results for atend.s.
 * testsuite/gas/z80/z80.exp: Run new test case.
@
text
@a13 2
# test assembling instruction with offset that is a label defined later
    run_dump_test "atend"
@


1.6
log
@Add new tests for z80
@
text
@d6 2
@


1.5
log
@fix typo
@
text
@d12 16
@


1.4
log
@Add tests for instructions with offsets.
@
text
@d10 1
a10 1
# test assembling and disassembling insturction involving offsets
@


1.3
log
@	* gas/z80/z80.exp: Added "suffix" test.
	* gas/z80/suffix.s: New file.
	* gas/z80/suffix.d: New file.
@
text
@d10 2
@


1.2
log
@	* gas/z80/z80.exp: Fix misplaced-open-brace typo.
@
text
@d1 1
a1 1
# run targets for target Z80.
d8 2
a9 1

@


1.1
log
@Add support for the Z80 processor family
@
text
@d3 1
a3 2
if [istarget z80-*-*] then 
{
@

