head	1.28;
access;
symbols
	binutils-2_24-branch:1.28.0.10
	binutils-2_24-branchpoint:1.28
	binutils-2_21_1:1.28
	binutils-2_23_2:1.28
	binutils-2_23_1:1.28
	binutils-2_23:1.28
	binutils-2_23-branch:1.28.0.8
	binutils-2_23-branchpoint:1.28
	binutils-2_22_branch:1.28.0.6
	binutils-2_22:1.28
	binutils-2_22-branch:1.28.0.4
	binutils-2_22-branchpoint:1.28
	binutils-2_21:1.28
	binutils-2_21-branch:1.28.0.2
	binutils-2_21-branchpoint:1.28
	binutils-2_20_1:1.26.2.1
	binutils-2_20:1.26.2.1
	binutils-arc-20081103-branch:1.24.0.10
	binutils-arc-20081103-branchpoint:1.24
	binutils-2_20-branch:1.26.0.2
	binutils-2_20-branchpoint:1.26
	dje-cgen-play1-branch:1.24.0.8
	dje-cgen-play1-branchpoint:1.24
	arc-20081103-branch:1.24.0.6
	arc-20081103-branchpoint:1.24
	binutils-2_19_1:1.24
	binutils-2_19:1.24
	binutils-2_19-branch:1.24.0.4
	binutils-2_19-branchpoint:1.24
	binutils-2_18:1.24
	binutils-2_18-branch:1.24.0.2
	binutils-2_18-branchpoint:1.24
	binutils-csl-coldfire-4_1-32:1.22
	binutils-csl-sourcerygxx-4_1-32:1.22
	binutils-csl-innovasic-fido-3_4_4-33:1.22
	binutils-csl-sourcerygxx-3_4_4-32:1.19
	binutils-csl-coldfire-4_1-30:1.22
	binutils-csl-sourcerygxx-4_1-30:1.22
	binutils-csl-coldfire-4_1-28:1.22
	binutils-csl-sourcerygxx-4_1-29:1.22
	binutils-csl-sourcerygxx-4_1-28:1.22
	binutils-csl-arm-2006q3-27:1.22
	binutils-csl-sourcerygxx-4_1-27:1.22
	binutils-csl-arm-2006q3-26:1.22
	binutils-csl-sourcerygxx-4_1-26:1.22
	binutils-csl-sourcerygxx-4_1-25:1.22
	binutils-csl-sourcerygxx-4_1-24:1.22
	binutils-csl-sourcerygxx-4_1-23:1.22
	binutils-csl-sourcerygxx-4_1-21:1.22
	binutils-csl-arm-2006q3-21:1.22
	binutils-csl-sourcerygxx-4_1-22:1.22
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.22
	binutils-csl-sourcerygxx-4_1-20:1.22
	binutils-csl-arm-2006q3-19:1.22
	binutils-csl-sourcerygxx-4_1-19:1.22
	binutils-csl-sourcerygxx-4_1-18:1.22
	binutils-csl-renesas-4_1-9:1.22
	binutils-csl-sourcerygxx-3_4_4-25:1.19
	binutils-csl-renesas-4_1-8:1.22
	binutils-csl-renesas-4_1-7:1.22
	binutils-csl-renesas-4_1-6:1.22
	binutils-csl-sourcerygxx-4_1-17:1.22
	binutils-csl-sourcerygxx-4_1-14:1.22
	binutils-csl-sourcerygxx-4_1-15:1.22
	binutils-csl-sourcerygxx-4_1-13:1.22
	binutils-2_17:1.22
	binutils-csl-sourcerygxx-4_1-12:1.22
	binutils-csl-sourcerygxx-3_4_4-21:1.22
	binutils-csl-wrs-linux-3_4_4-24:1.19
	binutils-csl-wrs-linux-3_4_4-23:1.19
	binutils-csl-sourcerygxx-4_1-9:1.22
	binutils-csl-sourcerygxx-4_1-8:1.22
	binutils-csl-sourcerygxx-4_1-7:1.22
	binutils-csl-arm-2006q1-6:1.22
	binutils-csl-sourcerygxx-4_1-6:1.22
	binutils-csl-wrs-linux-3_4_4-22:1.19
	binutils-csl-coldfire-4_1-11:1.22
	binutils-csl-sourcerygxx-3_4_4-19:1.22
	binutils-csl-coldfire-4_1-10:1.22
	binutils-csl-sourcerygxx-4_1-5:1.22
	binutils-csl-sourcerygxx-4_1-4:1.22
	binutils-csl-wrs-linux-3_4_4-21:1.19
	binutils-csl-morpho-4_1-4:1.22
	binutils-csl-sourcerygxx-3_4_4-17:1.22
	binutils-csl-wrs-linux-3_4_4-20:1.19
	binutils-2_17-branch:1.22.0.4
	binutils-2_17-branchpoint:1.22
	binutils-csl-2_17-branch:1.22.0.2
	binutils-csl-2_17-branchpoint:1.22
	binutils-csl-gxxpro-3_4-branch:1.19.0.6
	binutils-csl-gxxpro-3_4-branchpoint:1.19
	binutils-2_16_1:1.19
	binutils-csl-arm-2005q1b:1.19
	binutils-2_16:1.19
	binutils-csl-arm-2005q1a:1.19
	binutils-csl-arm-2005q1-branch:1.19.0.4
	binutils-csl-arm-2005q1-branchpoint:1.19
	binutils-2_16-branch:1.19.0.2
	binutils-2_16-branchpoint:1.19
	csl-arm-2004-q3d:1.18
	csl-arm-2004-q3:1.18
	binutils-2_15:1.15.4.1
	binutils-2_15-branchpoint:1.15
	csl-arm-2004-q1a:1.16
	csl-arm-2004-q1:1.16
	binutils-2_15-branch:1.15.0.4
	cagney_bfdfile-20040213-branch:1.15.0.2
	cagney_bfdfile-20040213-branchpoint:1.15
	cagney_bigcore-20040122-branch:1.14.0.2
	cagney_bigcore-20040122-branchpoint:1.14
	csl-arm-2003-q4:1.14
	binutils-2_14:1.12
	binutils-2_14-branch:1.12.0.2
	binutils-2_14-branchpoint:1.12
	binutils-2_13_2_1:1.7
	binutils-2_13_2:1.7
	binutils-2_13_1:1.7
	binutils-2_13:1.7
	binutils-2_13-branchpoint:1.7
	binutils-2_13-branch:1.7.0.2
	binutils-2_12_1:1.5.2.1
	binutils-2_12:1.5.2.1
	binutils-2_12-branch:1.5.0.2
	binutils-2_12-branchpoint:1.5
	cygnus_cvs_20020108_pre:1.3
	binutils-2_11_2:1.1.1.1
	binutils-2_11_1:1.1.1.1
	binutils-2_11:1.1.1.1
	x86_64versiong3:1.1.1.1
	binutils-2_11-branch:1.1.1.1.0.4
	binutils-2_10_1:1.1.1.1
	binutils-2_10:1.1.1.1
	binutils-2_10-branch:1.1.1.1.0.2
	binutils-2_10-branchpoint:1.1.1.1
	binutils_latest_snapshot:1.28
	repo-unification-2000-02-06:1.1.1.1
	binu_ss_19990721:1.1.1.1
	binu_ss_19990602:1.1.1.1
	binu_ss_19990502:1.1.1.1
	cygnus:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2010.05.25.14.12.40;	author nickc;	state Exp;
branches;
next	1.27;

1.27
date	2009.09.08.12.31.32;	author kkojima;	state Exp;
branches;
next	1.26;

1.26
date	2009.09.02.07.24.25;	author amodra;	state Exp;
branches
	1.26.2.1;
next	1.25;

1.25
date	2009.08.29.10.38.33;	author kkojima;	state Exp;
branches;
next	1.24;

1.24
date	2007.07.03.11.01.08;	author nickc;	state Exp;
branches;
next	1.23;

1.23
date	2006.07.12.09.02.00;	author nickc;	state Exp;
branches;
next	1.22;

1.22
date	2005.10.06.11.44.07;	author nickc;	state Exp;
branches;
next	1.21;

1.21
date	2005.05.05.10.29.16;	author nickc;	state Exp;
branches;
next	1.20;

1.20
date	2005.05.05.09.13.17;	author nickc;	state Exp;
branches;
next	1.19;

1.19
date	2005.03.03.16.59.18;	author nickc;	state Exp;
branches;
next	1.18;

1.18
date	2004.07.30.00.29.22;	author kkojima;	state Exp;
branches;
next	1.17;

1.17
date	2004.07.29.05.17.41;	author aoliva;	state Exp;
branches;
next	1.16;

1.16
date	2004.04.02.01.39.31;	author kkojima;	state Exp;
branches;
next	1.15;

1.15
date	2004.02.09.12.45.52;	author kkojima;	state Exp;
branches
	1.15.4.1;
next	1.14;

1.14
date	2003.12.05.01.59.54;	author msnyder;	state Exp;
branches;
next	1.13;

1.13
date	2003.12.01.11.59.14;	author kkojima;	state Exp;
branches;
next	1.12;

1.12
date	2002.10.11.14.42.51;	author kkojima;	state Exp;
branches;
next	1.11;

1.11
date	2002.10.09.19.40.41;	author sclarke;	state Exp;
branches;
next	1.10;

1.10
date	2002.09.28.00.41.27;	author drow;	state Exp;
branches;
next	1.9;

1.9
date	2002.09.09.01.54.44;	author bje;	state Exp;
branches;
next	1.8;

1.8
date	2002.08.16.00.06.06;	author amodra;	state Exp;
branches;
next	1.7;

1.7
date	2002.05.22.13.31.41;	author amylaar;	state Exp;
branches;
next	1.6;

1.6
date	2002.02.18.23.44.17;	author drow;	state Exp;
branches;
next	1.5;

1.5
date	2002.02.06.06.18.28;	author aoliva;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2002.02.04.12.29.32;	author aoliva;	state Exp;
branches;
next	1.3;

1.3
date	2001.11.02.17.07.52;	author nickc;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.09.12.25.52;	author nickc;	state Exp;
branches;
next	1.1;

1.1
date	99.05.03.07.28.52;	author rth;	state Exp;
branches
	1.1.1.1;
next	;

1.26.2.1
date	2009.09.08.12.35.32;	author kkojima;	state Exp;
branches;
next	;

1.15.4.1
date	2004.04.09.18.28.14;	author drow;	state Exp;
branches;
next	;

1.5.2.1
date	2002.02.18.23.42.58;	author drow;	state Exp;
branches;
next	;

1.1.1.1
date	99.05.03.07.28.52;	author rth;	state Exp;
branches
	1.1.1.1.4.1;
next	;

1.1.1.1.4.1
date	2001.10.09.13.39.36;	author nickc;	state Exp;
branches;
next	;


desc
@@


1.28
log
@2010-05-21  Daniel Jacobowitz  <dan@@codesourcery.com>
            Joseph Myers  <joseph@@codesourcery.com>
            Andrew Stubbs  <ams@@codesourcery.com>

        bfd/
        * config.bfd (sh-*-uclinux* | sh[12]-*-uclinux*): Add
        bfd_elf32_shl_vec, and FDPIC vectors to targ_selvecs.
        * configure.in: Handle FDPIC vectors.
        * elf32-sh-relocs.h: Add FDPIC and movi20 relocations.
        * elf32-sh.c (DEFAULT_STACK_SIZE): Define.
        (SYMBOL_FUNCDESC_LOCAL): Define.  Use it instead of
        SYMBOL_REFERENCES_LOCAL for function descriptors.
        (fdpic_object_p): New.
        (sh_reloc_map): Add FDPIC and movi20 relocations.
        (sh_elf_info_to_howto, sh_elf_relocate_section): Handle new invalid
        range.
        (struct elf_sh_plt_info): Add got20 and short_plt.  Update all
        definitions.
        (FDPIC_PLT_ENTRY_SIZE, FDPIC_PLT_LAZY_OFFSET): Define.
        (fdpic_sh_plt_entry_be, fdpic_sh_plt_entry_le, fdpic_sh_plts): New.
        (FDPIC_SH2A_PLT_ENTRY_SIZE, FDPIC_SH2A_PLT_LAZY_OFFSET): Define.
        (fdpic_sh2a_plt_entry_be, fdpic_sh2a_plt_entry_le)
        (fdpic_sh2a_short_plt_be, fdpic_sh2a_short_plt_le, fdpic_sh2a_plts):
        New.
        (get_plt_info): Handle FDPIC.
        (MAX_SHORT_PLT): Define.
        (get_plt_index, get_plt_offset): Handle short_plt.
        (union gotref): New.
        (struct elf_sh_link_hash_entry): Add funcdesc, rename tls_type to
        got_type and adjust all uses.  Add GOT_FUNCDESC.
        (struct sh_elf_obj_tdata): Add local_funcdesc.  Rename
        local_got_tls_type to local_got_type.
        (sh_elf_local_got_type): Renamed from sh_elf_local_got_tls_type.  All
        users changed.
        (sh_elf_local_funcdesc): Define.
        (struct elf_sh_link_hash_table): Add sfuncdesc, srelfuncdesc, fdpic_p,
        and srofixup.
        (sh_elf_link_hash_newfunc): Initialize new fields.
        (sh_elf_link_hash_table_create): Set fdpic_p.
        (sh_elf_omit_section_dynsym): New.
        (create_got_section): Create .got.funcdesc, .rela.got.funcdesc
        and .rofixup.
        (allocate_dynrelocs): Allocate local function descriptors and space
        for R_SH_FUNCDESC-related relocations, and for rofixups.
        Handle GOT_FUNCDESC.  Create fixups.  Handle GOT entries which
        require function descriptors.
        (sh_elf_always_size_sections): Handle PT_GNU_STACK and __stacksize.
        (sh_elf_modify_program_headers): New.
        (sh_elf_size_dynamic_sections): Allocate function descriptors for
        local symbols.  Allocate .got.funcdesc contents.  Allocate rofixups.
        Handle local GOT entries of type GOT_FUNCDESC.  Create fixups for
        local GOT entries.  Ensure that FDPIC libraries always have a PLTGOT
        entry in the .dynamic section.
        (sh_elf_add_dyn_reloc, sh_elf_got_offset, sh_elf_initialize_funcdesc)
        (sh_elf_add_rofixup, sh_elf_osec_to_segment)
        (sh_elf_osec_readonly_p, install_movi20_field): New functions.
        (sh_elf_relocate_section): Handle new relocations, R_SH_FUNCDESC,
        R_SH_GOTFUNCDESC and R_SH_GOTOFFFUNCDESC.  Use sh_elf_got_offset
        and .got.plt throughout to find _GLOBAL_OFFSET_TABLE_.  Add rofixup
        read-only section warnings.  Handle undefined weak symbols.  Generate
        fixups for R_SH_DIR32 and GOT entries.  Check for cross-segment
        relocations and clear EF_SH_PIC.  Handle 20-bit relocations.
        Always generate R_SH_DIR32 for FDPIC instead of R_SH_RELATIVE.
        (sh_elf_gc_sweep_hook): Handle R_SH_FUNCDESC, R_SH_GOTOFF20,
        R_SH_GOTFUNCDESC, R_SH_GOTFUNCDESC20, and R_SH_GOTOFFFUNCDESC.
        Handle 20-bit relocations.
        (sh_elf_copy_indirect_symbol): Copy function descriptor reference
        counts.
        (sh_elf_check_relocs): Handle new relocations.  Make symbols
        dynamic for FDPIC relocs.  Account for rofixups.  Error for FDPIC
        symbol mismatches.  Allocate a GOT for R_SH_DIR32. Allocate fixups
        for R_SH_DIR32.
        (sh_elf_copy_private_data): Copy PT_GNU_STACK size.
        (sh_elf_merge_private_data): Copy initial flags.  Do not clobber
        non-mach flags.  Set EF_SH_PIC for FDPIC.  Reject FDPIC mismatches.
        (sh_elf_finish_dynamic_symbol): Do not handle got_funcdesc entries
        here.  Rename sgot to sgotplt and srel to srelplt.  Handle short_plt,
        FDPIC descriptors, and got20.  Create R_SH_FUNCDESC_VALUE for FDPIC.
        Use install_movi20_field.  Rename srel to srelgot.  Always generate
        R_SH_DIR32 for FDPIC instead of R_SH_RELATIVE.
        (sh_elf_finish_dynamic_sections): Fill in the GOT pointer in rofixup.
        Do not fill in reserved GOT entries for FDPIC.  Correct DT_PLTGOT.
        Rename sgot to sgotplt.  Assert that the right number of rofixups
        and dynamic relocations were allocated.
        (sh_elf_use_relative_eh_frame, sh_elf_encode_eh_address): New.
        (elf_backend_omit_section_dynsym): Use sh_elf_omit_section_dynsym.
        (elf_backend_can_make_relative_eh_frame)
        (elf_backend_can_make_lsda_relative_eh_frame)
        (elf_backend_encode_eh_address): Define.
        (TARGET_BIG_SYM, TARGET_BIG_NAME, TARGET_LITTLE_SYM)
        (TARGET_LITTLE_NAME, elf_backend_modify_program_headers, elf32_bed):
        Redefine for FDPIC vector.
        * reloc.c: Add SH FDPIC and movi20 relocations.
        * targets.c (_bfd_target_vector): Add FDPIC vectors.
        * configure, bfd-in2.h, libbfd.h: Regenerated.

        binutils/
        * readelf.c (get_machine_flags): Handle EF_SH_PIC and EF_SH_FDPIC.

        gas/
        * config/tc-sh.c (sh_fdpic): New.
        (sh_check_fixup): Handle relocations on movi20.
        (parse_exp): Do not reject PIC operators here.
        (build_Mytes): Check for unhandled PIC operators here.  Use
        sh_check_fixup for movi20.
        (enum options): Add OPTION_FDPIC.
        (md_longopts, md_parse_option, md_show_usage): Add --fdpic.
        (sh_fix_adjustable, md_apply_fix): Handle FDPIC and movi20 relocations.
        (sh_elf_final_processing): Handle --fdpic.
        (sh_uclinux_target_format): New.
        (sh_parse_name): Handle FDPIC relocation operators.
        * config/tc-sh.h (TARGET_FORMAT): Define specially for TE_UCLINUX.
        (sh_uclinux_target_format): Declare for TE_UCLINUX.
        * configure.tgt (sh-*-uclinux* | sh[12]-*-uclinux*): Set
        em=uclinux.
        * doc/c-sh.texi (SH Options): Document --fdpic.

        gas/testsuite/
        * gas/sh/basic.exp: Run new tests.  Handle uClinux like Linux.
        * gas/sh/fdpic.d: New file.
        * gas/sh/fdpic.s: New file.
        * gas/sh/reg-prefix.d: Force big-endian.
        * gas/sh/sh2a-pic.d: New file.
        * gas/sh/sh2a-pic.s: New file.
        * lib/gas-defs.exp (is_elf_format): Include sh*-*-uclinux*.

        include/elf/
        * sh.h (EF_SH_PIC, EF_SH_FDPIC): Define.
        (R_SH_FIRST_INVALID_RELOC_6, R_SH_LAST_INVALID_RELOC_6): New.  Adjust
        other invalid ranges.
        (R_SH_GOT20, R_SH_GOTOFF20, R_SH_GOTFUNCDESC, R_SH_GOTFUNCDESC20)
        (R_SH_GOTOFFFUNCDESC, R_SH_GOTOFFFUNCDESC20, R_SH_FUNCDESC)
        (R_SH_FUNCDESC_VALUE): New.

        ld/
        * Makefile.am (ALL_EMULATIONS): Add eshelf_fd.o and eshlelf_fd.o.
        (eshelf_fd.c, eshlelf_fd.c): New rules.
        * Makefile.in: Regenerate.
        * configure.tgt (sh-*-uclinux*): Add shelf_fd and shlelf_fd
        emulations.
        * emulparams/shelf_fd.sh: New file.
        * emulparams/shlelf_fd.sh: New file.
        * emulparams/shlelf_linux.sh: Update comment.

        ld/testsuite/
        * ld-sh/sh.exp: Handle uClinux like Linux.
        * lib/ld-lib.exp (is_elf_format): Include sh*-*-uclinux*.
        * ld-sh/fdpic-funcdesc-shared.d: New file.
        * ld-sh/fdpic-funcdesc-shared.s: New file.
        * ld-sh/fdpic-funcdesc-static.d: New file.
        * ld-sh/fdpic-funcdesc-static.s: New file.
        * ld-sh/fdpic-gotfuncdesc-shared.d: New file.
        * ld-sh/fdpic-gotfuncdesc-shared.s: New file.
        * ld-sh/fdpic-gotfuncdesc-static.d: New file.
        * ld-sh/fdpic-gotfuncdesc-static.s: New file.
        * ld-sh/fdpic-gotfuncdesci20-shared.d: New file.
        * ld-sh/fdpic-gotfuncdesci20-shared.s: New file.
        * ld-sh/fdpic-gotfuncdesci20-static.d: New file.
        * ld-sh/fdpic-gotfuncdesci20-static.s: New file.
        * ld-sh/fdpic-goti20-shared.d: New file.
        * ld-sh/fdpic-goti20-shared.s: New file.
        * ld-sh/fdpic-goti20-static.d: New file.
        * ld-sh/fdpic-goti20-static.s: New file.
        * ld-sh/fdpic-gotofffuncdesc-shared.d: New file.
        * ld-sh/fdpic-gotofffuncdesc-shared.s: New file.
        * ld-sh/fdpic-gotofffuncdesc-static.d: New file.
        * ld-sh/fdpic-gotofffuncdesc-static.s: New file.
        * ld-sh/fdpic-gotofffuncdesci20-shared.d: New file.
        * ld-sh/fdpic-gotofffuncdesci20-shared.s: New file.
        * ld-sh/fdpic-gotofffuncdesci20-static.d: New file.
        * ld-sh/fdpic-gotofffuncdesci20-static.s: New file.
        * ld-sh/fdpic-gotoffi20-shared.d: New file.
        * ld-sh/fdpic-gotoffi20-shared.s: New file.
        * ld-sh/fdpic-gotoffi20-static.d: New file.
        * ld-sh/fdpic-gotoffi20-static.s: New file.
        * ld-sh/fdpic-plt-be.d: New file.
        * ld-sh/fdpic-plt-le.d: New file.
        * ld-sh/fdpic-plt.s: New file.
        * ld-sh/fdpic-plti20-be.d: New file.
        * ld-sh/fdpic-plti20-le.d: New file.
        * ld-sh/fdpic-stack-default.d: New file.
        * ld-sh/fdpic-stack-size.d: New file.
        * ld-sh/fdpic-stack.s: New file.
@
text
@# Copyright (C) 1995, 1996, 1997, 2002, 2003, 2004, 2005, 2006, 2007, 2009
# Free Software Foundation, Inc.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA 02110-1301, USA.  

# Please email any bugs, comments, and/or additions to this file to:
# dejagnu@@gnu.org

# Written by Cygnus Support.

if {[istarget "sh*-*-linux-*"] || [istarget "sh*l*-*-netbsdelf*"]} then {
    global ASFLAGS
    set ASFLAGS "$ASFLAGS -big"
}
if {[istarget "sh64*-*-*"] || [istarget "sh5*-*-*"]} then {
    global ASFLAGS

    set old_ASFLAGS $ASFLAGS
    set ASFLAGS "$ASFLAGS --abi=32 --isa=SHcompact"
}

proc do_fp {} {
    set testname "fp.s: floating point tests (sh3e)"
    set x 0

    gas_start "fp.s" "-al"

    # Check the assembled instruction against a table built by the HP assembler
    # Any differences should be checked by hand -- with the number of problems
    # I've seen in the HP assembler I don't completely trust it.
    #
    # Instead of having a variable for each match string just increment the
    # total number of matches seen.  That's simpler when testing large numbers
    # of instructions (as these tests to).
    while 1 {
	expect {
	    -re "^ +\[0-9\]+ 0000 F008\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0002 F00A\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0004 F009\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0006 F00B\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0008 F006\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 000a F007\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 000c F10C\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 000e F08D\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0010 F09D\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0012 F100\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0014 F101\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0016 F102\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0018 F103\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 001a F10E\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 001c F104\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 001e F105\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0020 F04D\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0022 F05D\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0024 F06D\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0026 F02D\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0028 F03D\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 002a F00D\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 002c F01D\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 002e 435A\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0030 4356\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0032 436A\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0034 4366\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0036 035A\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0038 4352\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 003a 036A\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 003c 4362\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0000 08F0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0002 0AF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0004 09F0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0006 0BF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0008 06F0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 000a 07F0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 000c 0CF1\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 000e 8DF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0010 9DF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0012 00F1\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0014 01F1\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0016 02F1\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0018 03F1\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 001a 0EF1\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 001c 04F1\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 001e 05F1\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0020 4DF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0022 5DF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0024 6DF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0026 2DF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0028 3DF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 002a 0DF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 002c 1DF0\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 002e 5A43\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0030 5643\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0032 6A43\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0034 6643\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0036 5A03\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 0038 5243\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 003a 6A03\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "^ +\[0-9\]+ 003c 6243\[^\n\]*\n"	{ set x [expr $x+1] }
	    -re "\[^\n\]*\n"				{ }
	    timeout				{ perror "timeout\n"; break }
	    eof					{ break }
	}
    }

    # This was intended to do any cleanup necessary.  It kinda looks like it
    # isn't needed, but just in case, please keep it in for now.
    gas_finish

    # Did we find what we were looking for?  If not, flunk it.
    if [expr $x==31] then { pass $testname } else { fail $testname }
}


if [istarget sh*-*-*] then {
    # Test the basic instruction parser.
    do_fp

    # coff is missing information about the machine type, so everything is
    # dumped as sh4.
    if {[istarget sh*-*coff] || [istarget sh*-pe*] || [istarget sh*-rtems]} then {
	run_dump_test "pcrel-coff"
    } elseif {[istarget sh*-hms] } {
	run_dump_test "pcrel-hms"
    } elseif {![istarget sh64*-*-*] && ![istarget sh5*-*-*] } {
	# Test DSP instructions
	run_dump_test "dsp"

	run_dump_test "pcrel"

	run_dump_test "pcrel2"
    }

    if {[istarget sh*-*elf] || [istarget sh*-*linux*]} then {
	if {![istarget "sh64*-*-*"] && ![istarget "sh5*-*-*"]} then {
	    run_dump_test "sh4a"
	    run_dump_test "sh4a-fp"

	    run_dump_test "sh4a-dsp"
	    run_dump_test "sh4al-dsp"

	    run_dump_test "sh2a"
	    run_dump_test "sh2a-pic"
	}

	run_dump_test "pic"
	run_dump_test "fdpic"

	# Test TLS.
	run_dump_test "tlsd"

	run_dump_test "tlspic"

	run_dump_test "tlsnopic"

	# Test --renesas.
	run_dump_test "renesas-1"

	# Test --allow-reg-prefix.
	run_dump_test "reg-prefix"

	run_dump_test "too_large"

	run_dump_test "sign-extension"
    }
}

if {[info exists old_ASFLAGS]} {
    global ASFLAGS
    set ASFLAGS $old_ASFLAGS
}
@


1.27
log
@	* configure.tgt (sh*-*-netbsdelf*): Set endian according to cpu.
	* gas/sh/basic.exp: Add -big to ASFLAGS for sh*l*-*-netbsdelf*.
@
text
@d145 1
a145 1
    if {[istarget sh*-*elf] || [istarget sh*-linux*]} then {
d154 1
d158 1
@


1.26
log
@update copyright dates
@
text
@d23 1
a23 1
if [istarget "sh*-*-linux-*"] {
@


1.26.2.1
log
@	* configure.tgt (sh*-*-netbsdelf*): Set endian according to cpu.
	* gas/sh/basic.exp: Add -big to ASFLAGS for sh*l*-*-netbsdelf*.
@
text
@d23 1
a23 1
if {[istarget "sh*-*-linux-*"] || [istarget "sh*l*-*-netbsdelf*"]} then {
@


1.25
log
@	* config/tc-sh.c (md_apply_fix): Extend sign of the offset value
	for 64-bit host.
	* gas/sh/sign-extension.d: New file.
	* gas/sh/sign-extension.s: New file.
	* gas/sh/basic.exp: Run new test.
@
text
@d1 1
a1 1
# Copyright (C) 1995, 1996, 1997, 2002, 2003, 2004, 2007, 2009
@


1.24
log
@Switch to GPLv3
@
text
@d1 1
a1 1
# Copyright (C) 1995, 1996, 1997, 2002, 2003, 2004, 2007
d172 2
@


1.23
log
@* config/tc-sh.c (md_apply_fix): Do not allow the generic code in
  fixup_segment() to repeat a range check on a value that have already
  been checked here.
* gas/sh/basic.exp: Run "too_large" dump test.
* gas/sh/too_large.s: New test file.  Check that .byte directives do not
  generate a bogus overflow message.
* gas/sh/too_large.s: New test control file.
@
text
@d1 1
a1 1
# Copyright (C) 1995, 1996, 1997, 2002, 2003, 2004
d6 1
a6 1
# the Free Software Foundation; either version 2 of the License, or
@


1.22
log
@* config/tc-sh.c (allow_dollar_register_prefix): New variable.
  (parse_reg_without_prefix): New function.
  (parse_reg): Check for '$' register prefix if --allow-reg-prefix is set.
  (option md_longopts): Add allow-reg-prefix option.
* doc/c-sh.texi: Document --allow-reg-prefix option.
* NEWS: Mention the new switch.

* gas/sh/basic.exp:  Run reg-prefix test.
* gas/sh/reg-prefix.s: New
* gas/sh/reg-prefix.d: New
@
text
@d170 2
@


1.21
log
@Replace linux-gnu with linux-* to allow for versions of Linux which do not use
glibc.
@
text
@d165 1
a165 1
	# Test -renesas.
d167 3
@


1.20
log
@Update the address and phone number of the FSF
@
text
@d23 1
a23 1
if [istarget "sh*-*-linux-gnu"] {
@


1.19
log
@* gas/sh/basic.exp: Add an sh-hms version of the pcrel test.
* gas/sh/pcrel-hms.d: New file.  Adjusted form of pcrel-coff.d for the sh-hms
  target.
* gas/sh/arch/arch.exp: Expect the same failures for sh-hms port as for the
  sh-coff port.
@
text
@d16 1
a16 1
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  
@


1.18
log
@[gas/testsuite]
	* gas/sh/basic.exp: Don't do sh2a test for sh5.
	* gas/sh/sh2a.d: Match elf32-sh* format too.

[ld/testsuite]
	* ld-sh/sh64/crange3-cmpct.rd: Update.
	* ld-sh/sh64/crange3-media.rd: Update.
@
text
@d134 2
@


1.17
log
@include/elf/ChangeLog:
Introduce SH2a support.
2004-02-18  Corinna Vinschen  <vinschen@@redhat.com>
* sh.h (EF_SH2A_NOFPU): New.
2003-12-01  Michael Snyder  <msnyder@@redhat.com>
* sh.h (EF_SH2A): New.
bfd/ChangeLog:
Introduce SH2a support.
2004-02-18  Corinna Vinschen  <vinschen@@redhat.com>
* archures.c (bfd_mach_sh2a_nofpu): New.
* bfd-in2.h: Rebuilt.
* cpu-sh.c (SH2A_NOFPU_NEXT): New.
(arch_info_struct): Add sh2a_nofpu.
* elf32-sh.c (sh_elf_set_mach_from_flags): Handle sh2a_nofpu.
2003-12-29  DJ Delorie  <dj@@redhat.com>
* reloc.c: Add relocs for sh2a.
* bfd-in2.h: Regenerate.
* libbfd.hh: Regenerate.
2003-12-01  Michael Snyder  <msnyder@@redhat.com>
* archures.c (bfd_mach_sh2a): New.
* bfd-in2.h: Rebuilt.
* cpu-sh.c (SH_NEXT, SH2_NEXT, etc.): Change defines to enums.
(SH2A_NEXT): New.
(arch_info_struct): Add sh2a.
* elf32-sh.c (sh_elf_set_mach_from_flags): Handle sh2a.
binutils/ChangeLog:
* readelf.c (get_machine_flags <EM_SH>): Handle EF_SH2A and
EF_SH2A_NOFPU.
gas/ChangeLog:
Introduce SH2a support.
2004-02-24  Corinna Vinschen  <vinschen@@redhat.com>
* config/tc-sh.c (get_specific): Change arch_sh2a_up to
arch_sh2a_nofpu_up.
2004-02-24  Corinna Vinschen  <vinschen@@redhat.com>
* config/tc-sh.c (md_parse_option): Add sh2a-nofpu ISA handling.
2004-02-20  Corinna Vinschen  <vinschen@@redhat.com>
* config/tc-sh.c (sh_elf_final_processing): Move sh2a recognition
to end of conditional expression.
2004-02-20  Corinna Vinschen  <vinschen@@redhat.com>
* config/tc-sh.c: Add sh2a-nofpu support.
2003-12-29  DJ Delorie  <dj@@redhat.com>
* tc-sh.c: Add sh2a support.
(parse_reg): Add tbr.
(parse_at): Support @@@@(disp,tbr).
(get_specific): Support sh2a opcodes.
(insert4): New, for 4 byte relocs.
(build_Mytes): Support sh2a opcodes.
(md_apply_fix3_Mytes): Support sh2a opcodes.
2003-12-02  Michael Snyder  <msnyder@@redhat.com>
* config/tc-sh.c (md_parse_option): Handle sh2a.
(sh_elf_final_processing): Ditto.
gas/testsuite/ChangeLog:
2003-12-30  DJ Delorie  <dj@@redhat.com>
* gas/sh/sh2a.s: New.
* gas/sh/sh2a.d: New.
* gas/sh/basic.exp: Add it.
@
text
@d150 2
a164 1
	run_dump_test "sh2a"
@


1.16
log
@[gas]
	2004-04-01  Asgari Jinia  <asgarij@@kpitcummins.com>
		    Dhananjay Deshpande <dhananjayd@@kpitcummins.com>
	* config/tc-sh.c (dont_adjust_reloc_32): New variable.
	(sh_fix_adjustable): Avoid adjusting BFD_RELOC_32 when
	dont_adjust_reloc_32 is set.
	(md_longopts): Add option -renesas.
	(md_parse_option, md_show_usage): Likewise.
	* doc/c-sh.texi: Likewise.
[gas/testsuite]
	2004-04-01  Asgari Jinia  <asgarij@@kpitcummins.com>
	* gas/sh/renesas-1.s, gas/sh/renesas-1.d: New test for -renesas
	option.
	* gas/sh/basic.exp: Run the new test.
@
text
@d163 1
@


1.15
log
@	* gas/sh/basic.exp: Don't do sh4a tests for sh5.
@
text
@d160 3
@


1.15.4.1
log
@Merge to 2.15 branch.
@
text
@a159 3

	# Test -renesas.
	run_dump_test "renesas-1"
@


1.14
log
@2003-12-03  Alexandre Oliva  <aoliva@@redhat.com>

	* config/tc-sh.c: Add support for sh4a and no-fpu variants,
	with appropriate additions to md_show_usage.
	* testsuite/gas/sh/basic.exp: Call tests for sh4a.
	* testsuite/gas/sh/{err-sh4a-fp.s, err-sh4a.s,
	err-sh4al-dsp.s, sh4a-dsp.d, sh4a-dsp.s, sh4a-fp.d,
	sh4a-fp.s, sh4a.d, sh4a.s, sh4al-dsp.d, sh4al-dsp.s:
	New files, tests for sh4a and related variants.
	* doc/c-sh.texi: Document new -isa options.
	* doc/c-sh64.texi: Ditto.
	* NEWS: Mention new support for sh4a.
@
text
@d1 2
a2 1
# Copyright (C) 1995, 1996, 1997, 2002, 2003 Free Software Foundation, Inc.
d144 3
a146 2
	run_dump_test "sh4a"
	run_dump_test "sh4a-fp"
d148 3
a150 2
	run_dump_test "sh4a-dsp"
	run_dump_test "sh4al-dsp"
@


1.13
log
@	* gas/sh/basic.exp: Define ASFLAGS appropriately and don't do
	dsp test for sh64/sh5 targets.
	* gas/sh/sh64/crange1.s: Tidy up to match data alignment.
	* gas/sh/sh64/crange1-1.d: Update.
	* gas/sh/sh64/crange1-2.d: Likewise.
	* gas/sh/sh64/datal32-3.d: Likewise.
	* gas/sh/sh64/datal64-3.d: Likewise.
	* gas/sh/sh64/localcom-1.d: Likewise.
@
text
@d1 1
a1 1
# Copyright (C) 1995, 1996, 1997, 2002 Free Software Foundation, Inc.
d143 6
@


1.12
log
@	* gas/sh/tlsd.s, gas/sh/tlsd.d: New.
	* gas/sh/tlsnopic.s, gas/sh/tlsnopic.d: New.
	* gas/sh/tlspic.s, gas/sh/tlspic.d: New.
	* gas/sh/basic.exp: Add new tests.
@
text
@d26 1
a26 1
if [istarget "sh64*-*-linux*"] {
d133 1
a133 1
    } elseif {![istarget sh64*-*-linux*]} {
@


1.11
log
@* gas/elf.exp: Don't run for sh64*-*-linux*, because it sets the
lsb in SHmedia code addresses.
* gas/sh/basic.exp: Force SHcompact for sh64*-*-linux* to enable
recognition of SH-1/2/3/4 instructions.
(proc do_fp): Do not run dsp tests for sh64*-*-linux*.
* gas/sh/sh64/abi-32.d: Adjust expected output to include
sh64*-*-linux* formats too.
* gas/sh/sh64/abi-64.d, gas/sh/sh64/basic-1.d,
gas/sh/sh64/case-1.d, gas/sh/sh64/case-noexp-1.d,
gas/sh/sh64/crange1-1.d, gas/sh/sh64/crange1-2.d,
gas/sh/sh64/crange2-1.d, gas/sh/sh64/crange2-2.d,
sh/sh64/crange2-noexp-1.d, gas/sh/sh64/crange3-1.d,
gas/sh/sh64/crange4-1.d, gas/sh/sh64/crange5-1.d,
gas/sh/sh64/creg-1.d, gas/sh/sh64/creg-2.d, gas/sh/sh64/datal-2.d,
gas/sh/sh64/datal32-1.d, gas/sh/sh64/datal32-3.d,
gas/sh/sh64/datal64-1.d, gas/sh/sh64/datal64-3.d,
gas/sh/sh64/endian-1.d, gas/sh/sh64/endian-2.d,
gas/sh/sh64/err-noexp-cmd1.s, gas/sh/sh64/immexpr32-1.d,
gas/sh/sh64/immexpr32-2.d, gas/sh/sh64/immexpr64-1.d,
gas/sh/sh64/immexpr64-2.d, gas/sh/sh64/lineno.d,
gas/sh/sh64/localcom-1.d, gas/sh/sh64/mix-1.d,
gas/sh/sh64/mix-noexp-1.d, gas/sh/sh64/movi-3.d,
gas/sh/sh64/movi32-1.d, gas/sh/sh64/movi32-2.d,
gas/sh/sh64/movi32-noexp-2.d, gas/sh/sh64/movi64-1.d,
gas/sh/sh64/movi64-2.d, gas/sh/sh64/movi64-3.d,
gas/sh/sh64/movi64-noexp-2.d, gas/sh/sh64/pt-1.d,
gas/sh/sh64/pt-noexp-1.d, gas/sh/sh64/pt32-1.d,
gas/sh/sh64/pt32-noexp-2.d, gas/sh/sh64/pt64-1.d,
gas/sh/sh64/pt64-32-1.d, gas/sh/sh64/pt64-32-2.d,
gas/sh/sh64/pt64-noexp-2.d, gas/sh/sh64/ptc32-1.d,
gas/sh/sh64/ptc32-noexp-1.d, gas/sh/sh64/ptc64-1.d,
gas/sh/sh64/ptc64-32-1.d, gas/sh/sh64/ptc64-noexp-1.d,
gas/sh/sh64/ptext32-1.d, gas/sh/sh64/ptext32-noexp-1.d,
gas/sh/sh64/ptext64-1.d, gas/sh/sh64/ptext64-32-1.d,
gas/sh/sh64/ptext64-noexp-1.d, gas/sh/sh64/rel32-1.d,
gas/sh/sh64/rel32-2.d, gas/sh/sh64/rel32-3.d,
gas/sh/sh64/rel32-4.d, gas/sh/sh64/rel32-5.d,
gas/sh/sh64/rel64-1.d, gas/sh/sh64/rel64-2.d,
gas/sh/sh64/rel64-3.d, gas/sh/sh64/rel64-4.d,
gas/sh/sh64/rel64-5.d, gas/sh/sh64/relax-1.d,
gas/sh/sh64/relax-2.d, gas/sh/sh64/relax-3.d,
gas/sh/sh64/shift32-1.d, gas/sh/sh64/shift32-3.d,
gas/sh/sh64/shift32-noexp-3.d, gas/sh/sh64/shift64-1.d,
gas/sh/sh64/shift64-2.d, gas/sh/sh64/shift64-3.d,
gas/sh/sh64/shift64-noexp-3.d, gas/sh/sh64/syntax-1.d,
gas/sh/sh64/syntax-2.d, gas/sh/sh64/ua32-1.d,
gas/sh/sh64/ua64-1.d: Likewise.
@
text
@d144 7
@


1.10
log
@2002-09-27  Kaz Kojima  <kkojima@@rr.iij4u.or.jp>

        * config/tc-sh.c (sh_force_relocation): Return 0 for
        some PC relative relocations when not relaxing.
        * testsuite/gas/sh/pcrel2.s: New.
        * testsuite/gas/sh/pcrel2.d: New.
        * testsuite/gas/sh/basic.exp: Add pcrel2 test.
@
text
@d26 6
d133 1
a133 1
    } else {
d145 5
@


1.9
log
@2002-09-08  Ben Elliston  <bje@@redhat.com>

	* gas/hppa/basic/basic.exp: Update DejaGnu mail address.
	* gas/hppa/parse/parse.exp: Likewise.
	* gas/hppa/reloc/reloc.exp: Likewise.
	* gas/hppa/unsorted/unsorted.exp: Likewise.
	* gas/mn10200/basic.exp: Likewise.
	* gas/mn10300/basic.exp: Likewise.
	* gas/sh/basic.exp: Likewise.
	* gas/sh/sh64/sh64.exp: Likewise.
	* gas/v850/basic.exp: Likewise.
	* lib/gas-defs.exp: Likewise.

	* gas/all/gas.exp: Removing limping support for DejaGnu 1.1.1.
	* gasp/gasp.exp: Likewise.
@
text
@d132 2
@


1.8
log
@	* gas/all/gas.exp (forward references): Don't test c30.
	* gas/d30v/guard-debug.d: Use -gstabs rather than -g.
	* gas/elf/ehopt0.s: Don't use "$" in labels.
	* gas/ieee-fp/x930509a.exp: Don't test c30.
	* gas/m68hc11/malis.d: Adjust -I so that test runs when not building
	in source dir.
	* gas/mri/mri.exp: Don't run on "m68hc*".
	* gas/sh/basic.exp (do_fp): Match LE too.
	(pcrel-coff): Run this version for "sh*-pe*" and rename "sh*-hms" to
	"sh*-rtems".
	* gas/sh/pcrel-coff.d: Add -EB to objdump flags.
	* gas/vtable/vtable.exp: Don't run on linuxecoff.  setup_xfail in
	preference to not running on ELF targets that might one day pass.
	Add more xfails.  Add more targets to the REL list.
@
text
@d18 1
a18 1
# DejaGnu@@cygnus.com
@


1.7
log
@	* gas/sh/pcrel-coff.s: New file.
	* gas/sh/pcrel-coff.d: Likewise.
	* gas/sh/basic.exp: For coff, don't do dsp test,
	and a modified pcrel test.
@
text
@d73 31
d125 1
a125 1
    if {[istarget sh*-*coff] || [istarget sh*-hms]} then {
@


1.6
log
@2002-02-18  Daniel Jacobowitz  <drow@@mvista.com>

        * gas/sh/basic.exp: Don't run PIC tests for targets that don't
        support it.
@
text
@d91 11
a101 2
    # Test DSP instructions
    run_dump_test "dsp"
a105 2

    run_dump_test "pcrel"
@


1.5
log
@* gas/sh/pic.d, gas/sh/pic.s: New test.
* gas/sh/basic.exp: Run it.
@
text
@d94 3
a96 1
    run_dump_test "pic"
@


1.5.2.1
log
@2002-02-18  Daniel Jacobowitz  <drow@@mvista.com>

        * gas/sh/basic.exp: Don't run PIC tests for targets that don't
        support it.
@
text
@d94 1
a94 3
    if {[istarget sh*-*elf] || [istarget sh*-linux*]} then {
	run_dump_test "pic"
    }
@


1.4
log
@* gas/testsuite/gas/sh/pcrel.d: New test.
* gas/testsuite/gas/sh/pcrel.s: Sources for new test.
* gas/testsuite/gas/sh/basic.exp: Run it.
@
text
@d94 2
@


1.3
log
@Fix testsuites for bigendian sh-linux
@
text
@d1 1
a1 1
# Copyright (C) 1995, 1996, 1997 Free Software Foundation, Inc.
d93 2
@


1.2
log
@Add test of SH DSP instructions
@
text
@d22 5
@


1.1
log
@Initial revision
@
text
@d86 2
@


1.1.1.1
log
@19990502 sourceware import
@
text
@@


1.1.1.1.4.1
log
@add tests of SH DSP instructions
@
text
@a85 2
    # Test DSP instructions
    run_dump_test "dsp"
@


