head	1.15;
access;
symbols
	binutils-2_24-branch:1.15.0.2
	binutils-2_24-branchpoint:1.15
	binutils-2_21_1:1.14
	binutils-2_23_2:1.14.12.1
	binutils-2_23_1:1.14
	binutils-2_23:1.14
	binutils-2_23-branch:1.14.0.12
	binutils-2_23-branchpoint:1.14
	binutils-2_22_branch:1.14.0.10
	binutils-2_22:1.14
	binutils-2_22-branch:1.14.0.8
	binutils-2_22-branchpoint:1.14
	binutils-2_21:1.14
	binutils-2_21-branch:1.14.0.6
	binutils-2_21-branchpoint:1.14
	binutils-2_20_1:1.14
	binutils-2_20:1.14
	binutils-arc-20081103-branch:1.12.0.8
	binutils-arc-20081103-branchpoint:1.12
	binutils-2_20-branch:1.14.0.4
	binutils-2_20-branchpoint:1.14
	dje-cgen-play1-branch:1.14.0.2
	dje-cgen-play1-branchpoint:1.14
	arc-20081103-branch:1.12.0.6
	arc-20081103-branchpoint:1.12
	binutils-2_19_1:1.12
	binutils-2_19:1.12
	binutils-2_19-branch:1.12.0.4
	binutils-2_19-branchpoint:1.12
	binutils-2_18:1.12
	binutils-2_18-branch:1.12.0.2
	binutils-2_18-branchpoint:1.12
	binutils-csl-coldfire-4_1-32:1.11
	binutils-csl-sourcerygxx-4_1-32:1.11
	binutils-csl-innovasic-fido-3_4_4-33:1.11
	binutils-csl-sourcerygxx-3_4_4-32:1.9
	binutils-csl-coldfire-4_1-30:1.11
	binutils-csl-sourcerygxx-4_1-30:1.11
	binutils-csl-coldfire-4_1-28:1.11
	binutils-csl-sourcerygxx-4_1-29:1.11
	binutils-csl-sourcerygxx-4_1-28:1.11
	binutils-csl-arm-2006q3-27:1.11
	binutils-csl-sourcerygxx-4_1-27:1.11
	binutils-csl-arm-2006q3-26:1.11
	binutils-csl-sourcerygxx-4_1-26:1.11
	binutils-csl-sourcerygxx-4_1-25:1.11
	binutils-csl-sourcerygxx-4_1-24:1.11
	binutils-csl-sourcerygxx-4_1-23:1.11
	binutils-csl-sourcerygxx-4_1-21:1.11
	binutils-csl-arm-2006q3-21:1.11
	binutils-csl-sourcerygxx-4_1-22:1.11
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.11
	binutils-csl-sourcerygxx-4_1-20:1.11
	binutils-csl-arm-2006q3-19:1.11
	binutils-csl-sourcerygxx-4_1-19:1.11
	binutils-csl-sourcerygxx-4_1-18:1.11
	binutils-csl-renesas-4_1-9:1.11
	binutils-csl-sourcerygxx-3_4_4-25:1.9
	binutils-csl-renesas-4_1-8:1.11
	binutils-csl-renesas-4_1-7:1.11
	binutils-csl-renesas-4_1-6:1.11
	binutils-csl-sourcerygxx-4_1-17:1.11
	binutils-csl-sourcerygxx-4_1-14:1.11
	binutils-csl-sourcerygxx-4_1-15:1.11
	binutils-csl-sourcerygxx-4_1-13:1.11
	binutils-2_17:1.11
	binutils-csl-sourcerygxx-4_1-12:1.11
	binutils-csl-sourcerygxx-3_4_4-21:1.11
	binutils-csl-wrs-linux-3_4_4-24:1.9
	binutils-csl-wrs-linux-3_4_4-23:1.9
	binutils-csl-sourcerygxx-4_1-9:1.11
	binutils-csl-sourcerygxx-4_1-8:1.11
	binutils-csl-sourcerygxx-4_1-7:1.11
	binutils-csl-arm-2006q1-6:1.11
	binutils-csl-sourcerygxx-4_1-6:1.11
	binutils-csl-wrs-linux-3_4_4-22:1.9
	binutils-csl-coldfire-4_1-11:1.11
	binutils-csl-sourcerygxx-3_4_4-19:1.11
	binutils-csl-coldfire-4_1-10:1.11
	binutils-csl-sourcerygxx-4_1-5:1.11
	binutils-csl-sourcerygxx-4_1-4:1.11
	binutils-csl-wrs-linux-3_4_4-21:1.9
	binutils-csl-morpho-4_1-4:1.11
	binutils-csl-sourcerygxx-3_4_4-17:1.11
	binutils-csl-wrs-linux-3_4_4-20:1.9
	binutils-2_17-branch:1.11.0.4
	binutils-2_17-branchpoint:1.11
	binutils-csl-2_17-branch:1.11.0.2
	binutils-csl-2_17-branchpoint:1.11
	binutils-csl-gxxpro-3_4-branch:1.9.0.6
	binutils-csl-gxxpro-3_4-branchpoint:1.9
	binutils-2_16_1:1.9
	binutils-csl-arm-2005q1b:1.9
	binutils-2_16:1.9
	binutils-csl-arm-2005q1a:1.9
	binutils-csl-arm-2005q1-branch:1.9.0.4
	binutils-csl-arm-2005q1-branchpoint:1.9
	binutils-2_16-branch:1.9.0.2
	binutils-2_16-branchpoint:1.9
	csl-arm-2004-q3d:1.8
	csl-arm-2004-q3:1.8
	binutils-2_15:1.7.6.1
	binutils-2_15-branchpoint:1.7
	csl-arm-2004-q1a:1.8
	csl-arm-2004-q1:1.8
	binutils-2_15-branch:1.7.0.6
	cagney_bfdfile-20040213-branch:1.7.0.4
	cagney_bfdfile-20040213-branchpoint:1.7
	cagney_bigcore-20040122-branch:1.7.0.2
	cagney_bigcore-20040122-branchpoint:1.7
	csl-arm-2003-q4:1.7
	binutils-2_14:1.5
	binutils-2_14-branch:1.5.0.2
	binutils-2_14-branchpoint:1.5
	binutils-2_13_2_1:1.3
	binutils-2_13_2:1.3
	binutils-2_13_1:1.3
	binutils-2_13:1.3
	binutils-2_13-branchpoint:1.3
	binutils-2_13-branch:1.3.0.4
	binutils-2_12_1:1.3
	binutils-2_12:1.3
	binutils-2_12-branch:1.3.0.2
	binutils-2_12-branchpoint:1.3
	cygnus_cvs_20020108_pre:1.3
	binutils_latest_snapshot:1.15;
locks; strict;
comment	@# @;


1.15
date	2012.10.29.09.25.15;	author amodra;	state Exp;
branches;
next	1.14;

1.14
date	2009.02.06.01.50.53;	author bergner;	state Exp;
branches
	1.14.12.1;
next	1.13;

1.13
date	2008.12.04.10.29.16;	author bje;	state Exp;
branches;
next	1.12;

1.12
date	2007.04.18.23.58.12;	author amodra;	state Exp;
branches
	1.12.4.1;
next	1.11;

1.11
date	2005.07.05.13.25.54;	author pbrook;	state Exp;
branches;
next	1.10;

1.10
date	2005.03.10.12.52.30;	author amodra;	state Exp;
branches;
next	1.9;

1.9
date	2005.03.02.13.25.01;	author amodra;	state Exp;
branches;
next	1.8;

1.8
date	2004.03.16.00.58.42;	author amodra;	state Exp;
branches;
next	1.7;

1.7
date	2003.12.10.22.12.50;	author zack;	state Exp;
branches
	1.7.6.1;
next	1.6;

1.6
date	2003.07.26.10.22.01;	author amodra;	state Exp;
branches;
next	1.5;

1.5
date	2002.12.10.00.42.53;	author aldyh;	state Exp;
branches;
next	1.4;

1.4
date	2002.11.12.04.04.13;	author amodra;	state Exp;
branches;
next	1.3;

1.3
date	2001.11.15.01.08.52;	author amodra;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.14.01.19.08;	author mrg;	state Exp;
branches;
next	1.1;

1.1
date	2001.10.13.01.59.09;	author mrg;	state Exp;
branches;
next	;

1.14.12.1
date	2013.01.21.13.48.46;	author amodra;	state Exp;
branches;
next	;

1.12.4.1
date	2009.03.02.13.43.14;	author amodra;	state Exp;
branches;
next	1.12.4.2;

1.12.4.2
date	2009.03.02.13.54.22;	author amodra;	state Exp;
branches;
next	;

1.7.6.1
date	2004.03.16.00.59.35;	author amodra;	state Exp;
branches;
next	;


desc
@@


1.15
log
@	* gas/cfi/cfi.exp: Remove redundant ppc test.  Exclude
	powerpc-pe targets from cfi-common-6 test.
	* gas/cfi/cfi-ppc-1.d: Use objdump to handle pe.
	* gas/cfi/cfi-ppc-1.s: Don't use .type and .size.
	* gas/ppc/ppc.exp: Exclude various tests for powerpc-pe.  Exclude
	vle tests for le targets.
	* gas/ppc/476.d, * gas/ppc/476.s: Update for le output.  Use .text
	rather than section directive with quotes.
	* gas/ppc/a2.d,	* gas/ppc/a2.s: Likewise.
	* gas/ppc/altivec.d, * gas/ppc/altivec.s: Likewise.
	* gas/ppc/altivec2.d: Likewise.
	* gas/ppc/altivec_and_spe.d: Likewise.
	* gas/ppc/astest.d: Likewise.
	* gas/ppc/astest2.d: Likewise.
	* gas/ppc/astest2_64.d: Likewise.
	* gas/ppc/astest64.d: Likewise.
	* gas/ppc/booke.d, * gas/ppc/booke.s: Likewise.
	* gas/ppc/cell.d, * gas/ppc/cell.s: Likewise.
	* gas/ppc/common.d, * gas/ppc/common.s: Likewise.
	* gas/ppc/e500.d, * gas/ppc/e500.s: Likewise.
	* gas/ppc/e500mc.d, * gas/ppc/e500mc.s: Likewise.
	* gas/ppc/e500mc64_nop.d, * gas/ppc/e500mc64_nop.s: Likewise.
	* gas/ppc/e5500_nop.d, * gas/ppc/e5500_nop.s: Likewise.
	* gas/ppc/e6500.d, * gas/ppc/e6500.s: Likewise.
	* gas/ppc/e6500_nop.d, * gas/ppc/e6500_nop.s: Likewise.
	* gas/ppc/machine.d: Likewise.
	* gas/ppc/power4.d, * gas/ppc/power4.s: Likewise.
	* gas/ppc/power4_32.d, * gas/ppc/power4_32.s: Likewise.
	* gas/ppc/power6.d, * gas/ppc/power6.s: Likewise.
	* gas/ppc/power7.d, * gas/ppc/power7.s: Likewise.
	* gas/ppc/ppc750ps.d, * gas/ppc/ppc750ps.s: Likewise.
	* gas/ppc/regnames.d: Likewise.
	* gas/ppc/simpshft.d: Likewise.
	* gas/ppc/test1elf32.d: Likewise.
	* gas/ppc/test1elf64.d: Likewise.
	* gas/ppc/titan.d, * gas/ppc/titan.s: Likewise.
	* gas/ppc/vle-reloc.s: Likewise.
	* gas/ppc/vle-simple-1.s: Likewise.
	* gas/ppc/vle-simple-2.s: Likewise.
	* gas/ppc/vle-simple-3.s: Likewise.
	* gas/ppc/vle-simple-4.s: Likewise.
	* gas/ppc/vle-simple-5.s: Likewise.
	* gas/ppc/vle-simple-6.s: Likewise.
	* gas/ppc/vle.s: Likewise.
	* gas/ppc/vsx.d, * gas/ppc/vsx.s: Likewise.
@
text
@#as: -mbooke
#objdump: -dr -Mbooke
#name: BookE tests

.*

Disassembly of section \.text:

0+0000000 <branch_target_1>:
   0:	(7c a8 48 2c|2c 48 a8 7c) 	icbt    5,r8,r9
   4:	(7c a6 02 26|26 02 a6 7c) 	mfapidi r5,r6
   8:	(7c 07 46 24|24 46 07 7c) 	tlbivax r7,r8
   c:	(7c 0b 67 24|24 67 0b 7c) 	tlbsx   r11,r12
  10:	(7c 00 07 a4|a4 07 00 7c) 	tlbwe   
  14:	(7c 00 07 a4|a4 07 00 7c) 	tlbwe   
  18:	(7c 21 0f a4|a4 0f 21 7c) 	tlbwe   r1,r1,1

0+000001c <branch_target_2>:
  1c:	(4c 00 00 66|66 00 00 4c) 	rfci
  20:	(7c 60 01 06|06 01 60 7c) 	wrtee   r3
  24:	(7c 00 81 46|46 81 00 7c) 	wrteei  1
  28:	(7c 85 02 06|06 02 85 7c) 	mfdcrx  r4,r5
  2c:	(7c aa 3a 86|86 3a aa 7c) 	mfdcr   r5,234
  30:	(7c e6 03 06|06 03 e6 7c) 	mtdcrx  r6,r7
  34:	(7d 10 6b 86|86 6b 10 7d) 	mtdcr   432,r8
  38:	(7c 00 04 ac|ac 04 00 7c) 	msync
  3c:	(7c 09 55 ec|ec 55 09 7c) 	dcba    r9,r10
  40:	(7c 00 06 ac|ac 06 00 7c) 	mbar    
  44:	(7c 00 06 ac|ac 06 00 7c) 	mbar    
  48:	(7c 20 06 ac|ac 06 20 7c) 	mbar    1
  4c:	(7d 8d 77 24|24 77 8d 7d) 	tlbsx   r12,r13,r14
  50:	(7d 8d 77 25|25 77 8d 7d) 	tlbsx\.  r12,r13,r14
  54:	(7c 12 42 a6|a6 42 12 7c) 	mfsprg  r0,2
  58:	(7c 12 42 a6|a6 42 12 7c) 	mfsprg  r0,2
  5c:	(7c 12 43 a6|a6 43 12 7c) 	mtsprg  2,r0
  60:	(7c 12 43 a6|a6 43 12 7c) 	mtsprg  2,r0
  64:	(7c 07 42 a6|a6 42 07 7c) 	mfsprg  r0,7
  68:	(7c 07 42 a6|a6 42 07 7c) 	mfsprg  r0,7
  6c:	(7c 17 43 a6|a6 43 17 7c) 	mtsprg  7,r0
  70:	(7c 17 43 a6|a6 43 17 7c) 	mtsprg  7,r0
  74:	(7c 05 32 2c|2c 32 05 7c) 	dcbt    r5,r6
  78:	(7c 05 32 2c|2c 32 05 7c) 	dcbt    r5,r6
  7c:	(7d 05 32 2c|2c 32 05 7d) 	dcbt    8,r5,r6
@


1.14
log
@gas/testsuite/
	* gas/ppc/booke.s ("dcbt", "dcbtst"): New tests.
	* gas/ppc/booke.d: Likewise.
	* gas/ppc/power4_32.s: Likewise.
	* gas/ppc/power4_32.d: Likewise.

opcodes/
        * ppc-opc.c: Update copyright year.
        (powerpc_opcodes) <"dcbt", "dcbtst">: Deprecate the Embedded operand
        ordering for POWER4 and later and use the correct Server ordering.
@
text
@d5 1
a5 1
.*: +file format elf(32)?(64)?-powerpc.*
d10 7
a16 7
   0:	7c a8 48 2c 	icbt    5,r8,r9
   4:	7c a6 02 26 	mfapidi r5,r6
   8:	7c 07 46 24 	tlbivax r7,r8
   c:	7c 0b 67 24 	tlbsx   r11,r12
  10:	7c 00 07 a4 	tlbwe   
  14:	7c 00 07 a4 	tlbwe   
  18:	7c 21 0f a4 	tlbwe   r1,r1,1
d19 25
a43 25
  1c:	4c 00 00 66 	rfci
  20:	7c 60 01 06 	wrtee   r3
  24:	7c 00 81 46 	wrteei  1
  28:	7c 85 02 06 	mfdcrx  r4,r5
  2c:	7c aa 3a 86 	mfdcr   r5,234
  30:	7c e6 03 06 	mtdcrx  r6,r7
  34:	7d 10 6b 86 	mtdcr   432,r8
  38:	7c 00 04 ac 	msync
  3c:	7c 09 55 ec 	dcba    r9,r10
  40:	7c 00 06 ac 	mbar    
  44:	7c 00 06 ac 	mbar    
  48:	7c 20 06 ac 	mbar    1
  4c:	7d 8d 77 24 	tlbsx   r12,r13,r14
  50:	7d 8d 77 25 	tlbsx\.  r12,r13,r14
  54:	7c 12 42 a6 	mfsprg  r0,2
  58:	7c 12 42 a6 	mfsprg  r0,2
  5c:	7c 12 43 a6 	mtsprg  2,r0
  60:	7c 12 43 a6 	mtsprg  2,r0
  64:	7c 07 42 a6 	mfsprg  r0,7
  68:	7c 07 42 a6 	mfsprg  r0,7
  6c:	7c 17 43 a6 	mtsprg  7,r0
  70:	7c 17 43 a6 	mtsprg  7,r0
  74:	7c 05 32 2c 	dcbt    r5,r6
  78:	7c 05 32 2c 	dcbt    r5,r6
  7c:	7d 05 32 2c 	dcbt    8,r5,r6
@


1.14.12.1
log
@	PR 12549
	PR 14493
	PR 14567
	PR 14662
	PR 14758
	PR 14813
	PR 14904
	PR 14915
	PR 14926
	PR 14950
	PR 14962
	Apply mainline patches
@
text
@d5 1
a5 1
.*
d10 7
a16 7
   0:	(7c a8 48 2c|2c 48 a8 7c) 	icbt    5,r8,r9
   4:	(7c a6 02 26|26 02 a6 7c) 	mfapidi r5,r6
   8:	(7c 07 46 24|24 46 07 7c) 	tlbivax r7,r8
   c:	(7c 0b 67 24|24 67 0b 7c) 	tlbsx   r11,r12
  10:	(7c 00 07 a4|a4 07 00 7c) 	tlbwe   
  14:	(7c 00 07 a4|a4 07 00 7c) 	tlbwe   
  18:	(7c 21 0f a4|a4 0f 21 7c) 	tlbwe   r1,r1,1
d19 25
a43 25
  1c:	(4c 00 00 66|66 00 00 4c) 	rfci
  20:	(7c 60 01 06|06 01 60 7c) 	wrtee   r3
  24:	(7c 00 81 46|46 81 00 7c) 	wrteei  1
  28:	(7c 85 02 06|06 02 85 7c) 	mfdcrx  r4,r5
  2c:	(7c aa 3a 86|86 3a aa 7c) 	mfdcr   r5,234
  30:	(7c e6 03 06|06 03 e6 7c) 	mtdcrx  r6,r7
  34:	(7d 10 6b 86|86 6b 10 7d) 	mtdcr   432,r8
  38:	(7c 00 04 ac|ac 04 00 7c) 	msync
  3c:	(7c 09 55 ec|ec 55 09 7c) 	dcba    r9,r10
  40:	(7c 00 06 ac|ac 06 00 7c) 	mbar    
  44:	(7c 00 06 ac|ac 06 00 7c) 	mbar    
  48:	(7c 20 06 ac|ac 06 20 7c) 	mbar    1
  4c:	(7d 8d 77 24|24 77 8d 7d) 	tlbsx   r12,r13,r14
  50:	(7d 8d 77 25|25 77 8d 7d) 	tlbsx\.  r12,r13,r14
  54:	(7c 12 42 a6|a6 42 12 7c) 	mfsprg  r0,2
  58:	(7c 12 42 a6|a6 42 12 7c) 	mfsprg  r0,2
  5c:	(7c 12 43 a6|a6 43 12 7c) 	mtsprg  2,r0
  60:	(7c 12 43 a6|a6 43 12 7c) 	mtsprg  2,r0
  64:	(7c 07 42 a6|a6 42 07 7c) 	mfsprg  r0,7
  68:	(7c 07 42 a6|a6 42 07 7c) 	mfsprg  r0,7
  6c:	(7c 17 43 a6|a6 43 17 7c) 	mtsprg  7,r0
  70:	(7c 17 43 a6|a6 43 17 7c) 	mtsprg  7,r0
  74:	(7c 05 32 2c|2c 32 05 7c) 	dcbt    r5,r6
  78:	(7c 05 32 2c|2c 32 05 7c) 	dcbt    r5,r6
  7c:	(7d 05 32 2c|2c 32 05 7d) 	dcbt    8,r5,r6
@


1.13
log
@opcodes/
	* ppc-dis.c (powerpc_init_dialect): Do not set PPC_OPCODE_BOOKE
	for -Mbooke.
	(print_ppc_disassembler_options): Update usage.
	* ppc-opc.c (DE, DES, DEO, DE_MASK): Remove.
	(BOOKE64): Remove.
	(PPCCHLK64): Likewise.
	(powerpc_opcodes): Remove all BOOKE64 instructions.

gas/
	* config/tc-ppc.c (parse_cpu): Remove booke64 support. Update
	usage strings.
	(ppc_setup_opcodes): Likewise, remove booke64 support.
	* doc/c-ppc.texi (PowerPC-Opts): Remove -mbooke32 and -mbooke64.
	* doc/as.texinfo (Overview): Likewise.

binutils/
	* doc/binutils.texi (objdump): Update booke documentation.
	* NEWS: Document user-visible changes to command line options.
@
text
@d41 3
@


1.12
log
@	* gas/ppc/booke.s: Add tlbsx, tlbsxe.
	* gas/ppc/booke.d: Update.
@
text
@d1 1
a1 1
#as: -mbooke64
d9 32
a40 148
0+0000000 <start>:
   0:	24 25 00 30 	bce     1,4\*cr1\+gt,30 <branch_target_1>
   4:	24 46 00 3d 	bcel    2,4\*cr1\+eq,40 <branch_target_2>
   8:	24 67 00 52 	bcea    3,4\*cr1\+so,50 <branch_target_3>
			8: R_PPC(64)?_ADDR14	\.text\+0x50
   c:	24 88 00 73 	bcela   4,4\*cr2\+lt,70 <branch_target_4>
			c: R_PPC(64)?_ADDR14	\.text\+0x70
  10:	4c a9 00 22 	bclre   5,4\*cr2\+gt
  14:	4c aa 00 23 	bclrel  5,4\*cr2\+eq
  18:	4d 0b 04 22 	bcctre  8,4\*cr2\+so
  1c:	4d 0c 04 23 	bcctrel 8,4\*cr3\+lt
  20:	58 00 00 74 	be      94 <branch_target_5>
  24:	58 00 00 89 	bel     ac <branch_target_6>
  28:	58 00 00 f6 	bea     f4 <branch_target_7>
			28: R_PPC(64)?_ADDR24	\.text\+0xf4
  2c:	58 00 01 2b 	bela    128 <branch_target_8>
			2c: R_PPC(64)?_ADDR24	\.text\+0x128

0+0000030 <branch_target_1>:
  30:	e9 09 00 80 	lbze    r8,8\(r9\)
  34:	e9 8f 00 41 	lbzue   r12,4\(r15\)
  38:	7c 86 40 fe 	lbzuxe  r4,r6,r8
  3c:	7c 65 38 be 	lbzxe   r3,r5,r7

0+0000040 <branch_target_2>:
  40:	f8 a6 06 40 	lde     r5,400\(r6\)
  44:	f8 c7 07 11 	ldue    r6,452\(r7\)
  48:	7c e8 4e 3e 	ldxe    r7,r8,r9
  4c:	7d 4b 66 7e 	lduxe   r10,r11,r12

0+0000050 <branch_target_3>:
  50:	f9 81 02 06 	lfde    f12,128\(r1\)
  54:	f8 25 00 47 	lfdue   f1,16\(r5\)
  58:	7c a1 1c be 	lfdxe   f5,r1,r3
  5c:	7c c2 24 fe 	lfduxe  f6,r2,r4
  60:	f9 09 00 c4 	lfse    f8,48\(r9\)
  64:	f9 2a 01 15 	lfsue   f9,68\(r10\)
  68:	7d 44 44 7e 	lfsuxe  f10,r4,r8
  6c:	7d 23 3c 3e 	lfsxe   f9,r3,r7

0+0000070 <branch_target_4>:
  70:	e9 45 03 24 	lhae    r10,50\(r5\)
  74:	e8 23 00 55 	lhaue   r1,5\(r3\)
  78:	7c a1 1a fe 	lhauxe  r5,r1,r3
  7c:	7f be fa be 	lhaxe   r29,r30,r31
  80:	7c 22 1e 3c 	lhbrxe  r1,r2,r3
  84:	e8 83 01 22 	lhze    r4,18\(r3\)
  88:	e8 c9 01 43 	lhzue   r6,20\(r9\)
  8c:	7c a7 4a 7e 	lhzuxe  r5,r7,r9
  90:	7d 27 2a 3e 	lhzxe   r9,r7,r5

0+0000094 <branch_target_5>:
  94:	7d 4f a0 fc 	lwarxe  r10,r15,r20
  98:	7c aa 94 3c 	lwbrxe  r5,r10,r18
  9c:	eb 9d 00 46 	lwze    r28,4\(r29\)
  a0:	e9 0a 02 87 	lwzue   r8,40\(r10\)
  a4:	7c 66 48 7e 	lwzuxe  r3,r6,r9
  a8:	7f dd e0 3e 	lwzxe   r30,r29,r28

0+00000ac <branch_target_6>:
  ac:	7c 06 3d fc 	dcbae   r6,r7
  b0:	7c 08 48 bc 	dcbfe   r8,r9
  b4:	7c 0a 5b bc 	dcbie   r10,r11
  b8:	7c 08 f0 7c 	dcbste  r8,r30
  bc:	7c c3 0a 3c 	dcbte   6,r3,r1
  c0:	7c a4 11 fa 	dcbtste 5,r4,r2
  c4:	7c 0f 77 fc 	dcbze   r15,r14
  c8:	7c 03 27 bc 	icbie   r3,r4
  cc:	7c a8 48 2c 	icbt    5,r8,r9
  d0:	7c ca 78 3c 	icbte   6,r10,r15
  d4:	7c a6 02 26 	mfapidi r5,r6
  d8:	7c 07 46 24 	tlbivax r7,r8
  dc:	7c 09 56 26 	tlbivaxe r9,r10
  e0:	7c 0b 67 24 	tlbsx   r11,r12
  e4:	7c 0d 77 26 	tlbsxe  r13,r14
  e8:	7c 00 07 a4 	tlbwe   
  ec:	7c 00 07 a4 	tlbwe   
  f0:	7c 21 0f a4 	tlbwe   r1,r1,1

0+00000f4 <branch_target_7>:
  f4:	7c 22 1b 14 	adde64  r1,r2,r3
  f8:	7c 85 37 14 	adde64o r4,r5,r6
  fc:	7c e8 03 d4 	addme64 r7,r8
 100:	7d 2a 07 d4 	addme64o r9,r10
 104:	7d 6c 03 94 	addze64 r11,r12
 108:	7d ae 07 94 	addze64o r13,r14
 10c:	7e 80 04 40 	mcrxr64 cr5
 110:	7d f0 8b 10 	subfe64 r15,r16,r17
 114:	7e 53 a7 10 	subfe64o r18,r19,r20
 118:	7e b6 03 d0 	subfme64 r21,r22
 11c:	7e f8 07 d0 	subfme64o r23,r24
 120:	7f 3a 03 90 	subfze64 r25,r26
 124:	7f 7c 07 90 	subfze64o r27,r28

0+0000128 <branch_target_8>:
 128:	e8 22 03 28 	stbe    r1,50\(r2\)
 12c:	e8 64 02 89 	stbue   r3,40\(r4\)
 130:	7c a6 39 fe 	stbuxe  r5,r6,r7
 134:	7d 09 51 be 	stbxe   r8,r9,r10
 138:	7d 6c 6b ff 	stdcxe\. r11,r12,r13
 13c:	f9 cf 00 78 	stde    r14,28\(r15\)
 140:	fa 11 00 59 	stdue   r16,20\(r17\)
 144:	7e 53 a7 3e 	stdxe   r18,r19,r20
 148:	7e b6 bf 7e 	stduxe  r21,r22,r23
 14c:	f8 38 00 3e 	stfde   f1,12\(r24\)
 150:	f8 59 00 0f 	stfdue  f2,0\(r25\)
 154:	7c 7a dd be 	stfdxe  f3,r26,r27
 158:	7c 9c ed fe 	stfduxe f4,r28,r29
 15c:	7c be ff be 	stfiwxe f5,r30,r31
 160:	f8 de 00 6c 	stfse   f6,24\(r30\)
 164:	f8 fd 00 5d 	stfsue  f7,20\(r29\)
 168:	7d 1c dd 3e 	stfsxe  f8,r28,r27
 16c:	7d 3a cd 7e 	stfsuxe f9,r26,r25
 170:	7f 17 b7 3c 	sthbrxe r24,r23,r22
 174:	ea b4 01 ea 	sthe    r21,30\(r20\)
 178:	ea 72 02 8b 	sthue   r19,40\(r18\)
 17c:	7e 30 7b 7e 	sthuxe  r17,r16,r15
 180:	7d cd 63 3e 	sthxe   r14,r13,r12
 184:	7d 6a 4d 3c 	stwbrxe r11,r10,r9
 188:	7d 07 31 3d 	stwcxe\. r8,r7,r6
 18c:	e8 a4 03 2e 	stwe    r5,50\(r4\)
 190:	e8 62 02 8f 	stwue   r3,40\(r2\)
 194:	7c 22 19 7e 	stwuxe  r1,r2,r3
 198:	7c 85 31 3e 	stwxe   r4,r5,r6
 19c:	4c 00 00 66 	rfci
 1a0:	7c 60 01 06 	wrtee   r3
 1a4:	7c 00 81 46 	wrteei  1
 1a8:	7c 85 02 06 	mfdcrx  r4,r5
 1ac:	7c aa 3a 86 	mfdcr   r5,234
 1b0:	7c e6 03 06 	mtdcrx  r6,r7
 1b4:	7d 10 6b 86 	mtdcr   432,r8
 1b8:	7c 00 04 ac 	msync
 1bc:	7c 09 55 ec 	dcba    r9,r10
 1c0:	7c 00 06 ac 	mbar    
 1c4:	7c 00 06 ac 	mbar    
 1c8:	7c 20 06 ac 	mbar    1
 1cc:	7d 8d 77 24 	tlbsx   r12,r13,r14
 1d0:	7d 8d 77 25 	tlbsx\.  r12,r13,r14
 1d4:	7d 8d 77 26 	tlbsxe  r12,r13,r14
 1d8:	7d 8d 77 27 	tlbsxe\. r12,r13,r14
 1dc:	7c 12 42 a6 	mfsprg  r0,2
 1e0:	7c 12 42 a6 	mfsprg  r0,2
 1e4:	7c 12 43 a6 	mtsprg  2,r0
 1e8:	7c 12 43 a6 	mtsprg  2,r0
 1ec:	7c 07 42 a6 	mfsprg  r0,7
 1f0:	7c 07 42 a6 	mfsprg  r0,7
 1f4:	7c 17 43 a6 	mtsprg  7,r0
 1f8:	7c 17 43 a6 	mtsprg  7,r0
@


1.12.4.1
log
@backport 2008-12-04  Ben Elliston  <bje@@au.ibm.com>
@
text
@d1 1
a1 1
#as: -mbooke
d9 148
a156 32
0+0000000 <branch_target_1>:
   0:	7c a8 48 2c 	icbt    5,r8,r9
   4:	7c a6 02 26 	mfapidi r5,r6
   8:	7c 07 46 24 	tlbivax r7,r8
   c:	7c 0b 67 24 	tlbsx   r11,r12
  10:	7c 00 07 a4 	tlbwe   
  14:	7c 00 07 a4 	tlbwe   
  18:	7c 21 0f a4 	tlbwe   r1,r1,1

0+000001c <branch_target_2>:
  1c:	4c 00 00 66 	rfci
  20:	7c 60 01 06 	wrtee   r3
  24:	7c 00 81 46 	wrteei  1
  28:	7c 85 02 06 	mfdcrx  r4,r5
  2c:	7c aa 3a 86 	mfdcr   r5,234
  30:	7c e6 03 06 	mtdcrx  r6,r7
  34:	7d 10 6b 86 	mtdcr   432,r8
  38:	7c 00 04 ac 	msync
  3c:	7c 09 55 ec 	dcba    r9,r10
  40:	7c 00 06 ac 	mbar    
  44:	7c 00 06 ac 	mbar    
  48:	7c 20 06 ac 	mbar    1
  4c:	7d 8d 77 24 	tlbsx   r12,r13,r14
  50:	7d 8d 77 25 	tlbsx\.  r12,r13,r14
  54:	7c 12 42 a6 	mfsprg  r0,2
  58:	7c 12 42 a6 	mfsprg  r0,2
  5c:	7c 12 43 a6 	mtsprg  2,r0
  60:	7c 12 43 a6 	mtsprg  2,r0
  64:	7c 07 42 a6 	mfsprg  r0,7
  68:	7c 07 42 a6 	mfsprg  r0,7
  6c:	7c 17 43 a6 	mtsprg  7,r0
  70:	7c 17 43 a6 	mtsprg  7,r0
@


1.12.4.2
log
@backport 2009-02-05  Peter Bergner  <bergner@@vnet.ibm.com>
@
text
@a40 3
  74:	7c 05 32 2c 	dcbt    r5,r6
  78:	7c 05 32 2c 	dcbt    r5,r6
  7c:	7d 05 32 2c 	dcbt    8,r5,r6
@


1.11
log
@2005-05-07  Paul Brook  <paul@@codesourcery.com>

bfd/
	* config.bfd: Add separate case for ppc-vxworks.
	* configure: Regenerate.
	* configure.in: Include elf-vxworks.lo on ppc targets.
	* elf-vxworks.c (elf_vxworks_final_write_processing): Handle
	.rela.plt.unloaded.
	* elf32-ppc.c: Add VxWorks target vec.	Include elf-vxworks.h.
	(PLT_ENTRY_SIZE, PLT_INITIAL_ENTRY_SIZE, PLT_SLOT_SIZE): Remove.
	(VXWORKS_PLT_ENTRY_SIZE, ppc_elf_vxworks_plt_entry,
	ppc_elf_vxworks_pic_plt_entry, VXWORKS_PLT_INITIAL_ENTRY_SIZE,
	ppc_elf_vxworks_plt0_entry, ppc_elf_vxworks_pic_plt0_entry,
	VXWORKS_PLT_NON_JMP_SLOT_RELOCS, VXWORKS_PLTRESOLVE_RELOCS,
	VXWORKS_PLTRESOLVE_RELOCS_SHLIB): New.
	(ppc_elf_link_hash_table): Add srelplt2, sgotplt, hgot, hplt,
	is_vxworks, plt_entry_size, plt_slot_size, plt_initial_entry_size.
	(ppc_elf_link_hash_table_create): Initialize hadtab plt fields.
	(ppc_elf_create_got): Create .got.plt for VxWorks.
	(ppc_elf_create_dynamic_sections): Create unloaded plt relocation
	section for VxWorks.
	(ppc_elf_select_plt_layout): Handle VxWorks plt format.
	(allocate_got): VxWorks does not need a got header.
	(allocate_dynrelocs): Handle VxWorks plt format.
	(ppc_elf_size_dynamic_sections): Save _G_O_T_ and _P_L_T_ symbols for
	VxWorks.  Handle VxWorks plt/got.
	(ppc_elf_finish_dynamic_sections): Fill in VxWorks plt.
	(ppc_elf_vxworks_special_sections): New.
	(ppc_elf_vxworks_link_hash_table_create,
	ppc_elf_vxworks_add_symbol_hook,
	elf_i386_vxworks_link_output_symbol_hook,
	ppc_elf_vxworks_final_write_processing): New functions.
	* targets.c (bfd_elf32_powerpc_vxworks_vec): Declare.
	(_bfd_target_vector): Use it.
gas/
	* config/tc-ppc.c (ppc_target_format): Add VxWorks.
gas/testsuite/
	* gas/ppc/altivec.d: Match all powerpc target vecs.
	* gas/ppc/booke.d: Ditto.
	* gas/ppc/e500.d: Ditto.
ld/
	* Makefile.am (ALL_EMULATIONS): Add eelf32ppcvxworks.o.
	(eelf32ppcvxworks.o): Add dependencies.
	* Makefile.in: Regenerate.
	* configure.tgt: Add entry for powerpc-vxworks.
	* emulparams/elf32-ppc.c: Mention elf32ppcvxworks.sh in comment.
	* emulparams/elf32ppcvxworks.sh: New file.
	* emultempl/ppc32elf.em (bfd_elf32_powerpc_vxworks_vec): Declare.
	(is_ppc_elf32_vec): New function.
	(ppc_after_open, ppc_before_allocation,
	gld${EMULATION_NAME}_after_allocation): Use it.
@
text
@d145 12
a156 8
 1cc:	7c 12 42 a6 	mfsprg  r0,2
 1d0:	7c 12 42 a6 	mfsprg  r0,2
 1d4:	7c 12 43 a6 	mtsprg  2,r0
 1d8:	7c 12 43 a6 	mtsprg  2,r0
 1dc:	7c 07 42 a6 	mfsprg  r0,7
 1e0:	7c 07 42 a6 	mfsprg  r0,7
 1e4:	7c 17 43 a6 	mtsprg  7,r0
 1e8:	7c 17 43 a6 	mtsprg  7,r0
@


1.10
log
@opcodes/
	* ppc-opc.c (insert_sprg, extract_sprg): New Functions.
	(powerpc_operands <SPRG>): Call the above.  Bit field is 5 bits.
	(SPRG_MASK): Delete.
	(XSPRG_MASK): Mask off extra bits now part of sprg field.
        (powerpc_opcodes): Asjust mfsprg and mtsprg to suit new mask.  Move
	mfsprg4..7 after msprg and consolidate.

gas/testsuite
	* gas/ppc/booke.s: Add new m[t,f]sprg testcases.
	* gas/ppc/booke.d: Likewise.
@
text
@d5 1
a5 1
.*: +file format elf(32)?(64)?-powerpc
@


1.9
log
@	* gas/ppc/astest.d: Adjust for relocs reduced to section sym.
	* gas/ppc/astest2.d: Likewise.
	* gas/ppc/astest2_64.d: Likewise.
	* ppc/astest64.d: Likewise.
	* ppc/booke.d: Likewise.
	* ppc/power4.d: Likewise.
	* ppc/test1elf32.d: Likewise.
	* ppc/test1elf64.d: Likewise.
@
text
@d145 8
@


1.8
log
@opcodes/
	* ppc-dis.c (print_insn_powerpc): Don't print tabs.  Handle
	PPC_OPERANDS_GPR_0.
	* ppc-opc.c (RA0): Define.
	(RAQ, RAL, RAM, RAS, RSQ, RTQ, RSO): Use PPC_OPERAND_GPR_0.
	(RAOPT): Rename from RAO.  Update all uses.
	(powerpc_opcodes): Use RA0 as appropriate.  Add "lsdx", "lsdi",
	"stsdx", "stsdi", "lmd" and "stmd" insns.

include/opcode/
	* ppc.h (PPC_OPERAND_GPR_0): Define.  Bump other operand defines.

gas/testsuite/
	Update gas/ppc/.

ld/testsuite/
	Update ld-powerpc/.
@
text
@d12 4
a15 4
   8:	24 67 00 02 	bcea    3,4\*cr1\+so,0 <start>
			8: R_PPC(64)?_ADDR14	branch_target_3
   c:	24 88 00 03 	bcela   4,4\*cr2\+lt,0 <start>
			c: R_PPC(64)?_ADDR14	branch_target_4
d22 4
a25 4
  28:	58 00 00 02 	bea     0 <start>
			28: R_PPC(64)?_ADDR24	branch_target_7
  2c:	58 00 00 03 	bela    0 <start>
			2c: R_PPC(64)?_ADDR24	branch_target_8
@


1.7
log
@opcodes:
	* ppc-opc.c (MO): Make optional.
	(RAO, RSO, SHO): New optional forms of RA, RS, SH operands.
	(tlbwe): Accept for both PPC403 and BOOKE.  Make all operands optional.
gas:
	* tc-ppc.c (md_assemble): Rewrite comment about optional operands
	to indicate that 'all or none' is also handled.  Pluralize a
	word in another comment.
gas/testsuite:
	* gas/ppc/booke.s: Add two more forms of the mbar instruction
	and three forms of the tlbwe instruction.
	* gas/ppc/booke.d: Update to match.
@
text
@d10 3
a12 3
   0:	24 25 00 30 	bce	1,4\*cr1\+gt,30 <branch_target_1>
   4:	24 46 00 3d 	bcel	2,4\*cr1\+eq,40 <branch_target_2>
   8:	24 67 00 02 	bcea	3,4\*cr1\+so,0 <start>
d14 1
a14 1
   c:	24 88 00 03 	bcela	4,4\*cr2\+lt,0 <start>
d16 7
a22 7
  10:	4c a9 00 22 	bclre	5,4\*cr2\+gt
  14:	4c aa 00 23 	bclrel	5,4\*cr2\+eq
  18:	4d 0b 04 22 	bcctre	8,4\*cr2\+so
  1c:	4d 0c 04 23 	bcctrel	8,4\*cr3\+lt
  20:	58 00 00 74 	be	94 <branch_target_5>
  24:	58 00 00 89 	bel	ac <branch_target_6>
  28:	58 00 00 02 	bea	0 <start>
d24 1
a24 1
  2c:	58 00 00 03 	bela	0 <start>
d28 4
a31 4
  30:	e9 09 00 80 	lbze	r8,8\(r9\)
  34:	e9 8f 00 41 	lbzue	r12,4\(r15\)
  38:	7c 86 40 fe 	lbzuxe	r4,r6,r8
  3c:	7c 65 38 be 	lbzxe	r3,r5,r7
d34 4
a37 4
  40:	f8 a6 06 40 	lde	r5,400\(r6\)
  44:	f8 c7 07 11 	ldue	r6,452\(r7\)
  48:	7c e8 4e 3e 	ldxe	r7,r8,r9
  4c:	7d 4b 66 7e 	lduxe	r10,r11,r12
d40 8
a47 8
  50:	f9 81 02 06 	lfde	f12,128\(r1\)
  54:	f8 25 00 47 	lfdue	f1,16\(r5\)
  58:	7c a1 1c be 	lfdxe	f5,r1,r3
  5c:	7c c2 24 fe 	lfduxe	f6,r2,r4
  60:	f9 09 00 c4 	lfse	f8,48\(r9\)
  64:	f9 2a 01 15 	lfsue	f9,68\(r10\)
  68:	7d 44 44 7e 	lfsuxe	f10,r4,r8
  6c:	7d 23 3c 3e 	lfsxe	f9,r3,r7
d50 9
a58 9
  70:	e9 45 03 24 	lhae	r10,50\(r5\)
  74:	e8 23 00 55 	lhaue	r1,5\(r3\)
  78:	7c a1 1a fe 	lhauxe	r5,r1,r3
  7c:	7f be fa be 	lhaxe	r29,r30,r31
  80:	7c 22 1e 3c 	lhbrxe	r1,r2,r3
  84:	e8 83 01 22 	lhze	r4,18\(r3\)
  88:	e8 c9 01 43 	lhzue	r6,20\(r9\)
  8c:	7c a7 4a 7e 	lhzuxe	r5,r7,r9
  90:	7d 27 2a 3e 	lhzxe	r9,r7,r5
d61 6
a66 6
  94:	7d 4f a0 fc 	lwarxe	r10,r15,r20
  98:	7c aa 94 3c 	lwbrxe	r5,r10,r18
  9c:	eb 9d 00 46 	lwze	r28,4\(r29\)
  a0:	e9 0a 02 87 	lwzue	r8,40\(r10\)
  a4:	7c 66 48 7e 	lwzuxe	r3,r6,r9
  a8:	7f dd e0 3e 	lwzxe	r30,r29,r28
d69 18
a86 18
  ac:	7c 06 3d fc 	dcbae	r6,r7
  b0:	7c 08 48 bc 	dcbfe	r8,r9
  b4:	7c 0a 5b bc 	dcbie	r10,r11
  b8:	7c 08 f0 7c 	dcbste	r8,r30
  bc:	7c c3 0a 3c 	dcbte	6,r3,r1
  c0:	7c a4 11 fa 	dcbtste	5,r4,r2
  c4:	7c 0f 77 fc 	dcbze	r15,r14
  c8:	7c 03 27 bc 	icbie	r3,r4
  cc:	7c a8 48 2c 	icbt	5,r8,r9
  d0:	7c ca 78 3c 	icbte	6,r10,r15
  d4:	7c a6 02 26 	mfapidi	r5,r6
  d8:	7c 07 46 24 	tlbivax	r7,r8
  dc:	7c 09 56 26 	tlbivaxe	r9,r10
  e0:	7c 0b 67 24 	tlbsx	r11,r12
  e4:	7c 0d 77 26 	tlbsxe	r13,r14
  e8:	7c 00 07 a4 	tlbwe	
  ec:	7c 00 07 a4 	tlbwe	
  f0:	7c 21 0f a4 	tlbwe	r1,r1,1
d89 13
a101 13
  f4:	7c 22 1b 14 	adde64	r1,r2,r3
  f8:	7c 85 37 14 	adde64o	r4,r5,r6
  fc:	7c e8 03 d4 	addme64	r7,r8
 100:	7d 2a 07 d4 	addme64o	r9,r10
 104:	7d 6c 03 94 	addze64	r11,r12
 108:	7d ae 07 94 	addze64o	r13,r14
 10c:	7e 80 04 40 	mcrxr64	cr5
 110:	7d f0 8b 10 	subfe64	r15,r16,r17
 114:	7e 53 a7 10 	subfe64o	r18,r19,r20
 118:	7e b6 03 d0 	subfme64	r21,r22
 11c:	7e f8 07 d0 	subfme64o	r23,r24
 120:	7f 3a 03 90 	subfze64	r25,r26
 124:	7f 7c 07 90 	subfze64o	r27,r28
d104 29
a132 29
 128:	e8 22 03 28 	stbe	r1,50\(r2\)
 12c:	e8 64 02 89 	stbue	r3,40\(r4\)
 130:	7c a6 39 fe 	stbuxe	r5,r6,r7
 134:	7d 09 51 be 	stbxe	r8,r9,r10
 138:	7d 6c 6b ff 	stdcxe\.	r11,r12,r13
 13c:	f9 cf 00 78 	stde	r14,28\(r15\)
 140:	fa 11 00 59 	stdue	r16,20\(r17\)
 144:	7e 53 a7 3e 	stdxe	r18,r19,r20
 148:	7e b6 bf 7e 	stduxe	r21,r22,r23
 14c:	f8 38 00 3e 	stfde	f1,12\(r24\)
 150:	f8 59 00 0f 	stfdue	f2,0\(r25\)
 154:	7c 7a dd be 	stfdxe	f3,r26,r27
 158:	7c 9c ed fe 	stfduxe	f4,r28,r29
 15c:	7c be ff be 	stfiwxe	f5,r30,r31
 160:	f8 de 00 6c 	stfse	f6,24\(r30\)
 164:	f8 fd 00 5d 	stfsue	f7,20\(r29\)
 168:	7d 1c dd 3e 	stfsxe	f8,r28,r27
 16c:	7d 3a cd 7e 	stfsuxe	f9,r26,r25
 170:	7f 17 b7 3c 	sthbrxe	r24,r23,r22
 174:	ea b4 01 ea 	sthe	r21,30\(r20\)
 178:	ea 72 02 8b 	sthue	r19,40\(r18\)
 17c:	7e 30 7b 7e 	sthuxe	r17,r16,r15
 180:	7d cd 63 3e 	sthxe	r14,r13,r12
 184:	7d 6a 4d 3c 	stwbrxe	r11,r10,r9
 188:	7d 07 31 3d 	stwcxe\.	r8,r7,r6
 18c:	e8 a4 03 2e 	stwe	r5,50\(r4\)
 190:	e8 62 02 8f 	stwue	r3,40\(r2\)
 194:	7c 22 19 7e 	stwuxe	r1,r2,r3
 198:	7c 85 31 3e 	stwxe	r4,r5,r6
d134 6
a139 6
 1a0:	7c 60 01 06 	wrtee	r3
 1a4:	7c 00 81 46 	wrteei	1
 1a8:	7c 85 02 06 	mfdcrx	r4,r5
 1ac:	7c aa 3a 86 	mfdcr	r5,234
 1b0:	7c e6 03 06 	mtdcrx	r6,r7
 1b4:	7d 10 6b 86 	mtdcr	432,r8
d141 4
a144 4
 1bc:	7c 09 55 ec 	dcba	r9,r10
 1c0:	7c 00 06 ac 	mbar	
 1c4:	7c 00 06 ac 	mbar	
 1c8:	7c 20 06 ac 	mbar	1
@


1.7.6.1
log
@opcodes/
	* ppc-dis.c (print_insn_powerpc): Don't print tabs.  Handle
	PPC_OPERANDS_GPR_0.
	* ppc-opc.c (RA0): Define.
	(RAQ, RAL, RAM, RAS, RSQ, RTQ, RSO): Use PPC_OPERAND_GPR_0.
	(RAOPT): Rename from RAO.  Update all uses.
	(powerpc_opcodes): Use RA0 as appropriate.  Add "lsdx", "lsdi",
	"stsdx", "stsdi", "lmd" and "stmd" insns.

include/opcode/
	* ppc.h (PPC_OPERAND_GPR_0): Define.  Bump other operand defines.

gas/testsuite/
	Update gas/ppc/.

ld/testsuite/
	Update ld-powerpc/.
@
text
@d10 3
a12 3
   0:	24 25 00 30 	bce     1,4\*cr1\+gt,30 <branch_target_1>
   4:	24 46 00 3d 	bcel    2,4\*cr1\+eq,40 <branch_target_2>
   8:	24 67 00 02 	bcea    3,4\*cr1\+so,0 <start>
d14 1
a14 1
   c:	24 88 00 03 	bcela   4,4\*cr2\+lt,0 <start>
d16 7
a22 7
  10:	4c a9 00 22 	bclre   5,4\*cr2\+gt
  14:	4c aa 00 23 	bclrel  5,4\*cr2\+eq
  18:	4d 0b 04 22 	bcctre  8,4\*cr2\+so
  1c:	4d 0c 04 23 	bcctrel 8,4\*cr3\+lt
  20:	58 00 00 74 	be      94 <branch_target_5>
  24:	58 00 00 89 	bel     ac <branch_target_6>
  28:	58 00 00 02 	bea     0 <start>
d24 1
a24 1
  2c:	58 00 00 03 	bela    0 <start>
d28 4
a31 4
  30:	e9 09 00 80 	lbze    r8,8\(r9\)
  34:	e9 8f 00 41 	lbzue   r12,4\(r15\)
  38:	7c 86 40 fe 	lbzuxe  r4,r6,r8
  3c:	7c 65 38 be 	lbzxe   r3,r5,r7
d34 4
a37 4
  40:	f8 a6 06 40 	lde     r5,400\(r6\)
  44:	f8 c7 07 11 	ldue    r6,452\(r7\)
  48:	7c e8 4e 3e 	ldxe    r7,r8,r9
  4c:	7d 4b 66 7e 	lduxe   r10,r11,r12
d40 8
a47 8
  50:	f9 81 02 06 	lfde    f12,128\(r1\)
  54:	f8 25 00 47 	lfdue   f1,16\(r5\)
  58:	7c a1 1c be 	lfdxe   f5,r1,r3
  5c:	7c c2 24 fe 	lfduxe  f6,r2,r4
  60:	f9 09 00 c4 	lfse    f8,48\(r9\)
  64:	f9 2a 01 15 	lfsue   f9,68\(r10\)
  68:	7d 44 44 7e 	lfsuxe  f10,r4,r8
  6c:	7d 23 3c 3e 	lfsxe   f9,r3,r7
d50 9
a58 9
  70:	e9 45 03 24 	lhae    r10,50\(r5\)
  74:	e8 23 00 55 	lhaue   r1,5\(r3\)
  78:	7c a1 1a fe 	lhauxe  r5,r1,r3
  7c:	7f be fa be 	lhaxe   r29,r30,r31
  80:	7c 22 1e 3c 	lhbrxe  r1,r2,r3
  84:	e8 83 01 22 	lhze    r4,18\(r3\)
  88:	e8 c9 01 43 	lhzue   r6,20\(r9\)
  8c:	7c a7 4a 7e 	lhzuxe  r5,r7,r9
  90:	7d 27 2a 3e 	lhzxe   r9,r7,r5
d61 6
a66 6
  94:	7d 4f a0 fc 	lwarxe  r10,r15,r20
  98:	7c aa 94 3c 	lwbrxe  r5,r10,r18
  9c:	eb 9d 00 46 	lwze    r28,4\(r29\)
  a0:	e9 0a 02 87 	lwzue   r8,40\(r10\)
  a4:	7c 66 48 7e 	lwzuxe  r3,r6,r9
  a8:	7f dd e0 3e 	lwzxe   r30,r29,r28
d69 18
a86 18
  ac:	7c 06 3d fc 	dcbae   r6,r7
  b0:	7c 08 48 bc 	dcbfe   r8,r9
  b4:	7c 0a 5b bc 	dcbie   r10,r11
  b8:	7c 08 f0 7c 	dcbste  r8,r30
  bc:	7c c3 0a 3c 	dcbte   6,r3,r1
  c0:	7c a4 11 fa 	dcbtste 5,r4,r2
  c4:	7c 0f 77 fc 	dcbze   r15,r14
  c8:	7c 03 27 bc 	icbie   r3,r4
  cc:	7c a8 48 2c 	icbt    5,r8,r9
  d0:	7c ca 78 3c 	icbte   6,r10,r15
  d4:	7c a6 02 26 	mfapidi r5,r6
  d8:	7c 07 46 24 	tlbivax r7,r8
  dc:	7c 09 56 26 	tlbivaxe r9,r10
  e0:	7c 0b 67 24 	tlbsx   r11,r12
  e4:	7c 0d 77 26 	tlbsxe  r13,r14
  e8:	7c 00 07 a4 	tlbwe   
  ec:	7c 00 07 a4 	tlbwe   
  f0:	7c 21 0f a4 	tlbwe   r1,r1,1
d89 13
a101 13
  f4:	7c 22 1b 14 	adde64  r1,r2,r3
  f8:	7c 85 37 14 	adde64o r4,r5,r6
  fc:	7c e8 03 d4 	addme64 r7,r8
 100:	7d 2a 07 d4 	addme64o r9,r10
 104:	7d 6c 03 94 	addze64 r11,r12
 108:	7d ae 07 94 	addze64o r13,r14
 10c:	7e 80 04 40 	mcrxr64 cr5
 110:	7d f0 8b 10 	subfe64 r15,r16,r17
 114:	7e 53 a7 10 	subfe64o r18,r19,r20
 118:	7e b6 03 d0 	subfme64 r21,r22
 11c:	7e f8 07 d0 	subfme64o r23,r24
 120:	7f 3a 03 90 	subfze64 r25,r26
 124:	7f 7c 07 90 	subfze64o r27,r28
d104 29
a132 29
 128:	e8 22 03 28 	stbe    r1,50\(r2\)
 12c:	e8 64 02 89 	stbue   r3,40\(r4\)
 130:	7c a6 39 fe 	stbuxe  r5,r6,r7
 134:	7d 09 51 be 	stbxe   r8,r9,r10
 138:	7d 6c 6b ff 	stdcxe\. r11,r12,r13
 13c:	f9 cf 00 78 	stde    r14,28\(r15\)
 140:	fa 11 00 59 	stdue   r16,20\(r17\)
 144:	7e 53 a7 3e 	stdxe   r18,r19,r20
 148:	7e b6 bf 7e 	stduxe  r21,r22,r23
 14c:	f8 38 00 3e 	stfde   f1,12\(r24\)
 150:	f8 59 00 0f 	stfdue  f2,0\(r25\)
 154:	7c 7a dd be 	stfdxe  f3,r26,r27
 158:	7c 9c ed fe 	stfduxe f4,r28,r29
 15c:	7c be ff be 	stfiwxe f5,r30,r31
 160:	f8 de 00 6c 	stfse   f6,24\(r30\)
 164:	f8 fd 00 5d 	stfsue  f7,20\(r29\)
 168:	7d 1c dd 3e 	stfsxe  f8,r28,r27
 16c:	7d 3a cd 7e 	stfsuxe f9,r26,r25
 170:	7f 17 b7 3c 	sthbrxe r24,r23,r22
 174:	ea b4 01 ea 	sthe    r21,30\(r20\)
 178:	ea 72 02 8b 	sthue   r19,40\(r18\)
 17c:	7e 30 7b 7e 	sthuxe  r17,r16,r15
 180:	7d cd 63 3e 	sthxe   r14,r13,r12
 184:	7d 6a 4d 3c 	stwbrxe r11,r10,r9
 188:	7d 07 31 3d 	stwcxe\. r8,r7,r6
 18c:	e8 a4 03 2e 	stwe    r5,50\(r4\)
 190:	e8 62 02 8f 	stwue   r3,40\(r2\)
 194:	7c 22 19 7e 	stwuxe  r1,r2,r3
 198:	7c 85 31 3e 	stwxe   r4,r5,r6
d134 6
a139 6
 1a0:	7c 60 01 06 	wrtee   r3
 1a4:	7c 00 81 46 	wrteei  1
 1a8:	7c 85 02 06 	mfdcrx  r4,r5
 1ac:	7c aa 3a 86 	mfdcr   r5,234
 1b0:	7c e6 03 06 	mtdcrx  r6,r7
 1b4:	7d 10 6b 86 	mtdcr   432,r8
d141 4
a144 4
 1bc:	7c 09 55 ec 	dcba    r9,r10
 1c0:	7c 00 06 ac 	mbar    
 1c4:	7c 00 06 ac 	mbar    
 1c8:	7c 20 06 ac 	mbar    1
@


1.6
log
@Update tests for corrected section attributes and objdump change.
@
text
@d84 3
d88 14
a101 14
0+00000e8 <branch_target_7>:
  e8:	7c 22 1b 14 	adde64	r1,r2,r3
  ec:	7c 85 37 14 	adde64o	r4,r5,r6
  f0:	7c e8 03 d4 	addme64	r7,r8
  f4:	7d 2a 07 d4 	addme64o	r9,r10
  f8:	7d 6c 03 94 	addze64	r11,r12
  fc:	7d ae 07 94 	addze64o	r13,r14
 100:	7e 80 04 40 	mcrxr64	cr5
 104:	7d f0 8b 10 	subfe64	r15,r16,r17
 108:	7e 53 a7 10 	subfe64o	r18,r19,r20
 10c:	7e b6 03 d0 	subfme64	r21,r22
 110:	7e f8 07 d0 	subfme64o	r23,r24
 114:	7f 3a 03 90 	subfze64	r25,r26
 118:	7f 7c 07 90 	subfze64o	r27,r28
d103 42
a144 40
0+000011c <branch_target_8>:
 11c:	e8 22 03 28 	stbe	r1,50\(r2\)
 120:	e8 64 02 89 	stbue	r3,40\(r4\)
 124:	7c a6 39 fe 	stbuxe	r5,r6,r7
 128:	7d 09 51 be 	stbxe	r8,r9,r10
 12c:	7d 6c 6b ff 	stdcxe\.	r11,r12,r13
 130:	f9 cf 00 78 	stde	r14,28\(r15\)
 134:	fa 11 00 59 	stdue	r16,20\(r17\)
 138:	7e 53 a7 3e 	stdxe	r18,r19,r20
 13c:	7e b6 bf 7e 	stduxe	r21,r22,r23
 140:	f8 38 00 3e 	stfde	f1,12\(r24\)
 144:	f8 59 00 0f 	stfdue	f2,0\(r25\)
 148:	7c 7a dd be 	stfdxe	f3,r26,r27
 14c:	7c 9c ed fe 	stfduxe	f4,r28,r29
 150:	7c be ff be 	stfiwxe	f5,r30,r31
 154:	f8 de 00 6c 	stfse	f6,24\(r30\)
 158:	f8 fd 00 5d 	stfsue	f7,20\(r29\)
 15c:	7d 1c dd 3e 	stfsxe	f8,r28,r27
 160:	7d 3a cd 7e 	stfsuxe	f9,r26,r25
 164:	7f 17 b7 3c 	sthbrxe	r24,r23,r22
 168:	ea b4 01 ea 	sthe	r21,30\(r20\)
 16c:	ea 72 02 8b 	sthue	r19,40\(r18\)
 170:	7e 30 7b 7e 	sthuxe	r17,r16,r15
 174:	7d cd 63 3e 	sthxe	r14,r13,r12
 178:	7d 6a 4d 3c 	stwbrxe	r11,r10,r9
 17c:	7d 07 31 3d 	stwcxe\.	r8,r7,r6
 180:	e8 a4 03 2e 	stwe	r5,50\(r4\)
 184:	e8 62 02 8f 	stwue	r3,40\(r2\)
 188:	7c 22 19 7e 	stwuxe	r1,r2,r3
 18c:	7c 85 31 3e 	stwxe	r4,r5,r6
 190:	4c 00 00 66 	rfci
 194:	7c 60 01 06 	wrtee	r3
 198:	7c 00 81 46 	wrteei	1
 19c:	7c 85 02 06 	mfdcrx	r4,r5
 1a0:	7c aa 3a 86 	mfdcr	r5,234
 1a4:	7c e6 03 06 	mtdcrx	r6,r7
 1a8:	7d 10 6b 86 	mtdcr	432,r8
 1ac:	7c 00 04 ac 	msync
 1b0:	7c 09 55 ec 	dcba	r9,r10
 1b4:	7c 00 06 ac 	mbar	0
@


1.5
log
@2002-12-09  Aldy Hernandez  <aldyh@@redhat.com>

	* gas/ppc/booke.d: Fix msync and mbar to reflect reality.

	* gas/ppc/e500.d: Fix m[tf]pmr to reflect reality.
@
text
@d2 1
a2 1
#objdump: -Dr -Mbooke
a139 1
Disassembly of section \.data:
@


1.4
log
@	* gas/ppc/booke.d: Adjust output for corrected condition reg.
@
text
@d137 1
a137 1
 1ac:	7c 00 04 ac 	sync	
d139 1
a139 1
 1b4:	7c 00 06 ac 	eieio
@


1.3
log
@binutils/ChangeLog
	* doc/binutils.texi (objdump): Document ppc -M options.
gas/ChangeLog
	* config/tc-ppc.c (ppc_insert_operand): Pass (ppc_cpu | ppc_size)
	to operand->insert.
	(md_assemble): Likewise.
gas/testsuite/ChangeLog
	* gas/ppc/booke.d: Modify reloc and target matches for powerpc64.
include/opcode/ChangeLog
	* ppc.h (struct powerpc_operand <insert, extract>): Add dialect param.
opcodes/ChangeLog
	* ppc-opc.c (PPC64): Revert 2001-10-12. Do include PPC_OPCODE_PPC.
	(insert_bat, extract_bat, insert_bba, extract_bba,
	insert_bd, extract_bd, insert_bdm, extract_bdm,
	insert_bdp, extract_bdp, valid_bo,
	insert_bo, extract_bo, insert_boe, extract_boe,
	insert_ds, extract_ds, insert_de, extract_de,
	insert_des, extract_des, insert_li, extract_li,
	insert_mbe, extract_mbe, insert_mb6, extract_mb6,
	insert_nb, extract_nb, insert_nsi, extract_nsi,
	insert_ral, insert_ram, insert_ras,
	insert_rbs, extract_rbs, insert_sh6, extract_sh6,
	insert_spr, extract_spr, insert_tbr, extract_tbr): Add dialect param.
	(extract_bd, extract_bdm, extract_bdp,
	extract_ds, extract_des,
	extract_li, extract_nsi): Implement sign extension without conditional.
	(insert_bdm, extract_bdm,
	insert_bdp, extract_bdp, valid_bo): Handle 64 bit branch hints.
	(extract_bdm, extract_bdp): Correct 32 bit validation.
	(AT1_MASK, AT2_MASK): Define.
	(BBOAT_MASK): Define.
	(BBOATCB_MASK, BBOAT2CB_MASK, BBOATBI_MASK): Define.
	(BOFM64, BOFP64, BOTM64, BOTP64): Define.
	(BODNZM64, BODNZP64, BODZM64, BODZP64): Define.
	(PPCCOM32, PPCCOM64): Define.
	(powerpc_opcodes): Modify existing 32 bit insns with branch hints
	and add new patterns to implement 64 bit branches with hints.  Move
	booke instructions so they match before ppc64.
	* ppc-dis.c (powerpc_dialect): Set PPC_OPCODE_64 in dialect for
	64 bit default targets, and parse "32" and "64" in options.
	Formatting fixes.
	(print_insn_powerpc): Pass dialect to operand->extract.
@
text
@d14 1
a14 1
   c:	24 88 00 03 	bcela	4,4\*cr2,0 <start>
d19 1
a19 1
  1c:	4d 0c 04 23 	bcctrel	8,4\*cr3
@


1.2
log
@[gas/testsuite/ChangeLog]
	* gas/ppc/booke.s (rfci, wrtee, wrteei, mfdcrx, mfdcr, mtdcrx,
	mtdcr, msync, dcba, mbar): New BookE tests.
	* gas/ppc/booke.d: Update for new BookE tests.

[opcodes/ChangeLog]
	* ppc-opc.c (MO): New macro for MO field of mbar instruction.
	(powerpc_opcodes): Add rfci, wrtee, wrteei, mfdcrx, mfdcr,
	mtdcrx, mtdcr, msync, dcba and mbar as BookE instructions.
@
text
@d5 1
a5 1
.*: +file format elf32-powerpc
d13 1
a13 1
			8: R_PPC_ADDR14	branch_target_3
d15 1
a15 1
			c: R_PPC_ADDR14	branch_target_4
d23 1
a23 1
			28: R_PPC_ADDR24	branch_target_7
d25 1
a25 1
			2c: R_PPC_ADDR24	branch_target_8
@


1.1
log
@[gas/ChangeLog]
	* config/tc-ppc.c (md_parse_option): New -m7410, -m7450 and -m7455
	flags, equivalent to -m7400.  New -maltivec to enable AltiVec
	instructions.  New -mbook64 and -mbooke/-mbooke32 flags to enable
	64-bit and 32-bit BookE support, respectively.  Change -m403 and
	-m405 to set PPC403 option.
	(md_show_usage): Adjust for new options.
	* doc/all.texi: Set PPC.
	* doc/as.texinfo: Add PPC support and pull in c-ppc.texi.
	* doc/c-ppc.texi: New file.
	* doc/Makefile.am (CPU_DOCS): Add c-ppc.texi.
	* doc/Makefile.in: Regenerate.

[gas/testsuite/ChangeLog]
	* gas/ppc/booke.s: New test for Motorola BookE.
	* gas/ppc/booke.d: New file.
	* gas/ppc/ppc.exp: Test booke.s.

[include/opcode/ChangeLog]
	* ppc.h (PPC_OPCODE_BOOKE, PPC_OPCODE_403): New opcode flags for
	BookE and PowerPC403 instructions.

[opcodes/ChangeLog]
	* ppc-opc.c (insert_de, extract_de, insert_des, extract_des): New
	instruction field instruction/extraction functions for new BookE
	DE form instructions.
	(CT): New macro for CT field in an X form instruction.
	(DE, DES, DEO, DE_MASK): New macros for DE/DES fields in DE form
	instructions.
	(PPC64): Don't include PPC_OPCODE_PPC.
	(403): New opcode macro for PPC403 processors.
	(BOOKE): New opcode macro for BookE processors.
	(bce, bcel, bcea, bcela, bclre, bclrel: New BookE instructions.
	(bcctre, bcctrel, be, bel, bea, bela, icbt, icbte, lwzxe): Likewise.
	(dcbste, lwzuxe, luxe, dcbfe, lbzxe, lwarxe, lbzuxe): Likewise.
	(stwcxe, stwxe, stxe, stwuxe, stuxe, stbxe, dcbtste, stbuxe): Likewise.
	(mfapidi, dcbte, lhzxe, lhzuxe, lhaxe, lhauxe, subfe64): Likewise.
	(subfeo64, adde64, addeo64, sthxe, sthuxe, subfze64): Likewise.
	(subfzeo64, addze64, addzeo64, dcbie, subfme64, subfmeo64): Likewise.
	(addme64, addmeo64, stdcxe., mcrxr64, lwbrxe, lfsxe, lfsuxe): Likewise.
	(lfdxe, lfduxe, stwbrxe, stfsxe, stfsuxe, stfdxe, dcbae): Likewise.
	(stfduxe, tlbivax, tlbivaxe, lhbrxe, ldxe, lduxe, tlbsx): Likewise.
	(tlbsxe, sthbrxe, stdxe, stduxe, icbie, stfiwxe, dcbze, lbze): Likewise.
	(lbzue, ldue, lhze, lhzue, lhae, lhaue, lwze, lwzue): Likewise.
	(stbe, stbue, sthe, sthue, stwe, stwue, lfse, lfsue, lfde): Likewise.
	(lfdue, stde, stdue, stfse, stfsue, stfde, stfdue): Likewise.

	* ppc-dis.c (print_insn_big_powerpc, print_insn_little_powerpc): Look
	for a disassembler option of `booke', `booke32' or `booke64' to enable
	BookE support in the disassembler.
@
text
@d130 10
@

