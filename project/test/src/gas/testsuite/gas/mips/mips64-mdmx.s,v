head	1.2;
access;
symbols
	binutils-2_24-branch:1.2.0.42
	binutils-2_24-branchpoint:1.2
	binutils-2_21_1:1.2
	binutils-2_23_2:1.2
	binutils-2_23_1:1.2
	binutils-2_23:1.2
	binutils-2_23-branch:1.2.0.40
	binutils-2_23-branchpoint:1.2
	binutils-2_22_branch:1.2.0.38
	binutils-2_22:1.2
	binutils-2_22-branch:1.2.0.36
	binutils-2_22-branchpoint:1.2
	binutils-2_21:1.2
	binutils-2_21-branch:1.2.0.34
	binutils-2_21-branchpoint:1.2
	binutils-2_20_1:1.2
	binutils-2_20:1.2
	binutils-arc-20081103-branch:1.2.0.32
	binutils-arc-20081103-branchpoint:1.2
	binutils-2_20-branch:1.2.0.30
	binutils-2_20-branchpoint:1.2
	dje-cgen-play1-branch:1.2.0.28
	dje-cgen-play1-branchpoint:1.2
	arc-20081103-branch:1.2.0.26
	arc-20081103-branchpoint:1.2
	binutils-2_19_1:1.2
	binutils-2_19:1.2
	binutils-2_19-branch:1.2.0.24
	binutils-2_19-branchpoint:1.2
	binutils-2_18:1.2
	binutils-2_18-branch:1.2.0.22
	binutils-2_18-branchpoint:1.2
	binutils-csl-coldfire-4_1-32:1.2
	binutils-csl-sourcerygxx-4_1-32:1.2
	binutils-csl-innovasic-fido-3_4_4-33:1.2
	binutils-csl-sourcerygxx-3_4_4-32:1.2
	binutils-csl-coldfire-4_1-30:1.2
	binutils-csl-sourcerygxx-4_1-30:1.2
	binutils-csl-coldfire-4_1-28:1.2
	binutils-csl-sourcerygxx-4_1-29:1.2
	binutils-csl-sourcerygxx-4_1-28:1.2
	binutils-csl-arm-2006q3-27:1.2
	binutils-csl-sourcerygxx-4_1-27:1.2
	binutils-csl-arm-2006q3-26:1.2
	binutils-csl-sourcerygxx-4_1-26:1.2
	binutils-csl-sourcerygxx-4_1-25:1.2
	binutils-csl-sourcerygxx-4_1-24:1.2
	binutils-csl-sourcerygxx-4_1-23:1.2
	binutils-csl-sourcerygxx-4_1-21:1.2
	binutils-csl-arm-2006q3-21:1.2
	binutils-csl-sourcerygxx-4_1-22:1.2
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.2
	binutils-csl-sourcerygxx-4_1-20:1.2
	binutils-csl-arm-2006q3-19:1.2
	binutils-csl-sourcerygxx-4_1-19:1.2
	binutils-csl-sourcerygxx-4_1-18:1.2
	binutils-csl-renesas-4_1-9:1.2
	binutils-csl-sourcerygxx-3_4_4-25:1.2
	binutils-csl-renesas-4_1-8:1.2
	binutils-csl-renesas-4_1-7:1.2
	binutils-csl-renesas-4_1-6:1.2
	binutils-csl-sourcerygxx-4_1-17:1.2
	binutils-csl-sourcerygxx-4_1-14:1.2
	binutils-csl-sourcerygxx-4_1-15:1.2
	binutils-csl-sourcerygxx-4_1-13:1.2
	binutils-2_17:1.2
	binutils-csl-sourcerygxx-4_1-12:1.2
	binutils-csl-sourcerygxx-3_4_4-21:1.2
	binutils-csl-wrs-linux-3_4_4-24:1.2
	binutils-csl-wrs-linux-3_4_4-23:1.2
	binutils-csl-sourcerygxx-4_1-9:1.2
	binutils-csl-sourcerygxx-4_1-8:1.2
	binutils-csl-sourcerygxx-4_1-7:1.2
	binutils-csl-arm-2006q1-6:1.2
	binutils-csl-sourcerygxx-4_1-6:1.2
	binutils-csl-wrs-linux-3_4_4-22:1.2
	binutils-csl-coldfire-4_1-11:1.2
	binutils-csl-sourcerygxx-3_4_4-19:1.2
	binutils-csl-coldfire-4_1-10:1.2
	binutils-csl-sourcerygxx-4_1-5:1.2
	binutils-csl-sourcerygxx-4_1-4:1.2
	binutils-csl-wrs-linux-3_4_4-21:1.2
	binutils-csl-morpho-4_1-4:1.2
	binutils-csl-sourcerygxx-3_4_4-17:1.2
	binutils-csl-wrs-linux-3_4_4-20:1.2
	binutils-2_17-branch:1.2.0.20
	binutils-2_17-branchpoint:1.2
	binutils-csl-2_17-branch:1.2.0.18
	binutils-csl-2_17-branchpoint:1.2
	binutils-csl-gxxpro-3_4-branch:1.2.0.16
	binutils-csl-gxxpro-3_4-branchpoint:1.2
	binutils-2_16_1:1.2
	binutils-csl-arm-2005q1b:1.2
	binutils-2_16:1.2
	binutils-csl-arm-2005q1a:1.2
	binutils-csl-arm-2005q1-branch:1.2.0.14
	binutils-csl-arm-2005q1-branchpoint:1.2
	binutils-2_16-branch:1.2.0.12
	binutils-2_16-branchpoint:1.2
	csl-arm-2004-q3d:1.2
	csl-arm-2004-q3:1.2
	binutils-2_15:1.2
	binutils-2_15-branchpoint:1.2
	csl-arm-2004-q1a:1.2
	csl-arm-2004-q1:1.2
	binutils-2_15-branch:1.2.0.10
	cagney_bfdfile-20040213-branch:1.2.0.8
	cagney_bfdfile-20040213-branchpoint:1.2
	cagney_bigcore-20040122-branch:1.2.0.6
	cagney_bigcore-20040122-branchpoint:1.2
	csl-arm-2003-q4:1.2
	binutils-2_14:1.2
	binutils-2_14-branch:1.2.0.4
	binutils-2_14-branchpoint:1.2
	binutils-2_13_2_1:1.2
	binutils-2_13_2:1.2
	binutils-2_13_1:1.2
	binutils-2_13:1.2
	binutils-2_13-branchpoint:1.2
	binutils-2_13-branch:1.2.0.2
	binutils_latest_snapshot:1.2;
locks; strict;
comment	@# @;


1.2
date	2002.05.31.06.35.37;	author cgd;	state Exp;
branches;
next	1.1;

1.1
date	2002.05.31.01.17.17;	author cgd;	state Exp;
branches;
next	;


desc
@@


1.2
log
@2002-05-30  Chris G. Demetriou  <cgd@@broadcom.com>

        * gas/mips/mips64-mdmx.s: Tweak to more thoroughly cover
        instruction encodings.
        * gas/mips/mips64-mdmx.d: Likewise.
@
text
@# source file to test assembly of MIPS64 MDMX ASE instructions

	.set noreorder
	.set noat

	.globl text_label .text
text_label:

	movf.l		$v1, $v12, $fcc5

	movn.l		$v1, $v12, $18

	movt.l		$v1, $v12, $fcc5

	movz.l		$v1, $v12, $18

	add.ob		$v1, $v12, 18
	add.ob		$v1, $v12, $v18
	add.ob		$v1, $v12, $v18[6]

	add.qh		$v1, $v12, 18
	add.qh		$v1, $v12, $v18
	add.qh		$v1, $v12, $v18[2]

	adda.ob		$v12, 18
	adda.ob		$v12, $v18
	adda.ob		$v12, $v18[6]

	adda.qh		$v12, 18
	adda.qh		$v12, $v18
	adda.qh		$v12, $v18[2]

	addl.ob		$v12, 18
	addl.ob		$v12, $v18
	addl.ob		$v12, $v18[6]

	addl.qh		$v12, 18
	addl.qh		$v12, $v18
	addl.qh		$v12, $v18[2]

	alni.ob		$v1, $v12, $v18, 6

	alni.qh		$v1, $v12, $v18, 2

	alnv.ob		$v1, $v12, $v18, $21

	alnv.qh		$v1, $v12, $v18, $21

	and.ob		$v1, $v12, 18
	and.ob		$v1, $v12, $v18
	and.ob		$v1, $v12, $v18[6]

	and.qh		$v1, $v12, 18
	and.qh		$v1, $v12, $v18
	and.qh		$v1, $v12, $v18[2]

	c.eq.ob		$v12, 18
	c.eq.ob		$v12, $v18
	c.eq.ob		$v12, $v18[6]

	c.eq.qh		$v12, 18
	c.eq.qh		$v12, $v18
	c.eq.qh		$v12, $v18[2]

	c.le.ob		$v12, 18
	c.le.ob		$v12, $v18
	c.le.ob		$v12, $v18[6]

	c.le.qh		$v12, 18
	c.le.qh		$v12, $v18
	c.le.qh		$v12, $v18[2]

	c.lt.ob		$v12, 18
	c.lt.ob		$v12, $v18
	c.lt.ob		$v12, $v18[6]

	c.lt.qh		$v12, 18
	c.lt.qh		$v12, $v18
	c.lt.qh		$v12, $v18[2]

	max.ob		$v1, $v12, 18
	max.ob		$v1, $v12, $v18
	max.ob		$v1, $v12, $v18[6]

	max.qh		$v1, $v12, 18
	max.qh		$v1, $v12, $v18
	max.qh		$v1, $v12, $v18[2]

	min.ob		$v1, $v12, 18
	min.ob		$v1, $v12, $v18
	min.ob		$v1, $v12, $v18[6]

	min.qh		$v1, $v12, 18
	min.qh		$v1, $v12, $v18
	min.qh		$v1, $v12, $v18[2]

	msgn.qh		$v1, $v12, 18
	msgn.qh		$v1, $v12, $v18
	msgn.qh		$v1, $v12, $v18[2]

	mul.ob		$v1, $v12, 18
	mul.ob		$v1, $v12, $v18
	mul.ob		$v1, $v12, $v18[6]

	mul.qh		$v1, $v12, 18
	mul.qh		$v1, $v12, $v18
	mul.qh		$v1, $v12, $v18[2]

	mula.ob		$v12, 18
	mula.ob		$v12, $v18
	mula.ob		$v12, $v18[6]

	mula.qh		$v12, 18
	mula.qh		$v12, $v18
	mula.qh		$v12, $v18[2]

	mull.ob		$v12, 18
	mull.ob		$v12, $v18
	mull.ob		$v12, $v18[6]

	mull.qh		$v12, 18
	mull.qh		$v12, $v18
	mull.qh		$v12, $v18[2]

	muls.ob		$v12, 18
	muls.ob		$v12, $v18
	muls.ob		$v12, $v18[6]

	muls.qh		$v12, 18
	muls.qh		$v12, $v18
	muls.qh		$v12, $v18[2]

	mulsl.ob	$v12, 18
	mulsl.ob	$v12, $v18
	mulsl.ob	$v12, $v18[6]

	mulsl.qh	$v12, 18
	mulsl.qh	$v12, $v18
	mulsl.qh	$v12, $v18[2]

	nor.ob		$v1, $v12, 18
	nor.ob		$v1, $v12, $v18
	nor.ob		$v1, $v12, $v18[6]

	nor.qh		$v1, $v12, 18
	nor.qh		$v1, $v12, $v18
	nor.qh		$v1, $v12, $v18[2]

	or.ob		$v1, $v12, 18
	or.ob		$v1, $v12, $v18
	or.ob		$v1, $v12, $v18[6]

	or.qh		$v1, $v12, 18
	or.qh		$v1, $v12, $v18
	or.qh		$v1, $v12, $v18[2]

	pickf.ob	$v1, $v12, 18
	pickf.ob	$v1, $v12, $v18
	pickf.ob	$v1, $v12, $v18[6]

	pickf.qh	$v1, $v12, 18
	pickf.qh	$v1, $v12, $v18
	pickf.qh	$v1, $v12, $v18[2]

	pickt.ob	$v1, $v12, 18
	pickt.ob	$v1, $v12, $v18
	pickt.ob	$v1, $v12, $v18[6]

	pickt.qh	$v1, $v12, 18
	pickt.qh	$v1, $v12, $v18
	pickt.qh	$v1, $v12, $v18[2]

	rach.ob		$v1

	rach.qh		$v1

	racl.ob		$v1

	racl.qh		$v1

	racm.ob		$v1

	racm.qh		$v1

	rnas.qh		$v1, 18
	rnas.qh		$v1, $v18
	rnas.qh		$v1, $v18[2]

	rnau.ob		$v1, 18
	rnau.ob		$v1, $v18
	rnau.ob		$v1, $v18[6]

	rnau.qh		$v1, 18
	rnau.qh		$v1, $v18
	rnau.qh		$v1, $v18[2]

	rnes.qh		$v1, 18
	rnes.qh		$v1, $v18
	rnes.qh		$v1, $v18[2]

	rneu.ob		$v1, 18
	rneu.ob		$v1, $v18
	rneu.ob		$v1, $v18[6]

	rneu.qh		$v1, 18
	rneu.qh		$v1, $v18
	rneu.qh		$v1, $v18[2]

	rzs.qh		$v1, 18
	rzs.qh		$v1, $v18
	rzs.qh		$v1, $v18[2]

	rzu.ob		$v1, 18
	rzu.ob		$v1, $v18
	rzu.ob		$v1, $v18[6]

	rzu.qh		$v1, 18
	rzu.qh		$v1, $v18
	rzu.qh		$v1, $v18[2]

	shfl.bfla.qh	$v1, $v12, $v18

	shfl.mixh.ob	$v1, $v12, $v18
	shfl.mixh.qh	$v1, $v12, $v18

	shfl.mixl.ob	$v1, $v12, $v18
	shfl.mixl.qh	$v1, $v12, $v18

	shfl.pach.ob	$v1, $v12, $v18
	shfl.pach.qh	$v1, $v12, $v18

	shfl.repa.qh	$v1, $v12, $v18

	shfl.repb.qh	$v1, $v12, $v18

	shfl.upsl.ob	$v1, $v12, $v18

	sll.ob		$v1, $v12, 18
	sll.ob		$v1, $v12, $v18
	sll.ob		$v1, $v12, $v18[6]

	sll.qh		$v1, $v12, 18
	sll.qh		$v1, $v12, $v18
	sll.qh		$v1, $v12, $v18[2]

	sra.qh		$v1, $v12, 18
	sra.qh		$v1, $v12, $v18
	sra.qh		$v1, $v12, $v18[2]

	srl.ob		$v1, $v12, 18
	srl.ob		$v1, $v12, $v18
	srl.ob		$v1, $v12, $v18[6]

	srl.qh		$v1, $v12, 18
	srl.qh		$v1, $v12, $v18
	srl.qh		$v1, $v12, $v18[2]

	sub.ob		$v1, $v12, 18
	sub.ob		$v1, $v12, $v18
	sub.ob		$v1, $v12, $v18[6]

	sub.qh		$v1, $v12, 18
	sub.qh		$v1, $v12, $v18
	sub.qh		$v1, $v12, $v18[2]

	suba.ob		$v12, 18
	suba.ob		$v12, $v18
	suba.ob		$v12, $v18[6]

	suba.qh		$v12, 18
	suba.qh		$v12, $v18
	suba.qh		$v12, $v18[2]

	subl.ob		$v12, 18
	subl.ob		$v12, $v18
	subl.ob		$v12, $v18[6]

	subl.qh		$v12, 18
	subl.qh		$v12, $v18
	subl.qh		$v12, $v18[2]

	wach.ob		$v12

	wach.qh		$v12

	wacl.ob		$v12, $v18

	wacl.qh		$v12, $v18

	xor.ob		$v1, $v12, 18
	xor.ob		$v1, $v12, $v18
	xor.ob		$v1, $v12, $v18[6]

	xor.qh		$v1, $v12, 18
	xor.qh		$v1, $v12, $v18
	xor.qh		$v1, $v12, $v18[2]

# Force at least 8 (non-delay-slot) zero bytes, to make 'objdump' print ...
      .space  8
@


1.1
log
@[ gas/ChangeLog ]
2002-05-30  Chris G. Demetriou  <cgd@@broadcom.com>
            Ed Satterthwaite  <ehs@@broadcom.com>

	* config/tc-mips.c (mips_set_options): New "ase_mdmx" member.
	(mips_opts): Initialize "ase_mdmx" member.
	(file_ase_mdmx): New variable.
	(CPU_HAS_MDMX): New macro.
	(md_begin): Initialize mips_opts.ase_mdmx and file_ase_mdmx
	based on command line options and configuration defaults.
	(macro_build): Note in comment that use of MDMX in macros is
	not currently allowed.
	(validate_mips_insn): Add support for the "O", "Q", "X", "Y", and
	"Z" MDMX operand types.
	(mips_ip): Accept MDMX instructions if mips_opts.ase_mdmx is set,
	and add support for the "O", "Q", "X", "Y", and "Z" MDMX operand
	types.
	(OPTION_MDMX, OPTION_NO_MDMX, md_longopts, md_parse_option):
	Add support for "-mdmx" and "-no-mdmx" options.
	(OPTION_ELF_BASE): Move to accomodate new options.
	(s_mipsset): Support ".set mdmx" and ".set nomdmx".
	(mips_elf_final_processing): Set MDMX ASE ELF header flag if
	file_ase_mdmx was set.
	* doc/as.texinfo: Document -mdmx and -no-mdmx options.
	* doc/c-mips.texi: Likewise, and document ".set mdmx" and ".set
	nomdmx" directives.

[ gas/testsuite/ChangeLog ]
2002-05-30  Chris G. Demetriou  <cgd@@broadcom.com>

	* gas/mips/mips64-mdmx.s: New file.
	* gas/mips/mips64-mdmx.d: Likewise.
	* gas/mips/mips.exp: Run new "mips64-mdmx" test.

[ include/opcode/ChangeLog ]
2002-05-30  Chris G. Demetriou  <cgd@@broadcom.com>

	* mips.h (OP_SH_ALN, OP_MASK_ALN, OP_SH_VSEL, OP_MASK_VSEL)
	(MDMX_FMTSEL_IMM_QH, MDMX_FMTSEL_IMM_OB, MDMX_FMTSEL_VEC_QH)
	(MDMX_FMTSEL_VEC_OB, INSN_READ_MDMX_ACC, INSN_WRITE_MDMX_ACC)
	(INSN_MDMX): New constants, for MDMX support.
	(opcode character list): Add "O", "Q", "X", "Y", and "Z" for MDMX.

[ opcodes/ChangeLog ]
2002-05-30  Chris G. Demetriou  <cgd@@broadcom.com>
            Ed Satterthwaite  <ehs@@broadcom.com>

	* mips-dis.c (print_insn_arg): Add support for 'O', 'Q', 'X', 'Y',
	and 'Z' formats, for MDMX.
        (mips_isa_type): Add MDMX instructions to the ISA
	bit mask for bfd_mach_mipsisa64.
	* mips-opc.c: Add support for MDMX instructions.
	(MX): New definition.

	* mips-dis.c: Update copyright years to include 2002.
@
text
@d17 1
a17 1
	add.ob		$v1, $v12, $v18
d22 1
a23 1
	add.qh		$v1, $v12, 18
d25 1
a25 1
	adda.ob		$v12, $v18
d29 1
a29 1
	adda.qh		$v12, $v18
d33 1
a33 1
	addl.ob		$v12, $v18
d37 1
a37 1
	addl.qh		$v12, $v18
d49 1
a49 1
	and.ob		$v1, $v12, $v18
d54 1
a55 1
	and.qh		$v1, $v12, 18
d57 1
a57 1
	c.eq.ob		$v12, $v18
d61 1
a61 1
	c.eq.qh		$v12, $v18
d65 1
a65 1
	c.le.ob		$v12, $v18
d69 1
a69 1
	c.le.qh		$v12, $v18
d73 1
a73 1
	c.lt.ob		$v12, $v18
d77 1
a77 1
	c.lt.qh		$v12, $v18
d81 1
a81 1
	max.ob		$v1, $v12, $v18
d86 1
a87 1
	max.qh		$v1, $v12, 18
d89 1
a89 1
	min.ob		$v1, $v12, $v18
d94 1
a95 1
	min.qh		$v1, $v12, 18
d98 1
a99 1
	msgn.qh		$v1, $v12, 18
d101 1
a101 1
	mul.ob		$v1, $v12, $v18
d106 1
a107 1
	mul.qh		$v1, $v12, 18
d109 1
a109 1
	mula.ob		$v12, $v18
d113 1
a113 1
	mula.qh		$v12, $v18
d117 1
a117 1
	mull.ob		$v12, $v18
d121 1
a121 1
	mull.qh		$v12, $v18
d125 1
a125 1
	muls.ob		$v12, $v18
d129 1
a129 1
	muls.qh		$v12, $v18
d133 1
a133 1
	mulsl.ob	$v12, $v18
d137 1
a137 1
	mulsl.qh	$v12, $v18
d141 1
a141 1
	nor.ob		$v1, $v12, $v18
d146 1
a147 1
	nor.qh		$v1, $v12, 18
d149 1
a149 1
	or.ob		$v1, $v12, $v18
d154 1
a155 1
	or.qh		$v1, $v12, 18
d157 1
a157 1
	pickf.ob	$v1, $v12, $v18
d162 1
a163 1
	pickf.qh	$v1, $v12, 18
d165 1
a165 1
	pickt.ob	$v1, $v12, $v18
d170 1
a171 1
	pickt.qh	$v1, $v12, 18
d186 1
a187 1
	rnas.qh		$v1, 18
d190 2
a191 2
	rnau.ob		$v1, $v18[2]
	rnau.ob		$v1, 18
d194 1
a195 1
	rnau.qh		$v1, 18
d198 1
a199 1
	rnes.qh		$v1, 18
d202 2
a203 2
	rneu.ob		$v1, $v18[2]
	rneu.ob		$v1, 18
d206 1
a207 1
	rneu.qh		$v1, 18
d210 1
a211 1
	rzs.qh		$v1, 18
d214 2
a215 2
	rzu.ob		$v1, $v18[2]
	rzu.ob		$v1, 18
d218 1
a219 1
	rzu.qh		$v1, 18
d238 1
a238 1
	sll.ob		$v1, $v12, $v18
d243 1
a244 1
	sll.qh		$v1, $v12, 18
d247 1
a248 1
	sra.qh		$v1, $v12, 18
d250 1
a250 1
	srl.ob		$v1, $v12, $v18
d255 1
a256 1
	srl.qh		$v1, $v12, 18
d258 1
a258 1
	sub.ob		$v1, $v12, $v18
d263 1
a264 1
	sub.qh		$v1, $v12, 18
d266 1
a266 1
	suba.ob		$v12, $v18
d270 1
a270 1
	suba.qh		$v12, $v18
d274 1
a274 1
	subl.ob		$v12, $v18
d278 1
a278 1
	subl.qh		$v12, $v18
d290 1
a290 1
	xor.ob		$v1, $v12, $v18
d295 1
a296 1
	xor.qh		$v1, $v12, 18
@

