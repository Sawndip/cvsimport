head	1.5;
access;
symbols
	binutils-2_24-branch:1.5.0.2
	binutils-2_24-branchpoint:1.5
	binutils-2_21_1:1.3
	binutils-2_23_2:1.4.6.1
	binutils-2_23_1:1.4.6.1
	binutils-2_23:1.4.6.1
	binutils-2_23-branch:1.4.0.6
	binutils-2_23-branchpoint:1.4
	binutils-2_22_branch:1.4.0.4
	binutils-2_22:1.4
	binutils-2_22-branch:1.4.0.2
	binutils-2_22-branchpoint:1.4
	binutils-2_21:1.3
	binutils-2_21-branch:1.3.0.24
	binutils-2_21-branchpoint:1.3
	binutils-2_20_1:1.3
	binutils-2_20:1.3
	binutils-arc-20081103-branch:1.3.0.22
	binutils-arc-20081103-branchpoint:1.3
	binutils-2_20-branch:1.3.0.20
	binutils-2_20-branchpoint:1.3
	dje-cgen-play1-branch:1.3.0.18
	dje-cgen-play1-branchpoint:1.3
	arc-20081103-branch:1.3.0.16
	arc-20081103-branchpoint:1.3
	binutils-2_19_1:1.3
	binutils-2_19:1.3
	binutils-2_19-branch:1.3.0.14
	binutils-2_19-branchpoint:1.3
	binutils-2_18:1.3
	binutils-2_18-branch:1.3.0.12
	binutils-2_18-branchpoint:1.3
	binutils-csl-coldfire-4_1-32:1.3
	binutils-csl-sourcerygxx-4_1-32:1.3
	binutils-csl-innovasic-fido-3_4_4-33:1.3
	binutils-csl-sourcerygxx-3_4_4-32:1.3
	binutils-csl-coldfire-4_1-30:1.3
	binutils-csl-sourcerygxx-4_1-30:1.3
	binutils-csl-coldfire-4_1-28:1.3
	binutils-csl-sourcerygxx-4_1-29:1.3
	binutils-csl-sourcerygxx-4_1-28:1.3
	binutils-csl-arm-2006q3-27:1.3
	binutils-csl-sourcerygxx-4_1-27:1.3
	binutils-csl-arm-2006q3-26:1.3
	binutils-csl-sourcerygxx-4_1-26:1.3
	binutils-csl-sourcerygxx-4_1-25:1.3
	binutils-csl-sourcerygxx-4_1-24:1.3
	binutils-csl-sourcerygxx-4_1-23:1.3
	binutils-csl-sourcerygxx-4_1-21:1.3
	binutils-csl-arm-2006q3-21:1.3
	binutils-csl-sourcerygxx-4_1-22:1.3
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.3
	binutils-csl-sourcerygxx-4_1-20:1.3
	binutils-csl-arm-2006q3-19:1.3
	binutils-csl-sourcerygxx-4_1-19:1.3
	binutils-csl-sourcerygxx-4_1-18:1.3
	binutils-csl-renesas-4_1-9:1.3
	binutils-csl-sourcerygxx-3_4_4-25:1.3
	binutils-csl-renesas-4_1-8:1.3
	binutils-csl-renesas-4_1-7:1.3
	binutils-csl-renesas-4_1-6:1.3
	binutils-csl-sourcerygxx-4_1-17:1.3
	binutils-csl-sourcerygxx-4_1-14:1.3
	binutils-csl-sourcerygxx-4_1-15:1.3
	binutils-csl-sourcerygxx-4_1-13:1.3
	binutils-2_17:1.3
	binutils-csl-sourcerygxx-4_1-12:1.3
	binutils-csl-sourcerygxx-3_4_4-21:1.3
	binutils-csl-wrs-linux-3_4_4-24:1.3
	binutils-csl-wrs-linux-3_4_4-23:1.3
	binutils-csl-sourcerygxx-4_1-9:1.3
	binutils-csl-sourcerygxx-4_1-8:1.3
	binutils-csl-sourcerygxx-4_1-7:1.3
	binutils-csl-arm-2006q1-6:1.3
	binutils-csl-sourcerygxx-4_1-6:1.3
	binutils-csl-wrs-linux-3_4_4-22:1.3
	binutils-csl-coldfire-4_1-11:1.3
	binutils-csl-sourcerygxx-3_4_4-19:1.3
	binutils-csl-coldfire-4_1-10:1.3
	binutils-csl-sourcerygxx-4_1-5:1.3
	binutils-csl-sourcerygxx-4_1-4:1.3
	binutils-csl-wrs-linux-3_4_4-21:1.3
	binutils-csl-morpho-4_1-4:1.3
	binutils-csl-sourcerygxx-3_4_4-17:1.3
	binutils-csl-wrs-linux-3_4_4-20:1.3
	binutils-2_17-branch:1.3.0.10
	binutils-2_17-branchpoint:1.3
	binutils-csl-2_17-branch:1.3.0.8
	binutils-csl-2_17-branchpoint:1.3
	binutils-csl-gxxpro-3_4-branch:1.3.0.6
	binutils-csl-gxxpro-3_4-branchpoint:1.3
	binutils-2_16_1:1.3
	binutils-csl-arm-2005q1b:1.3
	binutils-2_16:1.3
	binutils-csl-arm-2005q1a:1.3
	binutils-csl-arm-2005q1-branch:1.3.0.4
	binutils-csl-arm-2005q1-branchpoint:1.3
	binutils-2_16-branch:1.3.0.2
	binutils-2_16-branchpoint:1.3
	csl-arm-2004-q3d:1.2
	csl-arm-2004-q3:1.2
	binutils-2_15:1.2
	binutils-2_15-branchpoint:1.2
	csl-arm-2004-q1a:1.2
	csl-arm-2004-q1:1.2
	binutils-2_15-branch:1.2.0.6
	cagney_bfdfile-20040213-branch:1.2.0.4
	cagney_bfdfile-20040213-branchpoint:1.2
	cagney_bigcore-20040122-branch:1.2.0.2
	cagney_bigcore-20040122-branchpoint:1.2
	csl-arm-2003-q4:1.1
	binutils_latest_snapshot:1.5;
locks; strict;
comment	@# @;


1.5
date	2012.08.06.21.28.44;	author macro;	state Exp;
branches;
next	1.4;

1.4
date	2010.12.31.11.00.59;	author rsandifo;	state Exp;
branches
	1.4.6.1;
next	1.3;

1.3
date	2005.03.04.09.51.11;	author rsandifo;	state Exp;
branches;
next	1.2;

1.2
date	2004.01.09.02.24.23;	author ian;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.01.02.07.48;	author ths;	state Exp;
branches;
next	;

1.4.6.1
date	2012.09.04.14.37.57;	author gingold;	state Exp;
branches;
next	;


desc
@@


1.5
log
@	gas/testsuite/
	* gas/mips/mips.exp: Set has_newabi for all Linux targets.
	* gas/mips/cfi-n64-1.d: Adjust for targets that do not infer the
	ISA from the ABI.
	* gas/mips/elf-rel-got-n32.d: Likewise.
	* gas/mips/elf-rel-got-n64.d: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Likewise.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel18.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.
	* gas/mips/elf-rel28-n64.d: Likewise.
	* gas/mips/jal-newabi.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/macro-warn-1-n32.d: Likewise.
	* gas/mips/macro-warn-2-n32.d: Likewise.
	* gas/mips/n32-consec.d: Likewise.

	ld/testsuite/
	* ld-mips-elf/mips-elf.exp: Set has_newabi for all Linux targets.
	Adjust abi_asflags for targets that do not infer the ISA from the
	ABI.
	* ld-mips-elf/eh-frame1-n32.d: Adjust for targets that do not
	infer the ISA from the ABI.
	* ld-mips-elf/eh-frame1-n64.d: Likewise.
	* ld-mips-elf/eh-frame2-n32.d: Likewise.
	* ld-mips-elf/eh-frame2-n64.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32-embed.d: Likewise.
	* ld-mips-elf/elf-rel-got-n32.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-embed.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-got-n64.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32-embed.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n32.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-embed.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64-linux.d: Likewise.
	* ld-mips-elf/elf-rel-xgot-n64.d: Likewise.
	* ld-mips-elf/emit-relocs-1.d: Likewise.
	* ld-mips-elf/got-page-2.d: Likewise.
	* ld-mips-elf/no-shared-1-n32.d: Likewise.
	* ld-mips-elf/no-shared-1-n64.d: Likewise.
	* ld-mips-elf/rel32-n32.d: Likewise.
	* ld-mips-elf/rel64.d: Likewise.
	* ld-mips-elf/relax-jalr-n32-shared.d: Likewise.
	* ld-mips-elf/relax-jalr-n32.d: Likewise.
	* ld-mips-elf/relax-jalr-n64-shared.d: Likewise.
	* ld-mips-elf/relax-jalr-n64.d: Likewise.
	* ld-mips-elf/reloc-1-n32.d: Likewise.
	* ld-mips-elf/reloc-1-n64.d: Likewise.
	* ld-mips-elf/textrel-1.d: Likewise.
@
text
@#objdump: -d
#as: -march=from-abi -64
#name: MIPS ld-st-la constants (ABI n64)
#source: ldstla-n64.s

.*: +file format .*

Disassembly of section \.text:

0000000000000000 <\.text>:
   0:	3c020123 	lui	v0,0x123
   4:	34424567 	ori	v0,v0,0x4567
   8:	00021438 	dsll	v0,v0,0x10
   c:	344289ac 	ori	v0,v0,0x89ac
  10:	00021438 	dsll	v0,v0,0x10
  14:	0043102d 	daddu	v0,v0,v1
  18:	dc42cdef 	ld	v0,-12817\(v0\)
  1c:	3c02abcd 	lui	v0,0xabcd
  20:	3442ef01 	ori	v0,v0,0xef01
  24:	00021438 	dsll	v0,v0,0x10
  28:	34422345 	ori	v0,v0,0x2345
  2c:	00021438 	dsll	v0,v0,0x10
  30:	0043102d 	daddu	v0,v0,v1
  34:	dc426789 	ld	v0,26505\(v0\)
  38:	3c028000 	lui	v0,0x8000
  3c:	0043102d 	daddu	v0,v0,v1
  40:	dc420000 	ld	v0,0\(v0\)
  44:	2402ffff 	li	v0,-1
  48:	0002103c 	dsll32	v0,v0,0x0
  4c:	0043102d 	daddu	v0,v0,v1
  50:	dc420000 	ld	v0,0\(v0\)
  54:	3c028000 	lui	v0,0x8000
  58:	0043102d 	daddu	v0,v0,v1
  5c:	dc42ffff 	ld	v0,-1\(v0\)
  60:	3402abce 	li	v0,0xabce
  64:	00021438 	dsll	v0,v0,0x10
  68:	0043102d 	daddu	v0,v0,v1
  6c:	dc42ef01 	ld	v0,-4351\(v0\)
  70:	3c020123 	lui	v0,0x123
  74:	0043102d 	daddu	v0,v0,v1
  78:	dc424567 	ld	v0,17767\(v0\)
  7c:	3c010123 	lui	at,0x123
  80:	34214567 	ori	at,at,0x4567
  84:	00010c38 	dsll	at,at,0x10
  88:	342189ac 	ori	at,at,0x89ac
  8c:	00010c38 	dsll	at,at,0x10
  90:	0023082d 	daddu	at,at,v1
  94:	fc22cdef 	sd	v0,-12817\(at\)
  98:	3c01abcd 	lui	at,0xabcd
  9c:	3421ef01 	ori	at,at,0xef01
  a0:	00010c38 	dsll	at,at,0x10
  a4:	34212345 	ori	at,at,0x2345
  a8:	00010c38 	dsll	at,at,0x10
  ac:	0023082d 	daddu	at,at,v1
  b0:	fc226789 	sd	v0,26505\(at\)
  b4:	3c018000 	lui	at,0x8000
  b8:	0023082d 	daddu	at,at,v1
  bc:	fc220000 	sd	v0,0\(at\)
  c0:	2401ffff 	li	at,-1
  c4:	0001083c 	dsll32	at,at,0x0
  c8:	0023082d 	daddu	at,at,v1
  cc:	fc220000 	sd	v0,0\(at\)
  d0:	3c018000 	lui	at,0x8000
  d4:	0023082d 	daddu	at,at,v1
  d8:	fc22ffff 	sd	v0,-1\(at\)
  dc:	3401abce 	li	at,0xabce
  e0:	00010c38 	dsll	at,at,0x10
  e4:	0023082d 	daddu	at,at,v1
  e8:	fc22ef01 	sd	v0,-4351\(at\)
  ec:	3c010123 	lui	at,0x123
  f0:	0023082d 	daddu	at,at,v1
  f4:	fc224567 	sd	v0,17767\(at\)
  f8:	3c020123 	lui	v0,0x123
  fc:	34424567 	ori	v0,v0,0x4567
 100:	00021438 	dsll	v0,v0,0x10
 104:	344289ac 	ori	v0,v0,0x89ac
 108:	00021438 	dsll	v0,v0,0x10
 10c:	0043102d 	daddu	v0,v0,v1
 110:	8c42cdef 	lw	v0,-12817\(v0\)
 114:	3c02abcd 	lui	v0,0xabcd
 118:	3442ef01 	ori	v0,v0,0xef01
 11c:	00021438 	dsll	v0,v0,0x10
 120:	34422345 	ori	v0,v0,0x2345
 124:	00021438 	dsll	v0,v0,0x10
 128:	0043102d 	daddu	v0,v0,v1
 12c:	8c426789 	lw	v0,26505\(v0\)
 130:	3c028000 	lui	v0,0x8000
 134:	0043102d 	daddu	v0,v0,v1
 138:	8c420000 	lw	v0,0\(v0\)
 13c:	2402ffff 	li	v0,-1
 140:	0002103c 	dsll32	v0,v0,0x0
 144:	0043102d 	daddu	v0,v0,v1
 148:	8c420000 	lw	v0,0\(v0\)
 14c:	3c028000 	lui	v0,0x8000
 150:	0043102d 	daddu	v0,v0,v1
 154:	8c42ffff 	lw	v0,-1\(v0\)
 158:	3402abce 	li	v0,0xabce
 15c:	00021438 	dsll	v0,v0,0x10
 160:	0043102d 	daddu	v0,v0,v1
 164:	8c42ef01 	lw	v0,-4351\(v0\)
 168:	3c020123 	lui	v0,0x123
 16c:	0043102d 	daddu	v0,v0,v1
 170:	8c424567 	lw	v0,17767\(v0\)
 174:	3c010123 	lui	at,0x123
 178:	34214567 	ori	at,at,0x4567
 17c:	00010c38 	dsll	at,at,0x10
 180:	342189ac 	ori	at,at,0x89ac
 184:	00010c38 	dsll	at,at,0x10
 188:	0023082d 	daddu	at,at,v1
 18c:	ac22cdef 	sw	v0,-12817\(at\)
 190:	3c01abcd 	lui	at,0xabcd
 194:	3421ef01 	ori	at,at,0xef01
 198:	00010c38 	dsll	at,at,0x10
 19c:	34212345 	ori	at,at,0x2345
 1a0:	00010c38 	dsll	at,at,0x10
 1a4:	0023082d 	daddu	at,at,v1
 1a8:	ac226789 	sw	v0,26505\(at\)
 1ac:	3c018000 	lui	at,0x8000
 1b0:	0023082d 	daddu	at,at,v1
 1b4:	ac220000 	sw	v0,0\(at\)
 1b8:	2401ffff 	li	at,-1
 1bc:	0001083c 	dsll32	at,at,0x0
 1c0:	0023082d 	daddu	at,at,v1
 1c4:	ac220000 	sw	v0,0\(at\)
 1c8:	3c018000 	lui	at,0x8000
 1cc:	0023082d 	daddu	at,at,v1
 1d0:	ac22ffff 	sw	v0,-1\(at\)
 1d4:	3401abce 	li	at,0xabce
 1d8:	00010c38 	dsll	at,at,0x10
 1dc:	0023082d 	daddu	at,at,v1
 1e0:	ac22ef01 	sw	v0,-4351\(at\)
 1e4:	3c010123 	lui	at,0x123
 1e8:	0023082d 	daddu	at,at,v1
 1ec:	ac224567 	sw	v0,17767\(at\)
 1f0:	3c020123 	lui	v0,0x123
 1f4:	34424567 	ori	v0,v0,0x4567
 1f8:	00021438 	dsll	v0,v0,0x10
 1fc:	344289ab 	ori	v0,v0,0x89ab
 200:	00021438 	dsll	v0,v0,0x10
 204:	3442cdef 	ori	v0,v0,0xcdef
 208:	3c02abcd 	lui	v0,0xabcd
 20c:	3442ef01 	ori	v0,v0,0xef01
 210:	00021438 	dsll	v0,v0,0x10
 214:	34422345 	ori	v0,v0,0x2345
 218:	00021438 	dsll	v0,v0,0x10
 21c:	34426789 	ori	v0,v0,0x6789
 220:	3c028000 	lui	v0,0x8000
 224:	2402ffff 	li	v0,-1
 228:	0002103c 	dsll32	v0,v0,0x0
 22c:	3402abcd 	li	v0,0xabcd
 230:	00021438 	dsll	v0,v0,0x10
 234:	3442ef01 	ori	v0,v0,0xef01
 238:	3c027fff 	lui	v0,0x7fff
 23c:	3442ffff 	ori	v0,v0,0xffff
 240:	3c020123 	lui	v0,0x123
 244:	34424567 	ori	v0,v0,0x4567
	\.\.\.
@


1.4
log
@bfd/
2010-12-23  Robert Millan  <rmh@@gnu.org>

	* config.bfd: Recognize mips-freebsd and mips-kfreebsd-gnu.
	* configure.host: Likewise.
	* configure.in: Support for `bfd_elf32_ntradbigmips_freebsd_vec',
	`bfd_elf32_ntradlittlemips_freebsd_vec',
	`bfd_elf32_tradbigmips_freebsd_vec',
	`bfd_elf32_tradlittlemips_freebsd_vec',
	`bfd_elf64_tradbigmips_freebsd_vec' and
	`bfd_elf64_tradlittlemips_freebsd_vec'.
	* configure: Regenerate.
	* elf32-mips.c: New target for FreeBSD support
	(same as traditional MIPS but overrides ELF_OSABI
	with ELFOSABI_FREEBSD).
	* elf64-mips.c: Likewise.
	* elfn32-mips.c: Likewise.
	* targets.c (_bfd_target_vector): Add
	`bfd_elf32_ntradbigmips_freebsd_vec',
	`bfd_elf32_ntradlittlemips_freebsd_vec',
	`bfd_elf32_tradbigmips_freebsd_vec',
	`bfd_elf32_tradlittlemips_freebsd_vec',
	`bfd_elf64_tradbigmips_freebsd_vec' and
	`bfd_elf64_tradlittlemips_freebsd_vec'.

ld/
2010-12-14  Robert Millan  <rmh@@gnu.org>

	* configure.tgt: Recognize mips-freebsd and mips-kfreebsd-gnu.

	* emulparams/elf32btsmip_fbsd.sh: New file.
	* emulparams/elf32btsmipn32_fbsd.sh: Likewise.
	* emulparams/elf32ltsmip_fbsd.sh: Likewise.
	* emulparams/elf32ltsmipn32_fbsd.sh: Likewise.
	* emulparams/elf64btsmip_fbsd.sh: Likewise.
	* emulparams/elf64ltsmip_fbsd.sh: Likewise.

	* Makefile.am: Add build rules for `eelf32btsmip_fbsd.c',
	`eelf32btsmipn32_fbsd.c', `eelf32ltsmip_fbsd.c',
	`eelf32ltsmipn32_fbsd.c', `eelf64btsmip_fbsd.c' and
	`eelf64ltsmip_fbsd.c'.
	* Makefile.in: Regenerate.

gas/
2010-12-19  Robert Millan  <rmh@@gnu.org>
	    Richard Sandiford  <rdsandiford@@googlemail.com>

	* config/tc-mips.c (ELF_TARGET): New macro.  Generates target
	names accordingly to whether TE_FreeBSD and whether TE_TMIPS
	are defined.
	(mips_target_format): Refactor code using ELF_TARGET().
	(support_64bit_objects): Likewise.

	* configure.in: Recognize mips-freebsd and mips-kfreebsd-gnu.
	* configure.tgt: Likewise.
	* configure: Regenerate.

binutils/testsuite/
	* binutils-all/readelf.exp: Handle MIPS FreeBSD targets.

gas/testsuite/
	* gas/mips/e32el-rel2.d: Accept any file format.
	* gas/mips/elf-rel.d: Likewise.
	* gas/mips/elf-rel2.d: Likewise.
	* gas/mips/elf-rel3.d: Likewise.
	* gas/mips/elfel-rel.d: Likewise.
	* gas/mips/elfel-rel2.d: Likewise.
	* gas/mips/elfel-rel3.d: Likewise.
	* gas/mips/ldstla-32-mips3-shared.d: Likewise.
	* gas/mips/ldstla-32-mips3.d: Likewise.
	* gas/mips/ldstla-32-shared.d: Likewise.
	* gas/mips/ldstla-32.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/noat-1.d: Likewise.
	* gas/mips/set-arch.d: Likewise.
	* gas/mips/tls-o32.d: Likewise.

ld/testsuite/
	* ld-mips-elf/mips-elf-flags.exp: Handle FreeBSD targets.
	* ld-mips-elf/mips-elf.exp: Likewise.
	* ld-mips-elf/mips16-call-global.d: Accept any file format.
	* ld-mips-elf/mips16-intermix.d: Likewise.
@
text
@d2 1
a2 1
#as: -64
@


1.4.6.1
log
@bfd/
2012-08-09  Maciej W. Rozycki  <macro@@codesourcery.com>

	* elfxx-mips.c (LA25_LUI_MICROMIPS_1, LA25_LUI_MICROMIPS_2):
	Remove macros, folding them into...
	(LA25_LUI_MICROMIPS): ... this new macro.
	(LA25_J_MICROMIPS_1, LA25_J_MICROMIPS_2): Likewise into...
	(LA25_J_MICROMIPS): ... this new macro.
	(LA25_ADDIU_MICROMIPS_1, LA25_ADDIU_MICROMIPS_2): Likewise
	into...
	(LA25_ADDIU_MICROMIPS): ... this new macro.
	(bfd_put_micromips_32, bfd_get_micromips_32): New functions.
	(mips_elf_create_la25_stub): Use them.
	(check_br32_dslot, check_br32, check_relocated_bzc): Likewise.
	(_bfd_mips_elf_relax_section): Likewise.

gas/
	* config/tc-mips.c (NO_ISA_COP, COP_INSN): Remove macros.
	(is_opcode_valid): Remove coprocessor instruction exclusions.
	Replace OPCODE_IS_MEMBER with opcode_is_member.
	(is_opcode_valid_16): Replace OPCODE_IS_MEMBER with
	opcode_is_member.
	(macro): Remove coprocessor instruction exclusions.

gas/
	* gas/mips/mips.exp: Set has_newabi for all Linux targets.
	* gas/mips/cfi-n64-1.d: Adjust for targets that do not infer the
	ISA from the ABI.
	* gas/mips/elf-rel-got-n32.d: Likewise.
	* gas/mips/elf-rel-got-n64.d: Likewise.
	* gas/mips/elf-rel-xgot-n32.d: Likewise.
	* gas/mips/elf-rel-xgot-n64.d: Likewise.
	* gas/mips/elf-rel18.d: Likewise.
	* gas/mips/elf-rel28-n32.d: Likewise.
	* gas/mips/elf-rel28-n64.d: Likewise.
	* gas/mips/jal-newabi.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/macro-warn-1-n32.d: Likewise.
	* gas/mips/macro-warn-2-n32.d: Likewise.
	* gas/mips/n32-consec.d: Likewise.

include/
2012-08-13  Richard Sandiford  <rdsandiford@@googlemail.com>
            Maciej W. Rozycki  <macro@@codesourcery.com>

	* mips.h (mips_opcode): Add the exclusions field.
	(OPCODE_IS_MEMBER): Remove macro.
	(cpu_is_member): New inline function.
	(opcode_is_member): Likewise.

ld/
	* emulparams/elf32bmip.sh: Make _gp hidden.
	* emulparams/elf32bmipn32-defs.sh: Likewise.
	* emulparams/elf32mipswindiss.sh: Likewise.
	* scripttempl/mips.sc: Likewise.

ld/
2012-08-28  Maciej W. Rozycki  <macro@@codesourcery.com>

	* ld-elf/export-class.sd: New test.
	* ld-elf/export-class.vd: New test.
	* ld-elf/export-class-def.s: New test source.
	* ld-elf/export-class-dep.s: New test source.
	* ld-elf/export-class-lib.s: New test source.
	* ld-elf/export-class-ref.s: New test source.
	* ld-elf/export-class-lib.ver: New test version script.
	* ld-elf/export-class.exp: New test script.
	* ld-arm/arm-export-class.rd: New test.
	* ld-arm/arm-export-class.xd: New test.
	* ld-arm/export-class.exp: New test script.
	* ld-i386/i386-export-class.rd: New test.
	* ld-i386/i386-export-class.xd: New test.
	* ld-i386/export-class.exp: New test script.
	* ld-mips-elf/mips-32-export-class.rd: New test.
	* ld-mips-elf/mips-32-export-class.xd: New test.
	* ld-mips-elf/mips-64-export-class.rd: New test.
	* ld-mips-elf/mips-64-export-class.xd: New test.
	* ld-mips-elf/export-class.exp: New test script.
	* ld-powerpc/powerpc-32-export-class.rd: New test.
	* ld-powerpc/powerpc-32-export-class.xd: New test.
	* ld-powerpc/powerpc-64-export-class.rd: New test.
	* ld-powerpc/powerpc-64-export-class.xd: New test.
	* ld-powerpc/export-class.exp: New test script.
	* ld-x86-64/x86-64-64-export-class.rd: New test.
	* ld-x86-64/x86-64-x32-export-class.rd: New test.
	* ld-x86-64/export-class.exp: New test script.

opcodes/
2012-08-14  Maciej W. Rozycki  <macro@@codesourcery.com>

	* mips-dis.c (print_insn_args): Add GET_OP and GET_OP_S local
	macros, use local variables for info struct member accesses,
	update the type of the variable used to hold the instruction
	word.
	(print_insn_mips, print_mips16_insn_arg): Likewise.
	(print_insn_mips16): Add GET_OP and GET_OP_S local macros, use
	local variables for info struct member accesses.
	(print_insn_micromips): Add GET_OP_S local macro.
	(_print_insn_mips): Update the type of the variable used to hold
	the instruction word.
@
text
@d2 1
a2 1
#as: -march=from-abi -64
@


1.3
log
@	* config/tc-mips.c (mips_set_options): Add sym32 field.
	(mips_opts): Initialize it.
	(HAVE_32BIT_ADDRESSES): Set to true if pointers are 32 bits wide.
	(HAVE_64BIT_ADDRESSES): Redefine as !HAVE_32BIT_ADDRESSES.
	(HAVE_32BIT_SYMBOLS, HAVE_64BIT_SYMBOLS): New macros.
	(load_address): Use HAVE_64BIT_SYMBOLS instead of HAVE_64BIT_ADDRESSES
	when deciding whether to use a symbolic %highest/%higher expansion.
	(macro): Likewise.  Remove o64/n32 linux hack.  Always use
	ADDRESS_ADD*_INSN for address addition in the expansion of "dla"
	and "la".  Handle constants separately from symbolic expressions in
	the "ld_st:" case, using 64-bit arithmetic if HAVE_64BIT_ADDRESSES
	and using load_register to load the high part of the address.
	(OPTION_MSYM32, OPTION_NO_MSYM32): New macros.
	(OPTION_ELF_BASE): Bump by 2.
	(md_longopts): Add entries for -msym32 and -mno-sym32.
	(md_parse_option): Handle them.
	(usage): Document them.
	(s_mipsset): Handle ".set sym32" and ".set nosym32".
	(s_cpload, s_cpsetup): Use HAVE_64BIT_SYMBOLS instead of
	HAVE_64BIT_ADDRESSES to detect 64-bit values of "_gp".
	* doc/c-mips.texi: Document ".set sym32", ".set nosym32",
	-msym32 and -mno-sym32.
@
text
@d6 1
a6 1
.*: +file format elf64-.*mips
@


1.2
log
@	* gas/mips/ldstla-n64.d: Pass -64 to assembler, not -n64.
	* gas/mips/ldstla-n64-shared.d: Likewise.
@
text
@d12 5
a16 5
   4:	3c0189ac 	lui	at,0x89ac
   8:	64424568 	daddiu	v0,v0,17768
   c:	0023082d 	daddu	at,at,v1
  10:	0002103c 	dsll32	v0,v0,0x0
  14:	0041102d 	daddu	v0,v0,at
d18 6
a23 6
  1c:	3c02abce 	lui	v0,0xabce
  20:	3c012345 	lui	at,0x2345
  24:	6442ef01 	daddiu	v0,v0,-4351
  28:	0023082d 	daddu	at,at,v1
  2c:	0002103c 	dsll32	v0,v0,0x0
  30:	0041102d 	daddu	v0,v0,at
d28 39
a66 39
  44:	3c020000 	lui	v0,0x0
  48:	3c010000 	lui	at,0x0
  4c:	6442ffff 	daddiu	v0,v0,-1
  50:	0023082d 	daddu	at,at,v1
  54:	0002103c 	dsll32	v0,v0,0x0
  58:	0041102d 	daddu	v0,v0,at
  5c:	dc420000 	ld	v0,0\(v0\)
  60:	3c028000 	lui	v0,0x8000
  64:	0043102d 	daddu	v0,v0,v1
  68:	dc42ffff 	ld	v0,-1\(v0\)
  6c:	3c020000 	lui	v0,0x0
  70:	3c01abce 	lui	at,0xabce
  74:	64420001 	daddiu	v0,v0,1
  78:	0023082d 	daddu	at,at,v1
  7c:	0002103c 	dsll32	v0,v0,0x0
  80:	0041102d 	daddu	v0,v0,at
  84:	dc42ef01 	ld	v0,-4351\(v0\)
  88:	3c020123 	lui	v0,0x123
  8c:	0043102d 	daddu	v0,v0,v1
  90:	dc424567 	ld	v0,17767\(v0\)
  94:	3c010123 	lui	at,0x123
  98:	64214568 	daddiu	at,at,17768
  9c:	00010c38 	dsll	at,at,0x10
  a0:	642189ac 	daddiu	at,at,-30292
  a4:	00010c38 	dsll	at,at,0x10
  a8:	0023082d 	daddu	at,at,v1
  ac:	fc22cdef 	sd	v0,-12817\(at\)
  b0:	3c01abce 	lui	at,0xabce
  b4:	6421ef01 	daddiu	at,at,-4351
  b8:	00010c38 	dsll	at,at,0x10
  bc:	64212345 	daddiu	at,at,9029
  c0:	00010c38 	dsll	at,at,0x10
  c4:	0023082d 	daddu	at,at,v1
  c8:	fc226789 	sd	v0,26505\(at\)
  cc:	3c018000 	lui	at,0x8000
  d0:	0023082d 	daddu	at,at,v1
  d4:	fc220000 	sd	v0,0\(at\)
  d8:	3c010000 	lui	at,0x0
  dc:	6421ffff 	daddiu	at,at,-1
d68 89
a156 113
  e4:	64210000 	daddiu	at,at,0
  e8:	00010c38 	dsll	at,at,0x10
  ec:	0023082d 	daddu	at,at,v1
  f0:	fc220000 	sd	v0,0\(at\)
  f4:	3c018000 	lui	at,0x8000
  f8:	0023082d 	daddu	at,at,v1
  fc:	fc22ffff 	sd	v0,-1\(at\)
 100:	3c010000 	lui	at,0x0
 104:	64210001 	daddiu	at,at,1
 108:	00010c38 	dsll	at,at,0x10
 10c:	6421abce 	daddiu	at,at,-21554
 110:	00010c38 	dsll	at,at,0x10
 114:	0023082d 	daddu	at,at,v1
 118:	fc22ef01 	sd	v0,-4351\(at\)
 11c:	3c010123 	lui	at,0x123
 120:	0023082d 	daddu	at,at,v1
 124:	fc224567 	sd	v0,17767\(at\)
 128:	3c020123 	lui	v0,0x123
 12c:	3c0189ac 	lui	at,0x89ac
 130:	64424568 	daddiu	v0,v0,17768
 134:	0023082d 	daddu	at,at,v1
 138:	0002103c 	dsll32	v0,v0,0x0
 13c:	0041102d 	daddu	v0,v0,at
 140:	8c42cdef 	lw	v0,-12817\(v0\)
 144:	3c02abce 	lui	v0,0xabce
 148:	3c012345 	lui	at,0x2345
 14c:	6442ef01 	daddiu	v0,v0,-4351
 150:	0023082d 	daddu	at,at,v1
 154:	0002103c 	dsll32	v0,v0,0x0
 158:	0041102d 	daddu	v0,v0,at
 15c:	8c426789 	lw	v0,26505\(v0\)
 160:	3c028000 	lui	v0,0x8000
 164:	0043102d 	daddu	v0,v0,v1
 168:	8c420000 	lw	v0,0\(v0\)
 16c:	3c020000 	lui	v0,0x0
 170:	3c010000 	lui	at,0x0
 174:	6442ffff 	daddiu	v0,v0,-1
 178:	0023082d 	daddu	at,at,v1
 17c:	0002103c 	dsll32	v0,v0,0x0
 180:	0041102d 	daddu	v0,v0,at
 184:	8c420000 	lw	v0,0\(v0\)
 188:	3c028000 	lui	v0,0x8000
 18c:	0043102d 	daddu	v0,v0,v1
 190:	8c42ffff 	lw	v0,-1\(v0\)
 194:	3c020000 	lui	v0,0x0
 198:	3c01abce 	lui	at,0xabce
 19c:	64420001 	daddiu	v0,v0,1
 1a0:	0023082d 	daddu	at,at,v1
 1a4:	0002103c 	dsll32	v0,v0,0x0
 1a8:	0041102d 	daddu	v0,v0,at
 1ac:	8c42ef01 	lw	v0,-4351\(v0\)
 1b0:	3c020123 	lui	v0,0x123
 1b4:	0043102d 	daddu	v0,v0,v1
 1b8:	8c424567 	lw	v0,17767\(v0\)
 1bc:	3c010123 	lui	at,0x123
 1c0:	64214568 	daddiu	at,at,17768
 1c4:	00010c38 	dsll	at,at,0x10
 1c8:	642189ac 	daddiu	at,at,-30292
 1cc:	00010c38 	dsll	at,at,0x10
 1d0:	0023082d 	daddu	at,at,v1
 1d4:	ac22cdef 	sw	v0,-12817\(at\)
 1d8:	3c01abce 	lui	at,0xabce
 1dc:	6421ef01 	daddiu	at,at,-4351
 1e0:	00010c38 	dsll	at,at,0x10
 1e4:	64212345 	daddiu	at,at,9029
 1e8:	00010c38 	dsll	at,at,0x10
 1ec:	0023082d 	daddu	at,at,v1
 1f0:	ac226789 	sw	v0,26505\(at\)
 1f4:	3c018000 	lui	at,0x8000
 1f8:	0023082d 	daddu	at,at,v1
 1fc:	ac220000 	sw	v0,0\(at\)
 200:	3c010000 	lui	at,0x0
 204:	6421ffff 	daddiu	at,at,-1
 208:	00010c38 	dsll	at,at,0x10
 20c:	64210000 	daddiu	at,at,0
 210:	00010c38 	dsll	at,at,0x10
 214:	0023082d 	daddu	at,at,v1
 218:	ac220000 	sw	v0,0\(at\)
 21c:	3c018000 	lui	at,0x8000
 220:	0023082d 	daddu	at,at,v1
 224:	ac22ffff 	sw	v0,-1\(at\)
 228:	3c010000 	lui	at,0x0
 22c:	64210001 	daddiu	at,at,1
 230:	00010c38 	dsll	at,at,0x10
 234:	6421abce 	daddiu	at,at,-21554
 238:	00010c38 	dsll	at,at,0x10
 23c:	0023082d 	daddu	at,at,v1
 240:	ac22ef01 	sw	v0,-4351\(at\)
 244:	3c010123 	lui	at,0x123
 248:	0023082d 	daddu	at,at,v1
 24c:	ac224567 	sw	v0,17767\(at\)
 250:	3c020123 	lui	v0,0x123
 254:	34424567 	ori	v0,v0,0x4567
 258:	00021438 	dsll	v0,v0,0x10
 25c:	344289ab 	ori	v0,v0,0x89ab
 260:	00021438 	dsll	v0,v0,0x10
 264:	3442cdef 	ori	v0,v0,0xcdef
 268:	3c02abcd 	lui	v0,0xabcd
 26c:	3442ef01 	ori	v0,v0,0xef01
 270:	00021438 	dsll	v0,v0,0x10
 274:	34422345 	ori	v0,v0,0x2345
 278:	00021438 	dsll	v0,v0,0x10
 27c:	34426789 	ori	v0,v0,0x6789
 280:	3c028000 	lui	v0,0x8000
 284:	2402ffff 	li	v0,-1
 288:	0002103c 	dsll32	v0,v0,0x0
 28c:	3402abcd 	li	v0,0xabcd
 290:	00021438 	dsll	v0,v0,0x10
 294:	3442ef01 	ori	v0,v0,0xef01
 298:	3c027fff 	lui	v0,0x7fff
 29c:	3442ffff 	ori	v0,v0,0xffff
 2a0:	3c020123 	lui	v0,0x123
 2a4:	34424567 	ori	v0,v0,0x4567
@


1.1
log
@	* config/tc-mips.c (macro_build_ldst_constoffset): Fix sign extension
	tests.
	(load_register): Likewise.
	(macro): Likewise.

	* gas/mips/ldstla-32-shared.d: New file.
	* gas/mips/ldstla-32.d: New file.
	* gas/mips/ldstla-32.s: New file.
	* gas/mips/ldstla-n32-shared.d: New file.
	* gas/mips/ldstla-n32.d: New file.
	* gas/mips/ldstla-n32.s: New file.
	* gas/mips/ldstla-n64-shared.d: New file.
	* gas/mips/ldstla-n64.d: New file.
	* gas/mips/ldstla-n64.s: New file.
	* gas/mips/mips.exp: Add ld-st-la tests.
@
text
@d2 1
a2 1
#as: -n64
@

