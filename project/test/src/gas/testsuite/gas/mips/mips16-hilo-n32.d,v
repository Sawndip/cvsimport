head	1.2;
access;
symbols
	binutils-2_24-branch:1.2.0.4
	binutils-2_24-branchpoint:1.2
	binutils-2_21_1:1.1
	binutils-2_23_2:1.2
	binutils-2_23_1:1.2
	binutils-2_23:1.2
	binutils-2_23-branch:1.2.0.2
	binutils-2_23-branchpoint:1.2
	binutils-2_22_branch:1.1.0.28
	binutils-2_22:1.1
	binutils-2_22-branch:1.1.0.26
	binutils-2_22-branchpoint:1.1
	binutils-2_21:1.1
	binutils-2_21-branch:1.1.0.24
	binutils-2_21-branchpoint:1.1
	binutils-2_20_1:1.1
	binutils-2_20:1.1
	binutils-arc-20081103-branch:1.1.0.22
	binutils-arc-20081103-branchpoint:1.1
	binutils-2_20-branch:1.1.0.20
	binutils-2_20-branchpoint:1.1
	dje-cgen-play1-branch:1.1.0.18
	dje-cgen-play1-branchpoint:1.1
	arc-20081103-branch:1.1.0.16
	arc-20081103-branchpoint:1.1
	binutils-2_19_1:1.1
	binutils-2_19:1.1
	binutils-2_19-branch:1.1.0.14
	binutils-2_19-branchpoint:1.1
	binutils-2_18:1.1
	binutils-2_18-branch:1.1.0.12
	binutils-2_18-branchpoint:1.1
	binutils-csl-coldfire-4_1-32:1.1
	binutils-csl-sourcerygxx-4_1-32:1.1
	binutils-csl-innovasic-fido-3_4_4-33:1.1
	binutils-csl-sourcerygxx-3_4_4-32:1.1
	binutils-csl-coldfire-4_1-30:1.1
	binutils-csl-sourcerygxx-4_1-30:1.1
	binutils-csl-coldfire-4_1-28:1.1
	binutils-csl-sourcerygxx-4_1-29:1.1
	binutils-csl-sourcerygxx-4_1-28:1.1
	binutils-csl-arm-2006q3-27:1.1
	binutils-csl-sourcerygxx-4_1-27:1.1
	binutils-csl-arm-2006q3-26:1.1
	binutils-csl-sourcerygxx-4_1-26:1.1
	binutils-csl-sourcerygxx-4_1-25:1.1
	binutils-csl-sourcerygxx-4_1-24:1.1
	binutils-csl-sourcerygxx-4_1-23:1.1
	binutils-csl-sourcerygxx-4_1-21:1.1
	binutils-csl-arm-2006q3-21:1.1
	binutils-csl-sourcerygxx-4_1-22:1.1
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.1
	binutils-csl-sourcerygxx-4_1-20:1.1
	binutils-csl-arm-2006q3-19:1.1
	binutils-csl-sourcerygxx-4_1-19:1.1
	binutils-csl-sourcerygxx-4_1-18:1.1
	binutils-csl-renesas-4_1-9:1.1
	binutils-csl-sourcerygxx-3_4_4-25:1.1
	binutils-csl-renesas-4_1-8:1.1
	binutils-csl-renesas-4_1-7:1.1
	binutils-csl-renesas-4_1-6:1.1
	binutils-csl-sourcerygxx-4_1-17:1.1
	binutils-csl-sourcerygxx-4_1-14:1.1
	binutils-csl-sourcerygxx-4_1-15:1.1
	binutils-csl-sourcerygxx-4_1-13:1.1
	binutils-2_17:1.1
	binutils-csl-sourcerygxx-4_1-12:1.1
	binutils-csl-sourcerygxx-3_4_4-21:1.1
	binutils-csl-wrs-linux-3_4_4-24:1.1
	binutils-csl-wrs-linux-3_4_4-23:1.1
	binutils-csl-sourcerygxx-4_1-9:1.1
	binutils-csl-sourcerygxx-4_1-8:1.1
	binutils-csl-sourcerygxx-4_1-7:1.1
	binutils-csl-arm-2006q1-6:1.1
	binutils-csl-sourcerygxx-4_1-6:1.1
	binutils-csl-wrs-linux-3_4_4-22:1.1
	binutils-csl-coldfire-4_1-11:1.1
	binutils-csl-sourcerygxx-3_4_4-19:1.1
	binutils-csl-coldfire-4_1-10:1.1
	binutils-csl-sourcerygxx-4_1-5:1.1
	binutils-csl-sourcerygxx-4_1-4:1.1
	binutils-csl-wrs-linux-3_4_4-21:1.1
	binutils-csl-morpho-4_1-4:1.1
	binutils-csl-sourcerygxx-3_4_4-17:1.1
	binutils-csl-wrs-linux-3_4_4-20:1.1
	binutils-2_17-branch:1.1.0.10
	binutils-2_17-branchpoint:1.1
	binutils-csl-2_17-branch:1.1.0.8
	binutils-csl-2_17-branchpoint:1.1
	binutils-csl-gxxpro-3_4-branch:1.1.0.6
	binutils-csl-gxxpro-3_4-branchpoint:1.1
	binutils-2_16_1:1.1
	binutils-csl-arm-2005q1b:1.1
	binutils-2_16:1.1
	binutils-csl-arm-2005q1a:1.1
	binutils-csl-arm-2005q1-branch:1.1.0.4
	binutils-csl-arm-2005q1-branchpoint:1.1
	binutils-2_16-branch:1.1.0.2
	binutils-2_16-branchpoint:1.1
	binutils_latest_snapshot:1.2;
locks; strict;
comment	@# @;


1.2
date	2012.05.14.02.40.00;	author hjl;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.15.19.57.53;	author macro;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Print addend as signed in objdump

binutils/

	* objdump.c (disassemble_bytes): Print addend as signed.
	(dump_reloc_set): Likewise.

gas/testsuite/

	* gas/all/fwdexp.d: Expect addend as signed.
	* gas/alpha/elf-reloc-1.d: Likewise.
	* gas/i386/mixed-mode-reloc64.d: Likewise.
	* gas/i386/reloc64.d: Likewise.
	* gas/i386/ilp32/mixed-mode-reloc64.d: Expect addend as signed.
	* gas/i386/ilp32/reloc64.d: Likewise.
	* gas/ia64/pcrel.d: Likewise.
	* gas/mips/branch-misc-2-64.d: Likewise.
	* gas/mips/branch-misc-2pic-64.d: Likewise.
	* gas/mips/branch-misc-4-64.d: Likewise.
	* gas/mips/ldstla-n64-sym32.d: Likewise.
	* gas/mips/micromips@@branch-misc-2-64.d: Likewise.
	* gas/mips/micromips@@branch-misc-2pic-64.d: Likewise.
	* gas/mips/micromips@@branch-misc-4-64.d: Likewise.
	* gas/mips/mips16-hilo-n32.d: Likewise.
	* gas/ppc/astest.d: Likewise.
	* gas/ppc/astest2.d: Likewise.
	* gas/ppc/astest2_64.d: Likewise.
	* gas/ppc/astest64.d: Likewise.
	* gas/ppc/test1elf32.d: Likewise.
	* gas/ppc/test1elf64.d: Likewise.
	* gas/sparc/reloc64.d: Likewise.
@
text
@#objdump: -dr
#name: MIPS16 lui/addi n32
#as: -mips16 -mabi=n32 -march=mips64
#source: mips16-hilo.s

.*: +file format .*mips.*

Disassembly of section \.text:

0+0000 <stuff>:
   0:	6c00      	li	a0,0
   2:	f400 3480 	sll	a0,16
   6:	4c00      	addiu	a0,0
   8:	f000 6c00 	li	a0,0
			8: R_MIPS16_HI16	\.data
   c:	f400 3480 	sll	a0,16
  10:	f000 4c00 	addiu	a0,0
			10: R_MIPS16_LO16	\.data
  14:	f000 6c00 	li	a0,0
			14: R_MIPS16_HI16	\.data\+0x4
  18:	f400 3480 	sll	a0,16
  1c:	f000 4c00 	addiu	a0,0
			1c: R_MIPS16_LO16	\.data\+0x4
  20:	f000 6c00 	li	a0,0
			20: R_MIPS16_HI16	big_external_data_label
  24:	f400 3480 	sll	a0,16
  28:	f000 4c00 	addiu	a0,0
			28: R_MIPS16_LO16	big_external_data_label
  2c:	f000 6c00 	li	a0,0
			2c: R_MIPS16_HI16	small_external_data_label
  30:	f400 3480 	sll	a0,16
  34:	f000 4c00 	addiu	a0,0
			34: R_MIPS16_LO16	small_external_data_label
  38:	f000 6c00 	li	a0,0
			38: R_MIPS16_HI16	big_external_common
  3c:	f400 3480 	sll	a0,16
  40:	f000 4c00 	addiu	a0,0
			40: R_MIPS16_LO16	big_external_common
  44:	f000 6c00 	li	a0,0
			44: R_MIPS16_HI16	small_external_common
  48:	f400 3480 	sll	a0,16
  4c:	f000 4c00 	addiu	a0,0
			4c: R_MIPS16_LO16	small_external_common
  50:	f000 6c00 	li	a0,0
			50: R_MIPS16_HI16	\.bss
  54:	f400 3480 	sll	a0,16
  58:	f000 4c00 	addiu	a0,0
			58: R_MIPS16_LO16	\.bss
  5c:	f000 6c00 	li	a0,0
			5c: R_MIPS16_HI16	\.sbss
  60:	f400 3480 	sll	a0,16
  64:	f000 4c00 	addiu	a0,0
			64: R_MIPS16_LO16	\.sbss
  68:	6c00      	li	a0,0
  6a:	f400 3480 	sll	a0,16
  6e:	4c01      	addiu	a0,1
  70:	f000 6c00 	li	a0,0
			70: R_MIPS16_HI16	\.data\+0x1
  74:	f400 3480 	sll	a0,16
  78:	f000 4c00 	addiu	a0,0
			78: R_MIPS16_LO16	\.data\+0x1
  7c:	f000 6c00 	li	a0,0
			7c: R_MIPS16_HI16	\.data\+0x5
  80:	f400 3480 	sll	a0,16
  84:	f000 4c00 	addiu	a0,0
			84: R_MIPS16_LO16	\.data\+0x5
  88:	f000 6c00 	li	a0,0
			88: R_MIPS16_HI16	big_external_data_label\+0x1
  8c:	f400 3480 	sll	a0,16
  90:	f000 4c00 	addiu	a0,0
			90: R_MIPS16_LO16	big_external_data_label\+0x1
  94:	f000 6c00 	li	a0,0
			94: R_MIPS16_HI16	small_external_data_label\+0x1
  98:	f400 3480 	sll	a0,16
  9c:	f000 4c00 	addiu	a0,0
			9c: R_MIPS16_LO16	small_external_data_label\+0x1
  a0:	f000 6c00 	li	a0,0
			a0: R_MIPS16_HI16	big_external_common\+0x1
  a4:	f400 3480 	sll	a0,16
  a8:	f000 4c00 	addiu	a0,0
			a8: R_MIPS16_LO16	big_external_common\+0x1
  ac:	f000 6c00 	li	a0,0
			ac: R_MIPS16_HI16	small_external_common\+0x1
  b0:	f400 3480 	sll	a0,16
  b4:	f000 4c00 	addiu	a0,0
			b4: R_MIPS16_LO16	small_external_common\+0x1
  b8:	f000 6c00 	li	a0,0
			b8: R_MIPS16_HI16	\.bss\+0x1
  bc:	f400 3480 	sll	a0,16
  c0:	f000 4c00 	addiu	a0,0
			c0: R_MIPS16_LO16	\.bss\+0x1
  c4:	f000 6c00 	li	a0,0
			c4: R_MIPS16_HI16	\.sbss\+0x1
  c8:	f400 3480 	sll	a0,16
  cc:	f000 4c00 	addiu	a0,0
			cc: R_MIPS16_LO16	\.sbss\+0x1
  d0:	6c01      	li	a0,1
  d2:	f400 3480 	sll	a0,16
  d6:	f010 4c00 	addiu	a0,-32768
  da:	f000 6c00 	li	a0,0
			da: R_MIPS16_HI16	\.data\+0x8000
  de:	f400 3480 	sll	a0,16
  e2:	f000 4c00 	addiu	a0,0
			e2: R_MIPS16_LO16	\.data\+0x8000
  e6:	f000 6c00 	li	a0,0
			e6: R_MIPS16_HI16	\.data\+0x8004
  ea:	f400 3480 	sll	a0,16
  ee:	f000 4c00 	addiu	a0,0
			ee: R_MIPS16_LO16	\.data\+0x8004
  f2:	f000 6c00 	li	a0,0
			f2: R_MIPS16_HI16	big_external_data_label\+0x8000
  f6:	f400 3480 	sll	a0,16
  fa:	f000 4c00 	addiu	a0,0
			fa: R_MIPS16_LO16	big_external_data_label\+0x8000
  fe:	f000 6c00 	li	a0,0
			fe: R_MIPS16_HI16	small_external_data_label\+0x8000
 102:	f400 3480 	sll	a0,16
 106:	f000 4c00 	addiu	a0,0
			106: R_MIPS16_LO16	small_external_data_label\+0x8000
 10a:	f000 6c00 	li	a0,0
			10a: R_MIPS16_HI16	big_external_common\+0x8000
 10e:	f400 3480 	sll	a0,16
 112:	f000 4c00 	addiu	a0,0
			112: R_MIPS16_LO16	big_external_common\+0x8000
 116:	f000 6c00 	li	a0,0
			116: R_MIPS16_HI16	small_external_common\+0x8000
 11a:	f400 3480 	sll	a0,16
 11e:	f000 4c00 	addiu	a0,0
			11e: R_MIPS16_LO16	small_external_common\+0x8000
 122:	f000 6c00 	li	a0,0
			122: R_MIPS16_HI16	\.bss\+0x8000
 126:	f400 3480 	sll	a0,16
 12a:	f000 4c00 	addiu	a0,0
			12a: R_MIPS16_LO16	\.bss\+0x8000
 12e:	f000 6c00 	li	a0,0
			12e: R_MIPS16_HI16	\.sbss\+0x8000
 132:	f400 3480 	sll	a0,16
 136:	f000 4c00 	addiu	a0,0
			136: R_MIPS16_LO16	\.sbss\+0x8000
 13a:	6c00      	li	a0,0
 13c:	f400 3480 	sll	a0,16
 140:	f010 4c00 	addiu	a0,-32768
 144:	f000 6c00 	li	a0,0
			144: R_MIPS16_HI16	\.data-0x8000
 148:	f400 3480 	sll	a0,16
 14c:	f000 4c00 	addiu	a0,0
			14c: R_MIPS16_LO16	\.data-0x8000
 150:	f000 6c00 	li	a0,0
			150: R_MIPS16_HI16	\.data-0x7ffc
 154:	f400 3480 	sll	a0,16
 158:	f000 4c00 	addiu	a0,0
			158: R_MIPS16_LO16	\.data-0x7ffc
 15c:	f000 6c00 	li	a0,0
			15c: R_MIPS16_HI16	big_external_data_label-0x8000
 160:	f400 3480 	sll	a0,16
 164:	f000 4c00 	addiu	a0,0
			164: R_MIPS16_LO16	big_external_data_label-0x8000
 168:	f000 6c00 	li	a0,0
			168: R_MIPS16_HI16	small_external_data_label-0x8000
 16c:	f400 3480 	sll	a0,16
 170:	f000 4c00 	addiu	a0,0
			170: R_MIPS16_LO16	small_external_data_label-0x8000
 174:	f000 6c00 	li	a0,0
			174: R_MIPS16_HI16	big_external_common-0x8000
 178:	f400 3480 	sll	a0,16
 17c:	f000 4c00 	addiu	a0,0
			17c: R_MIPS16_LO16	big_external_common-0x8000
 180:	f000 6c00 	li	a0,0
			180: R_MIPS16_HI16	small_external_common-0x8000
 184:	f400 3480 	sll	a0,16
 188:	f000 4c00 	addiu	a0,0
			188: R_MIPS16_LO16	small_external_common-0x8000
 18c:	f000 6c00 	li	a0,0
			18c: R_MIPS16_HI16	\.bss-0x8000
 190:	f400 3480 	sll	a0,16
 194:	f000 4c00 	addiu	a0,0
			194: R_MIPS16_LO16	\.bss-0x8000
 198:	f000 6c00 	li	a0,0
			198: R_MIPS16_HI16	\.sbss-0x8000
 19c:	f400 3480 	sll	a0,16
 1a0:	f000 4c00 	addiu	a0,0
			1a0: R_MIPS16_LO16	\.sbss-0x8000
 1a4:	6c01      	li	a0,1
 1a6:	f400 3480 	sll	a0,16
 1aa:	4c00      	addiu	a0,0
 1ac:	f000 6c00 	li	a0,0
			1ac: R_MIPS16_HI16	\.data\+0x10000
 1b0:	f400 3480 	sll	a0,16
 1b4:	f000 4c00 	addiu	a0,0
			1b4: R_MIPS16_LO16	\.data\+0x10000
 1b8:	f000 6c00 	li	a0,0
			1b8: R_MIPS16_HI16	\.data\+0x10004
 1bc:	f400 3480 	sll	a0,16
 1c0:	f000 4c00 	addiu	a0,0
			1c0: R_MIPS16_LO16	\.data\+0x10004
 1c4:	f000 6c00 	li	a0,0
			1c4: R_MIPS16_HI16	big_external_data_label\+0x10000
 1c8:	f400 3480 	sll	a0,16
 1cc:	f000 4c00 	addiu	a0,0
			1cc: R_MIPS16_LO16	big_external_data_label\+0x10000
 1d0:	f000 6c00 	li	a0,0
			1d0: R_MIPS16_HI16	small_external_data_label\+0x10000
 1d4:	f400 3480 	sll	a0,16
 1d8:	f000 4c00 	addiu	a0,0
			1d8: R_MIPS16_LO16	small_external_data_label\+0x10000
 1dc:	f000 6c00 	li	a0,0
			1dc: R_MIPS16_HI16	big_external_common\+0x10000
 1e0:	f400 3480 	sll	a0,16
 1e4:	f000 4c00 	addiu	a0,0
			1e4: R_MIPS16_LO16	big_external_common\+0x10000
 1e8:	f000 6c00 	li	a0,0
			1e8: R_MIPS16_HI16	small_external_common\+0x10000
 1ec:	f400 3480 	sll	a0,16
 1f0:	f000 4c00 	addiu	a0,0
			1f0: R_MIPS16_LO16	small_external_common\+0x10000
 1f4:	f000 6c00 	li	a0,0
			1f4: R_MIPS16_HI16	\.bss\+0x10000
 1f8:	f400 3480 	sll	a0,16
 1fc:	f000 4c00 	addiu	a0,0
			1fc: R_MIPS16_LO16	\.bss\+0x10000
 200:	f000 6c00 	li	a0,0
			200: R_MIPS16_HI16	\.sbss\+0x10000
 204:	f400 3480 	sll	a0,16
 208:	f000 4c00 	addiu	a0,0
			208: R_MIPS16_LO16	\.sbss\+0x10000
 20c:	6c02      	li	a0,2
 20e:	f400 3480 	sll	a0,16
 212:	f5b4 4c05 	addiu	a0,-23131
 216:	f000 6c00 	li	a0,0
			216: R_MIPS16_HI16	\.data\+0x1a5a5
 21a:	f400 3480 	sll	a0,16
 21e:	f000 4c00 	addiu	a0,0
			21e: R_MIPS16_LO16	\.data\+0x1a5a5
 222:	f000 6c00 	li	a0,0
			222: R_MIPS16_HI16	\.data\+0x1a5a9
 226:	f400 3480 	sll	a0,16
 22a:	f000 4c00 	addiu	a0,0
			22a: R_MIPS16_LO16	\.data\+0x1a5a9
 22e:	f000 6c00 	li	a0,0
			22e: R_MIPS16_HI16	big_external_data_label\+0x1a5a5
 232:	f400 3480 	sll	a0,16
 236:	f000 4c00 	addiu	a0,0
			236: R_MIPS16_LO16	big_external_data_label\+0x1a5a5
 23a:	f000 6c00 	li	a0,0
			23a: R_MIPS16_HI16	small_external_data_label\+0x1a5a5
 23e:	f400 3480 	sll	a0,16
 242:	f000 4c00 	addiu	a0,0
			242: R_MIPS16_LO16	small_external_data_label\+0x1a5a5
 246:	f000 6c00 	li	a0,0
			246: R_MIPS16_HI16	big_external_common\+0x1a5a5
 24a:	f400 3480 	sll	a0,16
 24e:	f000 4c00 	addiu	a0,0
			24e: R_MIPS16_LO16	big_external_common\+0x1a5a5
 252:	f000 6c00 	li	a0,0
			252: R_MIPS16_HI16	small_external_common\+0x1a5a5
 256:	f400 3480 	sll	a0,16
 25a:	f000 4c00 	addiu	a0,0
			25a: R_MIPS16_LO16	small_external_common\+0x1a5a5
 25e:	f000 6c00 	li	a0,0
			25e: R_MIPS16_HI16	\.bss\+0x1a5a5
 262:	f400 3480 	sll	a0,16
 266:	f000 4c00 	addiu	a0,0
			266: R_MIPS16_LO16	\.bss\+0x1a5a5
 26a:	f000 6c00 	li	a0,0
			26a: R_MIPS16_HI16	\.sbss\+0x1a5a5
 26e:	f400 3480 	sll	a0,16
 272:	f000 4c00 	addiu	a0,0
			272: R_MIPS16_LO16	\.sbss\+0x1a5a5
 276:	6d00      	li	a1,0
 278:	f400 35a0 	sll	a1,16
 27c:	9d80      	lw	a0,0\(a1\)
 27e:	f000 6d00 	li	a1,0
			27e: R_MIPS16_HI16	\.data
 282:	f400 35a0 	sll	a1,16
 286:	f000 9d80 	lw	a0,0\(a1\)
			286: R_MIPS16_HI16	\.data
 28a:	f000 6d00 	li	a1,0
			28a: R_MIPS16_HI16	\.data\+0x4
 28e:	f400 35a0 	sll	a1,16
 292:	f000 9d80 	lw	a0,0\(a1\)
			292: R_MIPS16_HI16	\.data\+0x4
 296:	f000 6d00 	li	a1,0
			296: R_MIPS16_HI16	big_external_data_label
 29a:	f400 35a0 	sll	a1,16
 29e:	f000 9d80 	lw	a0,0\(a1\)
			29e: R_MIPS16_LO16	big_external_data_label
 2a2:	f000 6d00 	li	a1,0
			2a2: R_MIPS16_HI16	small_external_data_label
 2a6:	f400 35a0 	sll	a1,16
 2aa:	f000 9d80 	lw	a0,0\(a1\)
			2aa: R_MIPS16_LO16	small_external_data_label
 2ae:	f000 6d00 	li	a1,0
			2ae: R_MIPS16_HI16	big_external_common
 2b2:	f400 35a0 	sll	a1,16
 2b6:	f000 9d80 	lw	a0,0\(a1\)
			2b6: R_MIPS16_LO16	big_external_common
 2ba:	f000 6d00 	li	a1,0
			2ba: R_MIPS16_HI16	small_external_common
 2be:	f400 35a0 	sll	a1,16
 2c2:	f000 9d80 	lw	a0,0\(a1\)
			2c2: R_MIPS16_LO16	small_external_common
 2c6:	f000 6d00 	li	a1,0
			2c6: R_MIPS16_HI16	\.bss
 2ca:	f400 35a0 	sll	a1,16
 2ce:	f000 9d80 	lw	a0,0\(a1\)
			2ce: R_MIPS16_LO16	\.bss
 2d2:	f000 6d00 	li	a1,0
			2d2: R_MIPS16_HI16	\.sbss
 2d6:	f400 35a0 	sll	a1,16
 2da:	f000 9d80 	lw	a0,0\(a1\)
			2da: R_MIPS16_LO16	\.sbss
 2de:	6d00      	li	a1,0
 2e0:	f400 35a0 	sll	a1,16
 2e4:	f000 9d81 	lw	a0,1\(a1\)
 2e8:	f000 6d00 	li	a1,0
			2e8: R_MIPS16_HI16	\.data\+0x1
 2ec:	f400 35a0 	sll	a1,16
 2f0:	f000 9d80 	lw	a0,0\(a1\)
			2f0: R_MIPS16_LO16	\.data\+0x1
 2f4:	f000 6d00 	li	a1,0
			2f4: R_MIPS16_HI16	\.data\+0x5
 2f8:	f400 35a0 	sll	a1,16
 2fc:	f000 9d80 	lw	a0,0\(a1\)
			2fc: R_MIPS16_LO16	\.data\+0x5
 300:	f000 6d00 	li	a1,0
			300: R_MIPS16_HI16	big_external_data_label\+0x1
 304:	f400 35a0 	sll	a1,16
 308:	f000 9d80 	lw	a0,0\(a1\)
			308: R_MIPS16_LO16	big_external_data_label\+0x1
 30c:	f000 6d00 	li	a1,0
			30c: R_MIPS16_HI16	small_external_data_label\+0x1
 310:	f400 35a0 	sll	a1,16
 314:	f000 9d80 	lw	a0,0\(a1\)
			314: R_MIPS16_LO16	small_external_data_label\+0x1
 318:	f000 6d00 	li	a1,0
			318: R_MIPS16_HI16	big_external_common\+0x1
 31c:	f400 35a0 	sll	a1,16
 320:	f000 9d80 	lw	a0,0\(a1\)
			320: R_MIPS16_LO16	big_external_common\+0x1
 324:	f000 6d00 	li	a1,0
			324: R_MIPS16_HI16	small_external_common\+0x1
 328:	f400 35a0 	sll	a1,16
 32c:	f000 9d80 	lw	a0,0\(a1\)
			32c: R_MIPS16_LO16	small_external_common\+0x1
 330:	f000 6d00 	li	a1,0
			330: R_MIPS16_HI16	\.bss\+0x1
 334:	f400 35a0 	sll	a1,16
 338:	f000 9d80 	lw	a0,0\(a1\)
			338: R_MIPS16_LO16	\.bss\+0x1
 33c:	f000 6d00 	li	a1,0
			33c: R_MIPS16_HI16	\.sbss\+0x1
 340:	f400 35a0 	sll	a1,16
 344:	f000 9d80 	lw	a0,0\(a1\)
			344: R_MIPS16_LO16	\.sbss\+0x1
 348:	6d01      	li	a1,1
 34a:	f400 35a0 	sll	a1,16
 34e:	f010 9d80 	lw	a0,-32768\(a1\)
 352:	f000 6d00 	li	a1,0
			352: R_MIPS16_HI16	\.data\+0x8000
 356:	f400 35a0 	sll	a1,16
 35a:	f000 9d80 	lw	a0,0\(a1\)
			35a: R_MIPS16_LO16	\.data\+0x8000
 35e:	f000 6d00 	li	a1,0
			35e: R_MIPS16_HI16	\.data\+0x8004
 362:	f400 35a0 	sll	a1,16
 366:	f000 9d80 	lw	a0,0\(a1\)
			366: R_MIPS16_LO16	\.data\+0x8004
 36a:	f000 6d00 	li	a1,0
			36a: R_MIPS16_HI16	big_external_data_label\+0x8000
 36e:	f400 35a0 	sll	a1,16
 372:	f000 9d80 	lw	a0,0\(a1\)
			372: R_MIPS16_LO16	big_external_data_label\+0x8000
 376:	f000 6d00 	li	a1,0
			376: R_MIPS16_HI16	small_external_data_label\+0x8000
 37a:	f400 35a0 	sll	a1,16
 37e:	f000 9d80 	lw	a0,0\(a1\)
			37e: R_MIPS16_LO16	small_external_data_label\+0x8000
 382:	f000 6d00 	li	a1,0
			382: R_MIPS16_HI16	big_external_common\+0x8000
 386:	f400 35a0 	sll	a1,16
 38a:	f000 9d80 	lw	a0,0\(a1\)
			38a: R_MIPS16_LO16	big_external_common\+0x8000
 38e:	f000 6d00 	li	a1,0
			38e: R_MIPS16_HI16	small_external_common\+0x8000
 392:	f400 35a0 	sll	a1,16
 396:	f000 9d80 	lw	a0,0\(a1\)
			396: R_MIPS16_LO16	small_external_common\+0x8000
 39a:	f000 6d00 	li	a1,0
			39a: R_MIPS16_HI16	\.bss\+0x8000
 39e:	f400 35a0 	sll	a1,16
 3a2:	f000 9d80 	lw	a0,0\(a1\)
			3a2: R_MIPS16_LO16	\.bss\+0x8000
 3a6:	f000 6d00 	li	a1,0
			3a6: R_MIPS16_HI16	\.sbss\+0x8000
 3aa:	f400 35a0 	sll	a1,16
 3ae:	f000 9d80 	lw	a0,0\(a1\)
			3ae: R_MIPS16_LO16	\.sbss\+0x8000
 3b2:	6d00      	li	a1,0
 3b4:	f400 35a0 	sll	a1,16
 3b8:	f010 9d80 	lw	a0,-32768\(a1\)
 3bc:	f000 6d00 	li	a1,0
			3bc: R_MIPS16_HI16	\.data-0x8000
 3c0:	f400 35a0 	sll	a1,16
 3c4:	f000 9d80 	lw	a0,0\(a1\)
			3c4: R_MIPS16_LO16	\.data-0x8000
 3c8:	f000 6d00 	li	a1,0
			3c8: R_MIPS16_HI16	\.data-0x7ffc
 3cc:	f400 35a0 	sll	a1,16
 3d0:	f000 9d80 	lw	a0,0\(a1\)
			3d0: R_MIPS16_LO16	\.data-0x7ffc
 3d4:	f000 6d00 	li	a1,0
			3d4: R_MIPS16_HI16	big_external_data_label-0x8000
 3d8:	f400 35a0 	sll	a1,16
 3dc:	f000 9d80 	lw	a0,0\(a1\)
			3dc: R_MIPS16_LO16	big_external_data_label-0x8000
 3e0:	f000 6d00 	li	a1,0
			3e0: R_MIPS16_HI16	small_external_data_label-0x8000
 3e4:	f400 35a0 	sll	a1,16
 3e8:	f000 9d80 	lw	a0,0\(a1\)
			3e8: R_MIPS16_LO16	small_external_data_label-0x8000
 3ec:	f000 6d00 	li	a1,0
			3ec: R_MIPS16_HI16	big_external_common-0x8000
 3f0:	f400 35a0 	sll	a1,16
 3f4:	f000 9d80 	lw	a0,0\(a1\)
			3f4: R_MIPS16_LO16	big_external_common-0x8000
 3f8:	f000 6d00 	li	a1,0
			3f8: R_MIPS16_HI16	small_external_common-0x8000
 3fc:	f400 35a0 	sll	a1,16
 400:	f000 9d80 	lw	a0,0\(a1\)
			400: R_MIPS16_LO16	small_external_common-0x8000
 404:	f000 6d00 	li	a1,0
			404: R_MIPS16_HI16	\.bss-0x8000
 408:	f400 35a0 	sll	a1,16
 40c:	f000 9d80 	lw	a0,0\(a1\)
			40c: R_MIPS16_LO16	\.bss-0x8000
 410:	f000 6d00 	li	a1,0
			410: R_MIPS16_HI16	\.sbss-0x8000
 414:	f400 35a0 	sll	a1,16
 418:	f000 9d80 	lw	a0,0\(a1\)
			418: R_MIPS16_LO16	\.sbss-0x8000
 41c:	6d01      	li	a1,1
 41e:	f400 35a0 	sll	a1,16
 422:	9d80      	lw	a0,0\(a1\)
 424:	f000 6d00 	li	a1,0
			424: R_MIPS16_HI16	\.data\+0x10000
 428:	f400 35a0 	sll	a1,16
 42c:	f000 9d80 	lw	a0,0\(a1\)
			42c: R_MIPS16_LO16	\.data\+0x10000
 430:	f000 6d00 	li	a1,0
			430: R_MIPS16_HI16	\.data\+0x10004
 434:	f400 35a0 	sll	a1,16
 438:	f000 9d80 	lw	a0,0\(a1\)
			438: R_MIPS16_LO16	\.data\+0x10004
 43c:	f000 6d00 	li	a1,0
			43c: R_MIPS16_HI16	big_external_data_label\+0x10000
 440:	f400 35a0 	sll	a1,16
 444:	f000 9d80 	lw	a0,0\(a1\)
			444: R_MIPS16_LO16	big_external_data_label\+0x10000
 448:	f000 6d00 	li	a1,0
			448: R_MIPS16_HI16	small_external_data_label\+0x10000
 44c:	f400 35a0 	sll	a1,16
 450:	f000 9d80 	lw	a0,0\(a1\)
			450: R_MIPS16_LO16	small_external_data_label\+0x10000
 454:	f000 6d00 	li	a1,0
			454: R_MIPS16_HI16	big_external_common\+0x10000
 458:	f400 35a0 	sll	a1,16
 45c:	f000 9d80 	lw	a0,0\(a1\)
			45c: R_MIPS16_LO16	big_external_common\+0x10000
 460:	f000 6d00 	li	a1,0
			460: R_MIPS16_HI16	small_external_common\+0x10000
 464:	f400 35a0 	sll	a1,16
 468:	f000 9d80 	lw	a0,0\(a1\)
			468: R_MIPS16_LO16	small_external_common\+0x10000
 46c:	f000 6d00 	li	a1,0
			46c: R_MIPS16_HI16	\.bss\+0x10000
 470:	f400 35a0 	sll	a1,16
 474:	f000 9d80 	lw	a0,0\(a1\)
			474: R_MIPS16_LO16	\.bss\+0x10000
 478:	f000 6d00 	li	a1,0
			478: R_MIPS16_HI16	\.sbss\+0x10000
 47c:	f400 35a0 	sll	a1,16
 480:	f000 9d80 	lw	a0,0\(a1\)
			480: R_MIPS16_LO16	\.sbss\+0x10000
 484:	6d02      	li	a1,2
 486:	f400 35a0 	sll	a1,16
 48a:	f5b4 9d85 	lw	a0,-23131\(a1\)
 48e:	f000 6d00 	li	a1,0
			48e: R_MIPS16_HI16	\.data\+0x1a5a5
 492:	f400 35a0 	sll	a1,16
 496:	f000 9d80 	lw	a0,0\(a1\)
			496: R_MIPS16_LO16	\.data\+0x1a5a5
 49a:	f000 6d00 	li	a1,0
			49a: R_MIPS16_HI16	\.data\+0x1a5a9
 49e:	f400 35a0 	sll	a1,16
 4a2:	f000 9d80 	lw	a0,0\(a1\)
			4a2: R_MIPS16_LO16	\.data\+0x1a5a9
 4a6:	f000 6d00 	li	a1,0
			4a6: R_MIPS16_HI16	big_external_data_label\+0x1a5a5
 4aa:	f400 35a0 	sll	a1,16
 4ae:	f000 9d80 	lw	a0,0\(a1\)
			4ae: R_MIPS16_LO16	big_external_data_label\+0x1a5a5
 4b2:	f000 6d00 	li	a1,0
			4b2: R_MIPS16_HI16	small_external_data_label\+0x1a5a5
 4b6:	f400 35a0 	sll	a1,16
 4ba:	f000 9d80 	lw	a0,0\(a1\)
			4ba: R_MIPS16_LO16	small_external_data_label\+0x1a5a5
 4be:	f000 6d00 	li	a1,0
			4be: R_MIPS16_HI16	big_external_common\+0x1a5a5
 4c2:	f400 35a0 	sll	a1,16
 4c6:	f000 9d80 	lw	a0,0\(a1\)
			4c6: R_MIPS16_LO16	big_external_common\+0x1a5a5
 4ca:	f000 6d00 	li	a1,0
			4ca: R_MIPS16_HI16	small_external_common\+0x1a5a5
 4ce:	f400 35a0 	sll	a1,16
 4d2:	f000 9d80 	lw	a0,0\(a1\)
			4d2: R_MIPS16_LO16	small_external_common\+0x1a5a5
 4d6:	f000 6d00 	li	a1,0
			4d6: R_MIPS16_HI16	\.bss\+0x1a5a5
 4da:	f400 35a0 	sll	a1,16
 4de:	f000 9d80 	lw	a0,0\(a1\)
			4de: R_MIPS16_LO16	\.bss\+0x1a5a5
 4e2:	f000 6d00 	li	a1,0
			4e2: R_MIPS16_HI16	\.sbss\+0x1a5a5
 4e6:	f400 35a0 	sll	a1,16
 4ea:	f000 9d80 	lw	a0,0\(a1\)
			4ea: R_MIPS16_LO16	\.sbss\+0x1a5a5
 4ee:	6500      	nop
@


1.1
log
@bfd/:
2005-02-15  Nigel Stephens  <nigel@@mips.com>
            Maciej W. Rozycki  <macro@@mips.com>

	* elf32-mips.c (elf_mips16_howto_table_rel): New array for MIPS16
	reloc howtos.  Add R_MIPS16_HI16 and R_MIPS16_LO16 relocs and
	R_MIPS16_GOT16 and R_MIPS16_CALL16 placeholders.
	(elf_mips16_jump_howto): Move into elf_mips16_howto_table_rel.
	(elf_mips16_gprel_howto): Likewise.  Redefine src_mask and
	dst_mask.
	(mips16_gprel_reloc): Remove bit shuffling; call
	_bfd_mips16_elf_reloc_unshuffle(), _bfd_mips_elf_gprel16_with_gp()
	and _bfd_mips16_elf_reloc_shuffle() instead.
	(mips16_reloc_map): New reloc map for MIPS16 relocs.
	(bfd_elf32_bfd_reloc_type_lookup): Use mips16_reloc_map for MIPS16
	relocs.
	(mips_elf32_rtype_to_howto): Fetch MIPS16 howtos from
	elf_mips16_howto_table_rel.
	* elf64-mips.c (mips16_elf64_howto_table_rel): New array for
	MIPS16 REL reloc howtos.  Add R_MIPS16_HI16 and R_MIPS16_LO16
	relocs and R_MIPS16_GOT16 and R_MIPS16_CALL16 placeholders.
	(elf_mips16_jump_howto): Move into mips16_elf64_howto_table_rel.
	(elf_mips16_gprel_howto): Likewise.  Redefine src_mask and
	dst_mask.
	(mips16_elf64_howto_table_rela): New array for MIPS16 RELA
	reloc howtos.  Add R_MIPS16_26, R_MIPS16_GPREL, R_MIPS16_HI16 and
	R_MIPS16_LO16 relocs and R_MIPS16_GOT16 and R_MIPS16_CALL16
	placeholders.
	(mips16_gprel_reloc): Remove bit shuffling; call
	_bfd_mips16_elf_reloc_unshuffle(), _bfd_mips_elf_gprel16_with_gp()
	and _bfd_mips16_elf_reloc_shuffle() instead.
	(mips16_reloc_map): New reloc map for MIPS16 relocs.
	(bfd_elf64_bfd_reloc_type_lookup): Use mips16_reloc_map for MIPS16
	relocs.
	(mips_elf64_rtype_to_howto): Fetch MIPS16 howtos from
	mips16_elf64_howto_table_rela or mips16_elf64_howto_table_rel.
	* elfn32-mips.c (elf_mips16_howto_table_rel): New array for MIPS16
	REL reloc howtos.  Add R_MIPS16_HI16 and R_MIPS16_LO16 relocs and
	R_MIPS16_GOT16 and R_MIPS16_CALL16 placeholders.
	(elf_mips16_jump_howto): Move into elf_mips16_howto_table_rel.
	(elf_mips16_gprel_howto): Likewise.  Redefine src_mask and
	dst_mask.
	(mips16_gprel_reloc): Remove bit shuffling; call
	_bfd_mips16_elf_reloc_unshuffle(), _bfd_mips_elf_gprel16_with_gp()
	and _bfd_mips16_elf_reloc_shuffle() instead.
	(mips16_reloc_map): New reloc map for MIPS16 relocs.
	(bfd_elf32_bfd_reloc_type_lookup): Use mips16_reloc_map for MIPS16
	relocs.
	(mips_elf_n32_rtype_to_howto): Fetch MIPS16 howtos from
	elf_mips16_howto_table_rela or elf_mips16_howto_table_rel.
	* elfxx-mips.c (_bfd_mips16_elf_reloc_unshuffle): New function to
	handle bit shuffling for MIPS16 relocs.
	(_bfd_mips16_elf_reloc_shuffle): Likewise.
	(_bfd_mips_elf_lo16_reloc): Use _bfd_mips16_elf_reloc_unshuffle()
	and _bfd_mips16_elf_reloc_shuffle().
	(_bfd_mips_elf_generic_reloc): Likewise.
	(mips_elf_calculate_relocation): Likewise.  Handle R_MIPS16_HI16
	and R_MIPS16_LO16.
	(mips_elf_obtain_contents): Remove bit shuffling.
	(mips_elf_perform_relocation): Likewise; call
	_bfd_mips16_elf_reloc_unshuffle() and _bfd_mips16_elf_reloc_shuffle()
	instead.
	(_bfd_mips_elf_relocate_section): Likewise.  Handle R_MIPS16_HI16
	and R_MIPS16_LO16.
	* elfxx-mips.h (_bfd_mips16_elf_reloc_unshuffle): Declare.
	(_bfd_mips16_elf_reloc_shuffle): Likewise.
	* reloc.c (BFD_RELOC_MIPS16_HI16): New reloc.
	(BFD_RELOC_MIPS16_HI16_S): Likewise.
	(BFD_RELOC_MIPS16_LO16): Likewise.
	* bfd-in2.h: Regenerate.
	* libbfd.h: Regenerate.

gas/:
2005-02-15  Nigel Stephens  <nigel@@mips.com>
            Maciej W. Rozycki  <macro@@mips.com>

	* config/tc-mips.c (reloc_needs_lo_p): Handle
	BFD_RELOC_MIPS16_HI16_S.
	(fixup_has_matching_lo_p): Handle BFD_RELOC_MIPS16_LO16.
	(append_insn): Add BFD_RELOC_MIPS16_GPREL, BFD_RELOC_MIPS16_HI16_S
	and BFD_RELOC_MIPS16_LO16 to relocs to suppress overflow
	complaints on.
	(mips16_ip): Resolve BFD_RELOC_MIPS16_HI16_S,
	BFD_RELOC_MIPS16_HI16 and BFD_RELOC_MIPS16_LO16 for constants.
	Call my_getSmallExpression() to parse percent operators.
	(percent_op_match, mips_percent_op): Separate definitions.
	(mips16_percent_op): Define percent operators for the MIPS16 mode.
	(parse_relocation): Handle the MIPS16 mode using
	mips16_percent_op.
	(md_apply_fix3): Handle BFD_RELOC_MIPS16_HI16,
	BFD_RELOC_MIPS16_HI16_S and BFD_RELOC_MIPS16_LO16.

gas/testsuite/:
2005-02-15  Nigel Stephens  <nigel@@mips.com>
            Maciej W. Rozycki  <macro@@mips.com>

	* gas/mips/mips16-hilo.d: New test for the R_MIPS16_HI16 and
	R_MIPS16_LO16 relocs.
	* gas/mips/mips16-hilo-n32.d: Likewise, for the n32 ABI.
	* gas/mips/mips16-hilo.s: Source for the new tests.
	* gas/mips/mips.exp: Run the new tests.

include/:
2005-02-15  Nigel Stephens  <nigel@@mips.com>
            Maciej W. Rozycki  <macro@@mips.com>

	* elf/mips.h (R_MIPS16_GOT16): New reloc code.
	(R_MIPS16_CALL16): Likewise.
	(R_MIPS16_HI16): Likewise.
	(R_MIPS16_LO16): Likewise.
	(R_MIPS16_min): New fake reloc code.
	(R_MIPS16_max): Likewise.

ld/testsuite/:
2005-02-15  Nigel Stephens  <nigel@@mips.com>
            Maciej W. Rozycki  <macro@@mips.com>

	* ld-mips-elf/mips16-hilo.d: New test for the R_MIPS16_HI16 and
	R_MIPS16_LO16 relocs.
	* ld-mips-elf/mips16-hilo-n32.d: Likewise, for the n32 ABI.
	* ld-mips-elf/mips16-hilo.s: Auxiliary source for the new tests.
	* ld-mips-elf/mips-elf.exp: Run the new tests.
@
text
@d144 1
a144 1
			144: R_MIPS16_HI16	\.data\+0xffff8000
d147 1
a147 1
			14c: R_MIPS16_LO16	\.data\+0xffff8000
d149 1
a149 1
			150: R_MIPS16_HI16	\.data\+0xffff8004
d152 1
a152 1
			158: R_MIPS16_LO16	\.data\+0xffff8004
d154 1
a154 1
			15c: R_MIPS16_HI16	big_external_data_label\+0xffff8000
d157 1
a157 1
			164: R_MIPS16_LO16	big_external_data_label\+0xffff8000
d159 1
a159 1
			168: R_MIPS16_HI16	small_external_data_label\+0xffff8000
d162 1
a162 1
			170: R_MIPS16_LO16	small_external_data_label\+0xffff8000
d164 1
a164 1
			174: R_MIPS16_HI16	big_external_common\+0xffff8000
d167 1
a167 1
			17c: R_MIPS16_LO16	big_external_common\+0xffff8000
d169 1
a169 1
			180: R_MIPS16_HI16	small_external_common\+0xffff8000
d172 1
a172 1
			188: R_MIPS16_LO16	small_external_common\+0xffff8000
d174 1
a174 1
			18c: R_MIPS16_HI16	\.bss\+0xffff8000
d177 1
a177 1
			194: R_MIPS16_LO16	\.bss\+0xffff8000
d179 1
a179 1
			198: R_MIPS16_HI16	\.sbss\+0xffff8000
d182 1
a182 1
			1a0: R_MIPS16_LO16	\.sbss\+0xffff8000
d402 1
a402 1
			3bc: R_MIPS16_HI16	\.data\+0xffff8000
d405 1
a405 1
			3c4: R_MIPS16_LO16	\.data\+0xffff8000
d407 1
a407 1
			3c8: R_MIPS16_HI16	\.data\+0xffff8004
d410 1
a410 1
			3d0: R_MIPS16_LO16	\.data\+0xffff8004
d412 1
a412 1
			3d4: R_MIPS16_HI16	big_external_data_label\+0xffff8000
d415 1
a415 1
			3dc: R_MIPS16_LO16	big_external_data_label\+0xffff8000
d417 1
a417 1
			3e0: R_MIPS16_HI16	small_external_data_label\+0xffff8000
d420 1
a420 1
			3e8: R_MIPS16_LO16	small_external_data_label\+0xffff8000
d422 1
a422 1
			3ec: R_MIPS16_HI16	big_external_common\+0xffff8000
d425 1
a425 1
			3f4: R_MIPS16_LO16	big_external_common\+0xffff8000
d427 1
a427 1
			3f8: R_MIPS16_HI16	small_external_common\+0xffff8000
d430 1
a430 1
			400: R_MIPS16_LO16	small_external_common\+0xffff8000
d432 1
a432 1
			404: R_MIPS16_HI16	\.bss\+0xffff8000
d435 1
a435 1
			40c: R_MIPS16_LO16	\.bss\+0xffff8000
d437 1
a437 1
			410: R_MIPS16_HI16	\.sbss\+0xffff8000
d440 1
a440 1
			418: R_MIPS16_LO16	\.sbss\+0xffff8000
@

