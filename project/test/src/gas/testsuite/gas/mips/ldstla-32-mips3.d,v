head	1.4;
access;
symbols
	binutils-2_24-branch:1.4.0.8
	binutils-2_24-branchpoint:1.4
	binutils-2_21_1:1.1
	binutils-2_23_2:1.4
	binutils-2_23_1:1.4
	binutils-2_23:1.4
	binutils-2_23-branch:1.4.0.6
	binutils-2_23-branchpoint:1.4
	binutils-2_22_branch:1.4.0.4
	binutils-2_22:1.4
	binutils-2_22-branch:1.4.0.2
	binutils-2_22-branchpoint:1.4
	binutils-2_21:1.1
	binutils-2_21-branch:1.1.0.20
	binutils-2_21-branchpoint:1.1
	binutils-2_20_1:1.1
	binutils-2_20:1.1
	binutils-arc-20081103-branch:1.1.0.18
	binutils-arc-20081103-branchpoint:1.1
	binutils-2_20-branch:1.1.0.16
	binutils-2_20-branchpoint:1.1
	dje-cgen-play1-branch:1.1.0.14
	dje-cgen-play1-branchpoint:1.1
	arc-20081103-branch:1.1.0.12
	arc-20081103-branchpoint:1.1
	binutils-2_19_1:1.1
	binutils-2_19:1.1
	binutils-2_19-branch:1.1.0.10
	binutils-2_19-branchpoint:1.1
	binutils-2_18:1.1
	binutils-2_18-branch:1.1.0.8
	binutils-2_18-branchpoint:1.1
	binutils-csl-coldfire-4_1-32:1.1
	binutils-csl-sourcerygxx-4_1-32:1.1
	binutils-csl-innovasic-fido-3_4_4-33:1.1
	binutils-csl-sourcerygxx-3_4_4-32:1.1.2.1
	binutils-csl-coldfire-4_1-30:1.1
	binutils-csl-sourcerygxx-4_1-30:1.1
	binutils-csl-coldfire-4_1-28:1.1
	binutils-csl-sourcerygxx-4_1-29:1.1
	binutils-csl-sourcerygxx-4_1-28:1.1
	binutils-csl-arm-2006q3-27:1.1
	binutils-csl-sourcerygxx-4_1-27:1.1
	binutils-csl-arm-2006q3-26:1.1
	binutils-csl-sourcerygxx-4_1-26:1.1
	binutils-csl-sourcerygxx-4_1-25:1.1
	binutils-csl-sourcerygxx-4_1-24:1.1
	binutils-csl-sourcerygxx-4_1-23:1.1
	binutils-csl-sourcerygxx-4_1-21:1.1
	binutils-csl-arm-2006q3-21:1.1
	binutils-csl-sourcerygxx-4_1-22:1.1
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.1
	binutils-csl-sourcerygxx-4_1-20:1.1
	binutils-csl-arm-2006q3-19:1.1
	binutils-csl-sourcerygxx-4_1-19:1.1
	binutils-csl-sourcerygxx-4_1-18:1.1
	binutils-csl-renesas-4_1-9:1.1
	binutils-csl-sourcerygxx-3_4_4-25:1.1.2.1
	binutils-csl-renesas-4_1-8:1.1
	binutils-csl-renesas-4_1-7:1.1
	binutils-csl-renesas-4_1-6:1.1
	binutils-csl-sourcerygxx-4_1-17:1.1
	binutils-csl-sourcerygxx-4_1-14:1.1
	binutils-csl-sourcerygxx-4_1-15:1.1
	binutils-csl-sourcerygxx-4_1-13:1.1
	binutils-2_17:1.1
	binutils-csl-sourcerygxx-4_1-12:1.1
	binutils-csl-sourcerygxx-3_4_4-21:1.1
	binutils-csl-sourcerygxx-4_1-9:1.1
	binutils-csl-sourcerygxx-4_1-8:1.1
	binutils-csl-sourcerygxx-4_1-7:1.1
	binutils-csl-arm-2006q1-6:1.1
	binutils-csl-sourcerygxx-4_1-6:1.1
	binutils-csl-coldfire-4_1-11:1.1
	binutils-csl-sourcerygxx-3_4_4-19:1.1
	binutils-csl-coldfire-4_1-10:1.1
	binutils-csl-sourcerygxx-4_1-5:1.1
	binutils-csl-sourcerygxx-4_1-4:1.1
	binutils-csl-morpho-4_1-4:1.1
	binutils-csl-sourcerygxx-3_4_4-17:1.1
	binutils-2_17-branch:1.1.0.6
	binutils-2_17-branchpoint:1.1
	binutils-csl-2_17-branch:1.1.0.4
	binutils-csl-2_17-branchpoint:1.1
	binutils-csl-gxxpro-3_4-branch:1.1.2.1.0.2
	binutils-csl-gxxpro-3_4-branchpoint:1.1.2.1
	binutils-2_16_1:1.1.2.1
	binutils-2_16:1.1.2.1
	binutils_latest_snapshot:1.4
	binutils-2_16-branch:1.1.0.2;
locks; strict;
comment	@# @;


1.4
date	2010.12.31.11.00.59;	author rsandifo;	state Exp;
branches;
next	1.3;

1.3
date	2010.12.09.23.33.24;	author macro;	state Exp;
branches;
next	1.2;

1.2
date	2010.12.09.19.00.00;	author macro;	state Exp;
branches;
next	1.1;

1.1
date	2005.04.13.18.17.10;	author macro;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2005.04.13.18.17.48;	author macro;	state Exp;
branches;
next	;


desc
@@


1.4
log
@bfd/
2010-12-23  Robert Millan  <rmh@@gnu.org>

	* config.bfd: Recognize mips-freebsd and mips-kfreebsd-gnu.
	* configure.host: Likewise.
	* configure.in: Support for `bfd_elf32_ntradbigmips_freebsd_vec',
	`bfd_elf32_ntradlittlemips_freebsd_vec',
	`bfd_elf32_tradbigmips_freebsd_vec',
	`bfd_elf32_tradlittlemips_freebsd_vec',
	`bfd_elf64_tradbigmips_freebsd_vec' and
	`bfd_elf64_tradlittlemips_freebsd_vec'.
	* configure: Regenerate.
	* elf32-mips.c: New target for FreeBSD support
	(same as traditional MIPS but overrides ELF_OSABI
	with ELFOSABI_FREEBSD).
	* elf64-mips.c: Likewise.
	* elfn32-mips.c: Likewise.
	* targets.c (_bfd_target_vector): Add
	`bfd_elf32_ntradbigmips_freebsd_vec',
	`bfd_elf32_ntradlittlemips_freebsd_vec',
	`bfd_elf32_tradbigmips_freebsd_vec',
	`bfd_elf32_tradlittlemips_freebsd_vec',
	`bfd_elf64_tradbigmips_freebsd_vec' and
	`bfd_elf64_tradlittlemips_freebsd_vec'.

ld/
2010-12-14  Robert Millan  <rmh@@gnu.org>

	* configure.tgt: Recognize mips-freebsd and mips-kfreebsd-gnu.

	* emulparams/elf32btsmip_fbsd.sh: New file.
	* emulparams/elf32btsmipn32_fbsd.sh: Likewise.
	* emulparams/elf32ltsmip_fbsd.sh: Likewise.
	* emulparams/elf32ltsmipn32_fbsd.sh: Likewise.
	* emulparams/elf64btsmip_fbsd.sh: Likewise.
	* emulparams/elf64ltsmip_fbsd.sh: Likewise.

	* Makefile.am: Add build rules for `eelf32btsmip_fbsd.c',
	`eelf32btsmipn32_fbsd.c', `eelf32ltsmip_fbsd.c',
	`eelf32ltsmipn32_fbsd.c', `eelf64btsmip_fbsd.c' and
	`eelf64ltsmip_fbsd.c'.
	* Makefile.in: Regenerate.

gas/
2010-12-19  Robert Millan  <rmh@@gnu.org>
	    Richard Sandiford  <rdsandiford@@googlemail.com>

	* config/tc-mips.c (ELF_TARGET): New macro.  Generates target
	names accordingly to whether TE_FreeBSD and whether TE_TMIPS
	are defined.
	(mips_target_format): Refactor code using ELF_TARGET().
	(support_64bit_objects): Likewise.

	* configure.in: Recognize mips-freebsd and mips-kfreebsd-gnu.
	* configure.tgt: Likewise.
	* configure: Regenerate.

binutils/testsuite/
	* binutils-all/readelf.exp: Handle MIPS FreeBSD targets.

gas/testsuite/
	* gas/mips/e32el-rel2.d: Accept any file format.
	* gas/mips/elf-rel.d: Likewise.
	* gas/mips/elf-rel2.d: Likewise.
	* gas/mips/elf-rel3.d: Likewise.
	* gas/mips/elfel-rel.d: Likewise.
	* gas/mips/elfel-rel2.d: Likewise.
	* gas/mips/elfel-rel3.d: Likewise.
	* gas/mips/ldstla-32-mips3-shared.d: Likewise.
	* gas/mips/ldstla-32-mips3.d: Likewise.
	* gas/mips/ldstla-32-shared.d: Likewise.
	* gas/mips/ldstla-32.d: Likewise.
	* gas/mips/ldstla-n64-shared.d: Likewise.
	* gas/mips/ldstla-n64.d: Likewise.
	* gas/mips/noat-1.d: Likewise.
	* gas/mips/set-arch.d: Likewise.
	* gas/mips/tls-o32.d: Likewise.

ld/testsuite/
	* ld-mips-elf/mips-elf-flags.exp: Handle FreeBSD targets.
	* ld-mips-elf/mips-elf.exp: Likewise.
	* ld-mips-elf/mips16-call-global.d: Accept any file format.
	* ld-mips-elf/mips16-intermix.d: Likewise.
@
text
@#objdump: -d -mmips:4000
#as: -mabi=32
#name: MIPS ld-st-la constants (ABI o32, mips3)
#source: ldstla-32-mips3.s

.*: +file format .*

Disassembly of section \.text:

00000000 <\.text>:
[ 0-9a-f]+:	dc82ffff 	ld	v0,-1\(a0\)
[ 0-9a-f]+:	3c02abce 	lui	v0,0xabce
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc42ef01 	ld	v0,-4351\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc420000 	ld	v0,0\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc42ffff 	ld	v0,-1\(v0\)
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc424567 	ld	v0,17767\(v0\)
[ 0-9a-f]+:	dc820000 	ld	v0,0\(a0\)
[ 0-9a-f]+:	dc82ffff 	ld	v0,-1\(a0\)
[ 0-9a-f]+:	3c02abce 	lui	v0,0xabce
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc42ef01 	ld	v0,-4351\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc420000 	ld	v0,0\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc42ffff 	ld	v0,-1\(v0\)
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc424567 	ld	v0,17767\(v0\)
[ 0-9a-f]+:	dc820000 	ld	v0,0\(a0\)
[ 0-9a-f]+:	dc02ffff 	ld	v0,-1\(zero\)
[ 0-9a-f]+:	3c02abce 	lui	v0,0xabce
[ 0-9a-f]+:	dc42ef01 	ld	v0,-4351\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	dc420000 	ld	v0,0\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	dc42ffff 	ld	v0,-1\(v0\)
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	dc424567 	ld	v0,17767\(v0\)
[ 0-9a-f]+:	dc020000 	ld	v0,0\(zero\)
[ 0-9a-f]+:	dc02ffff 	ld	v0,-1\(zero\)
[ 0-9a-f]+:	3c02abce 	lui	v0,0xabce
[ 0-9a-f]+:	dc42ef01 	ld	v0,-4351\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	dc420000 	ld	v0,0\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	dc42ffff 	ld	v0,-1\(v0\)
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	dc424567 	ld	v0,17767\(v0\)
[ 0-9a-f]+:	dc020000 	ld	v0,0\(zero\)
[ 0-9a-f]+:	fc82ffff 	sd	v0,-1\(a0\)
[ 0-9a-f]+:	3c01abce 	lui	at,0xabce
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc22ef01 	sd	v0,-4351\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc220000 	sd	v0,0\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc22ffff 	sd	v0,-1\(at\)
[ 0-9a-f]+:	3c010123 	lui	at,0x123
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc224567 	sd	v0,17767\(at\)
[ 0-9a-f]+:	fc820000 	sd	v0,0\(a0\)
[ 0-9a-f]+:	fc82ffff 	sd	v0,-1\(a0\)
[ 0-9a-f]+:	3c01abce 	lui	at,0xabce
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc22ef01 	sd	v0,-4351\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc220000 	sd	v0,0\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc22ffff 	sd	v0,-1\(at\)
[ 0-9a-f]+:	3c010123 	lui	at,0x123
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc224567 	sd	v0,17767\(at\)
[ 0-9a-f]+:	fc820000 	sd	v0,0\(a0\)
[ 0-9a-f]+:	fc02ffff 	sd	v0,-1\(zero\)
[ 0-9a-f]+:	3c01abce 	lui	at,0xabce
[ 0-9a-f]+:	fc22ef01 	sd	v0,-4351\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	fc220000 	sd	v0,0\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	fc22ffff 	sd	v0,-1\(at\)
[ 0-9a-f]+:	3c010123 	lui	at,0x123
[ 0-9a-f]+:	fc224567 	sd	v0,17767\(at\)
[ 0-9a-f]+:	fc020000 	sd	v0,0\(zero\)
[ 0-9a-f]+:	fc02ffff 	sd	v0,-1\(zero\)
[ 0-9a-f]+:	3c01abce 	lui	at,0xabce
[ 0-9a-f]+:	fc22ef01 	sd	v0,-4351\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	fc220000 	sd	v0,0\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	fc22ffff 	sd	v0,-1\(at\)
[ 0-9a-f]+:	3c010123 	lui	at,0x123
[ 0-9a-f]+:	fc224567 	sd	v0,17767\(at\)
[ 0-9a-f]+:	fc020000 	sd	v0,0\(zero\)
[ 0-9a-f]+:	8c82ffff 	lw	v0,-1\(a0\)
[ 0-9a-f]+:	3c02abce 	lui	v0,0xabce
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c42ef01 	lw	v0,-4351\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c420000 	lw	v0,0\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c42ffff 	lw	v0,-1\(v0\)
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c424567 	lw	v0,17767\(v0\)
[ 0-9a-f]+:	8c820000 	lw	v0,0\(a0\)
[ 0-9a-f]+:	8c82ffff 	lw	v0,-1\(a0\)
[ 0-9a-f]+:	3c02abce 	lui	v0,0xabce
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c42ef01 	lw	v0,-4351\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c420000 	lw	v0,0\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c42ffff 	lw	v0,-1\(v0\)
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c424567 	lw	v0,17767\(v0\)
[ 0-9a-f]+:	8c820000 	lw	v0,0\(a0\)
[ 0-9a-f]+:	8c02ffff 	lw	v0,-1\(zero\)
[ 0-9a-f]+:	3c02abce 	lui	v0,0xabce
[ 0-9a-f]+:	8c42ef01 	lw	v0,-4351\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	8c420000 	lw	v0,0\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	8c42ffff 	lw	v0,-1\(v0\)
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	8c424567 	lw	v0,17767\(v0\)
[ 0-9a-f]+:	8c020000 	lw	v0,0\(zero\)
[ 0-9a-f]+:	8c02ffff 	lw	v0,-1\(zero\)
[ 0-9a-f]+:	3c02abce 	lui	v0,0xabce
[ 0-9a-f]+:	8c42ef01 	lw	v0,-4351\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	8c420000 	lw	v0,0\(v0\)
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	8c42ffff 	lw	v0,-1\(v0\)
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	8c424567 	lw	v0,17767\(v0\)
[ 0-9a-f]+:	8c020000 	lw	v0,0\(zero\)
[ 0-9a-f]+:	ac82ffff 	sw	v0,-1\(a0\)
[ 0-9a-f]+:	3c01abce 	lui	at,0xabce
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac22ef01 	sw	v0,-4351\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac220000 	sw	v0,0\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac22ffff 	sw	v0,-1\(at\)
[ 0-9a-f]+:	3c010123 	lui	at,0x123
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac224567 	sw	v0,17767\(at\)
[ 0-9a-f]+:	ac820000 	sw	v0,0\(a0\)
[ 0-9a-f]+:	ac82ffff 	sw	v0,-1\(a0\)
[ 0-9a-f]+:	3c01abce 	lui	at,0xabce
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac22ef01 	sw	v0,-4351\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac220000 	sw	v0,0\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac22ffff 	sw	v0,-1\(at\)
[ 0-9a-f]+:	3c010123 	lui	at,0x123
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac224567 	sw	v0,17767\(at\)
[ 0-9a-f]+:	ac820000 	sw	v0,0\(a0\)
[ 0-9a-f]+:	ac02ffff 	sw	v0,-1\(zero\)
[ 0-9a-f]+:	3c01abce 	lui	at,0xabce
[ 0-9a-f]+:	ac22ef01 	sw	v0,-4351\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	ac220000 	sw	v0,0\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	ac22ffff 	sw	v0,-1\(at\)
[ 0-9a-f]+:	3c010123 	lui	at,0x123
[ 0-9a-f]+:	ac224567 	sw	v0,17767\(at\)
[ 0-9a-f]+:	ac020000 	sw	v0,0\(zero\)
[ 0-9a-f]+:	ac02ffff 	sw	v0,-1\(zero\)
[ 0-9a-f]+:	3c01abce 	lui	at,0xabce
[ 0-9a-f]+:	ac22ef01 	sw	v0,-4351\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	ac220000 	sw	v0,0\(at\)
[ 0-9a-f]+:	3c018000 	lui	at,0x8000
[ 0-9a-f]+:	ac22ffff 	sw	v0,-1\(at\)
[ 0-9a-f]+:	3c010123 	lui	at,0x123
[ 0-9a-f]+:	ac224567 	sw	v0,17767\(at\)
[ 0-9a-f]+:	ac020000 	sw	v0,0\(zero\)
[ 0-9a-f]+:	2482ffff 	addiu	v0,a0,-1
[ 0-9a-f]+:	3c02abcd 	lui	v0,0xabcd
[ 0-9a-f]+:	3442ef01 	ori	v0,v0,0xef01
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	3c027fff 	lui	v0,0x7fff
[ 0-9a-f]+:	3442ffff 	ori	v0,v0,0xffff
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	34424567 	ori	v0,v0,0x4567
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	24820000 	addiu	v0,a0,0
[ 0-9a-f]+:	2482ffff 	addiu	v0,a0,-1
[ 0-9a-f]+:	3c02abcd 	lui	v0,0xabcd
[ 0-9a-f]+:	3442ef01 	ori	v0,v0,0xef01
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	3c027fff 	lui	v0,0x7fff
[ 0-9a-f]+:	3442ffff 	ori	v0,v0,0xffff
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	34424567 	ori	v0,v0,0x4567
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	24820000 	addiu	v0,a0,0
[ 0-9a-f]+:	2402ffff 	li	v0,-1
[ 0-9a-f]+:	3c02abcd 	lui	v0,0xabcd
[ 0-9a-f]+:	3442ef01 	ori	v0,v0,0xef01
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	3c027fff 	lui	v0,0x7fff
[ 0-9a-f]+:	3442ffff 	ori	v0,v0,0xffff
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	34424567 	ori	v0,v0,0x4567
[ 0-9a-f]+:	24020000 	li	v0,0
[ 0-9a-f]+:	2402ffff 	li	v0,-1
[ 0-9a-f]+:	3c02abcd 	lui	v0,0xabcd
[ 0-9a-f]+:	3442ef01 	ori	v0,v0,0xef01
[ 0-9a-f]+:	3c028000 	lui	v0,0x8000
[ 0-9a-f]+:	3c027fff 	lui	v0,0x7fff
[ 0-9a-f]+:	3442ffff 	ori	v0,v0,0xffff
[ 0-9a-f]+:	3c020123 	lui	v0,0x123
[ 0-9a-f]+:	34424567 	ori	v0,v0,0x4567
[ 0-9a-f]+:	24020000 	li	v0,0
	\.\.\.
@


1.3
log
@	gas/
	* config/tc-mips.c (macro) <ld_st>: Don't load a zero into an
	auxiliary register when using a signed 16-bit constant offset.

	gas/testsuite/
	* gas/mips/ldstla-32.d: Update according to a 16-bit constant
	offset optimization.
	* gas/mips/ldstla-32-mips3.d: Likewise.
	* gas/mips/ldstla-32-shared.d: Likewise.
	* gas/mips/ldstla-32-mips3-shared.d: Likewise.
@
text
@d6 1
a6 1
.*: +file format elf32-.*mips
@


1.2
log
@	* gas/mips/ldstla-32.d: Use wildcard address matching.
	* gas/mips/ldstla-32-mips3.d: Likewise.
	* gas/mips/ldstla-32-shared.d: Likewise.
	* gas/mips/ldstla-32-mips3-shared.d: Likewise.
@
text
@d24 2
a25 6
[ 0-9a-f]+:	24020000 	li	v0,0
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc420000 	ld	v0,0\(v0\)
[ 0-9a-f]+:	24020000 	li	v0,0
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	dc42ffff 	ld	v0,-1\(v0\)
d48 2
a49 4
[ 0-9a-f]+:	24020000 	li	v0,0
[ 0-9a-f]+:	dc420000 	ld	v0,0\(v0\)
[ 0-9a-f]+:	24020000 	li	v0,0
[ 0-9a-f]+:	dc42ffff 	ld	v0,-1\(v0\)
d72 2
a73 6
[ 0-9a-f]+:	24010000 	li	at,0
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc220000 	sd	v0,0\(at\)
[ 0-9a-f]+:	24010000 	li	at,0
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	fc22ffff 	sd	v0,-1\(at\)
d96 2
a97 4
[ 0-9a-f]+:	24010000 	li	at,0
[ 0-9a-f]+:	fc220000 	sd	v0,0\(at\)
[ 0-9a-f]+:	24010000 	li	at,0
[ 0-9a-f]+:	fc22ffff 	sd	v0,-1\(at\)
d120 2
a121 6
[ 0-9a-f]+:	24020000 	li	v0,0
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c420000 	lw	v0,0\(v0\)
[ 0-9a-f]+:	24020000 	li	v0,0
[ 0-9a-f]+:	00441021 	addu	v0,v0,a0
[ 0-9a-f]+:	8c42ffff 	lw	v0,-1\(v0\)
d144 2
a145 4
[ 0-9a-f]+:	24020000 	li	v0,0
[ 0-9a-f]+:	8c420000 	lw	v0,0\(v0\)
[ 0-9a-f]+:	24020000 	li	v0,0
[ 0-9a-f]+:	8c42ffff 	lw	v0,-1\(v0\)
d168 2
a169 6
[ 0-9a-f]+:	24010000 	li	at,0
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac220000 	sw	v0,0\(at\)
[ 0-9a-f]+:	24010000 	li	at,0
[ 0-9a-f]+:	00240821 	addu	at,at,a0
[ 0-9a-f]+:	ac22ffff 	sw	v0,-1\(at\)
d192 2
a193 4
[ 0-9a-f]+:	24010000 	li	at,0
[ 0-9a-f]+:	ac220000 	sw	v0,0\(at\)
[ 0-9a-f]+:	24010000 	li	at,0
[ 0-9a-f]+:	ac22ffff 	sw	v0,-1\(at\)
@


1.1
log
@gas/:
* config/tc-mips.c (IS_ZEXT_32BIT_NUM): New macro.
(normalize_address_expr): New function to sign-extend address
offsets that fit into 32 bits in 32-bit mode.
(macro_build_ldst_constoffset): Use normalize_address_expr()
instead of a handcoded sequence.
(load_register): Likewise.  Report oversized numbers in a useful
way.
(macro) [ld_st, ldd_std]: Reject all oversized offsets, not only
for constant addresses.  Report oversized numbers in a useful way.
(mips_ip): Use normalize_address_expr() for addresses.

gas/testsuite/:
* gas/mips/ldstla-32.s: Exclude offsets that are now meant to fail
and include more instructions/offsets that are meant to succeed.
Use $4 instead $3 to avoid register dependencies.
* gas/mips/ldstla-32.d: Update accordingly.
* gas/mips/ldstla-32-shared.d: Likewise.
* gas/mips/ldstla-32-mips3.d: New test based on the above, except
for mips3.
* gas/mips/ldstla-32-mips3-shared.d: Similarly, for PIC.
* gas/mips/ldstla-32-mips3.s: Source for the new tests.
* gas/mips/ldstla-32-1.s: New test for offsets that are meant to
fail.
* gas/mips/ldstla-32-mips3-1.s: Likewise, for mips3.
* gas/mips/ldstla-32-1.l: Stderr output for the new test.
* gas/mips/ldstla-32-mips3-1.l: Likewise.
* gas/mips/mips.exp: Run the new tests.
@
text
@d11 260
a270 260
   0:	dc82ffff 	ld	v0,-1\(a0\)
   4:	3c02abce 	lui	v0,0xabce
   8:	00441021 	addu	v0,v0,a0
   c:	dc42ef01 	ld	v0,-4351\(v0\)
  10:	3c028000 	lui	v0,0x8000
  14:	00441021 	addu	v0,v0,a0
  18:	dc420000 	ld	v0,0\(v0\)
  1c:	3c028000 	lui	v0,0x8000
  20:	00441021 	addu	v0,v0,a0
  24:	dc42ffff 	ld	v0,-1\(v0\)
  28:	3c020123 	lui	v0,0x123
  2c:	00441021 	addu	v0,v0,a0
  30:	dc424567 	ld	v0,17767\(v0\)
  34:	24020000 	li	v0,0
  38:	00441021 	addu	v0,v0,a0
  3c:	dc420000 	ld	v0,0\(v0\)
  40:	24020000 	li	v0,0
  44:	00441021 	addu	v0,v0,a0
  48:	dc42ffff 	ld	v0,-1\(v0\)
  4c:	3c02abce 	lui	v0,0xabce
  50:	00441021 	addu	v0,v0,a0
  54:	dc42ef01 	ld	v0,-4351\(v0\)
  58:	3c028000 	lui	v0,0x8000
  5c:	00441021 	addu	v0,v0,a0
  60:	dc420000 	ld	v0,0\(v0\)
  64:	3c028000 	lui	v0,0x8000
  68:	00441021 	addu	v0,v0,a0
  6c:	dc42ffff 	ld	v0,-1\(v0\)
  70:	3c020123 	lui	v0,0x123
  74:	00441021 	addu	v0,v0,a0
  78:	dc424567 	ld	v0,17767\(v0\)
  7c:	dc820000 	ld	v0,0\(a0\)
  80:	dc02ffff 	ld	v0,-1\(zero\)
  84:	3c02abce 	lui	v0,0xabce
  88:	dc42ef01 	ld	v0,-4351\(v0\)
  8c:	3c028000 	lui	v0,0x8000
  90:	dc420000 	ld	v0,0\(v0\)
  94:	3c028000 	lui	v0,0x8000
  98:	dc42ffff 	ld	v0,-1\(v0\)
  9c:	3c020123 	lui	v0,0x123
  a0:	dc424567 	ld	v0,17767\(v0\)
  a4:	24020000 	li	v0,0
  a8:	dc420000 	ld	v0,0\(v0\)
  ac:	24020000 	li	v0,0
  b0:	dc42ffff 	ld	v0,-1\(v0\)
  b4:	3c02abce 	lui	v0,0xabce
  b8:	dc42ef01 	ld	v0,-4351\(v0\)
  bc:	3c028000 	lui	v0,0x8000
  c0:	dc420000 	ld	v0,0\(v0\)
  c4:	3c028000 	lui	v0,0x8000
  c8:	dc42ffff 	ld	v0,-1\(v0\)
  cc:	3c020123 	lui	v0,0x123
  d0:	dc424567 	ld	v0,17767\(v0\)
  d4:	dc020000 	ld	v0,0\(zero\)
  d8:	fc82ffff 	sd	v0,-1\(a0\)
  dc:	3c01abce 	lui	at,0xabce
  e0:	00240821 	addu	at,at,a0
  e4:	fc22ef01 	sd	v0,-4351\(at\)
  e8:	3c018000 	lui	at,0x8000
  ec:	00240821 	addu	at,at,a0
  f0:	fc220000 	sd	v0,0\(at\)
  f4:	3c018000 	lui	at,0x8000
  f8:	00240821 	addu	at,at,a0
  fc:	fc22ffff 	sd	v0,-1\(at\)
 100:	3c010123 	lui	at,0x123
 104:	00240821 	addu	at,at,a0
 108:	fc224567 	sd	v0,17767\(at\)
 10c:	24010000 	li	at,0
 110:	00240821 	addu	at,at,a0
 114:	fc220000 	sd	v0,0\(at\)
 118:	24010000 	li	at,0
 11c:	00240821 	addu	at,at,a0
 120:	fc22ffff 	sd	v0,-1\(at\)
 124:	3c01abce 	lui	at,0xabce
 128:	00240821 	addu	at,at,a0
 12c:	fc22ef01 	sd	v0,-4351\(at\)
 130:	3c018000 	lui	at,0x8000
 134:	00240821 	addu	at,at,a0
 138:	fc220000 	sd	v0,0\(at\)
 13c:	3c018000 	lui	at,0x8000
 140:	00240821 	addu	at,at,a0
 144:	fc22ffff 	sd	v0,-1\(at\)
 148:	3c010123 	lui	at,0x123
 14c:	00240821 	addu	at,at,a0
 150:	fc224567 	sd	v0,17767\(at\)
 154:	fc820000 	sd	v0,0\(a0\)
 158:	fc02ffff 	sd	v0,-1\(zero\)
 15c:	3c01abce 	lui	at,0xabce
 160:	fc22ef01 	sd	v0,-4351\(at\)
 164:	3c018000 	lui	at,0x8000
 168:	fc220000 	sd	v0,0\(at\)
 16c:	3c018000 	lui	at,0x8000
 170:	fc22ffff 	sd	v0,-1\(at\)
 174:	3c010123 	lui	at,0x123
 178:	fc224567 	sd	v0,17767\(at\)
 17c:	24010000 	li	at,0
 180:	fc220000 	sd	v0,0\(at\)
 184:	24010000 	li	at,0
 188:	fc22ffff 	sd	v0,-1\(at\)
 18c:	3c01abce 	lui	at,0xabce
 190:	fc22ef01 	sd	v0,-4351\(at\)
 194:	3c018000 	lui	at,0x8000
 198:	fc220000 	sd	v0,0\(at\)
 19c:	3c018000 	lui	at,0x8000
 1a0:	fc22ffff 	sd	v0,-1\(at\)
 1a4:	3c010123 	lui	at,0x123
 1a8:	fc224567 	sd	v0,17767\(at\)
 1ac:	fc020000 	sd	v0,0\(zero\)
 1b0:	8c82ffff 	lw	v0,-1\(a0\)
 1b4:	3c02abce 	lui	v0,0xabce
 1b8:	00441021 	addu	v0,v0,a0
 1bc:	8c42ef01 	lw	v0,-4351\(v0\)
 1c0:	3c028000 	lui	v0,0x8000
 1c4:	00441021 	addu	v0,v0,a0
 1c8:	8c420000 	lw	v0,0\(v0\)
 1cc:	3c028000 	lui	v0,0x8000
 1d0:	00441021 	addu	v0,v0,a0
 1d4:	8c42ffff 	lw	v0,-1\(v0\)
 1d8:	3c020123 	lui	v0,0x123
 1dc:	00441021 	addu	v0,v0,a0
 1e0:	8c424567 	lw	v0,17767\(v0\)
 1e4:	24020000 	li	v0,0
 1e8:	00441021 	addu	v0,v0,a0
 1ec:	8c420000 	lw	v0,0\(v0\)
 1f0:	24020000 	li	v0,0
 1f4:	00441021 	addu	v0,v0,a0
 1f8:	8c42ffff 	lw	v0,-1\(v0\)
 1fc:	3c02abce 	lui	v0,0xabce
 200:	00441021 	addu	v0,v0,a0
 204:	8c42ef01 	lw	v0,-4351\(v0\)
 208:	3c028000 	lui	v0,0x8000
 20c:	00441021 	addu	v0,v0,a0
 210:	8c420000 	lw	v0,0\(v0\)
 214:	3c028000 	lui	v0,0x8000
 218:	00441021 	addu	v0,v0,a0
 21c:	8c42ffff 	lw	v0,-1\(v0\)
 220:	3c020123 	lui	v0,0x123
 224:	00441021 	addu	v0,v0,a0
 228:	8c424567 	lw	v0,17767\(v0\)
 22c:	8c820000 	lw	v0,0\(a0\)
 230:	8c02ffff 	lw	v0,-1\(zero\)
 234:	3c02abce 	lui	v0,0xabce
 238:	8c42ef01 	lw	v0,-4351\(v0\)
 23c:	3c028000 	lui	v0,0x8000
 240:	8c420000 	lw	v0,0\(v0\)
 244:	3c028000 	lui	v0,0x8000
 248:	8c42ffff 	lw	v0,-1\(v0\)
 24c:	3c020123 	lui	v0,0x123
 250:	8c424567 	lw	v0,17767\(v0\)
 254:	24020000 	li	v0,0
 258:	8c420000 	lw	v0,0\(v0\)
 25c:	24020000 	li	v0,0
 260:	8c42ffff 	lw	v0,-1\(v0\)
 264:	3c02abce 	lui	v0,0xabce
 268:	8c42ef01 	lw	v0,-4351\(v0\)
 26c:	3c028000 	lui	v0,0x8000
 270:	8c420000 	lw	v0,0\(v0\)
 274:	3c028000 	lui	v0,0x8000
 278:	8c42ffff 	lw	v0,-1\(v0\)
 27c:	3c020123 	lui	v0,0x123
 280:	8c424567 	lw	v0,17767\(v0\)
 284:	8c020000 	lw	v0,0\(zero\)
 288:	ac82ffff 	sw	v0,-1\(a0\)
 28c:	3c01abce 	lui	at,0xabce
 290:	00240821 	addu	at,at,a0
 294:	ac22ef01 	sw	v0,-4351\(at\)
 298:	3c018000 	lui	at,0x8000
 29c:	00240821 	addu	at,at,a0
 2a0:	ac220000 	sw	v0,0\(at\)
 2a4:	3c018000 	lui	at,0x8000
 2a8:	00240821 	addu	at,at,a0
 2ac:	ac22ffff 	sw	v0,-1\(at\)
 2b0:	3c010123 	lui	at,0x123
 2b4:	00240821 	addu	at,at,a0
 2b8:	ac224567 	sw	v0,17767\(at\)
 2bc:	24010000 	li	at,0
 2c0:	00240821 	addu	at,at,a0
 2c4:	ac220000 	sw	v0,0\(at\)
 2c8:	24010000 	li	at,0
 2cc:	00240821 	addu	at,at,a0
 2d0:	ac22ffff 	sw	v0,-1\(at\)
 2d4:	3c01abce 	lui	at,0xabce
 2d8:	00240821 	addu	at,at,a0
 2dc:	ac22ef01 	sw	v0,-4351\(at\)
 2e0:	3c018000 	lui	at,0x8000
 2e4:	00240821 	addu	at,at,a0
 2e8:	ac220000 	sw	v0,0\(at\)
 2ec:	3c018000 	lui	at,0x8000
 2f0:	00240821 	addu	at,at,a0
 2f4:	ac22ffff 	sw	v0,-1\(at\)
 2f8:	3c010123 	lui	at,0x123
 2fc:	00240821 	addu	at,at,a0
 300:	ac224567 	sw	v0,17767\(at\)
 304:	ac820000 	sw	v0,0\(a0\)
 308:	ac02ffff 	sw	v0,-1\(zero\)
 30c:	3c01abce 	lui	at,0xabce
 310:	ac22ef01 	sw	v0,-4351\(at\)
 314:	3c018000 	lui	at,0x8000
 318:	ac220000 	sw	v0,0\(at\)
 31c:	3c018000 	lui	at,0x8000
 320:	ac22ffff 	sw	v0,-1\(at\)
 324:	3c010123 	lui	at,0x123
 328:	ac224567 	sw	v0,17767\(at\)
 32c:	24010000 	li	at,0
 330:	ac220000 	sw	v0,0\(at\)
 334:	24010000 	li	at,0
 338:	ac22ffff 	sw	v0,-1\(at\)
 33c:	3c01abce 	lui	at,0xabce
 340:	ac22ef01 	sw	v0,-4351\(at\)
 344:	3c018000 	lui	at,0x8000
 348:	ac220000 	sw	v0,0\(at\)
 34c:	3c018000 	lui	at,0x8000
 350:	ac22ffff 	sw	v0,-1\(at\)
 354:	3c010123 	lui	at,0x123
 358:	ac224567 	sw	v0,17767\(at\)
 35c:	ac020000 	sw	v0,0\(zero\)
 360:	2482ffff 	addiu	v0,a0,-1
 364:	3c02abcd 	lui	v0,0xabcd
 368:	3442ef01 	ori	v0,v0,0xef01
 36c:	00441021 	addu	v0,v0,a0
 370:	3c028000 	lui	v0,0x8000
 374:	00441021 	addu	v0,v0,a0
 378:	3c027fff 	lui	v0,0x7fff
 37c:	3442ffff 	ori	v0,v0,0xffff
 380:	00441021 	addu	v0,v0,a0
 384:	3c020123 	lui	v0,0x123
 388:	34424567 	ori	v0,v0,0x4567
 38c:	00441021 	addu	v0,v0,a0
 390:	24820000 	addiu	v0,a0,0
 394:	2482ffff 	addiu	v0,a0,-1
 398:	3c02abcd 	lui	v0,0xabcd
 39c:	3442ef01 	ori	v0,v0,0xef01
 3a0:	00441021 	addu	v0,v0,a0
 3a4:	3c028000 	lui	v0,0x8000
 3a8:	00441021 	addu	v0,v0,a0
 3ac:	3c027fff 	lui	v0,0x7fff
 3b0:	3442ffff 	ori	v0,v0,0xffff
 3b4:	00441021 	addu	v0,v0,a0
 3b8:	3c020123 	lui	v0,0x123
 3bc:	34424567 	ori	v0,v0,0x4567
 3c0:	00441021 	addu	v0,v0,a0
 3c4:	24820000 	addiu	v0,a0,0
 3c8:	2402ffff 	li	v0,-1
 3cc:	3c02abcd 	lui	v0,0xabcd
 3d0:	3442ef01 	ori	v0,v0,0xef01
 3d4:	3c028000 	lui	v0,0x8000
 3d8:	3c027fff 	lui	v0,0x7fff
 3dc:	3442ffff 	ori	v0,v0,0xffff
 3e0:	3c020123 	lui	v0,0x123
 3e4:	34424567 	ori	v0,v0,0x4567
 3e8:	24020000 	li	v0,0
 3ec:	2402ffff 	li	v0,-1
 3f0:	3c02abcd 	lui	v0,0xabcd
 3f4:	3442ef01 	ori	v0,v0,0xef01
 3f8:	3c028000 	lui	v0,0x8000
 3fc:	3c027fff 	lui	v0,0x7fff
 400:	3442ffff 	ori	v0,v0,0xffff
 404:	3c020123 	lui	v0,0x123
 408:	34424567 	ori	v0,v0,0x4567
 40c:	24020000 	li	v0,0
@


1.1.2.1
log
@gas/:
* config/tc-mips.c (IS_ZEXT_32BIT_NUM): New macro.
(normalize_address_expr): New function to sign-extend address
offsets that fit into 32 bits in 32-bit mode.
(macro_build_ldst_constoffset): Use normalize_address_expr()
instead of a handcoded sequence.
(load_register): Likewise.  Report oversized numbers in a useful
way.
(macro) [ld_st, ldd_std]: Reject all oversized offsets, not only
for constant addresses.  Report oversized numbers in a useful way.
(mips_ip): Use normalize_address_expr() for addresses.

gas/testsuite/:
* gas/mips/ldstla-32.s: Exclude offsets that are now meant to fail
and include more instructions/offsets that are meant to succeed.
Use $4 instead $3 to avoid register dependencies.
* gas/mips/ldstla-32.d: Update accordingly.
* gas/mips/ldstla-32-shared.d: Likewise.
* gas/mips/ldstla-32-mips3.d: New test based on the above, except
for mips3.
* gas/mips/ldstla-32-mips3-shared.d: Similarly, for PIC.
* gas/mips/ldstla-32-mips3.s: Source for the new tests.
* gas/mips/ldstla-32-1.s: New test for offsets that are meant to
fail.
* gas/mips/ldstla-32-mips3-1.s: Likewise, for mips3.
* gas/mips/ldstla-32-1.l: Stderr output for the new test.
* gas/mips/ldstla-32-mips3-1.l: Likewise.
* gas/mips/mips.exp: Run the new tests.
@
text
@@

