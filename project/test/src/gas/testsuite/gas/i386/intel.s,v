head	1.21;
access;
symbols
	binutils-2_24-branch:1.21.0.14
	binutils-2_24-branchpoint:1.21
	binutils-2_21_1:1.21
	binutils-2_23_2:1.21
	binutils-2_23_1:1.21
	binutils-2_23:1.21
	binutils-2_23-branch:1.21.0.12
	binutils-2_23-branchpoint:1.21
	binutils-2_22_branch:1.21.0.10
	binutils-2_22:1.21
	binutils-2_22-branch:1.21.0.8
	binutils-2_22-branchpoint:1.21
	binutils-2_21:1.21
	binutils-2_21-branch:1.21.0.6
	binutils-2_21-branchpoint:1.21
	binutils-2_20_1:1.21
	binutils-2_20:1.21
	binutils-arc-20081103-branch:1.19.0.6
	binutils-arc-20081103-branchpoint:1.19
	binutils-2_20-branch:1.21.0.4
	binutils-2_20-branchpoint:1.21
	dje-cgen-play1-branch:1.21.0.2
	dje-cgen-play1-branchpoint:1.21
	arc-20081103-branch:1.19.0.4
	arc-20081103-branchpoint:1.19
	binutils-2_19_1:1.19
	binutils-2_19:1.19
	binutils-2_19-branch:1.19.0.2
	binutils-2_19-branchpoint:1.19
	binutils-2_18:1.14
	binutils-2_18-branch:1.14.0.2
	binutils-2_18-branchpoint:1.14
	binutils-csl-coldfire-4_1-32:1.12
	binutils-csl-sourcerygxx-4_1-32:1.12
	binutils-csl-innovasic-fido-3_4_4-33:1.12
	binutils-csl-sourcerygxx-3_4_4-32:1.10
	binutils-csl-coldfire-4_1-30:1.12
	binutils-csl-sourcerygxx-4_1-30:1.12
	binutils-csl-coldfire-4_1-28:1.12
	binutils-csl-sourcerygxx-4_1-29:1.12
	binutils-csl-sourcerygxx-4_1-28:1.12
	binutils-csl-arm-2006q3-27:1.12
	binutils-csl-sourcerygxx-4_1-27:1.12
	binutils-csl-arm-2006q3-26:1.12
	binutils-csl-sourcerygxx-4_1-26:1.12
	binutils-csl-sourcerygxx-4_1-25:1.12
	binutils-csl-sourcerygxx-4_1-24:1.12
	binutils-csl-sourcerygxx-4_1-23:1.12
	binutils-csl-sourcerygxx-4_1-21:1.12
	binutils-csl-arm-2006q3-21:1.12
	binutils-csl-sourcerygxx-4_1-22:1.12
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.12
	binutils-csl-sourcerygxx-4_1-20:1.12
	binutils-csl-arm-2006q3-19:1.12
	binutils-csl-sourcerygxx-4_1-19:1.12
	binutils-csl-sourcerygxx-4_1-18:1.12
	binutils-csl-renesas-4_1-9:1.12
	binutils-csl-sourcerygxx-3_4_4-25:1.10
	binutils-csl-renesas-4_1-8:1.12
	binutils-csl-renesas-4_1-7:1.12
	binutils-csl-renesas-4_1-6:1.12
	binutils-csl-sourcerygxx-4_1-17:1.12
	binutils-csl-sourcerygxx-4_1-14:1.12
	binutils-csl-sourcerygxx-4_1-15:1.12
	binutils-csl-sourcerygxx-4_1-13:1.12
	binutils-2_17:1.12
	binutils-csl-sourcerygxx-4_1-12:1.12
	binutils-csl-sourcerygxx-3_4_4-21:1.12
	binutils-csl-wrs-linux-3_4_4-24:1.10
	binutils-csl-wrs-linux-3_4_4-23:1.10
	binutils-csl-sourcerygxx-4_1-9:1.12
	binutils-csl-sourcerygxx-4_1-8:1.12
	binutils-csl-sourcerygxx-4_1-7:1.12
	binutils-csl-arm-2006q1-6:1.12
	binutils-csl-sourcerygxx-4_1-6:1.12
	binutils-csl-wrs-linux-3_4_4-22:1.10
	binutils-csl-coldfire-4_1-11:1.12
	binutils-csl-sourcerygxx-3_4_4-19:1.12
	binutils-csl-coldfire-4_1-10:1.12
	binutils-csl-sourcerygxx-4_1-5:1.12
	binutils-csl-sourcerygxx-4_1-4:1.12
	binutils-csl-wrs-linux-3_4_4-21:1.10
	binutils-csl-morpho-4_1-4:1.12
	binutils-csl-sourcerygxx-3_4_4-17:1.12
	binutils-csl-wrs-linux-3_4_4-20:1.10
	binutils-2_17-branch:1.12.0.4
	binutils-2_17-branchpoint:1.12
	binutils-csl-2_17-branch:1.12.0.2
	binutils-csl-2_17-branchpoint:1.12
	binutils-csl-gxxpro-3_4-branch:1.10.0.6
	binutils-csl-gxxpro-3_4-branchpoint:1.10
	binutils-2_16_1:1.10
	binutils-csl-arm-2005q1b:1.10
	binutils-2_16:1.10
	binutils-csl-arm-2005q1a:1.10
	binutils-csl-arm-2005q1-branch:1.10.0.4
	binutils-csl-arm-2005q1-branchpoint:1.10
	binutils-2_16-branch:1.10.0.2
	binutils-2_16-branchpoint:1.10
	csl-arm-2004-q3d:1.10
	csl-arm-2004-q3:1.10
	binutils-2_15:1.9
	binutils-2_15-branchpoint:1.9
	csl-arm-2004-q1a:1.9
	csl-arm-2004-q1:1.9
	binutils-2_15-branch:1.9.0.12
	cagney_bfdfile-20040213-branch:1.9.0.10
	cagney_bfdfile-20040213-branchpoint:1.9
	cagney_bigcore-20040122-branch:1.9.0.8
	cagney_bigcore-20040122-branchpoint:1.9
	csl-arm-2003-q4:1.9
	binutils-2_14:1.9
	binutils-2_14-branch:1.9.0.6
	binutils-2_14-branchpoint:1.9
	binutils-2_13_2_1:1.9
	binutils-2_13_2:1.9
	binutils-2_13_1:1.9
	binutils-2_13:1.9
	binutils-2_13-branchpoint:1.9
	binutils-2_13-branch:1.9.0.4
	binutils-2_12_1:1.9
	binutils-2_12:1.9
	binutils-2_12-branch:1.9.0.2
	binutils-2_12-branchpoint:1.9
	cygnus_cvs_20020108_pre:1.9
	binutils-2_11_2:1.8.2.1
	binutils-2_11_1:1.8.2.1
	binutils-2_11:1.8
	x86_64versiong3:1.8
	binutils-2_11-branch:1.8.0.2
	binutils-2_10_1:1.2
	binutils-2_10:1.2
	binutils-2_10-branch:1.2.0.2
	binutils-2_10-branchpoint:1.2
	binutils_latest_snapshot:1.21;
locks; strict;
comment	@# @;


1.21
date	2009.04.20.06.31.50;	author jbeulich;	state Exp;
branches;
next	1.20;

1.20
date	2008.11.03.19.38.09;	author hjl;	state Exp;
branches;
next	1.19;

1.19
date	2008.08.28.15.59.32;	author jbeulich;	state Exp;
branches;
next	1.18;

1.18
date	2008.08.27.17.53.42;	author hjl;	state Exp;
branches;
next	1.17;

1.17
date	2008.01.12.16.05.41;	author hjl;	state Exp;
branches;
next	1.16;

1.16
date	2008.01.05.17.07.25;	author hjl;	state Exp;
branches;
next	1.15;

1.15
date	2008.01.02.21.43.34;	author hjl;	state Exp;
branches;
next	1.14;

1.14
date	2006.12.29.21.48.48;	author hjl;	state Exp;
branches;
next	1.13;

1.13
date	2006.12.01.14.56.11;	author jbeulich;	state Exp;
branches;
next	1.12;

1.12
date	2005.10.26.12.29.44;	author jbeulich;	state Exp;
branches;
next	1.11;

1.11
date	2005.08.26.15.51.15;	author jbeulich;	state Exp;
branches;
next	1.10;

1.10
date	2004.07.13.17.31.15;	author nickc;	state Exp;
branches;
next	1.9;

1.9
date	2001.03.18.21.28.56;	author hjl;	state Exp;
branches;
next	1.8;

1.8
date	2000.12.22.21.03.24;	author hjl;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2000.12.11.21.49.36;	author hjl;	state Exp;
branches;
next	1.6;

1.6
date	2000.12.01.03.08.32;	author dnovillo;	state Exp;
branches;
next	1.5;

1.5
date	2000.11.20.21.16.26;	author hjl;	state Exp;
branches;
next	1.4;

1.4
date	2000.10.25.01.39.11;	author dnovillo;	state Exp;
branches;
next	1.3;

1.3
date	2000.10.15.06.17.36;	author dnovillo;	state Exp;
branches;
next	1.2;

1.2
date	2000.02.25.11.55.50;	author amodra;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.25.11.41.12;	author amodra;	state Exp;
branches;
next	;

1.8.2.1
date	2001.06.11.10.04.57;	author amodra;	state Exp;
branches;
next	;


desc
@@


1.21
log
@gas/
2009-04-20  Jan Beulich  <jbeulich@@novell.com>

	* Makefile.am: Add explicit dependency of tc-i386.o on
	tc-i386-intel.c.
	* Makefile.in: Likewise.
	* config/tc-i386.c (i386_finalize_immediate): Declare, broken
	out from i386_immediate.
	(i386_immediate): Slightly re-arrange, call
	i386_finalize_immediate.
	(i386_finalize_displacement): Declare, broken out from
	i386_displacement.
	(i386_displacement): Slightly re-arrange, call
	i386_finalize_displacement.
	(i386_intel_simplify, i386_intel_parse_name): Declare.
	(this_operand): Initialize to -1.
	(set_intel_syntax): Set expression rank for O_full_ptr.
	(md_assemble): Set this_operand back to -1 after parsing
	operands.
	(x86_cons): Negate intel_syntax to indicate state. Call
	i386_intel_simplify.
	(md_operand): Convert if to switch. Handle '[' for Intel
	syntax.
	(i386_intel_operand): Delete, including all helper functions
	and data.
	* config/tc-i386-intel.c: New file, all new code.
	* config/tc-i386.h (i386_operator): Declare.
	(md_operator): Define to i386_operator.
	(i386_need_index_operator): Declare.
	(md_need_index_operator): Define to i386_need_index_operator.
	(O_full_ptr): Define.

gas/testsuite/
2009-04-20  Jan Beulich  <jbeulich@@novell.com>

	* gas/i386/equ.s: Adjust.
	* gas/i386/equ.d: Remove reference to equ.e.
	* gas/i386/equ.e: Delete.
	* gas/i386/intel-expr.s: New.
	* gas/i386/intel-expr.d: New.
	* gas/i386/i386.exp: Run new test.
	* gas/i386/intel.s: Adjust.
	* gas/i386/intel.e: Remove no longer valid warning messages.
	* gas/i386/intel16.s: Adjust.
	* gas/i386/intel16.d: Remove reference to intel16.e.
	* gas/i386/intel16.e: Delete.
	* gas/i386/intelbad.s: Add more tests.
	* gas/i386/intelbad.l: Adjust.
	* gas/i386/intelok.s: Remove now unneeded equates. Add more
	tests.
	* gas/i386/intelok.d: Remove reference to intelok.e. Adjust.
	* gas/i386/intelok.e: Delete.
	* gas/i386/x86_64.s: Adjust.
	* gas/i386/x86_64.d: Remove reference to x86_64.e.
	* gas/i386/x86_64.e: Delete.
@
text
@.text
.intel_syntax noprefix
foo:
 add    byte ptr 0x90909090[eax], dl
 add    dword ptr 0x90909090[eax], edx
 add    dl, byte ptr 0x90909090[eax]
 add    edx, dword ptr 0x90909090[eax]
 add    al, 0x90
 add    eax, 0x90909090
 push   es
 pop    es
 or     [eax+0x90909090], dl
 or     [eax+0x90909090], edx
 or     dl, [eax+0x90909090]
 or     edx, [eax+0x90909090]
 or     al, 0x90
 or     eax, 0x90909090
 push   cs
 adc    byte ptr [eax+0x90909090], dl
 adc    dword ptr [eax+0x90909090], edx
 adc    dl, byte ptr [eax+0x90909090]
 adc    edx, dword ptr [eax+0x90909090]
 adc    al, 0x90
 adc    eax, 0x90909090
 push   ss
 pop    ss
 sbb    0x90909090[eax], dl
 sbb    0x90909090[eax], edx
 sbb    dl, 0x90909090[eax]
 sbb    edx, 0x90909090[eax]
 sbb    al, 0x90
 sbb    eax, 0x90909090
 push   ds
 pop    ds
 and    0x90909090[eax], dl
 and    0x90909090[eax], edx
 and    dl, 0x90909090[eax]
 and    edx, 0x90909090[eax]
 and    al, 0x90
 and    eax, 0x90909090
 daa
 sub    0x90909090[eax], dl
 sub    0x90909090[eax], edx
 sub    dl, 0x90909090[eax]
 sub    edx, 0x90909090[eax]
 sub    al, 0x90
 sub    eax, 0x90909090
 das
 xor    0x90909090[eax], dl
 xor    0x90909090[eax], edx
 xor    dl, 0x90909090[eax]
 xor    edx, 0x90909090[eax]
 xor    al, 0x90
 xor    eax, 0x90909090
 aaa
 cmp    0x90909090[eax], dl
 cmp    0x90909090[eax], edx
 cmp    dl, 0x90909090[eax]
 cmp    edx, 0x90909090[eax]
 cmp    al, 0x90
 cmp    eax, 0x90909090
 aas
 inc    eax
 inc    ecx
 inc    edx
 inc    ebx
 inc    esp
 inc    ebp
 inc    esi
 inc    edi
 dec    eax
 dec    ecx
 dec    edx
 dec    ebx
 dec    esp
 dec    ebp
 dec    esi
 dec    edi
 push   eax
 push   ecx
 push   edx
 push   ebx
 push   esp
 push   ebp
 push   esi
 push   edi
 pop    eax
 pop    ecx
 pop    edx
 pop    ebx
 pop    esp
 pop    ebp
 pop    esi
 pop    edi
 pusha
 popa
 bound  edx, 0x90909090[eax]
 arpl   0x90909090[eax], dx
 push   0x90909090
 imul   edx, 0x90909090[eax], 0x90909090
 push   0xffffff90
 imul   edx, 0x90909090[eax], 0xffffff90
 ins    byte ptr es:[edi], dx
 ins    dword ptr es:[edi], dx
 outs   dx, byte ptr ds:[esi]
 outs   dx, dword ptr ds:[esi]
 jo     .+2-0x70
 jno    .+2-0x70
 jb     .+2-0x70
 jae    .+2-0x70
 je     .+2-0x70
 jne    .+2-0x70
 jbe    .+2-0x70
 ja     .+2-0x70
 js     .+2-0x70
 jns    .+2-0x70
 jp     .+2-0x70
 jnp    .+2-0x70
 jl     .+2-0x70
 jge    .+2-0x70
 jle    .+2-0x70
 jg     .+2-0x70
 adc    byte ptr 0x90909090[eax], 0x90
 adc    dword ptr 0x90909090[eax], 0x90909090
 adc    dword ptr 0x90909090[eax], 0xffffff90
 test   0x90909090[eax], dl
 test   0x90909090[eax], edx
 xchg   0x90909090[eax], dl
 xchg   0x90909090[eax], edx
 mov    0x90909090[eax], dl
 mov    0x90909090[eax], edx
 mov    dl, 0x90909090[eax]
 mov    edx, 0x90909090[eax]
 mov    word ptr 0x90909090[eax], ss
 lea    edx, 0x90909090[eax]
 mov    ss, word ptr 0x90909090[eax]
 pop    dword ptr 0x90909090[eax]
 xchg   eax, eax
 xchg   ecx, eax
 xchg   edx, eax
 xchg   ebx, eax
 xchg   esp, eax
 xchg   ebp, eax
 xchg   esi, eax
 xchg   edi, eax
 cwde
 cdq
 call   0x9090:0x90909090
 fwait
 pushf
 popf
 sahf
 lahf
 mov    al, FLAT:[0x90909090]
 mov    eax, FLAT:[0x90909090]
 mov    FLAT:[0x90909090], al
 mov    FLAT:[0x90909090], eax
 movs   byte ptr es:[edi], byte ptr ds:[esi]
 movs   dword ptr es:[edi], dword ptr ds:[esi]
 cmps   byte ptr ds:[esi], byte ptr es:[edi]
 cmps   dword ptr ds:[esi], dword ptr es:[edi]
 test   al, 0x90
 test   eax, 0x90909090
 stos   byte ptr es:[edi], al
 stos   dword ptr es:[edi], eax
 lods   al, byte ptr ds:[esi]
 lods   eax, dword ptr ds:[esi]
 scas   al, byte ptr es:[edi]
 scas   eax, dword ptr es:[edi]
 mov    al, 0x90
 mov    cl, 0x90
 mov    dl, 0x90
 mov    bl, 0x90
 mov    ah, 0x90
 mov    ch, 0x90
 mov    dh, 0x90
 mov    bh, 0x90
 mov    eax, 0x90909090
 mov    ecx, 0x90909090
 mov    edx, 0x90909090
 mov    ebx, 0x90909090
 mov    esp, 0x90909090
 mov    ebp, 0x90909090
 mov    esi, 0x90909090
 mov    edi, 0x90909090
 rcl    byte ptr 0x90909090[eax], 0x90
 rcl    dword ptr 0x90909090[eax], 0x90
 ret    0x9090
 ret
 les    edx, 0x90909090[eax]
 lds    edx, 0x90909090[eax]
 mov    byte ptr 0x90909090[eax], 0x90
 mov    dword ptr 0x90909090[eax], 0x90909090
 enter  0x9090, 0x90
 leave
 retf   0x9090
 retf
 lret   0x9090
 lret
 int3
 int    0x90
 into
 iret
 rcl    byte ptr 0x90909090[eax]
 rcl    dword ptr 0x90909090[eax]
 rcl    byte ptr 0x90909090[eax], cl
 rcl    dword ptr 0x90909090[eax], cl
 aam    0xffffff90
 aad    0xffffff90
 xlat   byte ptr ds:[ebx]
 fcom   dword ptr 0x90909090[eax]
 fst    dword ptr 0x90909090[eax]
 ficom  dword ptr 0x90909090[eax]
 fist   dword ptr 0x90909090[eax]
 fcom   qword ptr 0x90909090[eax]
 fst    qword ptr 0x90909090[eax]
 ficom  word ptr 0x90909090[eax]
 fist   word ptr 0x90909090[eax]
 loopne .+2-0x70
 loope  .+2-0x70
 loop   .+2-0x70
 jecxz  .+2-0x70
 in     al, 0x90
 in     eax, 0x90
 out    0x90, al
 out    0x90, eax
 call   .+5+0x90909090
 jmp    .+5+0x90909090
 jmp    0x9090:0x90909090
 jmp    .+2-0x70
 in     al, dx
 in     eax, dx
 out    dx, al
 out    dx, eax
 hlt
 cmc
 not    byte ptr 0x90909090[eax]
 not    dword ptr 0x90909090[eax]
 clc
 stc
 cli
 sti
 cld
 std
 call   dword ptr 0x90909090[eax]
 lldt   0x90909090[eax]
 lgdt   0x90909090[eax]
 lar    edx, 0x90909090[eax]
 lsl    edx, 0x90909090[eax]
 clts
 invd
 wbinvd
 ud2a
 mov    eax, cr2
 mov    eax, db2
 mov    cr2, eax
 mov    db2, eax
 mov    eax, tr2
 mov    tr2, eax
 wrmsr
 rdtsc
 rdmsr
 rdpmc
 cmovo  edx, 0x90909090[eax]
 cmovno edx, 0x90909090[eax]
 cmovb  edx, 0x90909090[eax]
 cmovae edx, 0x90909090[eax]
 cmove  edx, 0x90909090[eax]
 cmovne edx, 0x90909090[eax]
 cmovbe edx, 0x90909090[eax]
 cmova  edx, 0x90909090[eax]
 cmovs  edx, 0x90909090[eax]
 cmovns edx, 0x90909090[eax]
 cmovp  edx, 0x90909090[eax]
 cmovnp edx, 0x90909090[eax]
 cmovl  edx, 0x90909090[eax]
 cmovge edx, 0x90909090[eax]
 cmovle edx, 0x90909090[eax]
 cmovg  edx, 0x90909090[eax]
 punpcklbw mm2, 0x90909090[eax]
 punpcklwd mm2, 0x90909090[eax]
 punpckldq mm2, 0x90909090[eax]
 packsswb mm2, 0x90909090[eax]
 pcmpgtb mm2, 0x90909090[eax]
 pcmpgtw mm2, 0x90909090[eax]
 pcmpgtd mm2, 0x90909090[eax]
 packuswb mm2, 0x90909090[eax]
 punpckhbw mm2, 0x90909090[eax]
 punpckhwd mm2, 0x90909090[eax]
 punpckhdq mm2, 0x90909090[eax]
 packssdw mm2, 0x90909090[eax]
 movd   mm2, 0x90909090[eax]
 movq   mm2, 0x90909090[eax]
 psrlw  mm0, 0x90
 psrld  mm0, 0x90
 psrlq  mm0, 0x90
 pcmpeqb mm2, 0x90909090[eax]
 pcmpeqw mm2, 0x90909090[eax]
 pcmpeqd mm2, 0x90909090[eax]
 emms
 movd   0x90909090[eax], mm2
 movq   0x90909090[eax], mm2
 jo     .+6+0x90909090
 jno    .+6+0x90909090
 jb     .+6+0x90909090
 jae    .+6+0x90909090
 je     .+6+0x90909090
 jne    .+6+0x90909090
 jbe    .+6+0x90909090
 ja     .+6+0x90909090
 js     .+6+0x90909090
 jns    .+6+0x90909090
 jp     .+6+0x90909090
 jnp    .+6+0x90909090
 jl     .+6+0x90909090
 jge    .+6+0x90909090
 jle    .+6+0x90909090
 jg     .+6+0x90909090
 seto   0x90909090[eax]
 setno  0x90909090[eax]
 setb   0x90909090[eax]
 setae  0x90909090[eax]
 sete   0x90909090[eax]
 setne  0x90909090[eax]
 setbe  0x90909090[eax]
 seta   0x90909090[eax]
 sets   0x90909090[eax]
 setns  0x90909090[eax]
 setp   0x90909090[eax]
 setnp  0x90909090[eax]
 setl   0x90909090[eax]
 setge  0x90909090[eax]
 setle  0x90909090[eax]
 setg   0x90909090[eax]
 push   fs
 pop    fs
 cpuid
 bt     0x90909090[eax], edx
 shld   0x90909090[eax], edx, 0x90
 shld   0x90909090[eax], edx, cl
 push   gs
 pop    gs
 rsm
 bts    0x90909090[eax], edx
 shrd   0x90909090[eax], edx, 0x90
 shrd   0x90909090[eax], edx, cl
 imul   edx, 0x90909090[eax]
 cmpxchg 0x90909090[eax], dl
 cmpxchg 0x90909090[eax], edx
 lss    edx, 0x90909090[eax]
 btr    0x90909090[eax], edx
 lfs    edx, 0x90909090[eax]
 lgs    edx, 0x90909090[eax]
 movzx  edx, byte ptr 0x90909090[eax]
 movzx  edx, word ptr 0x90909090[eax]
 ud2b
 btc    0x90909090[eax], edx
 bsf    edx, 0x90909090[eax]
 bsr    edx, 0x90909090[eax]
 movsx  edx, byte ptr 0x90909090[eax]
 movsx  edx, word ptr 0x90909090[eax]
 xadd   0x90909090[eax], dl
 xadd   0x90909090[eax], edx
 bswap  eax
 bswap  ecx
 bswap  edx
 bswap  ebx
 bswap  esp
 bswap  ebp
 bswap  esi
 bswap  edi
 psrlw  mm2, 0x90909090[eax]
 psrld  mm2, 0x90909090[eax]
 psrlq  mm2, 0x90909090[eax]
 pmullw mm2, 0x90909090[eax]
 psubusb mm2, 0x90909090[eax]
 psubusw mm2, 0x90909090[eax]
 pand   mm2, 0x90909090[eax]
 paddusb mm2, 0x90909090[eax]
 paddusw mm2, 0x90909090[eax]
 pandn  mm2, 0x90909090[eax]
 psraw  mm2, 0x90909090[eax]
 psrad  mm2, 0x90909090[eax]
 pmulhw mm2, 0x90909090[eax]
 psubsb mm2, 0x90909090[eax]
 psubsw mm2, 0x90909090[eax]
 por    mm2, 0x90909090[eax]
 paddsb mm2, 0x90909090[eax]
 paddsw mm2, 0x90909090[eax]
 pxor   mm2, 0x90909090[eax]
 psllw  mm2, 0x90909090[eax]
 pslld  mm2, 0x90909090[eax]
 psllq  mm2, 0x90909090[eax]
 pmaddwd mm2, 0x90909090[eax]
 psubb  mm2, 0x90909090[eax]
 psubw  mm2, 0x90909090[eax]
 psubd  mm2, 0x90909090[eax]
 paddb  mm2, 0x90909090[eax]
 paddw  mm2, 0x90909090[eax]
 paddd  mm2, 0x90909090[eax]
 add    0x90909090[eax], dx
 add    dx, 0x90909090[eax]
 add    ax, 0x9090
 pushw  es
 popw   es
 or     0x90909090[eax], dx
 or     dx, 0x90909090[eax]
 or     ax, 0x9090
 pushw  cs
 adc    0x90909090[eax], dx
 adc    dx, 0x90909090[eax]
 adc    ax, 0x9090
 pushw  ss
 popw   ss
 sbb    0x90909090[eax], dx
 sbb    dx, 0x90909090[eax]
 sbb    ax, 0x9090
 pushw  ds
 popw   ds
 and    0x90909090[eax], dx
 and    dx, 0x90909090[eax]
 and    ax, 0x9090
 sub    0x90909090[eax], dx
 sub    dx, 0x90909090[eax]
 sub    ax, 0x9090
 xor    0x90909090[eax], dx
 xor    dx, 0x90909090[eax]
 xor    ax, 0x9090
 cmp    0x90909090[eax], dx
 cmp    dx, 0x90909090[eax]
 cmp    ax, 0x9090
 inc    ax
 inc    cx
 inc    dx
 inc    bx
 inc    sp
 inc    bp
 inc    si
 inc    di
 dec    ax
 dec    cx
 dec    dx
 dec    bx
 dec    sp
 dec    bp
 dec    si
 dec    di
 push   ax
 push   cx
 push   dx
 push   bx
 push   sp
 push   bp
 push   si
 push   di
 pop    ax
 pop    cx
 pop    dx
 pop    bx
 pop    sp
 pop    bp
 pop    si
 pop    di
 pushaw			# how should we specify a word push all regs?
 popaw			# ditto for popa
 bound  dx, 0x90909090[eax]
 pushw  0x9090
 imul   dx, 0x90909090[eax], 0x9090
 pushw  0xffffff90
 imul   dx, 0x90909090[eax], 0xffffff90
 ins    word ptr es:[edi], dx
 outs   dx, word ptr ds:[esi]
 adc    word ptr 0x90909090[eax], 0x9090
 adc    word ptr 0x90909090[eax], 0xffffff90
 test   0x90909090[eax], dx
 xchg   0x90909090[eax], dx
 mov    0x90909090[eax], dx
 mov    dx, 0x90909090[eax]
 mov    word ptr 0x90909090[eax], ss
 lea    dx, 0x90909090[eax]
 pop    word ptr 0x90909090[eax]
 xchg   cx, ax
 xchg   dx, ax
 xchg   bx, ax
 xchg   sp, ax
 xchg   bp, ax
 xchg   si, ax
 xchg   di, ax
 cbw
 cwd
 callw  0x9090:0x9090
 pushfw
 popfw
 mov    ax, FLAT:[0x90909090]
 mov    FLAT:[0x90909090], ax
 movs   word ptr es:[edi], word ptr ds:[esi]
 cmps   word ptr ds:[esi], word ptr es:[edi]
 test   ax, 0x9090
 stos   word ptr es:[edi], ax
 lods   ax, word ptr ds:[esi]
 scas   ax, word ptr es:[edi]
 mov    ax, 0x9090
 mov    cx, 0x9090
 mov    dx, 0x9090
 mov    bx, 0x9090
 mov    sp, 0x9090
 mov    bp, 0x9090
 mov    si, 0x9090
 mov    di, 0x9090
 rcl    word ptr 0x90909090[eax], 0x90
 retw   0x9090
 retw
 les    dx, 0x90909090[eax]
 lds    dx, 0x90909090[eax]
 mov    word ptr 0x90909090[eax], 0x9090
 enterw 0x9090, 0x90
 leavew
 retfw  0x9090
 retfw
 lretw  0x9090
 lretw
 iretw
 rcl    word ptr 0x90909090[eax]
 rcl    word ptr 0x90909090[eax], cl
 in     ax, 0x90
 out    0x90, ax
 callw  .+3+0x9090
 jmpw   0x9090:0x9090
 in     ax, dx
 out    dx, ax
 not    word ptr 0x90909090[eax]
 call   word ptr 0x90909090[eax]
 lar    dx, 0x90909090[eax]
 lsl    dx, 0x90909090[eax]
 cmovo  dx, 0x90909090[eax]
 cmovno dx, 0x90909090[eax]
 cmovb  dx, 0x90909090[eax]
 cmovae dx, 0x90909090[eax]
 cmove  dx, 0x90909090[eax]
 cmovne dx, 0x90909090[eax]
 cmovbe dx, 0x90909090[eax]
 cmova  dx, 0x90909090[eax]
 cmovs  dx, 0x90909090[eax]
 cmovns dx, 0x90909090[eax]
 cmovp  dx, 0x90909090[eax]
 cmovnp dx, 0x90909090[eax]
 cmovl  dx, 0x90909090[eax]
 cmovge dx, 0x90909090[eax]
 cmovle dx, 0x90909090[eax]
 cmovg  dx, 0x90909090[eax]
 pushw  fs
 popw   fs
 bt     0x90909090[eax], dx
 shld   0x90909090[eax], dx, 0x90
 shld   0x90909090[eax], dx, cl
 pushw  gs
 popw   gs
 bts    0x90909090[eax], dx
 shrd   0x90909090[eax], dx, 0x90
 shrd   0x90909090[eax], dx, cl
 imul   dx, 0x90909090[eax]
 cmpxchg 0x90909090[eax], dx
 lss    dx, 0x90909090[eax]
 btr    0x90909090[eax], dx
 lfs    dx, 0x90909090[eax]
 lgs    dx, 0x90909090[eax]
 movzx  dx, byte ptr 0x90909090[eax]
 btc    0x90909090[eax], dx
 bsf    dx, 0x90909090[eax]
 bsr    dx, 0x90909090[eax]
 movsx  dx, byte ptr 0x90909090[eax]
 xadd   0x90909090[eax], dx

gs_foo:
 ret

short_foo:
 ret

bar:
 call	gs_foo
 call	short_foo
 fstp   QWORD PTR [eax+edx*8]
 mov	ecx, OFFSET FLAT:xyz
 mov	BYTE PTR [esi+edx], al
 mov	BYTE PTR [edx+esi], al
 mov	BYTE PTR [edx*2+esi], al
 mov	BYTE PTR [esi+edx*2], al
 jmp	short rot5
 ins    byte ptr es:[edi], dx
 xadd   0x90909090[eax], dx
 and	%eax, -8
rot5:
 mov	%eax, DWORD PTR [%esi+4+%ecx*8]
 ins    BYTE PTR es:[edi], dx
 or     al, 0x90
 or     eax, 0x90909090
 push   cs
 mov	eax, [ebx*2]
 adc    BYTE PTR [eax*4+0x90909090], dl
 das
 jmp    0x9090:0x90909090
 movs   WORD PTR es:[edi], WORD PTR ds:[esi]
 jo     .+2-0x70

1:
 jne	1b
 movq	mm6, [QWORD PTR .LC5+40]		 
 add	edi, dword ptr [ebx+8*eax]
 movd	mm0, dword ptr [ebx+8*eax+4]
 add	edi, dword ptr [ebx+8*ecx+((4095+1)*8)]
 movd	mm1, dword ptr [ebx+8*ecx+((4095+1)*8)+4]
 movd	mm2, dword ptr [ebx+8*eax+(2*(4095+1)*8)+4]
 add	edi, dword ptr [ebx+8*eax+(2*(4095+1)*8)]
 mov	ax,  word ptr [ebx+2*eax]
 mov	cx,  word ptr [ebx+2*ecx+((4095+1)*2)]
 mov	ax,  word ptr [ebx+2*eax+(2*(4095+1)*2)]
 jmp 	eax
 jmp	[eax]
 jmp	FLAT:[bar]
 jmp	bar

	# Check arithmetic operators
	mov	%eax,(( 17 ) + 1) 
	and	%eax,~(1 << ( 18 )) 
	and	%eax,0xFFFBFFFF
	mov	%al, (( 0x4711  ) & 0xff) 
	mov	%al, 0x11
	mov	%bl, ((( 0x4711  ) >> 8) & 0xff) 
	mov	%bl, 0x47

 shrd   eax, edx, cl
 shld   eax, edx, cl

fadd
fadd	st(3)
fadd	st,st(3)
fadd	st(3),st
fadd   DWORD PTR [ebx]
fadd   QWORD PTR [ebx]
faddp
faddp	st(3)
faddp	st(3),st
fdiv
fdiv   st(3)
fdiv   st,st(3)
fdiv   st(3),st
fdiv   DWORD PTR [ebx]
fdiv   QWORD PTR [ebx]
fdivp
fdivp  st(3)
fdivp  st(3),st
fdivp  st,st(3)
fdivr
fdivr  st(3)
fdivr  st,st(3)
fdivr  st(3),st
fdivr  DWORD PTR [ebx]
fdivr  QWORD PTR [ebx]
fdivrp
fdivrp st(3)
fdivrp st(3),st
fdivrp st,st(3)
fmul
fmul	st(3)
fmul	st,st(3)
fmul	st(3),st
fmul   DWORD PTR [ebx]
fmul   QWORD PTR [ebx]
fmulp
fmulp	st(3)
fmulp	st(3),st
fsub
fsubr
fsub   st(3)
fsub   st,st(3)
fsub   st(3),st
fsub   DWORD PTR [ebx]
fsub   QWORD PTR [ebx]
fsubp
fsubp  st(3)
fsubp  st,st(3)
fsubp  st(3),st
fsubr  st(3)
fsubr  st,st(3)
fsubr  st(3),st
fsubr  DWORD PTR [ebx]
fsubr  QWORD PTR [ebx]
fsubrp
fsubrp st(3)
fsubrp st(3),st
fsubrp st,st(3)

fidivr  word ptr [ebx]
fidivr  dword ptr [ebx]

 cmovpe  edx, 0x90909090[eax]
 cmovpo edx, 0x90909090[eax]
 cmovpe  dx, 0x90909090[eax]
 cmovpo dx, 0x90909090[eax]
@


1.20
log
@gas/testsuite/

2008-11-03  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/intel.s: Add tests for cmovpe and cmovpo.
	* gas/i386/opcode.s: Likewise.

	* gas/i386/intel.d: Updated.
	* gas/i386/opcode.d: Likewise.
	* gas/i386/opcode-intel.d: Likewise.
	* gas/i386/opcode-suffix.d: Likewise.

opcodes/

2008-11-03  H.J. Lu  <hongjiu.lu@@intel.com>

	* i386-opc.tbl: Add cmovpe and cmovpo.
	* i386-tbl.h: Regenerated.
@
text
@d148 1
a148 1
 call   0x9090,0x90909090
d154 4
a157 4
 mov    al, [0x90909090]
 mov    eax, [0x90909090]
 mov    [0x90909090], al
 mov    [0x90909090], eax
d229 1
a229 1
 jmp    0x9090,0x90909090
d491 1
a491 1
 callw  0x9090,0x9090
d494 2
a495 2
 mov    ax, [0x90909090]
 mov    [0x90909090], ax
d528 1
a528 1
 jmpw   0x9090,0x9090
d602 1
a602 1
 jmp    0x9090,0x90909090
d620 1
a620 1
 jmp	[bar]
@


1.19
log
@gas/testsuite/
2008-08-28  Jan Beulich  <jbeulich@@novell.com>

	* gas/i386/intel.s: Add retf.
	* gas/i386/intel.{d,e}: Adjust.
	* gas/i386/opcode-intel.d: Replace lret with retf.

opcodes/
2008-08-28  Jan Beulich  <jbeulich@@novell.com>

	* i386-dis.c (dis386): Adjust far return mnemonics.
	* i386-opc.tbl: Add retf.
	* i386-tbl.h: Re-generate.
@
text
@d696 5
@


1.18
log
@gas/testsuite/

2008-08-27  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/intel.s: Add tests for fidivr.

	* gas/i386/intel.d: Updated.

opcodes/

2008-08-27  H.J. Lu  <hongjiu.lu@@intel.com>

	* i386-opc.tbl: Correct fidivr operand size.

	* i386-tbl.h: Regenerated.
@
text
@d196 2
d518 2
@


1.17
log
@gas/testsuite/

2008-01-12  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* gas/i386/i386.s: Add tests for fnstsw and fstsw.
	* gas/i386/inval.s: Likewise.
	* gas/i386/x86_64.s: Likewise.

	* gas/i386/intel.s: Use word instead of dword on ss.

	* gas/i386/x86-64-inval.s: Add tests for fnstsw, fstsw, in
	and out.

	* gas/i386/prefix.s: Remove invalid fstsw.

	* gas/i386/inval.l: Updated.
	* gas/i386/intelbad.l: Likewise.
	* gas/i386/i386.d: Likewise.
	* gas/i386/x86_64.d: Likewise.
	* gas/i386/x86-64-inval.l: Likewise.
	* gas/i386/prefix.d: Updated.

gas/

2008-01-12  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* config/tc-i386.c (_i386_insn): Update comment.
	(operand_type_match): Also clear unspecified.
	(operand_type_register_match): Likewise.
	(parse_operands): Initialize unspecified.
	(i386_intel_operand): Likewise.
	(match_template): Check memory and accumulator operand size.
	(i386_att_operand): Clear unspecified on register operand.
	(intel_e11): Likewise.
	(intel_e09): Set operand size and clean unspecified for
	"XXX PTR".

opcodes/

2008-01-12  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* i386-gen.c (operand_type_init): Add Dword to
	OPERAND_TYPE_ACC32.  Add Qword to OPERAND_TYPE_ACC64.
	(opcode_modifiers): Remove CheckSize, Byte, Word, Dword,
	Qword and Xmmword.
	(operand_types): Add Byte, Word, Dword, Fword, Qword, Tbyte,
	Xmmword, Unspecified and Anysize.
	(set_bitfield): Make Mmword an alias of Qword.  Make Oword
	an alias of Xmmword.

	* i386-opc.h (CheckSize): Removed.
	(Byte): Updated.
	(Word): Likewise.
	(Dword): Likewise.
	(Qword): Likewise.
	(Xmmword): Likewise.
	(FWait): Updated.
	(OTMax): Likewise.
	(i386_opcode_modifier): Remove checksize, byte, word, dword,
	qword and xmmword.
	(Fword): New.
	(TBYTE): Likewise.
	(Unspecified): Likewise.
	(Anysize): Likewise.
	(i386_operand_type): Add byte, word, dword, fword, qword,
	tbyte xmmword, unspecified and anysize.

	* i386-opc.tbl: Updated to use Byte, Word, Dword, Fword, Qword,
	Tbyte, Xmmword, Unspecified and Anysize.

	* i386-reg.tbl: Add size for accumulator.

	* i386-init.h: Regenerated.
	* i386-tbl.h: Likewise.
@
text
@d689 3
@


1.16
log
@gas/

2008-01-05  H.J. Lu  <hongjiu.lu@@intel.com>

	* doc/c-i386.texi: Update .att_mnemonic and .intel_mnemonic.

	* config/tc-i386.c (set_intel_mnemonic): Set intel_mnemonic
	only.
	(md_assemble): Remove Intel mode workaround.
	(match_template): Check support for old gcc, AT&T mnemonic
	and Intel Syntax.
	(md_parse_option): Don't set intel_mnemonic to 0 for
	OPTION_MOLD_GCC.

gas/testsuite/

2008-01-05  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/intel.s: Add tests for fadd, faddp, fdiv, fdivp,
	fdivr, fdivrp, fmul, fmulp, fsub, fsubp, fsubr and fsubrp.

	* gas/i386/intel.d: Updated.
	* gas/i386/intel.e: Likewise.

opcodes/

2008-01-05  H.J. Lu  <hongjiu.lu@@intel.com>

	* i386-gen.c (opcode_modifiers): Rename IntelMnemonic to
	ATTSyntax.

	* i386-opc.h (IntelMnemonic): Renamed to ..
	(ATTSyntax): This
	(Opcode_Modifier_Max): Updated.
	(i386_opcode_modifier): Remove intelmnemonic. Add attsyntax
	and intelsyntax.

	* i386-opc.tbl: Remove IntelMnemonic and update with ATTSyntax
	on fsub, fubp, fsubr, fsubrp, div, fdivp, fdivr and fdivrp.
	* i386-tbl.h: Regenerated.
@
text
@d134 1
a134 1
 mov    dword ptr 0x90909090[eax], ss
d136 1
a136 1
 mov    ss, dword ptr 0x90909090[eax]
@


1.15
log
@gas/

2008-01-02  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* config/tc-i386.c (match_template): Handle XMMWORD_MNEM_SUFFIX.
	Check memory size in Intel mode.
	(process_suffix): Handle XMMWORD_MNEM_SUFFIX.
	(intel_e09): Likewise.

	* config/tc-i386.h (XMMWORD_MNEM_SUFFIX): New.

gas/testsuite/

2008-01-02  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* gas/i386/intel.s: Use QWORD on movq instead of DWORD.

	* gas/i386/inval.s: Add tests for movq.
	* gas/i386/x86-64-inval.s: Likewise.

	* gas/i386/inval.l: Updated.
	* gas/i386/x86-64-inval.l: Likewise.

opcodes/

2008-01-02  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* i386-gen.c (opcode_modifiers): Add No_xSuf, CheckSize,
	Byte, Word, Dword, QWord and Xmmword.

	* i386-opc.h (No_xSuf): New.
	(CheckSize): Likewise.
	(Byte): Likewise.
	(Word): Likewise.
	(Dword): Likewise.
	(QWord): Likewise.
	(Xmmword): Likewise.
	(FWait): Updated.
	(i386_opcode_modifier): Add No_xSuf, CheckSize, Byte, Word,
	Dword, QWord and Xmmword.

	* i386-opc.tbl: Add CheckSize|QWord to movq if IgnoreSize is
	used.
	* i386-tbl.h: Regenerated.
@
text
@d631 58
a688 1
 .p2align 4,0
@


1.14
log
@gas/

2006-12-29  H.J. Lu  <hongjiu.lu@@intel.com>

	* config/tc-i386.c (build_modrm_byte): Handle shift count
	register with 3 operands.

gas/testsuite/

2006-12-29  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/intel.s: Add tests for "shrd %cl,%edx,%eax" and
	"shld %cl,%edx,%eax".
	* gas/i386/opcode.s: Likewise.

	* gas/i386/intel.d: Updated.
	* gas/i386/opcode-intel.d: Likewise.
	* gas/i386/opcode-suffix.d: Likewise.
	* gas/i386/opcode.d: Likewise.
@
text
@d604 1
a604 1
 movq	mm6, [DWORD PTR .LC5+40]		 
@


1.13
log
@opcodes/
2006-11-30  Jan Beulich  <jbeulich@@novell.com>

	* i386-dis.c (dis386): Use 'R' and 'O' for cbw/cwd unconditionally.
	(putop): For 'O' suffix, print 'q' in Intel mode, and mark data prefix
	used. For 'R' and 'W' suffix, simplify and fix Intel mode.

gas/testsuite/
2006-11-30  Jan Beulich  <jbeulich@@novell.com>

	* gas/i386/intel.s: Use Intel syntax in Intel syntax test.
	* gas/i386/x86-64-cbw.[sd]: New.
	* gas/i386/x86-64-cbw-intel.d: New.
	* gas/i386/i386.exp: Run new tests.
@
text
@d627 4
a630 1
	
@


1.12
log
@gas/
2005-10-26  Jan Beulich  <jbeulich@@novell.com>

	* config/tc-i386.c (i386_operand): Don't check register prefix here.
	(parse_real_register): Rename from parse_register.
	(parse_register): New.
	(i386_parse_name): New.
	(md_operand): New.
	(intel_e11): Don't tolerate registers in offset expressions anymore.
	(intel_get_token): Don't check register prefix here. Copy the actual
	register token, not the canonical register name.
	* config/tc-i386.h (md_operand): Delete.
	(i386_parse_name): Declare.
	(md_parse_name): Define.

gas/testsuite/
2005-10-26  Jan Beulich  <jbeulich@@novell.com>

	* gas/i386/intel.s: Replace register used in offset expression.
	* gas/i386/intel.e: Adjust.
	* gas/i386/intelbad.l: Adjust.
	* gas/i386/equ.[sed]: New.
	* gas/i386/i386.exp: Run new test.
@
text
@d487 2
a488 2
 cbtw
 cwtd
@


1.11
log
@gas/
2005-08-26  Jan Beulich  <jbeulich@@novell.com>

	* config/tc-i386.c (intel_e09): Set JumpAbsolute when seeing a PTR-
	qualified operand of a branch.
	(intel_bracket_expr): Set JumpAbsolute here...
	(intel_e11): ... rather than here.

gas/testsuite/
2005-08-26  Jan Beulich  <jbeulich@@novell.com>

	* gas/i386/intel.s: Adjust.
	* gas/i386/intelok.s: Add two more insns.
	* gas/i386/intelok.d: Adjust.
@
text
@d580 1
a580 1
 mov	ecx, OFFSET FLAT:ss
@


1.10
log
@Add support for  & | << >> ~  arithmetic operators in Intel mode
@
text
@d523 1
a523 1
 call   word ptr .+3+0x9090
@


1.9
log
@2001-03-18  H.J. Lu  <hjl@@gnu.org>

	* gas/i386/intel.s: Move PIC code to ...
	* gas/i386/intelpic.s: New. Here.
	* gas/i386/intel.d: Updated.
	* gas/i386/intelpic.d: New.

	* gas/i386/i386.exp: Check PIC code in Intel syntax for ELF
	targets only.
@
text
@d618 10
@


1.8
log
@2000-12-22  H.J. Lu  <hjl@@gnu.org>

	* gas/i386/intel.s: Replace "nop" with ".p2align 4,0".
	* gas/i386/intel.d: Updated.
@
text
@a578 1
 lea	eax, .LC0@@GOTOFF[ebx]
a617 1
 mov	eax, DWORD PTR gs_foo@@GOT[ebx]
@


1.8.2.1
log
@Merge from mainline.
@
text
@d579 1
d619 1
@


1.7
log
@2000-12-11  H.J. Lu  <hjl@@gnu.org>

	* gas/i386/intel.d: Adjusted for the a.out assembler.
	* gas/i386/intel.s: Likewise.
@
text
@d620 1
a620 1
 nop
@


1.6
log
@2000-11-30  Diego Novillo  <dnovillo@@redhat.com>

	* tc-i386.c (md_assemble): Swap i.disp_relocs when using intel
	syntax.

2000-11-30  Diego Novillo  <dnovillo@@redhat.com>

	* intel.s, intel.d: New test for @@GOT references.
@
text
@d619 1
a620 3
 nop
 nop
 mov	eax, DWORD PTR gs_foo@@GOT[ebx]
@


1.5
log
@2000-11-20  H.J. Lu  <hjl@@gnu.org>

	* gas/i386/intel.d: Add 3 "nop"s for the a.out assembler.
	* gas/i386/intel.s: Likewise.
@
text
@d622 1
@


1.4
log
@2000-10-24  Diego Novillo  <dnovillo@@cygnus.com>

	* tc-i386.c (i386_operand_modifier): Remove.
	(build_displacement_string): Remove.
	(i386_parse_seg): Remove.
	(i386_intel_memory_operand): Remove.
	(i386_intel_operand): Re-write using recursive descent parser based
	on MASM documentation.
	(struct intel_parser_s): New structure.
	(intel_parser): New static variable.
	(struct intel_token): New structure.
	(cur_token, prev_token): New static variables.
	(T_NIL): Define.
	(T_CONST): Define.
	(T_REG): Define.
	(T_BYTE): Define.
	(T_WORD): Define.
	(T_DWORD): Define.
	(T_QWORD): Define.
	(T_XWORD): Define.
	(T_SHORT): Define.
	(T_OFFSET): Define.
	(T_PTR): Define.
	(T_ID): Define.
	(intel_match_token): New function.
	(intel_get_token): New function.
	(intel_putback_token): New function.
	(intel_expr): New function.
	(intel_e05): New function.
	(intel_e05_1): New function.
	(intel_e06): New function.
	(intel_e06_1): New function.
	(intel_e09): New function.
	(intel_e09_1): New function.
	(intel_e10): New function.
	(intel_e10_1): New function.
	(intel_e11): New function.

2000-10-24  Diego Novillo  <dnovillo@@cygnus.com>

	* intel.s, intel.d: Add new tests for intel syntax.
@
text
@d619 3
@


1.3
log
@gas:

2000-10-15  Diego Novillo  <dnovillo@@cygnus.com>

	* config/tc-i386.c (i386_operand_modifier): Only match
	modifiers SHORT and FLAT if they are followed by a space.
	(parse_register): When `allow_naked_reg' is set, do not confuse
	identifiers that start with a register name with a register.

gas/testsuite:

2000-10-15  Diego Novillo  <dnovillo@@cygnus.com>

	* intel.s, intel.d: Add new tests for naked registers using intel
	syntax.
@
text
@d579 40
@


1.2
log
@Fix silly thinko in gas/i386/intel.s  Mention i386.exp in ChangeLog
@
text
@d569 10
@


1.1
log
@Extend the i386 gas testsuite to do some tests for intel_syntax.  Fix all
the errors exposed by this addition.  These were intel mode
"fi... word ptr", "fi... dword ptr", "jmp Imm seg, Imm offset", "out dx,al".
The failure with intel "out dx,al" was also present in att "out al,dx".
Extend testsuite to catch this case too.
@
text
@d467 2
a468 2
 pushw  0xff90
 imul   dx, 0x90909090[eax], 0xff90
d472 1
a472 1
 adc    word ptr 0x90909090[eax], 0xff90
@

