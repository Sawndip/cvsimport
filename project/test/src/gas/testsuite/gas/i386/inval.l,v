head	1.9;
access;
symbols
	binutils-2_24-branch:1.9.0.2
	binutils-2_24-branchpoint:1.9
	binutils-2_21_1:1.8
	binutils-2_23_2:1.8
	binutils-2_23_1:1.8
	binutils-2_23:1.8
	binutils-2_23-branch:1.8.0.18
	binutils-2_23-branchpoint:1.8
	binutils-2_22_branch:1.8.0.16
	binutils-2_22:1.8
	binutils-2_22-branch:1.8.0.14
	binutils-2_22-branchpoint:1.8
	binutils-2_21:1.8
	binutils-2_21-branch:1.8.0.12
	binutils-2_21-branchpoint:1.8
	binutils-2_20_1:1.8
	binutils-2_20:1.8
	binutils-arc-20081103-branch:1.8.0.10
	binutils-arc-20081103-branchpoint:1.8
	binutils-2_20-branch:1.8.0.8
	binutils-2_20-branchpoint:1.8
	dje-cgen-play1-branch:1.8.0.6
	dje-cgen-play1-branchpoint:1.8
	arc-20081103-branch:1.8.0.4
	arc-20081103-branchpoint:1.8
	binutils-2_19_1:1.8
	binutils-2_19:1.8
	binutils-2_19-branch:1.8.0.2
	binutils-2_19-branchpoint:1.8
	binutils-2_18:1.3
	binutils-2_18-branch:1.3.0.2
	binutils-2_18-branchpoint:1.3
	binutils-csl-coldfire-4_1-32:1.1.1.1
	binutils-csl-sourcerygxx-4_1-32:1.1.1.1
	binutils-csl-innovasic-fido-3_4_4-33:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-32:1.1.1.1
	binutils-csl-coldfire-4_1-30:1.1.1.1
	binutils-csl-sourcerygxx-4_1-30:1.1.1.1
	binutils-csl-coldfire-4_1-28:1.1.1.1
	binutils-csl-sourcerygxx-4_1-29:1.1.1.1
	binutils-csl-sourcerygxx-4_1-28:1.1.1.1
	binutils-csl-arm-2006q3-27:1.1.1.1
	binutils-csl-sourcerygxx-4_1-27:1.1.1.1
	binutils-csl-arm-2006q3-26:1.1.1.1
	binutils-csl-sourcerygxx-4_1-26:1.1.1.1
	binutils-csl-sourcerygxx-4_1-25:1.1.1.1
	binutils-csl-sourcerygxx-4_1-24:1.1.1.1
	binutils-csl-sourcerygxx-4_1-23:1.1.1.1
	binutils-csl-sourcerygxx-4_1-21:1.1.1.1
	binutils-csl-arm-2006q3-21:1.1.1.1
	binutils-csl-sourcerygxx-4_1-22:1.1.1.1
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.1.1.1
	binutils-csl-sourcerygxx-4_1-20:1.1.1.1
	binutils-csl-arm-2006q3-19:1.1.1.1
	binutils-csl-sourcerygxx-4_1-19:1.1.1.1
	binutils-csl-sourcerygxx-4_1-18:1.1.1.1
	binutils-csl-renesas-4_1-9:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-25:1.1.1.1
	binutils-csl-renesas-4_1-8:1.1.1.1
	binutils-csl-renesas-4_1-7:1.1.1.1
	binutils-csl-renesas-4_1-6:1.1.1.1
	binutils-csl-sourcerygxx-4_1-17:1.1.1.1
	binutils-csl-sourcerygxx-4_1-14:1.1.1.1
	binutils-csl-sourcerygxx-4_1-15:1.1.1.1
	binutils-csl-sourcerygxx-4_1-13:1.1.1.1
	binutils-2_17:1.1.1.1
	binutils-csl-sourcerygxx-4_1-12:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-21:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-24:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-23:1.1.1.1
	binutils-csl-sourcerygxx-4_1-9:1.1.1.1
	binutils-csl-sourcerygxx-4_1-8:1.1.1.1
	binutils-csl-sourcerygxx-4_1-7:1.1.1.1
	binutils-csl-arm-2006q1-6:1.1.1.1
	binutils-csl-sourcerygxx-4_1-6:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-22:1.1.1.1
	binutils-csl-coldfire-4_1-11:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-19:1.1.1.1
	binutils-csl-coldfire-4_1-10:1.1.1.1
	binutils-csl-sourcerygxx-4_1-5:1.1.1.1
	binutils-csl-sourcerygxx-4_1-4:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-21:1.1.1.1
	binutils-csl-morpho-4_1-4:1.1.1.1
	binutils-csl-sourcerygxx-3_4_4-17:1.1.1.1
	binutils-csl-wrs-linux-3_4_4-20:1.1.1.1
	binutils-2_17-branch:1.1.1.1.0.26
	binutils-2_17-branchpoint:1.1.1.1
	binutils-csl-2_17-branch:1.1.1.1.0.24
	binutils-csl-2_17-branchpoint:1.1.1.1
	binutils-csl-gxxpro-3_4-branch:1.1.1.1.0.22
	binutils-csl-gxxpro-3_4-branchpoint:1.1.1.1
	binutils-2_16_1:1.1.1.1
	binutils-csl-arm-2005q1b:1.1.1.1
	binutils-2_16:1.1.1.1
	binutils-csl-arm-2005q1a:1.1.1.1
	binutils-csl-arm-2005q1-branch:1.1.1.1.0.20
	binutils-csl-arm-2005q1-branchpoint:1.1.1.1
	binutils-2_16-branch:1.1.1.1.0.18
	binutils-2_16-branchpoint:1.1.1.1
	csl-arm-2004-q3d:1.1.1.1
	csl-arm-2004-q3:1.1.1.1
	binutils-2_15:1.1.1.1
	binutils-2_15-branchpoint:1.1.1.1
	csl-arm-2004-q1a:1.1.1.1
	csl-arm-2004-q1:1.1.1.1
	binutils-2_15-branch:1.1.1.1.0.16
	cagney_bfdfile-20040213-branch:1.1.1.1.0.14
	cagney_bfdfile-20040213-branchpoint:1.1.1.1
	cagney_bigcore-20040122-branch:1.1.1.1.0.12
	cagney_bigcore-20040122-branchpoint:1.1.1.1
	csl-arm-2003-q4:1.1.1.1
	binutils-2_14:1.1.1.1
	binutils-2_14-branch:1.1.1.1.0.10
	binutils-2_14-branchpoint:1.1.1.1
	binutils-2_13_2_1:1.1.1.1
	binutils-2_13_2:1.1.1.1
	binutils-2_13_1:1.1.1.1
	binutils-2_13:1.1.1.1
	binutils-2_13-branchpoint:1.1.1.1
	binutils-2_13-branch:1.1.1.1.0.8
	binutils-2_12_1:1.1.1.1
	binutils-2_12:1.1.1.1
	binutils-2_12-branch:1.1.1.1.0.6
	binutils-2_12-branchpoint:1.1.1.1
	cygnus_cvs_20020108_pre:1.1.1.1
	binutils-2_11_2:1.1.1.1
	binutils-2_11_1:1.1.1.1
	binutils-2_11:1.1.1.1
	x86_64versiong3:1.1.1.1
	binutils-2_11-branch:1.1.1.1.0.4
	binutils-2_10_1:1.1.1.1
	binutils-2_10:1.1.1.1
	binutils-2_10-branch:1.1.1.1.0.2
	binutils-2_10-branchpoint:1.1.1.1
	binutils_latest_snapshot:1.9
	repo-unification-2000-02-06:1.1.1.1
	binu_ss_19990721:1.1.1.1
	binu_ss_19990602:1.1.1.1
	binu_ss_19990502:1.1.1.1
	cygnus:1.1.1;
locks; strict;
comment	@ * @;


1.9
date	2013.03.02.01.55.20;	author hjl;	state Exp;
branches;
next	1.8;

1.8
date	2008.01.15.18.50.43;	author hjl;	state Exp;
branches;
next	1.7;

1.7
date	2008.01.15.01.37.55;	author hjl;	state Exp;
branches;
next	1.6;

1.6
date	2008.01.12.16.05.41;	author hjl;	state Exp;
branches;
next	1.5;

1.5
date	2008.01.02.21.43.34;	author hjl;	state Exp;
branches;
next	1.4;

1.4
date	2007.12.31.15.42.21;	author hjl;	state Exp;
branches;
next	1.3;

1.3
date	2006.12.13.18.00.00;	author hjl;	state Exp;
branches;
next	1.2;

1.2
date	2006.04.18.17.52.37;	author hjl;	state Exp;
branches;
next	1.1;

1.1
date	99.05.03.07.28.50;	author rth;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.05.03.07.28.50;	author rth;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Add tests for invalid addresses and riz/eiz

	* gas/i386/inval.s: Add tests for invalid addresses and eiz.

	* gas/i386/x86-64-inval.s: Add tests for invalid addresses and
	riz/eiz.

	* gas/i386/inval.l: Updated.
	* gas/i386/x86-64-inval.l: Likewise.
@
text
@.*: Assembler messages:
.*:4: Error: .*
.*:5: Error: .*
.*:6: Error: .*
.*:7: Error: .*
.*:8: Error: .*
.*:9: Error: .*
.*:10: Error: .*
.*:11: Error: .*
.*:12: Error: .*
.*:13: Error: .*
.*:14: Error: .*
.*:15: Error: .*
.*:16: Error: .*
.*:17: Error: .*
.*:18: Error: .*
.*:19: Error: .*
.*:20: Error: .*
.*:21: Error: .*
.*:22: Error: .*
.*:23: Error: .*
.*:24: Error: .*
.*:25: Error: .*
.*:26: Error: .*
.*:27: Error: .*
.*:28: Error: .*
.*:29: Error: .*
.*:30: Error: .*
.*:31: Error: .*
.*:32: Error: .*
.*:33: Error: .*
.*:34: Error: .*
.*:35: Error: .*
.*:36: Error: .*
.*:37: Error: .*
.*:38: Error: .*
.*:39: Error: .*
.*:40: Error: .*
.*:41: Error: .*
.*:42: Error: .*
.*:43: Error: .*
.*:44: Error: .*
.*:45: Error: .*
.*:46: Error: .*
.*:47: Error: .*
.*:48: Error: .*
.*:49: Error: .*
.*:50: Error: .*
.*:51: Error: .*
.*:52: Error: .*
.*:53: Error: .*
.*:54: Error: .*
.*:55: Error: .*
.*:56: Error: .*
.*:57: Error: .*
.*:59: Error: .*
.*:60: Error: .*
.*:62: Error: .*
.*:63: Error: .*
.*:64: Error: .*
.*:65: Error: .*
.*:68: Error: .*
.*:69: Error: .*
.*:70: Error: .*
.*:71: Error: .*
.*:72: Error: .*
.*:73: Error: .*
.*:74: Error: .*
.*:75: Error: .*
.*:76: Error: .*
.*:77: Error: .*
.*:78: Error: .*
.*:79: Error: .*
.*:80: Error: .*
.*:81: Error: .*
.*:82: Error: .*
.*:83: Error: .*
.*:85: Error: .*
.*:86: Error: .*
.*:87: Error: .*
.*:88: Error: .*
.*:90: Error: .*
GAS LISTING .*


[ 	]*1[ 	]+\.text
[ 	]*2[ 	]+\.allow_index_reg
[ 	]*3[ 	]+\# All the following should be illegal
[ 	]*4[ 	]+mov	\(%dx\),%al
[ 	]*5[ 	]+mov	\(%eax,%esp,2\),%al
[ 	]*6[ 	]+setae	%eax
[ 	]*7[ 	]+pushb	%ds
[ 	]*8[ 	]+popb	%ds
[ 	]*9[ 	]+pushb	%al
[ 	]*10[ 	]+popb	%al
[ 	]*11[ 	]+pushb	%ah
[ 	]*12[ 	]+popb	%ah
[ 	]*13[ 	]+pushb	%ax
[ 	]*14[ 	]+popb	%ax
[ 	]*15[ 	]+pushb	%eax
[ 	]*16[ 	]+popb	%eax
[ 	]*17[ 	]+movb	%ds,%ax
[ 	]*18[ 	]+movb	%ds,%eax
[ 	]*19[ 	]+movb	%ax,%ds
[ 	]*20[ 	]+movb	%eax,%ds
[ 	]*21[ 	]+movdb	%eax,%mm0
[ 	]*22[ 	]+movqb	0,%mm0
[ 	]*23[ 	]+ldsb	0,%eax
[ 	]*24[ 	]+setnew	0
[ 	]*25[ 	]+movdw	%eax,%mm0
[ 	]*26[ 	]+movqw	0,%mm0
[ 	]*27[ 	]+div	%cx,%al
[ 	]*28[ 	]+div	%cl,%ax
[ 	]*29[ 	]+div	%ecx,%al
[ 	]*30[ 	]+imul	10,%bx,%ecx
[ 	]*31[ 	]+imul	10,%bx,%al
[ 	]*32[ 	]+popab
[ 	]*33[ 	]+stil
[ 	]*34[ 	]+aaab
[ 	]*35[ 	]+cwdel
[ 	]*36[ 	]+cwdw
[ 	]*37[ 	]+callww	0
[ 	]*38[ 	]+foo:	jaw	foo
[ 	]*39[ 	]+jcxzw	foo
[ 	]*40[ 	]+jecxzl	foo
[ 	]*41[ 	]+loopb	foo
[ 	]*42[ 	]+xlatw	%es:%bx
[ 	]*43[ 	]+xlatl	%es:%bx
[ 	]*44[ 	]+intl	2
[ 	]*45[ 	]+int3b
[ 	]*46[ 	]+hltb
[ 	]*47[ 	]+fstb	%st\(0\)
[ 	]*48[ 	]+fcompll	28\(%ebp\)
[ 	]*49[ 	]+fldlw	\(%eax\)
[ 	]*50[ 	]+movl	\$%ebx,%eax
[ 	]*51[ 	]+insertq	\$4,\$2,%xmm2,%ebx
[ 	]*52[ 	]+cvtsi2ssq \(%eax\),%xmm1
[ 	]*53[ 	]+cvtsi2sdq \(%eax\),%xmm1
[ 	]*54[ 	]+fnstsw %eax
[ 	]*55[ 	]+fnstsw %al
[ 	]*56[ 	]+fstsw %eax
[ 	]*57[ 	]+fstsw %al
GAS LISTING .*


[ 	]*58[ 	]+
[ 	]*59[ 	]+movnti %ax, \(%eax\)
[ 	]*60[ 	]+movntiw %ax, \(%eax\)
[ 	]*61[ 	]+
[ 	]*62[ 	]+add \(%si,%esi\), %eax
[ 	]*63[ 	]+add \(%esi,%si\), %eax
[ 	]*64[ 	]+add \(%eiz\), %eax
[ 	]*65[ 	]+add \(%eax\), %eiz
[ 	]*66[ 	]+
[ 	]*67[ 	]+\.intel_syntax noprefix
[ 	]*68[ 	]+cvtsi2ss xmm1,QWORD PTR \[eax\]
[ 	]*69[ 	]+cvtsi2sd xmm1,QWORD PTR \[eax\]
[ 	]*70[ 	]+cvtsi2ssq xmm1,QWORD PTR \[eax\]
[ 	]*71[ 	]+cvtsi2sdq xmm1,QWORD PTR \[eax\]
[ 	]*72[ 	]+movq xmm1, XMMWORD PTR \[esp\]
[ 	]*73[ 	]+movq xmm1, DWORD PTR \[esp\]
[ 	]*74[ 	]+movq xmm1, WORD PTR \[esp\]
[ 	]*75[ 	]+movq xmm1, BYTE PTR \[esp\]
[ 	]*76[ 	]+movq XMMWORD PTR \[esp\],xmm1
[ 	]*77[ 	]+movq DWORD PTR \[esp\],xmm1
[ 	]*78[ 	]+movq WORD PTR \[esp\],xmm1
[ 	]*79[ 	]+movq BYTE PTR \[esp\],xmm1
[ 	]*80[ 	]+fnstsw eax
[ 	]*81[ 	]+fnstsw al
[ 	]*82[ 	]+fstsw eax
[ 	]*83[ 	]+fstsw al
[ 	]*84[ 	]+
[ 	]*85[ 	]+movsx ax, \[eax\]
[ 	]*86[ 	]+movsx eax, \[eax\]
[ 	]*87[ 	]+movzx ax, \[eax\]
[ 	]*88[ 	]+movzx eax, \[eax\]
[ 	]*89[ 	]+
[ 	]*90[ 	]+movnti word ptr \[eax\], ax
@


1.8
log
@gas/

2008-01-15  H.J. Lu  <hongjiu.lu@@intel.com>

	* config/tc-i386.c (md_assemble): Also zap movzx and movsx
	suffix for AT&T syntax.

gas/testsuite/

2008-01-15  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/i386.s: Add more tests for movsx and movzx.
	* gas/i386/x86_64.s: Likewise.

	* gas/i386/inval.s: Remove tests for movsxw and movzxw.

	* gas/i386/x86-64-inval.s: Remove tests for movsxb, movsxw,
	movsxl, movzxb and movzxw.

	* gas/i386/i386.d: Updated.
	* gas/i386/inval.l: Likewise.
	* gas/i386/x86_64.d: Likewise.
	* gas/i386/x86-64-inval.l: Likewise.

opcodes/

2008-01-15  H.J. Lu  <hongjiu.lu@@intel.com>

	* i386-opc.tbl: Put back 16bit movsx/movzx for AT&T syntax.
	* i386-tbl.h: Regenerated.
@
text
@a1 1
.*:3: Error: .*
d55 1
a55 1
.*:58: Error: .*
d57 1
a61 2
.*:66: Error: .*
.*:67: Error: .*
d72 1
d77 6
a82 1
.*:84: Error: .*
d87 56
a142 56
[ 	]*2[ 	]+\# All the following should be illegal
[ 	]*3[ 	]+mov	\(%dx\),%al
[ 	]*4[ 	]+mov	\(%eax,%esp,2\),%al
[ 	]*5[ 	]+setae	%eax
[ 	]*6[ 	]+pushb	%ds
[ 	]*7[ 	]+popb	%ds
[ 	]*8[ 	]+pushb	%al
[ 	]*9[ 	]+popb	%al
[ 	]*10[ 	]+pushb	%ah
[ 	]*11[ 	]+popb	%ah
[ 	]*12[ 	]+pushb	%ax
[ 	]*13[ 	]+popb	%ax
[ 	]*14[ 	]+pushb	%eax
[ 	]*15[ 	]+popb	%eax
[ 	]*16[ 	]+movb	%ds,%ax
[ 	]*17[ 	]+movb	%ds,%eax
[ 	]*18[ 	]+movb	%ax,%ds
[ 	]*19[ 	]+movb	%eax,%ds
[ 	]*20[ 	]+movdb	%eax,%mm0
[ 	]*21[ 	]+movqb	0,%mm0
[ 	]*22[ 	]+ldsb	0,%eax
[ 	]*23[ 	]+setnew	0
[ 	]*24[ 	]+movdw	%eax,%mm0
[ 	]*25[ 	]+movqw	0,%mm0
[ 	]*26[ 	]+div	%cx,%al
[ 	]*27[ 	]+div	%cl,%ax
[ 	]*28[ 	]+div	%ecx,%al
[ 	]*29[ 	]+imul	10,%bx,%ecx
[ 	]*30[ 	]+imul	10,%bx,%al
[ 	]*31[ 	]+popab
[ 	]*32[ 	]+stil
[ 	]*33[ 	]+aaab
[ 	]*34[ 	]+cwdel
[ 	]*35[ 	]+cwdw
[ 	]*36[ 	]+callww	0
[ 	]*37[ 	]+foo:	jaw	foo
[ 	]*38[ 	]+jcxzw	foo
[ 	]*39[ 	]+jecxzl	foo
[ 	]*40[ 	]+loopb	foo
[ 	]*41[ 	]+xlatw	%es:%bx
[ 	]*42[ 	]+xlatl	%es:%bx
[ 	]*43[ 	]+intl	2
[ 	]*44[ 	]+int3b
[ 	]*45[ 	]+hltb
[ 	]*46[ 	]+fstb	%st\(0\)
[ 	]*47[ 	]+fcompll	28\(%ebp\)
[ 	]*48[ 	]+fldlw	\(%eax\)
[ 	]*49[ 	]+movl	\$%ebx,%eax
[ 	]*50[ 	]+insertq	\$4,\$2,%xmm2,%ebx
[ 	]*51[ 	]+cvtsi2ssq \(%eax\),%xmm1
[ 	]*52[ 	]+cvtsi2sdq \(%eax\),%xmm1
[ 	]*53[ 	]+fnstsw %eax
[ 	]*54[ 	]+fnstsw %al
[ 	]*55[ 	]+fstsw %eax
[ 	]*56[ 	]+fstsw %al
[ 	]*57[ 	]+
d146 33
a178 27
[ 	]*58[ 	]+movnti %ax, \(%eax\)
[ 	]*59[ 	]+movntiw %ax, \(%eax\)
[ 	]*60[ 	]+
[ 	]*61[ 	]+\.intel_syntax noprefix
[ 	]*62[ 	]+cvtsi2ss xmm1,QWORD PTR \[eax\]
[ 	]*63[ 	]+cvtsi2sd xmm1,QWORD PTR \[eax\]
[ 	]*64[ 	]+cvtsi2ssq xmm1,QWORD PTR \[eax\]
[ 	]*65[ 	]+cvtsi2sdq xmm1,QWORD PTR \[eax\]
[ 	]*66[ 	]+movq xmm1, XMMWORD PTR \[esp\]
[ 	]*67[ 	]+movq xmm1, DWORD PTR \[esp\]
[ 	]*68[ 	]+movq xmm1, WORD PTR \[esp\]
[ 	]*69[ 	]+movq xmm1, BYTE PTR \[esp\]
[ 	]*70[ 	]+movq XMMWORD PTR \[esp\],xmm1
[ 	]*71[ 	]+movq DWORD PTR \[esp\],xmm1
[ 	]*72[ 	]+movq WORD PTR \[esp\],xmm1
[ 	]*73[ 	]+movq BYTE PTR \[esp\],xmm1
[ 	]*74[ 	]+fnstsw eax
[ 	]*75[ 	]+fnstsw al
[ 	]*76[ 	]+fstsw eax
[ 	]*77[ 	]+fstsw al
[ 	]*78[ 	]+
[ 	]*79[ 	]+movsx ax, \[eax\]
[ 	]*80[ 	]+movsx eax, \[eax\]
[ 	]*81[ 	]+movzx ax, \[eax\]
[ 	]*82[ 	]+movzx eax, \[eax\]
[ 	]*83[ 	]+
[ 	]*84[ 	]+movnti word ptr \[eax\], ax
@


1.7
log
@gas/

2008-01-14  H.J. Lu  <hongjiu.lu@@intel.com>

	* config/tc-i386.c (match_reg_size): New.
	(match_mem_size): Likewise.
	(operand_size_match): Likewise.
	(operand_type_match): Also clear all size fields.
	(match_template): Skip Intel syntax when in AT&T syntax.
	Call operand_size_match to check operand size.
	(i386_att_operand): Set the mem field to 1 for memory
	operand.
	(i386_intel_operand): Likewise.

gas/testsuite/

2008-01-14  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/i386.s: Add tests for movsx, movzx and movnti.
	* gas/i386/inval.s: Likewise.
	* gas/i386/x86_64.s: Likewise.
	* gas/i386/x86-64-inval.s: Likewise.

	* gas/i386/i386.d: Updated.
	* gas/i386/inval.l: Likewise.
	* gas/i386/x86_64.d: Likewise.
	* gas/i386/x86-64-inval.l: Likewise.

opcodes/

2008-01-14  H.J. Lu  <hongjiu.lu@@intel.com>

	* i386-gen.c (opcode_modifiers): Add IntelSyntax.
	(operand_types): Add Mem.

	* i386-opc.h (IntelSyntax): New.
	* i386-opc.h (Mem): New.
	(Byte): Updated.
	(Opcode_Modifier_Max): Updated.
	(i386_opcode_modifier): Add intelsyntax.
	(i386_operand_type): Add mem.

	* i386-opc.tbl: Remove Reg16 from movnti.  Add sizes to more
	instructions.

	* i386-reg.tbl: Add size for accumulator.

	* i386-init.h: Regenerated.
	* i386-tbl.h: Likewise.
@
text
@a57 1
.*:61: Error: .*
d59 2
a73 1
.*:78: Error: .*
d76 1
a77 1
.*:83: Error: .*
a78 2
.*:85: Error: .*
.*:87: Error: .*
d142 2
a143 2
[ 	]*58[ 	]+movsxw \(%eax\),%eax
[ 	]*59[ 	]+movzxw \(%eax\),%eax
d145 24
a168 27
[ 	]*61[ 	]+movnti %ax, \(%eax\)
[ 	]*62[ 	]+movntiw %ax, \(%eax\)
[ 	]*63[ 	]+
[ 	]*64[ 	]+\.intel_syntax noprefix
[ 	]*65[ 	]+cvtsi2ss xmm1,QWORD PTR \[eax\]
[ 	]*66[ 	]+cvtsi2sd xmm1,QWORD PTR \[eax\]
[ 	]*67[ 	]+cvtsi2ssq xmm1,QWORD PTR \[eax\]
[ 	]*68[ 	]+cvtsi2sdq xmm1,QWORD PTR \[eax\]
[ 	]*69[ 	]+movq xmm1, XMMWORD PTR \[esp\]
[ 	]*70[ 	]+movq xmm1, DWORD PTR \[esp\]
[ 	]*71[ 	]+movq xmm1, WORD PTR \[esp\]
[ 	]*72[ 	]+movq xmm1, BYTE PTR \[esp\]
[ 	]*73[ 	]+movq XMMWORD PTR \[esp\],xmm1
[ 	]*74[ 	]+movq DWORD PTR \[esp\],xmm1
[ 	]*75[ 	]+movq WORD PTR \[esp\],xmm1
[ 	]*76[ 	]+movq BYTE PTR \[esp\],xmm1
[ 	]*77[ 	]+fnstsw eax
[ 	]*78[ 	]+fnstsw al
[ 	]*79[ 	]+fstsw eax
[ 	]*80[ 	]+fstsw al
[ 	]*81[ 	]+
[ 	]*82[ 	]+movsx ax, \[eax\]
[ 	]*83[ 	]+movsx eax, \[eax\]
[ 	]*84[ 	]+movzx ax, \[eax\]
[ 	]*85[ 	]+movzx eax, \[eax\]
[ 	]*86[ 	]+
[ 	]*87[ 	]+movnti word ptr \[eax\], ax
@


1.6
log
@gas/testsuite/

2008-01-12  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* gas/i386/i386.s: Add tests for fnstsw and fstsw.
	* gas/i386/inval.s: Likewise.
	* gas/i386/x86_64.s: Likewise.

	* gas/i386/intel.s: Use word instead of dword on ss.

	* gas/i386/x86-64-inval.s: Add tests for fnstsw, fstsw, in
	and out.

	* gas/i386/prefix.s: Remove invalid fstsw.

	* gas/i386/inval.l: Updated.
	* gas/i386/intelbad.l: Likewise.
	* gas/i386/i386.d: Likewise.
	* gas/i386/x86_64.d: Likewise.
	* gas/i386/x86-64-inval.l: Likewise.
	* gas/i386/prefix.d: Updated.

gas/

2008-01-12  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* config/tc-i386.c (_i386_insn): Update comment.
	(operand_type_match): Also clear unspecified.
	(operand_type_register_match): Likewise.
	(parse_operands): Initialize unspecified.
	(i386_intel_operand): Likewise.
	(match_template): Check memory and accumulator operand size.
	(i386_att_operand): Clear unspecified on register operand.
	(intel_e11): Likewise.
	(intel_e09): Set operand size and clean unspecified for
	"XXX PTR".

opcodes/

2008-01-12  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* i386-gen.c (operand_type_init): Add Dword to
	OPERAND_TYPE_ACC32.  Add Qword to OPERAND_TYPE_ACC64.
	(opcode_modifiers): Remove CheckSize, Byte, Word, Dword,
	Qword and Xmmword.
	(operand_types): Add Byte, Word, Dword, Fword, Qword, Tbyte,
	Xmmword, Unspecified and Anysize.
	(set_bitfield): Make Mmword an alias of Qword.  Make Oword
	an alias of Xmmword.

	* i386-opc.h (CheckSize): Removed.
	(Byte): Updated.
	(Word): Likewise.
	(Dword): Likewise.
	(Qword): Likewise.
	(Xmmword): Likewise.
	(FWait): Updated.
	(OTMax): Likewise.
	(i386_opcode_modifier): Remove checksize, byte, word, dword,
	qword and xmmword.
	(Fword): New.
	(TBYTE): Likewise.
	(Unspecified): Likewise.
	(Anysize): Likewise.
	(i386_operand_type): Add byte, word, dword, fword, qword,
	tbyte xmmword, unspecified and anysize.

	* i386-opc.tbl: Updated to use Byte, Word, Dword, Fword, Qword,
	Tbyte, Xmmword, Unspecified and Anysize.

	* i386-reg.tbl: Add size for accumulator.

	* i386-init.h: Regenerated.
	* i386-tbl.h: Likewise.
@
text
@d56 1
a57 1
.*:60: Error: .*
a59 2
.*:63: Error: .*
.*:64: Error: .*
d70 11
d144 30
a173 17
[ 	]*58[ 	]+\.intel_syntax noprefix
[ 	]*59[ 	]+cvtsi2ss xmm1,QWORD PTR \[eax\]
[ 	]*60[ 	]+cvtsi2sd xmm1,QWORD PTR \[eax\]
[ 	]*61[ 	]+cvtsi2ssq xmm1,QWORD PTR \[eax\]
[ 	]*62[ 	]+cvtsi2sdq xmm1,QWORD PTR \[eax\]
[ 	]*63[ 	]+movq xmm1, XMMWORD PTR \[esp\]
[ 	]*64[ 	]+movq xmm1, DWORD PTR \[esp\]
[ 	]*65[ 	]+movq xmm1, WORD PTR \[esp\]
[ 	]*66[ 	]+movq xmm1, BYTE PTR \[esp\]
[ 	]*67[ 	]+movq XMMWORD PTR \[esp\],xmm1
[ 	]*68[ 	]+movq DWORD PTR \[esp\],xmm1
[ 	]*69[ 	]+movq WORD PTR \[esp\],xmm1
[ 	]*70[ 	]+movq BYTE PTR \[esp\],xmm1
[ 	]*71[ 	]+fnstsw eax
[ 	]*72[ 	]+fnstsw al
[ 	]*73[ 	]+fstsw eax
[ 	]*74[ 	]+fstsw al
@


1.5
log
@gas/

2008-01-02  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* config/tc-i386.c (match_template): Handle XMMWORD_MNEM_SUFFIX.
	Check memory size in Intel mode.
	(process_suffix): Handle XMMWORD_MNEM_SUFFIX.
	(intel_e09): Likewise.

	* config/tc-i386.h (XMMWORD_MNEM_SUFFIX): New.

gas/testsuite/

2008-01-02  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* gas/i386/intel.s: Use QWORD on movq instead of DWORD.

	* gas/i386/inval.s: Add tests for movq.
	* gas/i386/x86-64-inval.s: Likewise.

	* gas/i386/inval.l: Updated.
	* gas/i386/x86-64-inval.l: Likewise.

opcodes/

2008-01-02  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/5534
	* i386-gen.c (opcode_modifiers): Add No_xSuf, CheckSize,
	Byte, Word, Dword, QWord and Xmmword.

	* i386-opc.h (No_xSuf): New.
	(CheckSize): Likewise.
	(Byte): Likewise.
	(Word): Likewise.
	(Dword): Likewise.
	(QWord): Likewise.
	(Xmmword): Likewise.
	(FWait): Updated.
	(i386_opcode_modifier): Add No_xSuf, CheckSize, Byte, Word,
	Dword, QWord and Xmmword.

	* i386-opc.tbl: Add CheckSize|QWord to movq if IgnoreSize is
	used.
	* i386-tbl.h: Regenerated.
@
text
@d52 2
a55 2
.*:57: Error: .*
.*:58: Error: .*
d64 8
d127 5
a131 5
[ 	]*53[ 	]+
[ 	]*54[ 	]+\.intel_syntax noprefix
[ 	]*55[ 	]+cvtsi2ss xmm1,QWORD PTR \[eax\]
[ 	]*56[ 	]+cvtsi2sd xmm1,QWORD PTR \[eax\]
[ 	]*57[ 	]+cvtsi2ssq xmm1,QWORD PTR \[eax\]
d135 17
a151 9
[ 	]*58[ 	]+cvtsi2sdq xmm1,QWORD PTR \[eax\]
[ 	]*59[ 	]+movq xmm1, XMMWORD PTR \[esp\]
[ 	]*60[ 	]+movq xmm1, DWORD PTR \[esp\]
[ 	]*61[ 	]+movq xmm1, WORD PTR \[esp\]
[ 	]*62[ 	]+movq xmm1, BYTE PTR \[esp\]
[ 	]*63[ 	]+movq XMMWORD PTR \[esp\],xmm1
[ 	]*64[ 	]+movq DWORD PTR \[esp\],xmm1
[ 	]*65[ 	]+movq WORD PTR \[esp\],xmm1
[ 	]*66[ 	]+movq BYTE PTR \[esp\],xmm1
@


1.4
log
@gas/testsuite/

2007-12-31  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/inval.s: Add test for cvtsi2ss/cvtsi2sd.
	* gas/i386/simd.s: Likewise.
	* gas/i386/x86-64-simd.s: Likewise.

	* gas/i386/inval.l: Updated.
	* gas/i386/simd-intel.d: Likewise.
	* gas/i386/simd-suffix.d: Likewise.
	* gas/i386/simd.d: Likewise.
	* gas/i386/sse2.d: Likewise.
	* gas/i386/x86-64-opcode.d: Likewise.
	* gas/i386/x86-64-simd-intel.d: Likewise.
	* gas/i386/x86-64-simd-suffix.d: Likewise.
	* gas/i386/x86-64-simd.d: Likewise.

opcodes/

2007-12-31  H.J. Lu  <hongjiu.lu@@intel.com>

	* i386-dis.c (prefix_table): Use "%LQ" on cvtpi2ps/cvtsi2sd.
	(putop): Handle '%' and "LQ".

	* i386-opc.tbl: Remove IgnoreSize from cvtpi2ps/cvtsi2sd.
	* i386-tbl.h: Regenerated.
@
text
@d56 8
d128 8
@


1.3
log
@gas/

2006-12-13  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/3712
	* config/tc-i386.c (match_template): Use MAX_OPERANDS for the
	number of operands. Issue an error if MAX_OPERANDS != 4. Add
	the 4th operand check.

gas/testsuite/

2006-12-13  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/3712
	* gas/i386/inval.s: Add invalid insertq.
	* gas/i386/x86-64-inval.s: Likewise.

	* gas/i386/inval.l: Updated.
	* gas/i386/x86-64-inval.l: Likewise.
@
text
@d50 6
d59 61
a119 50
   1 [ 	]*	.text
   2 [ 	]*# All the following should be illegal
   3 [ 	]*	mov	\(%dx\),%al
   4 [ 	]*	mov	\(%eax,%esp,2\),%al
   5 [ 	]*	setae	%eax
   6 [ 	]*	pushb	%ds
   7 [ 	]*	popb	%ds
   8 [ 	]*	pushb	%al
   9 [ 	]*	popb	%al
  10 [ 	]*	pushb	%ah
  11 [ 	]*	popb	%ah
  12 [ 	]*	pushb	%ax
  13 [ 	]*	popb	%ax
  14 [ 	]*	pushb	%eax
  15 [ 	]*	popb	%eax
  16 [ 	]*	movb	%ds,%ax
  17 [ 	]*	movb	%ds,%eax
  18 [ 	]*	movb	%ax,%ds
  19 [ 	]*	movb	%eax,%ds
  20 [ 	]*	movdb	%eax,%mm0
  21 [ 	]*	movqb	0,%mm0
  22 [ 	]*	ldsb	0,%eax
  23 [ 	]*	setnew	0
  24 [ 	]*	movdw	%eax,%mm0
  25 [ 	]*	movqw	0,%mm0
  26 [ 	]*	div	%cx,%al
  27 [ 	]*	div	%cl,%ax
  28 [ 	]*	div	%ecx,%al
  29 [ 	]*	imul	10,%bx,%ecx
  30 [ 	]*	imul	10,%bx,%al
  31 [ 	]*	popab
  32 [ 	]*	stil
  33 [ 	]*	aaab
  34 [ 	]*	cwdel
  35 [ 	]*	cwdw
  36 [ 	]*	callww	0
  37 [ 	]*foo:	jaw	foo
  38 [ 	]*	jcxzw	foo
  39 [ 	]*	jecxzl	foo
  40 [ 	]*	loopb	foo
  41 [ 	]*	xlatw	%es:%bx
  42 [ 	]*	xlatl	%es:%bx
  43 [ 	]*	intl	2
  44 [ 	]*	int3b
  45 [ 	]*	hltb
  46 [ 	]*	fstb	%st\(0\)
  47 [ 	]*	fcompll	28\(%ebp\)
  48 [ 	]*	fldlw	\(%eax\)
  49 [ 	]*	movl	\$%ebx,%eax
  50 [ 	]*	insertq	\$4,\$2,%xmm2,%ebx
@


1.2
log
@gas/

2006-04-18  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/2533
	* config/tc-i386.c (i386_immediate): Check illegal immediate
	register operand.

gas/testsuite/

2006-04-18  H.J. Lu  <hongjiu.lu@@intel.com>

	PR gas/2533
	* gas/i386/inval.s: Add test for illegal immediate register
	operand.
	* gas/i386/inval.l: Updated.
@
text
@d49 1
d102 1
@


1.1
log
@Initial revision
@
text
@d48 1
d100 1
@


1.1.1.1
log
@19990502 sourceware import
@
text
@@

