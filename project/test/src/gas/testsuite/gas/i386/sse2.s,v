head	1.6;
access;
symbols
	binutils-2_24-branch:1.6.0.20
	binutils-2_24-branchpoint:1.6
	binutils-2_21_1:1.6
	binutils-2_23_2:1.6
	binutils-2_23_1:1.6
	binutils-2_23:1.6
	binutils-2_23-branch:1.6.0.18
	binutils-2_23-branchpoint:1.6
	binutils-2_22_branch:1.6.0.16
	binutils-2_22:1.6
	binutils-2_22-branch:1.6.0.14
	binutils-2_22-branchpoint:1.6
	binutils-2_21:1.6
	binutils-2_21-branch:1.6.0.12
	binutils-2_21-branchpoint:1.6
	binutils-2_20_1:1.6
	binutils-2_20:1.6
	binutils-arc-20081103-branch:1.6.0.10
	binutils-arc-20081103-branchpoint:1.6
	binutils-2_20-branch:1.6.0.8
	binutils-2_20-branchpoint:1.6
	dje-cgen-play1-branch:1.6.0.6
	dje-cgen-play1-branchpoint:1.6
	arc-20081103-branch:1.6.0.4
	arc-20081103-branchpoint:1.6
	binutils-2_19_1:1.6
	binutils-2_19:1.6
	binutils-2_19-branch:1.6.0.2
	binutils-2_19-branchpoint:1.6
	binutils-2_18:1.5
	binutils-2_18-branch:1.5.0.2
	binutils-2_18-branchpoint:1.5
	binutils-csl-coldfire-4_1-32:1.3
	binutils-csl-sourcerygxx-4_1-32:1.3
	binutils-csl-innovasic-fido-3_4_4-33:1.3
	binutils-csl-sourcerygxx-3_4_4-32:1.3
	binutils-csl-coldfire-4_1-30:1.3
	binutils-csl-sourcerygxx-4_1-30:1.3
	binutils-csl-coldfire-4_1-28:1.3
	binutils-csl-sourcerygxx-4_1-29:1.3
	binutils-csl-sourcerygxx-4_1-28:1.3
	binutils-csl-arm-2006q3-27:1.3
	binutils-csl-sourcerygxx-4_1-27:1.3
	binutils-csl-arm-2006q3-26:1.3
	binutils-csl-sourcerygxx-4_1-26:1.3
	binutils-csl-sourcerygxx-4_1-25:1.3
	binutils-csl-sourcerygxx-4_1-24:1.3
	binutils-csl-sourcerygxx-4_1-23:1.3
	binutils-csl-sourcerygxx-4_1-21:1.3
	binutils-csl-arm-2006q3-21:1.3
	binutils-csl-sourcerygxx-4_1-22:1.3
	binutils-csl-palmsource-arm-prelinker-1_0-1:1.3
	binutils-csl-sourcerygxx-4_1-20:1.3
	binutils-csl-arm-2006q3-19:1.3
	binutils-csl-sourcerygxx-4_1-19:1.3
	binutils-csl-sourcerygxx-4_1-18:1.3
	binutils-csl-renesas-4_1-9:1.3
	binutils-csl-sourcerygxx-3_4_4-25:1.3
	binutils-csl-renesas-4_1-8:1.3
	binutils-csl-renesas-4_1-7:1.3
	binutils-csl-renesas-4_1-6:1.3
	binutils-csl-sourcerygxx-4_1-17:1.3
	binutils-csl-sourcerygxx-4_1-14:1.3
	binutils-csl-sourcerygxx-4_1-15:1.3
	binutils-csl-sourcerygxx-4_1-13:1.3
	binutils-2_17:1.3
	binutils-csl-sourcerygxx-4_1-12:1.3
	binutils-csl-sourcerygxx-3_4_4-21:1.3
	binutils-csl-wrs-linux-3_4_4-24:1.3
	binutils-csl-wrs-linux-3_4_4-23:1.3
	binutils-csl-sourcerygxx-4_1-9:1.3
	binutils-csl-sourcerygxx-4_1-8:1.3
	binutils-csl-sourcerygxx-4_1-7:1.3
	binutils-csl-arm-2006q1-6:1.3
	binutils-csl-sourcerygxx-4_1-6:1.3
	binutils-csl-wrs-linux-3_4_4-22:1.3
	binutils-csl-coldfire-4_1-11:1.3
	binutils-csl-sourcerygxx-3_4_4-19:1.3
	binutils-csl-coldfire-4_1-10:1.3
	binutils-csl-sourcerygxx-4_1-5:1.3
	binutils-csl-sourcerygxx-4_1-4:1.3
	binutils-csl-wrs-linux-3_4_4-21:1.3
	binutils-csl-morpho-4_1-4:1.3
	binutils-csl-sourcerygxx-3_4_4-17:1.3
	binutils-csl-wrs-linux-3_4_4-20:1.3
	binutils-2_17-branch:1.3.0.22
	binutils-2_17-branchpoint:1.3
	binutils-csl-2_17-branch:1.3.0.20
	binutils-csl-2_17-branchpoint:1.3
	binutils-csl-gxxpro-3_4-branch:1.3.0.18
	binutils-csl-gxxpro-3_4-branchpoint:1.3
	binutils-2_16_1:1.3
	binutils-csl-arm-2005q1b:1.3
	binutils-2_16:1.3
	binutils-csl-arm-2005q1a:1.3
	binutils-csl-arm-2005q1-branch:1.3.0.16
	binutils-csl-arm-2005q1-branchpoint:1.3
	binutils-2_16-branch:1.3.0.14
	binutils-2_16-branchpoint:1.3
	csl-arm-2004-q3d:1.3
	csl-arm-2004-q3:1.3
	binutils-2_15:1.3
	binutils-2_15-branchpoint:1.3
	csl-arm-2004-q1a:1.3
	csl-arm-2004-q1:1.3
	binutils-2_15-branch:1.3.0.12
	cagney_bfdfile-20040213-branch:1.3.0.10
	cagney_bfdfile-20040213-branchpoint:1.3
	cagney_bigcore-20040122-branch:1.3.0.8
	cagney_bigcore-20040122-branchpoint:1.3
	csl-arm-2003-q4:1.3
	binutils-2_14:1.3
	binutils-2_14-branch:1.3.0.6
	binutils-2_14-branchpoint:1.3
	binutils-2_13_2_1:1.3
	binutils-2_13_2:1.3
	binutils-2_13_1:1.3
	binutils-2_13:1.3
	binutils-2_13-branchpoint:1.3
	binutils-2_13-branch:1.3.0.4
	binutils-2_12_1:1.3
	binutils-2_12:1.3
	binutils-2_12-branch:1.3.0.2
	binutils-2_12-branchpoint:1.3
	cygnus_cvs_20020108_pre:1.3
	binutils-2_11_2:1.2.2.1
	binutils-2_11_1:1.2.2.1
	binutils-2_11:1.2
	x86_64versiong3:1.2
	binutils-2_11-branch:1.2.0.2
	binutils_latest_snapshot:1.6;
locks; strict;
comment	@# @;


1.6
date	2008.04.23.14.34.05;	author hjl;	state Exp;
branches;
next	1.5;

1.5
date	2006.11.09.23.29.20;	author hjl;	state Exp;
branches;
next	1.4;

1.4
date	2006.11.09.23.09.42;	author hjl;	state Exp;
branches;
next	1.3;

1.3
date	2001.05.12.09.52.40;	author amodra;	state Exp;
branches;
next	1.2;

1.2
date	2001.01.12.03.34.49;	author amodra;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2001.01.10.14.32.32;	author hubicka;	state Exp;
branches;
next	;

1.2.2.1
date	2001.05.12.10.09.18;	author amodra;	state Exp;
branches;
next	;


desc
@@


1.6
log
@2008-04-23  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/sse2.s: Add tests for pmuludq, paddq and psubq.
	* gas/i386/x86-64-simd.s: Likewise.

	* gas/i386/sse2.d: Updated.
	* gas/i386/x86-64-simd.d: Likewise.
	* gas/i386/x86-64-simd-intel.d: Likewise.
	* gas/i386/x86-64-simd-suffix.d: Likewise.
@
text
@foo:
	movnti		%eax, (%eax)
	sfence
	lfence
	mfence
	addpd		(%ecx),%xmm0
	addpd		%xmm2,%xmm1
	addsd		(%ebx),%xmm2
	addsd		%xmm4,%xmm3
	andnpd		0x0(%ebp),%xmm4
	andnpd		%xmm6,%xmm5
	andpd		(%edi),%xmm6
	andpd		%xmm0,%xmm7
	cmppd		$0x2,%xmm1,%xmm0
	cmppd		$0x3,(%edx),%xmm1
	cmpsd		$0x4,%xmm2,%xmm2
	cmpsd		$0x5,(%esp,1),%xmm3
	cmppd		$0x6,%xmm5,%xmm4
	cmppd		$0x7,(%esi),%xmm5
	cmpsd		$0x0,%xmm7,%xmm6
	cmpsd		$0x1,(%eax),%xmm7
	cmpeqpd		%xmm1,%xmm0
	cmpeqpd		(%edx),%xmm1
	cmpeqsd		%xmm2,%xmm2
	cmpeqsd		(%esp,1),%xmm3
	cmpltpd		%xmm5,%xmm4
	cmpltpd		(%esi),%xmm5
	cmpltsd		%xmm7,%xmm6
	cmpltsd		(%eax),%xmm7
	cmplepd		(%ecx),%xmm0
	cmplepd		%xmm2,%xmm1
	cmplesd		(%ebx),%xmm2
	cmplesd		%xmm4,%xmm3
	cmpunordpd	0x0(%ebp),%xmm4
	cmpunordpd	%xmm6,%xmm5
	cmpunordsd	(%edi),%xmm6
	cmpunordsd	%xmm0,%xmm7
	cmpneqpd	%xmm1,%xmm0
	cmpneqpd	(%edx),%xmm1
	cmpneqsd	%xmm2,%xmm2
	cmpneqsd	(%esp,1),%xmm3
	cmpnltpd	%xmm5,%xmm4
	cmpnltpd	(%esi),%xmm5
	cmpnltsd	%xmm7,%xmm6
	cmpnltsd	(%eax),%xmm7
	cmpnlepd	(%ecx),%xmm0
	cmpnlepd	%xmm2,%xmm1
	cmpnlesd	(%ebx),%xmm2
	cmpnlesd	%xmm4,%xmm3
	cmpordpd	0x0(%ebp),%xmm4
	cmpordpd	%xmm6,%xmm5
	cmpordsd	(%edi),%xmm6
	cmpordsd	%xmm0,%xmm7
	comisd		%xmm1,%xmm0
	comisd		(%edx),%xmm1
	cvtpi2pd	%mm3,%xmm2
	cvtpi2pd	(%esp,1),%xmm3
	cvtsi2sd	%ebp,%xmm4
	cvtsi2sd	(%esi),%xmm5
	cvtpd2pi	%xmm7,%mm6
	cvtpd2pi	(%eax),%mm7
	cvtsd2si	(%ecx),%eax
	cvtsd2si	%xmm2,%ecx
	cvttpd2pi	(%ebx),%mm2
	cvttpd2pi	%xmm4,%mm3
	cvttsd2si	0x0(%ebp),%esp
	cvttsd2si	%xmm6,%ebp
	divpd		%xmm1,%xmm0
	divpd		(%edx),%xmm1
	divsd		%xmm3,%xmm2
	divsd		(%esp,1),%xmm3
	ldmxcsr		0x0(%ebp)
	stmxcsr		(%esi)
	sfence
	maxpd		%xmm1,%xmm0
	maxpd		(%edx),%xmm1
	maxsd		%xmm3,%xmm2
	maxsd		(%esp,1),%xmm3
	minpd		%xmm5,%xmm4
	minpd		(%esi),%xmm5
	minsd		%xmm7,%xmm6
	minsd		(%eax),%xmm7
	movapd		%xmm1,%xmm0
	movapd		%xmm2,(%ecx)
	movapd		(%edx),%xmm2
	movhpd		%xmm5,(%esp,1)
	movhpd		(%esi),%xmm5
	movlpd		%xmm0,(%edi)
	movlpd		(%eax),%xmm0
	movmskpd	%xmm2,%ecx
	movupd		%xmm3,%xmm2
	movupd		%xmm4,(%edx)
	movupd		0x0(%ebp),%xmm4
	movsd		%xmm6,%xmm5
	movsd		%xmm7,(%esi)
	movsd		(%eax),%xmm7
	mulpd		%xmm1,%xmm0
	mulpd		(%edx),%xmm1
	mulsd		%xmm2,%xmm2
	mulsd		(%esp,1),%xmm3
	orpd		%xmm5,%xmm4
	orpd		(%esi),%xmm5
	shufpd		$0x2,(%edi),%xmm6
	shufpd		$0x3,%xmm0,%xmm7
	sqrtpd		%xmm1,%xmm0
	sqrtpd		(%edx),%xmm1
	sqrtsd		%xmm2,%xmm2
	sqrtsd		(%esp,1),%xmm3
	subpd		%xmm5,%xmm4
	subpd		(%esi),%xmm5
	subsd		%xmm7,%xmm6
	subsd		(%eax),%xmm7
	ucomisd		(%ecx),%xmm0
	ucomisd		%xmm2,%xmm1
	unpckhpd	(%ebx),%xmm2
	unpckhpd	%xmm4,%xmm3
	unpcklpd	0x0(%ebp),%xmm4
	unpcklpd	%xmm6,%xmm5
	xorpd		(%edi),%xmm6
	xorpd		%xmm0,%xmm7
	movntpd		%xmm6,(%ebx)
	xorpd		%xmm0, %xmm1
	cvtdq2pd	%xmm0, %xmm1
	cvtpd2dq	%xmm0, %xmm1
	cvtdq2ps	%xmm0, %xmm1
	cvtpd2ps	%xmm0, %xmm1
	cvtps2pd	%xmm0, %xmm1
	cvtps2dq	%xmm0, %xmm1
	cvtsd2ss	%xmm0, %xmm1
	cvtss2sd	%xmm0, %xmm1
	cvttpd2dq	%xmm0, %xmm1
	cvttps2dq	%xmm0, %xmm1
	maskmovdqu	%xmm0, %xmm1
	movdqa		%xmm0, %xmm1
	movdqa		%xmm0, (%esi)
	movdqu		%xmm0, %xmm1
	movdqu		%xmm0, (%esi)
	movdq2q		%xmm0, %mm1
	movq2dq		%mm0, %xmm1
	pmuludq		%mm0, %mm1
	pmuludq		(%eax), %mm1
	pmuludq		%xmm0, %xmm1
	pmuludq		(%eax), %xmm1
	pshufd		$1, %xmm0, %xmm1
	pshufhw		$1, %xmm0, %xmm1
	pshuflw		$1, %xmm0, %xmm1
	pslldq		$1, %xmm0
	psrldq		$1, %xmm0
	punpckhqdq	%xmm0, %xmm1
	paddq           %mm1,%mm0
	paddq           (%eax),%mm0
	paddq           %xmm1,%xmm0
	paddq           (%eax),%xmm0
	psubq           %mm1,%mm0
	psubq           (%eax),%mm0
	psubq           %xmm1,%xmm0
	psubq           (%eax),%xmm0
@


1.5
log
@2006-11-09  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/sse2.s: Test movdqa with memory destination.
	* gas/i386/sse2.d: Updated.
@
text
@d140 2
d143 1
a143 1
	pmuludq		%xmm0, %xmm1
d150 8
a157 2

 .p2align 4
@


1.4
log
@2006-11-09  H.J. Lu  <hongjiu.lu@@intel.com>

	* gas/i386/sse2.s: Test movdqu with memory destination.
	* gas/i386/sse2.d: Updated.
@
text
@d135 1
a135 1
	movdqa		%xmm0, %xmm1
@


1.3
log
@Correct cvtps2dq, movdq2q, movq2dq, and movq problems.
@
text
@d137 1
a137 1
	movdqu		%xmm0, %xmm1
@


1.2
log
@Cure recent x86 warts.
@
text
@d128 1
a128 1
	cvtps2dq	%xmm0, %mm1
d138 2
a139 2
	movdq2q		%mm0, %xmm1
	movq2dq		%xmm0, %mm1
@


1.2.2.1
log
@Correct cvtps2dq, movdq2q, movq2dq, and movq problems.
@
text
@d128 1
a128 1
	cvtps2dq	%xmm0, %xmm1
d138 2
a139 2
	movdq2q		%xmm0, %mm1
	movq2dq		%mm0, %xmm1
@


1.1
log
@	* i386.exp: Add ssemmx2 and sse2 tests.
	(sse2.d, sse2.s, ssemmx2.d, ssemmx2.s): New tests.
@
text
@d1 149
a149 147
movnti %eax, (%eax)
sfence
lfence
mfence
addpd		(%ecx),%xmm0
addpd		%xmm2,%xmm1
addsd		(%ebx),%xmm2
addsd		%xmm4,%xmm3
andnpd		0x0(%ebp),%xmm4
andnpd		%xmm6,%xmm5
andpd		(%edi),%xmm6
andpd		%xmm0,%xmm7
cmppd		$0x2,%xmm1,%xmm0
cmppd		$0x3,(%edx),%xmm1
cmpsd		$0x4,%xmm2,%xmm2
cmpsd		$0x5,(%esp,1),%xmm3
cmppd		$0x6,%xmm5,%xmm4
cmppd		$0x7,(%esi),%xmm5
cmpsd		$0x0,%xmm7,%xmm6
cmpsd		$0x1,(%eax),%xmm7
cmpeqpd	%xmm1,%xmm0
cmpeqpd	(%edx),%xmm1
cmpeqsd	%xmm2,%xmm2
cmpeqsd	(%esp,1),%xmm3
cmpltpd	%xmm5,%xmm4
cmpltpd	(%esi),%xmm5
cmpltsd	%xmm7,%xmm6
cmpltsd	(%eax),%xmm7
cmplepd	(%ecx),%xmm0
cmplepd	%xmm2,%xmm1
cmplesd	(%ebx),%xmm2
cmplesd	%xmm4,%xmm3
cmpunordpd	0x0(%ebp),%xmm4
cmpunordpd	%xmm6,%xmm5
cmpunordsd	(%edi),%xmm6
cmpunordsd	%xmm0,%xmm7
cmpneqpd	%xmm1,%xmm0
cmpneqpd	(%edx),%xmm1
cmpneqsd	%xmm2,%xmm2
cmpneqsd	(%esp,1),%xmm3
cmpnltpd	%xmm5,%xmm4
cmpnltpd	(%esi),%xmm5
cmpnltsd	%xmm7,%xmm6
cmpnltsd	(%eax),%xmm7
cmpnlepd	(%ecx),%xmm0
cmpnlepd	%xmm2,%xmm1
cmpnlesd	(%ebx),%xmm2
cmpnlesd	%xmm4,%xmm3
cmpordpd	0x0(%ebp),%xmm4
cmpordpd	%xmm6,%xmm5
cmpordsd	(%edi),%xmm6
cmpordsd	%xmm0,%xmm7
comisd		%xmm1,%xmm0
comisd		(%edx),%xmm1
cvtpi2pd	%mm3,%xmm2
cvtpi2pd	(%esp,1),%xmm3
cvtsi2sd	%ebp,%xmm4
cvtsi2sd	(%esi),%xmm5
cvtpd2pi	%xmm7,%mm6
cvtpd2pi	(%eax),%mm7
cvtsd2si	(%ecx),%eax
cvtsd2si	%xmm2,%ecx
cvttpd2pi	(%ebx),%mm2
cvttpd2pi	%xmm4,%mm3
cvttsd2si	0x0(%ebp),%esp
cvttsd2si	%xmm6,%ebp
divpd		%xmm1,%xmm0
divpd		(%edx),%xmm1
divsd		%xmm3,%xmm2
divsd		(%esp,1),%xmm3
ldmxcsr	0x0(%ebp)
stmxcsr	(%esi)
sfence
maxpd		%xmm1,%xmm0
maxpd		(%edx),%xmm1
maxsd		%xmm3,%xmm2
maxsd		(%esp,1),%xmm3
minpd		%xmm5,%xmm4
minpd		(%esi),%xmm5
minsd		%xmm7,%xmm6
minsd		(%eax),%xmm7
movapd		%xmm1,%xmm0
movapd		%xmm2,(%ecx)
movapd		(%edx),%xmm2
movhpd		%xmm5,(%esp,1)
movhpd		(%esi),%xmm5
movlpd		%xmm0,(%edi)
movlpd		(%eax),%xmm0
movmskpd	%xmm2,%ecx
movupd		%xmm3,%xmm2
movupd		%xmm4,(%edx)
movupd		0x0(%ebp),%xmm4
movsd		%xmm6,%xmm5
movsd		%xmm7,(%esi)
movsd		(%eax),%xmm7
mulpd		%xmm1,%xmm0
mulpd		(%edx),%xmm1
mulsd		%xmm2,%xmm2
mulsd		(%esp,1),%xmm3
orpd		%xmm5,%xmm4
orpd		(%esi),%xmm5
shufpd		$0x2,(%edi),%xmm6
shufpd		$0x3,%xmm0,%xmm7
sqrtpd		%xmm1,%xmm0
sqrtpd		(%edx),%xmm1
sqrtsd		%xmm2,%xmm2
sqrtsd		(%esp,1),%xmm3
subpd		%xmm5,%xmm4
subpd		(%esi),%xmm5
subsd		%xmm7,%xmm6
subsd		(%eax),%xmm7
ucomisd	(%ecx),%xmm0
ucomisd	%xmm2,%xmm1
unpckhpd	(%ebx),%xmm2
unpckhpd	%xmm4,%xmm3
unpcklpd	0x0(%ebp),%xmm4
unpcklpd	%xmm6,%xmm5
xorpd		(%edi),%xmm6
xorpd		%xmm0,%xmm7
movntpd	%xmm6,(%ebx)
xorpd	%xmm0, %xmm1
cvtdq2pd	%xmm0, %xmm1
cvtpd2dq	%xmm0, %xmm1
cvtdq2ps	%xmm0, %xmm1
cvtpd2ps	%xmm0, %xmm1
cvtps2pd	%xmm0, %xmm1
cvtps2dq	%xmm0, %mm1
cvtsd2ss	%xmm0, %xmm1
cvtss2sd	%xmm0, %xmm1
cvttpd2dq	%xmm0, %xmm1
cvttps2dq	%xmm0, %xmm1
maskmovdqu	%xmm0, %xmm1
movdqa	%xmm0, %xmm1
movdqa	%xmm0, %xmm1
movdqu	%xmm0, %xmm1
movdqu	%xmm0, %xmm1
movdq2q	%mm0, %xmm1
movq2dq	%xmm0, %mm1
pmuludq	%xmm0, %xmm1
pmuludq	%xmm0, %xmm1
pshufd	$1, %xmm0, %xmm1
pshufhw	$1, %xmm0, %xmm1
pshuflw	$1, %xmm0, %xmm1
pslldq	$1, %xmm0
psrldq	$1, %xmm0
punpckhqdq	%xmm0, %xmm1
.p2align 4
@

