head	1.9;
access;
symbols
	cagney_x86i386-20030821-branch:1.8.0.16
	cagney_x86i386-20030821-branchpoint:1.8
	carlton_dictionary-20030805-merge:1.8
	carlton_dictionary-20030627-merge:1.8
	gdb_6_0-branch:1.8.0.14
	gdb_6_0-2003-06-23-branchpoint:1.8
	jimb-ppc64-linux-20030613-branch:1.8.0.12
	jimb-ppc64-linux-20030613-branchpoint:1.8
	cagney_writestrings-20030508-branch:1.8.0.10
	cagney_writestrings-20030508-branchpoint:1.8
	jimb-ppc64-linux-20030528-branch:1.8.0.8
	jimb-ppc64-linux-20030528-branchpoint:1.8
	carlton_dictionary-20030523-merge:1.8
	cagney_fileio-20030521-branch:1.8.0.6
	cagney_fileio-20030521-branchpoint:1.8
	kettenis_i386newframe-20030517-mergepoint:1.8
	jimb-ppc64-linux-20030509-branch:1.8.0.4
	jimb-ppc64-linux-20030509-branchpoint:1.8
	kettenis_i386newframe-20030504-mergepoint:1.8
	carlton_dictionary-20030430-merge:1.8
	kettenis_i386newframe-20030419-branch:1.8.0.2
	kettenis_i386newframe-20030419-branchpoint:1.8
	carlton_dictionary-20030416-merge:1.8
	cagney_frameaddr-20030409-mergepoint:1.7
	kettenis_i386newframe-20030406-branch:1.6.0.36
	kettenis_i386newframe-20030406-branchpoint:1.6
	cagney_frameaddr-20030403-branchpoint:1.6
	cagney_frameaddr-20030403-branch:1.6.0.34
	cagney_framebase-20030330-mergepoint:1.6
	cagney_framebase-20030326-branch:1.6.0.32
	cagney_framebase-20030326-branchpoint:1.6
	cagney_lazyid-20030317-branch:1.6.0.30
	cagney_lazyid-20030317-branchpoint:1.6
	kettenis-i386newframe-20030316-mergepoint:1.6
	offbyone-20030313-branch:1.6.0.28
	offbyone-20030313-branchpoint:1.6
	kettenis-i386newframe-20030308-branch:1.6.0.26
	kettenis-i386newframe-20030308-branchpoint:1.6
	carlton_dictionary-20030305-merge:1.6
	cagney_offbyone-20030303-branch:1.6.0.24
	cagney_offbyone-20030303-branchpoint:1.6
	carlton_dictionary-20030207-merge:1.6
	interps-20030203-mergepoint:1.6
	interps-20030202-branch:1.6.0.22
	interps-20030202-branchpoint:1.6
	cagney-unwind-20030108-branch:1.6.0.20
	cagney-unwind-20030108-branchpoint:1.6
	carlton_dictionary-20021223-merge:1.6
	gdb_5_3-2002-12-12-release:1.6
	carlton_dictionary-20021115-merge:1.6
	kseitz_interps-20021105-merge:1.6
	kseitz_interps-20021103-merge:1.6
	drow-cplus-merge-20021020:1.6
	drow-cplus-merge-20021025:1.6
	carlton_dictionary-20021025-merge:1.6
	carlton_dictionary-20021011-merge:1.6
	drow-cplus-branch:1.6.0.18
	drow-cplus-branchpoint:1.6
	kseitz_interps-20020930-merge:1.6
	carlton_dictionary-20020927-merge:1.6
	carlton_dictionary-branch:1.6.0.16
	carlton_dictionary-20020920-branchpoint:1.6
	gdb_5_3-branch:1.6.0.14
	gdb_5_3-2002-09-04-branchpoint:1.6
	kseitz_interps-20020829-merge:1.6
	cagney_sysregs-20020825-branch:1.6.0.12
	cagney_sysregs-20020825-branchpoint:1.6
	readline_4_3-import-branch:1.6.0.10
	readline_4_3-import-branchpoint:1.6
	gdb_5_2_1-2002-07-23-release:1.6
	kseitz_interps-20020528-branch:1.6.0.8
	kseitz_interps-20020528-branchpoint:1.6
	cagney_regbuf-20020515-branch:1.6.0.6
	cagney_regbuf-20020515-branchpoint:1.6
	jimb-macro-020506-branch:1.6.0.4
	jimb-macro-020506-branchpoint:1.6
	gdb_5_2-2002-04-29-release:1.6
	gdb_5_2-branch:1.6.0.2
	gdb_5_2-2002-03-03-branchpoint:1.6
	gdb_5_1_1-2002-01-24-release:1.3
	gdb_5_1_0_1-2002-01-03-release:1.3
	cygnus_cvs_20020108_pre:1.4
	gdb_5_1_0_1-2002-01-03-branch:1.3.0.8
	gdb_5_1_0_1-2002-01-03-branchpoint:1.3
	gdb_5_1-2001-11-21-release:1.3
	gdb_s390-2001-09-26-branch:1.3.0.6
	gdb_s390-2001-09-26-branchpoint:1.3
	gdb_5_1-2001-07-29-branch:1.3.0.4
	gdb_5_1-2001-07-29-branchpoint:1.3
	dberlin-typesystem-branch:1.3.0.2
	dberlin-typesystem-branchpoint:1.3
	gdb-post-ptid_t-2001-05-03:1.3
	gdb-pre-ptid_t-2001-05-03:1.3
	insight-precleanup-2001-01-01:1.1.1.3
	gdb-post-protoization-2000-07-29:1.1.1.3
	gdb-pre-protoization-2000-07-29:1.1.1.3
	gdb-premipsmulti-2000-06-06-branch:1.1.1.3.0.4
	gdb-premipsmulti-2000-06-06-branchpoint:1.1.1.3
	gdb-post-params-removal-2000-06-04:1.1.1.3
	gdb-pre-params-removal-2000-06-04:1.1.1.3
	gdb-post-params-removal-2000-05-28:1.1.1.3
	gdb-pre-params-removal-2000-05-28:1.1.1.3
	gdb_5_0-2000-05-19-release:1.1.1.3
	gdb_4_18_2-2000-05-18-release:1.1.1.3
	gdb_4_95_1-2000-05-11-snapshot:1.1.1.3
	gdb_4_95_0-2000-04-27-snapshot:1.1.1.3
	gdb_5_0-2000-04-10-branch:1.1.1.3.0.2
	gdb_5_0-2000-04-10-branchpoint:1.1.1.3
	repo-unification-2000-02-06:1.1.1.3
	insight-2000-02-04:1.1.1.3
	gdb-2000-02-04:1.1.1.3
	gdb-2000-02-02:1.1.1.3
	gdb-2000-02-01:1.1.1.3
	gdb-2000-01-31:1.1.1.3
	gdb-2000-01-26:1.1.1.3
	gdb-2000-01-24:1.1.1.3
	gdb-2000-01-17:1.1.1.3
	gdb-2000-01-10:1.1.1.3
	gdb-2000-01-05:1.1.1.3
	gdb-1999-12-21:1.1.1.3
	gdb-1999-12-13:1.1.1.3
	gdb-1999-12-07:1.1.1.3
	gdb-1999-12-06:1.1.1.3
	gdb-1999-11-16:1.1.1.3
	gdb-1999-11-08:1.1.1.3
	gdb-1999-11-01:1.1.1.3
	gdb-1999-10-25:1.1.1.3
	gdb-1999-10-18:1.1.1.3
	gdb-1999-10-11:1.1.1.3
	gdb-1999-10-04:1.1.1.3
	gdb-1999-09-28:1.1.1.3
	gdb-1999-09-21:1.1.1.3
	gdb-1999-09-13:1.1.1.3
	gdb-1999-09-08:1.1.1.3
	gdb-1999-08-30:1.1.1.2
	gdb-1999-08-23:1.1.1.2
	gdb-1999-08-16:1.1.1.2
	gdb-1999-08-09:1.1.1.2
	gdb-1999-08-02:1.1.1.2
	gdb-1999-07-26:1.1.1.1
	gdb-1999-07-19:1.1.1.1
	gdb-1999-07-12:1.1.1.1
	gdb-post-reformat-19990707:1.1.1.1
	gdb-1999-07-07-post-reformat-snapshot:1.1.1.1
	gdb-pre-reformat-19990707:1.1.1.1
	gdb-1999-07-07:1.1.1.1
	gdb-1999-07-05:1.1.1.1
	gdb-1999-06-28:1.1.1.1
	gdb-1999-06-21:1.1.1.1
	gdb-1999-06-14:1.1.1.1
	gdb-1999-06-07:1.1.1.1
	gdb-1999-06-01:1.1.1.1
	gdb-4_18-branch:1.1.1.1.0.2
	gdb-4_18-release:1.1.1.1
	gdb-1999-05-25:1.1.1.1
	gdb-1999-05-19:1.1.1.1
	gdb-1999-05-10:1.1.1.1
	gdb-19990504:1.1.1.1
	gdb-19990422:1.1.1.1
	SNAPSHOT:1.1.1
	gdb-4_18:1.1.1.1
	GDB_4_18:1.1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.9
date	2003.08.23.03.55.59;	author chastain;	state dead;
branches;
next	1.8;

1.8
date	2003.04.11.19.57.33;	author jimb;	state Exp;
branches
	1.8.14.1;
next	1.7;

1.7
date	2003.04.09.23.21.14;	author jimb;	state Exp;
branches;
next	1.6;

1.6
date	2002.02.18.19.07.29;	author chastain;	state Exp;
branches
	1.6.16.1
	1.6.18.1
	1.6.34.1;
next	1.5;

1.5
date	2002.02.18.18.57.07;	author drow;	state Exp;
branches;
next	1.4;

1.4
date	2001.12.07.22.02.23;	author drow;	state Exp;
branches;
next	1.3;

1.3
date	2001.03.21.20.51.16;	author jimb;	state Exp;
branches;
next	1.2;

1.2
date	2001.03.06.08.21.54;	author kevinb;	state Exp;
branches;
next	1.1;

1.1
date	99.04.16.01.34.32;	author shebs;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.04.16.01.34.32;	author shebs;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	99.08.02.23.46.56;	author jsm;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	99.09.09.00.00.29;	author shebs;	state Exp;
branches;
next	;

1.6.16.1
date	2003.04.16.19.57.02;	author carlton;	state Exp;
branches;
next	1.6.16.2;

1.6.16.2
date	2003.08.30.03.40.34;	author chastain;	state dead;
branches;
next	;

1.6.18.1
date	2003.12.14.20.27.51;	author drow;	state dead;
branches;
next	;

1.6.34.1
date	2003.04.10.21.33.52;	author cagney;	state Exp;
branches;
next	;

1.8.14.1
date	2003.08.25.03.53.48;	author chastain;	state dead;
branches;
next	;


desc
@@


1.9
log
@2003-08-22  Michael Chastain  <mec@@shout.net>

	* gdb.cp: New directory.
	* gdb.cp/*: Copy from gdb.c++/*.
	* gdb.c++/*: Remove.
	* Makefile.in: Change gdb.c++ to gdb.cp.
	* configure.in:  Ditto.
	* configure: Regnerate.
@
text
@# Tests of overloaded operators resolution.
# Copyright 1998, 1999, 2002 Free Software Foundation, Inc.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  

# Please email any bugs, comments, and/or additions to this file to:
# bug-gdb@@prep.ai.mit.edu

# written by Elena Zannoni (ezannoni@@cygnus.com)
#
# source file "userdef.cc"
#

if $tracelevel then {
        strace $tracelevel
}

if { [skip_cplus_tests] } { continue }

set testfile "userdef"
set srcfile ${testfile}.cc
set binfile ${objdir}/${subdir}/${testfile}

if  { [gdb_compile "${srcdir}/${subdir}/${srcfile}" "${binfile}" executable {debug c++}] != "" } {
     gdb_suppress_entire_file "Testcase compile failed, so all tests in this file will automatically fail."
}


gdb_exit
gdb_start
gdb_reinitialize_dir $srcdir/$subdir
gdb_load ${binfile}


if ![runto_main] then {
    perror "couldn't run to breakpoint"
    continue
}

send_gdb "break marker1\n" ; gdb_expect -re ".*$gdb_prompt $"
    send_gdb "cont\n"
    gdb_expect {
        -re "Break.* marker1(\\(\\)|) \\(\\) at .*:$decimal.*$gdb_prompt $" {
            send_gdb "up\n"
            gdb_expect {
                -re ".*$gdb_prompt $" { pass "up from marker1" }
                timeout { fail "up from marker1" }
            }
        }
        -re "$gdb_prompt $" { fail "continue to marker1"  }
        timeout { fail "(timeout) continue to marker1"  }
    }


gdb_test "print one + two" "\\\$\[0-9\]* = {x = 6, y = 8}"

# If GDB fails to restore the selected frame properly after the
# inferior function call above (see GDB PR 1155 for an explanation of
# why this might happen), all the subsequent tests will fail.  We
# should detect report that failure, but let the marker call finish so
# that the rest of the tests can run undisturbed.
gdb_test_multiple "frame" "re-selected 'main' frame after inferior call" {
    -re "#0  marker1.*$gdb_prompt $" {
        setup_kfail "gdb/1155" s390-*-linux-gnu
        fail "re-selected 'main' frame after inferior call"
        gdb_test "finish" ".*main.*at .*userdef.cc:.*// marker1-returns-here.*" \
                "finish call to marker1"
    }
    -re "#1  ($hex in )?main.*$gdb_prompt $" {
        pass "re-selected 'main' frame after inferior call"
    }
}
        
gdb_test "print one - two" "\\\$\[0-9\]* = {x = -2, y = -2}"

gdb_test "print one * two" "\\\$\[0-9\]* = {x = 8, y = 15}"

gdb_test "print one / two" "\\\$\[0-9\]* = {x = 0, y = 0}"

gdb_test "print one % two" "\\\$\[0-9\]* = {x = 2, y = 3}"

gdb_test "print one && two" "\\\$\[0-9\]* = 1\[\r\n\]"

gdb_test "print one || two" "\\\$\[0-9\]* = 1\[\r\n\]"

gdb_test "print one & two" "\\\$\[0-9\]* = {x = 0, y = 1}"

gdb_test "print one | two" "\\\$\[0-9\]* = {x = 6, y = 7}"

gdb_test "print one ^ two" "\\\$\[0-9\]* = {x = 6, y = 6}"

gdb_test "print one < two" "\\\$\[0-9\]* = 1\[\r\n\]"

gdb_test "print one <= two" "\\\$\[0-9\]* = 1\[\r\n\]"

gdb_test "print one > two" "\\\$\[0-9\]* = 0\[\r\n\]"

gdb_test "print one >= two" "\\\$\[0-9\]* = 0\[\r\n\]"

gdb_test "print one == two" "\\\$\[0-9\]* = 0\[\r\n\]"

gdb_test "print one != two" "\\\$\[0-9\]* = 1\[\r\n\]"

# Can't really check the output of this one without knowing
# target integer width.  Make sure we don't try to call
# the iostreams operator instead, though.
gdb_test "print one << 31" "\\\$\[0-9\]* = {x = -?\[0-9\]*, y = -?\[0-9\]*}"

# Should be fine even on < 32-bit targets.
gdb_test "print one >> 31" "\\\$\[0-9\]* = {x = 0, y = 0}"

gdb_test "print !one" "\\\$\[0-9\]* = 0\[\r\n\]"

# Assumes 2's complement.  So does everything...
gdb_test "print ~one" "\\\$\[0-9\]* = {x = -3, y = -4}"

gdb_test "print -one" "\\\$\[0-9\]* = {x = -2, y = -3}"

gdb_test "print one++" "\\\$\[0-9\]* = {x = 2, y = 4}"

gdb_test "print ++one" "\\\$\[0-9\]* = {x = 3, y = 4}"

gdb_test "print one--" "\\\$\[0-9\]* = {x = 3, y = 3}"

gdb_test "print --one" "\\\$\[0-9\]* = {x = 2, y = 3}"

gdb_test "print one += 7" "\\\$\[0-9\]* = {x = 9, y = 10}"

gdb_test "print two = one" "\\\$\[0-9\]* = {x = 9, y = 10}"

# Check that GDB tolerates whitespace in operator names.
gdb_test "break A1::'operator+'" ".*Breakpoint $decimal at.*"
gdb_test "break A1::'operator +'" ".*Breakpoint $decimal at.*"

gdb_exit
return 0
@


1.8
log
@* gdb.c++/derivation.exp, gdb.c++/overload.exp,
gdb.c++/userdef.cc: Place comments on the lines to which the
marker function might return.
* gdb.c++/derivation.exp, gdb.c++/overload.exp,
gdb.c++/userdef.exp: Look for those comments to check that we've
returned to the right place, instead of checking line numbers.
@
text
@@


1.8.14.1
log
@2003-08-22  Michael Chastain  <mec@@shout.net>

	* gdb.cp: New directory.
	* gdb.cp/*: Copy from gdb.c++/*.
	* gdb.c++/*: Remove.
	* Makefile.in: Change gdb.c++ to gdb.cp.
	* configure.in:  Ditto.
	* configure: Regnerate.
@
text
@@


1.7
log
@* gdb.c++/derivation.exp, gdb.c++/overload.exp,
gdb.c++/userdef.exp: If GDB fails to restore the selected frame
after an inferior function call, report the failure, but allow the
test to continue.
@
text
@d78 1
a78 1
        gdb_test "finish" ".*main.*at .*userdef.cc:27\[67\].*" \
@


1.6
log
@2002-02-18  Michael Chastain  <mec@@shout.net>

	* gdb.c++/userdef.exp: Update copyright year.
@
text
@d69 17
@


1.6.18.1
log
@Merge drow-cplus-branch to:
  cvs rtag -D 2003-12-14 00:00:00 UTC drow-cplus-merge-20031214 gdb+dejagnu
@
text
@@


1.6.16.1
log
@2003-04-16  David Carlton  <carlton@@bactrian.org>

	* Merge with mainline; tag is carlton_dictionary-20030416-merge.
@
text
@a68 17
# If GDB fails to restore the selected frame properly after the
# inferior function call above (see GDB PR 1155 for an explanation of
# why this might happen), all the subsequent tests will fail.  We
# should detect report that failure, but let the marker call finish so
# that the rest of the tests can run undisturbed.
gdb_test_multiple "frame" "re-selected 'main' frame after inferior call" {
    -re "#0  marker1.*$gdb_prompt $" {
        setup_kfail "gdb/1155" s390-*-linux-gnu
        fail "re-selected 'main' frame after inferior call"
        gdb_test "finish" ".*main.*at .*userdef.cc:.*// marker1-returns-here.*" \
                "finish call to marker1"
    }
    -re "#1  ($hex in )?main.*$gdb_prompt $" {
        pass "re-selected 'main' frame after inferior call"
    }
}
        
@


1.6.16.2
log
@2003-08-22  Michael Chastain  <mec@@shout.net>

	* gdb.cp: New directory.
	* gdb.cp/*: Copy from gdb.c++/*.
	* gdb.c++/*: Remove.
	* Makefile.in: Change gdb.c++ to gdb.cp.
	* configure.in:  Ditto.
	* carlton_runnamespace: Ditto.
	* carlton_runtest: Ditto.
	* configure: Regnerate.
@
text
@@


1.6.34.1
log
@Merge with mainline.
@
text
@a68 17
# If GDB fails to restore the selected frame properly after the
# inferior function call above (see GDB PR 1155 for an explanation of
# why this might happen), all the subsequent tests will fail.  We
# should detect report that failure, but let the marker call finish so
# that the rest of the tests can run undisturbed.
gdb_test_multiple "frame" "re-selected 'main' frame after inferior call" {
    -re "#0  marker1.*$gdb_prompt $" {
        setup_kfail "gdb/1155" s390-*-linux-gnu
        fail "re-selected 'main' frame after inferior call"
        gdb_test "finish" ".*main.*at .*userdef.cc:27\[67\].*" \
                "finish call to marker1"
    }
    -re "#1  ($hex in )?main.*$gdb_prompt $" {
        pass "re-selected 'main' frame after inferior call"
    }
}
        
@


1.5
log
@2002-02-18  Daniel Jacobowitz  <drow@@mvista.com>

        * gdb.c++/userdef.exp: Test overloaded operators properly.
        Remove xfails.
@
text
@d2 1
a2 1
# Copyright 1998, 1999 Free Software Foundation, Inc.
@


1.4
log
@        * gdb.c++/classes.exp, gdb.c++/derivation.exp,
        gdb.c++/inherit.exp, gdb.c++/method.exp,
        gdb.c++/namespace.exp, gdb.c++/templates.exp,
        gdb.c++/userdef.exp, gdb.c++/virtfunc.exp: Updates for v3 demangler
        and class layout support.
@
text
@d67 58
a124 273
setup_xfail "hppa*-*-*"
send_gdb "print one+two\n"
gdb_expect {
    -re "FIXME.*$gdb_prompt $" {
        pass "print value of one + two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one two" }
    timeout           { fail "(timeout) print value of one two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one-two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one - two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one - two" }
    timeout           { fail "(timeout) print value of one - two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one*two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one * two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one * two" }
    timeout           { fail "(timeout) print value of one * two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one/two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one / two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one / two" }
    timeout           { fail "(timeout) print value of one / two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one%two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one % two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one % two" }
    timeout           { fail "(timeout) print value of one % two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one&&two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one && two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one && two" }
    timeout           { fail "(timeout) print value of one && two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one||two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one|| two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one|| two" }
    timeout           { fail "(timeout) print value of one|| two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one&two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one & two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one & two" }
    timeout           { fail "(timeout) print value of one & two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one|two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one | two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one | two" }
    timeout           { fail "(timeout) print value of one | two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one ^ two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one ^  two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one ^  two" }
    timeout           { fail "(timeout) print value of one ^  two" }
  }


setup_xfail "hppa*-*-*"
send_gdb "print one < two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one <  two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one <  two" }
    timeout           { fail "(timeout) print value of one <  two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one <= two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one <=  two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one <=  two" }
    timeout           { fail "(timeout) print value of one <=  two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one > two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one  > two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one >  two" }
    timeout           { fail "(timeout) print value of one >  two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one >= two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one >=  two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one >=  two" }
    timeout           { fail "(timeout) print value of one >=  two" }
  }


setup_xfail "hppa*-*-*"
send_gdb "print one==two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one == two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one == two" }
    timeout           { fail "(timeout) print value of one == two" }
  }


setup_xfail "hppa*-*-*"
send_gdb "print one!=two\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one != two"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one != two" }
    timeout           { fail "(timeout) print value of one != two" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one<<31\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one<<31"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one<<31" }
    timeout           { fail "(timeout) print value of one<<31" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one>>31\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one>>31"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one>>31" }
    timeout           { fail "(timeout) print value of one>>31" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print !one\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of !one"
      }
    -re ".*$gdb_prompt $" { xfail "print value of !one" }
    timeout           { fail "(timeout) print value of !one" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print ~one\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of ~one"
      }
    -re ".*$gdb_prompt $" { xfail "print value of ~one" }
    timeout           { fail "(timeout) print value of ~one" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print -one\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of -one"
      }
    -re ".*$gdb_prompt $" { xfail "print value of -one" }
    timeout           { fail "(timeout) print value of -one" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one++\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one++"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one++" }
    timeout           { fail "(timeout) print value of one++" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print ++one\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of ++one>>31"
      }
    -re ".*$gdb_prompt $" { xfail "print value of ++one" }
    timeout           { fail "(timeout) print value of ++one" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one--\n"
gdb_expect {
    -re ".*.FIXME*$gdb_prompt $" {
        pass "print value of one-->>31"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one-->>31" }
    timeout           { fail "(timeout) print value of one-->>31" }
  }


setup_xfail "hppa*-*-*"
send_gdb "print --one\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of --one"
      }
    -re ".*$gdb_prompt $" { xfail "print value of --one" }
    timeout           { fail "(timeout) print value of --one" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print one+=7\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of one+=7"
      }
    -re ".*$gdb_prompt $" { xfail "print value of one+=7" }
    timeout           { fail "(timeout) print value of one+=7" }
  }

setup_xfail "hppa*-*-*"
send_gdb "print two=one\n"
gdb_expect {
    -re ".*FIXME.*$gdb_prompt $" {
        pass "print value of two=one"
      }
    -re ".*$gdb_prompt $" { xfail "print value of two=one" }
    timeout           { fail "(timeout) print value of two=one" }
  }
@


1.3
log
@* gdb/linespec.c (find_methods): Whitespace differences aren't
significant in *un*mangled method names.  Use strcmp_iw to compare
them, not STREQ.  (Fix from Daniel Berlin.)

* gdb/testsuite/gdb.c++/userdef.exp: Check that GDB tolerates whitespace in
unmangled operator names.
@
text
@d55 1
a55 1
        -re "Break.* marker1 \\(\\) at .*:$decimal.*$gdb_prompt $" {
@


1.2
log
@Update/correct copyright notices.
@
text
@d341 4
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
# Copyright (C) 1998 Free Software Foundation, Inc.
a22 2
# testing overloaded operators resolution.
# 
a25 1

d30 1
a30 3
# Check to see if we have an executable to test.  If not, then either we
# haven't tried to compile one, or the compilation failed for some reason.
# In either case, just notify the user and skip the tests in this file.
d67 1
a67 1
    setup_xfail hppa_*_*
d77 1
d87 1
d97 1
d107 1
d117 1
d127 1
d137 1
d147 1
d157 1
d167 2
d178 1
d188 1
d198 1
d209 1
d219 2
d230 1
d240 1
d250 1
d260 1
d270 1
d280 1
d290 1
d300 1
d310 2
d321 1
d331 1
@


1.1.1.1
log
@Initial creation of sourceware repository
@
text
@@


1.1.1.2
log
@import gdb-1999-08-02 snapshot
@
text
@d71 1
a71 1
setup_xfail "hppa*-*-*"
a80 1
setup_xfail "hppa*-*-*"
a89 1
setup_xfail "hppa*-*-*"
a98 1
setup_xfail "hppa*-*-*"
a107 1
setup_xfail "hppa*-*-*"
a116 1
setup_xfail "hppa*-*-*"
a125 1
setup_xfail "hppa*-*-*"
a134 1
setup_xfail "hppa*-*-*"
a143 1
setup_xfail "hppa*-*-*"
a152 1
setup_xfail "hppa*-*-*"
a161 2

setup_xfail "hppa*-*-*"
a170 1
setup_xfail "hppa*-*-*"
a179 1
setup_xfail "hppa*-*-*"
a188 1
setup_xfail "hppa*-*-*"
a198 1
setup_xfail "hppa*-*-*"
a207 2

setup_xfail "hppa*-*-*"
a216 1
setup_xfail "hppa*-*-*"
a225 1
setup_xfail "hppa*-*-*"
a234 1
setup_xfail "hppa*-*-*"
a243 1
setup_xfail "hppa*-*-*"
a252 1
setup_xfail "hppa*-*-*"
a261 1
setup_xfail "hppa*-*-*"
a270 1
setup_xfail "hppa*-*-*"
a279 1
setup_xfail "hppa*-*-*"
a288 2

setup_xfail "hppa*-*-*"
a297 1
setup_xfail "hppa*-*-*"
a306 1
setup_xfail "hppa*-*-*"
@


1.1.1.3
log
@import gdb-1999-09-08 snapshot
@
text
@d1 1
a1 2
# Tests of overloaded operators resolution.
# Copyright (C) 1998, 1999 Free Software Foundation, Inc.
d22 2
d27 1
d32 3
a34 1
if { [skip_cplus_tests] } { continue }
@


