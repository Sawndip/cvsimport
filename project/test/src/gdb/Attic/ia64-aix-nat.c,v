head	1.11;
access;
symbols
	gdb_6_3-20041109-release:1.10
	gdb_6_3-branch:1.10.0.2
	gdb_6_3-20041019-branchpoint:1.10
	drow_intercu-merge-20040921:1.10
	drow_intercu-merge-20040915:1.10
	jimb-gdb_6_2-e500-branch:1.8.0.18
	jimb-gdb_6_2-e500-branchpoint:1.8
	gdb_6_2-20040730-release:1.8
	gdb_6_2-branch:1.8.0.14
	gdb_6_2-2004-07-10-gmt-branchpoint:1.8
	gdb_6_1_1-20040616-release:1.8
	gdb_6_1-2004-04-05-release:1.8
	drow_intercu-merge-20040402:1.8
	drow_intercu-merge-20040327:1.8
	ezannoni_pie-20040323-branch:1.8.0.12
	ezannoni_pie-20040323-branchpoint:1.8
	cagney_tramp-20040321-mergepoint:1.8
	cagney_tramp-20040309-branch:1.8.0.10
	cagney_tramp-20040309-branchpoint:1.8
	gdb_6_1-branch:1.8.0.8
	gdb_6_1-2004-03-01-gmt-branchpoint:1.8
	drow_intercu-20040221-branch:1.8.0.6
	drow_intercu-20040221-branchpoint:1.8
	cagney_bfdfile-20040213-branch:1.8.0.4
	cagney_bfdfile-20040213-branchpoint:1.8
	drow-cplus-merge-20040208:1.8
	carlton_dictionary-20040126-merge:1.8
	cagney_bigcore-20040122-branch:1.8.0.2
	cagney_bigcore-20040122-branchpoint:1.8
	drow-cplus-merge-20040113:1.8
	drow-cplus-merge-20031224:1.8
	drow-cplus-merge-20031220:1.8
	carlton_dictionary-20031215-merge:1.8
	drow-cplus-merge-20031214:1.8
	carlton-dictionary-20031111-merge:1.8
	gdb_6_0-2003-10-04-release:1.4
	kettenis_sparc-20030918-branch:1.7.0.2
	kettenis_sparc-20030918-branchpoint:1.7
	carlton_dictionary-20030917-merge:1.7
	ezannoni_pie-20030916-branchpoint:1.6
	ezannoni_pie-20030916-branch:1.6.0.2
	cagney_x86i386-20030821-branch:1.4.0.36
	cagney_x86i386-20030821-branchpoint:1.4
	carlton_dictionary-20030805-merge:1.4
	carlton_dictionary-20030627-merge:1.4
	gdb_6_0-branch:1.4.0.34
	gdb_6_0-2003-06-23-branchpoint:1.4
	jimb-ppc64-linux-20030613-branch:1.4.0.32
	jimb-ppc64-linux-20030613-branchpoint:1.4
	cagney_convert-20030606-branch:1.4.0.30
	cagney_convert-20030606-branchpoint:1.4
	cagney_writestrings-20030508-branch:1.4.0.28
	cagney_writestrings-20030508-branchpoint:1.4
	jimb-ppc64-linux-20030528-branch:1.4.0.26
	jimb-ppc64-linux-20030528-branchpoint:1.4
	carlton_dictionary-20030523-merge:1.4
	cagney_fileio-20030521-branch:1.4.0.24
	cagney_fileio-20030521-branchpoint:1.4
	kettenis_i386newframe-20030517-mergepoint:1.4
	jimb-ppc64-linux-20030509-branch:1.4.0.22
	jimb-ppc64-linux-20030509-branchpoint:1.4
	kettenis_i386newframe-20030504-mergepoint:1.4
	carlton_dictionary-20030430-merge:1.4
	kettenis_i386newframe-20030419-branch:1.4.0.20
	kettenis_i386newframe-20030419-branchpoint:1.4
	carlton_dictionary-20030416-merge:1.4
	cagney_frameaddr-20030409-mergepoint:1.4
	kettenis_i386newframe-20030406-branch:1.4.0.18
	kettenis_i386newframe-20030406-branchpoint:1.4
	cagney_frameaddr-20030403-branchpoint:1.4
	cagney_frameaddr-20030403-branch:1.4.0.16
	cagney_framebase-20030330-mergepoint:1.4
	cagney_framebase-20030326-branch:1.4.0.14
	cagney_framebase-20030326-branchpoint:1.4
	cagney_lazyid-20030317-branch:1.4.0.12
	cagney_lazyid-20030317-branchpoint:1.4
	kettenis-i386newframe-20030316-mergepoint:1.4
	offbyone-20030313-branch:1.4.0.10
	offbyone-20030313-branchpoint:1.4
	kettenis-i386newframe-20030308-branch:1.4.0.8
	kettenis-i386newframe-20030308-branchpoint:1.4
	carlton_dictionary-20030305-merge:1.4
	cagney_offbyone-20030303-branch:1.4.0.6
	cagney_offbyone-20030303-branchpoint:1.4
	carlton_dictionary-20030207-merge:1.4
	interps-20030203-mergepoint:1.4
	interps-20030202-branch:1.4.0.4
	interps-20030202-branchpoint:1.4
	cagney-unwind-20030108-branch:1.4.0.2
	cagney-unwind-20030108-branchpoint:1.4
	carlton_dictionary-20021223-merge:1.4
	gdb_5_3-2002-12-12-release:1.2
	carlton_dictionary-20021115-merge:1.4
	kseitz_interps-20021105-merge:1.2
	kseitz_interps-20021103-merge:1.2
	drow-cplus-merge-20021020:1.2
	drow-cplus-merge-20021025:1.2
	carlton_dictionary-20021025-merge:1.2
	carlton_dictionary-20021011-merge:1.2
	drow-cplus-branch:1.2.0.26
	drow-cplus-branchpoint:1.2
	kseitz_interps-20020930-merge:1.2
	carlton_dictionary-20020927-merge:1.2
	carlton_dictionary-branch:1.2.0.24
	carlton_dictionary-20020920-branchpoint:1.2
	gdb_5_3-branch:1.2.0.22
	gdb_5_3-2002-09-04-branchpoint:1.2
	kseitz_interps-20020829-merge:1.2
	cagney_sysregs-20020825-branch:1.2.0.20
	cagney_sysregs-20020825-branchpoint:1.2
	readline_4_3-import-branch:1.2.0.18
	readline_4_3-import-branchpoint:1.2
	gdb_5_2_1-2002-07-23-release:1.2
	kseitz_interps-20020528-branch:1.2.0.16
	kseitz_interps-20020528-branchpoint:1.2
	cagney_regbuf-20020515-branch:1.2.0.14
	cagney_regbuf-20020515-branchpoint:1.2
	jimb-macro-020506-branch:1.2.0.12
	jimb-macro-020506-branchpoint:1.2
	gdb_5_2-2002-04-29-release:1.2
	gdb_5_2-branch:1.2.0.10
	gdb_5_2-2002-03-03-branchpoint:1.2
	gdb_5_1_1-2002-01-24-release:1.2
	gdb_5_1_0_1-2002-01-03-release:1.2
	cygnus_cvs_20020108_pre:1.2
	gdb_5_1_0_1-2002-01-03-branchpoint:1.2
	gdb_5_1_0_1-2002-01-03-branch:1.2.0.8
	gdb_5_1-2001-11-21-release:1.2
	gdb_s390-2001-09-26-branch:1.2.0.6
	gdb_s390-2001-09-26-branchpoint:1.2
	gdb_5_1-2001-07-29-branch:1.2.0.4
	gdb_5_1-2001-07-29-branchpoint:1.2
	dberlin-typesystem-branch:1.2.0.2
	dberlin-typesystem-branchpoint:1.2
	gdb-post-ptid_t-2001-05-03:1.2
	gdb-pre-ptid_t-2001-05-03:1.2;
locks; strict;
comment	@ * @;


1.11
date	2005.01.04.22.59.44;	author kettenis;	state dead;
branches;
next	1.10;

1.10
date	2004.08.03.00.57.26;	author cagney;	state Exp;
branches;
next	1.9;

1.9
date	2004.07.22.01.31.48;	author cagney;	state Exp;
branches;
next	1.8;

1.8
date	2003.10.02.20.28.29;	author cagney;	state Exp;
branches
	1.8.6.1;
next	1.7;

1.7
date	2003.09.17.14.24.30;	author cagney;	state Exp;
branches;
next	1.6;

1.6
date	2003.09.14.22.35.33;	author cagney;	state Exp;
branches;
next	1.5;

1.5
date	2003.09.14.16.32.13;	author cagney;	state Exp;
branches;
next	1.4;

1.4
date	2002.11.14.20.37.28;	author cagney;	state Exp;
branches;
next	1.3;

1.3
date	2002.11.07.02.40.28;	author cagney;	state Exp;
branches;
next	1.2;

1.2
date	2001.03.01.01.39.21;	author cagney;	state Exp;
branches
	1.2.24.1
	1.2.26.1;
next	1.1;

1.1
date	2001.02.22.03.01.26;	author kevinb;	state Exp;
branches;
next	;

1.2.24.1
date	2002.11.15.19.18.49;	author carlton;	state Exp;
branches;
next	1.2.24.2;

1.2.24.2
date	2003.09.17.21.28.22;	author carlton;	state Exp;
branches;
next	1.2.24.3;

1.2.24.3
date	2003.11.11.23.50.46;	author carlton;	state Exp;
branches;
next	;

1.2.26.1
date	2003.12.14.20.27.19;	author drow;	state Exp;
branches;
next	;

1.8.6.1
date	2004.09.16.17.01.08;	author drow;	state Exp;
branches;
next	;


desc
@@


1.11
log
@* configure.host (ia64-*-aix*): Remove.
* configure.tgt (ia64-*-aix*): Remove.
* config/ia64/aix.mh: Remove file.
* config/ia64/aix.mt: Remove file.
* config/ia64/tm-aix.h: Remove file.
* ia64-aix-nat.c: Remove file.
* Makefile.in (ia64-aix-nat.o): Remove dependency.
@
text
@/* Low level interface to IA-64 running AIX for GDB, the GNU debugger.

   Copyright 2000, 2001, 2003 Free Software Foundation, Inc.

   This file is part of GDB.

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 59 Temple Place - Suite 330,
   Boston, MA 02111-1307, USA.  */

#include "defs.h"
#include "inferior.h"
#include "target.h"
#include "gdbcore.h"
#include "regcache.h"
#include <sys/procfs.h>

#include "symtab.h"
#include "bfd.h"
#include "symfile.h"
#include "objfiles.h"

#include <sys/types.h>
#include <fcntl.h>
#include "gdb_stat.h"

void
supply_gregset (prgregset_t *gregsetp)
{
  int regi;

  for (regi = IA64_GR0_REGNUM; regi <= IA64_GR31_REGNUM; regi++)
    {
      regcache_raw_supply (current_regcache, regi, 
			   (char *) &(gregsetp->__gpr[regi - IA64_GR0_REGNUM]));
    }

  for (regi = IA64_BR0_REGNUM; regi <= IA64_BR7_REGNUM; regi++)
    {
      regcache_raw_supply (current_regcache, regi, 
			   (char *) &(gregsetp->__br[regi - IA64_BR0_REGNUM]));
    }

  regcache_raw_supply (current_regcache, IA64_PSR_REGNUM,
		       (char *) &(gregsetp->__psr));
  regcache_raw_supply (current_regcache, IA64_IP_REGNUM,
		       (char *) &(gregsetp->__ip));
  regcache_raw_supply (current_regcache, IA64_CFM_REGNUM,
		       (char *) &(gregsetp->__ifs));
  regcache_raw_supply (current_regcache, IA64_RSC_REGNUM,
		       (char *) &(gregsetp->__rsc));
  regcache_raw_supply (current_regcache, IA64_BSP_REGNUM,
		       (char *) &(gregsetp->__bsp));
  regcache_raw_supply (current_regcache, IA64_BSPSTORE_REGNUM,
		       (char *) &(gregsetp->__bspstore));
  regcache_raw_supply (current_regcache, IA64_RNAT_REGNUM,
		       (char *) &(gregsetp->__rnat));
  regcache_raw_supply (current_regcache, IA64_PFS_REGNUM,
		       (char *) &(gregsetp->__pfs));
  regcache_raw_supply (current_regcache, IA64_UNAT_REGNUM,
		       (char *) &(gregsetp->__unat));
  regcache_raw_supply (current_regcache, IA64_PR_REGNUM,
		       (char *) &(gregsetp->__preds));
  regcache_raw_supply (current_regcache, IA64_CCV_REGNUM,
		       (char *) &(gregsetp->__ccv));
  regcache_raw_supply (current_regcache, IA64_LC_REGNUM,
		       (char *) &(gregsetp->__lc));
  regcache_raw_supply (current_regcache, IA64_EC_REGNUM,
		       (char *) &(gregsetp->__ec));
  /* FIXME: __nats */
  regcache_raw_supply (current_regcache, IA64_FPSR_REGNUM,
		       (char *) &(gregsetp->__fpsr));

  /* These (for the most part) are pseudo registers and are obtained
     by other means.  Those that aren't are already handled by the
     code above.  */
  for (regi = IA64_GR32_REGNUM; regi <= IA64_GR127_REGNUM; regi++)
    deprecated_register_valid[regi] = 1;
  for (regi = IA64_PR0_REGNUM; regi <= IA64_PR63_REGNUM; regi++)
    deprecated_register_valid[regi] = 1;
  for (regi = IA64_VFP_REGNUM; regi <= NUM_REGS; regi++)
    deprecated_register_valid[regi] = 1;
}

void
fill_gregset (prgregset_t *gregsetp, int regno)
{
  int regi;

#define COPY_REG(_fld_,_regi_) \
  if ((regno == -1) || regno == _regi_) \
    memcpy (&(gregsetp->_fld_), &deprecated_registers[DEPRECATED_REGISTER_BYTE (_regi_)], \
	    register_size (current_gdbarch, _regi_))

  for (regi = IA64_GR0_REGNUM; regi <= IA64_GR31_REGNUM; regi++)
    {
      COPY_REG (__gpr[regi - IA64_GR0_REGNUM], regi);
    }

  for (regi = IA64_BR0_REGNUM; regi <= IA64_BR7_REGNUM; regi++)
    {
      COPY_REG (__br[regi - IA64_BR0_REGNUM], regi);
    }
  COPY_REG (__psr, IA64_PSR_REGNUM);
  COPY_REG (__ip, IA64_IP_REGNUM);
  COPY_REG (__ifs, IA64_CFM_REGNUM);
  COPY_REG (__rsc, IA64_RSC_REGNUM);
  COPY_REG (__bsp, IA64_BSP_REGNUM);

  /* Bad things happen if we don't update both bsp and bspstore at the
     same time.  */
  if (regno == IA64_BSP_REGNUM || regno == -1)
    {
      memcpy (&(gregsetp->__bspstore),
	      &deprecated_registers[DEPRECATED_REGISTER_BYTE (IA64_BSP_REGNUM)],
	      register_size (current_gdbarch, IA64_BSP_REGNUM));
      memcpy (&deprecated_registers[DEPRECATED_REGISTER_BYTE (IA64_BSPSTORE_REGNUM)],
	      &deprecated_registers[DEPRECATED_REGISTER_BYTE (IA64_BSP_REGNUM)],
	      register_size (current_gdbarch, IA64_BSP_REGNUM));
    }

#if 0
  /* We never actually write to bspstore, or we'd have to do the same thing
     here too.  */
  COPY_REG (__bspstore, IA64_BSPSTORE_REGNUM);
#endif
  COPY_REG (__rnat, IA64_RNAT_REGNUM);
  COPY_REG (__pfs, IA64_PFS_REGNUM);
  COPY_REG (__unat, IA64_UNAT_REGNUM);
  COPY_REG (__preds, IA64_PR_REGNUM);
  COPY_REG (__ccv, IA64_CCV_REGNUM);
  COPY_REG (__lc, IA64_LC_REGNUM);
  COPY_REG (__ec, IA64_EC_REGNUM);
  /* FIXME: __nats */
  COPY_REG (__fpsr, IA64_FPSR_REGNUM);
#undef COPY_REG
}

void
supply_fpregset (prfpregset_t *fpregsetp)
{
  int regi;

  for (regi = IA64_FR0_REGNUM; regi <= IA64_FR127_REGNUM; regi++)
    regcache_raw_supply (current_regcache, regi, 
                     (char *) &(fpregsetp->__fpr[regi - IA64_FR0_REGNUM]));
}

void
fill_fpregset (prfpregset_t *fpregsetp, int regno)
{
  int regi;
  char *to;
  char *from;

  for (regi = IA64_FR0_REGNUM; regi <= IA64_FR127_REGNUM; regi++)
    {
      if ((regno == -1) || (regno == regi))
	{
	  from = (char *) &deprecated_registers[DEPRECATED_REGISTER_BYTE (regi)];
	  to = (char *) &(fpregsetp->__fpr[regi - IA64_FR0_REGNUM]);
	  memcpy (to, from, register_size (current_gdbarch, regi));
	}
    }
}
@


1.10
log
@2004-08-02  Andrew Cagney  <cagney@@gnu.org>

	Replace DEPRECATED_REGISTER_RAW_SIZE with register_size.
	* rs6000-tdep.c (rs6000_push_dummy_call)
	(rs6000_extract_return_value): Use register_size.
	* xstormy16-tdep.c (xstormy16_get_saved_register)
	(xstormy16_extract_return_value): Ditto.
	* valops.c (value_assign): Ditto.
	* v850ice.c (v850ice_fetch_registers, v850ice_store_registers):
	* v850-tdep.c (v850_extract_return_value): Ditto.
	* tracepoint.c (collect_symbol): Ditto.
	* target.c (debug_print_register): Ditto.
	* stack.c (frame_info): Ditto.
	* rs6000-nat.c (ARCH64, fetch_register, store_register): Ditto.
	* rom68k-rom.c (rom68k_supply_one_register): Ditto.
	* remote.c (struct packet_reg, remote_wait, remote_async_wait)
	(store_register_using_P): Ditto.
	* remote-vxmips.c (vx_read_register, vx_write_register): Ditto.
	* remote-sim.c (gdbsim_fetch_register, gdbsim_store_register): Ditto.
	* remote-mips.c (mips_wait, mips_fetch_registers): Ditto.
	* remote-e7000.c (fetch_regs_from_dump, sub2_from_pc): Ditto.
	* regcache.c (deprecated_read_register_bytes)
	(deprecated_write_register_bytes, read_register)
	(write_register): Ditto.
	* ppc-linux-nat.c (fetch_altivec_register, fetch_register)
	(supply_vrregset, store_altivec_register, fill_vrregset): Ditto.
	* monitor.c (monitor_supply_register, monitor_fetch_register)
	(monitor_store_register): Ditto.
	* mn10300-tdep.c (mn10300_pop_frame_regular)
	(mn10300_print_register): Ditto.
	* mipsv4-nat.c (fill_fpregset): Ditto.
	* mips-linux-tdep.c (supply_32bit_reg, fill_fpregset)
	(mips64_fill_fpregset): Ditto.
	* mi/mi-main.c (register_changed_p, get_register)
	(mi_cmd_data_write_register_values): Ditto.
	* lynx-nat.c (fetch_inferior_registers, store_inferior_registers):
	* irix5-nat.c (fill_gregset, fetch_core_registers):
	* infrun.c (write_inferior_status_register): Ditto.
	* infptrace.c (fetch_register, store_register): Ditto.
	* infcmd.c (default_print_registers_info): Ditto.
	* ia64-linux-nat.c (COPY_REG, fill_fpregset): Ditto.
	* ia64-aix-nat.c (COPY_REG, fill_gregset): Ditto.
	* i386gnu-nat.c (gnu_store_registers, fill): Ditto.
	* hpux-thread.c (hpux_thread_fetch_registers)
	(hpux_thread_store_registers): Ditto.
	* hppah-nat.c (store_inferior_registers, fetch_register):
	* findvar.c (value_from_register): Ditto.
	* dve3900-rom.c (fetch_bitmapped_register):
	* cris-tdep.c (cris_gdbarch_init): Ditto.
	* alpha-tdep.h: Ditto.
	* aix-thread.c (pd_enable, fill_sprs64, fill_sprs32): Ditto.
@
text
@@


1.9
log
@2004-07-21  Andrew Cagney  <cagney@@gnu.org>

	Use regcache_raw_supply instead of supply_register.
	* regcache.h (supply_register): Delete declaration.
	* regcache.c (supply_register): Delete function.
	* wince.c (do_child_fetch_inferior_registers): Update.
	* win32-nat.c (do_child_fetch_inferior_registers)
	(fetch_elf_core_registers): Update.
	* v850ice.c (v850ice_fetch_registers): Update.
	* thread-db.c (thread_db_store_registers): Update.
	* sol-thread.c (sol_thread_store_registers): Update.
	* shnbsd-tdep.c (shnbsd_supply_reg): Update.
	* rs6000-nat.c (fetch_register): Update.
	* rom68k-rom.c (rom68k_supply_one_register): Update.
	* remote.c (remote_wait, remote_async_wait): Update.
	* remote-st.c (get_hex_regs): Update.
	* remote-sim.c (gdbsim_fetch_register): Update.
	* remote-sds.c (sds_fetch_registers): Update.
	* remote-rdp.c (remote_rdp_fetch_register): Update.
	* remote-rdi.c (arm_rdi_fetch_registers): Update.
	* remote-mips.c (mips_wait, mips_fetch_registers): Update.
	* remote-m32r-sdi.c (m32r_fetch_register): Update.
	* remote-hms.c (init_hms_cmds): Update.
	* remote-est.c (init_est_cmds): Update.
	* remote-e7000.c (get_hex_regs, fetch_regs_from_dump)
	(e7000_fetch_registers, sub2_from_pc, e7000_wait): Update.
	* ppcnbsd-tdep.c (ppcnbsd_supply_reg, ppcnbsd_supply_fpreg): Update.
	* ppc-linux-nat.c (fetch_altivec_register, fetch_spe_register)
	(fetch_register, supply_vrregset, supply_vrregset)
	(fetch_spe_registers): Update.
	* ppc-bdm.c (bdm_ppc_fetch_registers): Update.
	* monitor.c (monitor_supply_register): Update.
	* mipsv4-nat.c (supply_gregset, supply_fpregset): Update.
	* mipsnbsd-tdep.c (mipsnbsd_supply_reg)
	(mipsnbsd_supply_fpreg): Update.
	* mips-nat.c (fetch_inferior_registers)
	(fetch_core_registers): Update.
	* mips-linux-tdep.c (supply_32bit_reg, supply_gregset)
	(supply_fpregset, mips64_supply_gregset)
	(mips64_supply_fpregset): Update.
	* m68klinux-nat.c (fetch_register, supply_gregset)
	(supply_fpregset): Update.
	* m68k-tdep.c (supply_gregset, supply_fpregset): Update.
	* m32r-rom.c (init_m32r_cmds, init_mon2000_cmds): Update.
	* lynx-nat.c (fetch_inferior_registers, fetch_core_registers): Update.
	* irix5-nat.c (supply_gregset, supply_fpregset): Update.
	* infptrace.c (fetch_register): Update.
	* ia64-linux-nat.c (supply_gregset, supply_fpregset): Update.
	* ia64-aix-nat.c (supply_gregset, supply_fpregset): Update.
	* i386gnu-nat.c (fetch_fpregs, supply_gregset)
	(gnu_fetch_registers, gnu_store_registers): Update.
	* i386-nto-tdep.c (i386nto_supply_gregset): Update.
	* i386-linux-nat.c (fetch_register, supply_gregset)
	(dummy_sse_values): Update.
	* hpux-thread.c (hpux_thread_fetch_registers): Update.
	* hppah-nat.c (fetch_register): Update.
	* hppa-linux-nat.c (fetch_register, supply_gregset)
	(supply_fpregset): Update.
	* go32-nat.c (fetch_register): Update.
	* dve3900-rom.c (fetch_bitmapped_register)
	(_initialize_r3900_rom): Update.
	* cris-tdep.c (supply_gregset): Update.
	* abug-rom.c (init_abug_cmds): Update.
	* core-aout.c (fetch_core_registers): Update.
	* armnbsd-nat.c (supply_gregset, supply_fparegset)
	(fetch_register, fetch_fp_register): Update.
	* arm-linux-nat.c (fetch_nwfpe_single, fetch_nwfpe_none)
	(fetch_nwfpe_extended, fetch_fpregister, fetch_fpregs)
	(fetch_register, fetch_regs, supply_gregset, supply_fpregset): Update.
	* alphanbsd-tdep.c (fetch_core_registers): Update.
	* alpha-tdep.c (alpha_supply_int_regs, alpha_supply_fp_regs): Update.
	* alpha-nat.c (fetch_osf_core_registers)
	(fetch_osf_core_registers, fetch_osf_core_registers): Update.
	* aix-thread.c (supply_gprs64, supply_reg32, supply_fprs)
	(supply_sprs64, supply_sprs32, fetch_regs_kernel_thread): Update.
@
text
@d104 1
a104 1
	    DEPRECATED_REGISTER_RAW_SIZE (_regi_))
d127 1
a127 1
	      DEPRECATED_REGISTER_RAW_SIZE (IA64_BSP_REGNUM));
d130 1
a130 1
	      DEPRECATED_REGISTER_RAW_SIZE (IA64_BSP_REGNUM));
d173 1
a173 1
	  memcpy (to, from, DEPRECATED_REGISTER_RAW_SIZE (regi));
@


1.8
log
@2003-10-02  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh (DEPRECATED_REGISTER_RAW_SIZE): Rename
	REGISTER_RAW_SIZE.
	* gdbarch.h, gdbarch.c: Re-generate.
	* aix-thread.c, alpha-tdep.h, arm-tdep.c, core-sol2.c: Update.
	* cris-tdep.c, dve3900-rom.c, findvar.c, frame.c: Update.
	* hppa-tdep.c, hppab-nat.c, hppah-nat.c, hppam3-nat.c: Update.
	* hpux-thread.c, i386gnu-nat.c, ia64-aix-nat.c: Update.
	* ia64-linux-nat.c, ia64-tdep.c, infcmd.c, infptrace.c: Update.
	* infrun.c, irix5-nat.c, lynx-nat.c, mips-linux-tdep.c: Update.
	* mips-nat.c, mips-tdep.c, mipsv4-nat.c, mn10300-tdep.c: Update.
	* monitor.c, ns32k-tdep.c, ppc-linux-nat.c, regcache.c: Update.
	* remote-e7000.c, remote-mips.c, remote-sim.c: Update.
	* remote-vxmips.c, remote-vxsparc.c, remote.c: Update.
	* rom68k-rom.c, rs6000-nat.c, rs6000-tdep.c, s390-tdep.c: Update.
	* sh64-tdep.c, sparc-nat.c, sparc-tdep.c, stack.c: Update.
	* target.c, tracepoint.c, v850-tdep.c, v850ice.c, valops.c: Update.
	* vax-tdep.c, vax-tdep.h, x86-64-tdep.c, xstormy16-tdep.c: Update.
	* config/m68k/tm-delta68.h, config/m68k/tm-vx68.h: Update.
	* config/sparc/tm-sparc.h, config/sparc/tm-sparclynx.h: Update.

2003-10-02  Andrew Cagney  <cagney@@redhat.com>

	* gdbint.texinfo (Target Architecture Definition): Rename
	REGISTER_RAW_SIZE to DEPRECATED_REGISTER_RAW_SIZE.
	* gdb.texinfo (Packets, Stop Reply Packets): Ditto.
	* gdbint.texinfo (Target Architecture Definition): Rename

2003-10-02  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_RAW_SIZE to
	DEPRECATED_REGISTER_RAW_SIZE.
@
text
@d45 2
a46 2
      supply_register (regi, 
                       (char *) &(gregsetp->__gpr[regi - IA64_GR0_REGNUM]));
d51 2
a52 2
      supply_register (regi, 
                       (char *) &(gregsetp->__br[regi - IA64_BR0_REGNUM]));
d55 26
a80 13
  supply_register (IA64_PSR_REGNUM, (char *) &(gregsetp->__psr));
  supply_register (IA64_IP_REGNUM, (char *) &(gregsetp->__ip));
  supply_register (IA64_CFM_REGNUM, (char *) &(gregsetp->__ifs));
  supply_register (IA64_RSC_REGNUM, (char *) &(gregsetp->__rsc));
  supply_register (IA64_BSP_REGNUM, (char *) &(gregsetp->__bsp));
  supply_register (IA64_BSPSTORE_REGNUM, (char *) &(gregsetp->__bspstore));
  supply_register (IA64_RNAT_REGNUM, (char *) &(gregsetp->__rnat));
  supply_register (IA64_PFS_REGNUM, (char *) &(gregsetp->__pfs));
  supply_register (IA64_UNAT_REGNUM, (char *) &(gregsetp->__unat));
  supply_register (IA64_PR_REGNUM, (char *) &(gregsetp->__preds));
  supply_register (IA64_CCV_REGNUM, (char *) &(gregsetp->__ccv));
  supply_register (IA64_LC_REGNUM, (char *) &(gregsetp->__lc));
  supply_register (IA64_EC_REGNUM, (char *) &(gregsetp->__ec));
d82 2
a83 1
  supply_register (IA64_FPSR_REGNUM, (char *) &(gregsetp->__fpsr));
d156 1
a156 1
    supply_register (regi, 
@


1.8.6.1
log
@Merge mainline to intercu branch - 2004-09-15
@
text
@d45 2
a46 2
      regcache_raw_supply (current_regcache, regi, 
			   (char *) &(gregsetp->__gpr[regi - IA64_GR0_REGNUM]));
d51 2
a52 2
      regcache_raw_supply (current_regcache, regi, 
			   (char *) &(gregsetp->__br[regi - IA64_BR0_REGNUM]));
d55 13
a67 26
  regcache_raw_supply (current_regcache, IA64_PSR_REGNUM,
		       (char *) &(gregsetp->__psr));
  regcache_raw_supply (current_regcache, IA64_IP_REGNUM,
		       (char *) &(gregsetp->__ip));
  regcache_raw_supply (current_regcache, IA64_CFM_REGNUM,
		       (char *) &(gregsetp->__ifs));
  regcache_raw_supply (current_regcache, IA64_RSC_REGNUM,
		       (char *) &(gregsetp->__rsc));
  regcache_raw_supply (current_regcache, IA64_BSP_REGNUM,
		       (char *) &(gregsetp->__bsp));
  regcache_raw_supply (current_regcache, IA64_BSPSTORE_REGNUM,
		       (char *) &(gregsetp->__bspstore));
  regcache_raw_supply (current_regcache, IA64_RNAT_REGNUM,
		       (char *) &(gregsetp->__rnat));
  regcache_raw_supply (current_regcache, IA64_PFS_REGNUM,
		       (char *) &(gregsetp->__pfs));
  regcache_raw_supply (current_regcache, IA64_UNAT_REGNUM,
		       (char *) &(gregsetp->__unat));
  regcache_raw_supply (current_regcache, IA64_PR_REGNUM,
		       (char *) &(gregsetp->__preds));
  regcache_raw_supply (current_regcache, IA64_CCV_REGNUM,
		       (char *) &(gregsetp->__ccv));
  regcache_raw_supply (current_regcache, IA64_LC_REGNUM,
		       (char *) &(gregsetp->__lc));
  regcache_raw_supply (current_regcache, IA64_EC_REGNUM,
		       (char *) &(gregsetp->__ec));
d69 1
a69 2
  regcache_raw_supply (current_regcache, IA64_FPSR_REGNUM,
		       (char *) &(gregsetp->__fpsr));
d90 1
a90 1
	    register_size (current_gdbarch, _regi_))
d113 1
a113 1
	      register_size (current_gdbarch, IA64_BSP_REGNUM));
d116 1
a116 1
	      register_size (current_gdbarch, IA64_BSP_REGNUM));
d142 1
a142 1
    regcache_raw_supply (current_regcache, regi, 
d159 1
a159 1
	  memcpy (to, from, register_size (current_gdbarch, regi));
@


1.7
log
@2003-09-17  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh (DEPRECATED_REGISTER_BYTE): Rename REGISTER_BYTE.
	* gdbarch.h, gdbarch.c: Regenerate.
	* arm-linux-tdep.c, core-sol2.c, cris-tdep.c: Update.
	* d10v-tdep.c, frame.c: Update.
	* hppa-tdep.c, hppab-nat.c, hppah-nat.c, hppam3-nat.c: Update.
	* hpux-thread.c, i386gnu-nat.c, ia64-aix-nat.c: Update.
	* ia64-linux-nat.c, irix5-nat.c, lynx-nat.c, m68knbsd-nat.c: Update.
	* mcore-tdep.c, mips-linux-tdep.c, mips-tdep.c: Update.
	* mipsv4-nat.c, mn10300-tdep.c, ns32k-tdep.c: Update.
	* ns32knbsd-nat.c, ppc-bdm.c, regcache.c, remote-sds.c: Update.
	* remote-vx68.c, remote-vxmips.c, remote-vxsparc.c: Update.
	* remote.c, rs6000-tdep.c, s390-tdep.c, sh64-tdep.c: Update.
	* sparc-nat.c, sparc-tdep.c, sun3-nat.c, v850-tdep.c: Update.
	* v850ice.c, vax-tdep.c, xstormy16-tdep.c: Update.
	* config/m68k/tm-cisco.h, config/m68k/tm-delta68.h: Update.
	* config/pa/nm-hppah.h: Update.

2003-09-17  Andrew Cagney  <cagney@@redhat.com>

	* mi/mi-main.c: Rename REGISTER_BYTE to DEPRECATED_REGISTER_BYTE.
@
text
@d90 1
a90 1
	    REGISTER_RAW_SIZE (_regi_))
d113 1
a113 1
	      REGISTER_RAW_SIZE (IA64_BSP_REGNUM));
d116 1
a116 1
	      REGISTER_RAW_SIZE (IA64_BSP_REGNUM));
d159 1
a159 1
	  memcpy (to, from, REGISTER_RAW_SIZE (regi));
@


1.6
log
@2003-09-14  Andrew Cagney  <cagney@@redhat.com>

	* rs6000-tdep.c (rs6000_push_dummy_call): Fix typos.
	* dcache.c: Update copyrights and descriptions.
	* scm-exp.c, ia64-aix-nat.c, hppam3-nat.c: environ.c: Ditto.
@
text
@d89 1
a89 1
    memcpy (&(gregsetp->_fld_), &deprecated_registers[REGISTER_BYTE (_regi_)], \
d112 1
a112 1
	      &deprecated_registers[REGISTER_BYTE (IA64_BSP_REGNUM)],
d114 2
a115 2
      memcpy (&deprecated_registers[REGISTER_BYTE (IA64_BSPSTORE_REGNUM)],
	      &deprecated_registers[REGISTER_BYTE (IA64_BSP_REGNUM)],
d157 1
a157 1
	  from = (char *) &deprecated_registers[REGISTER_BYTE (regi)];
@


1.5
log
@2003-09-14  Andrew Cagney  <cagney@@redhat.com>

	* alpha-nat.c: Remove some occurances of "register".
	* alpha-tdep.c, arm-tdep.c, blockframe.c, breakpoint.c: Ditto.
	* buildsym.c, c-typeprint.c, c-valprint.c, coffread.c: Ditto.
	* corefile.c, cp-support.c, cp-valprint.c, cris-tdep.c: Ditto.
	* dbxread.c, dcache.c, dwarf2read.c, elfread.c: Ditto.
	* environ.c, eval.c, event-top.c, f-typeprint.c: Ditto.
	* f-valprint.c, findvar.c, frame.c, gdbtypes.c: Ditto.
	* h8300-tdep.c, hppa-tdep.c, hppab-nat.c, hppah-nat.c: Ditto.
	* hppam3-nat.c, hpread.c, ia64-aix-nat.c, ia64-linux-nat.c: Ditto.
	* infcall.c, infcmd.c, inflow.c, infptrace.c, infrun.c: Ditto.
	* infttrace.c, irix5-nat.c, jv-typeprint.c: Ditto.
	* jv-valprint.c, m68k-tdep.c, m68klinux-nat.c, main.c: Ditto.
	* mdebugread.c, minsyms.c, mips-linux-tdep.c: Ditto.
	* mips-nat.c, mips-tdep.c, mipsread.c, mipsv4-nat.c: Ditto.
	* ns32k-tdep.c, objfiles.c, p-typeprint.c: Ditto.
	* p-valprint.c, ppc-linux-nat.c, printcmd.c: Ditto.
	* remote-mips.c, remote-vx.c, rs6000-nat.c: Ditto.
	* rs6000-tdep.c, scm-exp.c, sh-tdep.c, sh64-tdep.c: Ditto.
	* solib.c, somread.c, source.c, sparc-tdep.c: Ditto.
	* stabsread.c, stack.c, standalone.c, symfile.c: Ditto.
	* symmisc.c, symtab.c, top.c, tracepoint.c: Ditto.
	* typeprint.c, utils.c, valarith.c, valops.c: Ditto.
	* values.c, vax-tdep.c, xcoffread.c: Ditto.
@
text
@d1 3
a3 2
/* Functions specific to running gdb native on IA-64 running AIX.
   Copyright 2000, 2001 Free Software Foundation, Inc.
@


1.4
log
@2002-11-14  Andrew Cagney  <ac131313@@redhat.com>

	* regcache.h (deprecated_registers): Rename registers.
	* a68v-nat.c, alpha-nat.c, arch-utils.c, core-sol2.c: Update.
	* hp300ux-nat.c, hppab-nat.c, hppah-nat.c: Update.
	* hppam3-nat.c, hpux-thread.c, i386gnu-nat.c: Update.
	* ia64-aix-nat.c, ia64-linux-nat.c, ia64-tdep.c: Update.
	* irix4-nat.c, irix5-nat.c, lynx-nat.c, m68k-tdep.c: Update.
	* m68knbsd-nat.c, mips-linux-tdep.c, mipsm3-nat.c: Update.
	* mipsv4-nat.c, ns32knbsd-nat.c, ppc-bdm.c: Update.
	* ppc-sysv-tdep.c, ptx4-nat.c, regcache.c, remote-es.c: Update.
	* remote-sds.c, remote-vx68.c, remote-vxmips.c: Update.
	* remote-vxsparc.c, rs6000-tdep.c, sol-thread.c: Update.
	* sparc-nat.c, sparc-tdep.c, sun3-nat.c, symm-nat.c: Update.
	* v850ice.c: Update.
@
text
@d138 1
a138 1
  register int regi;
@


1.3
log
@2002-11-06  Andrew Cagney  <ac131313@@redhat.com>

	* regcache.h (deprecated_register_valid): Rename register_valid.
	* regcache.c: Update.
	* ia64-aix-nat.c: Update.
	* i386gnu-nat.c: Update.
	* alpha-nat.c: Update.
	* sparc-nat.c: Update.
	* lynx-nat.c: Update.
	* remote-mips.c: Update.
@
text
@d88 1
a88 1
    memcpy (&(gregsetp->_fld_), &registers[REGISTER_BYTE (_regi_)], \
d111 1
a111 1
	      &registers[REGISTER_BYTE (IA64_BSP_REGNUM)],
d113 2
a114 2
      memcpy (&registers[REGISTER_BYTE (IA64_BSPSTORE_REGNUM)],
	      &registers[REGISTER_BYTE (IA64_BSP_REGNUM)],
d156 1
a156 1
	  from = (char *) &registers[REGISTER_BYTE (regi)];
@


1.2
log
@Create new file regcache.h.  Update all uses.
@
text
@d74 1
a74 1
    register_valid[regi] = 1;
d76 1
a76 1
    register_valid[regi] = 1;
d78 1
a78 1
    register_valid[regi] = 1;
@


1.2.26.1
log
@Merge drow-cplus-branch to:
  cvs rtag -D 2003-12-14 00:00:00 UTC drow-cplus-merge-20031214 gdb+dejagnu
@
text
@d1 2
a2 3
/* Low level interface to IA-64 running AIX for GDB, the GNU debugger.

   Copyright 2000, 2001, 2003 Free Software Foundation, Inc.
d74 1
a74 1
    deprecated_register_valid[regi] = 1;
d76 1
a76 1
    deprecated_register_valid[regi] = 1;
d78 1
a78 1
    deprecated_register_valid[regi] = 1;
d88 2
a89 2
    memcpy (&(gregsetp->_fld_), &deprecated_registers[DEPRECATED_REGISTER_BYTE (_regi_)], \
	    DEPRECATED_REGISTER_RAW_SIZE (_regi_))
d111 5
a115 5
	      &deprecated_registers[DEPRECATED_REGISTER_BYTE (IA64_BSP_REGNUM)],
	      DEPRECATED_REGISTER_RAW_SIZE (IA64_BSP_REGNUM));
      memcpy (&deprecated_registers[DEPRECATED_REGISTER_BYTE (IA64_BSPSTORE_REGNUM)],
	      &deprecated_registers[DEPRECATED_REGISTER_BYTE (IA64_BSP_REGNUM)],
	      DEPRECATED_REGISTER_RAW_SIZE (IA64_BSP_REGNUM));
d138 1
a138 1
  int regi;
d156 1
a156 1
	  from = (char *) &deprecated_registers[DEPRECATED_REGISTER_BYTE (regi)];
d158 1
a158 1
	  memcpy (to, from, DEPRECATED_REGISTER_RAW_SIZE (regi));
@


1.2.24.1
log
@2002-11-15  David Carlton  <carlton@@math.stanford.edu>

	* Merge from mainline; tag is carlton_dictionary-20021115-merge.
@
text
@d74 1
a74 1
    deprecated_register_valid[regi] = 1;
d76 1
a76 1
    deprecated_register_valid[regi] = 1;
d78 1
a78 1
    deprecated_register_valid[regi] = 1;
d88 1
a88 1
    memcpy (&(gregsetp->_fld_), &deprecated_registers[REGISTER_BYTE (_regi_)], \
d111 1
a111 1
	      &deprecated_registers[REGISTER_BYTE (IA64_BSP_REGNUM)],
d113 2
a114 2
      memcpy (&deprecated_registers[REGISTER_BYTE (IA64_BSPSTORE_REGNUM)],
	      &deprecated_registers[REGISTER_BYTE (IA64_BSP_REGNUM)],
d156 1
a156 1
	  from = (char *) &deprecated_registers[REGISTER_BYTE (regi)];
@


1.2.24.2
log
@2003-09-17  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton_dictionary-20030917-merge.
@
text
@d1 2
a2 3
/* Low level interface to IA-64 running AIX for GDB, the GNU debugger.

   Copyright 2000, 2001, 2003 Free Software Foundation, Inc.
d88 1
a88 1
    memcpy (&(gregsetp->_fld_), &deprecated_registers[DEPRECATED_REGISTER_BYTE (_regi_)], \
d111 1
a111 1
	      &deprecated_registers[DEPRECATED_REGISTER_BYTE (IA64_BSP_REGNUM)],
d113 2
a114 2
      memcpy (&deprecated_registers[DEPRECATED_REGISTER_BYTE (IA64_BSPSTORE_REGNUM)],
	      &deprecated_registers[DEPRECATED_REGISTER_BYTE (IA64_BSP_REGNUM)],
d138 1
a138 1
  int regi;
d156 1
a156 1
	  from = (char *) &deprecated_registers[DEPRECATED_REGISTER_BYTE (regi)];
@


1.2.24.3
log
@2003-11-11  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton-dictionary-20031111-merge.
@
text
@d90 1
a90 1
	    DEPRECATED_REGISTER_RAW_SIZE (_regi_))
d113 1
a113 1
	      DEPRECATED_REGISTER_RAW_SIZE (IA64_BSP_REGNUM));
d116 1
a116 1
	      DEPRECATED_REGISTER_RAW_SIZE (IA64_BSP_REGNUM));
d159 1
a159 1
	  memcpy (to, from, DEPRECATED_REGISTER_RAW_SIZE (regi));
@


1.1
log
@Made changes to shared library support and added more of the support needed
for AIX/IA-64.
@
text
@d25 1
@

