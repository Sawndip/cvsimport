head	1.3;
access;
symbols
	gdb_5_1_1-2002-01-24-release:1.2
	gdb_5_1_0_1-2002-01-03-release:1.2
	gdb_5_1_0_1-2002-01-03-branchpoint:1.2
	gdb_5_1_0_1-2002-01-03-branch:1.2.0.8
	gdb_5_1-2001-11-21-release:1.2
	gdb_s390-2001-09-26-branch:1.2.0.6
	gdb_s390-2001-09-26-branchpoint:1.2
	gdb_5_1-2001-07-29-branch:1.2.0.4
	gdb_5_1-2001-07-29-branchpoint:1.2
	dberlin-typesystem-branch:1.2.0.2
	dberlin-typesystem-branchpoint:1.2
	gdb-post-ptid_t-2001-05-03:1.2
	gdb-pre-ptid_t-2001-05-03:1.2
	insight-precleanup-2001-01-01:1.1.1.1
	gdb-post-protoization-2000-07-29:1.1.1.1
	gdb-pre-protoization-2000-07-29:1.1.1.1
	gdb-premipsmulti-2000-06-06-branch:1.1.1.1.0.6
	gdb-premipsmulti-2000-06-06-branchpoint:1.1.1.1
	gdb-post-params-removal-2000-06-04:1.1.1.1
	gdb-pre-params-removal-2000-06-04:1.1.1.1
	gdb-post-params-removal-2000-05-28:1.1.1.1
	gdb-pre-params-removal-2000-05-28:1.1.1.1
	gdb_5_0-2000-05-19-release:1.1.1.1
	gdb_4_18_2-2000-05-18-release:1.1.1.1
	gdb_4_95_1-2000-05-11-snapshot:1.1.1.1
	gdb_4_95_0-2000-04-27-snapshot:1.1.1.1
	gdb_5_0-2000-04-10-branch:1.1.1.1.0.4
	gdb_5_0-2000-04-10-branchpoint:1.1.1.1
	repo-unification-2000-02-06:1.1.1.1
	insight-2000-02-04:1.1.1.1
	gdb-2000-02-04:1.1.1.1
	gdb-2000-02-02:1.1.1.1
	gdb-2000-02-01:1.1.1.1
	gdb-2000-01-31:1.1.1.1
	gdb-2000-01-26:1.1.1.1
	gdb-2000-01-24:1.1.1.1
	gdb-2000-01-17:1.1.1.1
	gdb-2000-01-10:1.1.1.1
	gdb-2000-01-05:1.1.1.1
	gdb-1999-12-21:1.1.1.1
	gdb-1999-12-13:1.1.1.1
	gdb-1999-12-07:1.1.1.1
	gdb-1999-12-06:1.1.1.1
	gdb-1999-11-16:1.1.1.1
	gdb-1999-11-08:1.1.1.1
	gdb-1999-11-01:1.1.1.1
	gdb-1999-10-25:1.1.1.1
	gdb-1999-10-18:1.1.1.1
	gdb-1999-10-11:1.1.1.1
	gdb-1999-10-04:1.1.1.1
	gdb-1999-09-28:1.1.1.1
	gdb-1999-09-21:1.1.1.1
	gdb-1999-09-13:1.1.1.1
	gdb-1999-09-08:1.1.1.1
	gdb-1999-08-30:1.1.1.1
	gdb-1999-08-23:1.1.1.1
	gdb-1999-08-16:1.1.1.1
	gdb-1999-08-09:1.1.1.1
	gdb-1999-08-02:1.1.1.1
	gdb-1999-07-26:1.1.1.1
	gdb-1999-07-19:1.1.1.1
	gdb-1999-07-12:1.1.1.1
	gdb-post-reformat-19990707:1.1.1.1
	gdb-1999-07-07-post-reformat-snapshot:1.1.1.1
	gdb-pre-reformat-19990707:1.1.1.1
	gdb-1999-07-07:1.1.1.1
	gdb-1999-07-05:1.1.1.1
	gdb-1999-06-28:1.1.1.1
	gdb-1999-06-21:1.1.1.1
	gdb-1999-06-14:1.1.1.1
	gdb-1999-06-07:1.1.1.1
	gdb-1999-06-01:1.1.1.1
	gdb-4_18-branch:1.1.1.1.0.2
	gdb-4_18-release:1.1.1.1
	gdb-1999-05-25:1.1.1.1
	gdb-1999-05-19:1.1.1.1
	gdb-1999-05-10:1.1.1.1
	gdb-19990504:1.1.1.1
	gdb-19990422:1.1.1.1
	SNAPSHOT:1.1.1
	gdb-4_18:1.1.1.1
	GDB_4_18:1.1.1;
locks; strict;
comment	@# @;
expand	@o@;


1.3
date	2002.01.05.05.54.29;	author cagney;	state dead;
branches;
next	1.2;

1.2
date	2001.04.19.23.56.13;	author cagney;	state Exp;
branches;
next	1.1;

1.1
date	99.04.16.01.34.03;	author shebs;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.04.16.01.34.03;	author shebs;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Remove obsolete MacOS support.
@
text
@# OBSOLETE # Sed commands that finish translating the GDB Unix Makefile to MPW syntax.
# OBSOLETE 
# OBSOLETE /^host_alias =/s/^/#/
# OBSOLETE /^target_alias =/s/^/#/
# OBSOLETE 
# OBSOLETE /^host_makefile_frag@@$/d
# OBSOLETE /^target_makefile_frag@@$/d
# OBSOLETE 
# OBSOLETE /@@ENABLE_CFLAGS@@/s/@@ENABLE_CFLAGS@@/{ENABLE_CFLAGS}/g
# OBSOLETE /^ENABLE_CFLAGS=/s/^/#/
# OBSOLETE 
# OBSOLETE # Edit all the symbolic definitions pointing to various libraries and such.
# OBSOLETE 
# OBSOLETE /^INCLUDE_DIR = /s/"{srcdir}":include/"{topsrcdir}"include:/
# OBSOLETE 
# OBSOLETE /^MMALLOC_DIR = /s/::mmalloc/mmalloc:/
# OBSOLETE /^MMALLOC_SRC = /s/"{srcdir}"/"{topsrcdir}"/
# OBSOLETE /^MMALLOC =/s/=.*$/=/
# OBSOLETE /MMALLOC_CFLAGS =/s/=.*$/= -u USE_MMALLOC/
# OBSOLETE 
# OBSOLETE /^BFD_DIR = /s/::bfd/bfd:/
# OBSOLETE /^BFD = /s/{BFD_DIR}:libbfd/{BFD_DIR}libbfd/
# OBSOLETE /^BFD_SRC = /s/"{srcdir}"/"{topsrcdir}"/
# OBSOLETE 
# OBSOLETE /^READLINE_DIR = /s/::readline/readline:/
# OBSOLETE /^READLINE =/s/=.*$/=/
# OBSOLETE /^READLINE_SRC = /s/"{srcdir}"/"{topsrcdir}"/
# OBSOLETE 
# OBSOLETE /^INCLUDE_CFLAGS = /s/$/ -i "{topsrcdir}"include:mpw: -i ::extra-include:/
# OBSOLETE 
# OBSOLETE /^SER_HARDWIRE =/s/ser-unix/ser-mac/
# OBSOLETE 
# OBSOLETE /^TERMCAP =/s/ =.*$/ =/
# OBSOLETE 
# OBSOLETE # Whack out various autoconf vars that we don't need.
# OBSOLETE /@@CONFIG_LDFLAGS@@/s/@@CONFIG_LDFLAGS@@//g
# OBSOLETE /@@HLDFLAGS@@/s/@@HLDFLAGS@@//g
# OBSOLETE /@@DEFS@@/s/@@DEFS@@//g
# OBSOLETE /@@YACC@@/s/@@YACC@@/byacc/g
# OBSOLETE /@@ENABLE_OBS@@/s/@@ENABLE_OBS@@//g
# OBSOLETE /@@ENABLE_CLIBS@@/s/@@ENABLE_CLIBS@@//g
# OBSOLETE /@@LIBS@@/s/@@LIBS@@//g
# OBSOLETE 
# OBSOLETE # Whack out autoconf hook for thread debugging.
# OBSOLETE /@@THREAD_DB_OBS@@/s/@@THREAD_DB_OBS@@//g
# OBSOLETE 
# OBSOLETE # Fix up paths to include directories.
# OBSOLETE /INCLUDE_DIR/s/"{s}"{INCLUDE_DIR}/{INCLUDE_DIR}/g
# OBSOLETE /INCLUDE_DIR/s/{INCLUDE_DIR}:/{INCLUDE_DIR}/g
# OBSOLETE /INCLUDE_DIR/s/"{INCLUDE_DIR}":/"{INCLUDE_DIR}"/g
# OBSOLETE 
# OBSOLETE /{BFD_DIR}/s/"{BFD_DIR}":/"{BFD_DIR}"/g
# OBSOLETE /{BFD_DIR}/s/\([ 	]\){BFD_DIR}/\1::{BFD_DIR}/g
# OBSOLETE /{BFD_DIR}/s/\([ 	]\)"{BFD_DIR}"/\1::"{BFD_DIR}"/g
# OBSOLETE 
# OBSOLETE /{BFD_SRC}/s/"{s}"{BFD_SRC}/{BFD_SRC}/g
# OBSOLETE /{BFD_SRC}/s/{BFD_SRC}:/{BFD_SRC}/g
# OBSOLETE 
# OBSOLETE /{READLINE_SRC}/s/"{s}"{READLINE_SRC}/{READLINE_SRC}/g
# OBSOLETE 
# OBSOLETE /^readline_headers =/,/^$/c\
# OBSOLETE readline_headers =\
# OBSOLETE 
# OBSOLETE 
# OBSOLETE # This isn't really useful, and seems to cause nonsensical complaints.
# OBSOLETE /{ALLDEPFILES}/s/{ALLDEPFILES}//g
# OBSOLETE 
# OBSOLETE /^copying.c \\Option-f /,/^$/d
# OBSOLETE 
# OBSOLETE # Fix the syntax of bits of C code that go into version.c.
# OBSOLETE /char /s/'char .Option-x/'char */
# OBSOLETE 
# OBSOLETE # Point at files in the obj dir rather than src dir.
# OBSOLETE /version/s/"{s}"version\.c/"{o}"version.c/g
# OBSOLETE /version/s/^version\.c/"{o}"version.c/
# OBSOLETE /config/s/"{s}"config\.h/"{o}"config.h/g
# OBSOLETE /config/s/^config\.h/"{o}"config.h/
# OBSOLETE /xm/s/"{s}"xm\.h/"{o}"xm.h/g
# OBSOLETE /xm/s/^xm\.h/"{o}"xm.h/
# OBSOLETE /tm/s/"{s}"tm\.h/"{o}"tm.h/g
# OBSOLETE /tm/s/^tm\.h/"{o}"tm.h/
# OBSOLETE /nm/s/"{s}"nm\.h/"{o}"nm.h/g
# OBSOLETE /nm/s/^nm\.h/"{o}"nm.h/
# OBSOLETE 
# OBSOLETE /exp.tab.c/s/"{s}"\([a-z0-9]*\)-exp\.tab\.c/"{o}"\1-exp.tab.c/g
# OBSOLETE /exp.tab.c/s/^\([a-z0-9]*\)-exp\.tab\.c/"{o}"\1-exp.tab.c/
# OBSOLETE 
# OBSOLETE /y.tab/s/"{s}"y.tab\.c/"{o}"y.tab.c/g
# OBSOLETE /y.tab/s/^y.tab\.c/"{o}"y.tab.c/
# OBSOLETE 
# OBSOLETE /init/s/"{s}"init\.c-tmp/"{o}"init.c-tmp/g
# OBSOLETE /init/s/^init\.c-tmp/"{o}"init.c-tmp/
# OBSOLETE /init/s/"{s}"init\.c/"{o}"init.c/g
# OBSOLETE /init/s/^init\.c/"{o}"init.c/
# OBSOLETE 
# OBSOLETE # Fix up the generation of version.c.
# OBSOLETE /"{o}"version.c \\Option-f Makefile/,/^$/c\
# OBSOLETE "{o}"version.c \\Option-f Makefile\
# OBSOLETE 	echo -n 'char *version = "'	 >"{o}"version.c\
# OBSOLETE 	echo -n "{VERSION}"		>>"{o}"version.c\
# OBSOLETE 	echo '";'			>>"{o}"version.c\
# OBSOLETE 	echo -n 'char *host_name = "'	>>"{o}"version.c\
# OBSOLETE 	echo -n "{host_alias}"		>>"{o}"version.c\
# OBSOLETE 	echo '";'			>>"{o}"version.c\
# OBSOLETE 	echo -n 'char *target_name = "'	>>"{o}"version.c\
# OBSOLETE 	echo -n "{target_alias}"	>>"{o}"version.c\
# OBSOLETE 	echo '";'			>>"{o}"version.c\
# OBSOLETE 
# OBSOLETE 
# OBSOLETE /ansidecl/s/include "{s}""ansidecl.h"/include "ansidecl.h"/
# OBSOLETE 
# OBSOLETE # Open-brace in a command causes much confusion; replace with the
# OBSOLETE # result from a script.
# OBSOLETE /initialize_all_files ()/c\
# OBSOLETE 	Echo -n 'void initialize_all_files () ' >> "{o}"init.c-tmp\
# OBSOLETE 	open-brace >> "{o}"init.c-tmp
# OBSOLETE 
# OBSOLETE # Replace the whole sed bit for init.c; it's simpler that way...
# OBSOLETE /echo {OBS} {TSOBS}/,/echo '}'/c\
# OBSOLETE 	For i in {OBS} {TSOBS}\
# OBSOLETE           Set filename "`Echo {i} | sed \\Option-d\
# OBSOLETE             -e '/^Onindy.c.o/d' \\Option-d\
# OBSOLETE             -e '/^nindy.c.o/d' \\Option-d\
# OBSOLETE             -e '/ttyflush.c.o/d' \\Option-d\
# OBSOLETE             -e '/xdr_ld.c.o/d' \\Option-d\
# OBSOLETE             -e '/xdr_ptrace.c.o/d' \\Option-d\
# OBSOLETE             -e '/xdr_rdb.c.o/d' \\Option-d\
# OBSOLETE             -e '/udr.c.o/d' \\Option-d\
# OBSOLETE             -e '/udip2soc.c.o/d' \\Option-d\
# OBSOLETE             -e '/udi2go32.c.o/d' \\Option-d\
# OBSOLETE             -e '/version.c.o/d' \\Option-d\
# OBSOLETE             -e '/[a-z0-9A-Z_]*-exp.tab.c.o/d' \\Option-d\
# OBSOLETE             -e 's/\\.c\\.o/.c/' \\Option-d\
# OBSOLETE             -e 's/^://'`"\
# OBSOLETE           If "{filename}" != ""\
# OBSOLETE             sed <"{s}""{filename}" >>"{o}"init.c-tmp -n \\Option-d\
# OBSOLETE             -e '/^_initialize_[a-z_0-9A-Z]* *(/s/^\\([a-z_0-9A-Z]*\\).*/  {extern void \\1 (); \\1 ();}/p'\
# OBSOLETE           End If\
# OBSOLETE 	End For\
# OBSOLETE 	Echo '}' >>"{o}"init.c-tmp
# OBSOLETE 
# OBSOLETE # Fix the main compile/link command.
# OBSOLETE /{CC_LD} {INTERNAL_LDFLAGS} -o gdb/,/"{o}"init.c.o {OBS} {TSOBS} {ADD_FILES} {CLIBS} {LOADLIBES}/c\
# OBSOLETE 	{CC_LD} {INTERNAL_LDFLAGS} -o gdb{PROG_EXT} "{o}"init.c.o {OBS} {TSOBS} {ADD_FILES} {CLIBS} {LOADLIBES} {EXTRALIBS}\
# OBSOLETE 	{MAKEPEF} gdb{PROG_EXT} -o gdb {MAKEPEF_TOOL_FLAGS} {MAKEPEF_FLAGS}\
# OBSOLETE 	{REZ} "{s}"mac-gdb.r -o gdb -append -d PROG_NAME='"'gdb'"' -d VERSION_STRING='"'{version}'"'\
# OBSOLETE 
# OBSOLETE # Replace the install actions with MPW-friendly script.
# OBSOLETE /^install \\Option-f /,/^$/c\
# OBSOLETE install \\Option-f all install-only\
# OBSOLETE \
# OBSOLETE install-only \\Option-f \
# OBSOLETE 	NewFolderRecursive "{bindir}"\
# OBSOLETE 	Duplicate -y gdb "{bindir}"gdb\
# OBSOLETE 	If "`Exists SiowGDB`" != ""\
# OBSOLETE 		Duplicate -y SiowGDB "{bindir}"SiowGDB\
# OBSOLETE 	End If\
# OBSOLETE 
# OBSOLETE 
# OBSOLETE # Don't do any recursive subdir stuff.
# OBSOLETE / subdir_do/s/{MAKE}/null-command/
# OBSOLETE 
# OBSOLETE # Edit out actions that only confuse MPW Make.
# OBSOLETE /^config.status \\Option-f/,/^$/d
# OBSOLETE /^Makefile \\Option-f/,/^$/d
# OBSOLETE 
# OBSOLETE # Don't test config.h dependencies.
# OBSOLETE /^"{o}"config.h \\Option-f/s/^/#/
# OBSOLETE 
# OBSOLETE # Add an action to build SIOWgdb.
# OBSOLETE $a\
# OBSOLETE SIOWgdb \\Option-f {OBS} {TSOBS} {ADD_DEPS} {CDEPS} "{o}"init.c.o\
# OBSOLETE 	Delete -i -y SIOWgdb\
# OBSOLETE 	{CC_LD} {INTERNAL_LDFLAGS} -t 'APPL' -c 'gdb ' -o SIOWgdb{PROG_EXT} "{o}"init.c.o {OBS} {TSOBS} {ADD_FILES} {CLIBS} {SIOW_LIB} {LOADLIBES} {EXTRALIBS}\
# OBSOLETE 	{MAKEPEF} SIOWgdb{PROG_EXT} -o SIOWgdb -ft 'APPL' -fc 'gdb ' {MAKEPEF_FLAGS} \
# OBSOLETE 	{REZ} -o SIOWgdb "{RIncludes}"siow.r -append -d __kPrefSize=5000 -d __kMinSize=2000 -d APPNAME='"'SIOWgdb'"' \
# OBSOLETE 	{REZ} "{s}"mac-gdb.r -o SIOWgdb -append -d VERSION_STRING='"'{version}'"'\

@


1.2
log
@Obsolete MPW as host.
@
text
@@


1.1
log
@Initial revision
@
text
@d1 177
a177 177
# Sed commands that finish translating the GDB Unix Makefile to MPW syntax.

/^host_alias =/s/^/#/
/^target_alias =/s/^/#/

/^host_makefile_frag@@$/d
/^target_makefile_frag@@$/d

/@@ENABLE_CFLAGS@@/s/@@ENABLE_CFLAGS@@/{ENABLE_CFLAGS}/g
/^ENABLE_CFLAGS=/s/^/#/

# Edit all the symbolic definitions pointing to various libraries and such.

/^INCLUDE_DIR = /s/"{srcdir}":include/"{topsrcdir}"include:/

/^MMALLOC_DIR = /s/::mmalloc/mmalloc:/
/^MMALLOC_SRC = /s/"{srcdir}"/"{topsrcdir}"/
/^MMALLOC =/s/=.*$/=/
/MMALLOC_CFLAGS =/s/=.*$/= -u USE_MMALLOC/

/^BFD_DIR = /s/::bfd/bfd:/
/^BFD = /s/{BFD_DIR}:libbfd/{BFD_DIR}libbfd/
/^BFD_SRC = /s/"{srcdir}"/"{topsrcdir}"/

/^READLINE_DIR = /s/::readline/readline:/
/^READLINE =/s/=.*$/=/
/^READLINE_SRC = /s/"{srcdir}"/"{topsrcdir}"/

/^INCLUDE_CFLAGS = /s/$/ -i "{topsrcdir}"include:mpw: -i ::extra-include:/

/^SER_HARDWIRE =/s/ser-unix/ser-mac/

/^TERMCAP =/s/ =.*$/ =/

# Whack out various autoconf vars that we don't need.
/@@CONFIG_LDFLAGS@@/s/@@CONFIG_LDFLAGS@@//g
/@@HLDFLAGS@@/s/@@HLDFLAGS@@//g
/@@DEFS@@/s/@@DEFS@@//g
/@@YACC@@/s/@@YACC@@/byacc/g
/@@ENABLE_OBS@@/s/@@ENABLE_OBS@@//g
/@@ENABLE_CLIBS@@/s/@@ENABLE_CLIBS@@//g
/@@LIBS@@/s/@@LIBS@@//g

# Whack out autoconf hook for thread debugging.
/@@THREAD_DB_OBS@@/s/@@THREAD_DB_OBS@@//g

# Fix up paths to include directories.
/INCLUDE_DIR/s/"{s}"{INCLUDE_DIR}/{INCLUDE_DIR}/g
/INCLUDE_DIR/s/{INCLUDE_DIR}:/{INCLUDE_DIR}/g
/INCLUDE_DIR/s/"{INCLUDE_DIR}":/"{INCLUDE_DIR}"/g

/{BFD_DIR}/s/"{BFD_DIR}":/"{BFD_DIR}"/g
/{BFD_DIR}/s/\([ 	]\){BFD_DIR}/\1::{BFD_DIR}/g
/{BFD_DIR}/s/\([ 	]\)"{BFD_DIR}"/\1::"{BFD_DIR}"/g

/{BFD_SRC}/s/"{s}"{BFD_SRC}/{BFD_SRC}/g
/{BFD_SRC}/s/{BFD_SRC}:/{BFD_SRC}/g

/{READLINE_SRC}/s/"{s}"{READLINE_SRC}/{READLINE_SRC}/g

/^readline_headers =/,/^$/c\
readline_headers =\


# This isn't really useful, and seems to cause nonsensical complaints.
/{ALLDEPFILES}/s/{ALLDEPFILES}//g

/^copying.c \\Option-f /,/^$/d

# Fix the syntax of bits of C code that go into version.c.
/char /s/'char .Option-x/'char */

# Point at files in the obj dir rather than src dir.
/version/s/"{s}"version\.c/"{o}"version.c/g
/version/s/^version\.c/"{o}"version.c/
/config/s/"{s}"config\.h/"{o}"config.h/g
/config/s/^config\.h/"{o}"config.h/
/xm/s/"{s}"xm\.h/"{o}"xm.h/g
/xm/s/^xm\.h/"{o}"xm.h/
/tm/s/"{s}"tm\.h/"{o}"tm.h/g
/tm/s/^tm\.h/"{o}"tm.h/
/nm/s/"{s}"nm\.h/"{o}"nm.h/g
/nm/s/^nm\.h/"{o}"nm.h/

/exp.tab.c/s/"{s}"\([a-z0-9]*\)-exp\.tab\.c/"{o}"\1-exp.tab.c/g
/exp.tab.c/s/^\([a-z0-9]*\)-exp\.tab\.c/"{o}"\1-exp.tab.c/

/y.tab/s/"{s}"y.tab\.c/"{o}"y.tab.c/g
/y.tab/s/^y.tab\.c/"{o}"y.tab.c/

/init/s/"{s}"init\.c-tmp/"{o}"init.c-tmp/g
/init/s/^init\.c-tmp/"{o}"init.c-tmp/
/init/s/"{s}"init\.c/"{o}"init.c/g
/init/s/^init\.c/"{o}"init.c/

# Fix up the generation of version.c.
/"{o}"version.c \\Option-f Makefile/,/^$/c\
"{o}"version.c \\Option-f Makefile\
	echo -n 'char *version = "'	 >"{o}"version.c\
	echo -n "{VERSION}"		>>"{o}"version.c\
	echo '";'			>>"{o}"version.c\
	echo -n 'char *host_name = "'	>>"{o}"version.c\
	echo -n "{host_alias}"		>>"{o}"version.c\
	echo '";'			>>"{o}"version.c\
	echo -n 'char *target_name = "'	>>"{o}"version.c\
	echo -n "{target_alias}"	>>"{o}"version.c\
	echo '";'			>>"{o}"version.c\


/ansidecl/s/include "{s}""ansidecl.h"/include "ansidecl.h"/

# Open-brace in a command causes much confusion; replace with the
# result from a script.
/initialize_all_files ()/c\
	Echo -n 'void initialize_all_files () ' >> "{o}"init.c-tmp\
	open-brace >> "{o}"init.c-tmp

# Replace the whole sed bit for init.c; it's simpler that way...
/echo {OBS} {TSOBS}/,/echo '}'/c\
	For i in {OBS} {TSOBS}\
          Set filename "`Echo {i} | sed \\Option-d\
            -e '/^Onindy.c.o/d' \\Option-d\
            -e '/^nindy.c.o/d' \\Option-d\
            -e '/ttyflush.c.o/d' \\Option-d\
            -e '/xdr_ld.c.o/d' \\Option-d\
            -e '/xdr_ptrace.c.o/d' \\Option-d\
            -e '/xdr_rdb.c.o/d' \\Option-d\
            -e '/udr.c.o/d' \\Option-d\
            -e '/udip2soc.c.o/d' \\Option-d\
            -e '/udi2go32.c.o/d' \\Option-d\
            -e '/version.c.o/d' \\Option-d\
            -e '/[a-z0-9A-Z_]*-exp.tab.c.o/d' \\Option-d\
            -e 's/\\.c\\.o/.c/' \\Option-d\
            -e 's/^://'`"\
          If "{filename}" != ""\
            sed <"{s}""{filename}" >>"{o}"init.c-tmp -n \\Option-d\
            -e '/^_initialize_[a-z_0-9A-Z]* *(/s/^\\([a-z_0-9A-Z]*\\).*/  {extern void \\1 (); \\1 ();}/p'\
          End If\
	End For\
	Echo '}' >>"{o}"init.c-tmp

# Fix the main compile/link command.
/{CC_LD} {INTERNAL_LDFLAGS} -o gdb/,/"{o}"init.c.o {OBS} {TSOBS} {ADD_FILES} {CLIBS} {LOADLIBES}/c\
	{CC_LD} {INTERNAL_LDFLAGS} -o gdb{PROG_EXT} "{o}"init.c.o {OBS} {TSOBS} {ADD_FILES} {CLIBS} {LOADLIBES} {EXTRALIBS}\
	{MAKEPEF} gdb{PROG_EXT} -o gdb {MAKEPEF_TOOL_FLAGS} {MAKEPEF_FLAGS}\
	{REZ} "{s}"mac-gdb.r -o gdb -append -d PROG_NAME='"'gdb'"' -d VERSION_STRING='"'{version}'"'\

# Replace the install actions with MPW-friendly script.
/^install \\Option-f /,/^$/c\
install \\Option-f all install-only\
\
install-only \\Option-f \
	NewFolderRecursive "{bindir}"\
	Duplicate -y gdb "{bindir}"gdb\
	If "`Exists SiowGDB`" != ""\
		Duplicate -y SiowGDB "{bindir}"SiowGDB\
	End If\


# Don't do any recursive subdir stuff.
/ subdir_do/s/{MAKE}/null-command/

# Edit out actions that only confuse MPW Make.
/^config.status \\Option-f/,/^$/d
/^Makefile \\Option-f/,/^$/d

# Don't test config.h dependencies.
/^"{o}"config.h \\Option-f/s/^/#/

# Add an action to build SIOWgdb.
$a\
SIOWgdb \\Option-f {OBS} {TSOBS} {ADD_DEPS} {CDEPS} "{o}"init.c.o\
	Delete -i -y SIOWgdb\
	{CC_LD} {INTERNAL_LDFLAGS} -t 'APPL' -c 'gdb ' -o SIOWgdb{PROG_EXT} "{o}"init.c.o {OBS} {TSOBS} {ADD_FILES} {CLIBS} {SIOW_LIB} {LOADLIBES} {EXTRALIBS}\
	{MAKEPEF} SIOWgdb{PROG_EXT} -o SIOWgdb -ft 'APPL' -fc 'gdb ' {MAKEPEF_FLAGS} \
	{REZ} -o SIOWgdb "{RIncludes}"siow.r -append -d __kPrefSize=5000 -d __kMinSize=2000 -d APPNAME='"'SIOWgdb'"' \
	{REZ} "{s}"mac-gdb.r -o SIOWgdb -append -d VERSION_STRING='"'{version}'"'\
@


1.1.1.1
log
@Initial creation of sourceware repository
@
text
@@

