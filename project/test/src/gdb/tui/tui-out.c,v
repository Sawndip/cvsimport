head	1.22;
access;
symbols
	gdb_7_6_1-2013-08-30-release:1.22
	gdb_7_6-2013-04-26-release:1.22
	gdb_7_6-branch:1.22.0.2
	gdb_7_6-2013-03-12-branchpoint:1.22
	gdb_7_5_1-2012-11-29-release:1.20
	gdb_7_5-2012-08-17-release:1.20
	gdb_7_5-branch:1.20.0.2
	gdb_7_5-2012-07-18-branchpoint:1.20
	gdb_7_4_1-2012-04-26-release:1.19.4.1
	gdb_7_4-2012-01-24-release:1.19.4.1
	gdb_7_4-branch:1.19.0.4
	gdb_7_4-2011-12-13-branchpoint:1.19
	gdb_7_3_1-2011-09-04-release:1.19
	gdb_7_3-2011-07-26-release:1.19
	gdb_7_3-branch:1.19.0.2
	gdb_7_3-2011-04-01-branchpoint:1.19
	gdb_7_2-2010-09-02-release:1.18
	gdb_7_2-branch:1.18.0.2
	gdb_7_2-2010-07-07-branchpoint:1.18
	gdb_7_1-2010-03-18-release:1.16
	gdb_7_1-branch:1.16.0.2
	gdb_7_1-2010-02-18-branchpoint:1.16
	gdb_7_0_1-2009-12-22-release:1.15
	gdb_7_0-2009-10-06-release:1.15
	gdb_7_0-branch:1.15.0.4
	gdb_7_0-2009-09-16-branchpoint:1.15
	arc-sim-20090309:1.14
	msnyder-checkpoint-072509-branch:1.15.0.2
	msnyder-checkpoint-072509-branchpoint:1.15
	arc-insight_6_8-branch:1.14.0.16
	arc-insight_6_8-branchpoint:1.14
	insight_6_8-branch:1.14.0.14
	insight_6_8-branchpoint:1.14
	reverse-20081226-branch:1.14.0.12
	reverse-20081226-branchpoint:1.14
	multiprocess-20081120-branch:1.14.0.10
	multiprocess-20081120-branchpoint:1.14
	reverse-20080930-branch:1.14.0.8
	reverse-20080930-branchpoint:1.14
	reverse-20080717-branch:1.14.0.6
	reverse-20080717-branchpoint:1.14
	msnyder-reverse-20080609-branch:1.14.0.4
	msnyder-reverse-20080609-branchpoint:1.14
	drow-reverse-20070409-branch:1.10.0.2
	drow-reverse-20070409-branchpoint:1.10
	gdb_6_8-2008-03-27-release:1.14
	gdb_6_8-branch:1.14.0.2
	gdb_6_8-2008-02-26-branchpoint:1.14
	gdb_6_7_1-2007-10-29-release:1.13
	gdb_6_7-2007-10-10-release:1.13
	gdb_6_7-branch:1.13.0.2
	gdb_6_7-2007-09-07-branchpoint:1.13
	insight_6_6-20070208-release:1.9
	gdb_6_6-2006-12-18-release:1.9
	gdb_6_6-branch:1.9.0.18
	gdb_6_6-2006-11-15-branchpoint:1.9
	insight_6_5-20061003-release:1.9
	gdb-csl-symbian-6_4_50_20060226-12:1.9
	gdb-csl-sourcerygxx-3_4_4-25:1.8
	nickrob-async-20060828-mergepoint:1.9
	gdb-csl-symbian-6_4_50_20060226-11:1.9
	gdb-csl-sourcerygxx-4_1-17:1.9
	gdb-csl-20060226-branch-local-2:1.9
	gdb-csl-sourcerygxx-4_1-14:1.9
	gdb-csl-sourcerygxx-4_1-13:1.9
	gdb-csl-sourcerygxx-4_1-12:1.9
	gdb-csl-sourcerygxx-3_4_4-21:1.9
	gdb_6_5-20060621-release:1.9
	gdb-csl-sourcerygxx-4_1-9:1.9
	gdb-csl-sourcerygxx-4_1-8:1.9
	gdb-csl-sourcerygxx-4_1-7:1.9
	gdb-csl-arm-2006q1-6:1.9
	gdb-csl-sourcerygxx-4_1-6:1.9
	gdb-csl-symbian-6_4_50_20060226-10:1.9
	gdb-csl-symbian-6_4_50_20060226-9:1.9
	gdb-csl-symbian-6_4_50_20060226-8:1.9
	gdb-csl-coldfire-4_1-11:1.9
	gdb-csl-sourcerygxx-3_4_4-19:1.9
	gdb-csl-coldfire-4_1-10:1.9
	gdb_6_5-branch:1.9.0.16
	gdb_6_5-2006-05-14-branchpoint:1.9
	gdb-csl-sourcerygxx-4_1-5:1.9
	nickrob-async-20060513-branch:1.9.0.14
	nickrob-async-20060513-branchpoint:1.9
	gdb-csl-sourcerygxx-4_1-4:1.9
	msnyder-reverse-20060502-branch:1.9.0.12
	msnyder-reverse-20060502-branchpoint:1.9
	gdb-csl-morpho-4_1-4:1.9
	gdb-csl-sourcerygxx-3_4_4-17:1.9
	readline_5_1-import-branch:1.9.0.10
	readline_5_1-import-branchpoint:1.9
	gdb-csl-20060226-branch-merge-to-csl-symbian-1:1.9
	gdb-csl-symbian-20060226-branch:1.9.0.8
	gdb-csl-symbian-20060226-branchpoint:1.9
	gdb-csl-20060226-branch-merge-to-csl-local-1:1.9
	msnyder-reverse-20060331-branch:1.9.0.6
	msnyder-reverse-20060331-branchpoint:1.9
	gdb-csl-available-20060303-branch:1.9.0.4
	gdb-csl-available-20060303-branchpoint:1.9
	gdb-csl-20060226-branch:1.9.0.2
	gdb-csl-20060226-branchpoint:1.9
	gdb_6_4-20051202-release:1.8
	msnyder-fork-checkpoint-branch:1.8.0.8
	msnyder-fork-checkpoint-branchpoint:1.8
	gdb-csl-gxxpro-6_3-branch:1.8.0.6
	gdb-csl-gxxpro-6_3-branchpoint:1.8
	gdb_6_4-branch:1.8.0.4
	gdb_6_4-2005-11-01-branchpoint:1.8
	gdb-csl-arm-20051020-branch:1.8.0.2
	gdb-csl-arm-20051020-branchpoint:1.8
	msnyder-tracepoint-checkpoint-branch:1.7.0.22
	msnyder-tracepoint-checkpoint-branchpoint:1.7
	gdb-csl-arm-20050325-2005-q1b:1.7
	gdb-csl-arm-20050325-2005-q1a:1.7
	csl-arm-20050325-branch:1.7.0.20
	csl-arm-20050325-branchpoint:1.7
	gdb-post-i18n-errorwarning-20050211:1.7
	gdb-pre-i18n-errorwarning-20050211:1.7
	gdb_6_3-20041109-release:1.7
	gdb_6_3-branch:1.7.0.16
	gdb_6_3-20041019-branchpoint:1.7
	drow_intercu-merge-20040921:1.7
	drow_intercu-merge-20040915:1.7
	jimb-gdb_6_2-e500-branch:1.7.0.18
	jimb-gdb_6_2-e500-branchpoint:1.7
	gdb_6_2-20040730-release:1.7
	gdb_6_2-branch:1.7.0.14
	gdb_6_2-2004-07-10-gmt-branchpoint:1.7
	gdb_6_1_1-20040616-release:1.7
	gdb_6_1-2004-04-05-release:1.7
	drow_intercu-merge-20040402:1.7
	drow_intercu-merge-20040327:1.7
	ezannoni_pie-20040323-branch:1.7.0.12
	ezannoni_pie-20040323-branchpoint:1.7
	cagney_tramp-20040321-mergepoint:1.7
	cagney_tramp-20040309-branch:1.7.0.10
	cagney_tramp-20040309-branchpoint:1.7
	gdb_6_1-branch:1.7.0.8
	gdb_6_1-2004-03-01-gmt-branchpoint:1.7
	drow_intercu-20040221-branch:1.7.0.6
	drow_intercu-20040221-branchpoint:1.7
	cagney_bfdfile-20040213-branch:1.7.0.4
	cagney_bfdfile-20040213-branchpoint:1.7
	drow-cplus-merge-20040208:1.7
	carlton_dictionary-20040126-merge:1.7
	cagney_bigcore-20040122-branch:1.7.0.2
	cagney_bigcore-20040122-branchpoint:1.7
	drow-cplus-merge-20040113:1.7
	drow-cplus-merge-20031224:1.7
	drow-cplus-merge-20031220:1.7
	carlton_dictionary-20031215-merge:1.7
	drow-cplus-merge-20031214:1.7
	carlton-dictionary-20031111-merge:1.7
	gdb_6_0-2003-10-04-release:1.5.24.1
	kettenis_sparc-20030918-branch:1.6.0.6
	kettenis_sparc-20030918-branchpoint:1.6
	carlton_dictionary-20030917-merge:1.6
	ezannoni_pie-20030916-branchpoint:1.6
	ezannoni_pie-20030916-branch:1.6.0.4
	cagney_x86i386-20030821-branch:1.6.0.2
	cagney_x86i386-20030821-branchpoint:1.6
	carlton_dictionary-20030805-merge:1.6
	carlton_dictionary-20030627-merge:1.5
	gdb_6_0-branch:1.5.0.24
	gdb_6_0-2003-06-23-branchpoint:1.5
	jimb-ppc64-linux-20030613-branch:1.5.0.22
	jimb-ppc64-linux-20030613-branchpoint:1.5
	cagney_convert-20030606-branch:1.5.0.20
	cagney_convert-20030606-branchpoint:1.5
	cagney_writestrings-20030508-branch:1.5.0.18
	cagney_writestrings-20030508-branchpoint:1.5
	jimb-ppc64-linux-20030528-branch:1.5.0.16
	jimb-ppc64-linux-20030528-branchpoint:1.5
	carlton_dictionary-20030523-merge:1.5
	cagney_fileio-20030521-branch:1.5.0.14
	cagney_fileio-20030521-branchpoint:1.5
	kettenis_i386newframe-20030517-mergepoint:1.5
	jimb-ppc64-linux-20030509-branch:1.5.0.12
	jimb-ppc64-linux-20030509-branchpoint:1.5
	kettenis_i386newframe-20030504-mergepoint:1.5
	carlton_dictionary-20030430-merge:1.5
	kettenis_i386newframe-20030419-branch:1.5.0.10
	kettenis_i386newframe-20030419-branchpoint:1.5
	carlton_dictionary-20030416-merge:1.5
	cagney_frameaddr-20030409-mergepoint:1.5
	kettenis_i386newframe-20030406-branch:1.5.0.8
	kettenis_i386newframe-20030406-branchpoint:1.5
	cagney_frameaddr-20030403-branchpoint:1.5
	cagney_frameaddr-20030403-branch:1.5.0.6
	cagney_framebase-20030330-mergepoint:1.5
	cagney_framebase-20030326-branch:1.5.0.4
	cagney_framebase-20030326-branchpoint:1.5
	cagney_lazyid-20030317-branch:1.5.0.2
	cagney_lazyid-20030317-branchpoint:1.5
	kettenis-i386newframe-20030316-mergepoint:1.5
	offbyone-20030313-branch:1.4.0.2
	offbyone-20030313-branchpoint:1.4
	kettenis-i386newframe-20030308-branch:1.3.0.14
	kettenis-i386newframe-20030308-branchpoint:1.3
	carlton_dictionary-20030305-merge:1.3
	cagney_offbyone-20030303-branch:1.3.0.12
	cagney_offbyone-20030303-branchpoint:1.3
	carlton_dictionary-20030207-merge:1.3
	interps-20030203-mergepoint:1.3
	interps-20030202-branch:1.3.0.10
	interps-20030202-branchpoint:1.3
	cagney-unwind-20030108-branch:1.3.0.8
	cagney-unwind-20030108-branchpoint:1.3
	carlton_dictionary-20021223-merge:1.3
	gdb_5_3-2002-12-12-release:1.3
	carlton_dictionary-20021115-merge:1.3
	kseitz_interps-20021105-merge:1.3
	kseitz_interps-20021103-merge:1.3
	drow-cplus-merge-20021020:1.3
	drow-cplus-merge-20021025:1.3
	carlton_dictionary-20021025-merge:1.3
	carlton_dictionary-20021011-merge:1.3
	drow-cplus-branch:1.3.0.6
	drow-cplus-branchpoint:1.3
	kseitz_interps-20020930-merge:1.3
	carlton_dictionary-20020927-merge:1.3
	carlton_dictionary-branch:1.3.0.4
	carlton_dictionary-20020920-branchpoint:1.3
	gdb_5_3-branch:1.3.0.2
	gdb_5_3-2002-09-04-branchpoint:1.3
	kseitz_interps-20020829-merge:1.2
	cagney_sysregs-20020825-branch:1.2.0.10
	cagney_sysregs-20020825-branchpoint:1.2
	readline_4_3-import-branch:1.2.0.8
	readline_4_3-import-branchpoint:1.2
	gdb_5_2_1-2002-07-23-release:1.1
	kseitz_interps-20020528-branch:1.2.0.6
	kseitz_interps-20020528-branchpoint:1.2
	cagney_regbuf-20020515-branch:1.2.0.4
	cagney_regbuf-20020515-branchpoint:1.2
	jimb-macro-020506-branch:1.2.0.2
	jimb-macro-020506-branchpoint:1.2
	gdb_5_2-2002-04-29-release:1.1
	gdb_5_2-branch:1.1.0.8
	gdb_5_2-2002-03-03-branchpoint:1.1
	gdb_5_1_1-2002-01-24-release:1.1
	gdb_5_1_0_1-2002-01-03-release:1.1
	cygnus_cvs_20020108_pre:1.1
	gdb_5_1_0_1-2002-01-03-branch:1.1.0.6
	gdb_5_1_0_1-2002-01-03-branchpoint:1.1
	gdb_5_1-2001-11-21-release:1.1
	gdb_s390-2001-09-26-branch:1.1.0.4
	gdb_s390-2001-09-26-branchpoint:1.1
	gdb_5_1-2001-07-29-branch:1.1.0.2
	gdb_5_1-2001-07-29-branchpoint:1.1;
locks; strict;
comment	@ * @;


1.22
date	2013.02.03.16.16.41;	author jkratoch;	state Exp;
branches;
next	1.21;

1.21
date	2013.01.01.06.41.30;	author brobecke;	state Exp;
branches;
next	1.20;

1.20
date	2012.01.04.08.27.59;	author brobecke;	state Exp;
branches;
next	1.19;

1.19
date	2011.01.01.15.33.53;	author brobecke;	state Exp;
branches
	1.19.4.1;
next	1.18;

1.18
date	2010.05.17.22.21.43;	author msnyder;	state Exp;
branches;
next	1.17;

1.17
date	2010.04.18.00.11.55;	author palves;	state Exp;
branches;
next	1.16;

1.16
date	2010.01.01.07.32.07;	author brobecke;	state Exp;
branches;
next	1.15;

1.15
date	2009.01.03.05.58.08;	author brobecke;	state Exp;
branches;
next	1.14;

1.14
date	2008.01.01.22.53.22;	author drow;	state Exp;
branches;
next	1.13;

1.13
date	2007.08.23.18.08.50;	author brobecke;	state Exp;
branches;
next	1.12;

1.12
date	2007.08.14.23.50.39;	author msnyder;	state Exp;
branches;
next	1.11;

1.11
date	2007.08.14.21.20.09;	author msnyder;	state Exp;
branches;
next	1.10;

1.10
date	2007.01.09.17.59.15;	author drow;	state Exp;
branches;
next	1.9;

1.9
date	2005.12.23.19.10.02;	author eliz;	state Exp;
branches;
next	1.8;

1.8
date	2005.07.31.20.56.26;	author drow;	state Exp;
branches;
next	1.7;

1.7
date	2003.10.24.17.37.04;	author cagney;	state Exp;
branches;
next	1.6;

1.6
date	2003.06.28.16.19.07;	author drow;	state Exp;
branches
	1.6.4.1;
next	1.5;

1.5
date	2003.03.13.20.24.06;	author ciceron;	state Exp;
branches
	1.5.24.1;
next	1.4;

1.4
date	2003.03.08.20.04.27;	author cagney;	state Exp;
branches;
next	1.3;

1.3
date	2002.09.01.16.12.52;	author ciceron;	state Exp;
branches
	1.3.4.1
	1.3.6.1
	1.3.14.1;
next	1.2;

1.2
date	2002.03.19.02.51.09;	author cagney;	state Exp;
branches
	1.2.6.1;
next	1.1;

1.1
date	2001.07.24.20.40.39;	author ciceron;	state Exp;
branches;
next	;

1.19.4.1
date	2012.01.06.04.54.35;	author brobecke;	state Exp;
branches;
next	;

1.6.4.1
date	2004.03.23.20.09.16;	author ezannoni;	state Exp;
branches;
next	;

1.5.24.1
date	2003.07.02.20.52.33;	author drow;	state Exp;
branches;
next	;

1.3.4.1
date	2003.04.16.19.57.03;	author carlton;	state Exp;
branches;
next	1.3.4.2;

1.3.4.2
date	2003.08.05.17.13.26;	author carlton;	state Exp;
branches;
next	1.3.4.3;

1.3.4.3
date	2003.11.11.23.51.12;	author carlton;	state Exp;
branches;
next	;

1.3.6.1
date	2003.12.14.20.27.59;	author drow;	state Exp;
branches;
next	;

1.3.14.1
date	2003.03.16.14.01.55;	author kettenis;	state Exp;
branches;
next	;

1.2.6.1
date	2002.10.01.00.46.34;	author kseitz;	state Exp;
branches;
next	;


desc
@@


1.22
log
@gdb/
	* source.c (print_source_lines_base): Print for TUI also "fullname".
	* tui/tui-data.c (init_content_element): Change tui_locator_element
	field to full_name.
	* tui/tui-data.h (struct tui_locator_element): Likewise.
	* tui/tui-disasm.c (tui_show_disassem_and_update_source): Rename
	tui_update_locator_filename calls to tui_update_locator_fullname.
	Replace symtab->filename refererence by symtab_to_fullname call.
	* tui/tui-out.c (tui_field_string): Check for "fullname" now.
	* tui/tui-source.c (tui_set_source_content): Change tui_locator_element
	field to full_name.  Replace symtab->filename refererence by
	symtab_to_fullname call.
	(tui_show_symtab_source): Rename parameter to fullname.  Change
	tui_locator_element field to full_name.
	* tui/tui-stack.c: Include source.h.
	(tui_set_locator_filename): Rename the declaration to ...
	(tui_set_locator_fullname): ... here.  Rename its parameter to
	fullname, updates its comment.
	(tui_set_locator_info): Rename its parameter to fullname.
	(tui_set_locator_filename): Rename the definition to ...
	(tui_set_locator_fullname): ... here.  Rename its parameter to
	fullname, updates its comment.  Change tui_locator_element field to
	full_name.
	(tui_set_locator_info): Rename its parameter to fullname.
	(tui_set_locator_info): Rename callee to tui_set_locator_fullname.
	(tui_update_locator_filename): Rename to ...
	(tui_update_locator_fullname): ... here. Rename callee to
	tui_set_locator_fullname.
	(tui_show_frame_info): Replace symtab->filename refererence by
	symtab_to_fullname call.
	* tui/tui-stack.h (tui_update_locator_filename): Rename to ...
	(tui_update_locator_fullname): ... here.
	* tui/tui-winsource.c (tui_display_main): Rename the callee to
	tui_update_locator_fullname.  Replace symtab->filename refererence by
	symtab_to_fullname call.
	* tui/tui.c (tui_show_source): Rename its parameter to fullname.
	Rename the callee to tui_update_locator_fullname.
	* tui/tui.h (tui_show_source): Rename its parameter to fullname.
@
text
@/* Output generating routines for GDB CLI.

   Copyright (C) 1999-2013 Free Software Foundation, Inc.

   Contributed by Cygnus Solutions.
   Written by Fernando Nasser for Cygnus.

   This file is part of GDB.

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */

#include "defs.h"
#include "ui-out.h"
#include "cli-out.h"
#include "tui.h"
#include "gdb_string.h"
#include "gdb_assert.h"

struct tui_ui_out_data
  {
    struct cli_ui_out_data base;

    int line;
    int start_of_line;
  };
typedef struct tui_ui_out_data tui_out_data;

/* This is the TUI ui-out implementation functions vector.  It is
   initialized below in _initialize_tui_out, inheriting the CLI
   version, and overriding a few methods.  */

static struct ui_out_impl tui_ui_out_impl;

/* Output an int field.  */

static void
tui_field_int (struct ui_out *uiout, 
	       int fldno, int width,
	       enum ui_align alignment,
	       const char *fldname, 
	       int value)
{
  tui_out_data *data = ui_out_data (uiout);

  if (data->base.suppress_output)
    return;

  /* Don't print line number, keep it for later.  */
  if (data->start_of_line == 0 && strcmp (fldname, "line") == 0)
    {
      data->start_of_line ++;
      data->line = value;
      return;
    }
  data->start_of_line ++;

  (*cli_ui_out_impl.field_int) (uiout, fldno,
				width, alignment, fldname, value);
}

/* Other cli_field_* end up here so alignment and field separators are
   both handled by tui_field_string.  */

static void
tui_field_string (struct ui_out *uiout,
		  int fldno, int width,
		  enum ui_align align,
		  const char *fldname,
		  const char *string)
{
  tui_out_data *data = ui_out_data (uiout);

  if (data->base.suppress_output)
    return;

  if (fldname && data->line > 0 && strcmp (fldname, "fullname") == 0)
    {
      data->start_of_line ++;
      if (data->line > 0)
        {
          tui_show_source (string, data->line);
        }
      return;
    }
  
  data->start_of_line++;

  (*cli_ui_out_impl.field_string) (uiout, fldno,
				   width, align,
				   fldname, string);
}

/* This is the only field function that does not align.  */

static void
tui_field_fmt (struct ui_out *uiout, int fldno,
	       int width, enum ui_align align,
	       const char *fldname,
	       const char *format,
	       va_list args)
{
  tui_out_data *data = ui_out_data (uiout);

  if (data->base.suppress_output)
    return;

  data->start_of_line++;

  (*cli_ui_out_impl.field_fmt) (uiout, fldno,
				width, align,
				fldname, format, args);
}

static void
tui_text (struct ui_out *uiout, const char *string)
{
  tui_out_data *data = ui_out_data (uiout);

  if (data->base.suppress_output)
    return;
  data->start_of_line ++;
  if (data->line > 0)
    {
      if (strchr (string, '\n') != 0)
        {
          data->line = -1;
          data->start_of_line = 0;
        }
      return;
    }
  if (strchr (string, '\n'))
    data->start_of_line = 0;

  (*cli_ui_out_impl.text) (uiout, string);
}

struct ui_out *
tui_out_new (struct ui_file *stream)
{
  int flags = 0;

  tui_out_data *data = XMALLOC (tui_out_data);

  /* Initialize base "class".  */
  cli_out_data_ctor (&data->base, stream);

  /* Initialize our fields.  */
  data->line = -1;
  data->start_of_line = 0;

  return ui_out_new (&tui_ui_out_impl, data, flags);
}

/* Standard gdb initialization hook.  */

extern void _initialize_tui_out (void);

void
_initialize_tui_out (void)
{
  /* Inherit the CLI version.  */
  tui_ui_out_impl = cli_ui_out_impl;

  /* Override a few methods.  */
  tui_ui_out_impl.field_int = tui_field_int;
  tui_ui_out_impl.field_string = tui_field_string;
  tui_ui_out_impl.field_fmt = tui_field_fmt;
  tui_ui_out_impl.text = tui_text;
}
@


1.21
log
@Update years in copyright notice for the GDB files.

Two modifications:
  1. The addition of 2013 to the copyright year range for every file;
  2. The use of a single year range, instead of potentially multiple
     year ranges, as approved by the FSF.
@
text
@d87 1
a87 1
  if (fldname && data->line > 0 && strcmp (fldname, "file") == 0)
@


1.20
log
@Copyright year update in most files of the GDB Project.

gdb/ChangeLog:

        Copyright year update in most files of the GDB Project.
@
text
@d3 1
a3 2
   Copyright (C) 1999-2003, 2005, 2007-2012 Free Software Foundation,
   Inc.
@


1.19
log
@run copyright.sh for 2011.
@
text
@d3 2
a4 2
   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2005, 2007, 2008, 2009, 2010,
   2011 Free Software Foundation, Inc.
@


1.19.4.1
log
@Copyright year update in most files of the GDB Project.

gdb/ChangeLog:

        Copyright year update in most files of the GDB Project.
@
text
@d3 2
a4 2
   Copyright (C) 1999-2003, 2005, 2007-2012 Free Software Foundation,
   Inc.
@


1.18
log
@2010-05-17  Michael Snyder  <msnyder@@vmware.com>

	* tui/tui.c: White space.
	* tui/tui-data.c: White space.
	* tui/tui-disasm.c: White space.
	* tui/tui-file.c: White space.
	* tui/tui-interp.c: White space.
	* tui/tui-main.c: White space.
	* tui/tui-out.c: White space.
	* tui/tui-regs.c: White space.
	* tui/tui-source.c: White space.
	* tui/tui-stack.c: White space.
	* tui/tui-win.c: White space.
	* tui/tui-winsource.c: White space.
@
text
@d3 2
a4 2
   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2005, 2007, 2008, 2009, 2010
   Free Software Foundation, Inc.
@


1.17
log
@	PR tui/9217

	* tui/tui-out.c: Include cli-out.h.
	(tui_table_begin, tui_table_body, tui_table_end, tui_table_header)
	(tui_begin, tui_end, tui_field_int, tui_field_skip)
	(tui_field_string, tui_field_fmt, tui_spaces, tui_text)
	(tui_message, tui_wrap_hint, tui_flush): Delete forward
	declarations.
	(struct ui_out_data): Rename to...
	(struct tui_ui_out_data): ... this.  Remove `stream' and
	`suppress_output' fields, and inherit cli_ui_out_data.
	(tui_out_data): New typedef.
	(tui_ui_out_impl): Don't initialize fields staticaly.
	(tui_table_begin, tui_table_body, tui_table_end, tui_table_header)
	(tui_begin, tui_end): Delete.
	(tui_field_int): Adjust to delegate most work to the base type.
	(tui_field_skip): Delete.
	(tui_field_string, tui_field_fmt): Adjust comment.  Adjust to
	delegate most work to the base type.
	(tui_spaces): Delete.
	(tui_text): Adjust to delegate most work to the base type.
	(tui_message): Delete.
	(tui_wrap_hint): Delete.
	(tui_flush): Delete.
	(out_field_fmt): Delete.
	(field_separator): Delete.
	(tui_out_new): Adjust to initialize the base type.
	(_initialize_tui_out): Initialize tui_ui_out_impl.
	* cli-out.c (struct ui_out_data): Moved out to cli-out.h, renamed
	cli_ui_out_data.
	(cli_out_data): Adjust.
	(cli_ui_out_impl): Make extern.
	(cli_table_header, cli_field_int, cli_field_skip): Use
	uo_field_string instead of cli_field_string.
	(cli_redirect): Adjust to use cli_out_data.
	(cli_out_data_ctor): New.
	(cli_out_new): Use it.
	* cli-out.h (struct ui_file): Remove forward declaration.
	(struct cli_ui_out_data): New, moved from cli-out.c, and renamed.
	(cli_ui_out_impl): Declare.
	(cli_out_data_ctor): Declare.
	* ui-out.c (struct ui_out) <data>: Change type to void pointer.
	(uo_field_string): No longer static.
	(ui_out_data): Change return type to void pointer.
	(ui_out_new): Change `data' parameter type to void pointer.
	* ui-out.h (struct ui_out_data): Don't forward declare.
	(ui_out_data): Change return type to void pointer.
	(ui_out_new): Change `data' parameter type to void pointer.
	(uo_field_string): Declare.
@
text
@d56 1
d84 1
d115 1
d130 1
d173 1
a173 1
/* Inherit the CLI version.  */
@


1.16
log
@Update copyright year in most headers.

Automatic update by copyright.sh.
@
text
@d26 1
d31 1
a31 1
struct ui_out_data
d33 2
a34 2
    struct ui_file *stream;
    int suppress_output;
d38 1
a38 124
typedef struct ui_out_data tui_out_data;

/* These are the CLI output functions.  */

static void tui_table_begin (struct ui_out *uiout, 
			     int nbrofcols, int nr_rows, 
			     const char *tblid);
static void tui_table_body (struct ui_out *uiout);
static void tui_table_end (struct ui_out *uiout);
static void tui_table_header (struct ui_out *uiout, 
			      int width, enum ui_align alig, 
			      const char *col_name,
			      const char *colhdr);
static void tui_begin (struct ui_out *uiout, 
		       enum ui_out_type type,
		       int level, const char *lstid);
static void tui_end (struct ui_out *uiout, 
		     enum ui_out_type type, int level);
static void tui_field_int (struct ui_out *uiout, 
			   int fldno, int width,
			   enum ui_align alig, 
			   const char *fldname, int value);
static void tui_field_skip (struct ui_out *uiout, 
			    int fldno, int width,
			    enum ui_align alig, 
			    const char *fldname);
static void tui_field_string (struct ui_out *uiout, 
			      int fldno, int width,
			      enum ui_align alig, 
			      const char *fldname,
			      const char *string);
static void tui_field_fmt (struct ui_out *uiout, int fldno,
			   int width, enum ui_align align,
			   const char *fldname, 
			   const char *format,
			   va_list args) 
     ATTR_FORMAT (printf, 6, 0);
static void tui_spaces (struct ui_out *uiout, int numspaces);
static void tui_text (struct ui_out *uiout, const char *string);
static void tui_message (struct ui_out *uiout, int verbosity,
			 const char *format, va_list args)
     ATTR_FORMAT (printf, 3, 0);
static void tui_wrap_hint (struct ui_out *uiout, 
			   char *identstring);
static void tui_flush (struct ui_out *uiout);

/* This is the CLI ui-out implementation functions vector.  */

/* FIXME: This can be initialized dynamically after default is set to
   handle initial output in main.c.  */

static struct ui_out_impl tui_ui_out_impl = {
  tui_table_begin,
  tui_table_body,
  tui_table_end,
  tui_table_header,
  tui_begin,
  tui_end,
  tui_field_int,
  tui_field_skip,
  tui_field_string,
  tui_field_fmt,
  tui_spaces,
  tui_text,
  tui_message,
  tui_wrap_hint,
  tui_flush,
  NULL,
  0, /* Does not need MI hacks (i.e. needs CLI hacks).  */
};

/* Prototypes for local functions.  */

extern void _initialize_tui_out (void);

static void field_separator (void);

static void out_field_fmt (struct ui_out *uiout, 
			   int fldno,
			   const char *fldname,
			   const char *format,...) 
     ATTR_FORMAT (printf, 4, 5);

/* local variables */

/* (none yet) */

/* Mark beginning of a table.  */

void
tui_table_begin (struct ui_out *uiout, 
		 int nbrofcols,
		 int nr_rows,
		 const char *tblid)
{
  tui_out_data *data = ui_out_data (uiout);
  if (nr_rows == 0)
    data->suppress_output = 1;
  else
    /* Only the table suppresses the output and, fortunately, a table
       is not a recursive data structure.  */
    gdb_assert (data->suppress_output == 0);
}

/* Mark beginning of a table body.  */

void
tui_table_body (struct ui_out *uiout)
{
  tui_out_data *data = ui_out_data (uiout);
  if (data->suppress_output)
    return;
  /* First, close the table header line.  */
  tui_text (uiout, "\n");
}

/* Mark end of a table.  */

void
tui_table_end (struct ui_out *uiout)
{
  tui_out_data *data = ui_out_data (uiout);
  data->suppress_output = 0;
}
d40 3
a42 1
/* Specify table header.  */
d44 1
a44 37
void
tui_table_header (struct ui_out *uiout, 
		  int width, 
		  enum ui_align alignment,
		  const char *col_name,
		  const char *colhdr)
{
  tui_out_data *data = ui_out_data (uiout);
  if (data->suppress_output)
    return;
  tui_field_string (uiout, 0, width, alignment, 0, colhdr);
}

/* Mark beginning of a list.  */

void
tui_begin (struct ui_out *uiout,
	   enum ui_out_type type,
	   int level,
	   const char *id)
{
  tui_out_data *data = ui_out_data (uiout);
  if (data->suppress_output)
    return;
}

/* Mark end of a list.  */

void
tui_end (struct ui_out *uiout,
	 enum ui_out_type type,
	 int level)
{
  tui_out_data *data = ui_out_data (uiout);
  if (data->suppress_output)
    return;
}
d48 1
a48 1
void
a54 2
  char buffer[20];	/* FIXME: how many chars long a %d can become?  */

d56 1
a56 1
  if (data->suppress_output)
a66 5
  sprintf (buffer, "%d", value);
  tui_field_string (uiout, fldno, width, alignment, fldname, buffer);
}

/* Used to ommit a field.  */
d68 2
a69 10
void
tui_field_skip (struct ui_out *uiout, 
		int fldno, int width,
		enum ui_align alignment,
		const char *fldname)
{
  tui_out_data *data = ui_out_data (uiout);
  if (data->suppress_output)
    return;
  tui_field_string (uiout, fldno, width, alignment, fldname, "");
d72 2
a73 2
/* Other specific tui_field_* end up here so alignment and field
   separators are both handled by tui_field_string.  */
d75 1
a75 1
void
a81 3
  int before = 0;
  int after = 0;

d83 1
a83 1
  if (data->suppress_output)
d96 1
a96 30
  data->start_of_line ++;
  if ((align != ui_noalign) && string)
    {
      before = width - strlen (string);
      if (before <= 0)
	before = 0;
      else
	{
	  if (align == ui_right)
	    after = 0;
	  else if (align == ui_left)
	    {
	      after = before;
	      before = 0;
	    }
	  else
	    /* ui_center */
	    {
	      after = before / 2;
	      before -= after;
	    }
	}
    }

  if (before)
    ui_out_spaces (uiout, before);
  if (string)
    out_field_fmt (uiout, fldno, fldname, "%s", string);
  if (after)
    ui_out_spaces (uiout, after);
d98 3
a100 2
  if (align != ui_noalign)
    field_separator ();
d105 1
a105 1
void
d113 1
a113 1
  if (data->suppress_output)
d116 1
a116 2
  data->start_of_line ++;
  vfprintf_filtered (data->stream, format, args);
d118 3
a120 2
  if (align != ui_noalign)
    field_separator ();
d123 1
a123 10
void
tui_spaces (struct ui_out *uiout, int numspaces)
{
  tui_out_data *data = ui_out_data (uiout);
  if (data->suppress_output)
    return;
  print_spaces_filtered (numspaces, data->stream);
}

void
d127 1
a127 1
  if (data->suppress_output)
a140 15
  fputs_filtered (string, data->stream);
}

void
tui_message (struct ui_out *uiout, 
	     int verbosity,
	     const char *format, 
	     va_list args)
{
  tui_out_data *data = ui_out_data (uiout);
  if (data->suppress_output)
    return;
  if (ui_out_get_verblvl (uiout) >= verbosity)
    vfprintf_unfiltered (data->stream, format, args);
}
d142 1
a142 7
void
tui_wrap_hint (struct ui_out *uiout, char *identstring)
{
  tui_out_data *data = ui_out_data (uiout);
  if (data->suppress_output)
    return;
  wrap_here (identstring);
a144 39
void
tui_flush (struct ui_out *uiout)
{
  tui_out_data *data = ui_out_data (uiout);
  gdb_flush (data->stream);
}

/* Local functions.  */

/* Like tui_field_fmt, but takes a variable number of args and makes a
   va_list and does not insert a separator.  */

/* VARARGS */
static void
out_field_fmt (struct ui_out *uiout, 
	       int fldno,
	       const char *fldname,
	       const char *format,...)
{
  tui_out_data *data = ui_out_data (uiout);
  va_list args;

  va_start (args, format);
  vfprintf_filtered (data->stream, format, args);

  va_end (args);
}

/* Access to ui_out format private members.  */

static void
field_separator (void)
{
  tui_out_data *data = ui_out_data (uiout);
  fputc_filtered (' ', data->stream);
}

/* Initalize private members at startup.  */

d151 5
a155 2
  data->stream = stream;
  data->suppress_output = 0;
d158 1
d163 3
d169 8
a176 1
  /* Nothing needs to be done.  */
@


1.15
log
@        Updated copyright notices for most files.
@
text
@d3 1
a3 1
   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2005, 2007, 2008, 2009
@


1.14
log
@	Updated copyright notices for most files.
@
text
@d3 1
a3 1
   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2005, 2007, 2008
@


1.13
log
@        Switch the license of all .c files to GPLv3.
        Switch the license of all .h files to GPLv3.
        Switch the license of all .cc files to GPLv3.
@
text
@d3 1
a3 1
   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2005, 2007
@


1.12
log
@2007-08-14  Michael Snyder  <msnyder@@access-company.com>

	* tui-data.c, tui-data.h, tui-disasm.c, tui-disasm.h, tui-hooks.c,
	tui-io.c, tui-layout.c, tui-layout.h, tui-out.c, tui-regs.c,
	tui-source.c, tui-source.h, tui-stack.c, tui-win.c, tui-win.h,
	tui-windata.c, tui-windata.h, tui-wingeneral.c, tui-winsource.c,
	tui-winsource.h, tui.c, tui.h: Function declarations and
	definitions, wrap long lines.
@
text
@d13 1
a13 1
   the Free Software Foundation; either version 2 of the License, or
d22 1
a22 3
   along with this program; if not, write to the Free Software
   Foundation, Inc., 51 Franklin Street, Fifth Floor,
   Boston, MA 02110-1301, USA.  */
@


1.11
log
@2007-08-14  Michael Snyder  <msnyder@@access-company.com>

	* tui-command.c, tui-data.c, tui-data.h, tui-disasm.c, tui-file.c,
	tui-hooks.c, tui-interp.c, tui-io.c, tui-layout.c, tui-out.c,
	tui-regs.c, tui-regs.h, tui-source.c, tui-stack.c, tui-win.c,
	tui-windata.c, tui-wingeneral.c, tui-winsource.c, tui-winsource.h,
	tui.c, tui.h: Comment reformatting to coding standard (capitals,
	spaces after periods, etc).
@
text
@d43 3
a45 2
static void tui_table_begin (struct ui_out *uiout, int nbrofcols,
			     int nr_rows, const char *tblid);
d48 3
a50 2
static void tui_table_header (struct ui_out *uiout, int width,
			      enum ui_align alig, const char *col_name,
d52 2
a53 1
static void tui_begin (struct ui_out *uiout, enum ui_out_type type,
d55 14
a68 7
static void tui_end (struct ui_out *uiout, enum ui_out_type type, int level);
static void tui_field_int (struct ui_out *uiout, int fldno, int width,
			   enum ui_align alig, const char *fldname, int value);
static void tui_field_skip (struct ui_out *uiout, int fldno, int width,
			    enum ui_align alig, const char *fldname);
static void tui_field_string (struct ui_out *uiout, int fldno, int width,
			      enum ui_align alig, const char *fldname,
d72 4
a75 2
			   const char *fldname, const char *format,
			   va_list args) ATTR_FORMAT (printf, 6, 0);
d81 2
a82 1
static void tui_wrap_hint (struct ui_out *uiout, char *identstring);
d90 1
a90 2
static struct ui_out_impl tui_ui_out_impl =
{
d116 2
a117 1
static void out_field_fmt (struct ui_out *uiout, int fldno,
d119 2
a120 1
			   const char *format,...) ATTR_FORMAT (printf, 4, 5);
d129 2
a130 1
tui_table_begin (struct ui_out *uiout, int nbrofcols,
d167 3
a169 1
tui_table_header (struct ui_out *uiout, int width, enum ui_align alignment,
d207 2
a208 1
tui_field_int (struct ui_out *uiout, int fldno, int width,
d210 2
a211 1
	       const char *fldname, int value)
d234 2
a235 1
tui_field_skip (struct ui_out *uiout, int fldno, int width,
d250 1
a250 2
		  int fldno,
		  int width,
d358 4
a361 2
tui_message (struct ui_out *uiout, int verbosity,
	     const char *format, va_list args)
d393 2
a394 1
out_field_fmt (struct ui_out *uiout, int fldno,
@


1.10
log
@Copyright updates for 2007.
@
text
@d41 1
a41 1
/* These are the CLI output functions */
d72 1
a72 1
/* This is the CLI ui-out implementation functions vector */
d75 1
a75 1
   handle initial output in main.c */
d98 1
a98 1
/* Prototypes for local functions */
d112 1
a112 1
/* Mark beginning of a table */
d124 1
a124 1
       is not a recursive data structure. */
d128 1
a128 1
/* Mark beginning of a table body */
d136 1
a136 1
  /* first, close the table header line */
d140 1
a140 1
/* Mark end of a table */
d149 1
a149 1
/* Specify table header */
d162 1
a162 1
/* Mark beginning of a list */
d175 1
a175 1
/* Mark end of a list */
d187 1
a187 1
/* output an int field */
d194 1
a194 1
  char buffer[20];		/* FIXME: how many chars long a %d can become? */
d212 1
a212 1
/* used to ommit a field */
d225 2
a226 2
/* other specific tui_field_* end up here so alignment and field
   separators are both handled by tui_field_string */
d288 1
a288 1
/* This is the only field function that does not align */
d365 1
a365 1
/* local functions */
d367 2
a368 2
/* Like tui_field_fmt, but takes a variable number of args
   and makes a va_list and does not insert a separator */
d385 1
a385 1
/* access to ui_out format private members */
d394 1
a394 1
/* initalize private members at startup */
d409 1
a409 1
/* standard gdb initialization hook */
d413 1
a413 1
  /* nothing needs to be done */
@


1.9
log
@	* tui/tui-file.c:
	* tui/tui-disasm.c:
	* tui/tui-data.h:
	* tui/tui-data.c:
	* tui/tui-command.h:
	* tui/tui-command.c:
	* tui/tui-win.h:
	* tui/tui-win.h:
	* tui/tui-win.c:
	* tui/tui-stack.h:
	* tui/tui-stack.c:
	* tui/tui-source.h:
	* tui/tui-source.c:
	* tui/tui-regs.h:
	* tui/tui-regs.c:
	* tui/tui-out.c:
	* tui/tui-main.c:
	* tui/tui-layout.h:
	* tui/tui-layout.c:
	* tui/tui-io.h:
	* tui/tui-io.c:
	* tui/tui-interp.c:
	* tui/tui-hooks.h:
	* tui/tui-hooks.c:
	* tui/tui-file.h:
	* tui/tui.h:
	* tui/tui.c:
	* tui/tui-winsource.h:
	* tui/tui-winsource.c:
	* tui/tui-wingeneral.h:
	* tui/tui-wingeneral.c:
	* tui/tui-windata.h:
	* tui/tui-windata.c: Add (C) after Copyright.  Update the FSF
	address.
@
text
@d3 1
a3 1
   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2005
@


1.8
log
@From  Kaveh R. Ghazi  <ghazi@@caip.rutgers.edu>:
gdb/
	* cli-out.c (cli_field_fmt, cli_message, out_field_fmt): Add
	ATTR_FORMAT or ATTRIBUTE_FPTR_PRINTF.
	* complaints.c (vcomplaint): Likewise.
	* defs.h (xvasprintf, xstrvprintf, verror, vfatal)
	(internal_verror, internal_vwarning, vwarning)
	(deprecated_query_hook, deprecated_warning_hook)
	(deprecated_readline_begin_hook): Likewise.
	* disasm.c (fprintf_disasm): Likewise.
	* exceptions.c (throw_it): Likewise.
	* exceptions.h (throw_verror, throw_vfatal): Likewise.
	* mi/mi-interp.c (mi_interp_query_hook): Likewise.
	* mi/mi-out.c (mi_field_fmt, mi_message): Likewise.
	* tui/tui-hooks.c (tui_query_hook): Likewise.
	* tui/tui-out.c (tui_field_fmt, tui_message, out_field_fmt):
	Likewise.
	* ui-out.c (default_field_fmt, default_message, uo_field_fmt)
	(uo_message): Likewise.
	* ui-out.h (ui_out_field_fmt, ui_out_message, field_fmt_ftype)
	(message_ftype): Likewise.
	* utils.c (vfprintf_maybe_filtered, internal_vproblem)
	(defaulted_query, printchar): Likewise.
gdb/gdbserver/
	* server.h (error, fatal, warning): Add ATTR_FORMAT.
@
text
@d3 1
a3 1
   Copyright 1999, 2000, 2001, 2002, 2003, 2005
d23 2
a24 2
   Foundation, Inc., 59 Temple Place - Suite 330,
   Boston, MA 02111-1307, USA.  */
@


1.7
log
@Index: mi/ChangeLog
2003-10-24  Andrew Cagney  <cagney@@redhat.com>

	* tui-out.c: Fix "fortunatly"[sic].

Index: doc/ChangeLog
2003-10-24  Andrew Cagney  <cagney@@redhat.com>

	* annotate.texinfo: Fix "fortunatly"[sic].

2003-10-24  Andrew Cagney  <cagney@@redhat.com>

	* osabi.c (gdbarch_init_osabi): Fix typos, and "fortunatly"[sic].
	* PROBLEMS, arch-utils.c, cli-out.c, command.h: Ditto.
	* complaints.c, cris-tdep.c, disasm.c, dwarf2-frame.c: Ditto.
	* frame.c, frame.h, infcall.c, infcmd.c, infrun.c: Ditto.
	* kod.c, mips-tdep.c, regcache.c, regcache.h, remote.c: Ditto.
@
text
@d3 2
a4 2
   Copyright 1999, 2000, 2001, 2002, 2003 Free Software Foundation,
   Inc.
d63 1
a63 1
			   va_list args);
d67 2
a68 1
			 const char *format, va_list args);
d106 1
a106 1
			   const char *format,...);
@


1.6
log
@./
	* cli/cli-logging.c: New file.
	* cli-out.c (struct ui_out_data): Add original_stream.
	(cli_redirect): New function.
	(cli_ui_out_impl): Add cli_redirect.
	(cli_out_new): Initialize original_stream.
	* ui-out.c (default_ui_out_impl): Add NULL for redirect member.
	(uo_redirect, ui_out_redirect): New.
	* ui-out.h (struct ui_out_impl): Add redirect member.
	(redirect_ftype): New.
	(ui_out_redirect): Add prototype.
	* Makefile.in: Add rules for cli-logging.c.
	* NEWS: Mention "set logging".
mi/
	* mi-out.c (mi_ui_out_impl): Add NULL for redirect member.
tui/
	* tui-out.c (tui_ui_out_impl): Add NULL for redirect member.
doc/
	* gdb.texinfo (Logging output): New chapter.
@
text
@d122 1
a122 1
    /* Only the table suppresses the output and, fortunatly, a table
@


1.6.4.1
log
@merge mainline changes to branch
@
text
@d122 1
a122 1
    /* Only the table suppresses the output and, fortunately, a table
@


1.5
log
@	* tui-out.c (tui_out_data): Fix typedef.
@
text
@d93 1
@


1.5.24.1
log
@./
	* cli/cli-logging.c: New file.
	* cli-out.c (struct ui_out_data): Add original_stream.
	(cli_redirect): New function.
	(cli_ui_out_impl): Add cli_redirect.
	(cli_out_new): Initialize original_stream.
	* ui-out.c (default_ui_out_impl): Add NULL for redirect member.
	(uo_redirect, ui_out_redirect): New.
	* ui-out.h (struct ui_out_impl): Add redirect member.
	(redirect_ftype): New.
	(ui_out_redirect): Add prototype.
	* Makefile.in: Add rules for cli-logging.c.
	* NEWS: Mention "set logging".
mi/
	* mi-out.c (mi_ui_out_impl): Add NULL for redirect member.
tui/
	* tui-out.c (tui_ui_out_impl): Add NULL for redirect member.
doc/
	* gdb.texinfo (Logging output): New chapter.
@
text
@a92 1
  NULL,
@


1.4
log
@Index: ChangeLog
2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* cli-out.c: Update copyright.
	(cli_out_data): Define typedef.  Use instead of ui_out_data.

Index: mi/ChangeLog
2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-out.c: Update copyright.
	(mi_out_data): Define typedef.  Use instead of ui_out_data.

Index: tui/ChangeLog
2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* tui-out.c: Update copyright.
	(tui_out_data): Define typedef.  Use instead of ui_out_data.
@
text
@d39 1
a39 1
struct ui_out_data tui_out_data;
@


1.3
log
@	* tui-out.c (tui_out_new): Clear start_of_line.
	* tuiSource.c (tuiVerticalSourceScroll): Use print_source_lines
	to update the current source line.
@
text
@d3 2
a4 1
   Copyright 1999, 2000, 2001, 2002 Free Software Foundation, Inc.
d39 1
d117 1
a117 1
  struct ui_out_data *data = ui_out_data (uiout);
d131 1
a131 1
  struct ui_out_data *data = ui_out_data (uiout);
d143 1
a143 1
  struct ui_out_data *data = ui_out_data (uiout);
d154 1
a154 1
  struct ui_out_data *data = ui_out_data (uiout);
d168 1
a168 1
  struct ui_out_data *data = ui_out_data (uiout);
d180 1
a180 1
  struct ui_out_data *data = ui_out_data (uiout);
d194 1
a194 1
  struct ui_out_data *data = ui_out_data (uiout);
d217 1
a217 1
  struct ui_out_data *data = ui_out_data (uiout);
d237 1
a237 1
  struct ui_out_data *data = ui_out_data (uiout);
d295 1
a295 1
  struct ui_out_data *data = ui_out_data (uiout);
d309 1
a309 1
  struct ui_out_data *data = ui_out_data (uiout);
d318 1
a318 1
  struct ui_out_data *data = ui_out_data (uiout);
d340 1
a340 1
  struct ui_out_data *data = ui_out_data (uiout);
d350 1
a350 1
  struct ui_out_data *data = ui_out_data (uiout);
d359 1
a359 1
  struct ui_out_data *data = ui_out_data (uiout);
d374 1
a374 1
  struct ui_out_data *data = ui_out_data (uiout);
d388 1
a388 1
  struct ui_out_data *data = ui_out_data (uiout);
d399 1
a399 1
  struct ui_out_data *data = XMALLOC (struct ui_out_data);
@


1.3.6.1
log
@Merge drow-cplus-branch to:
  cvs rtag -D 2003-12-14 00:00:00 UTC drow-cplus-merge-20031214 gdb+dejagnu
@
text
@d3 1
a3 2
   Copyright 1999, 2000, 2001, 2002, 2003 Free Software Foundation,
   Inc.
a37 1
typedef struct ui_out_data tui_out_data;
a90 1
  NULL,
d115 1
a115 1
  tui_out_data *data = ui_out_data (uiout);
d119 1
a119 1
    /* Only the table suppresses the output and, fortunately, a table
d129 1
a129 1
  tui_out_data *data = ui_out_data (uiout);
d141 1
a141 1
  tui_out_data *data = ui_out_data (uiout);
d152 1
a152 1
  tui_out_data *data = ui_out_data (uiout);
d166 1
a166 1
  tui_out_data *data = ui_out_data (uiout);
d178 1
a178 1
  tui_out_data *data = ui_out_data (uiout);
d192 1
a192 1
  tui_out_data *data = ui_out_data (uiout);
d215 1
a215 1
  tui_out_data *data = ui_out_data (uiout);
d235 1
a235 1
  tui_out_data *data = ui_out_data (uiout);
d293 1
a293 1
  tui_out_data *data = ui_out_data (uiout);
d307 1
a307 1
  tui_out_data *data = ui_out_data (uiout);
d316 1
a316 1
  tui_out_data *data = ui_out_data (uiout);
d338 1
a338 1
  tui_out_data *data = ui_out_data (uiout);
d348 1
a348 1
  tui_out_data *data = ui_out_data (uiout);
d357 1
a357 1
  tui_out_data *data = ui_out_data (uiout);
d372 1
a372 1
  tui_out_data *data = ui_out_data (uiout);
d386 1
a386 1
  tui_out_data *data = ui_out_data (uiout);
d397 1
a397 1
  tui_out_data *data = XMALLOC (tui_out_data);
@


1.3.4.1
log
@2003-04-16  David Carlton  <carlton@@bactrian.org>

	* Merge with mainline; tag is carlton_dictionary-20030416-merge.
@
text
@d3 1
a3 2
   Copyright 1999, 2000, 2001, 2002, 2003 Free Software Foundation,
   Inc.
a37 1
typedef struct ui_out_data tui_out_data;
d115 1
a115 1
  tui_out_data *data = ui_out_data (uiout);
d129 1
a129 1
  tui_out_data *data = ui_out_data (uiout);
d141 1
a141 1
  tui_out_data *data = ui_out_data (uiout);
d152 1
a152 1
  tui_out_data *data = ui_out_data (uiout);
d166 1
a166 1
  tui_out_data *data = ui_out_data (uiout);
d178 1
a178 1
  tui_out_data *data = ui_out_data (uiout);
d192 1
a192 1
  tui_out_data *data = ui_out_data (uiout);
d215 1
a215 1
  tui_out_data *data = ui_out_data (uiout);
d235 1
a235 1
  tui_out_data *data = ui_out_data (uiout);
d293 1
a293 1
  tui_out_data *data = ui_out_data (uiout);
d307 1
a307 1
  tui_out_data *data = ui_out_data (uiout);
d316 1
a316 1
  tui_out_data *data = ui_out_data (uiout);
d338 1
a338 1
  tui_out_data *data = ui_out_data (uiout);
d348 1
a348 1
  tui_out_data *data = ui_out_data (uiout);
d357 1
a357 1
  tui_out_data *data = ui_out_data (uiout);
d372 1
a372 1
  tui_out_data *data = ui_out_data (uiout);
d386 1
a386 1
  tui_out_data *data = ui_out_data (uiout);
d397 1
a397 1
  tui_out_data *data = XMALLOC (tui_out_data);
@


1.3.4.2
log
@2003-08-05  David Carlton  <carlton@@kealia.com>

	* configure.in (build_warnings): Delete -Wformat-nonliteral.
	* configure (build_warnings): Ditto.

	* Merge with mainline; tag is carlton_dictionary-20030805-merge.
@
text
@a92 1
  NULL,
@


1.3.4.3
log
@2003-11-11  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton-dictionary-20031111-merge.
@
text
@d122 1
a122 1
    /* Only the table suppresses the output and, fortunately, a table
@


1.3.14.1
log
@2003-03-16  Mark Kettenis  <kettenis@@gnu.org>

	Merge with mainline.  Tag is kettenis-i386newframe-20030316-mergepoint.
@
text
@d3 1
a3 2
   Copyright 1999, 2000, 2001, 2002, 2003 Free Software Foundation,
   Inc.
a37 1
typedef struct ui_out_data tui_out_data;
d115 1
a115 1
  tui_out_data *data = ui_out_data (uiout);
d129 1
a129 1
  tui_out_data *data = ui_out_data (uiout);
d141 1
a141 1
  tui_out_data *data = ui_out_data (uiout);
d152 1
a152 1
  tui_out_data *data = ui_out_data (uiout);
d166 1
a166 1
  tui_out_data *data = ui_out_data (uiout);
d178 1
a178 1
  tui_out_data *data = ui_out_data (uiout);
d192 1
a192 1
  tui_out_data *data = ui_out_data (uiout);
d215 1
a215 1
  tui_out_data *data = ui_out_data (uiout);
d235 1
a235 1
  tui_out_data *data = ui_out_data (uiout);
d293 1
a293 1
  tui_out_data *data = ui_out_data (uiout);
d307 1
a307 1
  tui_out_data *data = ui_out_data (uiout);
d316 1
a316 1
  tui_out_data *data = ui_out_data (uiout);
d338 1
a338 1
  tui_out_data *data = ui_out_data (uiout);
d348 1
a348 1
  tui_out_data *data = ui_out_data (uiout);
d357 1
a357 1
  tui_out_data *data = ui_out_data (uiout);
d372 1
a372 1
  tui_out_data *data = ui_out_data (uiout);
d386 1
a386 1
  tui_out_data *data = ui_out_data (uiout);
d397 1
a397 1
  tui_out_data *data = XMALLOC (tui_out_data);
@


1.2
log
@* defs.h (XMALLOC): Define.
* gdb-events.sh (XMALLOC): Delete macro.
* gdb-events.c, gdb-events.h: Regenerate.
* gdbarch.sh (XMALLOC): Delete macro.
* gdbarch.c: Regenerate.
* serial.c (XMALLOC): Delete macro.
* ui-file.c (XMALLOC): Ditto.
* ser-unix.h (XMALLOC): Ditto.
* sh-tdep.c (XMALLOC): Ditto.
* ui-out.c (XMALLOC): Ditto.
* utils.c (XMALLOC): Ditto.
* i386-tdep.c (XMALLOC): Ditto.
* gdb-events.c (XMALLOC): Ditto.
* d10v-tdep.c (XMALLOC): Ditto.
* cli-out.c (XMALLOC): Ditto.

* cli-out.c, d10v-tdep.c, gdb-events.c: Update copyright.
* gdb-events.sh, i386-tdep.c, ser-unix.h, serial.c: Ditto.
* ui-file.c, ui-out.c: Ditto.
@
text
@d401 1
a401 1
  data->start_of_line = 1;
@


1.2.6.1
log
@Merge with kseitz_interps-20020930-merge.
@
text
@d401 1
a401 1
  data->start_of_line = 0;
@


1.1
log
@	* tui-hooks.c: New file, gdb hooks for tui.
	* tui-out.c: New file, image copied from cli-out.c.
	(tui_field_int): Identify "line" fields and keep track of them.
	(tui_field_string): Likewise for "file".
	(tui_out_new): Use flags = 0 to avoid printing the sources.
@
text
@d2 3
a4 1
   Copyright 1999, 2000, 2001 Free Software Foundation, Inc.
a29 6

/* Convenience macro for allocting typesafe memory. */

#ifndef XMALLOC
#define XMALLOC(TYPE) (TYPE*) xmalloc (sizeof (TYPE))
#endif
@

