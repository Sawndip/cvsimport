head	1.507;
access;
symbols
	insight_7_6-2013-04-10-branchpoint:1.488
	gdb_7_6-branch:1.488.0.2
	gdb_7_5-branch:1.481.0.2
	gdb_7_4-branch:1.466.0.2
	gdb_7_3-branch:1.456.0.2
	gdb_7_1-branch:1.443.0.2
	gdb_7_0-branch:1.434.0.2
	arc-sim-20090309:1.405.2.1
	arc-insight_6_8-branch:1.405.2.1.0.4
	arc-insight_6_8-branchpoint:1.405.2.1
	insight_6_8-branch:1.405.2.1.0.2
	insight_6_8-branchpoint:1.405.2.1
	gdb_6_8-branch:1.405.0.2
	insight_6_6-20070208-release:1.387.2.1
	gdb_6_6-branch:1.387.0.2
	gdb_6_6-2006-11-15-branchpoint:1.387
	insight_6_5-20061003-release:1.380.2.2
	gdb_6_5-branch:1.380.0.2
	gdb_6_5-2006-05-14-branchpoint:1.380
	gdb-csl-gxxpro-6_3-branch:1.372.0.2
	gdb-csl-gxxpro-6_3-branchpoint:1.372
	gdb_6_4-branch:1.371.0.2
	gdb_6_4-2005-11-01-branchpoint:1.371
	gdb_6_1-2004-04-05-release:1.334
	gdb_6_1-branch:1.334.0.2
	gdb_6_1-2004-03-01-gmt-branchpoint:1.334
	gdb_6_0-2003-10-04-release:1.321.2.3
	gdb_6_0-branch:1.321.0.2
	gdb_6_0-2003-06-23-branchpoint:1.321
	gdb_5_3-2002-12-12-release:1.238.2.2
	gdb_5_3-branch:1.238.0.2
	gdb_5_3-2002-09-04-branchpoint:1.238
	gdb_5_2_1-2002-07-23-release:1.201.2.1
	gdb_5_2-2002-04-29-release:1.201.2.1
	gdb_5_2-branch:1.201.0.2
	gdb_5_2-2002-03-03-branchpoint:1.201
	gdb_5_1_1-2002-01-24-release:1.110.2.2
	cygnus_cvs_20020108_pre:1.181
	gdb_5_1_0_1-2002-01-03-branch:1.110.2.2.0.2
	gdb_5_1_0_1-2002-01-03-branchpoint:1.110.2.2
	gdb_5_1-2001-11-21-release:1.110.2.2
	gdb_s390-2001-09-26-branch:1.110.2.1.0.2
	gdb_s390-2001-09-26-branchpoint:1.110.2.1
	gdb_5_1-2001-07-29-branch:1.110.0.2
	gdb_5_1-2001-07-29-branchpoint:1.110
	dberlin-typesystem-branch:1.101.0.2
	dberlin-typesystem-branchpoint:1.101
	insight-precleanup-2001-01-01:1.5;
locks; strict;
comment	@# @;


1.507
date	2014.01.14.14.33.17;	author tromey;	state Exp;
branches;
next	1.506;

1.506
date	2014.01.09.18.52.28;	author tromey;	state Exp;
branches;
next	1.505;

1.505
date	2013.09.20.11.49.16;	author aburgess;	state Exp;
branches;
next	1.504;

1.504
date	2013.09.20.11.38.18;	author aburgess;	state Exp;
branches;
next	1.503;

1.503
date	2013.09.06.09.35.26;	author aburgess;	state Exp;
branches;
next	1.502;

1.502
date	2013.09.06.09.26.38;	author aburgess;	state Exp;
branches;
next	1.501;

1.501
date	2013.09.06.09.23.00;	author aburgess;	state Exp;
branches;
next	1.500;

1.500
date	2013.09.05.16.16.34;	author aburgess;	state Exp;
branches;
next	1.499;

1.499
date	2013.09.05.13.14.27;	author aburgess;	state Exp;
branches;
next	1.498;

1.498
date	2013.09.05.12.55.57;	author aburgess;	state Exp;
branches;
next	1.497;

1.497
date	2013.08.15.14.26.28;	author kseitz;	state Exp;
branches;
next	1.496;

1.496
date	2013.07.30.23.16.43;	author kseitz;	state Exp;
branches;
next	1.495;

1.495
date	2013.07.23.16.40.47;	author kseitz;	state Exp;
branches;
next	1.494;

1.494
date	2013.07.15.07.42.21;	author rosch;	state Exp;
branches;
next	1.493;

1.493
date	2013.07.02.17.07.28;	author kseitz;	state Exp;
branches;
next	1.492;

1.492
date	2013.06.05.20.29.37;	author kseitz;	state Exp;
branches;
next	1.491;

1.491
date	2013.06.05.20.26.57;	author kseitz;	state Exp;
branches;
next	1.490;

1.490
date	2013.06.05.20.19.46;	author kseitz;	state Exp;
branches;
next	1.489;

1.489
date	2013.04.13.17.01.11;	author kevinb;	state Exp;
branches;
next	1.488;

1.488
date	2013.02.16.07.05.35;	author kseitz;	state Exp;
branches;
next	1.487;

1.487
date	2012.11.21.16.39.33;	author muller;	state Exp;
branches;
next	1.486;

1.486
date	2012.11.16.21.05.38;	author kseitz;	state Exp;
branches;
next	1.485;

1.485
date	2012.11.10.18.09.30;	author kseitz;	state Exp;
branches;
next	1.484;

1.484
date	2012.11.10.17.49.57;	author kseitz;	state Exp;
branches;
next	1.483;

1.483
date	2012.10.24.15.30.38;	author kseitz;	state Exp;
branches;
next	1.482;

1.482
date	2012.10.10.17.28.02;	author kseitz;	state Exp;
branches;
next	1.481;

1.481
date	2012.08.08.13.50.32;	author rosch;	state Exp;
branches
	1.481.2.1;
next	1.480;

1.480
date	2012.06.25.12.08.57;	author rosch;	state Exp;
branches;
next	1.479;

1.479
date	2012.05.25.11.36.08;	author rosch;	state Exp;
branches;
next	1.478;

1.478
date	2012.05.25.10.34.32;	author rosch;	state Exp;
branches;
next	1.477;

1.477
date	2012.05.25.10.18.18;	author rosch;	state Exp;
branches;
next	1.476;

1.476
date	2012.04.19.19.46.31;	author kseitz;	state Exp;
branches;
next	1.475;

1.475
date	2012.04.19.09.41.24;	author rosch;	state Exp;
branches;
next	1.474;

1.474
date	2012.04.13.15.23.46;	author muller;	state Exp;
branches;
next	1.473;

1.473
date	2012.03.30.13.23.52;	author muller;	state Exp;
branches;
next	1.472;

1.472
date	2012.03.30.08.35.27;	author rosch;	state Exp;
branches;
next	1.471;

1.471
date	2012.03.30.07.36.09;	author rosch;	state Exp;
branches;
next	1.470;

1.470
date	2012.03.30.07.18.10;	author rosch;	state Exp;
branches;
next	1.469;

1.469
date	2012.03.30.07.04.59;	author rosch;	state Exp;
branches;
next	1.468;

1.468
date	2012.03.28.13.19.27;	author rosch;	state Exp;
branches;
next	1.467;

1.467
date	2012.03.28.13.09.12;	author rosch;	state Exp;
branches;
next	1.466;

1.466
date	2012.03.20.14.20.24;	author rosch;	state Exp;
branches;
next	1.465;

1.465
date	2012.03.10.21.51.51;	author kseitz;	state Exp;
branches;
next	1.464;

1.464
date	2012.02.28.21.50.50;	author kevinb;	state Exp;
branches;
next	1.463;

1.463
date	2012.02.28.17.32.29;	author kseitz;	state Exp;
branches;
next	1.462;

1.462
date	2011.12.17.19.30.39;	author kseitz;	state Exp;
branches;
next	1.461;

1.461
date	2011.11.02.19.44.37;	author kseitz;	state Exp;
branches;
next	1.460;

1.460
date	2011.09.11.16.33.32;	author kseitz;	state Exp;
branches;
next	1.459;

1.459
date	2011.08.02.18.05.22;	author kseitz;	state Exp;
branches;
next	1.458;

1.458
date	2011.08.01.22.08.20;	author kseitz;	state Exp;
branches;
next	1.457;

1.457
date	2011.05.13.00.36.25;	author kseitz;	state Exp;
branches;
next	1.456;

1.456
date	2011.04.12.05.11.08;	author kseitz;	state Exp;
branches;
next	1.455;

1.455
date	2011.04.08.23.32.42;	author kseitz;	state Exp;
branches;
next	1.454;

1.454
date	2010.12.02.13.48.54;	author kseitz;	state Exp;
branches;
next	1.453;

1.453
date	2010.12.02.06.47.59;	author kseitz;	state Exp;
branches;
next	1.452;

1.452
date	2010.11.13.23.23.45;	author kseitz;	state Exp;
branches;
next	1.451;

1.451
date	2010.07.04.18.13.14;	author kseitz;	state Exp;
branches;
next	1.450;

1.450
date	2010.06.18.22.25.26;	author muller;	state Exp;
branches;
next	1.449;

1.449
date	2010.04.29.21.00.51;	author kseitz;	state Exp;
branches;
next	1.448;

1.448
date	2010.04.02.23.39.54;	author kseitz;	state Exp;
branches;
next	1.447;

1.447
date	2010.03.30.16.48.30;	author kseitz;	state Exp;
branches;
next	1.446;

1.446
date	2010.03.24.20.18.28;	author kseitz;	state Exp;
branches;
next	1.445;

1.445
date	2010.03.12.18.34.12;	author tromey;	state Exp;
branches;
next	1.444;

1.444
date	2010.03.12.14.19.13;	author muller;	state Exp;
branches;
next	1.443;

1.443
date	2010.01.25.19.59.29;	author kseitz;	state Exp;
branches;
next	1.442;

1.442
date	2010.01.15.22.37.18;	author shebs;	state Exp;
branches;
next	1.441;

1.441
date	2010.01.04.20.14.46;	author kseitz;	state Exp;
branches;
next	1.440;

1.440
date	2009.12.02.19.29.42;	author ppluzhnikov;	state Exp;
branches;
next	1.439;

1.439
date	2009.11.09.19.39.31;	author kseitz;	state Exp;
branches;
next	1.438;

1.438
date	2009.11.09.19.31.57;	author kseitz;	state Exp;
branches;
next	1.437;

1.437
date	2009.11.09.19.27.28;	author kseitz;	state Exp;
branches;
next	1.436;

1.436
date	2009.10.09.02.51.47;	author kseitz;	state Exp;
branches;
next	1.435;

1.435
date	2009.10.09.01.23.55;	author kseitz;	state Exp;
branches;
next	1.434;

1.434
date	2009.09.17.07.00.48;	author muller;	state Exp;
branches;
next	1.433;

1.433
date	2009.09.16.09.46.58;	author muller;	state Exp;
branches;
next	1.432;

1.432
date	2009.07.07.12.38.56;	author muller;	state Exp;
branches;
next	1.431;

1.431
date	2009.07.02.15.20.48;	author kseitz;	state Exp;
branches;
next	1.430;

1.430
date	2009.06.19.13.49.37;	author palves;	state Exp;
branches;
next	1.429;

1.429
date	2009.05.28.09.22.12;	author muller;	state Exp;
branches;
next	1.428;

1.428
date	2009.05.24.08.38.27;	author muller;	state Exp;
branches;
next	1.427;

1.427
date	2009.05.06.15.52.10;	author muller;	state Exp;
branches;
next	1.426;

1.426
date	2009.04.24.03.38.49;	author kseitz;	state Exp;
branches;
next	1.425;

1.425
date	2009.04.24.03.28.11;	author kseitz;	state Exp;
branches;
next	1.424;

1.424
date	2009.04.24.03.04.56;	author kseitz;	state Exp;
branches;
next	1.423;

1.423
date	2009.04.06.23.33.32;	author muller;	state Exp;
branches;
next	1.422;

1.422
date	2009.04.06.23.11.09;	author muller;	state Exp;
branches;
next	1.421;

1.421
date	2009.03.31.05.08.34;	author shebs;	state Exp;
branches;
next	1.420;

1.420
date	2009.03.25.23.43.06;	author muller;	state Exp;
branches;
next	1.419;

1.419
date	2009.03.02.22.44.33;	author kevinb;	state Exp;
branches;
next	1.418;

1.418
date	2008.12.16.09.07.57;	author denis;	state Exp;
branches;
next	1.417;

1.417
date	2008.12.15.18.06.12;	author kevinb;	state Exp;
branches;
next	1.416;

1.416
date	2008.10.27.18.40.12;	author kseitz;	state Exp;
branches;
next	1.415;

1.415
date	2008.10.27.18.18.19;	author kseitz;	state Exp;
branches;
next	1.414;

1.414
date	2008.09.22.18.32.41;	author kseitz;	state Exp;
branches;
next	1.413;

1.413
date	2008.09.19.07.23.16;	author denis;	state Exp;
branches;
next	1.412;

1.412
date	2008.09.18.18.28.44;	author kseitz;	state Exp;
branches;
next	1.411;

1.411
date	2008.09.02.17.29.23;	author kseitz;	state Exp;
branches;
next	1.410;

1.410
date	2008.08.02.22.08.32;	author kseitz;	state Exp;
branches;
next	1.409;

1.409
date	2008.07.25.16.12.03;	author tromey;	state Exp;
branches;
next	1.408;

1.408
date	2008.07.14.23.43.36;	author kseitz;	state Exp;
branches;
next	1.407;

1.407
date	2008.05.12.07.24.54;	author muller;	state Exp;
branches;
next	1.406;

1.406
date	2008.04.21.20.14.48;	author kseitz;	state Exp;
branches;
next	1.405;

1.405
date	2008.03.28.16.46.16;	author macro;	state Exp;
branches
	1.405.2.1;
next	1.404;

1.404
date	2008.03.18.18.43.13;	author macro;	state Exp;
branches;
next	1.403;

1.403
date	2008.03.07.08.03.19;	author kseitz;	state Exp;
branches;
next	1.402;

1.402
date	2008.03.03.23.25.02;	author kseitz;	state Exp;
branches;
next	1.401;

1.401
date	2008.02.09.01.23.42;	author kseitz;	state Exp;
branches;
next	1.400;

1.400
date	2008.02.09.00.05.36;	author kseitz;	state Exp;
branches;
next	1.399;

1.399
date	2008.02.05.14.07.05;	author macro;	state Exp;
branches;
next	1.398;

1.398
date	2007.07.02.18.33.22;	author uweigand;	state Exp;
branches;
next	1.397;

1.397
date	2007.06.27.20.50.50;	author kseitz;	state Exp;
branches;
next	1.396;

1.396
date	2007.06.21.15.18.51;	author macro;	state Exp;
branches;
next	1.395;

1.395
date	2007.06.09.17.15.01;	author kseitz;	state Exp;
branches;
next	1.394;

1.394
date	2007.06.05.00.36.29;	author kseitz;	state Exp;
branches;
next	1.393;

1.393
date	2007.05.22.16.29.37;	author macro;	state Exp;
branches;
next	1.392;

1.392
date	2007.04.27.15.39.49;	author macro;	state Exp;
branches;
next	1.391;

1.391
date	2007.03.13.16.29.14;	author kevinb;	state Exp;
branches;
next	1.390;

1.390
date	2006.12.01.03.34.39;	author kseitz;	state Exp;
branches;
next	1.389;

1.389
date	2006.12.01.02.09.23;	author kseitz;	state Exp;
branches;
next	1.388;

1.388
date	2006.12.01.01.07.54;	author kseitz;	state Exp;
branches;
next	1.387;

1.387
date	2006.11.10.07.10.40;	author kseitz;	state Exp;
branches
	1.387.2.1;
next	1.386;

1.386
date	2006.09.29.04.47.18;	author kseitz;	state Exp;
branches;
next	1.385;

1.385
date	2006.09.19.18.39.38;	author kseitz;	state Exp;
branches;
next	1.384;

1.384
date	2006.09.14.17.33.41;	author kseitz;	state Exp;
branches;
next	1.383;

1.383
date	2006.08.25.16.09.48;	author macro;	state Exp;
branches;
next	1.382;

1.382
date	2006.08.25.15.55.23;	author kseitz;	state Exp;
branches;
next	1.381;

1.381
date	2006.06.26.20.44.57;	author kseitz;	state Exp;
branches;
next	1.380;

1.380
date	2006.03.29.13.49.37;	author briand;	state Exp;
branches
	1.380.2.1;
next	1.379;

1.379
date	2006.01.24.01.33.35;	author kseitz;	state Exp;
branches;
next	1.378;

1.378
date	2006.01.24.01.32.26;	author kseitz;	state Exp;
branches;
next	1.377;

1.377
date	2006.01.24.01.30.49;	author kseitz;	state Exp;
branches;
next	1.376;

1.376
date	2006.01.24.01.26.38;	author kseitz;	state Exp;
branches;
next	1.375;

1.375
date	2005.12.23.18.26.50;	author eliz;	state Exp;
branches;
next	1.374;

1.374
date	2005.12.23.18.23.15;	author eliz;	state Exp;
branches;
next	1.373;

1.373
date	2005.11.29.11.09.41;	author ams;	state Exp;
branches;
next	1.372;

1.372
date	2005.11.11.17.19.06;	author kseitz;	state Exp;
branches;
next	1.371;

1.371
date	2005.09.12.16.00.35;	author kseitz;	state Exp;
branches
	1.371.2.1;
next	1.370;

1.370
date	2005.09.01.05.11.04;	author kseitz;	state Exp;
branches;
next	1.369;

1.369
date	2005.09.01.04.05.46;	author kseitz;	state Exp;
branches;
next	1.368;

1.368
date	2005.09.01.03.16.03;	author kseitz;	state Exp;
branches;
next	1.367;

1.367
date	2005.06.14.00.19.39;	author kseitz;	state Exp;
branches;
next	1.366;

1.366
date	2005.06.07.01.10.41;	author kseitz;	state Exp;
branches;
next	1.365;

1.365
date	2005.06.07.00.36.59;	author kseitz;	state Exp;
branches;
next	1.364;

1.364
date	2005.06.01.15.23.15;	author kseitz;	state Exp;
branches;
next	1.363;

1.363
date	2005.05.27.01.30.48;	author kseitz;	state Exp;
branches;
next	1.362;

1.362
date	2005.04.28.23.45.06;	author bje;	state Exp;
branches;
next	1.361;

1.361
date	2005.02.25.22.23.25;	author kseitz;	state Exp;
branches;
next	1.360;

1.360
date	2005.02.17.07.15.46;	author hunt;	state Exp;
branches;
next	1.359;

1.359
date	2005.02.08.01.13.27;	author kseitz;	state Exp;
branches;
next	1.358;

1.358
date	2005.01.19.19.21.46;	author kseitz;	state Exp;
branches;
next	1.357;

1.357
date	2005.01.18.00.14.23;	author kseitz;	state Exp;
branches;
next	1.356;

1.356
date	2005.01.13.22.30.57;	author kseitz;	state Exp;
branches;
next	1.355;

1.355
date	2004.12.13.20.42.19;	author bje;	state Exp;
branches;
next	1.354;

1.354
date	2004.12.08.22.31.44;	author kseitz;	state Exp;
branches;
next	1.353;

1.353
date	2004.11.19.00.19.55;	author kseitz;	state Exp;
branches;
next	1.352;

1.352
date	2004.10.31.10.04.30;	author dsl;	state Exp;
branches;
next	1.351;

1.351
date	2004.08.27.23.13.11;	author hunt;	state Exp;
branches;
next	1.350;

1.350
date	2004.08.09.23.28.17;	author bje;	state Exp;
branches;
next	1.349;

1.349
date	2004.07.02.23.09.31;	author hunt;	state Exp;
branches;
next	1.348;

1.348
date	2004.07.02.22.00.55;	author hunt;	state Exp;
branches;
next	1.347;

1.347
date	2004.06.26.20.30.51;	author cagney;	state Exp;
branches;
next	1.346;

1.346
date	2004.06.25.19.44.21;	author cagney;	state Exp;
branches;
next	1.345;

1.345
date	2004.06.24.22.07.45;	author cagney;	state Exp;
branches;
next	1.344;

1.344
date	2004.06.24.21.50.23;	author cagney;	state Exp;
branches;
next	1.343;

1.343
date	2004.06.15.01.01.43;	author amodra;	state Exp;
branches;
next	1.342;

1.342
date	2004.06.11.18.49.37;	author hunt;	state Exp;
branches;
next	1.341;

1.341
date	2004.05.27.22.00.59;	author hunt;	state Exp;
branches;
next	1.340;

1.340
date	2004.04.22.16.51.43;	author kseitz;	state Exp;
branches;
next	1.339;

1.339
date	2004.04.20.02.04.09;	author roland;	state Exp;
branches;
next	1.338;

1.338
date	2004.04.15.21.40.20;	author roland;	state Exp;
branches;
next	1.337;

1.337
date	2004.04.05.20.36.34;	author hunt;	state Exp;
branches;
next	1.336;

1.336
date	2004.03.30.06.05.26;	author hunt;	state Exp;
branches;
next	1.335;

1.335
date	2004.03.30.06.03.08;	author hunt;	state Exp;
branches;
next	1.334;

1.334
date	2004.02.17.18.43.55;	author hunt;	state Exp;
branches;
next	1.333;

1.333
date	2004.01.07.18.35.58;	author jjohnstn;	state Exp;
branches;
next	1.332;

1.332
date	2003.12.11.22.19.15;	author jimb;	state Exp;
branches;
next	1.331;

1.331
date	2003.11.25.01.44.05;	author carlton;	state Exp;
branches;
next	1.330;

1.330
date	2003.11.11.18.55.41;	author carlton;	state Exp;
branches;
next	1.329;

1.329
date	2003.10.06.16.31.03;	author carlton;	state Exp;
branches;
next	1.328;

1.328
date	2003.09.30.23.10.55;	author carlton;	state Exp;
branches;
next	1.327;

1.327
date	2003.09.08.19.27.48;	author cagney;	state Exp;
branches;
next	1.326;

1.326
date	2003.08.05.14.58.28;	author cagney;	state Exp;
branches;
next	1.325;

1.325
date	2003.08.04.17.08.23;	author carlton;	state Exp;
branches;
next	1.324;

1.324
date	2003.07.29.22.08.09;	author hunt;	state Exp;
branches;
next	1.323;

1.323
date	2003.07.02.22.19.30;	author hunt;	state Exp;
branches;
next	1.322;

1.322
date	2003.06.27.00.29.16;	author kseitz;	state Exp;
branches;
next	1.321;

1.321
date	2003.06.13.19.30.48;	author hunt;	state Exp;
branches
	1.321.2.1;
next	1.320;

1.320
date	2003.06.11.23.29.49;	author carlton;	state Exp;
branches;
next	1.319;

1.319
date	2003.06.11.21.52.22;	author carlton;	state Exp;
branches;
next	1.318;

1.318
date	2003.05.14.17.43.44;	author ezannoni;	state Exp;
branches;
next	1.317;

1.317
date	2003.05.08.23.30.51;	author cagney;	state Exp;
branches;
next	1.316;

1.316
date	2003.04.30.22.01.38;	author cagney;	state Exp;
branches;
next	1.315;

1.315
date	2003.04.11.17.40.22;	author cagney;	state Exp;
branches;
next	1.314;

1.314
date	2003.03.27.18.02.08;	author kseitz;	state Exp;
branches;
next	1.313;

1.313
date	2003.03.25.01.03.42;	author hunt;	state Exp;
branches;
next	1.312;

1.312
date	2003.03.17.22.14.00;	author kseitz;	state Exp;
branches;
next	1.311;

1.311
date	2003.03.06.21.58.41;	author hunt;	state Exp;
branches;
next	1.310;

1.310
date	2003.03.06.21.45.39;	author hunt;	state Exp;
branches;
next	1.309;

1.309
date	2003.03.06.21.28.33;	author hunt;	state Exp;
branches;
next	1.308;

1.308
date	2003.03.06.04.34.51;	author hunt;	state Exp;
branches;
next	1.307;

1.307
date	2003.03.06.01.25.49;	author hunt;	state Exp;
branches;
next	1.306;

1.306
date	2003.02.25.21.36.22;	author carlton;	state Exp;
branches;
next	1.305;

1.305
date	2003.02.21.17.26.28;	author tromey;	state Exp;
branches;
next	1.304;

1.304
date	2003.02.21.15.23.51;	author drow;	state Exp;
branches;
next	1.303;

1.303
date	2003.02.20.17.55.37;	author kseitz;	state Exp;
branches;
next	1.302;

1.302
date	2003.02.20.12.12.33;	author muller;	state Exp;
branches;
next	1.301;

1.301
date	2003.02.18.23.33.05;	author kseitz;	state Exp;
branches;
next	1.300;

1.300
date	2003.02.17.18.49.11;	author cgf;	state Exp;
branches;
next	1.299;

1.299
date	2003.02.17.18.41.29;	author cgf;	state Exp;
branches;
next	1.298;

1.298
date	2003.02.15.07.12.05;	author kseitz;	state Exp;
branches;
next	1.297;

1.297
date	2003.02.15.02.10.40;	author hunt;	state Exp;
branches;
next	1.296;

1.296
date	2003.02.12.16.02.03;	author cagney;	state Exp;
branches;
next	1.295;

1.295
date	2003.02.12.07.06.40;	author hunt;	state Exp;
branches;
next	1.294;

1.294
date	2003.02.12.00.39.46;	author kseitz;	state Exp;
branches;
next	1.293;

1.293
date	2003.02.11.16.08.38;	author cagney;	state Exp;
branches;
next	1.292;

1.292
date	2003.02.10.20.12.23;	author hunt;	state Exp;
branches;
next	1.291;

1.291
date	2003.02.10.20.10.56;	author hunt;	state Exp;
branches;
next	1.290;

1.290
date	2003.02.10.09.47.51;	author hunt;	state Exp;
branches;
next	1.289;

1.289
date	2003.02.04.08.03.09;	author hunt;	state Exp;
branches;
next	1.288;

1.288
date	2003.02.04.07.43.32;	author hunt;	state Exp;
branches;
next	1.287;

1.287
date	2003.02.04.07.20.02;	author hunt;	state Exp;
branches;
next	1.286;

1.286
date	2003.02.04.07.15.49;	author hunt;	state Exp;
branches;
next	1.285;

1.285
date	2003.02.04.07.12.25;	author hunt;	state Exp;
branches;
next	1.284;

1.284
date	2003.01.21.21.58.09;	author hunt;	state Exp;
branches;
next	1.283;

1.283
date	2003.01.21.21.45.39;	author hunt;	state Exp;
branches;
next	1.282;

1.282
date	2002.12.20.22.01.36;	author hunt;	state Exp;
branches;
next	1.281;

1.281
date	2002.12.19.05.35.49;	author hunt;	state Exp;
branches;
next	1.280;

1.280
date	2002.12.19.01.09.08;	author hunt;	state Exp;
branches;
next	1.279;

1.279
date	2002.12.18.19.35.54;	author hunt;	state Exp;
branches;
next	1.278;

1.278
date	2002.12.17.20.29.11;	author hunt;	state Exp;
branches;
next	1.277;

1.277
date	2002.12.06.16.26.39;	author cagney;	state Exp;
branches;
next	1.276;

1.276
date	2002.12.05.18.32.09;	author hunt;	state Exp;
branches;
next	1.275;

1.275
date	2002.12.04.20.46.02;	author hunt;	state Exp;
branches;
next	1.274;

1.274
date	2002.12.04.16.21.20;	author kseitz;	state Exp;
branches;
next	1.273;

1.273
date	2002.12.04.05.38.04;	author hunt;	state Exp;
branches;
next	1.272;

1.272
date	2002.12.04.05.03.02;	author hunt;	state Exp;
branches;
next	1.271;

1.271
date	2002.12.03.23.44.49;	author hunt;	state Exp;
branches;
next	1.270;

1.270
date	2002.12.03.22.52.22;	author hunt;	state Exp;
branches;
next	1.269;

1.269
date	2002.12.03.22.25.10;	author hunt;	state Exp;
branches;
next	1.268;

1.268
date	2002.11.30.17.49.20;	author cagney;	state Exp;
branches;
next	1.267;

1.267
date	2002.11.27.19.09.17;	author hunt;	state Exp;
branches;
next	1.266;

1.266
date	2002.11.27.15.29.52;	author cagney;	state Exp;
branches;
next	1.265;

1.265
date	2002.11.24.18.44.36;	author cagney;	state Exp;
branches;
next	1.264;

1.264
date	2002.11.19.19.33.45;	author cagney;	state Exp;
branches;
next	1.263;

1.263
date	2002.11.12.20.24.03;	author cagney;	state Exp;
branches;
next	1.262;

1.262
date	2002.11.11.23.22.21;	author hunt;	state Exp;
branches;
next	1.261;

1.261
date	2002.11.11.23.09.05;	author hunt;	state Exp;
branches;
next	1.260;

1.260
date	2002.11.11.22.42.05;	author hunt;	state Exp;
branches;
next	1.259;

1.259
date	2002.11.11.22.39.37;	author hunt;	state Exp;
branches;
next	1.258;

1.258
date	2002.11.11.22.29.23;	author hunt;	state Exp;
branches;
next	1.257;

1.257
date	2002.11.08.20.56.43;	author hunt;	state Exp;
branches;
next	1.256;

1.256
date	2002.11.08.05.25.19;	author hunt;	state Exp;
branches;
next	1.255;

1.255
date	2002.11.06.23.45.25;	author hunt;	state Exp;
branches;
next	1.254;

1.254
date	2002.11.06.21.59.23;	author hunt;	state Exp;
branches;
next	1.253;

1.253
date	2002.11.06.21.05.22;	author hunt;	state Exp;
branches;
next	1.252;

1.252
date	2002.11.06.20.45.52;	author hunt;	state Exp;
branches;
next	1.251;

1.251
date	2002.11.06.20.29.13;	author hunt;	state Exp;
branches;
next	1.250;

1.250
date	2002.11.06.14.22.27;	author kseitz;	state Exp;
branches;
next	1.249;

1.249
date	2002.10.15.21.22.05;	author hunt;	state Exp;
branches;
next	1.248;

1.248
date	2002.10.15.21.19.50;	author hunt;	state Exp;
branches;
next	1.247;

1.247
date	2002.10.10.23.55.35;	author hunt;	state Exp;
branches;
next	1.246;

1.246
date	2002.10.10.19.39.28;	author hunt;	state Exp;
branches;
next	1.245;

1.245
date	2002.10.10.00.46.38;	author hunt;	state Exp;
branches;
next	1.244;

1.244
date	2002.09.27.20.07.48;	author kseitz;	state Exp;
branches;
next	1.243;

1.243
date	2002.09.26.17.46.05;	author cagney;	state Exp;
branches;
next	1.242;

1.242
date	2002.09.24.22.24.19;	author hunt;	state Exp;
branches;
next	1.241;

1.241
date	2002.09.20.06.12.28;	author hunt;	state Exp;
branches;
next	1.240;

1.240
date	2002.09.20.06.03.19;	author hunt;	state Exp;
branches;
next	1.239;

1.239
date	2002.09.19.02.35.06;	author kseitz;	state Exp;
branches;
next	1.238;

1.238
date	2002.08.15.18.00.17;	author kseitz;	state Exp;
branches
	1.238.2.1;
next	1.237;

1.237
date	2002.08.14.20.09.20;	author kseitz;	state Exp;
branches;
next	1.236;

1.236
date	2002.08.14.18.10.49;	author kseitz;	state Exp;
branches;
next	1.235;

1.235
date	2002.08.14.18.09.24;	author kseitz;	state Exp;
branches;
next	1.234;

1.234
date	2002.08.14.15.44.24;	author kseitz;	state Exp;
branches;
next	1.233;

1.233
date	2002.08.06.19.35.33;	author kseitz;	state Exp;
branches;
next	1.232;

1.232
date	2002.08.03.16.22.07;	author cagney;	state Exp;
branches;
next	1.231;

1.231
date	2002.08.01.17.56.27;	author kseitz;	state Exp;
branches;
next	1.230;

1.230
date	2002.08.01.01.19.02;	author kseitz;	state Exp;
branches;
next	1.229;

1.229
date	2002.07.03.17.38.20;	author hunt;	state Exp;
branches;
next	1.228;

1.228
date	2002.06.13.00.06.43;	author kseitz;	state Exp;
branches;
next	1.227;

1.227
date	2002.06.07.09.22.56;	author hunt;	state Exp;
branches;
next	1.226;

1.226
date	2002.06.01.06.37.10;	author hunt;	state Exp;
branches;
next	1.225;

1.225
date	2002.05.16.01.09.34;	author hunt;	state Exp;
branches;
next	1.224;

1.224
date	2002.05.07.05.11.09;	author hunt;	state Exp;
branches;
next	1.223;

1.223
date	2002.05.05.18.50.08;	author aoliva;	state Exp;
branches;
next	1.222;

1.222
date	2002.05.04.19.08.32;	author cagney;	state Exp;
branches;
next	1.221;

1.221
date	2002.04.26.21.09.51;	author hunt;	state Exp;
branches;
next	1.220;

1.220
date	2002.04.24.17.11.18;	author kseitz;	state Exp;
branches;
next	1.219;

1.219
date	2002.04.23.00.03.07;	author kseitz;	state Exp;
branches;
next	1.218;

1.218
date	2002.04.21.22.52.41;	author cagney;	state Exp;
branches;
next	1.217;

1.217
date	2002.04.17.18.13.00;	author cagney;	state Exp;
branches;
next	1.216;

1.216
date	2002.04.12.18.18.58;	author cagney;	state Exp;
branches;
next	1.215;

1.215
date	2002.04.09.01.51.06;	author cagney;	state Exp;
branches;
next	1.214;

1.214
date	2002.04.05.22.27.30;	author kseitz;	state Exp;
branches;
next	1.213;

1.213
date	2002.04.05.02.16.20;	author kseitz;	state Exp;
branches;
next	1.212;

1.212
date	2002.04.04.20.38.23;	author drow;	state Exp;
branches;
next	1.211;

1.211
date	2002.04.01.22.29.21;	author kseitz;	state Exp;
branches;
next	1.210;

1.210
date	2002.03.25.22.58.54;	author ezannoni;	state Exp;
branches;
next	1.209;

1.209
date	2002.03.25.16.45.33;	author aoliva;	state Exp;
branches;
next	1.208;

1.208
date	2002.03.14.17.12.09;	author kseitz;	state Exp;
branches;
next	1.207;

1.207
date	2002.03.07.21.53.38;	author hunt;	state Exp;
branches;
next	1.206;

1.206
date	2002.03.07.20.22.40;	author hunt;	state Exp;
branches;
next	1.205;

1.205
date	2002.03.07.06.06.18;	author hunt;	state Exp;
branches;
next	1.204;

1.204
date	2002.03.06.23.56.02;	author kseitz;	state Exp;
branches;
next	1.203;

1.203
date	2002.03.06.20.42.43;	author hunt;	state Exp;
branches;
next	1.202;

1.202
date	2002.03.05.22.22.18;	author hunt;	state Exp;
branches;
next	1.201;

1.201
date	2002.03.01.19.03.16;	author kseitz;	state Exp;
branches
	1.201.2.1;
next	1.200;

1.200
date	2002.02.26.00.29.06;	author irox;	state Exp;
branches;
next	1.199;

1.199
date	2002.02.18.17.19.40;	author tromey;	state Exp;
branches;
next	1.198;

1.198
date	2002.02.14.07.25.21;	author hunt;	state Exp;
branches;
next	1.197;

1.197
date	2002.02.14.02.39.13;	author kseitz;	state Exp;
branches;
next	1.196;

1.196
date	2002.02.12.20.05.13;	author kseitz;	state Exp;
branches;
next	1.195;

1.195
date	2002.02.11.03.21.54;	author drow;	state Exp;
branches;
next	1.194;

1.194
date	2002.02.07.21.56.06;	author hunt;	state Exp;
branches;
next	1.193;

1.193
date	2002.02.07.05.05.04;	author hunt;	state Exp;
branches;
next	1.192;

1.192
date	2002.02.06.18.57.14;	author kseitz;	state Exp;
branches;
next	1.191;

1.191
date	2002.02.06.03.47.53;	author ezannoni;	state Exp;
branches;
next	1.190;

1.190
date	2002.01.18.17.24.28;	author kseitz;	state Exp;
branches;
next	1.189;

1.189
date	2002.01.15.19.21.33;	author kseitz;	state Exp;
branches;
next	1.188;

1.188
date	2002.01.11.23.58.10;	author hunt;	state Exp;
branches;
next	1.187;

1.187
date	2002.01.11.23.28.19;	author hunt;	state Exp;
branches;
next	1.186;

1.186
date	2002.01.11.22.00.11;	author hunt;	state Exp;
branches;
next	1.185;

1.185
date	2002.01.11.04.24.38;	author kseitz;	state Exp;
branches;
next	1.184;

1.184
date	2002.01.08.20.21.44;	author kseitz;	state Exp;
branches;
next	1.183;

1.183
date	2002.01.08.19.57.21;	author kseitz;	state Exp;
branches;
next	1.182;

1.182
date	2002.01.08.19.34.47;	author tromey;	state Exp;
branches;
next	1.181;

1.181
date	2002.01.07.08.58.46;	author irox;	state Exp;
branches;
next	1.180;

1.180
date	2002.01.05.04.30.43;	author cagney;	state Exp;
branches;
next	1.179;

1.179
date	2002.01.04.23.21.38;	author cagney;	state Exp;
branches;
next	1.178;

1.178
date	2002.01.03.21.42.31;	author hunt;	state Exp;
branches;
next	1.177;

1.177
date	2002.01.03.21.27.31;	author hunt;	state Exp;
branches;
next	1.176;

1.176
date	2002.01.03.21.13.03;	author hunt;	state Exp;
branches;
next	1.175;

1.175
date	2002.01.02.23.49.41;	author kseitz;	state Exp;
branches;
next	1.174;

1.174
date	2002.01.02.23.42.49;	author kseitz;	state Exp;
branches;
next	1.173;

1.173
date	2002.01.02.23.36.55;	author kseitz;	state Exp;
branches;
next	1.172;

1.172
date	2002.01.02.22.08.59;	author irox;	state Exp;
branches;
next	1.171;

1.171
date	2001.12.21.22.31.07;	author tromey;	state Exp;
branches;
next	1.170;

1.170
date	2001.12.21.21.36.20;	author kseitz;	state Exp;
branches;
next	1.169;

1.169
date	2001.12.18.21.35.55;	author kseitz;	state Exp;
branches;
next	1.168;

1.168
date	2001.12.16.20.50.01;	author cagney;	state Exp;
branches;
next	1.167;

1.167
date	2001.12.11.08.55.51;	author irox;	state Exp;
branches;
next	1.166;

1.166
date	2001.12.07.21.19.04;	author kseitz;	state Exp;
branches;
next	1.165;

1.165
date	2001.12.05.17.08.05;	author kseitz;	state Exp;
branches;
next	1.164;

1.164
date	2001.11.30.23.31.13;	author hunt;	state Exp;
branches;
next	1.163;

1.163
date	2001.11.22.00.26.11;	author tromey;	state Exp;
branches;
next	1.162;

1.162
date	2001.11.20.21.27.14;	author kseitz;	state Exp;
branches;
next	1.161;

1.161
date	2001.11.19.18.43.18;	author hunt;	state Exp;
branches;
next	1.160;

1.160
date	2001.11.08.18.31.38;	author hunt;	state Exp;
branches;
next	1.159;

1.159
date	2001.11.05.19.42.48;	author hunt;	state Exp;
branches;
next	1.158;

1.158
date	2001.11.05.19.15.17;	author hunt;	state Exp;
branches;
next	1.157;

1.157
date	2001.11.05.19.14.00;	author hunt;	state Exp;
branches;
next	1.156;

1.156
date	2001.11.05.19.00.30;	author hunt;	state Exp;
branches;
next	1.155;

1.155
date	2001.11.01.20.49.21;	author kseitz;	state Exp;
branches;
next	1.154;

1.154
date	2001.10.30.04.41.43;	author hunt;	state Exp;
branches;
next	1.153;

1.153
date	2001.10.29.21.45.28;	author hunt;	state Exp;
branches;
next	1.152;

1.152
date	2001.10.29.19.37.04;	author hunt;	state Exp;
branches;
next	1.151;

1.151
date	2001.10.28.20.08.38;	author tromey;	state Exp;
branches;
next	1.150;

1.150
date	2001.10.18.17.57.48;	author hunt;	state Exp;
branches;
next	1.149;

1.149
date	2001.10.17.20.35.31;	author cagney;	state Exp;
branches;
next	1.148;

1.148
date	2001.10.17.20.30.25;	author tromey;	state Exp;
branches;
next	1.147;

1.147
date	2001.10.13.00.16.17;	author tromey;	state Exp;
branches;
next	1.146;

1.146
date	2001.10.12.23.51.29;	author drow;	state Exp;
branches;
next	1.145;

1.145
date	2001.10.11.06.14.05;	author irox;	state Exp;
branches;
next	1.144;

1.144
date	2001.10.06.18.10.50;	author tromey;	state Exp;
branches;
next	1.143;

1.143
date	2001.10.06.01.42.33;	author kseitz;	state Exp;
branches;
next	1.142;

1.142
date	2001.10.04.15.01.33;	author tromey;	state Exp;
branches;
next	1.141;

1.141
date	2001.09.28.16.36.48;	author tromey;	state Exp;
branches;
next	1.140;

1.140
date	2001.09.27.16.22.21;	author ezannoni;	state Exp;
branches;
next	1.139;

1.139
date	2001.09.27.14.47.44;	author kseitz;	state Exp;
branches;
next	1.138;

1.138
date	2001.09.10.19.21.47;	author irox;	state Exp;
branches;
next	1.137;

1.137
date	2001.08.29.00.23.30;	author kseitz;	state Exp;
branches;
next	1.136;

1.136
date	2001.08.29.00.14.07;	author kseitz;	state Exp;
branches;
next	1.135;

1.135
date	2001.08.28.23.37.59;	author kseitz;	state Exp;
branches;
next	1.134;

1.134
date	2001.08.28.23.04.58;	author kseitz;	state Exp;
branches;
next	1.133;

1.133
date	2001.08.28.22.36.39;	author kseitz;	state Exp;
branches;
next	1.132;

1.132
date	2001.08.28.22.22.56;	author kseitz;	state Exp;
branches;
next	1.131;

1.131
date	2001.08.28.21.20.19;	author kseitz;	state Exp;
branches;
next	1.130;

1.130
date	2001.08.24.00.11.06;	author tromey;	state Exp;
branches;
next	1.129;

1.129
date	2001.08.23.16.35.33;	author hunt;	state Exp;
branches;
next	1.128;

1.128
date	2001.08.22.21.11.16;	author tromey;	state Exp;
branches;
next	1.127;

1.127
date	2001.08.21.19.29.00;	author kseitz;	state Exp;
branches;
next	1.126;

1.126
date	2001.08.21.16.55.21;	author kseitz;	state Exp;
branches;
next	1.125;

1.125
date	2001.08.20.19.14.09;	author kseitz;	state Exp;
branches;
next	1.124;

1.124
date	2001.08.20.17.55.31;	author kseitz;	state Exp;
branches;
next	1.123;

1.123
date	2001.08.17.19.10.33;	author kseitz;	state Exp;
branches;
next	1.122;

1.122
date	2001.08.16.23.04.45;	author kseitz;	state Exp;
branches;
next	1.121;

1.121
date	2001.08.16.18.55.50;	author kseitz;	state Exp;
branches;
next	1.120;

1.120
date	2001.08.16.17.38.16;	author kseitz;	state Exp;
branches;
next	1.119;

1.119
date	2001.08.16.15.48.14;	author kseitz;	state Exp;
branches;
next	1.118;

1.118
date	2001.08.15.21.13.56;	author kseitz;	state Exp;
branches;
next	1.117;

1.117
date	2001.08.13.18.58.36;	author kseitz;	state Exp;
branches;
next	1.116;

1.116
date	2001.08.13.18.37.22;	author kseitz;	state Exp;
branches;
next	1.115;

1.115
date	2001.08.13.18.30.36;	author kseitz;	state Exp;
branches;
next	1.114;

1.114
date	2001.08.09.20.43.53;	author kseitz;	state Exp;
branches;
next	1.113;

1.113
date	2001.08.03.18.46.41;	author kseitz;	state Exp;
branches;
next	1.112;

1.112
date	2001.08.03.03.37.39;	author kseitz;	state Exp;
branches;
next	1.111;

1.111
date	2001.07.31.17.34.56;	author ezannoni;	state Exp;
branches;
next	1.110;

1.110
date	2001.07.26.16.11.16;	author jlarmour;	state Exp;
branches
	1.110.2.1;
next	1.109;

1.109
date	2001.07.21.18.44.03;	author hunt;	state Exp;
branches;
next	1.108;

1.108
date	2001.07.21.18.43.34;	author hunt;	state Exp;
branches;
next	1.107;

1.107
date	2001.07.20.23.26.00;	author hunt;	state Exp;
branches;
next	1.106;

1.106
date	2001.07.20.22.19.49;	author hunt;	state Exp;
branches;
next	1.105;

1.105
date	2001.07.19.17.40.09;	author hunt;	state Exp;
branches;
next	1.104;

1.104
date	2001.07.16.18.05.08;	author nsd;	state Exp;
branches;
next	1.103;

1.103
date	2001.07.13.23.59.04;	author kseitz;	state Exp;
branches;
next	1.102;

1.102
date	2001.07.12.23.10.54;	author kseitz;	state Exp;
branches;
next	1.101;

1.101
date	2001.07.05.23.24.10;	author kseitz;	state Exp;
branches;
next	1.100;

1.100
date	2001.06.18.17.13.26;	author kseitz;	state Exp;
branches;
next	1.99;

1.99
date	2001.06.13.20.01.41;	author kseitz;	state Exp;
branches;
next	1.98;

1.98
date	2001.06.12.16.20.11;	author tromey;	state Exp;
branches;
next	1.97;

1.97
date	2001.06.11.23.08.05;	author tromey;	state Exp;
branches;
next	1.96;

1.96
date	2001.06.11.20.07.45;	author kseitz;	state Exp;
branches;
next	1.95;

1.95
date	2001.06.07.14.42.59;	author kseitz;	state Exp;
branches;
next	1.94;

1.94
date	2001.06.05.22.01.20;	author hunt;	state Exp;
branches;
next	1.93;

1.93
date	2001.06.05.21.59.54;	author hunt;	state Exp;
branches;
next	1.92;

1.92
date	2001.06.04.17.19.12;	author kseitz;	state Exp;
branches;
next	1.91;

1.91
date	2001.06.04.15.49.53;	author kseitz;	state Exp;
branches;
next	1.90;

1.90
date	2001.06.01.20.05.55;	author kseitz;	state Exp;
branches;
next	1.89;

1.89
date	2001.05.31.22.11.26;	author kseitz;	state Exp;
branches;
next	1.88;

1.88
date	2001.05.31.20.35.56;	author kseitz;	state Exp;
branches;
next	1.87;

1.87
date	2001.05.31.15.21.39;	author kseitz;	state Exp;
branches;
next	1.86;

1.86
date	2001.05.25.21.06.18;	author kseitz;	state Exp;
branches;
next	1.85;

1.85
date	2001.05.22.19.02.54;	author kseitz;	state Exp;
branches;
next	1.84;

1.84
date	2001.05.22.18.24.17;	author kseitz;	state Exp;
branches;
next	1.83;

1.83
date	2001.05.22.15.46.02;	author kseitz;	state Exp;
branches;
next	1.82;

1.82
date	2001.05.18.22.57.30;	author kseitz;	state Exp;
branches;
next	1.81;

1.81
date	2001.05.18.22.49.33;	author kseitz;	state Exp;
branches;
next	1.80;

1.80
date	2001.05.14.18.21.53;	author kseitz;	state Exp;
branches;
next	1.79;

1.79
date	2001.05.12.01.47.35;	author tromey;	state Exp;
branches;
next	1.78;

1.78
date	2001.05.11.20.01.57;	author kevinb;	state Exp;
branches;
next	1.77;

1.77
date	2001.05.11.14.33.10;	author kseitz;	state Exp;
branches;
next	1.76;

1.76
date	2001.05.11.05.08.32;	author kseitz;	state Exp;
branches;
next	1.75;

1.75
date	2001.05.10.22.34.54;	author kseitz;	state Exp;
branches;
next	1.74;

1.74
date	2001.05.10.18.04.23;	author kseitz;	state Exp;
branches;
next	1.73;

1.73
date	2001.05.09.17.03.15;	author kseitz;	state Exp;
branches;
next	1.72;

1.72
date	2001.05.07.15.43.23;	author kseitz;	state Exp;
branches;
next	1.71;

1.71
date	2001.05.06.21.06.34;	author kevinb;	state Exp;
branches;
next	1.70;

1.70
date	2001.05.03.18.13.20;	author kseitz;	state Exp;
branches;
next	1.69;

1.69
date	2001.04.23.20.28.28;	author kseitz;	state Exp;
branches;
next	1.68;

1.68
date	2001.04.23.20.27.54;	author kseitz;	state Exp;
branches;
next	1.67;

1.67
date	2001.04.20.18.47.32;	author kseitz;	state Exp;
branches;
next	1.66;

1.66
date	2001.04.20.17.20.02;	author kseitz;	state Exp;
branches;
next	1.65;

1.65
date	2001.04.19.22.51.02;	author kseitz;	state Exp;
branches;
next	1.64;

1.64
date	2001.04.19.22.48.46;	author kseitz;	state Exp;
branches;
next	1.63;

1.63
date	2001.04.19.05.28.54;	author hunt;	state Exp;
branches;
next	1.62;

1.62
date	2001.04.18.17.43.59;	author tromey;	state Exp;
branches;
next	1.61;

1.61
date	2001.04.18.16.49.37;	author tromey;	state Exp;
branches;
next	1.60;

1.60
date	2001.04.17.16.14.22;	author fnasser;	state Exp;
branches;
next	1.59;

1.59
date	2001.04.12.19.46.44;	author nsd;	state Exp;
branches;
next	1.58;

1.58
date	2001.04.10.15.49.05;	author kseitz;	state Exp;
branches;
next	1.57;

1.57
date	2001.04.09.17.35.29;	author hunt;	state Exp;
branches;
next	1.56;

1.56
date	2001.04.06.19.23.33;	author cgf;	state Exp;
branches;
next	1.55;

1.55
date	2001.04.05.00.04.26;	author hunt;	state Exp;
branches;
next	1.54;

1.54
date	2001.04.02.23.30.25;	author hunt;	state Exp;
branches;
next	1.53;

1.53
date	2001.03.29.22.42.17;	author fnasser;	state Exp;
branches;
next	1.52;

1.52
date	2001.03.29.22.33.29;	author fnasser;	state Exp;
branches;
next	1.51;

1.51
date	2001.03.29.22.17.45;	author fnasser;	state Exp;
branches;
next	1.50;

1.50
date	2001.03.15.19.44.29;	author hunt;	state Exp;
branches;
next	1.49;

1.49
date	2001.03.15.18.31.37;	author tromey;	state Exp;
branches;
next	1.48;

1.48
date	2001.03.13.23.31.14;	author cagney;	state Exp;
branches;
next	1.47;

1.47
date	2001.03.01.20.11.27;	author nsd;	state Exp;
branches;
next	1.46;

1.46
date	2001.03.01.20.00.12;	author kseitz;	state Exp;
branches;
next	1.45;

1.45
date	2001.03.01.12.43.58;	author nsd;	state Exp;
branches;
next	1.44;

1.44
date	2001.03.01.12.36.46;	author nsd;	state Exp;
branches;
next	1.43;

1.43
date	2001.03.01.12.30.41;	author nsd;	state Exp;
branches;
next	1.42;

1.42
date	2001.03.01.01.48.33;	author cagney;	state Exp;
branches;
next	1.41;

1.41
date	2001.02.27.22.25.37;	author kseitz;	state Exp;
branches;
next	1.40;

1.40
date	2001.02.21.14.48.19;	author fnasser;	state Exp;
branches;
next	1.39;

1.39
date	2001.02.14.19.05.57;	author fnasser;	state Exp;
branches;
next	1.38;

1.38
date	2001.02.08.19.26.29;	author fnasser;	state Exp;
branches;
next	1.37;

1.37
date	2001.02.07.01.11.18;	author fnasser;	state Exp;
branches;
next	1.36;

1.36
date	2001.02.05.02.24.55;	author fnasser;	state Exp;
branches;
next	1.35;

1.35
date	2001.02.02.02.41.45;	author fnasser;	state Exp;
branches;
next	1.34;

1.34
date	2001.02.01.22.56.26;	author fnasser;	state Exp;
branches;
next	1.33;

1.33
date	2001.02.01.21.03.43;	author fnasser;	state Exp;
branches;
next	1.32;

1.32
date	2001.02.01.17.59.38;	author fnasser;	state Exp;
branches;
next	1.31;

1.31
date	2001.02.01.04.56.29;	author fnasser;	state Exp;
branches;
next	1.30;

1.30
date	2001.02.01.04.54.11;	author fnasser;	state Exp;
branches;
next	1.29;

1.29
date	2001.01.31.23.37.20;	author fnasser;	state Exp;
branches;
next	1.28;

1.28
date	2001.01.31.03.04.21;	author fnasser;	state Exp;
branches;
next	1.27;

1.27
date	2001.01.28.18.52.47;	author fnasser;	state Exp;
branches;
next	1.26;

1.26
date	2001.01.28.18.38.59;	author fnasser;	state Exp;
branches;
next	1.25;

1.25
date	2001.01.28.18.08.58;	author fnasser;	state Exp;
branches;
next	1.24;

1.24
date	2001.01.28.18.06.29;	author fnasser;	state Exp;
branches;
next	1.23;

1.23
date	2001.01.27.00.50.29;	author fnasser;	state Exp;
branches;
next	1.22;

1.22
date	2001.01.25.18.29.09;	author fnasser;	state Exp;
branches;
next	1.21;

1.21
date	2001.01.25.17.49.22;	author fnasser;	state Exp;
branches;
next	1.20;

1.20
date	2001.01.25.03.04.41;	author fnasser;	state Exp;
branches;
next	1.19;

1.19
date	2001.01.25.03.01.37;	author fnasser;	state Exp;
branches;
next	1.18;

1.18
date	2001.01.19.14.24.54;	author fnasser;	state Exp;
branches;
next	1.17;

1.17
date	2001.01.18.22.37.19;	author fnasser;	state Exp;
branches;
next	1.16;

1.16
date	2001.01.17.23.45.04;	author fnasser;	state Exp;
branches;
next	1.15;

1.15
date	2001.01.15.20.18.44;	author fnasser;	state Exp;
branches;
next	1.14;

1.14
date	2001.01.09.11.52.14;	author fnasser;	state Exp;
branches;
next	1.13;

1.13
date	2001.01.04.17.55.47;	author fnasser;	state Exp;
branches;
next	1.12;

1.12
date	2001.01.04.17.27.02;	author fnasser;	state Exp;
branches;
next	1.11;

1.11
date	2001.01.04.17.22.22;	author fnasser;	state Exp;
branches;
next	1.10;

1.10
date	2001.01.04.16.36.47;	author fnasser;	state Exp;
branches;
next	1.9;

1.9
date	2001.01.03.15.13.16;	author fnasser;	state Exp;
branches;
next	1.8;

1.8
date	2001.01.03.05.34.04;	author fnasser;	state Exp;
branches;
next	1.7;

1.7
date	2001.01.03.04.31.15;	author fnasser;	state Exp;
branches;
next	1.6;

1.6
date	2001.01.03.03.42.19;	author fnasser;	state Exp;
branches;
next	1.5;

1.5
date	2001.01.02.00.53.40;	author fnasser;	state Exp;
branches;
next	1.4;

1.4
date	2000.12.14.15.09.04;	author fnasser;	state Exp;
branches;
next	1.3;

1.3
date	2000.07.02.20.18.11;	author kevinb;	state Exp;
branches;
next	1.2;

1.2
date	2000.07.02.20.07.07;	author kevinb;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.17.20.20.20;	author jlarmour;	state Exp;
branches;
next	;

1.481.2.1
date	2012.08.29.22.08.47;	author kevinb;	state Exp;
branches;
next	;

1.405.2.1
date	2008.03.30.00.11.58;	author kseitz;	state Exp;
branches;
next	;

1.387.2.1
date	2006.12.08.04.16.39;	author kseitz;	state Exp;
branches;
next	;

1.380.2.1
date	2006.06.26.20.44.07;	author kseitz;	state Exp;
branches;
next	1.380.2.2;

1.380.2.2
date	2006.09.29.04.39.20;	author kseitz;	state Exp;
branches;
next	;

1.371.2.1
date	2005.11.22.02.27.29;	author kseitz;	state Exp;
branches;
next	;

1.321.2.1
date	2003.06.27.00.29.02;	author kseitz;	state Exp;
branches;
next	1.321.2.2;

1.321.2.2
date	2003.07.03.17.15.09;	author hunt;	state Exp;
branches;
next	1.321.2.3;

1.321.2.3
date	2003.07.29.22.11.08;	author hunt;	state Exp;
branches;
next	;

1.238.2.1
date	2002.09.28.15.10.32;	author cagney;	state Exp;
branches;
next	1.238.2.2;

1.238.2.2
date	2002.12.10.20.09.11;	author cagney;	state Exp;
branches;
next	;

1.201.2.1
date	2002.03.25.16.46.15;	author aoliva;	state Exp;
branches;
next	;

1.110.2.1
date	2001.08.21.18.34.44;	author kseitz;	state Exp;
branches;
next	1.110.2.2;

1.110.2.2
date	2001.10.21.01.09.46;	author cagney;	state Exp;
branches;
next	;


desc
@@


1.507
log
@	* generic/gdbtk-main.c (main): Don't set use_windows.
@
text
@2014-01-13  Tom Tromey  <tromey@@redhat.com>

	* generic/gdbtk-main.c (main): Don't set use_windows.

2014-01-09  Tom Tromey  <tromey@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Use
	command_param_changed observer, not deprecated_set_hook.
	(gdbtk_param_changed): Rename from gdbtk_set_hook.  Simplify.

2013-09-20  Andrew Burgess  <aburgess@@broadcom.com>

	* generic/gdbtk-register.c (register_changed_p): Replace use of
	deprecated_frame_register_read with get_frame_register_value.

2013-09-20  Andrew Burgess  <aburgess@@broadcom.com>

	* generic/gdbtk.c: Add include of "main.h".
	(gdbtk_init_1): Remove.
	(argv0): Remove.
	(_initialize_gdbtk): No longer set deprecated_init_ui_hook.
	(gdbtk_init): Use get_gdb_program_name function from main.h.

2013-09-06  Andrew Burgess  <aburgess@@broadcom.com>

	* library/interface.tcl (gdbtk_tcl_architecture_changed): Add call
	to gdb_reg_arch_changed.
	* library/regwin.itb (arch_changed): Remove call to
	gdb_reg_arch_changed.

2013-09-06  Andrew Burgess  <aburgess@@broadcom.com>

	* generic/gdbk-register.c (old_regs_count): New variable.
	(register_changed_p): Add new assert.
	(setup_architecture_data): Initialise old_regs_count.

2013-09-05  Andrew Burgess  <aburgess@@broadcom.com>

	* generic/gdbk-register.c (old_regs): Move the comment about this
	variable next to the definition.

2013-09-05  Andrew Burgess  <aburgess@@broadcom.com>

	* generic/gdbtk-interp.c (gdbtk_command_loop): Change signature to
	take interpreter cookie (ignored), mention parameter in comment.
	(gdb_interpreter_resume): Remove use of
	deprecated_command_loop_hook.
	(_initialize_gdbtk_interp): Fill in logging proc and command loop
	proc pointers.

2013-08-15  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_search): Update for symbol
	searching API update in gdb.
	
2013-07-30  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_clear_file): Remove use of pop_target,
	which was recently removed from gdb.

2013-07-23  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (close_bfds): Update declaration.

2013-07-15  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-register.c (get_register): Update
	to reflect changes from upstream gdb. Prettyprinting
	becomes prettyformatting now.
	* generic/gdbtk-wrapper.c (GDB_val_print,wrap_val_print):
	Likewise.
	* generic/gdbtk-wrapper.h (GDB_val_print): Likewise.

2013-07-02  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_listfuncs): Update declaration.
	* generic/gdbtk-hooks.c (gdb_two_elem_cmd): Likewise.
	(report_error): Likewise.
	(gdbtk_readline_end, gdbtk_post_add_symbol, gdbtk_error_begin,
	gdbtk_attach): Likewise.
	* generic/gdbtk/gdbtk-register.c (setup_architecture_data):
	Likewise.
	* generic/gdbtk-wrapper.c (GDB_equal_value, GDB_reinit_frame_cache,
	GDB_value-coerce_array): Likewise.
	* generic/gdbtk.c (gdbtk_interactive, gdbtk_start_timer,
	gdbtk_stop_timer, _initialize_gdbtk): Likewise.

2013-06-05  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-stack.c (get_frame_name): Change type of 'funname'
	to char * to follow recent API updates in gdb.
	Free 'funname' after appending it to the list.
	Remove check for NULL funname in a branch where it could only
	ever be NULL.

2013-06-05  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-register.c (map_arg_registers): Change type of
	raw_buffer to gdb_byte to follow recent API changes in gdb.
	* generic/gdbtk-cmds.c (gdb_update_mem): Likewise for ' mbfu',
	'mptr', and 'cptr'.

2013-06-05  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (tk_command): Use xfree instead of free.
	* generic/gdbtk-hooks.c (gdbtk_call_command): Remove unused
	cleanup.
	* generic/gdbtk-cmds.c (gdb_load_info): If bfd_check_format
	fails, run the cleanup.

2013-04-13  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-cmds.c (pc_function_name): Adjust type of
	`msym' to account for change in return type of
	lookup_minimal_symbol_by_pc().

2013-02-15  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdb_find_bp_at_line): Update struct
	bp_location changes wrt source_file from GDB.


@


1.506
log
@	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Use
	command_param_changed observer, not deprecated_set_hook.
	(gdbtk_param_changed): Rename from gdbtk_set_hook.  Simplify.
@
text
@d1 4
@


1.505
log
@Remove use of deprecated_frame_register_read.

  https://sourceware.org/ml/insight/2013-q3/msg00043.html

gdb/gdbtk/ChangeLog

        * generic/gdbtk-register.c (register_changed_p): Replace use of
        deprecated_frame_register_read with get_frame_register_value.
@
text
@d1 6
@


1.504
log
@Remove use of deprecated_init_ui_hook.

  https://sourceware.org/ml/insight/2013-q3/msg00042.html

gdb/gdbtk/ChangeLog

        * generic/gdbtk.c: Add include of "main.h".
        (gdbtk_init_1): Remove.
        (argv0): Remove.
        (_initialize_gdbtk): No longer set deprecated_init_ui_hook.
        (gdbtk_init): Use get_gdb_program_name function from main.h.
@
text
@d3 5
@


1.503
log
@Notice architecture changes even when the register window is not open.

  https://sourceware.org/ml/insight/2013-q3/msg00036.html

gdb/gdbtk/ChangeLog

        * library/interface.tcl (gdbtk_tcl_architecture_changed): Add call
        to gdb_reg_arch_changed.
        * library/regwin.itb (arch_changed): Remove call to
        gdb_reg_arch_changed.
@
text
@d1 8
@


1.502
log
@Fix date for ChangeLog entry of previous commit.
@
text
@d3 7
@


1.501
log
@Add an assert that we're not overflowing the register cache.

  https://sourceware.org/ml/insight/2013-q3/msg00035.html

gdb/gdbtk/ChangeLog

        * generic/gdbk-register.c (old_regs_count): New variable.
        (register_changed_p): Add new assert.
        (setup_architecture_data): Initialise old_regs_count.
@
text
@d1 1
a1 1
2013-09-05  Andrew Burgess  <aburgess@@broadcom.com>
@


1.500
log
@OBVIOUS: Correct the date in a previous ChangeLog entry.

I used the wrong date in a recent ChangeLog entry, fixed with this commit.
@
text
@d3 6
@


1.499
log
@Move comment about old_regs next to the definition.

gdb/gdbtk/ChangeLog

        * generic/gdbk-register.c (old_regs): Move the comment about this
        variable next to the definition.
@
text
@d6 1
a6 1
2013-08-22  Andrew Burgess  <aburgess@@broadcom.com>
@


1.498
log
@Remove use of deprecated_command_loop_hook.

  https://sourceware.org/ml/insight/2013-q3/msg00029.html

gdb/gdbtk/ChangeLog

        * generic/gdbtk-interp.c (gdbtk_command_loop): Change signature to
        take interpreter cookie (ignored), mention parameter in comment.
        (gdb_interpreter_resume): Remove use of
        deprecated_command_loop_hook.
        (_initialize_gdbtk_interp): Fill in logging proc and command loop
        proc pointers.
@
text
@d1 5
@


1.497
log
@	* generic/gdbtk-cmds.c (gdb_search): Update for symbol
	searching API update in gdb.
@
text
@d1 9
@


1.496
log
@	* generic/gdbtk-cmds.c (gdb_clear_file): Remove use of pop_target,
	which was recently removed from gdb.
@
text
@d1 5
@


1.495
log
@	* generic/gdbtk.c (close_bfds): Update declaration.
@
text
@d1 5
@


1.494
log
@2013-07-15  Roland Schwingel  <roland.schwingel@@onevision.com>

   * generic/gdbtk-register.c (get_register): Update
   to reflect changes from upstream gdb. Prettyprinting
   becomes prettyformatting now.
   * generic/gdbtk-wrapper.c (GDB_val_print,wrap_val_print):
   Likewise.
   * generic/gdbtk-wrapper.h (GDB_val_print): Likewise.
@
text
@d1 4
@


1.493
log
@	* generic/gdbtk-cmds.c (gdb_listfuncs): Update declaration.
	* generic/gdbtk-hooks.c (gdb_two_elem_cmd): Likewise.
	(report_error): Likewise.
	(gdbtk_readline_end, gdbtk_post_add_symbol, gdbtk_error_begin,
	gdbtk_attach): Likewise.
	* generic/gdbtk/gdbtk-register.c (setup_architecture_data):
	Likewise.
	* generic/gdbtk-wrapper.c (GDB_equal_value, GDB_reinit_frame_cache,
	GDB_value-coerce_array): Likewise.
	* generic/gdbtk.c (gdbtk_interactive, gdbtk_start_timer,
	gdbtk_stop_timer, _initialize_gdbtk): Likewise.
@
text
@d1 9
@


1.492
log
@	* generic/gdbtk-stack.c (get_frame_name): Change type of 'funname'
	to char * to follow recent API updates in gdb.
	Free 'funname' after appending it to the list.
	Remove check for NULL funname in a branch where it could only
	ever be NULL.
@
text
@d1 14
@


1.491
log
@	* generic/gdbtk-register.c (map_arg_registers): Change type of
	raw_buffer to gdb_byte to follow recent API changes in gdb.
	* generic/gdbtk-cmds.c (gdb_update_mem): Likewise for ' mbfu',
	'mptr', and 'cptr'.
@
text
@d3 8
@


1.490
log
@	* generic/gdbtk.c (tk_command): Use xfree instead of free.
	* generic/gdbtk-hooks.c (gdbtk_call_command): Remove unused
	cleanup.
	* generic/gdbtk-cmds.c (gdb_load_info): If bfd_check_format
	fails, run the cleanup.
@
text
@d3 7
@


1.489
log
@	* generic/gdbtk-cmds.c (pc_function_name): Adjust type of
	`msym' to account for change in return type of
	lookup_minimal_symbol_by_pc().
@
text
@d1 8
@


1.488
log
@	* generic/gdbtk-bp.c (gdb_find_bp_at_line): Update struct
	bp_location changes wrt source_file from GDB.
@
text
@d1 6
@


1.487
log
@	* generic/gdbtk-register.c (register_changed_p): Adapt to
	function name change from frame_register_read to
	deprecated_frame_register_read.
@
text
@d1 1
a1 1
2012-11-21  Pierre Muller  <muller@@sourceware.org>
d3 2
a4 3
	* generic/gdbtk-register.c (register_changed_p): Adapt to
	function name change from frame_register_read to
	deprecated_frame_register_read.
a5 194
2012-11-16  Keith Seitz  <keiths@@redhat.com>

	From Pierre Muller  <muller@@sourceware.org>
	Adapt to change in gdb/configure.ac
	Don't check for ctype.h, time.h.
	* generic/gdbtk-cmds.c: Don't use HAVE_CTYPE_H.

2012-11-10  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (breakpoint_notify): Fix logic error
	when detecting breakpoint types to be handled.

2012-11-10  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (breakpoint_notify): Handle tracepoints, too.
	(tracepoint_notify): Remove.
	(gdbtk_create_tracepoint): Remove.
	(gdbtk_delete_tracepoint): Remove.
	(gdbtk_modify_tracepoint): Remove.
	* generic/gdbtk-hooks.c: Remove deleted function extern declarations.
	(gdbtk_add_hooks): Remove tracepoint observers.

2012-10-24  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_memory_changed): Update for
	API changes.

2012-10-10  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_memory_changed): Change LEN
	from int to ssize_t to match changes in the API.
	(x_event): Use set_quit_flag to set the quit_flag.
	* generic/gdbtk-cmds.c (gdb_stop): Likewise.

2012-08-08  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-cmds.c (gdb_load_info): Replace call to
	make_cleanup_bfd_close with make_cleanup_bfd_unref due
	to changes in gdb.
	(gdb_loc): Replace call to decode_line_spec with call to
	decode_line_with_current_source due to changes in gdb.
	* generic/gdbtk-wrapper.c: Comment unused functions
	GDB_parse_exp_1 and wrap_parse_exp_1 as parse_exp_1 has
	changed its interface and the code appears to be unused
	anyway.
	* generic/gdbtk-wrapper.h: ditto

2012-06-25  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-cmds.c: On windows include
	windows.h/tlhelp32.h. Declare new
	function gdb_list_processes().
	(Gdbtk_Init): Register new tcl function
	"gdb_list_processes".
	(gdb_list_processes): New function.
	* library/attachdlg.itb: Updated copyright.
	(list_pids): Use gdb_list_processes for
	getting the process list. Fallback to
	ps if empty list is returned. Adapt method comment.
	* library/srcbar.itcl: Updated copyright.
	(create_run_menu): Allow "Attach to process" on
	windows, too.

2012-05-25  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-bp.c (gdb_set_bp): Add new NULL param
	to call to create_breakpoint() due to changes in gdb.
	* generic/gdbtk-cmds.c (gdb_listfuncs): Iterator param
	in call to ALL_BLOCK_SYMBOLS() now is a pointer to
	struct block_iterator instead of struct dict_iterator.
	* generic/gdbtk-stack.c (gdb_block_vars,gdb_get_blocks)
	(gdb_get_vars_command): Likewise.
	* generic/gdbtk-hooks.c (gdbtk_annotate_signal): Change
	function calls: target_signal_to_name -> gdb_signal_to_name
	target_signal_to_string -> gdb_signal_to_string due to
	recent changes in gdb.

2012-05-25  Roland Schwingel  <roland.schwingel@@onevision.com>

	* library/locals.tcl: Updated copyright.
	(reconfig): New method for getting prefs updates.
	* library/prefs.tcl: Updated copyright.
	(pref_read): Moved comment. Take color for changed
	fields from gdb/src/PC_TAG prefs value.
	(pref_set_defaults): Change default of
	PC_TAG color to a somewhat darker green.
	(pref_set_colors): Call pref_load_default in central place.
	(pref_set_option_db): Remove hard wired old color for
	changed values.
	* library/regwin.itb: Update copyright.
	(reconfig): Update highlight color of register table.
	* library/srcpref.itb: Update copyright.
	(_build_win): Change text of PC color chooser.
	(_apply): Update global changed fields color from PC_TAG color.
	* library/vartree.itb (update_var): use changed field color from
	global colors list.
	(_init_data): Remove local copy of changed vars color.

2012-05-25  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-stack.c: Updated copyright informations.
	include "stack.h" and "solib.h" (when needed).
	(gdb_stack): Some reformatting.
	(get_frame_name): Updated usage of gdb api for
	backtrace generation. Some reformatting. Removed
	dead code. Also handle frame type ARCH_FRAME now.
	* library/stackwin.it[bh]: Remove dead instance
	variable maxwidth. Updated copyright informations.

2012-04-19  Keith Seitz  <keiths@@redhat.com>

	From Patrick Monnerat  <pm@@datasphere.ch>:
	* generic/gdbtk-hooks.c (gdbtk_annotate_signal): Avoid
	dereferencing a null (i.e.: dead) process/thread.

2012-04-19  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-bp.c: Updated copyright.
	(gdb_find_bp_at_line): Don't access location struct
	of breakpoint if it is NULL. 

2012-04-13  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* generic/gdbtk-register.c (get_register_types): Use
	host_address_to_string function to avoid use of "%lx" and
	typecasts.

2012-03-30  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* generic/gdbtk.h (close_bfds): Fix prototype.

2012-03-30  Roland Schwingel  <roland.schwingel@@onevision.com>

	* library/globalpref.itb: Updated Copyright to 1997-2012 Red Hat, Inc.
	(_build_win): Remove unneeded debug call. Fix packing of 
	OK/Apply/Cancel buttons for newer tk versions. Small reformatting.

2012-03-30  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-register.c: Updated Copyright year to 2001-2012.
	(get_register_types): Cast result of TYPE_FIELD_TYPE to size_t 
	instead of long.
	(gdb_regformat): on windows 64bit use strtoll instead of strtol.
	* generic/gdbtk-stack.c: Updated Copyright year to 2001-2012.
	(gdb_get_vars_command): Don't cast clientData to long. Here 
	checking of non NULL clientData is enough.

2012-03-30  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-cmds.c: Updated Copyright year to 1994-2012.
	Remove unneeded include.

2012-03-30  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk.c: Updated Copyright year to 1994-2012.
	(gdbtk_init): Move call to ide_create_shell_execute_command
	to generic windows section.

2012-03-28  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk.c (gdbtk_init,tk_command): Replace deprecated access
	to tcl interpreter result string with Tcl_GetStringResult().
	* generic/gdbtk-hooks.c (gdbtk_read,gdbtk_readline,gdbtk_load_hash)
	(gdbtk_query): Likewise. 
	(gdbtk_read): Simplified error handling in case "gdbtk_console_read"
	fails. Some reformatting.

2012-03-14  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-bp.c (gdb_set_bp): Adjust parameters
	of create_breakpoint() to match recent change.

2012-03-10  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-interp.c (_initialize_gdbtk_interp): Add
	missing prototype to appease -Wmissing-prototypes.

2012-02-28  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-cmds.h (pc_function_name): Make return type
	const.
	* generic/gdbtk-bp.c (gdb_get_breakpoint_info)
	(gdb_get_tracepoint_info): Make char * variables const to match
	recent GDB API changes.
	* generic/gdbtk-stack.c (get_frame_name): Likewise.
	* generic/gdbtk-cmds.c (gdb_get_function_command, gdb_listfuncs)
	(gdb_loc, perror_with_name_wrapper): Likewise.
	(pc_function_name): Likewise, plus change return type to be const.

2012-02-28  Keith Seitz  <keiths@@redhat.com>

	From Jeffrey Armstrong  <jeffrey.armstrong@@approximatrix.com>:
	* library/srctextwin.itb (lookup_line): Quote the filename
	to gdb_set_bp.
@


1.486
log
@	From Pierre Muller  <muller@@sourceware.org>
	Adapt to change in gdb/configure.ac
	Don't check for ctype.h, time.h.
	* generic/gdbtk-cmds.c: Don't use HAVE_CTYPE_H.
@
text
@d1 6
@


1.485
log
@	* generic/gdbtk-bp.c (breakpoint_notify): Fix logic error
	when detecting breakpoint types to be handled.
@
text
@d1 7
@


1.484
log
@	* generic/gdbtk-bp.c (breakpoint_notify): Handle tracepoints, too.
	(tracepoint_notify): Remove.
	(gdbtk_create_tracepoint): Remove.
	(gdbtk_delete_tracepoint): Remove.
	(gdbtk_modify_tracepoint): Remove.
	* generic/gdbtk-hooks.c: Remove deleted function extern declarations.
	(gdbtk_add_hooks): Remove tracepoint observers.
@
text
@d3 5
@


1.483
log
@	* generic/gdbtk-hooks.c (gdbtk_memory_changed): Update for
	API changes.
@
text
@d1 10
@


1.482
log
@	* generic/gdbtk-hooks.c (gdbtk_memory_changed): Change LEN
	from int to ssize_t to match changes in the API.
	(x_event): Use set_quit_flag to set the quit_flag.
	* generic/gdbtk-cmds.c (gdb_stop): Likewise.
@
text
@d1 5
@


1.481
log
@	* generic/gdbtk-cmds.c (gdb_load_info): Replace call to
	make_cleanup_bfd_close with make_cleanup_bfd_unref due
	to changes in gdb.
	(gdb_loc): Replace call to decode_line_spec with call to
	decode_line_with_current_source due to changes in gdb.
	* generic/gdbtk-wrapper.c: Comment unused functions
	GDB_parse_exp_1 and wrap_parse_exp_1 as parse_exp_1 has
	changed its interface and the code appears to be unused
	anyway.
	* generic/gdbtk-wrapper.h: ditto
@
text
@d1 7
@


1.481.2.1
log
@	* generic/gdbtk-cmds.c (gdb_load_info): Revert change
	regarding make_cleanup_bfd_unref for the gdb 7.5 branch.
@
text
@a0 5
2012-08-29  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_load_info): Revert change
	regarding make_cleanup_bfd_unref for the gdb 7.5 branch.

@


1.480
log
@   * generic/gdbtk-cmds.c: On windows include
   windows.h/tlhelp32.h. Declare new
   function gdb_list_processes().
   (Gdbtk_Init): Register new tcl function
   "gdb_list_processes".
   (gdb_list_processes): New function.
   * library/attachdlg.itb: Updated copyright.
   (list_pids): Use gdb_list_processes for
   getting the process list. Fallback to
   ps if empty list is returned. Adapt method comment.
   * library/srcbar.itcl: Updated copyright.
   (create_run_menu): Allow "Attach to process" on
   windows, too.
@
text
@d1 13
@


1.479
log
@2012-05-25  Roland Schwingel  <roland.schwingel@@onevision.com>

	* generic/gdbtk-bp.c (gdb_set_bp): Add new NULL param
	to call to create_breakpoint() due to changes in gdb.
	* generic/gdbtk-cmds.c (gdb_listfuncs): Iterator param
	in call to ALL_BLOCK_SYMBOLS() now is a pointer to
	struct block_iterator instead of struct dict_iterator.
	* generic/gdbtk-stack.c (gdb_block_vars,gdb_get_blocks)
	(gdb_get_vars_command): Likewise.
	* generic/gdbtk-hooks.c (gdbtk_annotate_signal): Change
	function calls: target_signal_to_name -> gdb_signal_to_name
	target_signal_to_string -> gdb_signal_to_string due to
	recent changes in gdb.
@
text
@d1 16
@


1.478
log
@2012-05-25  Roland Schwingel  <roland.schwingel@@onevision.com>

   * library/locals.tcl: Updated copyright.
   (reconfig): New method for getting prefs updates.
   * library/prefs.tcl: Updated copyright.
   (pref_read): Moved comment. Take color for changed
   fields from gdb/src/PC_TAG prefs value.
   (pref_set_defaults): Change default of
   PC_TAG color to a somewhat darker green.
   (pref_set_colors): Call pref_load_default in central place.
   (pref_set_option_db): Remove hard wired old color for
   changed values.
   * library/regwin.itb: Update copyright.
   (reconfig): Update highlight color of register table.
   * library/srcpref.itb: Update copyright.
   (_build_win): Change text of PC color chooser.
   (_apply): Update global changed fields color from PC_TAG color.
   * library/vartree.itb (update_var): use changed field color from
   global colors list.
   (_init_data): Remove local copy of changed vars color.
@
text
@d3 14
@


1.477
log
@2012-05-25  Roland Schwingel  <roland.schwingel@@onevision.com>

   * generic/gdbtk-stack.c: Updated copyright informations.
   include "stack.h" and "solib.h".
   (gdb_stack): Some reformatting.
   (get_frame_name): Updated usage of gdb api for
   backtrace generation. Some reformatting. Removed
   dead code. Also handle frame type ARCH_FRAME now.
   * library/stackwin.it[bh]: Remove dead instance
   variable maxwidth. Updated copyright informations.
@
text
@d3 21
@


1.476
log
@	From Patrick Monnerat  <pm@@datasphere.ch>:
	* generic/gdbtk-hooks.c (gdbtk_annotate_signal): Avoid
	dereferencing a null (i.e.: dead) process/thread.
@
text
@d1 11
@


1.475
log
@2012-04-19  Roland Schwingel  <roland.schwingel@@onevision.com>

   * generic/gdbtk-bp.c: Updated copyright.
   (gdb_find_bp_at_line): Don't access location struct
   of breakpoint if it is NULL.
@
text
@d1 6
@


1.474
log
@	* generic/gdbtk-register.c (get_register_types): Use
	host_address_to_string function to avoid use of "%lx" and
	typecasts.
@
text
@d1 6
@


1.473
log
@	* generic/gdbtk.h (close_bfds): Fix prototype.
@
text
@d1 6
@


1.472
log
@	* library/globalpref.itb: Updated Copyright to 1997-2012 Red Hat, Inc.
	(_build_win): Remove unneeded debug call. Fix packing of
	OK/Apply/Cancel buttons for newer tk versions. Small reformatting.
@
text
@d1 4
@


1.471
log
@	* generic/gdbtk-register.c: Updated Copyright year to 2001-2012.
	(get_register_types): Cast result of TYPE_FIELD_TYPE to size_t
	instead of long.
	(gdb_regformat): on windows 64bit use strtoll instead of strtol.
	* generic/gdbtk-stack.c: Updated Copyright year to 2001-2012.
	(gdb_get_vars_command): Don't cast clientData to long. Here
	checking of non NULL clientData is enough.
@
text
@d3 6
@


1.470
log
@	* generic/gdbtk-cmds.c: Updated Copyright year to 1994-2012.
	Remove unneeded include.
@
text
@d3 10
@


1.469
log
@	* generic/gdbtk.c: Updated Copyright year to 1994-2012.
	(gdbtk_init): Move call to ide_create_shell_execute_command
	to generic windows section.
@
text
@d3 5
@


1.468
log
@corrected indent of changelog. sorry.
@
text
@d1 6
@


1.467
log
@   * generic/gdbtk.c (gdbtk_init,tk_command): Replace deprecated access
   to tcl interpreter result string with Tcl_GetStringResult().
   * generic/gdbtk-hooks.c (gdbtk_read,gdbtk_readline,gdbtk_load_hash)
   (gdbtk_query): Likewise.
   (gdbtk_read): Simplified error handling in case "gdbtk_console_read"
   fails. Some reformatting.
@
text
@d5 2
a6 2
   * generic/gdbtk-hooks.c (gdbtk_read,gdbtk_readline,gdbtk_load_hash)
   (gdbtk_query): Likewise. 
d8 1
a8 1
   fails. Some reformatting.
@


1.466
log
@   * generic/gdbtk-bp.c (gdb_set_bp): Adjust parameters
   of create_breakpoint() to match recent change.
@
text
@d1 9
@


1.465
log
@	* generic/gdbtk-interp.c (_initialize_gdbtk_interp): Add
	missing prototype to appease -Wmissing-prototypes.
@
text
@d1 5
@


1.464
log
@	* generic/gdbtk-cmds.h (pc_function_name): Make return type
	const.
	* generic/gdbtk-bp.c (gdb_get_breakpoint_info)
	(gdb_get_tracepoint_info): Make char * variables const to match
	recent GDB API changes.
	* generic/gdbtk-stack.c (get_frame_name): Likewise.
	* generic/gdbtk-cmds.c (gdb_get_function_command, gdb_listfuncs)
	(gdb_loc, perror_with_name_wrapper): Likewise.
	(pc_function_name): Likewise, plus change return type to be const.
@
text
@d1 5
@


1.463
log
@	From Jeffrey Armstrong  <jeffrey.armstrong@@approximatrix.com>:
	* library/srctextwin.itb (lookup_line): Quote the filename
	to gdb_set_bp.
@
text
@d1 12
@


1.462
log
@	* generic/gdbtk-cmds.c (gdb_listfiles): Update API changes
	for map_partial_symbol_filenames.
	(gdb_get_line_command): Update API changes for decode_line_1 in gdb.
	(gdb_get_file_command): Likewise.
	(gdb_get_function_command): Likewise.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Likewise.
	* generic/gdbtk-bp.c (tracepoint_exists): Likewise.
	(gdb_find_bp_at_line, gdb_get_breakpoint_info): Update breakpoint
	API changes in gdb.
@
text
@d1 1
a1 1
2011-12-17  Keith Seitz  <keiths@@redhat.com>
d3 3
a5 92
	* generic/gdbtk-cmds.c (gdb_listfiles): Update API changes
	for map_partial_symbol_filenames.
	(gdb_get_line_command): Update API changes for decode_line_1 in gdb.
	(gdb_get_file_command): Likewise.
	(gdb_get_function_command): Likewise.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Likewise.
	* generic/gdbtk-bp.c (tracepoint_exists): Likewise.
	(gdb_find_bp_at_line, gdb_get_breakpoint_info): Update breakpoint
	API changes in gdb.

2011-11-02  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-interp.c (struct gdbtk_interp_data)
	<uiout>: New member.
	(gdbtk_data): Remove global.
	(gdbtk_interpreter_init): Update with GDB API changes.
	Allocate private intepreter data.
	(gdbtk_interpreter_ui_out): New function.
	(_initialize_gdbtk_interp): Add gdbtk_interpreter_ui_out to
	PROCS.
	Remove gdbtk_data and related allocation/initialization.

2011-09-11  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_prompt_command): get_prompt now
	takes no arguments.

2011-08-02  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdb_set_bp): Pass a valid breakpoint_ops
	to create_breakpoint.

2011-08-01  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (BREAKPOINT_IS_WATCHPOINT): Remove.
	(gdb_get_breakpoint_info): Update with recent GDB API changes.
	(gdb_actions_command): Likewise.
	(gdb_get_tracepoint_info): Likewise.
	(breakpoint_notify): Use get_breakpoint.

	* generic/gdbtk-cmds.c (gdb_prompt_command): Update with recent
	GDB API changes.

2011-05-12  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_create_breakpoint): Change
	parameter from `int' to `struct breakpoint *'.
	(gdbtk_delete_breakpoint): Likewise.
	(gdbtk_modify_breakpoint): Likewise.
	* generic/gdbtk-bp.c (ALL_BREAKPOINTS): Define.
	(breakpoint_list): Remove.
	(breakpoint_list_size): Remove.
	(Gdbtk_Breakpoint_Init): Remove initialization of breakpoint_list.
	(gdb_find_bp_at_addr): Rewrite using ALL_BREAKPOINTS.
	(gdb_find_bp_at_line): Likewise.
	(gdb_get_breakpoint_info): Likewise.
	(gdb_get_breakpoint_list): Likewise.
	(gdbtk_create_breakpoint): Change parameter from `int' to
	`struct breakpoint *' and update function.
	(gdbtk_delete_breakpoint): Likewise.
	(gdbtk_modify_breakpoint): Likewise.	
	(breakpoint_notify): Rewrite using ALL_BREAKPOINTS.

2011-04-11  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (tracepoint_exists): Remove recently
	removed "not_found_ptr" argument from call to decode_line_1.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Likewise.
	* generic/gdbtk-cmds.c (gdb_get_line_command): Likewise.
	(gdb_get_file_command): Likewise.
	(gdb_get_function_command): Likewise.

	From Kevin Buettner  <kevinb@@redhat.com>
	* generic/gdbtk-register.c (): Delete declaration of `buffer'.
	Use `valaddr' in its place.

2011-04-08  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (tracepoint_exists): Update for
	decode_line_1 API change.
	* generic/gdbtk-cmds.c (gdb_eval): Use comman_val_print
	instead of val_print.
	(gdb_get_line_command): Update for decode_line_1 API
	changes.
	(gdb_get_file_command): Likewise.
	(gdb_get_function_command): Likewise.
	* generic/gdbtk-register.c (get_register_types): Use
	get_frame_register_value instead of frame_register.
	(get_register): Pass valid VALUE to val_print.
	Consolidate calls to get_current_gdbarch.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Update
	for decode_line_1 API change.
@


1.461
log
@	* generic/gdbtk-interp.c (struct gdbtk_interp_data)
	<uiout>: New member.
	(gdbtk_data): Remove global.
	(gdbtk_interpreter_init): Update with GDB API changes.
	Allocate private intepreter data.
	(gdbtk_interpreter_ui_out): New function.
	(_initialize_gdbtk_interp): Add gdbtk_interpreter_ui_out to
	PROCS.
	Remove gdbtk_data and related allocation/initialization.
@
text
@d1 12
@


1.460
log
@	* generic/gdbtk-cmds.c (gdb_prompt_command): get_prompt now
	takes no arguments.
@
text
@d1 12
@


1.459
log
@	* generic/gdbtk-bp.c (gdb_set_bp): Pass a valid breakpoint_ops
	to create_breakpoint.
@
text
@d1 5
@


1.458
log
@	* generic/gdbtk-bp.c (BREAKPOINT_IS_WATCHPOINT): Remove.
	(gdb_get_breakpoint_info): Update with recent GDB API changes.
	(gdb_actions_command): Likewise.
	(gdb_get_tracepoint_info): Likewise.
	(breakpoint_notify): Use get_breakpoint.

	* generic/gdbtk-cmds.c (gdb_prompt_command): Update with recent
	GDB API changes.
@
text
@d1 5
@


1.457
log
@	* generic/gdbtk-hooks.c (gdbtk_create_breakpoint): Change
	parameter from `int' to `struct breakpoint *'.
	(gdbtk_delete_breakpoint): Likewise.
	(gdbtk_modify_breakpoint): Likewise.
	* generic/gdbtk-bp.c (ALL_BREAKPOINTS): Define.
	(breakpoint_list): Remove.
	(breakpoint_list_size): Remove.
	(Gdbtk_Breakpoint_Init): Remove initialization of breakpoint_list.
	(gdb_find_bp_at_addr): Rewrite using ALL_BREAKPOINTS.
	(gdb_find_bp_at_line): Likewise.
	(gdb_get_breakpoint_info): Likewise.
	(gdb_get_breakpoint_list): Likewise.
	(gdbtk_create_breakpoint): Change parameter from `int' to
	`struct breakpoint *' and update function.
	(gdbtk_delete_breakpoint): Likewise.
	(gdbtk_modify_breakpoint): Likewise.
	(breakpoint_notify): Rewrite using ALL_BREAKPOINTS.
@
text
@d1 11
@


1.456
log
@	* generic/gdbtk-bp.c (tracepoint_exists): Remove recently
	removed "not_found_ptr" argument from call to decode_line_1.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Likewise.
	* generic/gdbtk-cmds.c (gdb_get_line_command): Likewise.
	(gdb_get_file_command): Likewise.
	(gdb_get_function_command): Likewise.

	From Kevin Buettner  <kevinb@@redhat.com>
	* generic/gdbtk-register.c (): Delete declaration of `buffer'.
	Use `valaddr' in its place.
@
text
@d1 20
@


1.455
log
@	* generic/gdbtk-bp.c (tracepoint_exists): Update for
	decode_line_1 API change.
	* generic/gdbtk-cmds.c (gdb_eval): Use comman_val_print
	instead of val_print.
	(gdb_get_line_command): Update for decode_line_1 API
	changes.
	(gdb_get_file_command): Likewise.
	(gdb_get_function_command): Likewise.
	* generic/gdbtk-register.c (get_register_types): Use
	get_frame_register_value instead of frame_register.
	(get_register): Pass valid VALUE to val_print.
	Consolidate calls to get_current_gdbarch.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Update
	for decode_line_1 API change.
@
text
@d1 13
@


1.454
log
@remove personal email address
@
text
@d1 1
a1 1
2010-12-01  Keith Seitz  <keiths@@redhat.com>
d3 14
a16 2
	* generic/gdbtk-hooks.c (gdbtk_annotate_signal): Update to reflect
	recnet thread_info changes.
a17 82
2010-11-13  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdb_set_bp): Update for recent
	create_breakpoint API update.

2010-07-04  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdb_set_bp): Update arguments for API
	change in create_breakpoint.

2010-06-18  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* generic/gdbtk-cmds.c: Add cygwin macros to allow compilation 
	with old or recent cygwin version.
	(gdb_path_conv): Use cygwin_conv_path function.
	(gdb_eval): Adapt to new field in val_print.
	* generic/gdbtk-register.c (get_register): Likewise.
	* generic/gdbtk-wrapper.c (wrap_val_print): Likewise.
	* generic/gdbtk.c (_initialize_gdbtk): Use cygwin_attach_handle_to_fd
	call to allow compilation with old and new cygwin version.

2010-04-29  Keith Seitz  <keiths@@redhat.com>

	insight/347
	* generic/gdbtk-varobj.c (variable_value): Use TRY_CATCH
	when calling varobj_set_value.
	* library/vartree.itb (changeValue): Make note of new
	assumption that input is decimal (unless prefixed to change
	the input radix).

2010-04-02  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Use
	breakpoint_commands to access breakpoint commands.
	(gdb_get_tracepoint_info): Likewise for tracepoint actions.

2010-03-30  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Breakpoint
	commands are now reference counted. Adjust data pointers.
	(gdb_get_tracepoint_info): Likewise.
	(gdb_actions_command): Don't free previous actions. If the
	commands aren't valid, we would prefer to keep the old ones
	any way. break_point_set_commands will also clobber any
	previous results anyway.

2010-03-24  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdb_set_bp): set_breakpoint is no more.
	Use create_breakpoint.
	(gdbtk_obj_array, gdbtk_obj_array_ptr, gdbtk_obj_array_cnt):
	New globals.
	(gdbtk_read_next_line): New function.
	(gdb_actions_command): Rewrite using new command_line
	infrastructure.
	(gdb_get_tracepoint_info): Actions are now stored in the breakpoint
	struct's commands element.

2010-03-12  Tom Tromey  <tromey@@redhat.com>

	* generic/gdbtk-cmds.c: Include psymtab.h, not psympriv.h.
	(struct listfiles_info): New.
	(do_listfiles): New function.
	(gdb_listfiles): Use it.

2010-03-12  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* generic/gdbtk-cmds.c: Include psympriv.h.
	
2010-01-25  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_set_inferior_args): set_inferior_args
	now works as expected. Do not strdup/free the argument string.

2010-01-15  Stan Shebs  <stan@@codesourcery.com>

	* generic/gdbtk-bp.c (gdb_trace_status): Use current_trace_status.

2010-01-04  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdbtk_load_asm): print_address_symbolic
	requires the architecture, too.
@


1.453
log
@	* generic/gdbtk-hooks.c (gdbtk_annotate_signal): Update to reflect
	recnet thread_info changes.
@
text
@d1 1
a1 1
2010-12-01  Keith Seitz  <keiths@@valrhona.uglyboxes.com>
d6 1
a6 1
2010-11-13  Keith Seitz  <keiths@@valrhona.uglyboxes.com>
@


1.452
log
@	* generic/gdbtk-bp.c (gdb_set_bp): Update for recent
	create_breakpoint API update.
@
text
@d1 5
@


1.451
log
@	* generic/gdbtk-bp.c (gdb_set_bp): Update arguments for API
	change in create_breakpoint.
@
text
@d1 5
@


1.450
log
@	* generic/gdbtk-cmds.c: Add cygwin macros to allow compilation
	with old or recent cygwin version.
	(gdb_path_conv): Use cygwin_conv_path function.
	(gdb_eval): Adapt to new field in val_print.
	* generic/gdbtk-register.c (get_register): Likewise.
	* generic/gdbtk-wrapper.c (wrap_val_print): Likewise.
	* generic/gdbtk.c (_initialize_gdbtk): Use cygwin_attach_handle_to_fd
	call to allow compilation with old and new cygwin version.
@
text
@d1 5
@


1.449
log
@  insight/347
  * generic/gdbtk-varobj.c (variable_value): Use TRY_CATCH
  when calling varobj_set_value.
  * library/vartree.itb (changeValue): Make note of new
  assumption that input is decimal (unless prefixed to change
  the input radix).
@
text
@d1 11
@


1.448
log
@  * generic/gdbtk-bp.c (gdb_get_breakpoint_info): Use
  breakpoint_commands to access breakpoint commands.
  (gdb_get_tracepoint_info): Likewise for tracepoint actions.
@
text
@d1 9
@


1.447
log
@  * generic/gdbtk-bp.c (gdb_get_breakpoint_info): Breakpoint
  commands are now reference counted. Adjust data pointers.
  (gdb_get_tracepoint_info): Likewise.
  (gdb_actions_command): Don't free previous actions. If the
  commands aren't valid, we would prefer to keep the old ones
  any way. break_point_set_commands will also clobber any
  previous results anyway.
@
text
@d1 6
@


1.446
log
@  * generic/gdbtk-bp.c (gdb_set_bp): set_breakpoint is no more.
  Use create_breakpoint.
  (gdbtk_obj_array, gdbtk_obj_array_ptr, gdbtk_obj_array_cnt):
  New globals.
  (gdbtk_read_next_line): New function.
  (gdb_actions_command): Rewrite using new command_line
  infrastructure.
  (gdb_get_tracepoint_info): Actions are now stored in the breakpoint
  struct's commands element.
@
text
@d1 10
@


1.445
log
@	* generic/gdbtk-cmds.c: Include psymtab.h, not psympriv.h.
	(struct listfiles_info): New.
	(do_listfiles): New function.
	(gdb_listfiles): Use it.
@
text
@d1 12
@


1.444
log
@	* generic/gdbtk-cmds.c: Include psympriv.h.
@
text
@d1 7
@


1.443
log
@	* generic/gdbtk-cmds.c (gdb_set_inferior_args): set_inferior_args
	now works as expected. Do not strdup/free the argument string.
@
text
@d1 4
@


1.442
log
@	Add trace file support.
	* tracepoint.h (enum trace_stop_reason): New enum.
	(struct trace_status): New struct.
	(parse_trace_status): Declare.
	(struct uploaded_tp): Move here from remote.c,
	add fields for actions.
	(struct uploaded_tsv): New struct.
	* tracepoint.c (tfile_ops): New target vector.
	(trace_fd): New global.
	(tfile_open): New function.
	(tfile_close): New function.
	(tfile_files_info): New function.
	(tfile_get_trace_status): New function.
	(tfile_get_traceframe_address): New function.
	(tfile_trace_find): New function.
	(tfile_fetch_registers): New function.
	(tfile_xfer_partial): New function.
	(tfile_get_trace_state_variable_value): New function.
	(init_tfile_ops): New function.
	(_initialize_tracepoint): Call it, add tfile target.
	(trace_status): New global.
	(current_trace_status): New function.
	(trace_running_p): Remove, change all users to get from
	current_trace_status()->running.
	(get_trace_status): Remove.
	(trace_status_command): Call target_get_trace_status directly,
	report more detail including tracing stop reasons.
	(trace_find_command): Always allow tfind on a file.
	(trace_find_pc_command): Ditto.
	(trace_find_tracepoint_command): Ditto.
	(trace_find_line_command): Ditto.
	(trace_find_range_command): Ditto.
	(trace_find_outside_command): Ditto.
	(trace_frames_offset, cur_offset): Declare as off_t.
	(trace_regblock_size): Rename from reg_size, update users.
	(parse_trace_status): New function.
	(tfile_interp_line): New function.
	(disconnect_or_stop_tracing): Ensure current trace
	status before asking what to do.
	(stop_reason_names): New global.
	(trace_save_command): New command.
	(get_uploaded_tp): Move here from remote.c.
	(find_matching_tracepoint): Ditto.
	(merge_uploaded_tracepoints): New function.
	(parse_trace_status): Use stop_reason_names.
	(_initialize_tracepoint): Define tsave command.
	* target.h (target_ops): New fields to_save_trace_data,
	to_upload_tracepoints, to_upload_trace_state_variables,
	to_get_raw_trace_data, change to_get_trace_status
	to take a pointer to a status struct.
	(target_save_trace_data): New macro.
	(target_upload_tracepoints): New macro.
	(target_upload_trace_state_variables): New macro.
	(target_get_raw_trace_data): New macro.
	* target.c (update_current_target): Add new methods, change
	signature of to_get_trace_status.
	* remote.c (hex2bin): Make globally visible.
	(bin2hex): Ditto.
	(remote_download_trace_state_variable): Download name also.
	(remote_get_trace_status): Update parameter, use
	parse_trace_status.
	(remote_save_trace_data): New function.
	(remote_upload_tracepoints): New function.
	(remote_upload_trace_state_variables): New function.
	(remote_get_raw_trace_data): New function.
	(remote_start_remote): Use them.
	(_initialize_remote_ops): Add operations.
	* ax-gdb.c: Include breakpoint.h.
	* breakpoint.c (create_tracepoint_from_upload): Use
	break_command_really, return tracepoint, warn about unimplemented
	parts.
	* NEWS: Mention trace file addition.

	* gdb.texinfo (Trace Files): New section.
	(Tracepoint Packets): Document QTSave and qTBuffer.
	(Trace File Format): New appendix.

	* generic/gdbtk-bp.c (gdb_trace_status): Use current_trace_status.

	* gdb.trace/tfile.c: New file.
	* gdb.trace/tfile.exp: New file.
@
text
@d1 5
@


1.441
log
@	* generic/gdbtk-cmds.c (gdbtk_load_asm): print_address_symbolic
	requires the architecture, too.
@
text
@d1 4
@


1.440
log
@gdb/ChangeLog:

2009-12-02  Paul Pluzhnikov  <ppluzhnikov@@google.com>

	* ada-lang.c (ada_value_assign): Use observer_notify_memory_changed.
	* valops.c (value_assign): Likewise.
	* defs.h (deprecated_memory_changed_hook): Remove.
	* top.c (deprecated_memory_changed_hook): Likewise.
	* interps.c (clear_interpreter_hooks): Adjust.

gdb/gdbtk/ChangeLog:

2009-12-02  Paul Pluzhnikov  <ppluzhnikov@@google.com>

	* generic/gdbtk-hooks.c (gdbtk_memory_changed): Adjust.
	(gdbtk_add_hooks): Adjust.

gdb/doc/ChangeLog:

2009-12-02  Paul Pluzhnikov  <ppluzhnikov@@google.com>

	* observer.texi: New memory_changed observer.
@
text
@d1 1
a1 173
2009-12-02  Paul Pluzhnikov  <ppluzhnikov@@google.com>

	* generic/gdbtk-hooks.c (gdbtk_memory_changed): Adjust.
	(gdbtk_add_hooks): Adjust.
	
2009-11-09  Keith Seitz  <keiths@@redhat.com>

	* library/srctextwin.itb (lookup_line): Update parameters
	to gdb_set_bp.
	* generic/gdbtk-bp.c: Remove extern declarations for symbols
	in breakpoint.c.
	(gdb_set_bp_addr): Remove.
	(Gdbtk_Breakpoint_Init): Remove Tcl command "gdb_set_bp_addr".
	(gdb_set_bp): Remove file and line arguments; add "addr" argument.
	Rewrite to use "public" APIs from gdb.

2009-11-09  Keith Seitz  <keiths@@redhat.com>

	* README: Update information about using external
	Tcl, Tk, and Itcl.

2009-11-09  Keith Seitz  <keiths@@redhat.com>

	* Makefile.in: Regenerate with autotools 1.11.
	* aclocal.m4: Regenerate.
	* configure: Regenerate.
	* plugins/Makefile.in: Regenerate.
	* plugins/aclocal.m4: Regenerate.
	* plugins/configure: Regenerate.

2009-10-08  Keith Seitz  <keiths@@redhat.com>

	* library/srctextwin.ith (ExecutableLineLimit): Define.
	* library/srctextwin.itb (insertBreakTag): Search for next
	executable line, just in case they changed.
	When there are no tags on a line, the proper index is
	line.4, not just 4.

2009-10-08  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdbtk_tcl_warning): Add warnings for some
	too frequently occurring DWARF complaints.

	(::tk::MouseWheel): New function based on TIP 171.

2009-09-17  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* generic/gdbtk-varobj.c (variable_children): Initialize new locals
	used in varobj_list_children function call.
	
2009-09-16  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* generic/gdbtk-varobj.c (variable_children): Adapt to
	varobj_list_children function change.
	
2009-07-07  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* generic/gdbtk-bp.c: Include "arch-utils.h".
	(set_raw_breakpoint): Update external definition.
	(gdb_set_bp): Adapt to set_raw_breakpoint change.
	(gdb_set_bp_addr): Likewise.

	* generic/gdbtk-cmds.c: Include "arch-utils.h.
	(gdbtk_load_asm): Adapt to paddress and gdb_print_insn changes.
	(hex2bin): Replace current_gdbarch by get_current_arch call.
	(gdb_update_mem): Adapt to builtin_type changes.
	(gdb_CA_to_TAS): Use paddress to replace removed function paddr_nz.

	* generic/gdbtk-register.c: Include "arch-utils.h".
	(get_register_size): Replace current_gdbarch by get_current_arch call.
	(get_register_types): Likewise.
	(get_register): Likewise.
	(get_register_name): Likewise.
	(map_arg_registers): Likewise.
	(register_changed_p): Likewise.
	(setup_architecture_data): Likewise.
	(gdb_regformat): Likewise.
	(gdb_reggrouplist): Likewise.
	(gdb_reggroup): Likewise.

	* generic/gdbtk-stack.c: Inlcude "arch-utils.h".
	(gdb_get_blocks): Use paddress instead of removed paddr_nz function.
	(gdb_selected_block): Likewise.
	(gdb_selected_frame): Likewise.

2009-06-19  Pedro Alves  <pedro@@codesourcery.com>

	* generic/gdbtk-cmds.c (gdb_update_mem): Dispatch
	TARGET_OBJECT_MEMORY reads to the topmost target, not to the
	flattened current_target.

2009-05-28  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* Adapt to VALUE_ADDRESS removal.
	generic/gdbtk-cmds.c (gdb_eval): Use value_address function instead of
	VALUE_ADDRESS macro.
	
2009-05-24  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* Adapt to target_wait_hook change.
	* generic/gdbtk-hooks.c (gdbtk_wait): Add `options' argument.

2009-05-06  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* Adapt to read_pc function removal.
	* generic/gdbtk-cmds.c: Add "cache.h" include.
	(gdb_loc): Use regcache_read_pc instead of read_pc.

2009-04-23  Keith Seitz  <keiths@@redhat.com>

	* library/vartree.itb (constructor): Remove the borderwidth 0
	argument.

2009-04-23  Keith Seitz  <keiths@@redhat.com>

	* library/mempref.itb (build_win): Replace libgui's "Labelledframe"
	with the iwidget's LabeledFrame. Replaced all occurrances.
	* libarary/memwin.itb (create_prefs): Use ManagedWin::open_dlg
	instead of ManagedWin::open.

2009-04-23  Keith Seitz  <keiths@@redhat.com>

	* library/targetselection.itb (init_target_db): Add comment
	about "arguments" vs "options" on native debuggers.
	(build_win): If the target is "default", choose "Exec" for native
	debuggers. For cross debuggers, let the user choose.
	(write_saved): For exec targets, save target options to gdb via
	gdb_set_inferior_args.
	(config_dialog): For "exec" targets, save gdb's stored arguments
	into the options preference.

2009-04-07  Pierre Muller  <muller.u-strasbg.fr>

	ARI fix: Use "gdb_stat.h" header instead of <sys/stat.h>.
	* generic/gdbtk-cmds.c: Apply change. 
	* generic/gdbtk.c: Ditto.

2009-04-07  Pierre Muller  <muller.u-strasbg.fr>

	ARI fixes: xvasprintf and strdup rules.
	* generic/gdbtk-cmds.c (gdbtk_set_result): Replace xvasprintf by
	xstrvprintf.
	* generic/gdbtk-hooks.c (gdbtk_warning): Ditto.
	(gdbtk_readline_begin, gdbtk_query): Ditto.
	* generic/gdbtk.c (TclDebug): Ditto.
	* generic/gdbtk-varobj.c (variable_create): Replace strdup by xstrdup.

2009-03-27  Stan Shebs  <stan@@codesourcery.com>

	* generic/gdbtk-bp.c (gdb_actions_command): Update to handle
	tracepoints as breakpoints.
	(gdb_get_tracepoint_info): Ditto, plus use get_tracepoint and
	breakpoint locations.
	(tracepoint_exists): Ditto, plus use all_tracepoints.

2009-03-25  Pierre Muller  <muller@@ics.u-strasbg.fr>

	ARI fix: "xasprintf" rule.
	* generic/gdbtk-bp.c (gdb_set_bp): Replace xasprintf by xstrprintf.
	(breakpoint_notify, tracepoint_notify):Ditto.
	* generic/gdbtk-cmds.c (gdbtk_load_source, gdbtk_load_asm):Ditto.
	* generic/gdbtk-hooks.c (gdbtk_ignorable_warning): Ditto.
	(gdbtk_set_hook, gdbtk_load_hash): Ditto.
	(gdbtk_selected_frame_changed, gdbtk_annotate_signal): Ditto.
	* generic/gdbtk-register.c (get_register_types):Ditto.
	* generic/gdbtk-stack.c (gdb_get_blocks): Ditto.
	(gdb_selected_block, gdb_selected_frame): Ditto.
	* generic/gdbtk.c (gdbtk_init, view_command): Ditto.

2009-03-02  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-stack.c (gdb_get_vars_command): Revise cast of
	`clientData' to avoid build error on 64-bit hosts.
d3 2
@


1.439
log
@	* library/srctextwin.itb (lookup_line): Update parameters
	to gdb_set_bp.
	* generic/gdbtk-bp.c: Remove extern declarations for symbols
	in breakpoint.c.
	(gdb_set_bp_addr): Remove.
	(Gdbtk_Breakpoint_Init): Remove Tcl command "gdb_set_bp_addr".
	(gdb_set_bp): Remove file and line arguments; add "addr" argument.
	Rewrite to use "public" APIs from gdb.
@
text
@d1 5
@


1.438
log
@	* README: Update information about using external
	Tcl, Tk, and Itcl.
@
text
@d3 11
@


1.437
log
@	* aclocal.m4: Regenerate with autotools 1.11.
	* configure: Regenerate.
	* plugins/Makefile.in: Regenerate.
	* plugins/aclocal.m4: Regenerate.
	* plugins/configure: Regenerate.
@
text
@d3 5
@


1.436
log
@	* library/srctextwin.ith (ExecutableLineLimit): Define.
	* library/srctextwin.itb (insertBreakTag): Search for next
	executable line, just in case they changed.
	When there are no tags on a line, the proper index is
	line.4, not just 4.
@
text
@d1 9
@


1.435
log
@	* library/interface.tcl (gdbtk_tcl_warning): Add warnings for some
	too frequently occurring DWARF complaints.

	(::tk::MouseWheel): New function based on TIP 171.
@
text
@d3 8
@


1.434
log
@	* generic/gdbtk-varobj.c (variable_children): Initialize new locals
	used in varobj_list_children function call.
@
text
@d1 7
@


1.433
log
@	* generic/gdbtk-varobj.c (variable_children): Adapt to
	varobj_list_children function change.
@
text
@d1 5
@


1.432
log
@	* generic/gdbtk-bp.c: Include "arch-utils.h".
	(set_raw_breakpoint): Update external definition.
	(gdb_set_bp): Adapt to set_raw_breakpoint change.
	(gdb_set_bp_addr): Likewise.
	* generic/gdbtk-cmds.c: Include "arch-utils.h.
	(gdbtk_load_asm): Adapt to paddress and gdb_print_insn changes.
	(hex2bin): Replace current_gdbarch by get_current_arch call.
	(gdb_update_mem): Adapt to builtin_type changes.
	(gdb_CA_to_TAS): Use paddress to replace removed function paddr_nz.
	* generic/gdbtk-register.c: Include "arch-utils.h".
	(get_register_size): Replace current_gdbarch by get_current_arch call.
	(get_register_types): Likewise.
	(get_register): Likewise.
	(get_register_name): Likewise.
	(map_arg_registers): Likewise.
	(register_changed_p): Likewise.
	(setup_architecture_data): Likewise.
	(gdb_regformat): Likewise.
	(gdb_reggrouplist): Likewise.
	(gdb_reggroup): Likewise.
	* generic/gdbtk-stack.c: Inlcude "arch-utils.h".
	(gdb_get_blocks): Use paddress instead of removed paddr_nz function.
	(gdb_selected_block): Likewise.
	(gdb_selected_frame): Likewise.
@
text
@d1 5
@


1.431
log
@Rotate the ChangeLogs!
@
text
@d1 30
@


1.430
log
@	* generic/gdbtk-cmds.c (gdb_update_mem): Dispatch
	TARGET_OBJECT_MEMORY reads to the topmost target, not to the
	flattened current_target.
@
text
@a89 227
2008-12-16  Denis Pilat  <denis.pilat@@st.com> 
	on behalf of Nunzio Raciti  <nunzio.raciti@@st.com>

	* library/srctextwin.itb (_clear_cache): Take care of $p variable that
	could contains ":" for source pane on windows hosts.
	* library/srcwin.itb (choose_and_update): Avoid updating the "source"
	window if target executable name is empty.

2008-12-15  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-cmds.c (valprint.h): Include.
	(gdb_eval): Fetch print options via get_formatted_print_options.
	Update call to val_print.
	(gdb_update_mem): Likewise, but for print_scalar_formatted.
	* generic/gdbtk-register.c (valprint.h): Include.
	(get_register): Use get_formatted_print_options.  Update calls
	to val_print.
	* generic/gdbtk-wrapper.c (valprint.h): Include.
	(wrap_val_print): Use get_formatted_print_options.  Delete
	variables deref_ref and pretty; assign to equivalent fields
	in the value_print_options struct instead.  Update call to
	val_print.

2008-10-27  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-stack.c (get_gdb_vars_command): clientData is an
	int, not a pointer to int.

2008-09-22  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_clear_file): The global "attach_flag"
	is now per-inferior.

2008-09-19  Denis Pilat  <denis.pilat@@st.com>

	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Manage the case of NULL
	location to handle pending breakpoint in a better way.
	(gdb_find_bp_at_addr): Likewise.

2008-09-18  Keith Seitz  <keiths@@redhat.com>

	From Pedro Alves  <pedro@@codesourcery.com>:
	* generic/gdbtk-cmds.c (gdb_cmd, gdb_immediate_command): Adjust to
	new bpstat_do_actions inferface.
	* generic/gdbtk-hooks.c: Include gdbthread.h.
	(gdbtk_annotate_signal): Get the stop_signal from the current
	thread.

2008-09-02  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_listfuncs): Use SYMBOL_PRINT_NAME
	instead of DEPRECATED_SYMBOL_NAME.
	* generic/gdbtk-stack.c (gdb_block_vars): Likewise.
	(gdb_get_vars_command): Likewise.
	* generic/gdbtk.h (GDBTK_SYMBOL_SOURCE_NAME): Likewise.

2008-08-02  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c: Don't include itcl.h.
	* generic/gdbtk-hooks.c: Likewise.
	* generic/gdbtk.c: Include tcl.h and tk.h instead of itcl.h
	and itk.h.
	(gdbtk_init): Rewrite to accommodate using a system-provided
	Tcl, Tk, Itcl, Itk.
	(gdbtk_source_start_file) [!_WIN32]: Don't call error() when
	we fail to source the start file. Just dump the message to stderr.
	Throw an exception indicating the failure.
	* library/ehandler.itb (GDBEventHander::dispatch): "itcl_info" is
	deprecated: use "itcl::find objects" instead.
	* library/managedwin.itb (window_instance): Ditto.
	(restart): Ditto.
	(shutdown): Ditto.
	(_open): Ditto.
	(find): Ditto.
	* library/globalpref.itb (_build_win): Don't pass config arguments
	for libgui widgets to the constructor. Configure the widget after
	creation.
	* library/srcpref.itb (_build_win): Ditto.
	* library/main.tcl: Update Tcl, Tk, Itcl, Itk, and Iwidgets (just
	added to this loop) version requirements.
	No need to initialize Iwidgets separately.
	* plugins/Make-rules (TCLHDIR): Renamed to TCL_INCLUDES. Change
	all references.
	(TCL_BUILD_LIB_SPEC): Renamed to TCL_LIBRARY. Change all references.
	* plugins/acinclude.m4: Include the standard tcl.m4 instead
	of the sourceware-derived one.
	* plugins/configure.ac: Use Tcl's standard SC_* macros instead of
	the sourceware-derived CYG_AC_* macros.
	Add logic to deal with using a system-supplied Tcl/Tk.
	* plugins/configure: Regenerated.
	* plugins/Makefile.in: Regenerated.
	
2008-07-25  Tom Tromey  <tromey@@redhat.com>

	* generic/gdbtk-hooks.c: Include observer.h, not gdb-events.h.
	(gdbtk_add_hooks): Use observers, not events.
	(gdbtk_architecture_changed): Add argument, for observer.
	* generic/gdbtk-bp.c: Include observer.h.
	(gdb_set_bp): Notify observer.
	(gdb_set_bp_addr): Likewise.

2008-07-14  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-stack.c (gdb_block_args): Remove deprecated values
	LOC_LOCAL_ARG, LOC_COMPUTED_ARG, LOC_REGPARM, LOC_BASEARG_ARG, and
	LOC_BASEARG.
	(gdb_get_blocks): Likewise.
	(gdb_get_vars_command): Likewise.
	Fix type-punned pointer error introduced on 03-07.

	* generic/gdbtk-cmds.c (gdbtk_load_asm): Use paddress instead
	of deprecated_print_address_numeric.
	(gdb_stop): Update use of target_stop.

	* generic/gdbtk.h (gdbtk_get_ptid): Declare new function.
	* generic/gdbtk-hooks.c (gdbtk_wait): Save inferior's ptid.
	(gdbtk_get_ptid): Define new function.
	* generic/gdbtk-varobj.c (variable_update): Update for recent
	varobj_update API change.
	* generic/gdbtk-wrapper.h (GDB_varobj_update): Likewise.
	* generic/gdbtk-wrapper.c (GDB_varobj_update): Likewise.
	(wrap_varobj_update): Likewise.

	* library/targetselection.itb (init_target_db): Initialize
	preferences here instead of ...
	(_init): ... here.
	(_init_prefs): Define gdb/load/default-portname, too.

2008-05-12  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* Update uses of val_print functions with additional language argument.
	generic/gdbtk-cmds.c: Add "language.h" include.
	(gdb_eval): Add current_language as new arg of val_print.
	generic/gdbtk-register.c: Add "language.h" include.
	(get_register): Add current_language as new arg of val_print.
	generic/gdbtk-wrapper.c: Add "language.h" include.
	(wrap_val_print): Add current_language as new arg of val_print.

2008-04-21  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (symtab_to_filename): Call gdb's
	open_source_file instead of find_and_open_source.

2008-03-28  Maciej W. Rozycki  <macro@@mips.com>

	* README: Fix a typo.

2008-03-18  Maciej W. Rozycki  <macro@@mips.com>

	* generic/gdbtk-interp.c (gdbtk_interpreter_init): New parameter
	top_level.

2008-03-07  Keith Seitz  <kseitz@@sourceware.org>

	* generic/gdbtk-register.c (map_arg): New data type
	for passing arguments to mapping functions.
	(map_func): New definition of mapping function.
	Changed all callers to use these new types.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Change
	cast to int to dereference of int *.
	* generic/gdbtk-wrapper.c: Change all casts to char * for
	results and args to use pointer or integer flavor of
	gdb_wrapper_args.results and .args.
	* generic/gdbtk-wrapper.h: struct gdb_wrapper_arguments
	members result and args now return a union of void * and int.

2008-03-03  Keith Seitz  <keiths@@redhat.com>

	From Dave Murphy  <davem@@devkitpro.org>:
	* gdbtk-cmds.c: Guard <sys/ioctl.h> with HAVE_SYS_IOCTL_H.
	* gdbtk-hooks.c: Ditto.
	* gdbtk.c: Ditto.
	* gdbtk-interp.c: Include windows.h under mingw32.
	(gdbtk_start_timer, gdbtk_stop_timer): Remove timer calls under mingw.
	(gdbtk_init): Include windows-specific commands under mingw without
	cygwin path commands.
	* library/download.itb (Download::download_it): Only use ide_cygwin_path
	on cygwin hosts.
	* library/interface.tcl (_open_file): Ditto.
	* library/prefs.tcl (pref_read): Ditto.
	* library/targetselection.itb (TargetSelection::default_port): Default
	to "/dev/com1" under cygwin and "COM1" under mingw.
	(TargetSelection::port_list): Use "/dev/com" under cygwin and
        "COM" under mingw.

2008-02-08  Keith Seitz  <keiths@@redhat.com>

	* library/main.tcl: Add gdbtk_platform definitions.
	* library/attachdlg.itb (list_pids): Use gdbtk_platform
	instead of tcl_platform.
	* library/bpwin.itb (build_win): Likewise.
	(_bp_add): Likewise.
	(_bp_modify): Likewise.
	* library/download.itb (download_it): Likewise.
	* library/globalpref.itb (_build_win): Likewise.
	* library/helpviewer.tcl (open_help): Likewise.
	* library/interface.tcl (gdbtk_tcl_query): Likewise.
	(show_warning): Likewise.
	(open_file): Likewise.
	(run_executable): Likewise.
	* library/managedwin.itb (reveal): Likewise.
	(_create): Likewise.
	* library/prefs.tcl (pref_read): Likewise.
	(pref_set_defaults): Likewise.
	(pref_set_colors): Likewise.
	* library/session.tcl (_exe_name): Likewise.
	* library/srcbar.itcl (_update_file_menu): Likewise.
	(create_run_menu): Likewise.
	* library/srctextwin.itb (_mtime_changed): Likewise.
	(LoadFromCache): Likewise.
	* library/targetselection.itb (default_port): Likewise.
	(build_win): Likewise.

	* library/memwin.itb (build_win): Remove unused tcl_platform
	declaration.
	* library/pluginwin.itcl (enable_ui): Likewise.
	* library/process.itb (build_win): Likewise.
	* library/srcbar.itcl (enable_ui): Likewise.
	* library/srcwin.itb (location): Likewise.
	* library/stackwin.itb (build_win): Likewise.
	* library/tdump.tcl (build_win): Likewise.

2008-02-05  Maciej W. Rozycki  <macro@@mips.com>

	* generic/gdbtk-varobj.c (variable_children): Adjust
	for varobj_list_children change.

@


1.429
log
@	* Adapt to VALUE_ADDRESS removal.
	generic/gdbtk-cmds.c (gdb_eval): Use value_address function instead of
	VALUE_ADDRESS macro.
@
text
@d1 6
@


1.428
log
@	* Adapt to target_wait_hook change.
	* generic/gdbtk-hooks.c (gdbtk_wait): Add `options' argument.
@
text
@d1 6
@


1.427
log
@	* Adapt to read_pc function removal.
	* generic/gdbtk-cmds.c: Add "cache.h" include.
	(gdb_loc): Use regcache_read_pc instead of read_pc.
@
text
@d1 5
@


1.426
log
@	* library/vartree.itb (constructor): Remove the borderwidth 0
	argument.
@
text
@d1 6
@


1.425
log
@	* library/mempref.itb (build_win): Replace libgui's "Labelledframe"
	with the iwidget's LabeledFrame. Replaced all occurrances.
	* libarary/memwin.itb (create_prefs): Use ManagedWin::open_dlg
	instead of ManagedWin::open.
@
text
@d3 5
@


1.424
log
@	* library/targetselection.itb (init_target_db): Add comment
	about "arguments" vs "options" on native debuggers.
	(build_win): If the target is "default", choose "Exec" for native
	debuggers. For cross debuggers, let the user choose.
	(write_saved): For exec targets, save target options to gdb via
	gdb_set_inferior_args.
	(config_dialog): For "exec" targets, save gdb's stored arguments
	into the options preference.
@
text
@d3 7
@


1.423
log
@	ARI fix: Use "gdb_stat.h" header instead of <sys/stat.h>.
	* generic/gdbtk-cmds.c: Apply change.
	* generic/gdbtk.c: Ditto.
@
text
@d1 11
@


1.422
log
@	ARI fixes: xvasprintf and strdup rules.
	* generic/gdbtk-cmds.c (gdbtk_set_result): Replace xvasprintf by
	xstrvprintf.
	* generic/gdbtk-hooks.c (gdbtk_warning): Ditto.
	(gdbtk_readline_begin, gdbtk_query): Ditto.
	* generic/gdbtk.c (TclDebug): Ditto.
	* generic/gdbtk-varobj.c (variable_create): Replace strdup by xstrdup.
@
text
@d3 6
@


1.421
log
@2009-03-30  Stan Shebs  <stan@@codesourcery.com>

	Make tracepoints into a type of breakpoint.
	* breakpoint.h (enum bptype): Add bp_tracepoint.
	(struct breakpoint): Add fields step_count, pass_count, actions.
	(get_tracepoint, get_tracepoint_by_number): Declare.
	(all_tracepoints): Declare.
	* breakpoint.c: Include tracepoint.h, readline.h.
	(ALL_TRACEPOINTS): Move here from tracepoint.c.
	(tracepoint_count): Ditto.
	(should_be_inserted): GDB does not insert tracepoints itself.
	(print_it_typical): Add tracepoint case.
	(bpstat_what): Ditto.
	(print_one_breakpoint_location): Ditto, and add printing for
	pass count, step count, and action list.
	(user_settable_breakpoint): Add tracepoint case.
	(allocate_bp_location): Ditto.
	(set_breakpoint_location_function): Ditto.
	(disable_breakpoints_in_shlibs): Ditto.
	(mention): Ditto.
	(break_command_really): Add argument traceflag, use to choose
	basic breakpoint type.
	(break_command_1): Pass extra argument.
	(set_breakpoint, handle_gnu_v3_exceptions): Ditto.
	(breakpoint_re_set_one): Add tracepoint case.
	(disable_command, enable_command): Ditto.
	(set_tracepoint_count): Move here from tracepoint.c.
	(trace_command): Move here from tracepoint.c and use
	break_command_really.
	(tracepoints_info): Move here from tracepoint.c and call
	breakpoints_info.
	(enable_trace_command): Move here from tracepoint.c and call
	enable_command.
	(disable_trace_command): Move here from tracepoint.c and call
	disable_command.
	(delete_trace_command): Move here from tracepoint.c and call
	delete_breakpoint.
	(trace_pass_command): Move here from tracepoint.c.
	(get_tracepoint_by_number): Ditto.
	(tracepoint_save_command): Ditto.
	(get_tracepoint): New function.
	(all_tracepoints): New function.
	(_initialize_breakpoint): Move tracepoint init from tracepoint.c,
	deprecate "enable trace" and "disable trace" commands.
	* tracepoint.h (struct tracepoint): Remove.
	(tracepoint_chain): Remove decl.
	(deprecated_create_tracepoint_hook): Remove decl.
	(deprecated_delete_tracepoint_hook): Remove decl.
	(deprecated_modify_tracepoint_hook): Remove decl.
	(ALL_TRACEPOINTS, ALL_TRACEPOINTS_SAFE): Remove.
	(free_actions): Update signature.
	(validate_actionline): Update signature.
	(end_actions_pseudocommand): Declare.
	(while_stepping_pseudocommand): Declare.
	* tracepoint.c: Include breakpoint.h.
	(tracepoint_chain, tracepoint_count): Remove.
	(free_actions, make_cleanup_free_actions): Update signature.
	(trace_command, set_raw_tracepoint): Remove.
	(trace_mention): Remove.
	(tracepoints_info): Remove.
	(tracepoint_operation, map_args_over_tracepoints): Remove.
	(get_tracepoint_by_number): Remove.
	(enable_trace_command, disable_trace_command): Remove.
	(delete_trace_command, trace_pass_command): Remove.
	(trace_actions_command, read_actions): Update signature.
	(validate_actionline): Update signature, use bp loc.
	(encode_actions): Ditto.
	(download_tracepoint): New function, body of trace_start_command.
	(trace_start_command): Call it, use all_tracepoints.
	(tracepoint_save_command): Remove.
	(tracepoint_dump_command): Use get_tracepoint.
	(end_actions_pseudocommand): Make globally visible.
	(while_stepping_pseudocommand): Ditto.
	(_initialize_tracepoint): Move command definitions to breakpoint.c.

	doc/
	* gdb.texinfo (Tracepoints): Describe tracepoints as a
	special case of breakpoints.
	(Enable and Disable Tracepoints): Mention deprecation.
	(Listing Tracepoints): Update description and example.

	testsuite/
	* gdb.trace/actions.exp: Update to match new info trace format.
	* gdb.trace/deltrace.exp: Ditto.
	* gdb.trace/infotrace.exp: Ditto.
	* gdb.trace/passcount.exp: Ditto.
	* gdb.trace/save-trace.exp: Ditto.
	* gdb.trace/while-stepping.exp: Ditto.
	* gdb.trace/tracecmd.exp: Ditto, plus don't allow pending option.

	gdbtk/
	* generic/gdbtk-bp.c (gdb_actions_command): Update to handle
	tracepoints as breakpoints.
	(gdb_get_tracepoint_info): Ditto, plus use get_tracepoint and
	breakpoint locations.
	(tracepoint_exists): Ditto, plus use all_tracepoints.
@
text
@d1 10
@


1.420
log
@	ARI fix: "xasprintf" rule.
	* generic/gdbtk-bp.c (gdb_set_bp): Replace xasprintf by xstrprintf.
	(breakpoint_notify, tracepoint_notify):Ditto.
	* generic/gdbtk-cmds.c (gdbtk_load_source, gdbtk_load_asm):Ditto.
	* generic/gdbtk-hooks.c (gdbtk_ignorable_warning): Ditto.
	(gdbtk_set_hook, gdbtk_load_hash): Ditto.
	(gdbtk_selected_frame_changed, gdbtk_annotate_signal): Ditto.
	* generic/gdbtk-register.c (get_register_types):Ditto.
	* generic/gdbtk-stack.c (gdb_get_blocks): Ditto.
	(gdb_selected_block, gdb_selected_frame): Ditto.
	* generic/gdbtk.c (gdbtk_init, view_command): Ditto.
@
text
@d1 8
@


1.419
log
@	* generic/gdbtk-stack.c (gdb_get_vars_command): Revise cast of
	`clientData' to avoid build error on 64-bit hosts.
@
text
@d1 14
@


1.418
log
@- Fix a problem with "File Close" menu that let insight becoming unstable
and unable to reopen a new binary (Linux and Win32 hosts)
- Fix a problem with the source window that, once a binary is closed, is
splitted into 2 part and alway displays the old sources. (Win32 hosts only)

2008-12-16  Denis Pilat  <denis.pilat@@st.com>
	on behalf of Nunzio Raciti  <nunzio.raciti@@st.com>

	* library/srctextwin.itb (_clear_cache): Take care of $p variable that
	could contains ":" for source pane on windows hosts.
	* library/srcwin.itb (choose_and_update): Avoid updating the "source"
	window if target executable name is empty.
@
text
@d1 5
@


1.417
log
@	* generic/gdbtk-cmds.c (valprint.h): Include.
	(gdb_eval): Fetch print options via get_formatted_print_options.
	Update call to val_print.
	(gdb_update_mem): Likewise, but for print_scalar_formatted.
	* generic/gdbtk-register.c (valprint.h): Include.
	(get_register): Use get_formatted_print_options.  Update calls
	to val_print.
	* generic/gdbtk-wrapper.c (valprint.h): Include.
	(wrap_val_print): Use get_formatted_print_options.  Delete
	variables deref_ref and pretty; assign to equivalent fields
	in the value_print_options struct instead.  Update call to
	val_print.
@
text
@d1 8
@


1.416
log
@Replaces my previous bogus patch on this:

        * generic/gdbtk-stack.c (get_gdb_vars_command): clientData is an
        int, not a pointer to int.
@
text
@d1 15
@


1.415
log
@        * generic/gdbtk-stack.c (get_gdb_vars_command): Remove superfluous
        ampersand from assignment.
@
text
@d3 2
a4 2
	* generic/gdbtk-stack.c (get_gdb_vars_command): Remove superfluous
	ampersand from assignment.
@


1.414
log
@        * generic/gdbtk-cmds.c (gdb_clear_file): The global "attach_flag"
        is now per-inferior.
@
text
@d1 5
@


1.413
log
@Fix insight crash when setting pending breakpoints:

2008-09-19  Denis Pilat  <denis.pilat@@st.com>

	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Manage the case of NULL
	location to handle pending breakpoint in a better way.
	(gdb_find_bp_at_addr): Likewise.
@
text
@d1 5
@


1.412
log
@        From Pedro Alves  <pedro@@codesourcery.com>:
        * generic/gdbtk-cmds.c (gdb_cmd, gdb_immediate_command): Adjust to
        new bpstat_do_actions inferface.
        * generic/gdbtk-hooks.c: Include gdbthread.h.
        (gdbtk_annotate_signal): Get the stop_signal from the current
        thread.
@
text
@d1 6
@


1.411
log
@        * generic/gdbtk-cmds.c (gdb_listfuncs): Use SYMBOL_PRINT_NAME
        instead of DEPRECATED_SYMBOL_NAME.
        * generic/gdbtk-stack.c (gdb_block_vars): Likewise.
        (gdb_get_vars_command): Likewise.
        * generic/gdbtk.h (GDBTK_SYMBOL_SOURCE_NAME): Likewise.
@
text
@d1 9
@


1.410
log
@        * generic/gdbtk-cmds.c: Don't include itcl.h.
        * generic/gdbtk-hooks.c: Likewise.
        * generic/gdbtk.c: Include tcl.h and tk.h instead of itcl.h
        and itk.h.
        (gdbtk_init): Rewrite to accommodate using a system-provided
        Tcl, Tk, Itcl, Itk.
        (gdbtk_source_start_file) [!_WIN32]: Don't call error() when
        we fail to source the start file. Just dump the message to stderr.
        Throw an exception indicating the failure.
        * library/ehandler.itb (GDBEventHander::dispatch): "itcl_info" is
        deprecated: use "itcl::find objects" instead.
        * library/managedwin.itb (window_instance): Ditto.
        (restart): Ditto.
        (shutdown): Ditto.
        (_open): Ditto.
        (find): Ditto.
        * library/globalpref.itb (_build_win): Don't pass config arguments
        for libgui widgets to the constructor. Configure the widget after
        creation.
        * library/srcpref.itb (_build_win): Ditto.
        * library/main.tcl: Update Tcl, Tk, Itcl, Itk, and Iwidgets (just
        added to this loop) version requirements.
        No need to initialize Iwidgets separately.
        * plugins/Make-rules (TCLHDIR): Renamed to TCL_INCLUDES. Change
        all references.
        (TCL_BUILD_LIB_SPEC): Renamed to TCL_LIBRARY. Change all references.
        * plugins/acinclude.m4: Include the standard tcl.m4 instead
        of the sourceware-derived one.
        * plugins/configure.ac: Use Tcl's standard SC_* macros instead of
        the sourceware-derived CYG_AC_* macros.
        Add logic to deal with using a system-supplied Tcl/Tk.
        * plugins/configure: Regenerated.
        * plugins/Makefile.in: Regenerated.
@
text
@d1 8
@


1.409
log
@gdb:
	* tui/tui-hooks.c: Include observer.h.
	(tui_event_default, tui_old_event_hooks, tui_event_hooks):
	Remove.
	(tui_bp_created_observer, tui_bp_deleted_observer,
	tui_bp_modified_observer): New globals.
	(tui_install_hooks): Use observers, not events.
	(tui_remove_hooks): Likewise.
	* mi/mi-cmd-break.c: Include observer.h, not gdb-events.h.
	(mi_breakpoint_observers_installed, mi_can_breakpoint_notify): New
	globals.
	(breakpoint_notify): Check mi_can_breakpoint_notify.
	(breakpoint_hooks): Remove.
	(mi_cmd_break_insert): Attach observers.  Don't use events.
	* tracepoint.c: Include observer.h, not gdb-events.h.
	(tracepoint_operation, trace_pass_command): Notify observer.
	* interps.c: Don't include gdb-events.h.
	(clear_interpreter_hooks): Don't call clear_gdb_event_hooks.
	* gdbarch.c: Rebuild.
	* gdbarch.sh: Emit include for observer.h, not gdb-events.h.
	(deprecated_current_gdbarch_select_hack): Notify observer.
	* breakpoint.h: Don't include gdb-events.h.
	* breakpoint.c: Don't include gdb-events.h.
	(condition_command): Notify observer.
	(commands_command): Likewise.
	(commands_from_control_command): Likewise.
	(mention, delete_breakpoint, set_ignore_count): Likewise.
	(disable_breakpoint, do_enable_breakpoint): Likewise.
	* Makefile.in (gdb_events_h): Remove.
	(breakpoint_h): Update.
	(COMMON_OBS): Remove gdb-events.o.
	(gdb-events.o): Remove.
	(breakpoint.o, gdbarch.o, interps.o, tracepoint.o, gdbtk-bp.o,
	gdbtk-hooks.o, mi-cmd-break.o, tui-hooks.o): Update.
	* gdb-events.c: Remove.
	* gdb-events.h: Remove.
	* gdb-events.sh: Remove.
gdb/doc:
	* observer.texi (GDB Observers): Document new observers:
	breakpoint_created, breakpoint_deleted, breakpoint_modified,
	tracepoint_created, tracepoint_deleted, tracepoint_modified,
	architecture_changed.
gdb/gdbtk:
	* generic/gdbtk-hooks.c: Include observer.h, not gdb-events.h.
	(gdbtk_add_hooks): Use observers, not events.
	(gdbtk_architecture_changed): Add argument, for observer.
	* generic/gdbtk-bp.c: Include observer.h.
	(gdb_set_bp): Notify observer.
	(gdb_set_bp_addr): Likewise.
@
text
@d1 36
@


1.408
log
@        * generic/gdbtk-stack.c (gdb_block_args): Remove deprecated values
        LOC_LOCAL_ARG, LOC_COMPUTED_ARG, LOC_REGPARM, LOC_BASEARG_ARG, and
        LOC_BASEARG.
        (gdb_get_blocks): Likewise.
        (gdb_get_vars_command): Likewise.
        Fix type-punned pointer error introduced on 03-07.

        * generic/gdbtk-cmds.c (gdbtk_load_asm): Use paddress instead
        of deprecated_print_address_numeric.
        (gdb_stop): Update use of target_stop.

        * generic/gdbtk.h (gdbtk_get_ptid): Declare new function.
        * generic/gdbtk-hooks.c (gdbtk_wait): Save inferior's ptid.
        (gdbtk_get_ptid): Define new function.
        * generic/gdbtk-varobj.c (variable_update): Update for recent
        varobj_update API change.
        * generic/gdbtk-wrapper.h (GDB_varobj_update): Likewise.
        * generic/gdbtk-wrapper.c (GDB_varobj_update): Likewise.
        (wrap_varobj_update): Likewise.

        * library/targetselection.itb (init_target_db): Initialize
        preferences here instead of ...
        (_init): ... here.
        (_init_prefs): Define gdb/load/default-portname, too.
@
text
@d1 9
@


1.407
log
@	* Update uses of val_print functions with additional language argument.
	generic/gdbtk-cmds.c: Add "language.h" include.
	(gdb_eval): Add current_language as new arg of val_print.
	generic/gdbtk-register.c: Add "language.h" include.
	(get_register): Add current_language as new arg of val_print.
	generic/gdbtk-wrapper.c: Add "language.h" include.
	(wrap_val_print): Add current_language as new arg of val_print.
@
text
@d1 27
@


1.406
log
@        * generic/gdbtk-cmds.c (symtab_to_filename): Call gdb's
        open_source_file instead of find_and_open_source.
@
text
@d1 10
@


1.405
log
@gdbtk/
* README: Fix a typo.

testsuite/gdb.gdbtk/
* README: Fix a few typos throughout.
@
text
@d1 5
@


1.405.2.1
log
@Remove the 2008-03-18 gdbtk-interp.c change -- it is unneeded on 6.8 branch.
@
text
@d5 5
@


1.404
log
@* generic/gdbtk-interp.c (gdbtk_interpreter_init): New parameter
top_level.
@
text
@d1 4
@


1.403
log
@        * generic/gdbtk-register.c (map_arg): New data type
        for passing arguments to mapping functions.
        (map_func): New definition of mapping function.
        Changed all callers to use these new types.
        * generic/gdbtk-stack.c (gdb_get_vars_command): Change
        cast to int to dereference of int *.
        * generic/gdbtk-wrapper.c: Change all casts to char * for
        results and args to use pointer or integer flavor of
        gdb_wrapper_args.results and .args.
        * generic/gdbtk-wrapper.h: struct gdb_wrapper_arguments
        members result and args now return a union of void * and int.
@
text
@d1 5
@


1.402
log
@        From Dave Murphy  <davem@@devkitpro.org>:
        * gdbtk-cmds.c: Guard <sys/ioctl.h> with HAVE_SYS_IOCTL_H.
        * gdbtk-hooks.c: Ditto.
        * gdbtk.c: Ditto.
        * gdbtk-interp.c: Include windows.h under mingw32.
        (gdbtk_start_timer, gdbtk_stop_timer): Remove timer calls under mingw.
        (gdbtk_init): Include windows-specific commands under mingw without
        cygwin path commands.
        * library/download.itb (Download::download_it): Only use ide_cygwin_path
        on cygwin hosts.
        * library/interface.tcl (_open_file): Ditto.
        * library/prefs.tcl (pref_read): Ditto.
        * library/targetselection.itb (TargetSelection::default_port): Default
        to "/dev/com1" under cygwin and "COM1" under mingw.
        (TargetSelection::port_list): Use "/dev/com" under cygwin and
        "COM" under mingw.
@
text
@d1 14
@


1.401
log
@        * library/main.tcl: Add gdbtk_platform definitions.
        * library/attachdlg.itb (list_pids): Use gdbtk_platform
        instead of tcl_platform.
        * library/bpwin.itb (build_win): Likewise.
        (_bp_add): Likewise.
        (_bp_modify): Likewise.
        * library/download.itb (download_it): Likewise.
        * library/globalpref.itb (_build_win): Likewise.
        * library/helpviewer.tcl (open_help): Likewise.
        * library/interface.tcl (gdbtk_tcl_query): Likewise.
        (show_warning): Likewise.
        (open_file): Likewise.
        (run_executable): Likewise.
        * library/managedwin.itb (reveal): Likewise.
        (_create): Likewise.
        * library/prefs.tcl (pref_read): Likewise.
        (pref_set_defaults): Likewise.
        (pref_set_colors): Likewise.
        * library/session.tcl (_exe_name): Likewise.
        * library/srcbar.itcl (_update_file_menu): Likewise.
        (create_run_menu): Likewise.
        * library/srctextwin.itb (_mtime_changed): Likewise.
        (LoadFromCache): Likewise.
        * library/targetselection.itb (default_port): Likewise.
        (build_win): Likewise.

        * library/memwin.itb (build_win): Remove unused tcl_platform
        declaration.
        * library/pluginwin.itcl (enable_ui): Likewise.
        * library/process.itb (build_win): Likewise.
        * library/srcbar.itcl (enable_ui): Likewise.
        * library/srcwin.itb (location): Likewise.
        * library/stackwin.itb (build_win): Likewise.
        * library/tdump.tcl (build_win): Likewise.
@
text
@d1 19
@


1.400
log
@Moved entries for previous years to separate changelogs.
@
text
@d1 37
@


1.399
log
@* generic/gdbtk-varobj.c (variable_children): Adjust
for varobj_list_children change.
@
text
@a5 158
2007-07-02  Markus Deuling  <deuling@@de.ibm.com>

	* gdbtk/generic/gdbtk-stack.c (get_frame_name): Remove dead code
	(PC_LOAD_SEGMENT).

2007-06-27  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-register.c (Gdbtk_Register_Init): Remove
	calls to deprecated_register_gdbarch_swap.
	Add "gdb_reg_arch_changed" command.
	* library/regwin.itb (arch_changed): Call gdb_reg_arch_changed.

2007-06-21  Maciej W. Rozycki  <macro@@mips.com>

	* generic/gdbtk-cmds.c (gdbtk_load_asm): Update the call to
	gdb_print_insn().

2007-06-09  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-register.c get_register): Replace REGISTER_NAME
	with gdbarch_register_name.
	(get_register_name): Ditto.
	(map_arg_registers): Ditto.

2007-06-04  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (hex2bin): Use gdbarch_byte_order instead
	of TARGET_BYTE_ORDER.
	* generic/gdbtk-register.c (get_register): Likewise.
	(map_arg_registers): Use gdbarch_num_regs and gdbarch_num_pseduo_regs
	instead of NUM_REGS and NUM_PSEUDO_REGS.
	(setup_architecture_data): Likewise.
	(gdb_regformat): Likewise.
	(gdb_reggroup): Likewise.

2007-05-22  Chris Dearman  <chris@@mips.com>

	* generic/gdbtk-stack.c (get_frame_name): Remove spurious
	newlines from dummy/sigtramp frame names.

2007-04-27  Maciej W. Rozycki  <macro@@mips.com>

	* generic/gdbtk-wrapper.c (GDB_varobj_update): New function.
	(wrap_varobj_update): Likewise.
	* generic/gdbtk-wrapper.h (GDB_varobj_update): New declaration.
	* generic/gdbtk-varobj.c (variable_update): Call
	GDB_varobj_update() rather than varobj_update() directly.  Take
	the new semantics of the latter into account.
	* generic/gdbtk-cmds.c: Include "varobj.h".
	* generic/gdbtk-stack.c: Likewise.

2007-03-13  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_loc): Eliminate use of
	`deprecated_selected_frame'.
	* generic/gdbtk-register.c (register_changed_p): Likewise.
	* generic/gdbtk-stack.c (gdb_block_vars, gdb_get_blocks)
	(gdb_get_vars_command, gdb_selected_block, gdb_selected_frame):
	Likewise.

2006-11-30  Keith Seitz  <keiths@@redhat.com>

	insight/293:
	* library/watch.tcl (no_inferior): Remove all varobjs and
	clear the display.
	(clear_file): Call no_inferior. Update comments.
	* library/locals.tcl: Remove unused variables "Running"
	and "Variables". Changed throughout.
	(no_inferior): Delete the current frame and clear the display.
	(clear_file): Call no_inferior. Update comments.
	(context_switch): To delete an Itcl object, one uses
	"delete object" not "destroy".

2006-11-30  Keith Seitz  <keiths@@redhat.com>

	insight/299:
	* generic/gdbtk.c (gdbtk_init): Don't check if DISPLAY is set,
	it isn't needed anymore. Gdb will not abort, and Tk_Init will
	fail gracefully.

2006-11-30  Keith Seitz  <keiths@@redhat.com>

	* library/targetselection.itb (constructor): "top" is unused.
	Remove it.
	(get_target_list): Use "scan" to parse "help target" output.

2006-11-09  Keith Seitz  <keiths@@redhat.com>

	* help/trace/locals.html: Remove all references to gdb.ini. Even
	Cygwin now uses .gdbinit.
	* help/trace/watch.html: Likewise.

2006-09-28  Keith Seitz  <keiths@@redhat.com>

	* aclocal.m4: Regenerate.
	* configure: Regenerate.
	* Makefile.in: Regenerate.

2006-09-19  Keith Seitz  <keiths@@redhat.com>

	From Andrew Stubbs  <andrew.stubbs@@st.com>:
	* library/prefs.tcl (pref_save): Save preferences if
	INSIGHT_FORCE_READ_PREFERENCES is set in the environment.

2006-09-14  Keith Seitz  <keiths@@redhat.com>

	* README: Update startup info and add DISPLAY environment
	variable.

2006-08-25  Maciej W. Rozycki  <macro@@mips.com>

	* generic/gdbtk-cmds.c (gdb_update_mem): Use target_read.

2006-08-25  Keith Seitz  <keiths@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Disable IPC, gdb/ipc/enabled,
	by default.

2006-06-26  Keith Seitz  <keiths@@redhat.com>

	* library/srcwin.itb (_build_win): Add invisible frame to workaround
	the missing frame problem.

2006-03-29  Brian Dessent  <brian@@dessent.net>

	* generic/gdbtk-cmds.c: Include sys/cygwin.h if __CYGWIN__ defined.
	(gdb_path_conv): Call cygwin_conv_to_full_win32_path instead.

2006-01-23  Keith Seitz  <keiths@@redhat.com>

	From Andrew Stubbs  <andrew.stubbs@@st.com>:
	* library/help/source.html: Add entries for the missing menu commands.

2006-01-23  Keith Seitz  <keiths@@redhat.com>

	From Andrew Stubbs  <andrew.stubbs@@st.com>:
	* library/mempref.itb (MemPref::constructor): Allow the Byte Per Row
	combo box to accept arbitrary values.
	(MemPref::set_bytes_per_row): Validate the new value; reject invalid
	entries and round up to a multiple of the word size.
	(MemPref::apply): Read the value from the text box even if the user
	has not pressed return.
	(MemPref::enable_format): Ensure the bytes per row value is still valid.
	(MemPref::disable_format): Likewise.
	* library/mempref.ith (MemPref): Add $gbprlist.
	* library/help/memory.html: Update.

2006-01-23  Keith Seitz  <keiths@@redhat.com>

	From Andrew Stubbs  <andrew.stubbs@@st.com>:
	* library/helpviewer.tcl (open_help): Add firefox and opera to the
	browser list used to display help.

2006-01-23  Keith Seitz  <keiths@@redhat.comt>

	* ChangeLog: Cleared and saved to ...
	* ChagneLog-2005: ... here.

@


1.398
log
@2007-07-02  Markus Deuling  <deuling@@de.ibm.com>

	* gdbtk/generic/gdbtk-stack.c (get_frame_name): Remove dead code
	(PC_LOAD_SEGMENT).
@
text
@d1 5
@


1.397
log
@        * generic/gdbtk-register.c (Gdbtk_Register_Init): Remove
        calls to deprecated_register_gdbarch_swap.
        Add "gdb_reg_arch_changed" command.
        * library/regwin.itb (arch_changed): Call gdb_reg_arch_changed.
@
text
@d1 5
@


1.396
log
@gdb/:
* disasm.c (gdb_print_insn): Return the number of branch delay
slot instructions too.
* disasm.h (gdb_print_insn): Update prototype.
* printcmd.c (branch_delay_insns): New variable to record the
number of delay slot instructions after disassembling a branch.
(print_formatted): Record the number of branch delay slot
instructions.
(do_examine): When disassembling, if the last instruction
disassembled has any branch delay slots, then bump the count so
that they get disassembled too.
* tui/tui-disasm.c (tui_disassemble): Update the call to
gdb_print_insn().
* NEWS: Document the new behaviour.

gdb/doc/:
* gdb.texinfo (Examining Memory): Document the new behaviour.

gdb/gdbtk/:
* generic/gdbtk-cmds.c (gdbtk_load_asm): Update the call to
gdb_print_insn().
@
text
@d1 7
@


1.395
log
@        * generic/gdbtk-register.c get_register): Replace REGISTER_NAME
        with gdbarch_register_name.
        (get_register_name): Ditto.
        (map_arg_registers): Ditto.
@
text
@d1 5
@


1.394
log
@        * generic/gdbtk-cmds.c (hex2bin): Use gdbarch_byte_order instead
        of TARGET_BYTE_ORDER.
        * generic/gdbtk-register.c (get_register): Likewise.
        (map_arg_registers): Use gdbarch_num_regs and gdbarch_num_pseduo_regs
        instead of NUM_REGS and NUM_PSEUDO_REGS.
        (setup_architecture_data): Likewise.
        (gdb_regformat): Likewise.
        (gdb_reggroup): Likewise.
@
text
@d1 7
@


1.393
log
@* generic/gdbtk-stack.c (get_frame_name): Remove spurious
newlines from dummy/sigtramp frame names.
@
text
@d1 11
@


1.392
log
@gdb/:
* Makefile.in (gdbtk-wrapper.o): Update dependencies.
(gdbtk-varobj.o, gdbtk-cmds.o, gdbtk-stack.o): Likewise.

gdb/gdbtk/:
* generic/gdbtk-wrapper.c (GDB_varobj_update): New function.
(wrap_varobj_update): Likewise.
* generic/gdbtk-wrapper.h (GDB_varobj_update): New declaration.
* generic/gdbtk-varobj.c (variable_update): Call
GDB_varobj_update() rather than varobj_update() directly.  Take
the new semantics of the latter into account.
* generic/gdbtk-cmds.c: Include "varobj.h".
* generic/gdbtk-stack.c: Likewise.
@
text
@d1 5
@


1.391
log
@Eliminate use of `deprecated_selected_frame'.
@
text
@d1 11
@


1.390
log
@        insight/293:
        * library/watch.tcl (no_inferior): Remove all varobjs and
        clear the display.
        (clear_file): Call no_inferior. Update comments.
        * library/locals.tcl: Remove unused variables "Running"
        and "Variables". Changed throughout.
        (no_inferior): Delete the current frame and clear the display.
        (clear_file): Call no_inferior. Update comments.
        (context_switch): To delete an Itcl object, one uses
        "delete object" not "destroy".
@
text
@d1 9
@


1.389
log
@        insight/299:
        * generic/gdbtk.c (gdbtk_init): Don't check if DISPLAY is set,
        it isn't needed anymore. Gdb will not abort, and Tk_Init will
        fail gracefully.
@
text
@d3 13
@


1.388
log
@        * library/targetselection.itb (constructor): "top" is unused.
        Remove it.
        (get_target_list): Use "scan" to parse "help target" output.
@
text
@d3 7
@


1.387
log
@        * help/trace/locals.html: Remove all references to gdb.ini. Even
        Cygwin now uses .gdbinit.
        * help/trace/watch.html: Likewise.
@
text
@d1 6
@


1.387.2.1
log
@Update from HEAD to fix some serious problems.
@
text
@a0 26
2006-11-30  Keith Seitz  <keiths@@redhat.com>

	insight/293:
	* library/watch.tcl (no_inferior): Remove all varobjs and
	clear the display.
	(clear_file): Call no_inferior. Update comments.
	* library/locals.tcl: Remove unused variables "Running"
	and "Variables". Changed throughout.
	(no_inferior): Delete the current frame and clear the display.
	(clear_file): Call no_inferior. Update comments.
	(context_switch): To delete an Itcl object, one uses
	"delete object" not "destroy".

2006-11-30  Keith Seitz  <keiths@@redhat.com>

	insight/299:
	* generic/gdbtk.c (gdbtk_init): Don't check if DISPLAY is set,
	it isn't needed anymore. Gdb will not abort, and Tk_Init will
	fail gracefully.

2006-11-30  Keith Seitz  <keiths@@redhat.com>

	* library/targetselection.itb (constructor): "top" is unused.
	Remove it.
	(get_target_list): Use "scan" to parse "help target" output.

@


1.386
log
@        * aclocal.m4: Regenerate.
        * configure: Regenerate.
        * Makefile.in: Regenerate.
@
text
@d1 6
@


1.385
log
@        From Andrew Stubbs  <andrew.stubbs@@st.com>:
        * library/prefs.tcl (pref_save): Save preferences if
        INSIGHT_FORCE_READ_PREFERENCES is set in the environment.
@
text
@d1 6
@


1.384
log
@        * README: Update startup info and add DISPLAY environment
        variable.
@
text
@d1 6
@


1.383
log
@* generic/gdbtk-cmds.c (gdb_update_mem): Use target_read.
@
text
@d1 5
@


1.382
log
@        * library/prefs.tcl (pref_set_defaults): Disable IPC, gdb/ipc/enabled,
        by default.
@
text
@d1 4
@


1.381
log
@        * library/srcwin.itb (_build_win): Add invisible frame to workaround
        the missing frame problem.
@
text
@d1 5
@


1.380
log
@	* generic/gdbtk-cmds.c: Include sys/cygwin.h if __CYGWIN__ defined.
	(gdb_path_conv): Call cygwin_conv_to_full_win32_path instead.
@
text
@d1 5
@


1.380.2.1
log
@        * library/srcwin.itb (_build_win): Add invisible frame to workaround
        the missing frame problem.
@
text
@a0 5
2006-06-26  Keith Seitz  <keiths@@redhat.com>

	* library/srcwin.itb (_build_win): Add invisible frame to workaround
	the missing frame problem.

@


1.380.2.2
log
@        * aclocal.m4: Regenerate.
        * configure: Regenerate.
        * Makefile.in: Regenerate.
@
text
@a0 6
2006-09-28  Keith Seitz  <keiths@@redhat.com>

	* aclocal.m4: Regenerate.
	* configure: Regenerate.
	* Makefile.in: Regenerate.

@


1.379
log
@        From Andrew Stubbs  <andrew.stubbs@@st.com>:
        * library/help/source.html: Add entries for the missing menu commands.
@
text
@d1 5
@


1.378
log
@        From Andrew Stubbs  <andrew.stubbs@@st.com>:
        * library/mempref.itb (MemPref::constructor): Allow the Byte Per Row
        combo box to accept arbitrary values.
        (MemPref::set_bytes_per_row): Validate the new value; reject invalid
        entries and round up to a multiple of the word size.
        (MemPref::apply): Read the value from the text box even if the user
        has not pressed return.
        (MemPref::enable_format): Ensure the bytes per row value is still valid.
        (MemPref::disable_format): Likewise.
        * library/mempref.ith (MemPref): Add $gbprlist.
        * library/help/memory.html: Update.
@
text
@d4 5
@


1.377
log
@        From Andrew Stubbs  <andrew.stubbs@@st.com>:
        * library/helpviewer.tcl (open_help): Add firefox and opera to the
        browser list used to display help.
@
text
@d4 14
@


1.376
log
@        * ChangeLog: Cleared and saved to ...
        * ChagneLog-2005: ... here.
@
text
@d1 6
@


1.375
log
@	* library/attachdlg.itb:
	* library/actiondlg.tcl:
	* library/about.tcl:
	* library/ehandler.itb:
	* library/editor.tcl:
	* library/download.ith:
	* library/download.itb:
	* library/debugwin.ith:
	* library/debugwin.itb:
	* library/cspref.ith:
	* library/cspref.itb:
	* library/console.ith:
	* library/console.itb:
	* library/browserwin.ith:
	* library/browserwin.itb:
	* library/bpwin.ith:
	* library/bpwin.itb:
	* library/blockframe.ith:
	* library/managedwin.ith:
	* library/managedwin.itb:
	* library/main.tcl:
	* library/locals.tcl:
	* library/ipcpref.ith:
	* library/ipcpref.itb:
	* library/ipc.tcl:
	* library/interface.tcl:
	* library/helpviewer.tcl:
	* library/globalpref.ith:
	* library/globalpref.itb:
	* library/gdbwin.ith:
	* library/gdbtoolbar.itcl:
	* library/gdbmenubar.itcl:
	* library/gdbevent.ith:
	* library/gdbevent.itb:
	* library/embeddedwin.ith:
	* library/ehandler.ith:
	* library/srcwin.itb:
	* library/srctextwin.ith:
	* library/srctextwin.itb:
	* library/srcpref.ith:
	* library/srcpref.itb:
	* library/srcbar.itcl:
	* library/session.tcl:
	* library/regwin.ith:
	* library/regwin.itb:
	* library/process.ith:
	* library/process.itb:
	* library/prefs.tcl:
	* library/pluginwin.itcl:
	* library/modal.tcl:
	* library/memwin.ith:
	* library/memwin.itb:
	* library/mempref.ith:
	* library/mempref.itb:
	* library/watch.tcl:
	* library/watch.tcl:
	* library/warning.tcl:
	* library/vartree.ith:
	* library/vartree.itb:
	* library/util.tcl:
	* library/tracedlg.tcl:
	* library/toplevelwin.ith:
	* library/tfind_args.tcl:
	* library/tdump.tcl:
	* library/targetselection.ith:
	* library/targetselection.itb:
	* library/stackwin.ith:
	* library/stackwin.itb:
	* library/srcwin.ith:
@
text
@d1 1
a1 1
2005-12-23  Eli Zaretskii  <eliz@@gnu.org>
d3 2
a4 211
	* library/attachdlg.itb: 
	* library/actiondlg.tcl: 
	* library/about.tcl: 
	* library/ehandler.itb: 
	* library/editor.tcl: 
	* library/download.ith: 
	* library/download.itb: 
	* library/debugwin.ith: 
	* library/debugwin.itb: 
	* library/cspref.ith: 
	* library/cspref.itb: 
	* library/console.ith: 
	* library/console.itb: 
	* library/browserwin.ith: 
	* library/browserwin.itb: 
	* library/bpwin.ith: 
	* library/bpwin.itb: 
	* library/blockframe.ith: 
	* library/managedwin.ith: 
	* library/managedwin.itb: 
	* library/main.tcl: 
	* library/locals.tcl: 
	* library/ipcpref.ith: 
	* library/ipcpref.itb: 
	* library/ipc.tcl: 
	* library/interface.tcl: 
	* library/helpviewer.tcl: 
	* library/globalpref.ith: 
	* library/globalpref.itb: 
	* library/gdbwin.ith: 
	* library/gdbtoolbar.itcl: 
	* library/gdbmenubar.itcl: 
	* library/gdbevent.ith: 
	* library/gdbevent.itb: 
	* library/embeddedwin.ith: 
	* library/ehandler.ith: 
	* library/srcwin.itb: 
	* library/srctextwin.ith: 
	* library/srctextwin.itb: 
	* library/srcpref.ith: 
	* library/srcpref.itb: 
	* library/srcbar.itcl: 
	* library/session.tcl: 
	* library/regwin.ith: 
	* library/regwin.itb: 
	* library/process.ith: 
	* library/process.itb: 
	* library/prefs.tcl: 
	* library/pluginwin.itcl: 
	* library/modal.tcl: 
	* library/memwin.ith: 
	* library/memwin.itb: 
	* library/mempref.ith: 
	* library/mempref.itb: 
	* library/watch.tcl: 
	* library/watch.tcl: 
	* library/warning.tcl: 
	* library/vartree.ith: 
	* library/vartree.itb: 
	* library/util.tcl: 
	* library/tracedlg.tcl: 
	* library/toplevelwin.ith: 
	* library/tfind_args.tcl: 
	* library/tdump.tcl: 
	* library/targetselection.ith: 
	* library/targetselection.itb: 
	* library/stackwin.ith: 
	* library/stackwin.itb: 
	* library/srcwin.ith: 
	* generic/gdbtk.h: 
	* generic/gdbtk.c: 
	* generic/gdbtk-wrapper.h: 
	* generic/gdbtk-wrapper.c: 
	* generic/gdbtk-varobj.c: 
	* generic/gdbtk-stack.c: 
	* generic/gdbtk-register.c: 
	* generic/gdbtk-main.c: 
	* generic/gdbtk-interp.c: 
	* generic/gdbtk-hooks.c: 
	* generic/gdbtk-cmds.h: 
	* generic/gdbtk-cmds.c: 
	* generic/gdbtk-bp.c: Put (C) after Copyright.  Update the FSF
	address.

2005-11-29  Andrew Stubbs  <andrew.stubbs@@st.com>

	* library/prefs.tcl (pref_read): Read preferences file if environment
	variable INSIGHT_FORCE_READ_PREFERENCES is set (regardless of -nx).
	* README: Mention INSIGHT_FORCE_READ_PREFERENCES.

2005-11-11  Keith Seitz  <keiths@@redhat.com>

	From Spencer Oliver <spencer.oliver@@anglia.com>:
	* library/targetselection.itb (build_win): Only pack the xterm checkbutton
	on unix platforms.

2005-09-12  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Remove all mention of Tix.
	* README: Ditto.

2005-08-31  Keith Seitz  <keiths@@redhat.com>

	* library/help/target.html: Update dialog options.
	* library/targetselection.itb (help): Implement.
	(build_win): Don't disable help button.
	Only display "use tty" option on unix hosts.

2005-08-31  Keith Seitz  <keiths@@redhat.com>

	* library/bpwin.itb (bp_store): gdb_get_breakpoint_info outputs
	the breakpoint condition, too -- include it in the lassign.

2005-08-31  Keith Seitz  <keiths@@redhat.com>

	From Dieter Ruppert <dieter_ruppert@@siemens.com>:
	* library/memwin.itb (update_address): Change parameter name
	so that it does not shadow a member variable.
	Save the updated address internally.

2005-06-13  Keith Seitz  <keiths@@redhat.com>

	From Charles Brockman <mr hyphen chuck at att dot net>:
	* library/interface.tcl (gdbtk_tcl_warning): Filter "RTTI symbol not found"
	"warnings", too.

2005-06-06  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdbtk_tcl_fputs_error): gdbtk_state is in the global
	namespace. Fix references.
	(gdbtk_tcl_fputs_log): Likewise.
	
	From Steven Johnson  <johnson@@sakuraindustries.com>:
	* library/interface.tcl (gdbtk_tcl_warning): Filter some basic warnings
	from gdb - "incomplete CFI.." and "Internal error".

2005-06-06  Keith Seitz  <keiths@@redhat.com>

	From Steven Johnson  <sjohnson@@sakraindustries.com>:
	* generic/gcbtk-cmds.c (gdb_loc): Hand gdb_loc called before remote
	target connected, where gdb_loc now returns the entry address as $pc.

2005-06-01  Keith Seitz  <keiths@@redhat.com>

	From James Lemke  <jim@@wasabisystems.com>:
	* generic/gdbtk-hooks.c (gdbtk_fileopenin, gdbtk_read): New functions
	for target to read stdin from console window.
	* generic/gdbtk-interp.c (_stdtargin): Added.
	* generic/gdbtk.h (gdbtk_fileopenin): Add declaration.

2005-05-26  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_set_mem): target_write_memory now takes
	gdb_byte* instead of char*.
	* generic/gdbtk-register.c (get_register): frame_register and val_print
	take gdb_byte* instead of char*.
	* generic/gdbtk-wrapper.c: Ditto the val_print part.

	From Paul Schlie  <schlie@@comcast.net>:
	* generic/gdbtk-bp.c (gdb_set_bp): Use lbasename instead of basename.
	* generic/gdbtk-cmds.c (gdb_listfiles): Likewise.

2005-04-28  Ben Elliston  <bje@@au.ibm.com>

	* generic/gdbtk-interp.c (gdbtk_interpreter_exec): Return struct
	gdb_exception due to the 2005-04-26 renaming of struct exception.
	* generic/gdbtk.c (gdbtk_source_start_file): Likewise.

2005-02-25  Keith Seitz  <kseitz@@sources.redhat.com>

	* generic/gdbtk.c (gdbtk_source_start_file): In the _WIN32 case,
	use throw_exception (struct exception).

2005-02-16  Martin Hunt  <hunt@@redhat.com>

	* generic/gdbtk-stack.c (get_frame_name): Replace
	print_address_numeric with deprecated_print_address_numeric.
	* generic/gdbtk-cmds.c (gdbtk_load_asm): Ditto.

2005-02-07  Keith Seitz  <kseitz@@sources.redhat.com>

	* generic/gdbtk-cmds.c (gdb_eval): VALUE_EMBEDDED_OFFSET and
	VALUE_CONTENTS are now functions.


2005-01-19  Keith Seitz  <kseitz@@sources.redhat.com>

	* Makefile.in: Regenerate.
	* aclocal.m4: Regenerate.
	* plugins/Makefile.in; Regenerate.
	* plugins/aclocal.m4: Regenerate.

2005-01-17  Keith Seitz  <kseitz@@sources.redhat.com>

	* generic/gdbtk-varobj.c (variable_value): Remove all instances
	of error_last_message. It's gone.

	* generic/gdbtk-wrapper.c: Include exceptions.h
	* generic/gdbtk-cmds.c: Likewise.
	* generic/gdbtk-interp.c: Likewise.
	(gdbtk_interpreter_exec): Change return type to struct
	exception. Return exception_none.	

2005-01-13  Keith Seitz  <keiths@@redhat.com>

	* configure.in: Rename to ...
	* configure.ac: ... this.
	* configure: Regenerate with autoconf 2.59.
	* plugins/configure.in: Rename to ...
	* plugins/configure.ac: ... this.
	* pluginx/configure: Regenerate with autoconf 2.59.
@


1.374
log
@	* generic/gdbtk.h:
	* generic/gdbtk.c:
	* generic/gdbtk-wrapper.h:
	* generic/gdbtk-wrapper.c:
	* generic/gdbtk-varobj.c:
	* generic/gdbtk-stack.c:
	* generic/gdbtk-register.c:
	* generic/gdbtk-main.c:
	* generic/gdbtk-interp.c:
	* generic/gdbtk-hooks.c:
	* generic/gdbtk-cmds.h:
	* generic/gdbtk-cmds.c:
	* generic/gdbtk-bp.c: Put (C) after Copyright.  Update the FSF
	address.
@
text
@d3 69
@


1.373
log
@2005-11-29  Andrew Stubbs  <andrew.stubbs@@st.com>

	* library/prefs.tcl (pref_read): Read preferences file if environment
	variable INSIGHT_FORCE_READ_PREFERENCES is set (regardless of -nx).
	* README: Mention INSIGHT_FORCE_READ_PREFERENCES.
@
text
@d1 17
@


1.372
log
@        From Spencer Oliver <spencer.oliver@@anglia.com>:
        * library/targetselection.itb (build_win): Only pack the xterm checkbutton
        on unix platforms.
@
text
@d1 6
@


1.371
log
@        * generic/gdbtk.c (gdbtk_init): Remove all mention of Tix.
        * README: Ditto.
@
text
@d1 6
@


1.371.2.1
log
@        From Spencer Oliver <spencer.oliver@@anglia.com>:
        * library/targetselection.itb (build_win): Only pack the xterm checkbutton
        on unix platforms.
@
text
@a0 6
2005-11-21  Keith Seitz  <keiths@@redhat.com>

	From Spencer Oliver <spencer.oliver@@anglia.com>:
	* library/targetselection.itb (build_win): Only pack the xterm checkbutton
	on unix platforms.

@


1.370
log
@        * library/help/target.html: Update dialog options.
        * library/targetselection.itb (help): Implement.
        (build_win): Don't disable help button.
        Only display "use tty" option on unix hosts.
@
text
@d1 5
@


1.369
log
@        * library/bpwin.itb (bp_store): gdb_get_breakpoint_info outputs
        the breakpoint condition, too -- include it in the lassign.
@
text
@d3 7
@


1.368
log
@        From Dieter Ruppert <dieter_ruppert@@siemens.com>:
        * library/memwin.itb (update_address): Change parameter name
        so that it does not shadow a member variable.
        Save the updated address internally.
@
text
@d3 5
@


1.367
log
@        From Charles Brockman <mr hyphen chuck at att dot net>:
        * library/interface.tcl (gdbtk_tcl_warning): Filter "RTTI symbol not found"
        "warnings", too.
@
text
@d1 7
@


1.366
log
@        * library/interface.tcl (gdbtk_tcl_fputs_error): gdbtk_state is in the global
        namespace. Fix references.
        (gdbtk_tcl_fputs_log): Likewise.

        From Steven Johnson  <johnson@@sakuraindustries.com>:
        * library/interface.tcl (gdbtk_tcl_warning): Filter some basic warnings
        from gdb - "incomplete CFI.." and "Internal error".
@
text
@d1 6
@


1.365
log
@        From Steven Johnson  <sjohnson@@sakraindustries.com>:
        * generic/gcbtk-cmds.c (gdb_loc): Hand gdb_loc called before remote
        target connected, where gdb_loc now returns the entry address as $pc.
@
text
@d3 10
@


1.364
log
@        From James Lemke  <jim@@wasabisystems.com>:
        * generic/gdbtk-hooks.c (gdbtk_fileopenin, gdbtk_read): New functions
        for target to read stdin from console window.
        * generic/gdbtk-interp.c (_stdtargin): Added.
        * generic/gdbtk.h (gdbtk_fileopenin): Add declaration.
@
text
@d1 6
@


1.363
log
@        * generic/gdbtk-cmds.c (gdb_set_mem): target_write_memory now takes
        gdb_byte* instead of char*.
        * generic/gdbtk-register.c (get_register): frame_register and val_print
        take gdb_byte* instead of char*.
        * generic/gdbtk-wrapper.c: Ditto the val_print part.

        From Paul Schlie  <schlie@@comcast.net>:
        * generic/gdbtk-bp.c (gdb_set_bp): Use lbasename instead of basename.
        * generic/gdbtk-cmds.c (gdb_listfiles): Likewise.
@
text
@d1 8
@


1.362
log
@	* generic/gdbtk-interp.c (gdbtk_interpreter_exec): Return struct
	gdb_exception due to the 2005-04-26 renaming of struct exception.
	* generic/gdbtk.c (gdbtk_source_start_file): Likewise.
@
text
@d1 12
@


1.361
log
@        * generic/gdbtk.c (gdbtk_source_start_file): In the _WIN32 case,
        use throw_exception (struct exception).
@
text
@d1 6
@


1.360
log
@2005-02-16  Martin Hunt  <hunt@@redhat.com>

	* generic/gdbtk-stack.c (get_frame_name): Replace
	print_address_numeric with deprecated_print_address_numeric.
	* generic/gdbtk-cmds.c (gdbtk_load_asm): Ditto.
@
text
@d1 5
@


1.359
log
@        * generic/gdbtk-cmds.c (gdb_eval): VALUE_EMBEDDED_OFFSET and
        VALUE_CONTENTS are now functions.
@
text
@d1 6
d12 1
@


1.358
log
@        * Makefile.in: Regenerate.
        * aclocal.m4: Regenerate.
        * plugins/Makefile.in; Regenerate.
        * plugins/aclocal.m4: Regenerate.
@
text
@d1 5
@


1.357
log
@        * generic/gdbtk-varobj.c (variable_value): Remove all instances
        of error_last_message. It's gone.

        * generic/gdbtk-wrapper.c: Include exceptions.h
        * generic/gdbtk-cmds.c: Likewise.
        * generic/gdbtk-interp.c: Likewise.
        (gdbtk_interpreter_exec): Change return type to struct
        exception. Return exception_none.
@
text
@d1 7
@


1.356
log
@        * configure.in: Rename to ...
        * configure.ac: ... this.
        * configure: Regenerate with autoconf 2.59.
        * plugins/configure.in: Rename to ...
        * plugins/configure.ac: ... this.
        * pluginx/configure: Regenerate with autoconf 2.59.
@
text
@d1 11
@


1.355
log
@	Remove some warnings:
	* generic/gdbtk-hooks.c (gdbtk_pre_add_symbol): Cast `name'.
	* generic/gdbtk-cmds.c (gdbtk_dis_asm_read_memory): Remove.
@
text
@d1 1
a1 1
2004-12-13  Ben Elliston  <bje@@au.ibm.com>
d3 6
a8 3
	Remove some warnings:
	* generic/gdbtk-hooks.c (gdbtk_pre_add_symbol): Cast `name'.
	* generic/gdbtk-cmds.c (gdbtk_dis_asm_read_memory): Remove.
a9 203
2004-12-08  Keith Seitz  <kseitz@@sources.redhat.com>

	* library/download.ith (completed_steps): New variable.
	* library/download.itb (Download::constructor): Remove
	"-fraction" option from iwidgets feedback widget. It's not a valid
	option!
	(update_download): Compute the step number and use that to
	update the feedback widget.
	(done): Use completed_steps to figure out how many steps
	the dumb feedback meter needs to show full.
	(download_it): Initialize completed_steps.
	
2004-11-18  Keith Seitz  <kseitz@@sources.redhat.com>

	* generic/gdbtk-wrapper.c (wrap_type_print): Use value_type instead
	of VALUE_TYPE.
	* generic/gdbtk-cmds.c (gdb_eval): Likewise.

2004-10-31  David Lecomber <dsl@@sources.redhat.com>
	* generic/gdbtk-register.c: Add message parameter
	to call of get_selected_frame.

2004-08-27  Martin Hunt  <hunt@@redhat.com>

	* library/ipc.tcl: New file.
	* library/ipcpref.ith: New file.
	* library/ipcpref.itb: New file.

	* library/srcwin.itb (SrcWin::inferior): Call ipc
	send if enabled.
	
	* library/prefs.tcl (pref_set_defaults): Enable color
	schemes by default. Add IPC defaults.
	
	* library/srcbar.itcl (create_pref_menu): Create
	"Advanced" cascade menu and put "Edit Color Schemes"
	and "IPC Support" under it.

	* library/managedwin.itb (ManagedWin::destructor): 
	If IPC enabled then send "quit" on exit.
	
	* library/main.tcl: Start IPC if enabled.

	* library/prefs.tcl (pref_set_defaults): Add IPC defaults.

	* library/gdbmenubar.itcl (menubar_get_current_menu): 
	New method.

2004-08-09  Ben Elliston  <bje@@au.ibm.com>

	* generic/gdbtk-register.c (get_register_size): Use
	register_size() instead of DEPRECATED_REGISTER_RAW_SIZE.
	(get_register): Likewise.
	(register_changed_p): Likewise.

2004-07-02  Martin Hunt  <hunt@@redhat.com>

	* library/targetselection.itb: Use /dev/comX for
	cygwin instead of just comX.

	* library/interface.tcl (gdbtk_tcl_preloop): Set baud rate.

2004-07-02  Martin Hunt  <hunt@@redhat.com>
	
	* generic/gdbtk-cmds.c (symtab_to_filename): New function. Like
	symtab_to_fullname() but returns the filename if the fullname 
	cannot be found.
	
	* generic/gdbtk-cmds.c (gdb_find_file_command): Revert
	patch of 2004-06-11. Use symtab_to_filename() again.
	(gdb_loc): Ditto.
	(gdb_loadfile): Ditto.
	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Ditto.
	(gdb_get_tracepoint_info): Ditto.

	* generic/gdbtk-cmds.h: Declare symtab_to_filename().

2004-06-26  Andrew Cagney  <cagney@@gnu.org>

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Call
	deprecated_set_gdb_event_hooks.

2004-06-25  Andrew Cagney  <cagney@@gnu.org>

	* generic/gdbtk.h: "ui_loop_hook" was deprecated, update.
	* generic/gdbtk-hooks.c (gdbtk_add_hooks, x_event): Ditto.
	* generic/gdbtk-cmds.c: Ditto.

2004-06-24  Andrew Cagney  <cagney@@gnu.org>

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Update references to
	pre_add_symbol_hook and post_add_symbol_hook, both deprecated.
	* library/interface.tcl (gdbtk_memory_changed): Update comments.
	
2004-06-24  Andrew Cagney  <cagney@@gnu.org>

	* generic/gdbtk-hooks.c (ui_loop_hook, pre_add_symbol_hook)
	(post_add_symbol_hook, selected_frame_level_changed_hook): Delete
	extern declarations.

2004-06-15  Alan Modra  <amodra@@bigpond.net.au>

	* generic/gdbtk-cmds.c (gdb_load_info): Use bfd_get_section_size
	instead of bfd_get_section_size_before_reloc.

2004-06-11  Martin Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_find_file_command): Use
	symtab_to_fullname() instead of symtab_to_filename().
	(gdb_loc): Ditto.
	(gdb_loadfile): Ditto.
	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Ditto.
	(gdb_get_tracepoint_info): Ditto.	

	* generic/gdbtk-register.c (get_register): Simplify and remove
	references to DEPRECATED_REGISTER_CONVERT_TO_VIRTUAL.

2004-05-27  Martin Hunt  <hunt@@redhat.com>

	* library/tdump.tcl (build_win): Remove old nonworking
	code to select scrolledtext mode.  Just use "dynamic".

2004-04-22  Keith Seitz  <kseitz@@sources.redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): "Update" deprecated hooks.
	"Houston... We have a problem."
	* generic/gdbtk-interp.c (gdbtk_interpreter_resume): Likewise.
 	* generic/gdbtk.c (gdbtk_init_1): Likewise.
	
2004-04-19  Roland McGrath  <roland@@redhat.com>

	* generic/gdbtk-hooks.c: Update gdbtk_pre_add_symbol forward decl to
	match defn type change.

2004-04-15  Roland McGrath  <roland@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_pre_add_symbol): Add const to arg type.
	(pre_add_symbol): Likewise in extern decl.

2004-04-05  Martin Hunt  <hunt@@redhat.com>

	* library/session.tcl: Make hostname and portname
	session-dependent. Add gdb_bg_num (the color
	scheme number) as a per-session variable.

	* library/prefs.tcl (pref_read): If color schemes are in use,
	set colors based on the current scheme.
	(pref_save): Add "bg" section.
	(pref_set_defaults): Define new variable gdb/use_color_schemes
	and define 16 default background colors.

	* library/managedwin.itb (ManagedWin::window_name): Append
	window "instance" string to window name.
	(ManagedWin::window_instance): Set window instance string.

	* library/debugwin.itb: Add a reconfig method to restore
	unique black textbackground, overriding color scheme.

	* library/csprefs.itb:
	* library/csprefs.ith: New files. Implement color scheme
	preferences.

	* library/util.tcl (set_bg_colors): New function.
	(r_setcolors): New function.

	* library/regwin.itb (_prefs_changed): Deleted.
	(reconfig): New function.  Updates tkTable color tags
	if color scheme changes.
	* library/regwin.ith: Update to reflect above changes.

	* library/srcbar.itcl (create_pref_menu): Add pulldown
	menus for "Edit Color Schemes..." and "Use Color Schemes".
	(reconfig): Fix up menu items for color schemes.

	* library/globalpref.itb (_init_var): Add
	gdb/use_color_schemes to variable list.
	(_build_win): Add a checkbutton to enable/disable
	color schemes.

	* library/gdbmenubar.itcl (menubar_add_cascade): Add a class
	argument so cascade menus can be managed by class too.

	* library/interface.tcl (gdbtk_tcl_fputs): Check for
	existence of gdbtk_state(console).  Stops annoying error
	messages.
	(gdbtk_tcl_fputs_error): Ditto.
	(gdbtk_tcl_fputs_log): Ditto.

2004-03-29  Martin Hunt  <hunt@@redhat.com>

	* generic/gdbtk-register.c (map_arg_registers): If a specific
	register was requested, just return it without validating it
	has a name.
	(get_register): Check DEPRECATED_REGISTER_CONVERTIBLE_P ().

2004-02-17  Martin Hunt  <hunt@@redhat.com>

	* generic/gdbtk-register.c (Gdbtk_Register_Init): Replace
	calls to register_gdbarch_swap with deprecated_register_gdbarch_swap.

	* library/srcwin.itb: Remove an apparently redundant call
	to gdbtk_locate_main and location. This actually broke in
	situations where no source files were found.
@


1.354
log
@        * library/download.ith (completed_steps): New variable.
        * library/download.itb (Download::constructor): Remove
        "-fraction" option from iwidgets feedback widget. It's not a valid
        option!
        (update_download): Compute the step number and use that to
        update the feedback widget.
        (done): Use completed_steps to figure out how many steps
        the dumb feedback meter needs to show full.
@
text
@d1 6
@


1.353
log
@        * generic/gdbtk-wrapper.c (wrap_type_print): Use value_type instead
        of VALUE_TYPE.
        * generic/gdbtk-cmds.c (gdb_eval): Likewise.
@
text
@d1 12
@


1.352
log
@2004-10-31  David Lecomber <dsl@@sources.redhat.com>
	* generic/gdbtk-register.c: Add message parameter
	to call of get_selected_frame.
@
text
@d1 6
@


1.351
log
@2004-08-27  Martin Hunt  <hunt@@redhat.com>

	* library/ipc.tcl: New file.
	* library/ipcpref.ith: New file.
	* library/ipcpref.itb: New file.

	* library/srcwin.itb (SrcWin::inferior): Call ipc
	send if enabled.

	* library/prefs.tcl (pref_set_defaults): Enable color
	schemes by default. Add IPC defaults.

	* library/srcbar.itcl (create_pref_menu): Create
	"Advanced" cascade menu and put "Edit Color Schemes"
	and "IPC Support" under it.

	* library/managedwin.itb (ManagedWin::destructor):
	If IPC enabled then send "quit" on exit.

	* library/main.tcl: Start IPC if enabled.

	* library/prefs.tcl (pref_set_defaults): Add IPC defaults.

	* library/gdbmenubar.itcl (menubar_get_current_menu):
	New method.
@
text
@d1 4
@


1.350
log
@Fix build failure.

	* generic/gdbtk-register.c (get_register_size): Use
	register_size() instead of DEPRECATED_REGISTER_RAW_SIZE.
	(get_register): Likewise.
	(register_changed_p): Likewise.
@
text
@d1 26
@


1.349
log
@2004-07-02  Martin Hunt  <hunt@@redhat.com>

	* library/targetselection.itb: Use /dev/comX for
	cygwin instead of just comX.

	* library/interface.tcl (gdbtk_tcl_preloop): Set baud rate.
@
text
@d1 7
@


1.348
log
@2004-07-02  Martin Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (symtab_to_filename): New function. Like
	symtab_to_fullname() but returns the filename if the fullname
	cannot be found.

	* generic/gdbtk-cmds.c (gdb_find_file_command): Revert
	patch of 2004-06-11. Use symtab_to_filename() again.
	(gdb_loc): Ditto.
	(gdb_loadfile): Ditto.
	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Ditto.
	(gdb_get_tracepoint_info): Ditto.

	* generic/gdbtk-cmds.h: Declare symtab_to_filename().
@
text
@d3 7
@


1.347
log
@2004-06-26  Andrew Cagney  <cagney@@gnu.org>

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Call
	deprecated_set_gdb_event_hooks.
@
text
@d1 15
@


1.346
log
@2004-06-25  Andrew Cagney  <cagney@@gnu.org>

	* generic/gdbtk.h: "ui_loop_hook" was deprecated, update.
	* generic/gdbtk-hooks.c (gdbtk_add_hooks, x_event): Ditto.
	* generic/gdbtk-cmds.c: Ditto.
@
text
@d1 5
@


1.345
log
@2004-06-24  Andrew Cagney  <cagney@@gnu.org>

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Update references to
	pre_add_symbol_hook and post_add_symbol_hook, both deprecated.
	* library/interface.tcl (gdbtk_memory_changed): Update comments.
@
text
@d1 6
@


1.344
log
@2004-06-24  Andrew Cagney  <cagney@@gnu.org>

	* generic/gdbtk-hooks.c (ui_loop_hook, pre_add_symbol_hook)
	(post_add_symbol_hook, selected_frame_level_changed_hook): Delete
	extern declarations.
@
text
@d3 6
@


1.343
log
@	* generic/gdbtk-cmds.c (gdb_load_info): Use bfd_get_section_size
	instead of bfd_get_section_size_before_reloc.
@
text
@d1 6
@


1.342
log
@2004-06-11  Martin Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_find_file_command): Use
	symtab_to_fullname() instead of symtab_to_filename().
	(gdb_loc): Ditto.
	(gdb_loadfile): Ditto.
	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Ditto.
	(gdb_get_tracepoint_info): Ditto.

	* generic/gdbtk-register.c (get_register): Simplify and remove
	references to DEPRECATED_REGISTER_CONVERT_TO_VIRTUAL.
@
text
@d1 5
@


1.341
log
@2004-05-27  Martin Hunt  <hunt@@redhat.com>

	* library/tdump.tcl (build_win): Remove old nonworking
	code to select scrolledtext mode.  Just use "dynamic".
@
text
@d1 12
@


1.340
log
@NOTE: This needs fixing. Shouldn't be difficult, but it will be tedious.
        * generic/gdbtk-hooks.c (gdbtk_add_hooks): "Update" deprecated hooks.
        "Houston... We have a problem."
        * generic/gdbtk-interp.c (gdbtk_interpreter_resume): Likewise.
        * generic/gdbtk.c (gdbtk_init_1): Likewise.
@
text
@d1 5
@


1.339
log
@.
@
text
@d1 7
@


1.338
log
@.
@
text
@d1 5
@


1.337
log
@2004-04-05  Martin Hunt  <hunt@@redhat.com>

	* library/session.tcl: Make hostname and portname
	session-dependent. Add gdb_bg_num (the color
	scheme number) as a per-session variable.

	* library/prefs.tcl (pref_read): If color schemes are in use,
	set colors based on the current scheme.
	(pref_save): Add "bg" section.
	(pref_set_defaults): Define new variable gdb/use_color_schemes
	and define 16 default background colors.

	* library/managedwin.itb (ManagedWin::window_name): Append
	window "instance" string to window name.
	(ManagedWin::window_instance): Set window instance string.

	* library/debugwin.itb: Add a reconfig method to restore
	unique black textbackground, overriding color scheme.

	* library/csprefs.itb:
	* library/csprefs.ith: New files. Implement color scheme
	preferences.

	* library/util.tcl (set_bg_colors): New function.
	(r_setcolors): New function.

	* library/regwin.itb (_prefs_changed): Deleted.
	(reconfig): New function.  Updates tkTable color tags
	if color scheme changes.
	* library/regwin.ith: Update to reflect above changes.

	* library/srcbar.itcl (create_pref_menu): Add pulldown
	menus for "Edit Color Schemes..." and "Use Color Schemes".
	(reconfig): Fix up menu items for color schemes.

	* library/globalpref.itb (_init_var): Add
	gdb/use_color_schemes to variable list.
	(_build_win): Add a checkbutton to enable/disable
	color schemes.

	* library/gdbmenubar.itcl (menubar_add_cascade): Add a class
	argument so cascade menus can be managed by class too.

	* library/interface.tcl (gdbtk_tcl_fputs): Check for
	existence of gdbtk_state(console).  Stops annoying error
	messages.
	(gdbtk_tcl_fputs_error): Ditto.
	(gdbtk_tcl_fputs_log): Ditto.
@
text
@d1 5
d8 1
a8 1
	* library/session.tcl: Make hostname and portname 
d11 1
a11 1
	
d28 1
a28 1
	
d31 1
a31 1
	
d36 1
a36 1
	
d40 2
a41 2
	
	* library/globalpref.itb (_init_var): Add 
d45 2
a46 2
	
	* library/gdbmenubar.itcl (menubar_add_cascade): Add a class 
d49 2
a50 2
	* library/interface.tcl (gdbtk_tcl_fputs): Check for 
	existence of gdbtk_state(console).  Stops annoying error 
d53 1
a53 1
	(gdbtk_tcl_fputs_log): Ditto.	
d58 1
a58 1
	register was requested, just return it without validating it 
d67 1
a67 1
	* library/srcwin.itb: Remove an apparently redundant call 
@


1.336
log
@2004-03-29  Martin Hunt  <hunt@@redhat.com>

	* generic/gdbtk-register.c (map_arg_registers): If a specific
	register was requested, just return it without validating it
	has a name.
	(get_register): Check DEPRECATED_REGISTER_CONVERTIBLE_P ().
@
text
@d1 49
@


1.335
log
@Moved ChangeLog to ChangeLog-2003
@
text
@d1 7
d14 1
a14 1
	to gdbtk_locate_main and location. This actually broken
@


1.334
log
@2004-02-17  Martin Hunt  <hunt@@redhat.com>

	* generic/gdbtk-register.c (Gdbtk_Register_Init): Replace
	calls to register_gdbarch_swap with deprecated_register_gdbarch_swap.

	* library/srcwin.itb: Remove an apparently redundant call
	to gdbtk_locate_main and location. This actually broken
	situations where no source files were found.
@
text
@a8 432

2003-12-17  Jeff Johnston  <jjohnstn@@redhat.com>

	* generic/gdbtk-bp.c: Change calls to decode_line_1 to add
	new NULL parameter.
	* generic/gdbtk-cmds.c: Ditto.
	* generic/gdbtk-stack.c: Ditto.

2003-12-11  Jim Blandy  <jimb@@redhat.com>

	* library/prefs.tcl (pref_read): The section marker or the word
	'option' must be the first thing on the line; they don't count if
	they appear in the middle of the line.

2003-11-24  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk.c (target_is_native): Replace STREQ by strcmp.
	* generic/gdbtk-cmds.c (gdb_stop): Replace STREQ by strcmp.
	(gdb_search): Replace STREQN by strncmp and DEPRECATED_SYMBOL_NAME
	by SYMBOL_LINKAGE_NAME.
	* generic/gdbtk-varobj.c (variable_format): Replace STREQN by
	strncmp.

2003-11-11  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Replace use of
	BREAKPOINT->address by BREAKPOINT->loc->address.
	(gdb_get_breakpoint_info): Ditto.

2003-10-06  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk-register.c (get_register_size): Replace
	REGISTER_RAW_SIZE by DEPRECATED_REGISTER_RAW_SIZE.
	(get_register, register_changed_p): Ditto.

2003-09-30  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk-register.c (get_register): Replace
	REGISTER_VIRTUAL_SIZE by
	DEPRECATED_REGISTER_VIRTUAL_SIZE.

2003-09-08  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-cmds.c: Include "disasm.h".
	(gdbtk_load_asm): Use "gdb_print_insn" instead of
	TARGET_PRINT_INSN .
	(gdb_disassemble_driver): Delete code referencing
	"deprecated_tm_print_insn_info".  Delete "di" and "di_initialized"
	and any code initializing those variables.  Pass NULL as "di"
	parameter to "print_asm_fn".
	(disassemble_from_exec): Mention that it is unused.

2003-08-05  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-register.c (gdb_reggrouplist): Update, use
	reggroup_next.
	(gdb_reggroup): Ditto.

2003-08-04  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk.c (gdbtk_source_start_file): Add "%s" first
	argument to error call.
	(tk_command): Ditto.
	(view_command): Ditto.

2003-07-29  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_option_db): On Windows, fix 
	highlighting of buttons.  On Unix, fix highlighting of
	menus.

2003-07-10  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_option_db): Only set 
	activeBackground for Unix.

2003-07-02  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_option_db): Only
	set checkbutton select color for Unix.  Fixes Windows
	checkbutton problem.

2003-06-26  Keith R Seitz  <keiths@@redhat.com>

	From Roland Schwingel <Roland.Schwingel@@onevision.de>:
	* generic/gdbtk-cmds.c (gdb_find_file_command): If filename
	is already an absolute filename, try stat'ing it before searching
	symtabs.

2003-06-13  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (load_gnome_file): Fix parsing
	of gtk theme files so Red Hat 9 (and others) GNOME colors 
	are correct.

2003-06-11  David Carlton  <carlton@@bactrian.org>

	* generic/gdbtk-stack.c: Include dictionary.h.
	(gdb_block_vars): Update use of ALL_BLOCK_SYMBOLS.
	(gdb_get_blocks, gdb_get_vars_command): Ditto.
	* generic/gdbtk-cmds.c: Include dictionary.h.
	(gdb_listfuncs): Update use of ALL_BLOCK_SYMBOLS.

2003-06-11  David Carlton  <carlton@@bactrian.org>

	* generic/gdbtk-register.c (get_register): REGISTER_CONVERTIBLE
	and REGISTER_CONVERT_TO_VIRTUAL are deprecated.

2003-05-12  Elena Zannoni  <ezannoni@@redhat.com>

        * generic/gdbtk-cmds.c (gdb_search): Replace namespace_enum
        with domain_emum, and *_NAMESPACE with *_DOMAIN.

2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-register.c (get_register): Replace
	MAX_REGISTER_VIRTUAL_SIZE and MAX_REGISTER_RAW_SIZE with
	MAX_REGISTER_SIZE.
	(register_changed_p, setup_architecture_data): Ditto.

2003-04-30  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_disassemble_driver): Instead of
	TARGET_PRINT_INSN_INFO, "dis_asm_memory_error",
	"dis_asm_read_memory", and "dis_asm_print_address", use
	"deprecated_tm_print_insn_info"

2003-04-11  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-stack.c (get_frame_name): Use get_frame_pc and
	get_next_frame.

2003-03-18  Keith Seitz  <keiths@@redhat.com>

	From Nick Kelsey <nickk@@ubicom.com>:
	* process.itb (build_win): Removed ide_sizebox instantiation that is
	no longer required and is causing errors for win hosts.
	* tdump.tcl (build_win): Ditto.
	* locals.tcl (build_win): Removed ide_sizebox instantiation that is
	no longer required and already commented out.
	* regwin.itb (build_win): Ditto.
	* srcwin.itb (constructor): Ditto.
	* stackwin.itb (constructor): Ditto.
	* watch.tcl (constructor): Ditto.

2003-03-24  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-register.c (get_register_types): Use 
	register_type instead of REGISTER_VIRTUAL_TYPE.
	(get_register): Ditto.

2003-03-17  Keith R Seitz  <keiths@@redhat.com>

	* generic/gdbtk-register.c (get_register): Use frame_register
	instead of get_saved_register (which was deleted from gdb).

2003-03-06  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-interp.c (gdbtk_interpreter_init): Remove
	unused variable.

	* generic/gdbtk-cmds.c (gdb_update_mem): Remove unused variable.
	(gdbtk_print_source): Deleted.
	(gdbtk_print_asm): Deleted.

2003-03-06  Martin M. Hunt  <hunt@@redhat.com>
	
	* generic/gdbtk-bp.c (gdb_get_tracepoint_info): Return CORE_ADDR.

2003-03-06  Martin M. Hunt  <hunt@@redhat.com>
	
	* generic/gdbtk-cmds.c (gdb_disassemble): Deleted.
	(sprintf_append_element_to_obj): Deleted.

	* generic/gdbtk-bp.c (get_breakpoint_commands): Use
	Tcl_ListObjAppendElement() instead of 
	sprintf_append_element_to_obj().
	
2003-03-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (SrcTextWin::FillAssembly): 
	Remove unused variables asm_lo_addr and asm_hi_addr.
	(FillMixed): Ditto.

2003-03-05  Martin M. Hunt  <hunt@@redhat.com>	

	* generic/gdbtk-cmds.c (Gdbtk_Init): Create gdb_CA_to_TAS.
	(gdb_load_disassembly): Now takes CORE_ADDRs. Returns CORE_ADDRs
	for low and high.
	(gdbtk_load_asm): Use CORE_ADDRs.
	(gdb_loc): Return CORE_ADDRs.
	(gdb_entry_point): Return CORE_ADDR.
	(gdb_incr_addr): Update description.
	(gdb_CA_to_TAS): New function. Takes a CORE_ADDR and returns 
	a target sddress string.

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Change to
	take a CORE_ADDR.
	(gdb_get_breakpoint_info): Returns a CORE_ADDR.
	(gdb_set_bp_addr): Takes a CORE_ADDR.
	
	* library/bpwin.itb (bp_add): Call gdb_CA_to_TAS before 
	displaying address.
	(bp_modify): Ditto.

	* library/srcwin.itb (location): Call gdb_CA_to_TAS before 
	displaying address. Don't add "0x" in front of address.
	(set_execution_status): Call gdb_CA_to_TAS before 
	displaying address. Don't call [gdb_cmd printf] to format
	output. Weird.

2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* generic/gdbtk.h: Replace all instances of SYMBOL_NAME by
	DEPRECATED_SYMBOL_NAME.
	* generic/gdbtk-stack.c, generic/gdbtk-cmds.c: Ditto.
	* generic/gdbtk-stack.c, generic/gdbtk-cmds.c: Update copyright.

2003-02-21  Tom Tromey  <tromey@@redhat.com>

	* generic/gdbtk-interp.c (gdbtk_interpreter_init): Declare locals
	before code.

2003-02-21  Daniel Jacobowitz  <drow@@mvista.com>

	* generic/gdbtk-stack.c (gdb_get_blocks, gdb_block_vars)
	(gdb_get_vars_command): Handle LOC_COMPUTED and LOC_COMPUTED_ARG.

2003-02-20  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_search): Change SYMBOL_SOURCE_NAME
	to SYMBOL_PRINT_NAME to track recent changes in gdb.

2003-02-20  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* generic/gdbtk-cmds.c: Add missing "block.h" include.
	generic/gdbtk-stack.c: Ditto.
	generic/gdbtk-wrapper.c: Ditto.

2003-02-18  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-main.c (main): Change name of intepreter to "insight".
	* generic/gdbtk.h: Add ifdef wrappers.
	(gdbtk_init): Declare.
	(gdbtk_source_start_file): Declare.
	* generic/gdbtk.c (gdbtk_init): Export.
	Reomve init_ui_hook stuff.
	Do not add hooks here anymore (moved into interps).
	Do not muck with gdbk_stdout et al (moved into interps).
	(gdbtk_source_start_file): Code ripped out of gdbtk_init
	which deals with sourcing the main startup file.
	(gdbtk_init_1): Hack: New function.
	(argv0): Hack: New static global.
	(tk_init): Moved to gdbtk-interps.c.
	(gdbtk_resume): Likewise.
	(gdbtk_suspend): Likewise.
	(gdbtk_prompt_p): Likewise.
	(gdbtk_exec): Likewise.
	(gdbtk_command_loop): Likewise.
	(_initialize_gdbtk): Move interpreter stuff to gdbtk-interps.c.
	Hack: Add new init_ui_hook.
	* generic/gdbtk-interps.c: New file.

2003-02-17  Christopher Faylor  <cgf@@redhat.com>

	Revert below change.

2003-02-17  Christopher Faylor  <cgf@@redhat.com>

	* gdbtk/gdbtk.c (tk_procs): Make file global.  Declare at top.
	(_initialize_gdbtk): Move interp_add from here.
	(gdb_tk): Call interp_add here.  Pass correct uiout to interp_new.

2003-02-14  Keith Seitz  <keiths@@redhat.com>

	From Chris Faylor <cgf@@redhat.com>:
	* generic/gdbtk-main.c (main): Initialize args.interpreter_p.

2003-02-14  Martin M. Hunt  <hunt@@redhat.com>

	* library/globalpref.itb (GlobalPref::_change_icons): Fix
	curselection call for combobox.

2003-02-12  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-hooks.c (tk_command_loop): Move function ...
	* generic/gdbtk.c (gdbtk_command_loop): ... to here.  Add data
	parameter.

	* generic/gdbtk.c: Include "interps.h".
	(_initialize_gdbtk): Register the "gdbtk" interpreter.  Don't set
	init_ui_hook.
	(gdbtk_init): Change parameter to a void data pointer.
	(tk_init, gdbtk_resume, gdbtk_suspend): New functions.
	(gdbtk_prompt_p, gdbtk_exec): New functions.

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Don't set
	command_loop_hook.  Update copyright.
	
2003-02-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/help/images/browser1.png: New file.
	* library/help/images/browser2.png: New file.	

2003-02-11  Keith R Seitz  <keiths@@redhat.com>

	* generic/gdbtk-register.c (register_changed_p): If the selected
	frame is NULL, do not call frame_register_read, since that will
	now cause an internal error.

2003-02-10  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-varobj.c (gdb_variable_command): Ditto for
	`commands'.
	(variable_type): Ditto for `first'.
	(variable_obj_command): Ditto.
	(variable_create): Ditto for create_options.
	(variable_type): Ditto for `last'.  Use `string' and not `first'
	when modifying the buffer.
	(struct disassembly_client_data ): Ditto for `asm_argv'
	* generic/gdbtk-register.c (gdb_register_info): Ditto for
	`commands'.
	* generic/gdbtk-hooks.c (tk_command_loop): Ditto for `msg'.
	* generic/gdbtk-cmds.c (gdb_search): Ditto for `switches'.
	(gdbtk_load_source): Ditto for `text_argv'.
	(struct disassembly_client_data ): Ditto for `source_argv'.
	(gdbtk_load_asm): Ditto for `text_argv'.
	(struct disassembly_client_data ): Ditto for `asm_argv'
	(gdb_loadfile): Ditto for `text_argv'.
	* generic/gdbtk.c (TclDebug): Make `v' a constant pointer.
	(gdbtk_init): Ditto for `old_chain', `src_path', `msg', and
	`lib_path'.

2003-02-10  Martin M. Hunt  <hunt@@redhat.com>

	* library/browserwin.itb: Set textbackground option to
	$::Colors(textbg) instead of "white".

2003-02-10  Martin M. Hunt  <hunt@@redhat.com>	

	* library/interface.tcl (gdbtk_attach_native): Don't force the user
	to choose an exec file when attaching.

	* library/attachdlg.itb: Some fixes to work with latest iwidgets.

2003-02-10  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/prefs.tcl (pref_set_defaults): Remove prefs
	gdb/browser/width, gdb/browser/top_height, gdb/browser/view_height,
	gdb/browser/view_is_open. Add gdb/browser/layout.

	* library/browserwin.ith: Update declarations to match 
	changes in browserwin.itb.

	* library/browserwin.itb (constructor): Don't set toplevel
	bindings. Set _layout from prefs.
	(destructor): Don't check $resize_after. Don't save view_is_open.
	(_build_win): Create a popup menu and bind to button 3.
	Split the rest into 4 functions; _build_file_frame, 
	_build_filter_frame, _build_function_frame, and _build_view_frame.
	Pack these 4 frames according to $_layout.
	(_toggle_more): Deleted.
	(_bind_toplevel): Deleted.
	(_do_resize): Deleted.
	(_resize): Deleted.
	(_fill_source): Always fill because source is always visible.
	(_fill_funcs_combo): Limit width of combo to 40 chars.
	(_build_filter_frame): New function.
	(_build_file_frame): New function.
	(_build_function_frame): New function.
	(_build_view_frame): New function.
	(_switch_layout): New function. Toggle between layouts.

	* library/tclIndex: Rebuilt.
	
	* library/help/browser.html: Rewrite.

2003-02-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/targetselection.itb (TargetSelection::build_win): Remove 
	duplicate label.

2003-02-03  Martin M. Hunt  <hunt@@redhat.com>	

	* library/globalpref.itb, library/mempref.itb, library/srcpref.itb,
	library/srcwin.itb, library/targetselection.itb, library/tracedlg.tcl:
	Set background color of comboboxes to Colors(textbg).

	* library/main.tcl: Load combobox version 2.2.

	* library/prefs.tcl: Minor optimization. Change order of main_names
	to have the most common, "main", first.
	
2003-02-03  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/targetselection.itb (TargetSelection::port_list): Keep
	checking ports on Windows until we can open no more. Replaces
	fixed limit of 9.

2003-02-03  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/session.tcl (_recreate_bps): Catch errors.

2003-02-03  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/interface.tcl (gdbtk_locate_main): Rewrite for efficiency.
	No longer uses gdb_search.  Caches result. 
	(initialize_gdbtk): Initialize gdb_locate_main cache.
	* library/main.tcl: Call initialize_gdbtk after loading prefs.

2003-01-21  Martin M. Hunt  <hunt@@redhat.com>
	* library/main.tcl: Don't require iwidgets 3.0.

	* library/console.itb (Console::_build_win): Rename
	tkTextClosestGap to tk::TextClosestGap. Rename tkCancelRepeat
	to tk::CancelRepeat. Rename tkPriv to tk::Priv. Needed for tk 8.4.1.

	* library/bpwin.itb (BpWin::build_win): Don't
	create sizebox.
	* library/locals.tcl (build_win): Ditto.
	* library/regwin.itb (RegWin::_build_win): Ditto.
	* library/srcwin.itb (SrcWin::constructor): Ditto.
	* library/stackwin.itb (StackWin::build_win): Ditto.
	* library/watch.tcl (build_win): Ditto.
	
	* generic/gdbtk.c (gdbtk_init): Look for iwidgets in
	"iwidgets" instead of "iwidgets3.0.0".
	Don't call ide_create_sizebox_command.

	* ChangeLog: New log for 2003.
	* ChangeLog-2002: Renamed from ChangeLog. 

@


1.333
log
@
2003-12-17  Jeff Johnston  <jjohnstn@@redhat.com>

        * generic/gdbtk-bp.c: Change calls to decode_line_1 to add
        new NULL parameter.
        * generic/gdbtk-cmds.c: Ditto.
        * generic/gdbtk-stack.c: Ditto.
@
text
@d1 9
@


1.332
log
@* library/prefs.tcl (pref_read): The section marker or the word
'option' must be the first thing on the line; they don't count if
they appear in the middle of the line.
@
text
@d1 7
@


1.331
log
@2003-11-24  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk.c (target_is_native): Replace STREQ by strcmp.
	* generic/gdbtk-cmds.c (gdb_stop): Replace STREQ by strcmp.
	(gdb_search): Replace STREQN by strncmp and DEPRECATED_SYMBOL_NAME
	by SYMBOL_LINKAGE_NAME.
	* generic/gdbtk-varobj.c (variable_format): Replace STREQN by
	strncmp.
@
text
@d1 6
@


1.330
log
@2003-11-11  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Replace use of
	BREAKPOINT->address by BREAKPOINT->loc->address.
	(gdb_get_breakpoint_info): Ditto.
@
text
@d1 9
@


1.329
log
@2003-10-06  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk-register.c (get_register_size): Replace
	REGISTER_RAW_SIZE by DEPRECATED_REGISTER_RAW_SIZE.
	(get_register, register_changed_p): Ditto.
@
text
@d1 6
@


1.328
log
@2003-09-30  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk-register.c (get_register): Replace
	REGISTER_VIRTUAL_SIZE by
	DEPRECATED_REGISTER_VIRTUAL_SIZE.
@
text
@d1 6
@


1.327
log
@2003-09-08  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-cmds.c: Include "disasm.h".
	(gdbtk_load_asm): Use "gdb_print_insn" instead of
	TARGET_PRINT_INSN .
	(gdb_disassemble_driver): Delete code referencing
	"deprecated_tm_print_insn_info".  Delete "di" and "di_initialized"
	and any code initializing those variables.  Pass NULL as "di"
	parameter to "print_asm_fn".
	(disassemble_from_exec): Mention that it is unused.
@
text
@d1 6
@


1.326
log
@2003-08-05  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-register.c (gdb_reggrouplist): Update, use
	reggroup_next.
	(gdb_reggroup): Ditto.
@
text
@d1 11
@


1.325
log
@2003-08-04  David Carlton  <carlton@@kealia.com>

	* charset.c (cached_iconv_convert): Add __FILE__ and __LINE__ args
	to internal_error call.
	* source.c (forward_search_command): Add "%s" format argument.
	(reverse_search_command): Ditto.
	* top.c (quit_confirm): Ditto.
	* cli/cli-setshow.c (do_setshow_command): Ditto.
	* cp-valprint.c (cp_print_class_method): Replace
	{f,}printf_{un,}filtered by {f,}puts_{un,}filtered.
	(cp_print_class_member): Ditto.
	* event-top.c (command_line_handler): Ditto.
	* linux-proc.c (linux_info_proc_cmd): Ditto.
	* p-typeprint.c (pascal_type_print_base): Ditto.
	* p-valprint.c (pascal_object_print_class_method): Ditto.
	(pascal_object_print_class_member): Ditto.
	* printcmd.c (print_scalar_formatted,printf_command): Ditto.
	* remote.c (remote_cisco_section_offsets): Ditto.
	* top.c (command_line_input): Ditto.
	* utils.c (vwarning,error_stream,quit): Ditto.
	* valprint.c (print_floating,print_binary_chars)
	(print_octal_chars,print_decimal_chars,print_hex_chars): Ditto.

2003-08-04  David Carlton  <carlton@@kealia.com>

	* mi-main.c (mi_error_last_message): Add "%s" second argument to
	xasprintf call.

2003-08-04  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk.c (gdbtk_source_start_file): Add "%s" first
	argument to error call.
	(tk_command): Ditto.
	(view_command): Ditto.
@
text
@d1 6
@


1.324
log
@2003-07-29  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_option_db): On Windows, fix
	highlighting of buttons.  On Unix, fix highlighting of
	menus.
@
text
@d1 7
@


1.323
log
@2003-07-02  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_option_db): Only
	set checkbutton select color for Unix.  Fixes Windows
	checkbutton problem.
@
text
@d1 11
@


1.322
log
@        From Roland Schwingel <Roland.Schwingel@@onevision.de>:
        * generic/gdbtk-cmds.c (gdb_find_file_command): If filename
        is already an absolute filename, try stat'ing it before searching
        symtabs.
@
text
@d1 6
@


1.321
log
@2003-06-13  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (load_gnome_file): Fix parsing
	of gtk theme files so Red Hat 9 (and others) GNOME colors
	are correct.
@
text
@d1 7
@


1.321.2.1
log
@        From Roland Schwingel <Roland.Schwingel@@onevision.de>:
        * generic/gdbtk-cmds.c (gdb_find_file_command): If filename
        is already an absolute filename, try stat'ing it before searching
        symtabs.
@
text
@a0 7
2003-06-26  Keith R Seitz  <keiths@@redhat.com>

        From Roland Schwingel <Roland.Schwingel@@onevision.de>:
        * generic/gdbtk-cmds.c (gdb_find_file_command): If filename
        is already an absolute filename, try stat'ing it before searching
        symtabs.

@


1.321.2.2
log
@2003-07-03  Martin Hunt  <hunt@@redhat.com>

        * library/prefs.tcl (pref_set_option_db): Only
        set checkbutton select color for Unix.  Fixes Windows
        checkbutton problem.
@
text
@a0 6
2003-07-03  Martin Hunt  <hunt@@redhat.com>
 
        * library/prefs.tcl (pref_set_option_db): Only
        set checkbutton select color for Unix.  Fixes Windows
        checkbutton problem.
 
@


1.321.2.3
log
@2003-07-29  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_option_db): On Windows, fix
	highlighting of buttons.  On Unix, fix highlighting of
	menus.
@
text
@a0 11
2003-07-29  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_option_db): On Windows, fix 
	highlighting of buttons.  On Unix, fix highlighting of
	menus.

2003-07-10  Martin Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_option_db): Only set 
	activeBackground for Unix.

@


1.320
log
@2003-06-11  David Carlton  <carlton@@bactrian.org>

	* dictionary.h: New.
	* dictionary.c: New.
	* block.h: Add opaque declaration for struct dictionary.
	(struct block): Add 'dict' member; delete 'hashtable', 'nsyms',
	'sym' members.
	(BLOCK_DICT): New macro.
	Delete macros BLOCK_HASHTABLE, BLOCK_NSYMS, BLOCK_SYM,
	BLOCK_BUCKETS, BLOCK_BUCKET, BLOCK_HASHTABLE_SIZE,
	BLOCK_SHOULD_SORT.
	(ALL_BLOCK_SYMBOLS): Update definition.
	* Makefile.in (SFILES): Add dictionary.c.
	(dictionary_h): New.
	(COMMON_OBS): Add dictionary.o.
	(dictionary.o): New.
	(ada-lang.o): Depend on dictionary_h.
	(buildsym.o, coffread.o, jv-lang.o, mdebugread.o, objfiles.o)
	(stack.o, symmisc.o, symtab.o, tracepoint.o, valops.o)
	(mi-cmd-stack.o): Ditto.
	(gdbtk-cmds.o): Update dependencies.
	(gdbtk-stack.o): Ditto.
	* ada-lang.c: Include dictionary.h.
	(symtab_for_sym): Update uses of ALL_BLOCK_SYMBOLS.
	(fill_in_ada_prototype, debug_print_block): Ditto.
	(ada_add_block_symbols): Update uses of ALL_BLOCK_SYMBOLS; replace
	explicit iteration by use of ALL_BLOCK_SYMBOLS.  Delete variable
	'is_sorted'.
	* mdebugread.c: Include dictionary.h.
	(struct parse_stack): Delete 'maxsyms' member.
	(parse_symbol): Update calls to new_block.  Delete calls to
	shrink_block.  Use dictionary methods.
	(psymtab_to_symtab_1): Delete calls to sort_symtab_syms.
	Update calls to new_symtab.  Don't maintain maxsyms data.
	(mylookup_symbol): Update use of ALL_BLOCK_SYMBOLS.
	(add_symbol): Just call dict_add_symbol.
	(new_symtab): Delete 'maxsyms' argument.
	(new_symtab): Update calls to new_block.
	(new_block): Delete 'maxsyms' argument; add 'function' argument.
	(shrink_block): Delete function.
	(fixup_sigtramp): Update call to new_block.  Add symbol via
	dict_add_symbol.
	* jv-lang.c: Include dictionary.h.
	(get_java_class_symtab): Set the BLOCK_DICT of the blocks
	appropriately.  Set class_symtab->free_func.  Make sure the
	blockvector is big enough to hold two blocks.
	(add_class_symtab_symbol): Use dictionary methods.
	(free_class_block): New function.
	(type_from_class): Replace explicit iteration by
	ALL_BLOCK_SYMBOLS.
	* symtab.h (struct symtab): Replace 'free_ptr' method by
	'free_func'.
	* dwarf2read.c (psymtab_to_symtab_1): Delete call to
	sort_symtab_syms.
	* dwarfread.c (psymtab_to_symtab_1): Delete call to
	sort_symtab_syms.
	* coffread.c (coff_symfile_read): Delete call to sort_symtab_syms.
	Include dictionary.h.
	(patch_opaque_types): Update use of ALL_BLOCK_SYMBOLS.
	* dbxread.c (dbx_psymtab_to_symtab_1): Delete call to
	sort_symtab_syms.
	* objfiles.c: Include dictionary.h.
	(objfile_relocate): Update use of ALL_BLOCK_SYMBOLS.
	* buildsym.c: Include dictionary.h.
	(finish_block): Use dictionary methods.
	(end_symtab): Set free_func to NULL, not free_ptr.
	* tracepoint.c: Include dictionary.h.
	(add_local_symbols): Update use of ALL_BLOCK_SYMBOLS.
	(scope_info): Ditto.
	* stack.c: Include dictionary.h.
	(print_block_frame_locals): Update use of ALL_BLOCK_SYMBOLS.
	(print_block_frame_labels, print_frame_arg_vars)
	(print_frame_args): Ditto.
	* symmisc.c (free_symtab_block): Use dictionary methods.
	(dump_symtab): Ditto.
	(free_symtab): Replace use of 'free_ptr' by 'free_func'.
	Include	dictionary.h.
	* symfile.h: Delete declarations of sort_block_syms,
	sort_symtab_syms.
	* symfile.c (sort_block_syms): Delete.
	(sort_symtab_syms): Delete.
	* symtab.c: Include dictionary.h.
	(lookup_block_symbol): Use dictionary iterators.
	(find_pc_sect_symtab): Update use of ALL_BLOCK_SYMBOLS.
	(search_symbols, make_symbol_completion_list): Ditto.
	(make_symbol_overload_list): Ditto.
	* valops.c (value_of_local): Use dict_empty.
	Include dictionary.h.

2003-06-11  David Carlton  <carlton@@bactrian.org>

	* generic/gdbtk-stack.c: Include dictionary.h.
	(gdb_block_vars): Update use of ALL_BLOCK_SYMBOLS.
	(gdb_get_blocks, gdb_get_vars_command): Ditto.
	* generic/gdbtk-cmds.c: Include dictionary.h.
	(gdb_listfuncs): Update use of ALL_BLOCK_SYMBOLS.

2003-06-11  David Carlton  <carlton@@bactrian.org>

	* mi-cmd-stack.c: Include dictionary.h.
	(list_args_or_locals): Update use of ALL_BLOCK_SYMBOLS.
@
text
@d1 6
@


1.319
log
@2003-06-11  David Carlton  <carlton@@bactrian.org>

	* generic/gdbtk-register.c (get_register): REGISTER_CONVERTIBLE
	and REGISTER_CONVERT_TO_VIRTUAL are deprecated.
@
text
@d3 8
@


1.318
log
@2003-05-12  Elena Zannoni  <ezannoni@@redhat.com>

        * generic/gdbtk-cmds.c (gdb_search): Replace namespace_enum
        with domain_emum, and *_NAMESPACE with *_DOMAIN.
@
text
@d1 5
@


1.317
log
@2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-register.c (get_register): Replace
	MAX_REGISTER_VIRTUAL_SIZE and MAX_REGISTER_RAW_SIZE with
	MAX_REGISTER_SIZE.
	(register_changed_p, setup_architecture_data): Ditto.
@
text
@d1 5
@


1.316
log
@2003-04-30  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh (deprecated_tm_print_insn_info): Rename
	"tm_print_insn_info".
	(TARGET_PRINT_INSN_INFO): Delete macro.
	(dis_asm_read_memory): Delete function declaration.
	(dis_asm_memory_error, dis_asm_print_address): Ditto.
	(tm_print_insn_info): Delete variable definition.
	(_initialize_gdbarch): Do not initialize "tm_print_insn_info".
	* gdbarch.h, gdbarch.c: Re-generate.
	* d10v-tdep.c (display_trace): Replace "tm_print_insn_info" with
	"deprecated_tm_print_insn_info".
	* mcore-tdep.c (mcore_dump_insn): Ditto.
	* mips-tdep.c (mips_gdbarch_init): Ditto.
	* sparc-tdep.c (_initialize_sparc_tdep): Ditto.
	* v850-tdep.c (v850_scan_prologue, v850_gdbarch_init): Ditto.
	* ia64-tdep.c (_initialize_ia64_tdep): Ditto.
	* printcmd.c (print_insn): Use "deprecated_tm_print_insn_info"
	instead of TARGET_PRINT_INSN_INFO, add comment.
	* s390-tdep.c (s390_get_frame_info): Instead of
	"dis_asm_read_memory", use "deprecated_tm_print_insn_info".
	(s390_check_function_end, s390_is_sigreturn): Ditto.
	* corefile.c (dis_asm_read_memory): Move to "disasm.c".
	(dis_asm_memory_error, dis_asm_print_address): Ditto.
	* disasm.c: Include "gdbcore.h".
	(_initialize_disasm): New function, initialize
	"deprecated_tm_print_insn_info".
	(deprecated_tm_print_insn_info): New variable.
	(dis_asm_read_memory): Moved from "corefile.c", made static.
	(dis_asm_print_address, dis_asm_memory_error): Ditto.
	* Makefile.in (disasm.o): Update dependencies.

2003-04-28  Andrew Cagney  <cagney@@redhat.com>

	* gdbint.texinfo (Target Architecture Definition): Replace
	read_fp, TARGET_READ_FP and FP_REGNUM, with deprecated_read_fp,
	DEPRECATED_TARGET_READ_FP and DEPRECATED_REGNUM.
@
text
@d1 7
@


1.315
log
@2003-04-11  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-stack.c (get_frame_name): Use get_frame_pc and
	get_next_frame.
@
text
@d1 7
@


1.314
log
@        From Nick Kelsey <nickk@@ubicom.com>:
        * process.itb (build_win): Removed ide_sizebox instantiation that is
        no longer required and is causing errors for win hosts.
        * tdump.tcl (build_win): Ditto.
        * locals.tcl (build_win): Removed ide_sizebox instantiation that is
        no longer required and already commented out.
        * regwin.itb (build_win): Ditto.
        * srcwin.itb (constructor): Ditto.
        * stackwin.itb (constructor): Ditto.
        * watch.tcl (constructor): Ditto.
@
text
@d1 5
@


1.313
log
@2003-03-24  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-register.c (get_register_types): Use
	register_type instead of REGISTER_VIRTUAL_TYPE.
	(get_register): Ditto.
@
text
@d1 13
@


1.312
log
@        * generic/gdbtk-register.c (get_register): Use frame_register
        instead of get_saved_register (which was deleted from gdb).
@
text
@d1 6
@


1.311
log
@2003-03-06  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-interp.c (gdbtk_interpreter_init): Remove
	unused variable.

	* generic/gdbtk-cmds.c (gdb_update_mem): Remove unused variable.
	(gdbtk_print_source): Deleted.
	(gdbtk_print_asm): Deleted.
@
text
@d1 5
@


1.310
log
@2003-03-06  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-bp.c (gdb_get_tracepoint_info): Return CORE_ADDR.
@
text
@d3 9
@


1.309
log
@2003-03-06  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_disassemble): Deleted.
	(sprintf_append_element_to_obj): Deleted.

	* generic/gdbtk-bp.c (get_breakpoint_commands): Use
	Tcl_ListObjAppendElement() instead of
	sprintf_append_element_to_obj().
@
text
@d3 4
@


1.308
log
@2003-03-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (SrcTextWin::FillAssembly):
	Remove unused variables asm_lo_addr and asm_hi_addr.
	(FillMixed): Ditto.
@
text
@d1 9
@


1.307
log
@2003-03-05  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (Gdbtk_Init): Create gdb_CA_to_TAS.
	(gdb_load_disassembly): Now takes CORE_ADDRs. Returns CORE_ADDRs
	for low and high.
	(gdbtk_load_asm): Use CORE_ADDRs.
	(gdb_loc): Return CORE_ADDRs.
	(gdb_entry_point): Return CORE_ADDR.
	(gdb_incr_addr): Update description.
	(gdb_CA_to_TAS): New function. Takes a CORE_ADDR and returns
	a target sddress string.

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Change to
	take a CORE_ADDR.
	(gdb_get_breakpoint_info): Returns a CORE_ADDR.
	(gdb_set_bp_addr): Takes a CORE_ADDR.

	* library/bpwin.itb (bp_add): Call gdb_CA_to_TAS before
	displaying address.
	(bp_modify): Ditto.

	* library/srcwin.itb (location): Call gdb_CA_to_TAS before
	displaying address. Don't add "0x" in front of address.
	(set_execution_status): Call gdb_CA_to_TAS before
	displaying address. Don't call [gdb_cmd printf] to format
	output. Weird.
@
text
@d3 6
@


1.306
log
@2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* symtab.h (SYMBOL_NATURAL_NAME): New macro.
	(SYMBOL_LINKAGE_NAME): Ditto.
	(SYMBOL_PRINT_NAME): Use SYMBOL_NATURAL_NAME and
	SYMBOL_LINKAGE_NAME.
	(struct general_symbol_info): Expand comment.
	(DEPRECATED_SYMBOL_NAME): Rename from SYMBOL_NAME.
	(SYMBOL_MATCHES_NAME): Use DEPRECATED_SYMBOL_NAME.
	(SYMBOL_MATCHES_REGEXP): Ditto.
	* symtab.c (symbol_natural_name): New function.
	* objfiles.h: Replace all uses of SYMBOL_NAME by
	DEPRECATED_SYMBOL_NAME.
	* xcoffread.c, valops.c, typeprint.c, tracepoint.c: Ditto.
	* symtab.c, symmisc.c, symfile.c, stack.c, stabsread.c: Ditto.
	* somsolib.c, sol-thread.c, rs6000-tdep.c, p-valprint.c: Ditto.
	* printcmd.c, objfiles.c, objc-lang.c, mipsread.c: Ditto.
	* minsyms.c, mdebugread.c, linespec.c, jv-lang.c: Ditto.
	* i386-tdep.c, i386-linux-tdep.c, hpread.c, hppa-tdep.c: Ditto.
	* gnu-v2-abi.c, f-valprint.c, findvar.c, expprint.c: Ditto.
	* dwarfread.c, dwarf2read.c, dbxread.c, c-valprint.c: Ditto.
	* cp-valprint.c, coffread.c, buildsym.c, breakpoint.c: Ditto.
	* blockframe.c, ax-gdb.c, arm-linux-tdep.c, ada-lang.c: Ditto.
	* ada-exp.y: Ditto.
	* ada-exp.y: Update copyright.
	* sol-thread.c, mipsread.c, jv-lang.c, f-valprint.c: Ditto.
	* cp-valprint.c: Ditto.

2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* generic/gdbtk.h: Replace all instances of SYMBOL_NAME by
	DEPRECATED_SYMBOL_NAME.
	* generic/gdbtk-stack.c, generic/gdbtk-cmds.c: Ditto.
	* generic/gdbtk-stack.c, generic/gdbtk-cmds.c: Update copyright.

2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: Replace all instances of SYMBOL_NAME with
	DEPRECATED_SYMBOL_NAME.  Update copyright.
@
text
@d1 27
@


1.305
log
@	* generic/gdbtk-interp.c (gdbtk_interpreter_init): Declare locals
	before code.
@
text
@d1 7
@


1.304
log
@	* generic/gdbtk-stack.c (gdb_get_blocks, gdb_block_vars)
	(gdb_get_vars_command): Handle LOC_COMPUTED and LOC_COMPUTED_ARG.
@
text
@d1 5
@


1.303
log
@        * generic/gdbtk-cmds.c (gdb_search): Change SYMBOL_SOURCE_NAME
        to SYMBOL_PRINT_NAME to track recent changes in gdb.
@
text
@d1 5
@


1.302
log
@
2003-02-20  Pierre Muller  <muller@@ics.u-strasbg.fr>

	* generic/gdbtk-cmds.c: Add missing "block.h" include.
	generic/gdbtk-stack.c: Ditto.
	generic/gdbtk-wrapper.c: Ditto.
@
text
@d1 5
@


1.301
log
@        * generic/gdbtk-main.c (main): Change name of intepreter to "insight".
        * generic/gdbtk.h: Add ifdef wrappers.
        (gdbtk_init): Declare.
        (gdbtk_source_start_file): Declare.
        * generic/gdbtk.c (gdbtk_init): Export.
        Reomve init_ui_hook stuff.
        Do not add hooks here anymore (moved into interps).
        Do not muck with gdbk_stdout et al (moved into interps).
        (gdbtk_source_start_file): Code ripped out of gdbtk_init
        which deals with sourcing the main startup file.
        (gdbtk_init_1): Hack: New function.
        (argv0): Hack: New static global.
        (tk_init): Moved to gdbtk-interps.c.
        (gdbtk_resume): Likewise.
        (gdbtk_suspend): Likewise.
        (gdbtk_prompt_p): Likewise.
        (gdbtk_exec): Likewise.
        (gdbtk_command_loop): Likewise.
        (_initialize_gdbtk): Move interpreter stuff to gdbtk-interps.c.
        Hack: Add new init_ui_hook.
        * generic/gdbtk-interps.c: New file.
@
text
@d1 6
@


1.300
log
@Revert below change.
@
text
@d1 24
@


1.299
log
@* gdbtk/gdbtk.c (tk_procs): Make file global.  Declare at top.
(_initialize_gdbtk): Move interp_add from here.
(gdb_tk): Call interp_add here.  Pass correct uiout to interp_new.
@
text
@d3 4
@


1.298
log
@From Chris Faylor <cgf@@redhat.com>
	* generic/gdbtk-main.c (main): Correctly initialize args.interpreter_p.
@
text
@d1 6
@


1.297
log
@2003-02-14  Martin M. Hunt  <hunt@@redhat.com>

	* library/globalpref.itb (GlobalPref::_change_icons): Fix
	curselection call for combobox.
@
text
@d1 5
@


1.296
log
@2003-02-12  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-hooks.c (tk_command_loop): Move function ...
	* generic/gdbtk.c (gdbtk_command_loop): ... to here.  Add data
	parameter.
	* generic/gdbtk.c: Include "interps.h".
	(_initialize_gdbtk): Register the "gdbtk" interpreter.  Don't set
	init_ui_hook.
	(gdbtk_init): Change parameter to a void data pointer.
	(tk_init, gdbtk_resume, gdbtk_suspend): New functions.
	(gdbtk_prompt_p, gdbtk_exec): New functions.
	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Don't set
	command_loop_hook.  Update copyright.
@
text
@d1 5
@


1.295
log
@2003-02-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/help/images/browser1.png: New file.
	* library/help/images/browser2.png: New file.
@
text
@d1 16
@


1.294
log
@        * generic/gdbtk-register.c (register_changed_p): If the selected
        frame is NULL, do not call frame_register_read, since that will
        now cause an internal error.
@
text
@d1 5
@


1.293
log
@2003-02-10  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-varobj.c (gdb_variable_command): Ditto for
	`commands'.
	(variable_type): Ditto for `first'.
	(variable_obj_command): Ditto.
	(variable_create): Ditto for create_options.
	(variable_type): Ditto for `last'.  Use `string' and not `first'
	when modifying the buffer.
	(struct disassembly_client_data ): Ditto for `asm_argv'
	* generic/gdbtk-register.c (gdb_register_info): Ditto for
	`commands'.
	* generic/gdbtk-hooks.c (tk_command_loop): Ditto for `msg'.
	* generic/gdbtk-cmds.c (gdb_search): Ditto for `switches'.
	(gdbtk_load_source): Ditto for `text_argv'.
	(struct disassembly_client_data ): Ditto for `source_argv'.
	(gdbtk_load_asm): Ditto for `text_argv'.
	(struct disassembly_client_data ): Ditto for `asm_argv'
	(gdb_loadfile): Ditto for `text_argv'.
	* generic/gdbtk.c (TclDebug): Make `v' a constant pointer.
	(gdbtk_init): Ditto for `old_chain', `src_path', `msg', and
	`lib_path'.
@
text
@d1 6
@


1.292
log
@2003-02-10  Martin M. Hunt  <hunt@@redhat.com>
	* library/browserwin.itb: Set textbackground option to
	$::Colors(textbg) instead of "white".
@
text
@d1 23
d25 1
@


1.291
log
@2003-02-10  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_attach_native): Don't force the user
	to choose an exec file when attaching.

	* library/attachdlg.itb: Some fixes to work with latest iwidgets.
@
text
@d2 4
@


1.290
log
@2003-02-10  Martin M. Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Remove prefs
	gdb/browser/width, gdb/browser/top_height, gdb/browser/view_height,
	gdb/browser/view_is_open. Add gdb/browser/layout.

	* library/browserwin.ith: Update declarations to match
	changes in browserwin.itb.

	* library/browserwin.itb (constructor): Don't set toplevel
	bindings. Set _layout from prefs.
	(destructor): Don't check $resize_after. Don't save view_is_open.
	(_build_win): Create a popup menu and bind to button 3.
	Split the rest into 4 functions; _build_file_frame,
	_build_filter_frame, _build_function_frame, and _build_view_frame.
	Pack these 4 frames according to $_layout.
	(_toggle_more): Deleted.
	(_bind_toplevel): Deleted.
	(_do_resize): Deleted.
	(_resize): Deleted.
	(_fill_source): Always fill because source is always visible.
	(_fill_funcs_combo): Limit width of combo to 40 chars.
	(_build_filter_frame): New function.
	(_build_file_frame): New function.
	(_build_function_frame): New function.
	(_build_view_frame): New function.
	(_switch_layout): New function. Toggle between layouts.

	* library/tclIndex: Rebuilt.

	* library/help/browser.html: Rewrite.
@
text
@d3 7
@


1.289
log
@2003-02-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/targetselection.itb (TargetSelection::build_win): Remove duplicate label.
@
text
@d1 32
d35 2
a36 1
	* library/targetselection.itb (TargetSelection::build_win): Remove duplicate label.
@


1.288
log
@2003-02-03  Martin M. Hunt  <hunt@@redhat.com>

        * library/globalpref.itb, library/mempref.itb, library/srcpref.itb,
        library/srcwin.itb, library/targetselection.itb, library/tracedlg.tcl:
        Set background color of comboboxes to Colors(textbg).

        * library/main.tcl: Load combobox version 2.2.

        * library/prefs.tcl: Minor optimization. Change order of main_names
        to have the most common, "main", first.
@
text
@d3 4
@


1.287
log
@2003-02-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/targetselection.itb (TargetSelection::port_list): Keep
	checking ports on Windows until we can open no more. Replaces
	fixed limit of 9.
@
text
@d3 11
@


1.286
log
@2003-02-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/session.tcl (_recreate_bps): Catch errors.
@
text
@d3 6
@


1.285
log
@2003-02-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_locate_main): Rewrite for efficiency.
	No longer uses gdb_search.  Caches result.
	(initialize_gdbtk): Initialize gdb_locate_main cache.
	* library/main.tcl: Call initialize_gdbtk after loading prefs.
@
text
@d3 4
@


1.284
log
@2003-01-21  Martin M. Hunt  <hunt@@redhat.com>
	* library/main.tcl: Don't require iwidgets 3.0.

	* library/console.itb (Console::_build_win): Rename
	tkTextClosestGap to tk::TextClosestGap. Rename tkCancelRepeat
	to tk::CancelRepeat. Rename tkPriv to tk::Priv. Needed for tk 8.4.1.

	* library/bpwin.itb (BpWin::build_win): Don't
	create sizebox.
	* library/locals.tcl (build_win): Ditto.
	* library/regwin.itb (RegWin::_build_win): Ditto.
	* library/srcwin.itb (SrcWin::constructor): Ditto.
	* library/stackwin.itb (StackWin::build_win): Ditto.
	* library/watch.tcl (build_win): Ditto.
@
text
@d1 7
@


1.283
log
@2003-01-21  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Look for iwidgets in
	"iwidgets" instead of "iwidgets3.0.0".
	Don't call ide_create_sizebox_command.

	* ChangeLog: New log for 2003.
	* ChangeLog-2002: Renamed from ChangeLog.
@
text
@d2 1
d4 12
@


1.282
log
@2002-12-20  Martin M. Hunt  <hunt@@redhat.com>

	* library/srcbar.itcl (SrcBar): Don't load vmake icon.

	* library/images: Removed back.gif, build.gif, file.gif, fore.gif,
	gdbtk.gif, opt.gif, tools.gif, tools2_3d.gif, and vmake.gif.

	* library/images2: Removed back.gif, build.gif, file.gif, fore.gif,
	gdbtk.gif, load.gif, opt.gif, tools.gif, tools2_3d.gif, and vmake.gif.
@
text
@d1 1
a1 1
2002-12-20  Martin M. Hunt  <hunt@@redhat.com>
d3 3
a5 1
	* library/srcbar.itcl (SrcBar): Don't load vmake icon.
d7 2
a8 873
	* library/images: Removed back.gif, build.gif, file.gif, fore.gif,
	gdbtk.gif, opt.gif, tools.gif, tools2_3d.gif, and vmake.gif.

	* library/images2: Removed back.gif, build.gif, file.gif, fore.gif,
	gdbtk.gif, load.gif, opt.gif, tools.gif, tools2_3d.gif, and vmake.gif.
	
2002-12-18  Martin M. Hunt  <hunt@@redhat.com>

	* library/main.tcl: Don't try to print errors to stderr on Windows.

2002-12-18  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/regwin.itb (RegWin::update): When updating, check
	that a cell still exists before checking its value.
	(RegWin::_select_group): Clear cells with changed values before
	changing group.  After new group is selected, highlight any changed
	values still visible.

2002-12-17  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_tcl_fputs_target_err):
 	New function.
	(gdbtk_tcl_fputs_target): Open console window if it is 
	not already open.	
	(gdbtk_gets): New function.
	Opens a console window if necessary and calls Console::gets.

	* library/console.ith (gets): Declare method.
	(_input_mode): New private variable.
	(_input_result): Ditto.
	(_input_error): Ditto.
	(_cancel): New private method
	(invoke): Add arg.

	* library/console.itb (_setprompt): Allow setting prompt
	to nothing.  Delete to beginning of line before writing prompt.
	(gets): New public method to prompt user for input.
	(_cancel): New private method to handle ^C when inputting data.
	(invoke): Check for ^d when in input mode.

2002-12-17  Martin M. Hunt  <hunt@@redhat.com>

	* library/regwin.itb (_load_prefs): Get list of registers from
	the group name.
	(_build_win): Remove old menu system.  Replace with an optionmenu
	that contains all the valid group names for this architecture.
	(_layout_table): No need to update old menu.
	(_but3): Add "Close" to popup menu.
	(_delete_from_display): No need to update old menu.
	(_display_all): Ditto.
	(_post_menu): Deleted.
	(_select_group): New method. Callback for group optionmenu.
	
	* library/regwin.ith: New private variable _group.
	New private method _select_group.  Removed _post_menu.

	* generic/gdbtk-register.c: Include reggroups.h.
	(gdb_register_info): Add "group" and "grouplist".
	(gdb_regformat): Fix Tcl_WrongNumArgs call so it doesn't crash.
	(gdb_reggrouplist): New function. Returns the names of the
	register groups.
	(gdb_reggroup): New function. Returns the register numbers of the
	registers in a group.

2002-12-06  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_update_mem): Don't add a 0x prefix.

2002-12-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/regwin.itb (update): Revert previous patch to this
	function. But also don't tag blank cells.
	(_but3): Fix help call.

2002-12-04  Martin M. Hunt  <hunt@@redhat.com>

	* library/regwin.itb (_but3): Fix help call. 

	* library/helpviewer.tcl (open_help): Fix KDE apps list.

	* library/debugwin.itb (build_win): Fix help call.
	
	* library/regwin.itb (update): Remove some old code
	that marked registers as changed when the target started.
	(_build_win): Make changed registers more visible by
	changing their bg to Colors(change).

	* library/prefs.tcl (pref_set_option_db): Create a new
	Color(change) which is the color of text indicating a change.
	Current default is green.

	* library/vartree.itb (_init_data): Make changed values
	Color(change). Can't change bg, so we change fill color.

2002-12-04  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c: Include tcl.h and tk.h to pull
	in declarations for some Tk functions used in this file.
	* generic/gdbtk-cmds.c: Likewise.

2002-12-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/vartree.itb (_but3): Add popup menu item to dump
	memory at the value of the variable.

	* library/vartree.itb (buildlayer): Check for error when updating
	a variable's value.
	(update_var): Ditto.
	
	* library/srcpref.itb: Latest tk doesn't support
	"-col" as a grid option.  Use "-column".

	* library/regwin.itb: Ditto.

	* library/main.tcl: Require package "debug". Make
	package loading a bit more robust.

2002-11-30  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-stack.c: Replace selected_frame with
	deprecated_selected_frame.
	* generic/gdbtk-register.c: Ditto.
	* generic/gdbtk-cmds.c (gdb_loc): Replace selected_frame with
	deprecated_selected_frame.  Use get_frame_pc and find_frame_sal.

2002-11-27  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Don't call Tix_Init.
	Don't include tix.h

	* generic/gdbtk-hooks.c: Don't include tix.h.

	* generic/gdbtkj-cmds.c: Don't include tix.h.
	
2002-11-27  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-stack.c (get_frame_name): Use get_frame_type
	instead of deprecated_frame_in_dummy.
	* generic/gdbtk-cmds.c (gdb_loc): Ditto.

2002-11-19  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-stack.c (gdb_selected_frame): Use get_frame_base
	instead of FRAME_FP.  Mention that get_frame_id() should be used.
	
2002-11-19  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_loc): Use get_frame_type instead of
	->signal_handler_caller.
	* generic/gdbtk-stack.c (get_frame_name): Ditto.
	(get_frame_name): Ditto.

2002-11-12  Andrew Cagney  <ac131313@@redhat.com>

	From 2002-11-11 David Carlton <carlton@@math.stanford.edu>
	* generic/gdbtk-stack.c (get_frame_name): Replace call to
	frame_in_dummy with one to deprecated_frame_in_dummy.
	* generic/gdbtk-cmds.c (gdb_loc): Ditto.

2002-11-11  Martin M. Hunt  <hunt@@redhat.com>	

	* library/srctextwin.itb (do_key): Add arg to
	print call.

2002-11-11  Martin M. Hunt  <hunt@@redhat.com>	
	
	* library/data.ith: Deleted.
	* library/data.itb: Deleted.
	
2002-11-11  Martin M. Hunt  <hunt@@redhat.com>		

	* library/memwin.itb: Supply arg to _update_address.

2002-11-11  Martin M. Hunt  <hunt@@redhat.com>	
	
	* library/toolbar.tcl: Deleted this obsolete file.
	* library/tclIndex: Rebuilt.

2002-11-11  Martin M. Hunt  <hunt@@redhat.com>		

	* library/srcbar.itcl (create_help_menu): For unix systems,
	if compatibility is set to KDE or GNOME, put the help menu
	in the right place. Otherwise put it on the far right, like
	Motif does.

2002-11-11  Martin M. Hunt  <hunt@@redhat.com>	
	
	* library/helpviewer.tcl: New file. Finds
	an appropriate help browser and displays the help files.

	* library/vartree.itb: Fix open_help calls.
	
	* library/helpviewer.ith: Deleted.
	* library/helpviewer.itb: Deleted.
	
	* library/prefs.tcl (pref_set_defaults): Remove 
	pref gdb/help/browser. Add pref gdb/help/browsername.  
	We couldn't simply rename because it would break older 
	versions of Insight that expect gdb/help/browser to be 
	a number.

2002-11-08  Martin M. Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_save): Fix GDBtkInitVersion.
	(pref_save): Check that value is not null before writing.
	
2002-11-07  Martin M. Hunt  <hunt@@redhat.com>

	* library/util.tcl (CygScrolledListbox): Delete.

	* library/srctextwin.itb: Change from CygScrolledListbox
	to iwidgets::scrolledlistbox. Set foreground and background.
	Center popup over source window.

2002-11-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/locals.tcl (build_win): Fix so window opens
	on Windows.	

2002-11-06  Martin M. Hunt  <hunt@@redhat.com>	
	* library/debugwin.itb: Remove VariableWin.  Add VarTree.

2002-11-06  Martin M. Hunt  <hunt@@redhat.com>	
	* library/watch.tcl: Completely rewritten to use VarTree.
	* library/locals.tcl: Completely rewritten to use VarTree.
	* library/variables.tcl: Deleted.
	* library/vartree.ith: New file.
	* library/vartree.itb: New file. Implements a variable
	tree.
	* library/tclIndex: Rebuilt.
	
2002-11-06  Martin M. Hunt  <hunt@@redhat.com>
	* library/globalpref.itb (_build_win): Add radiobox
	to select KDE/GNOME/default for pref gdb/compat. Remove
	browser option. 

	* library/regwin.itb (build_win): Colors(hbg) has been 
	removed so use Colors(bg) instead.

	* library/prefs.tcl (pref_set_defaults): Add a new
	preference "gdb/compat" which can be set to KDE, GNOME, 
	Windows or default. This allows us to change Insight's
	behavior based on windowing system.
	(pref_set_colors): Attempt to read in .gtkrc files.
	Do different things for KDE vs GNOME.
	(pref_load_default): New function. Load default colors.
	(pref_load_gnome): New function. Find and open GNOME file.	
	(load_gnome_file): New function. Loads GNOME file.		
	(pref_set_option_db): New function.  Set option database.

2002-11-06  Martin M. Hunt  <hunt@@redhat.com>	
	* generic/gdbtk-varobj.c: Remove FREEIF and replace with xfree.
	Make format_string static.
	(variable_update): Return an object
	with "-1" in it on error.
	
2002-11-06  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_call_command): Make a null
	cleanup and run it after every issued gdb command. Apparently
	some commands depend on this. [This should really be part of
	main gdb...]

2002-10-15  Martin M. Hunt  <hunt@@redhat.com>

	* library/tclIndex: Rebuilt.

	* library/* : auto_mkindex cannot rebuild
	tclIndex because it does not recognize the namespace
	import in main.tcl.  To get it to work again, rename the
	following:
		body -> itcl::body
		configbody -> itcl::configbody
		class -> itcl::class

2002-10-10  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_update_mem): No results
	were being returned. Append results to result_ptr_obj_ptr.

2002-10-10  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/session.tcl (save): Save target_cmd,
	attach, load, run, and cont as session prefs.
	(notice_file_change): Load in above session
	prefs.
	
	* library/interface.tcl (set_target): Set icons busy
	before attempting target command and set back to idle after.
	(run_executable): Return on ATTACH_ERROR.
	(gdbtk_run): If run button is hit when a program
	is currently being debugged, put up a dialog allowing
	user to continue or cancel.

2002-10-09  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/targetselection.itb (init_target_db): Add gdbserver
	target.
	(get_target_list): Always add "gdbserver" to list of valid 
	targets.
	(valid_target): Always allow "gdbserver".

2002-09-27  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Add gdbtk_annotate_signal
	as annotate_signalled_hook.

2002-09-26  Andrew Cagney  <ac131313@@redhat.com>

	From Grace Sainsbury <graces@@redhat.com>:
	* generic/gdbtk-main.c: New file.

2002-09-24  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (FillMixed): Fix debug
	statement for 64-bit.
	(_highlightAsmLine): Fix 64-bit arithmetic.

2002-09-19  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (FillAssembly): Fix debug
        statement for 64-bit addresses.
        (showBPBalloon): Fix for 64-bit addresses.

	* library/memwin.itb (incr_addr): Fix 64-bit addresses.

2002-09-18  Keith Seitz  <keiths@@redhat.com>

	* library/console.itb (_build_win): Bind control-c and control-v
	to copy and paste.

2002-08-15  Keith Seitz  <keiths@@redhat.com>

	* README: Massive update.

2002-08-14  Keith Seitz  <keiths@@redhat.com>

	* README.GDBTK: Updated and renamed to README.
	* README: "New" file.

2002-08-14  Keith Seitz  <keiths@@redhat.com>

	* library/srcbar.itcl (create_plugin_menu): Deal with
	multi plugin directories.
	Catch any errors that might occur reading plugin.tcl.
	* library/main.tcl: Add plugins from new default directory.
	(INSIGHT_PLUGINS): New environment variable to point to other
	plugin directories.

2002-08-14  Keith Seitz  <keiths@@redhat.com>

	* library/plugins: Removed.
	* plugins/: New folder to hold plugins.
	* Makefile.am, Makefile.in, aclocal.m4, configure,
	configure.in: New files.
	
2002-08-14  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (view_command): New function to display
	location in source window.
	(gdbtk_init): Add new gdb "view" command.

2002-08-06  Keith Seitz  <keiths@@redhat.com>

	* library/srcwin.itb (_build_win): Anchor status label so that
	text appears at left instead of centered.

2002-08-03  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-bp.c: Include "gdb_string.h".
	* generic/gdbtk-register.c: Ditto.
	* generic/gdbtk-varobj.c: Ditto.

2002-08-01  Keith Seitz  <keiths@@redhat.com>

	* library/prefs.tcl (pref_read): Don't suppress setting the default
	colors if the user has suppressed reading the preferences file.

2002-07-31  Keith Seitz  <keiths@@redhat.com>

	* library/browserwin.itb (_full_funcs_combo): Remove "-modal"
	option from tk_messageBox call. It was redhat-local in tk8.0,
	but is no longer in tk8.3.
	* library/download.itb (download_it): Likewise.
	* library/interface.tcl (gdbtk_tcl_query): Likewise.
	(show_warning): Likewise.
	(set_exe): Likewise.
	(set_target): Likewise.
	* library/memwin.itb (error_dialog): Likewise.
	* library/srcwin.itb (fillFuncCB): Likewise.
	* library/util.tcl (tfind_cmd): Likewise.

2002-07-03  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_call_command): Use cmd_func().

2002-06-12  Keith Seitz  <keiths@@redhat.com>

	* library/gdbmenubar.itcl (add): Add new "cascade" type.
	(menubar_add_cascade): New method to build cascading menus.

2002-06-07  Martin M. Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_set_colors): New function.  Set up colors
	from Windows system colors or X resource database. Save in array.
	(pref_set_defaults): Remove gdb/font/normal_fg, etc.
	(pref_read): Call pref_set_colors.

	* library/main.tcl: Remove call to "tix resetoptions TixGray".

	* library/bpwin.itb, library/browserwin.itb, library/console.itb,
	library/globalpref.itb, library/memwin.itb, library/process.itb,
	library/regwin.itb, library/srcpref.itb, library/srctextwin.itb,
	library/stackwin.itb, library/tdump.tcl, library/tracedlg.tcl,
	library/variables.tcl: Replace calls to [pref get gdb/fonts/*] 
	for colors with references to Color array. Remove all tixOptions calls.
	Fix up colors as necessary.
	
2002-05-31  Martin M. Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_read): If the regular expression
	cannot parse line, print debug message and skip it.

2002-05-15  Martin M. Hunt  <hunt@@redhat.com>

	* library/help/register.html: Rewrite docs.
	
	* library/regwin.ith (_types): New private variable array to save
	the possible types for each register.
	(_type): New private variable array to save the selected type for 
	each register.
	(_rows): New private variable. Number of rows in the table.
	(_cols): New private variable. Number of cols in the table.
	(_load_prefs): New private method.
	(_open_memory): New private method.
	(_edit_menu): Deleted:
	(_select): Deleted.
	(_change_format): Add optional type argument.
	
	* library/regwin.itb (RegWin::_load_prefs): New method. Collects
	all the prefs stuff here instead of in _layout_table. Prefs
	code was all rewritten to handle new types and formats.
	(RegWin::_build_win): Disable Double-1 binding. Bind
	button 1 to edit the cell. Don't make an Edit menu item.
	Remove Natural, Binary, Octal, and Raw formats. Add "Open
	Memory Window" menu item. 
	(RegWin::_dimensions): This function was being abused so I removed 
	it. Replaced with inline code in _layout_table which saves its
	computed values so it doesn't have to be recalculated unless 
	something changes.
	(RegWin::_layout_table): Rewritten to be more efficient. Grabs
	all values in one call to gdb_reginfo instead of one for each register.
	Uses new types and formats.  Calls _load_prefs.
	(RegWin::_accept_edit): Use type information when setting value.
	When done, call _unedit to remove tags.
	(RegWin::_open_memory): Open memory window with initial value
	set to the value of a register.	
	(RegWin::_but3): Add types menu items. Limit format options
	to reasonable ones. Add "Open Memory Window". Add "Help" 
	(RegWin::_edit): Just call _select_cell.
	(RegWin::_edit_menu): Deleted.
	(RegWin::_move): Don't recompute rows and cols; use _rows and
	_cols computed by _layout_table.
	(RegWin::_post_menu): Update types and formats. Disable "Open Memory
	Window" if register is not integer. Remove Edit.
	(RegWin::_select): Deleted.
	(RegWin::_select_cell):	Tag cell as being edited. Then
	call focus, which is a workaround for a TkTable glitch where
	the insertion bar sometimes disappeared.
	(RegWin::_unedit): Clear selection. Call focus. Don't change
	any bindings.
	(RegWin::_get_value): Eliminate previous crap and just call 
	"gdb_reginfo value".
	(RegWin::_change_format): Add optional type arg.  Call 
	"gdb_reginfo format".
	(RegWin::_update): Get a list of all the changed registers
	instead of checking one at a time.

	* generic/gdbtk-register.c (Gdbtk_Register_Init): Don't
	create gdb_pc_reg.  It is not used. Call register_gdbarch_swap 
	with regformat and regtype.
	(gdb_register_info): Add "type" and "format" options.
	(get_pc_register): Delete.
	(get_register_types): New function.  Returns list of valid types 
	for a list of registers.
	(get_register): Use saved format and type for each register. Check if
	there are any registers yet (target not running). Use mem_file 
	to collect output. Append output to a list.
	(map_arg_registers): If passed a list, iterate though each element
	and build a list of values to return.
	(setup_architecture_data): Memory was not being initialized, so
	use xcalloc(). Allocate memory for regformat and regtype.
	(gdb_regformat): New function called by "gdb_reginfo format".
	
2002-05-15  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_eval): For mem_file stuff, delete
	the file when done and free memory.
	
2002-05-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/session.tcl (notice_file_change): Catch the
	directory change, in case the directory no longer exists.

2002-05-05  Alexandre Oliva  <aoliva@@redhat.com>

	* generic/gdbtk-register.c (get_register, register_changed_p):
	Don't depend on variable-sized automatic arrays.

2002-05-04  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-wrapper.h (GDB_select_frame): Delete declaration.
	* generic/gdbtk-wrapper.c (GDB_select_frame): Delete function.
	(wrap_select_frame): Delete function.

2002-04-26  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_force_quit): New function.
	Closes source windows then calls gdb_force_quit.
	(gdbtk_quit): Call gdbtk_force_quit.

2002-04-24  Keith Seitz  <keiths@@redhat.com>

	* library/managedwin.ith (_ignore_on_save): New protected method.
	* library/managedwin.itb (shutdown): If _ignore_on_save, don't
	save this window to the active window list in the preferences
	file.
	* library/debugwin.ith (DebugWin::_ignore_on_save): Don't save
	this window to preferences active list.
	(DebugWinDOpts::_ignore_on_save): Likewise.
	* library/pluginwin.itcl (_ignore_on_save): Likewise.
	* library/download.ith (_ignore_on_save): Likewise.

2002-04-22  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-stack.c (Gdbtk_Stack_Init): Don't link
	selected_frame_level directly.
	* generic/gdbtk-hooks.c (gdbtk_selected_frame_changed): Set
	the global "gdb_selected_frame_level" directly.

2002-04-21  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-wrapper.c (GDB_find_frame_addr_in_frame_chain):
	Delete function.
	(wrap_find_frame_addr_in_frame_chain): Delete function.
	* generic/gdbtk-wrapper.h (GDB_find_frame_addr_in_frame_chain):
	Delete declaration.

2002-04-17  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Use error or throw_exception to
	report an error.

2002-04-12  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-register.c (register_changed_p): Use
	frame_register_read instead of read_relative_register_raw_bytes.
	(get_register): Delete out-of-date comment.
	
2002-04-08  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-wrapper.c (wrap_get_frame_block): Add missing NULL
	parameter.  Match recent get_frame_block changes.

2002-04-05  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-stack.c (gdb_block_vars): Update get_frame_block to
	match recent gdb changes.
	(gdb_get_blocks): Likewise.
	(gdb_get_vars_command): Likewise.
	(gdb_selected_block): Likewise.

2002-04-04  Keith Seitz  <keiths@@redhat.com>

	* library/download.itb (constructor): Set feedback meter
	to "0.0".
	Remove "steps" array.
	(update_download): Use fractional completions for feedback.
	(done): Ditto.
	* library/download.ith (protected variable steps): Remove.

2002-04-04  Daniel Jacobowitz  <drow@@mvista.com>

	* generic/gdbtk-cmds.c (gdb_disassemble_driver): Skip
	end-of-function markers in the line table.

2002-04-01  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_load_disassembly): Use string_to_core_addr
	instead of parse_and_eval_address.
	Use xfree instead of free.

2002-03-25  Elena Zannoni  <ezannoni@@redhat.com>

        * generic/gdbtk-hooks.c: Include cli/cli-decode.h for
        cmd_list_element.

2002-03-25  Alexandre Oliva  <aoliva@@redhat.com>

	* generic/gdbtk.c (HAS_STDARG): Define.
	* generic/gdbtk-cmds.c (HAS_STDARG): Likewise.
	* generic/gdbtk-hooks.c (HAS_STDARG): Likewise.

2002-03-14  Keith Seitz  <keiths@@redhat.com>

	* library/bpwin.itb (constructor): Set some sane initial
	size.

2002-03-07  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (SrcTextWin::showBPBalloon): Put 
	linefeeds between multiple breakpoints.

2002-03-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (SrcTextWin::showBPBalloon):
	Reformat output. Add conditions, ignore count, commands.

	* library/interface.tcl (gdbtk_tcl_readline): Remove
	call to "command::insert" and instead insert the command
	into the console window.
	(gdbtk_tcl_readline_end): Catch the unsets and do not call
	non-existent function command::end_multi_line_input.

2002-03-06  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/bpwin.itb: Left-justify the labels in
	the table.

2002-03-06  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c: Include "ctype.h" if available.
        (gdb_get_mem): Renamed to gdb_update_mem.
        (gdb_update_mem): Take array as first tcl argument. This
        array will hold the data for the table, which is now stuffed
        in C instead of tcl.
        (gdb_eval): Use our own ui-file instead of gdb_stdout.
	* library/memwin.ith (_update_address): New method.
	(update_address): Address expression is no longer optional.
	* library/memwin.itb (build_win): Use _update_address instead of
	update_address.
	(toggle_enabled): Ditto.
	(newsize): Use _update_address instead of update_addr.
	(update_address_cb): Use _update_address instead of update_address.
	(do_popup): Likewise.
	(goto): Likewise.
	(incr_addr): Use _update_address instead of update_addr.
	(edit): Use gdb_update_mem instead of gdb_get_mem.
	(update_addr): use gdb_update_mem to do all the window updating.

2002-03-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/srcwin.itb: Don't try to set balloon help
	for search widget; it moved to srcbar.

2002-03-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_read): If a preference specifies
	"src-font", substitute "global/fixed".
	(pref_set_defaults): Change defaults from "src-font" to 
	"global/fixed". Do not create font object "src-font". Do
	not add hook to trace its changes.
	(pref_src-font_trace): Remove.

	* library/console.itb (Console::_update_option): Remove 
	font update because this happens automatically.

	* library/globalpref.itb: No need to set
	changed flag for fonts; updates happen automatically
	when prefs are updated.

	* library/bpwin.itb: Replaced src-font with global/fixed.
	* library/browserwin.itb: Ditto.
	* library/mempref.itb: Ditto.
	* library/memwin.itb: Ditto.
	* library/process.itb: Ditto.
	* library/regwin.itb: Ditto.
	* library/srcbar.itcl: Ditto.
	* library/srcpref.itb: Ditto.
	* library/srctextwin.itb: Ditto.
	* library/srcwin.itb: Ditto.
	* library/stackwin.itb: Ditto.
	* library/tdump.tcl: Ditto.
	* library/tracedlg.tcl: Ditto.
	* library/variables.tcl: Ditto.
	* library/watch.tcl: Ditto.
	
2002-03-01  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-register.c (register_changed_p): Don't use REGISTER_BYTES.
	There is no guarantee anymore that REGISTER_BYTES contains
	NUM_REGS+NUM_PSEUDO_REGS registers.
	(setup_architecture_data): Likewise.

2002-02-25  Ian Roxborough  <irox@@redhat.com>

	* library/srcbar.itcl (SrcBar::create_buttons): Added
	"Search in source file" entry box and label to the top
	row toolbar.
	* library/srcwin.itb (SrcWin::_build_win): Removed
	"Search in source file" entry box.
	(SrcWin::_search): Renamed to "search", add string
	parameter and cleaned up.
	* library/srcwin.ith (SrcWin): Removed private
	method "_search" and added public method "search".

2002-02-17  Tom Tromey  <tromey@@redhat.com>

	* library/tclIndex: Updated.
	* library/srcbar.itcl (SrcBar): Use new Session namespace.
	* library/main.tcl: Use new Session namespace.
	* library/interface.tcl (gdbtk_tcl_preloop): Use new Session
	namespace.
	(gdbtk_cleanup): Likewise.
	(_close_file): Likewise.
	* library/session.tcl: Use a namespace.  Renamed all functions.

2002-02-13  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_print_frame_info): Don't 
	set GDB globals current_source_symtab and current_source_line.
	Let GDB do it. 

2002-02-13  Keith Seitz  <keiths@@redhat.com>

	* library/managedwin.itb (_create): If given a transient window,
	make sure that the SrcWin that is to become its master exists;
	otherwise, use ".".

2002-02-12  Keith Seitz  <keiths@@redhat.com>

	From Don Bowman <don@@sandvine.com>:
	* library/targetselection.itb (init_target_db): Add target
	vxWorks.
        Update copyright.

2002-02-10  Daniel Jacobowitz  <drow@@mvista.com>

	* generic/gdbtk-cmds.c (gdb_listfuncs): Don't call
	BLOCK_SHOULD_SORT.
	* library/browserwin.itb (BrowserWin::_fill_funcs_combo): Sort
	the output of gdb_listfuncs.

2002-02-07  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk.c, generic/gdbtk-bp.c, generic/gdbtk-cmds.c,
	generic/gdbtk-hooks.c, generic/gdbtk-stack.c: Cleanup includes.

2002-02-06  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk.c, generic/gdbtk-bp.c, generic/gdbtk-cmds.c,
	generic/gdbtk-hooks.c, generic/gdbtk-register.c,
	generic/gdbtk-stack.c, generic/gdbtk-varobj.c,
	generic/gdbtk-wrapper.c: Cleanup. Fix indentation. Fix
	function declarations. Remove unused variables. Add 2002
	copyrights.

2002-02-06  Keith Seitz  <keiths@@redhat.com>

	* library/images/cygnus.gif: Remove.
	* library/images2/cygnus.gif: Remove.

2002-02-05  Elena Zannoni  <ezannoni@@redhat.com>

        * generic/gdbtk-cmds.c (gdbtk_load_asm, gdbtk_print_asm): Use
        TARGET_PRINT_INSN instead of tm_print_insn.

2002-01-18  Keith Seitz  <keiths@@redhat.com>

	* library/console.ith (get_text): Delete.
	(test): New public method.
	* library/console.itb (get_text): Delete.
	(test): New public method.

2002-01-15  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-varobj.c (variable_value): When varobj_get_value
	fails, use error_last_message to return the error to tcl land.
	This allows us to display nice messages about why "0xdeadbeef" is
	not accessible!

2002-01-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/memwin.itb (idle): Check for existence of window.
	Prevents race-condition error.

	* library/srctextwin.itb (enable): Check for existence of $twin.

	* library/interface.tcl (gdbtk_tcl_exec_file_display): 
	Set pathname in host-independent manner using "file" and
	gdb_current_directory.

2002-01-10  Keith Seitz  <keiths@@redhat.com>

	* library/Makefile (ITCL_SH): Renamed to "ITCLSH".
	(tclIndex): We no longer have an Itcl shell, so we must use
	"package require Itcl".

2002-01-08  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_find_file_command): If the symtab
	doesn't have the filename's fullname, look it up with
	symtab_to_filename.

2002-01-08  Keith Seitz  <keiths@@redhat.com>

	* library/srcwin.itb (location): Fix typo. It's "addr" not
	"address".

2002-01-08  Tom Tromey  <tromey@@redhat.com>

	* library/interface.tcl (gdbtk_tcl_preloop): Use current directory
	when `--args' given.

2002-01-07  Ian Roxborough  <irox@@redhat.com>

	* library/srcbar.itcl (SrcBar::create_buttons): Line number
	and address fields have been removed and added to the
	status bar.
	* library/srcwin.itb (SrcWin::_build_win): Add address and
	line number fields to status bar.  Moved download progress
	bar to status bar.
	(SrcWin::download_progress):  Use canvas on status bar.
	Remember to adjust width of 64-bit address.
	(SrcWin::location): Set line number and address on status bar.
	* library/srcwin.ith (SrcWin): Added new private variable.

2002-01-04  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_disassemble_driver): Replace
	LITTLE_ENDIAN with BFD_ENDIAN_LITTLE.
	* generic/gdbtk-register.c (get_register): Ditto.

2002-01-04  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-wrapper.h: Add typedef value_ptr.

2002-01-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/session.tcl (SESSION_serialize_bps): Ignore
	breakpoints set on internal_error and info_command because
	these are set by .gdbinit and will be recreated by it.
	This is a bit of a hack and should be fixed properly
	someday.
	
	* library/debugwin.itb: Fix incorrect button names
	so they will be enabled/disabled properly.

	* library/srctextwin.itb: Set focus on srcwin only
	if another window doesn't have the focus.

2002-01-02  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (set_exe): Allow users to debug
	executables with no debug information.

2002-01-02  Keith Seitz  <keiths@@redhat.com>

	* library/console.ith (insert): Add tag parameter.
	(einsert): Delete.
	* library/console.itb: (insert): Add tag parameter.
	(einsert): Delete.
	* library/interface.tcl (gdbtk_tcl_fputs): Use Console::insert.
	(gdbtk_tcl_fputs_error): Likewise.
	(gdbtk_tcl_fputs_log): Likewise.
	(gdbtk_tcl_fputs_target): Likewise.
	(set_target): Likewise.

2002-01-02  Ian Roxborough  <irox@@redhat.com>

	* library/managedwin.itb (ManagedWin::_create):  When
	making a modal window transient, use the source window
	as the master and not ".".
@


1.281
log
@2002-12-18  Martin M. Hunt  <hunt@@redhat.com>

	* library/main.tcl: Don't try to print errors to stderr on Windows.
@
text
@d1 10
@


1.280
log
@2002-12-18  Martin M. Hunt  <hunt@@redhat.com>

	* library/regwin.itb (RegWin::update): When updating, check
	that a cell still exists before checking its value.
	(RegWin::_select_group): Clear cells with changed values before
	changing group.  After new group is selected, highlight any changed
	values still visible.
@
text
@d3 4
@


1.279
log
@2002-12-17  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_tcl_fputs_target_err):
 	New function.
	(gdbtk_tcl_fputs_target): Open console window if it is
	not already open.
	(gdbtk_gets): New function.
	Opens a console window if necessary and calls Console::gets.

	* library/console.ith (gets): Declare method.
	(_input_mode): New private variable.
	(_input_result): Ditto.
	(_input_error): Ditto.
	(_cancel): New private method
	(invoke): Add arg.

	* library/console.itb (_setprompt): Allow setting prompt
	to nothing.  Delete to beginning of line before writing prompt.
	(gets): New public method to prompt user for input.
	(_cancel): New private method to handle ^C when inputting data.
	(invoke): Check for ^d when in input mode.
@
text
@d1 8
@


1.278
log
@2002-12-17  Martin M. Hunt  <hunt@@redhat.com>

	* library/regwin.itb (_load_prefs): Get list of registers from
	the group name.
	(_build_win): Remove old menu system.  Replace with an optionmenu
	that contains all the valid group names for this architecture.
	(_layout_table): No need to update old menu.
	(_but3): Add "Close" to popup menu.
	(_delete_from_display): No need to update old menu.
	(_display_all): Ditto.
	(_post_menu): Deleted.
	(_select_group): New method. Callback for group optionmenu.

	* library/regwin.ith: New private variable _group.
	New private method _select_group.  Removed _post_menu.

	* generic/gdbtk-register.c: Include reggroups.h.
	(gdb_register_info): Add "group" and "grouplist".
	(gdb_regformat): Fix Tcl_WrongNumArgs call so it doesn't crash.
	(gdb_reggrouplist): New function. Returns the names of the
	register groups.
	(gdb_reggroup): New function. Returns the register numbers of the
	registers in a group.
@
text
@d3 22
@


1.277
log
@2002-12-06  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_update_mem): Don't add a 0x prefix.
@
text
@d1 24
@


1.276
log
@2002-12-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/regwin.itb (update): Revert previous patch to this
	function. But also don't tag blank cells.
	(_but3): Fix help call.
@
text
@d1 4
@


1.275
log
@2002-12-04  Martin M. Hunt  <hunt@@redhat.com>

	* library/regwin.itb (update): Remove some old code
	that marked registers as changed when the target started.
	(_build_win): Make changed registers more visible by
	changing their bg to Colors(change).

	* library/prefs.tcl (pref_set_option_db): Create a new
	Color(change) which is the color of text indicating a change.
	Current default is green.

	* library/vartree.itb (_init_data): Make changed values
	Color(change). Can't change bg, so we change fill color.
@
text
@d1 6
d9 6
@


1.274
log
@        * generic/gdbtk-hooks.c: Include tcl.h and tk.h to pull
        in declarations for some Tk functions used in this file.
        * generic/gdbtk-cmds.c: Likewise.
@
text
@d1 14
@


1.273
log
@Fix previous checkin.
@
text
@d1 6
@


1.272
log
@2002-12-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/vartree.itb (_but3): Add popup menu item to dump
	memory at the value of the variable.
@
text
@d5 1
a5 1
	
@


1.271
log
@2002-12-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/vartree.itb (buildlayer): Check for error when updating
	a variable's value.
	(update_var): Ditto.
@
text
@d3 3
@


1.270
log
@2002-12-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/srcpref.itb: Latest tk doesn't support
	"-col" as a grid option.  Use "-column".

	* library/regwin.itb: Ditto.
@
text
@d3 4
@


1.269
log
@2002-12-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/main.tcl: Require package "debug". Make
	package loading a bit more robust.
@
text
@d3 5
@


1.268
log
@2002-11-30  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-stack.c: Replace selected_frame with
	deprecated_selected_frame.
	* generic/gdbtk-register.c: Ditto.
	* generic/gdbtk-cmds.c (gdb_loc): Replace selected_frame with
	deprecated_selected_frame.  Use get_frame_pc and find_frame_sal.
@
text
@d1 5
@


1.267
log
@2002-11-27  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Don't call Tix_Init.
	Don't include tix.h

	* generic/gdbtk-hooks.c: Don't include tix.h.

	* generic/gdbtkj-cmds.c: Don't include tix.h.
@
text
@d1 8
@


1.266
log
@2002-11-27  Andrew Cagney  <cagney@@redhat.com>

	* generic/gdbtk-stack.c (get_frame_name): Use get_frame_type
	instead of deprecated_frame_in_dummy.
	* generic/gdbtk-cmds.c (gdb_loc): Ditto.
@
text
@d1 9
@


1.265
log
@2002-11-19  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-stack.c (gdb_selected_frame): Use get_frame_base
	instead of FRAME_FP.  Mention that get_frame_id() should be used.
@
text
@d1 6
@


1.264
log
@2002-11-19  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_loc): Use get_frame_type instead of
	->signal_handler_caller.
	* generic/gdbtk-stack.c (get_frame_name): Ditto.
	(get_frame_name): Ditto.
@
text
@d3 5
@


1.263
log
@From: 2002-11-11  David Carlton  <carlton@@math.stanford.edu>

	* generic/gdbtk-stack.c (get_frame_name): Replace call to
	frame_in_dummy with one to deprecated_frame_in_dummy.
	* generic/gdbtk-cmds.c (gdb_loc): Ditto.
@
text
@d1 7
@


1.262
log
@2002-11-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (do_key): Add arg to
	print call.
@
text
@d1 7
@


1.261
log
@2002-11-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/data.ith: Deleted.
	* library/data.itb: Deleted.
@
text
@d3 5
@


1.260
log
@2002-11-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/toolbar.tcl: Deleted this obsolete file.
	* library/tclIndex: Rebuilt.
@
text
@d3 9
@


1.259
log
@2002-11-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/srcbar.itcl (create_help_menu): For unix systems,
	if compatibility is set to KDE or GNOME, put the help menu
	in the right place. Otherwise put it on the far right, like
	Motif does.
@
text
@d3 5
@


1.258
log
@2002-11-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/helpviewer.tcl: New file. Finds
	an appropriate help browser and displays the help files.

	* library/vartree.itb: Fix open_help calls.

	* library/helpviewer.ith: Deleted.
	* library/helpviewer.itb: Deleted.

	* library/prefs.tcl (pref_set_defaults): Remove
	pref gdb/help/browser. Add pref gdb/help/browsername.
	We couldn't simply rename because it would break older
	versions of Insight that expect gdb/help/browser to be
	a number.
@
text
@d3 7
@


1.257
log
@2002-11-08  Martin M. Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_save): Fix GDBtkInitVersion.
	(pref_save): Check that value is not null before writing.
@
text
@d1 16
d21 1
a21 1

@


1.256
log
@2002-11-07  Martin M. Hunt  <hunt@@redhat.com>

	* library/util.tcl (CygScrolledListbox): Delete.

	* library/srctextwin.itb: Change from CygScrolledListbox
	to iwidgets::scrolledlistbox. Set foreground and background.
	Center popup over source window.
@
text
@d1 5
@


1.255
log
@2002-11-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/locals.tcl (build_win): Fix so window opens
	on Windows.
@
text
@d1 8
@


1.254
log
@2002-11-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/debugwin.itb: Remove VariableWin.  Add VarTree.
@
text
@d3 4
a39 1

@


1.253
log
@2002-11-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/watch.tcl: Completely rewritten to use VarTree.
	* library/locals.tcl: Completely rewritten to use VarTree.
	* library/variables.tcl: Deleted.
	* library/vartree.ith: New file.
	* library/vartree.itb: New file. Implements a variable
	tree.
	* library/tclIndex: Rebuilt.
@
text
@d3 3
@


1.252
log
@2002-11-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/globalpref.itb (_build_win): Add radiobox
	to select KDE/GNOME/default for pref gdb/compat. Remove
	browser option.

	* library/regwin.itb (build_win): Colors(hbg) has been
	removed so use Colors(bg) instead.

	* library/prefs.tcl (pref_set_defaults): Add a new
	preference "gdb/compat" which can be set to KDE, GNOME,
	Windows or default. This allows us to change Insight's
	behavior based on windowing system.
	(pref_set_colors): Attempt to read in .gtkrc files.
	Do different things for KDE vs GNOME.
	(pref_load_default): New function. Load default colors.
	(pref_load_gnome): New function. Find and open GNOME file.
	(load_gnome_file): New function. Loads GNOME file.
	(pref_set_option_db): New function.  Set option database.
@
text
@d3 9
@


1.251
log
@2002-11-06  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-varobj.c: Remove FREEIF and replace with xfree.
	Make format_string static.

	(variable_update): Return an object
	with "-1" in it on error.
@
text
@d3 19
@


1.250
log
@        * generic/gdbtk-hooks.c (gdbtk_call_command): Make a null
        cleanup and run it after every issued gdb command. Apparently
        some commands depend on this. [This should really be part of
        main gdb...]
@
text
@d1 8
@


1.249
log
@2002-10-15  Martin M. Hunt  <hunt@@redhat.com>

	* library/tclIndex: Rebuilt.
@
text
@d1 7
@


1.248
log
@2002-10-15  Martin M. Hunt  <hunt@@redhat.com>

	* library/* : auto_mkindex cannot rebuild
	tclIndex because it does not recognize the namespace
	import in main.tcl.  To get it to work again, rename the
	following:
		body -> itcl::body
		configbody -> itcl::configbody
		class -> itcl::class
@
text
@d3 2
@


1.247
log
@2002-10-10  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_update_mem): No results
	were being returned. Append results to result_ptr_obj_ptr.
@
text
@d1 10
@


1.246
log
@2002-10-10  Martin M. Hunt  <hunt@@redhat.com>

	* library/session.tcl (save): Save target_cmd,
	attach, load, run, and cont as session prefs.
	(notice_file_change): Load in above session
	prefs.

	* library/interface.tcl (set_target): Set icons busy
	before attempting target command and set back to idle after.
	(run_executable): Return on ATTACH_ERROR.
	(gdbtk_run): If run button is hit when a program
	is currently being debugged, put up a dialog allowing
	user to continue or cancel.
@
text
@d3 5
@


1.245
log
@2002-10-09  Martin M. Hunt  <hunt@@redhat.com>

	* library/targetselection.itb (init_target_db): Add gdbserver
	target.
	(get_target_list): Always add "gdbserver" to list of valid
	targets.
	(valid_target): Always allow "gdbserver".
@
text
@d1 14
d16 1
a16 1

@


1.244
log
@        * generic/gdbtk-hooks.c (gdbtk_add_hooks): Add gdbtk_annotate_signal
        as annotate_signalled_hook.
@
text
@d1 8
@


1.243
log
@2002-09-26  Andrew Cagney  <ac131313@@redhat.com>

	From Grace Sainsbury <graces@@redhat.com>:
	* Makefile.in (gdbtk-main.o): New target.
	(gdb.o): New target.
	(main_h): Define.
	(main.o): Update dependencies.
	(gdb$(EXEEXT)): Add gdb.o.
	(SUBDIR_GDBTK_SRCS): Add gdbtk-main.c.
	(SUBDIR_GDBTK_ALL, SUBDIR_GDBTK_UNINSTALL): Set.
	(SUBDIR_GDBTK_CLEAN): Set.
	(install-gdbtk): Install the insight binary.
	(uninstall-gdbtk): New target.
	(all-gdbtk, clean-gdbtk): New rule.
	* top.c (use_windows): Default to zero.
	* main.c: Include "main.h".
	(main): Delete.
	(struct captured_main_args): Delete.
	(gdb_main): New function.
	* main.h: New file.
	* gdb.c: New File.

2002-09-26  Andrew Cagney  <ac131313@@redhat.com>

	From Grace Sainsbury <graces@@redhat.com>:
	* generic/gdbtk-main.c: New file.
@
text
@d1 5
@


1.242
log
@
2002-09-24  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (FillMixed): Fix debug
	statement for 64-bit.
	(_highlightAsmLine): Fix 64-bit arithmetic.
@
text
@d1 5
@


1.241
log
@2002-09-19  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (FillAssembly): Fix debug
        statement for 64-bit addresses.
        (showBPBalloon): Fix for 64-bit addresses.
@
text
@d1 6
@


1.240
log
@2002-09-19  Martin M. Hunt  <hunt@@redhat.com>

	* library/memwin.itb (incr_addr): Fix 64-bit addresses.
@
text
@d3 4
@


1.239
log
@        * library/console.itb (_build_win): Bind control-c and control-v
        to copy and paste.
@
text
@d1 4
@


1.238
log
@        * README: Massive update.
@
text
@d1 5
@


1.238.2.1
log
@2002-09-28  Andrew Cagney  <ac131313@@redhat.com>

	Import from mainline:

	From Grace Sainsbury <graces@@redhat.com>:
	* Makefile.in (gdbtk-main.o): New target.
	(gdb.o): New target.
	(main_h): Define.
	(main.o): Update dependencies.
	(gdb$(EXEEXT)): Add gdb.o.
	(SUBDIR_GDBTK_SRCS): Add gdbtk-main.c.
	(SUBDIR_GDBTK_ALL, SUBDIR_GDBTK_UNINSTALL): Set.
	(SUBDIR_GDBTK_CLEAN): Set.
	(install-gdbtk): Install the insight binary.
	(uninstall-gdbtk): New target.
	(all-gdbtk, clean-gdbtk): New rule.
	* top.c (use_windows): Default to zero.
	* main.c: Include "main.h".
	(main): Delete.
	(struct captured_main_args): Delete.
	(gdb_main): New function.
	* main.h: New file.
	* gdb.c: New File.

Index: gdbtk/ChangeLog
2002-09-26  Andrew Cagney  <ac131313@@redhat.com>

	Import from mainline:

	From Grace Sainsbury <graces@@redhat.com>:
	* generic/gdbtk-main.c: New file.

Index: testsuite/gdb.gdbtk/ChangeLog
2002-09-28  Andrew Cagney  <ac131313@@redhat.com>

	Import from mainline:
	2002-09-26  Keith Seitz  <keiths@@redhat.com>
        * lib/insight-support.exp (gdbtk_start): Figure out where
        the insight executable is based on where gdb is. Use this
        executable to start insight instead of gdb.
@
text
@a0 7
2002-09-26  Andrew Cagney  <ac131313@@redhat.com>

	Import from mainline:

	From Grace Sainsbury <graces@@redhat.com>:
	* generic/gdbtk-main.c: New file.

@


1.238.2.2
log
@2002-12-06  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_update_mem): Don't add a 0x prefix.
@
text
@a0 4
2002-12-06  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_update_mem): Don't add a 0x prefix.

@


1.237
log
@        * README.GDBTK: Updated and renamed to README.
        * README: "New" file.
@
text
@d1 4
@


1.236
log
@        * library/srcbar.itcl (create_plugin_menu): Deal with
        multi plugin directories.
        Catch any errors that might occur reading plugin.tcl.
        * library/main.tcl: Add plugins from new default directory.
        (INSIGHT_PLUGINS): New environment variable to point to other
        plugin directories.
@
text
@d3 5
@


1.235
log
@        * library/plugins: Removed.
        * plugins/: New folder to hold plugins.
        * Makefile.am, Makefile.in, aclocal.m4, configure,
        configure.in: New files.
@
text
@d3 9
@


1.234
log
@        * generic/gdbtk.c (view_command): New function to display
        location in source window.
        (gdbtk_init): Add new gdb "view" command.
@
text
@d3 7
@


1.233
log
@        * library/srcwin.itb (_build_win): Anchor status label so that
        text appears at left instead of centered.
@
text
@d1 6
@


1.232
log
@Index: ChangeLog
2002-08-03  Andrew Cagney  <ac131313@@redhat.com>

* Makefile.in (gdbtk-bp.o): Update dependencies.
(gdbtk-register.o): Ditto.
(gdbtk-varobj.o): Ditto.

Index: gdbtk/ChangeLog
2002-08-03  Andrew Cagney  <ac131313@@redhat.com>

* generic/gdbtk-bp.c: Include "gdb_string.h".
* generic/gdbtk-register.c: Ditto.
* generic/gdbtk-varobj.c: Ditto.
@
text
@d1 5
@


1.231
log
@        * library/prefs.tcl (pref_read): Don't suppress setting the default
        colors if the user has suppressed reading the preferences file.
@
text
@d1 6
@


1.230
log
@        * library/browserwin.itb (_full_funcs_combo): Remove "-modal"
        option from tk_messageBox call. It was redhat-local in tk8.0,
        but is no longer in tk8.3.
        * library/download.itb (download_it): Likewise.
        * library/interface.tcl (gdbtk_tcl_query): Likewise.
        (show_warning): Likewise.
        (set_exe): Likewise.
        (set_target): Likewise.
        * library/memwin.itb (error_dialog): Likewise.
        * library/srcwin.itb (fillFuncCB): Likewise.
        * library/util.tcl (tfind_cmd): Likewise.
@
text
@d1 5
@


1.229
log
@2002-07-03  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_call_command): Use cmd_func().
@
text
@d1 14
@


1.228
log
@        * library/gdbmenubar.itcl (add): Add new "cascade" type.
        (menubar_add_cascade): New method to build cascading menus.
@
text
@d1 4
@


1.227
log
@*** empty log message ***
@
text
@d1 5
@


1.226
log
@2002-05-31  Martin M. Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_read): If the regular expression
	cannot parse line, print debug message and skip it.
@
text
@d1 17
@


1.225
log
@2002-05-15  Martin M. Hunt  <hunt@@redhat.com>

	* library/help/register.html: Rewrite docs.

	* library/regwin.ith (_types): New private variable array to save
	the possible types for each register.
	(_type): New private variable array to save the selected type for
	each register.
	(_rows): New private variable. Number of rows in the table.
	(_cols): New private variable. Number of cols in the table.
	(_load_prefs): New private method.
	(_open_memory): New private method.
	(_edit_menu): Deleted:
	(_select): Deleted.
	(_change_format): Add optional type argument.

	* library/regwin.itb (RegWin::_load_prefs): New method. Collects
	all the prefs stuff here instead of in _layout_table. Prefs
	code was all rewritten to handle new types and formats.
	(RegWin::_build_win): Disable Double-1 binding. Bind
	button 1 to edit the cell. Don't make an Edit menu item.
	Remove Natural, Binary, Octal, and Raw formats. Add "Open
	Memory Window" menu item.
	(RegWin::_dimensions): This function was being abused so I removed
	it. Replaced with inline code in _layout_table which saves its
	computed values so it doesn't have to be recalculated unless
	something changes.
	(RegWin::_layout_table): Rewritten to be more efficient. Grabs
	all values in one call to gdb_reginfo instead of one for each register.
	Uses new types and formats.  Calls _load_prefs.
	(RegWin::_accept_edit): Use type information when setting value.
	When done, call _unedit to remove tags.
	(RegWin::_open_memory): Open memory window with initial value
	set to the value of a register.
	(RegWin::_but3): Add types menu items. Limit format options
	to reasonable ones. Add "Open Memory Window". Add "Help"
	(RegWin::_edit): Just call _select_cell.
	(RegWin::_edit_menu): Deleted.
	(RegWin::_move): Don't recompute rows and cols; use _rows and
	_cols computed by _layout_table.
	(RegWin::_post_menu): Update types and formats. Disable "Open Memory
	Window" if register is not integer. Remove Edit.
	(RegWin::_select): Deleted.
	(RegWin::_select_cell):	Tag cell as being edited. Then
	call focus, which is a workaround for a TkTable glitch where
	the insertion bar sometimes disappeared.
	(RegWin::_unedit): Clear selection. Call focus. Don't change
	any bindings.
	(RegWin::_get_value): Eliminate previous crap and just call
	"gdb_reginfo value".
	(RegWin::_change_format): Add optional type arg.  Call
	"gdb_reginfo format".
	(RegWin::_update): Get a list of all the changed registers
	instead of checking one at a time.

	* generic/gdbtk-register.c (Gdbtk_Register_Init): Don't
	create gdb_pc_reg.  It is not used. Call register_gdbarch_swap
	with regformat and regtype.
	(gdb_register_info): Add "type" and "format" options.
	(get_pc_register): Delete.
	(get_register_types): New function.  Returns list of valid types
	for a list of registers.
	(get_register): Use saved format and type for each register. Check if
	there are any registers yet (target not running). Use mem_file
	to collect output. Append output to a list.
	(map_arg_registers): If passed a list, iterate though each element
	and build a list of values to return.
	(setup_architecture_data): Memory was not being initialized, so
	use xcalloc(). Allocate memory for regformat and regtype.
	(gdb_regformat): New function called by "gdb_reginfo format".
@
text
@d1 5
@


1.224
log
@2002-05-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/session.tcl (notice_file_change): Catch the
	directory change, in case the directory no longer exists.
@
text
@d1 76
@


1.223
log
@* generic/gdbtk-register.c (get_register, register_changed_p):
Don't depend on variable-sized automatic arrays.
@
text
@d1 5
@


1.222
log
@* generic/gdbtk-wrapper.h (GDB_select_frame): Delete declaration.
* generic/gdbtk-wrapper.c (GDB_select_frame): Delete function.
(wrap_select_frame): Delete function.
@
text
@d1 5
@


1.221
log
@2002-04-26  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_force_quit): New function.
	Closes source windows then calls gdb_force_quit.
	(gdbtk_quit): Call gdbtk_force_quit.
@
text
@d1 6
@


1.220
log
@        * library/managedwin.ith (_ignore_on_save): New protected method.
        * library/managedwin.itb (shutdown): If _ignore_on_save, don't
        save this window to the active window list in the preferences
        file.
        * library/debugwin.ith (DebugWin::_ignore_on_save): Don't save
        this window to preferences active list.
        (DebugWinDOpts::_ignore_on_save): Likewise.
        * library/pluginwin.itcl (_ignore_on_save): Likewise.
        * library/download.ith (_ignore_on_save): Likewise.
@
text
@d1 6
@


1.219
log
@        * generic/gdbtk-stack.c (Gdbtk_Stack_Init): Don't link
        selected_frame_level directly.
        * generic/gdbtk-hooks.c (gdbtk_selected_frame_changed): Set
        the global "gdb_selected_frame_level" directly.
@
text
@d1 12
@


1.218
log
@* generic/gdbtk-wrapper.c (GDB_find_frame_addr_in_frame_chain):
Delete function.
(wrap_find_frame_addr_in_frame_chain): Delete function.
* generic/gdbtk-wrapper.h (GDB_find_frame_addr_in_frame_chain):
Delete declaration.
@
text
@d1 7
@


1.217
log
@* generic/gdbtk.c (gdbtk_init): Use error or throw_exception to
report an error.
@
text
@d1 8
@


1.216
log
@* defs.h (read_relative_register_raw_bytes): Delete declaration.
* frame.c (frame_register_read): New function.  Return non-zero on
success.
(read_relative_register_raw_bytes_for_frame): Delete.
(read_relative_register_raw_bytes): Delete.
* frame.h (frame_register_read): Declare.
* d30v-tdep.c: Update Copyright.  Use frame_register_read.
* sh-tdep.c: Ditto.
* infcmd.c (do_registers_info): Ditto.
* hppa-tdep.c: Ditto.
* rs6000-tdep.c: Ditto.
* h8500-tdep.c: Ditto.
* mips-tdep.c: Ditto.
* h8300-tdep.c: Ditto.
* z8k-tdep.c: Ditto.
@
text
@d1 5
@


1.215
log
@* generic/gdbtk-wrapper.c (wrap_get_frame_block): Add missing NULL
parameter.  Match recent get_frame_block changes.
@
text
@d1 6
@


1.214
log
@        * generic/gdbtk-stack.c (gdb_block_vars): Update get_frame_block to
        match recent gdb changes.
        (gdb_get_blocks): Likewise.
        (gdb_get_vars_command): Likewise.
        (gdb_selected_block): Likewise.
@
text
@d1 5
@


1.213
log
@        * library/download.itb (constructor): Set feedback meter
        to "0.0".
        Remove "steps" array.
        (update_download): Use fractional completions for feedback.
        (done): Ditto.
        * library/download.ith (protected variable steps): Remove.
@
text
@d1 8
@


1.212
log
@2002-04-04  Daniel Jacobowitz  <drow@@mvista.com>

        * generic/gdbtk-cmds.c (gdb_disassemble_driver): Skip
        end-of-function markers in the line table.
@
text
@d1 9
@


1.211
log
@        * generic/gdbtk-cmds.c (gdb_load_disassembly): Use string_to_core_addr
        instead of parse_and_eval_address.
        Use xfree instead of free.
@
text
@d1 5
@


1.210
log
@2002-03-25  Elena Zannoni  <ezannoni@@redhat.com>

        * generic/gdbtk-hooks.c: Include cli/cli-decode.h for
        cmd_list_element.
@
text
@d1 6
@


1.209
log
@* generic/gdbtk.c (HAS_STDARG): Define.
* generic/gdbtk-cmds.c (HAS_STDARG): Likewise.
* generic/gdbtk-hooks.c (HAS_STDARG): Likewise.
@
text
@d1 5
@


1.208
log
@	* library/bpwin.itb (constructor): Set some sane initial
	size.
@
text
@d1 6
@


1.207
log
@2002-03-07  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (SrcTextWin::showBPBalloon): Put
	linefeeds between multiple breakpoints.
@
text
@d1 5
@


1.206
log
@2002-03-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb (SrcTextWin::showBPBalloon):
	Reformat output. Add conditions, ignore count, commands.

	* library/interface.tcl (gdbtk_tcl_readline): Remove
	call to "command::insert" and instead insert the command
	into the console window.
	(gdbtk_tcl_readline_end): Catch the unsets and do not call
	non-existent function command::end_multi_line_input.
@
text
@d1 5
@


1.205
log
@2002-03-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/bpwin.itb: Left-justify the labels in
	the table.
@
text
@d3 11
@


1.204
log
@        * generic/gdbtk-cmds.c: Include "ctype.h" if available.
        (gdb_get_mem): Renamed to gdb_update_mem.
        (gdb_update_mem): Take array as first tcl argument. This
        array will hold the data for the table, which is now stuffed
        in C instead of tcl.
        (gdb_eval): Use our own ui-file instead of gdb_stdout.
        * library/memwin.ith (_update_address): New method.
        (update_address): Address expression is no longer optional.
        * library/memwin.itb (build_win): Use _update_address instead of
        update_address.
        (toggle_enabled): Ditto.
        (newsize): Use _update_address instead of update_addr.
        (update_address_cb): Use _update_address instead of update_address.
        (do_popup): Likewise.
        (goto): Likewise.
        (incr_addr): Use _update_address instead of update_addr.
        (edit): Use gdb_update_mem instead of gdb_get_mem.
        (update_addr): use gdb_update_mem to do all the window updating.
@
text
@d1 5
@


1.203
log
@2002-03-06  Martin M. Hunt  <hunt@@redhat.com>

	* library/srcwin.itb: Don't try to set balloon help
	for search widget; it moved to srcbar.
@
text
@d1 21
@


1.202
log
@2002-03-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/prefs.tcl (pref_read): If a preference specifies
	"src-font", substitute "global/fixed".
	(pref_set_defaults): Change defaults from "src-font" to
	"global/fixed". Do not create font object "src-font". Do
	not add hook to trace its changes.
	(pref_src-font_trace): Remove.

	* library/console.itb (Console::_update_option): Remove
	font update because this happens automatically.

	* library/globalpref.itb: No need to set
	changed flag for fonts; updates happen automatically
	when prefs are updated.

	* library/bpwin.itb: Replaced src-font with global/fixed.
	* library/browserwin.itb: Ditto.
	* library/mempref.itb: Ditto.
	* library/memwin.itb: Ditto.
	* library/process.itb: Ditto.
	* library/regwin.itb: Ditto.
	* library/srcbar.itcl: Ditto.
	* library/srcpref.itb: Ditto.
	* library/srctextwin.itb: Ditto.
	* library/srcwin.itb: Ditto.
	* library/stackwin.itb: Ditto.
	* library/tdump.tcl: Ditto.
	* library/tracedlg.tcl: Ditto.
	* library/variables.tcl: Ditto.
	* library/watch.tcl: Ditto.
@
text
@d1 5
@


1.201
log
@	* generic/gdbtk-register.c (register_changed_p): Don't use REGISTER_BYTES.
	There is no guarantee anymore that REGISTER_BYTES contains
	NUM_REGS+NUM_PSEUDO_REGS registers.
	(setup_architecture_data): Likewise.
@
text
@d1 32
@


1.201.2.1
log
@* generic/gdbtk.c (HAS_STDARG): Define.
* generic/gdbtk-cmds.c (HAS_STDARG): Likewise.
* generic/gdbtk-hooks.c (HAS_STDARG): Likewise.
@
text
@a0 6
2002-03-25  Alexandre Oliva  <aoliva@@redhat.com>

	* generic/gdbtk.c (HAS_STDARG): Define.
	* generic/gdbtk-cmds.c (HAS_STDARG): Likewise.
	* generic/gdbtk-hooks.c (HAS_STDARG): Likewise.

@


1.200
log
@
	* library/srcbar.itcl (SrcBar::create_buttons): Added
	"Search in source file" entry box and label to the top
	row toolbar.
	* library/srcwin.itb (SrcWin::_build_win): Removed
	"Search in source file" entry box.
	(SrcWin::_search): Renamed to "search", add string
	parameter and cleaned up.
	* library/srcwin.ith (SrcWin): Removed private
	method "_search" and added public method "search".
@
text
@d1 7
@


1.199
log
@	* library/tclIndex: Updated.
	* library/srcbar.itcl (SrcBar): Use new Session namespace.
	* library/main.tcl: Use new Session namespace.
	* library/interface.tcl (gdbtk_tcl_preloop): Use new Session
	namespace.
	(gdbtk_cleanup): Likewise.
	(_close_file): Likewise.
	* library/session.tcl: Use a namespace.  Renamed all functions.
@
text
@d1 12
@


1.198
log
@2002-02-13  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_print_frame_info): Don't
	set GDB globals current_source_symtab and current_source_line.
	Let GDB do it.
@
text
@d1 11
@


1.197
log
@	* library/managedwin.itb (_create): If given a transient window,
	make sure that the SrcWin that is to become its master exists;
	otherwise, use ".".
@
text
@d1 6
@


1.196
log
@	From Don Bowman <don@@sandvine.com>:
	* library/targetselection.itb (init_target_db): Add target
	vxWorks.
        Update copyright.
@
text
@d1 6
@


1.195
log
@2002-02-10  Daniel Jacobowitz  <drow@@mvista.com>

        * symtab.c (compare_search_syms): New function.
        (sort_search_symbols): New function.
        (search_symbols): Sort symbols after searching rather than
        before.

2002-02-10  Daniel Jacobowitz  <drow@@mvista.com>

        * generic/gdbtk-cmds.c (gdb_listfuncs): Don't call
        BLOCK_SHOULD_SORT.
        * library/browserwin.itb (BrowserWin::_fill_funcs_combo): Sort
        the output of gdb_listfuncs.
@
text
@d1 7
@


1.194
log
@2002-02-07  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk.c, generic/gdbtk-bp.c, generic/gdbtk-cmds.c,
	generic/gdbtk-hooks.c, generic/gdbtk-stack.c: Cleanup includes.
@
text
@d1 7
@


1.193
log
@2002-02-06  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk.c, generic/gdbtk-bp.c, generic/gdbtk-cmds.c,
	generic/gdbtk-hooks.c, generic/gdbtk-register.c,
	generic/gdbtk-stack.c, generic/gdbtk-varobj.c,
	generic/gdbtk-wrapper.c: Cleanup. Fix indentation. Fix
	function declarations. Remove unused variables. Add 2002
	copyrights.
@
text
@d1 5
@


1.192
log
@	* library/images/cygnus.gif: Remove.
	* library/images2/cygnus.gif: Remove.
@
text
@d1 9
@


1.191
log
@2002-02-05  Elena Zannoni  <ezannoni@@redhat.com>

        * generic/gdbtk-cmds.c (gdbtk_load_asm, gdbtk_print_asm): Use
        TARGET_PRINT_INSN instead of tm_print_insn.
@
text
@d1 5
@


1.190
log
@        * library/console.ith (get_text): Delete.
        (test): New public method.
        * library/console.itb (get_text): Delete.
        (test): New public method.
@
text
@d1 5
@


1.189
log
@	* generic/gdbtk-varobj.c (variable_value): When varobj_get_value
	fails, use error_last_message to return the error to tcl land.
	This allows us to display nice messages about why "0xdeadbeef" is
	not accessible!
@
text
@d1 7
@


1.188
log
@2002-01-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/memwin.itb (idle): Check for existence of window.
	Prevents race-condition error.
@
text
@d1 7
a100 1718
2001-12-21  Tom Tromey  <tromey@@redhat.com>

	* generic/gdbtk-cmds.h (full_lookup_symtab): Don't declare.
	* generic/gdbtk-cmds.c (gdb_find_file_command): Use
	lookup_symtab.
	(gdb_listfuncs): Likewise.
	(gdb_loadfile): Likewise.
	(full_lookup_symtab): Removed.
	* generic/gdbtk-bp.c (gdb_find_bp_at_line): Use lookup_symtab.
	(gdb_set_bp): Likewise.

2001-12-21  Keith Seitz  <keiths@@redhat.com>

	* library/bpwin.ith (_select_and_popup): New private method.
	* library/bpwin.itb (bp_select): Don't bind to Button-3.
	(build_win): Bind Button-3 to _select_and_popup.
	(_select_and_popup): New private method.

2001-12-18  Keith Seitz  <keiths@@redhat.com>

	* library/memwin.itb (incr_addr): Fix typo.

2001-12-16  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (hex2bin): Replace LITTLE_ENDIAN with
	BFD_ENDIAN_LITTLE.

2001-12-10  Ian Roxborough  <irox@@redhat.com>

	* library/interface.tcl (set_target_name): Call "pref getd"
	instead of "pref get" to avoid undefined preference error
	message for default-hostname.

2001-12-07  Keith Seitz  <keiths@@redhat.com>

	* library/managedwin.itb (shutdown): Don't save geometry for
	plugins, either.

2001-12-05  Keith Seitz  <keiths@@redhat.com>

	* library/console.itb (busy): Set the cursor to the watch.
	(idle): Reset cursor to normal.

2001-11-30  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_eval): Remove
	undocumented debug function.

2001-11-21  Tom Tromey  <tromey@@redhat.com>

	* library/interface.tcl (gdbtk_tcl_preloop): Override session's
	command-line arguments if required.

2001-11-20  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): If DISPLAY is not set on Unix,
	clear the init_ui_hook so that gdb will properly initialize
	the cli.

2001-11-08  Martin M. Hunt  <hunt@@redhat.com>
	* generic/gdbtk-cmds.c (gdb_eval): Add an optional
	format argument.
	(hex2bin): Swap bytes around if target is little endian.
	Fix loop count.
	(gdb_incr_addr): New function to do address arithmetic.
	Needed because some addresses are 64-bits and tcl can't
	deal with them, except as strings.

	* library/memwin.itb (MemWin::build_win): Add a label
	to indicate the target endianess.
	(MemWin::edit): Use gdb_incr_addr.
	(MemWin::busy): The constructor calls gdbtk_busy which
	calls this before the window has finished drawing, so
	don't disable items that don't exist yet.
	(MemWin::update_address): Set a flag, bad_expr, if the
	expression does not evaluate. Call gdb_eval with 'x' flag
	to force the result to be hex.
	(MemWin::BadExpr): Set bad_expr.
	(MemWin::incr_addr): Use gdb_incr_addr.
	(MemWin::update_addr): Return is bad_expr is set. Use
	gdb_incr_addr.
	(MemWin::goto): Call update_address.
	* library/memwin.itb: Declare private variable bad_expr.
	
	* library/util.tcl (gdbtk_endian): New procedure. Returns
	BIG or LITTLE to indicate target endianess.

2001-11-08  Martin M. Hunt  <hunt@@redhat.com>	
	* library/managedwin.itb (ManagedWin::shutdown): Fix
	typo in class name DebugWinDOpts.

	* library/debugwin.itb: Add MemWin to _classes.

2001-11-05  Martin M. Hunt  <hunt@@redhat.com>
	* generic/gdbtk-cmds.h (gdbtk_set_result): Declare.
	A printf-like function to return error messages.
	* generic/gdbtk-cmds.c (gdbtk_set_result): New
	function.
	(gdb_cmd): Use gdbtk_set_result.
	(gdb_immediate_command): Ditto.
	(gdb_load_info): Ditto.
	(gdb_find_file_command): Ditto.
	(gdb_listfuncs): Ditto.
	(gdb_load_disassembly): Ditto.
	(gdb_loc): Ditto.
	(gdb_set_mem): Ditto.
	(gdb_get_mem): Ditto.
	(gdb_loadfile): Ditto.
	* generic/gdbtk-varobj.c (variable_format): Ditto.
	(variable_value): Ditto.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Ditto.
	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Ditto.
	(gdb_set_bp): Ditto.
	(gdb_set_bp_addr): Ditto.
	(gdb_get_tracepoint_info): Ditto.

2001-11-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/stackwin.itb (StcakWin::reconfig): Destroy sbox 
	if it exists.

	* library/process.itb (ProcessWin::reconfig): Destroy sbox 
	if it exists. This fixes reconfig failures on Windows. Also 
	destroy slbox.

	* library/bpwin.itb (BpWin::reconfig): Destroy sbox if 
	it exists.This fixes reconfig failures on Windows. Also 
	destroy sf
	
	* library/tdump.tcl (TdumpWin::reconfig): Delete sbox
	and stext then rebuild window.

2001-11-05  Martin M. Hunt  <hunt@@redhat.com>	

	* library/debugwin.itb (DebugWin::build_win): 
	Initialize gdbtk_de(ERRORS_ONLY) and gdbtk_de(filter_var)
	(DebugWin::puts): Rewrite filter to handle new options.
	(DebugWinDOpts::build_win): Update list of classes. Change 
	filter dialog so we can not display only errors and warnings
	or choose between displaying ALL classes except those selected
	or only selected classes. Fix "OK" button to apply
	changes before closing dialog.
	DebugWinOpts::_apply): Now takes an agrument that
	indicates if dialog should exit after applying filter.
	
	* library/debugwin.ith (_apply): Now takes an arg.

	* library/main.tcl: If GDBTK_DEBUGFILE is not set,
	use "insight.log" as the default. If GDBTK_DEBUG is set
	and nonzero, start logging debug messages to
	GDBTK_DEBUGFILE immediately. Never open the debug window
	automatically.

	* library/managedwin.itb (ManagedWin::shutdown): Don't 
	save debug window options dialog on active list
	
	* library/srcwin.itb: Remove troublesome debug line.

2001-11-05  Martin M. Hunt  <hunt@@redhat.com>
	* library/globalpref.itb (GlobalPref::_init_var):
	New method to initialize _saved and _new arrays.
	(GlobalPref::constructor): Call _init_var.
	(GlobalPref::_buildwin): Use _new array for prefs
	variables. Font optimizations. Remove troublesome
	fonts and sort the list.
	(GlobalPref::toggle_tracing_mode): Removed.  Some
	functionality moved to _apply and _cancel.
	(GlobalPref::_apply): Set prefs with values from the
	_new array.
	(SrcPref::_cancel): Reset prefs with values from _saved.
	* library/globalpref.ith: Changed private variables
	and methods to start with underscore.
	(tracing_cb): Removed.
	(_init): Changed from proc to method.

2001-11-01  Keith Seitz  <keiths@@redhat.com>

	* library/memwin.itb (update_addr): Evaluate the address
	to be sent to gdb_get_mem to prevent passing error strings
	to string_to_coreaddr in gdb_get_mem.

2001-10-29  Martin M. Hunt  <hunt@@redhat.com>	

	* library/debugwin.itb: Don't increment number of
	TopLevelWins. 

	* library/managedwin.itb: Don't save DebugWins to
	active list.

2001-10-29  Martin M. Hunt  <hunt@@redhat.com>		

	* generic/gdbtk-bp.c (gdb_set_bp_addr): When setting
	the bp addr_string, use the string the function was called
	with instead of using sprintf to write a new one. This
	avoids a problem with truncating 64-bit addresses.

	* library/srcbar.itcl (SrcBar::create_buttons) Don't
	set width of address label.
	(SrcBar::address) When the address changes, recompute
	width of address label.  If it is more than 10, force it
	to 18, otherwise use 10.
	
2001-10-29  Martin M. Hunt  <hunt@@redhat.com>	

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Use
	string_to_core_addr to read address so 64 bits will work.
	(gdb_set_bp): Set error message with Tcl_SetObjResult()
	so it will be displayed.
	(gdb_set_bp_addr):Use string_to_core_addr to read address.
	Set error message with Tcl_SetObjResult().

	* generic/gdbtk-cmds.c (gdb_get_mem): :Use string_to_core_addr 
	to read address. Set error message with Tcl_SetObjResult() or
	Tcl_WrongNumArgs.
	
2001-10-27  Tom Tromey  <tromey@@redhat.com>

	* tclIndex: Updated.
	* library/main.tcl: Add session_notice_file_change to
	file_changed_hook.
	* library/session.tcl (session_load): Only load the executable.
	(session_notice_file_change): New proc.
	(SESSION_exe_name): New proc.
	(session_save): Use it.
	(session_notice_file_change): Likewise.
	* library/interface.tcl (gdbtk_tcl_exec_file_display): Don't call
	session_save.
	(gdbtk_tcl_preloop): Don't set executable name or try to find
	main.  Notice a new session if required.
	
2001-10-18  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/srcpref.itb (SrcPref::contructor): Move array
	initialization to _init_var.
	(SrcPref::_init_var): New method to initialize _saved and 
	_new arrays.
	(SrcPref::buildwin): Rename to _buildwin. Have widgets use 
	_new instead of [pref varname ...].  Set initial value of
	tab size spinint.
	(SrcPref::_apply): Set prefs with values from the _new array.
	(SrcPref::_cancel): Reset disassembly flavor and don't call 
	_save because nothing is saved unless OK is selected.
	(SrcPref::set_flavor): Rename to _set_flavor.
	(SrcPref::_pick): Just set _new, not prefs.
	
	* library/srcpref.ith: Add private variable _new and
	private method cancel. Rename others with leading underscore.

2001-10-16  Andrew Cagney  <ac131313@@redhat.com>

	From 2001-08-29 John Moore <jmoore@@redhat.com>:
	* gdbtk/generic/gdbtk-cmds.c (gdb_disassemble): Replaced
	parse_and_eval_address() with string_to_core_addr().
	(gdb_load_disassembly): Same.
	(gdb_set_mem): Ditto.
	* gdbtk/generic/gdbtk-stack.c (gdb_block_vars): Ditto.
	* gdbtk/generic/gdbtk-varobj.c (variable_create): Same.

2001-10-17  Tom Tromey  <tromey@@cygnus.com>

	* console.itb (Console::_build_win): Handle bindings which
	are ";".  Also, completely override underlying Text binding.

2001-10-12  Tom Tromey  <tromey@@redhat.com>

	* library/console.itb (Console::_build_win): Bind Control-m and
	Control-j.

2001-10-12  Daniel Jacobowitz  <drow@@mvista.com>

	* generic/gdbtk-cmds.c (gdb_listfuncs): Use ALL_BLOCK_SYMBOLS.
	* generic/gdbtk-stack.c (gdb_block_vars): Likewise.
	(gdb_get_blocks): Likewise.
	(gdb_get_vars_command): Likewise.

2001-10-10  Ian Roxborough  <irox@@redhat.com>

	* library/gdbtoolbar.itcl (GDBToolBar::add): Add option
	for "custom" type. 
	(GDBToolBar::toolbar_add_custom): new method.

2001-10-06  Tom Tromey  <tromey@@redhat.com>

	* library/session.tcl (SESSION_recreate_bps): Use
	gdb_run_readline_command_no_output to recreate breakpoints.
	* library/interface.tcl (gdb_run_readline_command): Set
	readlineShowUser element of gdbtk_state.
	(gdb_run_readline_command_no_output): New proc.
	(initialize_gdbtk): Initialize readlineShowUser element.
	(gdbtk_tcl_readline_begin): Use readlineShowUser element.
	(gdbtk_tcl_readline): Likewise.

2001-10-05  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (get_breakpoint_commands): New function.
	(gdb_get_breakpoint_info): Use gdb_breakpoint_commands to
	assemble breakpoint commands information.

2001-10-02  Tom Tromey  <tromey@@redhat.com>

	* library/tclIndex: Updated.
	* library/prefs.tcl (pref_set_defaults): Define gdb/editor
	preference.
	* library/srcpref.itb (SrcPref::constructor): Save gdb/editor
	preference.
	(SrcPref::build_win): Added external editor control.
	* library/srctextwin.itb (SrcTextWin::do_source_popup): Always
	enable external editor.  Use `code' instead of `list'.
	* library/srcwin.itb (SrcWin::edit): Use Editor::edit.
	* library/editor.tcl: New file.
	* generic/gdbtk.c (enable_external_editor): Removed.
	(external_editor_command): Default to NULL.
	(gdbtk_init): Don't set enable_external_editor.  Free external
	editor command when finished with it.

2001-09-28  Tom Tromey  <tromey@@redhat.com>

	* library/console.itb (Console::_operate_and_get_next): New method.
	(Console::_setprompt): Insert next history element if requested.
	(Console::_build_win): Bind C-o to _operate_and_get_next.
	* library/console.ith (_operate_and_get_next): Declare.
	(_pendingHistElement): New variable.

2001-09-27  Elena Zannoni  <ezannoni@@redhat.com>

	* library/targetselection.itb (build_win, default_port): Handle
        hpux 11.00.

2001-09-27  Keith Seitz  <keiths@@redhat.com>

        * library/prefs.tcl (escape_value): Update to work
        with Tcl's new and old syntax.

2001-09-19  Keith Seitz  <keiths@@redhat.com>

	* library/main.tcl: Append iwidgets library path, if needed.
	* generic/gdbtk.c (gdbtk_init): Add TCLLIBPATH to iwidgets
	package index.
	Define IWIDGETS_LIBRARY in interpreter so that we can add
	this path to the auto_path at the right time later.

2001-09-10  Ian Roxborough <irox@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Set IWIDGETS_LIBRARY if
	Insight is launched from within the build directory.
	* library/util.tcl (find_iwidgets_library): Removed.
	* library/main.tcl: Don't call find_iwidgets_library, do a 
	package require instead.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/bpwin.itb (bp_select): Use standard preferences
	for selection fg & bg, not tixOption database.

	* process.itb, tracedlg.tcl: Remove all traces of those
	three evil little letters, "t", "i", "x".

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/tracedlg.tcl (build_win): Use libgui's
	Labelledframe instead of tixLabelFrame.
	Use iwidgets::scrolledlistbox instead of tixScrolledListbox.
	(edit): Check if there is a selection in the listbox
	before proceeding.
	Escape method callbacks before passing to ActionDlg.

	* library/actiondlg.tcl (constructor): Use "gdb_reginfo"

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/tdump.tcl (class TdumpWin): Inherit from GDBWin
	and ManagedWin.
	(constructor): Remove old itcl2 handling code and name the
	window.
	(build_win): Use iwidgets::scrolledtext instead of
	tixScrolledText.
	(twin): Remove unused variable. Use itk_component(stext)
	instead.
	(maxwidth): Remove unused variable.
	(destructor): Remove unused method.
	(config): Ditto.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/srcpref.itb (build_win): Use iwidgets::spinint
	instead of tixControl.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/process.ith (top): Remove unused protected variable.
	Use GDBWin::_top instead.
	(lb): Remove unused variable.
	(change_context): Remove parameter. It's not needed.
	* library/process.itb (constructor): Don't set the variable
	"top". It isn't needed. GDBWin has this information.
	(buildwin): Get rid of tixScrolledListbox. Use
	iwidgets::scrolledlistbox instead.
	Loose the balloon help. It annoys more than helps.
	(update): Use new scrolledlistbox component.
	Split the list of threads BEFORE doing llength. Someone
	shoot me if this has to be fixed one more time...
	(change_context): Update definition and usage.
	(cursor): Use GDBWin::_top instead of our own private copy.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_disassemble_driver): We should be
	looking for "thread", not "threads" to determine if we have
	a multi-threaded child process.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/bpwin.itb (build_win): Get rid of tixScrolledWindow
	and use iwidgets::scrolledframe until something better comes
	along.

2001-08-23  Tom Tromey  <tromey@@redhat.com>

	* library/srcwin.itb (SrcWin::fillFuncCB): Sort function names.

2001-08-23  Martin M. Hunt  <hunt@@redhat.com>

	* library/targetselection.itb: Added PMON and DDB targets.

2001-08-22  Tom Tromey  <tromey@@redhat.com>

	* library/prefs.tcl (pref_read): Version number appears in
	comment.

2001-08-21  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Gdb just fixed this. No
	need for the workaround I just checked in anymore.

2001-08-21  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Reinitialize disassemle info's
	stream parameter: we just deleted the one it saved when we
	re-routed gdb_stdout to our own gdb_stdout.

2001-08-20  Keith Seitz  <keiths@@redhat.com>

	* library/stackwin.itb (build_win): Use iwidget's scrolled listbox
	instead of tix scrolled list box.
	(update): Update to use iwidget's scrolled list box.
	(change_frame): Ditto.
	Remove parameters.
	* library/stackwin.ith (change_frame): Remove all parameters.

2001-08-20  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_load_disassembly): Save the original
	address from parse_and_eval_address: if find_pc_partial_function
	errors, we will lose our original address.
	If find_pc_partial_function does error, print out both
	the address we thought we were disassembling at AND the address
	we actually did disassemble at. This should help elide address-
	to-pointer and pointer-to-address problems.
	* library/srctextwin.itb (FillAssembly): When gdb_load_disassembly
	fails, use its error message instead of the cooked "Unable to
	Read insturctions..." message.
	(UnLoadFromCache): If oldpane is empty, don't try show it,
	don't try to set our view to it, don't do anything but
	erase the given pane.

2001-08-17  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-varobj.c (variable_obj_command): Pass pointer
	to varobj* when calling variable_update (API changed).
	(variable_create): Don't pass varobj* to install_variable. It's
	not used.
	(variable_children): Likewise.
	(variable_update): Change parameters to accept pointer to
	varobj*. Matches API change in varobj_update.
	(install_variable): Remove unused "var" parameter.

2001-08-16  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Revert change from earlier.
	It is insufficient. We must get the absolute pathname
	from autoconf.
	Don't bother setting TCL_LIBRARY: it must be set already
	in order for us to execute a script.

2001-08-16  Keith Seitz  <keiths@@redhat.com>

	* library/globalpref.ith (_change_font, _change_size): New
	private methods.
	(_size): New private variable.
	(font_changed, wfont_changed): Removed.
	* library/globalpref.itb (make_font_item): Change combobox
	callback to use _change_font.
	Replace tixControl with iwidgets::spinint.
	(font_changed, wfont_changed): Removed.
	(_change_font, _change_size): New private methods.
	* tclIndex: Regenerate.

2001-08-16  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Make sure we're working with
	absolute pathnames in the *_LIBRAY variables.

2001-08-16  Keith Seitz  <keiths@@redhat.com>

	From Ian Roxborough  <irox@@redhat.com>
	* generic/gdbtk-hooks.c (x_event): Deal with Tcl API insanity
	for Tcl_ObjGetVar2 or Tcl_GetObjVar2.
	(gdbtk_trace_find): Likewise for Tcl_GlobalEvalObj
	or Tcl_EvalObj (TCL_EVAL_GLOBAL).

2001-08-15  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Don't assume a particular
	layout for the source directory, let the Makefile tell us
	where the real source directory is.
	When compiling under Cygwin, convert the (posix) path to a
	win32 path, which is what tcl really wants.

2001-08-15  Ian Roxborough  <irox@@redhat.com>

        * generic/gdbtk.c (gdbtk_init): If Insight isn't
        executed from inside a directory called "bin",
        assume that we are being running from the build
        directory and set the *_LIBRARY variables to point
        to (hopefully) the correct source directory.

2001-08-13  Keith Seitz  <keiths@@redhat.com>

	* library/regwin.ith: Rewrite.
	* library/regwin.itb: Rewrite.
	* library/tclIndex: Regenerate.

2001-08-13  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-register.c (gdb_register_info): New function.
	Consolidates all register handling.
	(get_register_size): New function.
	(gdb_changed_register_list, gdb_fetch_registers,
	gdb_regnames): Deprecate.
	(setup_architecture_data): Free old register cache
	when necessary.

2001-08-13  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Register
	architecture_changed event handler.
	(gdbtk_architecture_changed): New function.
	* library/gdbevent.ith (class ArchChangdEvent): New event.
	* library/ehandler.ith (arch_changed): New method. Handler
	for ArchChangedEvents.
	* library/interface.tcl (gdbtk_tcl_architecture_changed): New
	proc to handle architecture change events.

2001-08-09  Keith Seitz  <keiths@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Add new font
	color defaults for highlighting, headers, selecting, and "normal".
	Get rid of gdb/variable/highlight_fg and gdb/reg/highlight_fg.
	* library/variables.tcl (build_win): Use gdb/font/highlight_fg
	and gdb/font/highilght_bg to set highlight style.
	* library/memwin.itb (build_win): Use header_fg and header_bg.

2001-08-03  Keith Seitz  <keiths@@redhat.com>

	* library/srcbar.itcl (_post): New method.
	(_update_file_menu): New method.
	(create_file_menu): Move the guts to _update_file_menu.
	Add a post command to the menu.
	* library/interface.tcl (gdbtk_tcl_file_changed): Catch the
	call to run_hooks.
	(gdbtk_tcl_exec_file_display): Save the new session, too.
	(set_exe_name): Don't bother saving the session here.
	(_close_file): Save the session here, too.
	(gdbtk_clear_file): Catch the call to run_hooks, too.
	* library/gdbmenubar.itcl (menubar_new_menu): Allow caller
	to specify optional arguments to be passed to Tk when
	creating the menu.
	Tk's "menu add" command returns an empty string. Save the
	menu's index in the parent instead. This is what all
	the menu subcommands want.

2001-08-02  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Update
	with recent breakpoint structure changes in gdb.
	(gdb_set_bp_addr): Likewise.
	(gdb_get_tracepoint_info): Update with recent tracepoint
	structure changes in gdb.

2001-07-31  Elena Zannoni  <ezannoni@@redhat.com>

	* generic/gdbtk-cmds.c: Don't include regcache.h.
	* generic/gdbtk-register.c: Include regcache.h.
	
2001-07-26  Jonathan Larmour  <jlarmour@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Add additional entry
	points for eCos if main is not present.

2001-07-21  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_locate_main): Fix function 
	so that it returns either a null string or a valid location,
	as documented.

	* library/variables.tcl (build_menu_helper): Set
	the Format menu option to "disabled" initially.

2001-07-20  Martin M. Hunt  <hunt@@redhat.com>

	* library/managedwin.itb: Revert to global to properly
	initialize geometry with some window managers.
	* library/managedwin.ith (shutdown): Remove _geometry.

	* library/memwin.itb: Fix syntax to open a new window
	using the "-force" flag.

	* generic/gdbtk-register.c (gdb_regnames): Fix 'if'
	statement so count is decremented only if "-numbers"
	is the first arg.

2001-07-18  Martin M. Hunt  <hunt@@redhat.com>

	* library/util.tcl (find_iwidgets_library): Look
	for iwidgets3* so we don't accidently find iwidgets2.x.

2001-07-16  Nick Duffek  <nsd@@redhat.com>

	* library/regwin.itb (RegWin::build_win): Add radio button
	for unsigned register format.
	(RegWin::reg_select): Iterate through 8 rather than 7 formats.
	(RegWin::but3): Add menu option for unsigned register format.

2001-07-13  Keith Seitz  <keiths@@redhat.com>

	* library/download.itb (constructor): Use the iwidgets
	feedback widget instead of tixMeter.
	Pack all the topmost widgets together -- don't use grid.
	(update_download): Support the feedback widget.
	(done): Ditto.

	* library/download.ith (steps): New private variable.
	(num_steps): New common.

2001-07-12  Keith Seitz  <keiths@@redhat.com>

	* library/srcbar.itcl (create_trace_buttons): Fix
	syntax errors.

	* library/tracedlg.tcl: Update to work with Itcl3.0
	and ManagedWin.

	* library/actiondlg.tcl: Update to work with Itcl3.0
	and ManagedWin.
	(build_win): Use iwidgets scrolled listbox instead
	of the tix one.

2001-07-05  Keith Seitz  <keiths@@redhat.com>

	* library/managedwin.itb (_create): Don't pass "-over"
	to center_window unless we really are asked to put the
	window over another!

2001-06-18  Keith Seitz  <keiths@@redhat.com>

	* library/managedwin.itb (_create): When creating a
	window over another, be sure to center on the window,
	not the object.

2001-06-13  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdbtk_tracepoint_create): Change
	parameter to int to match breakpoint notifications.
	(gdbtk_tracepoint_modify): Ditto.
	(gdbtk_tracepoint_delete): Ditto.
	(tracepoint_notify): Ditto.
	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Remove
	tracepoint hooks and install tracepoint event handlers.

2001-06-11  Tom Tromey  <tromey@@redhat.com>

	* library/help/session.html: New file.
	* library/help/index.html: Added link.

	* library/session.tcl (session_save): Save breakpoints.
	(SESSION_serialize_bps): New proc.
	(SESSION_recreate_bps): New proc.
	(session_load): Recreate breakpoints.
	* library/util.tcl (bp_exists): Expect user specification in
	breakpoint info.
	* library/srctextwin.itb (SrcTextWin::showBPBalloon): Expect user
	specification in breakpoint info.
	* library/gdbevent.itb (BreakpointEvent::_init): Initialize
	_user_specification.
	(BreakpointEvent::get): Handle user_specification.
	* library/gdbevent.ith (BreakpointEvent): Added
	_user_specification field.
	* library/bpwin.itb (BpWin::bp_store): Expect user specification
	and use it when saving.
	(BpWin::bp_type): Expect user specification.
	* generic/gdbtk-bp.c (BREAKPOINT_IS_WATCHPOINT): New macro.
	(gdb_get_breakpoint_info): Added `user specification' to result.

2001-06-11  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-stack.c (gdb_stack): Return TCL_ERROR if
	we are unable to get the current frame. get_current_frame
	may have output an error message.

2001-06-07  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c (x_event): Remove unused variable "count".
	(tracepoint_notify): Remove superfluous declaration. This funtion
	was moved to gdbtk-bp.c.

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Remove unused variable
	"b".
	(gdb_set_bp): Remove unused variable "cmd".
	(gdb_set_bp_addr): Remove unused variables "cmd" and "filename".

	* generic/gdbtk.c (gdbtk_init): Remove unused variables
	"auto_path_name", "auto_path_elem", and "found_main".

2001-06-05  Martin Hunt  <hunt@@redhat.com>                                    

	* generic/gdbtk.c (_initialize_gdbtk): Don't close console yet.
	(gdbtk_init): Wait until after tcl/tk stuff is all initialized
	to close console (on Windows) and redirect ouput.
	
2001-06-05  Martin Hunt  <hunt@@redhat.com>

	* library/globalpref.itb(build_win): Don't change directory
	before building icon combobox.  Add debug lines.

2001-06-04  Keith Seitz  <keiths@@redhat.com>

	* library/srcbar.itcl (constructor): Set the toolbar's initial
	state.

2001-06-04  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdb_update_hook): Mark as deprecated.
	(gdbtk_update): Dispatch and UpdateEvent, too.
	* library/ehandler.ith (update): New event handler.
	* library/gdbevent.ith (UpdateEvent): New event.
	* library/gdbevent.itb (UpdateEvent::constructor): New method.
	(UpdateEvent::get): New method.
	* library/kod.ith (udpate): Match event handler definition.
	* library/kod.itb (update): Ditto.
	(build_win): Pass dummy argument to update method.
	(top): Ditto.
	(up): Ditto.
	(set_variable): Ditto.
	* library/memwin.ith (update): Match event handler definition.
	* library/memwin.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	* library/process.ith (update): Match event handler definition.
	* library/process.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	* library/regwin.ith (update): Match event handler definition.
	* library/regwin.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	(but3): Ditto.
	(unedit): Ditto.
	* library/stackwin.ith (update): Match event handler definition.
	* library/stackwin.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	* library/tdump.tcl (update): Match event handler definition.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	* library/variables.tcl (update): Match event handler definition.
	(build_win): Pass dummy argument to update method.
	* library/locals.tcl (update): Match event handler definition.
	(constructor): Pass dummy argument to update method.
	* library/watch.tcl (update): Match event handler definition.
	Pass dummy argument to VariableWin::update.
	(add): Pass dummy argument to update method.
	* library/srcwin.ith (update): New method.
	(update_hook_init): Remove.
	* library/srcwin.itb (update): New method.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	* tclIndex: Regenerate.

2001-06-01  Keith Seitz  <keiths@@redhat.com>

	* library/console.itb (constructor): Pass dummy argument
	to idle method.
	(destructor): Ditto.

2001-05-31  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdbtk_idle): Run hooks, too,
	until they're all gone.

2001-05-31  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdb_idle_hook): Mark as deprecated.
	(gdbtk_idle): Dispatch an IdleEvent. gdb_idle_hook is gone.
	* library/ehandler.ith (idle): New event handler.
	* library/gdbevent.ith (IdleEvent): New event.
	* library/console.ith (idle): Match event handler definition.
	* library/console.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/kod.ith (idle): Match event handler definition.
	* library/kod.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/memwin.ith (idle): Match event handler definition.
	* library/memwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/pluginwin.itcl (stopped): Rename to "idle" and
	match event handler definition.
	Fix misleading comments.
	* library/process.ith (idle): Match event handler definition.
	* library/process.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/regwin.ith (idle): Match event handler definition.
	* library/regwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/srcbar.itcl (idle): New method.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/srcwin.ith (idle): Match event handler definition.
	* library/srcwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/stackwin.ith (idle): Match event handler definition.
	* library/stackwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/variables.tcl (idle): Match event handler definition.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/plugins/rhabout/rhabout.itcl (stopped): Rename
	to "idle" and match new event handler definition.
	* library/tclIndex: Regenerated.

2001-05-31  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdb_busy_hook): Deprecate.
	(gdbtk_busy): Create and dispatch a BusyEvent instead
	of running hooks.
	* library/ehandler.ith (busy): New event handler.
	* library/gdbevent.ith (BusyEvent): New event class.
	* library/console.ith: Inherit from GDBEventHandler.
	(busy): Match event handler definition.
	* library/console.itb (busy): Ditto.
	(constructor): Remove gdb_busy_event.
	(destructor): Ditto.
	* library/kod.ith (busy): Match event handler definition.
	* library/kod.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/memwin.ith (busy): Match event handler definition.
	* library/memwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/pluginwin.itcl (running): Rename to "busy" and
	match event handler definition.
	(consturctor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/process.ith (busy): Match event handler definition.
	* library/process.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/regwin.ith (busy): Match event handler definition.
	* library/regwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/srcbar.itcl (constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	(busy): New method.
	* library/srcwin.ith (busy): Match event handler definition.
	* library/srcwin.itb (busy): Ditto.
	Only do the "busy" stuff if do_updates is set.
	(toggle_updates): Remove gdb_busy_hook.
	(constructor): Ditto.
	(destructor): Ditto.
	* library/stackwin.ith (busy): Match event handler definition.
	* library/stackwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/variables.tcl (constructor): Ditto.
	(destructor): Ditto.
	(disable_ui): Rename to "busy" and match event handler
	definition.
	* library/plugins/rhabout/rhabout.itcl (running): Rename
	to "busy" and match new event handler definition.
	* library/tclIndex: Regenerated.

2001-05-25  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-cmds.c (bin2hex): New function.
	(fromhex): New function.
	(gdb_set_mem): New function.
	(Gdbtk_Init): Add new command, "gdb_set_mem".
	* library/memwin.itb (edit): Use "gdb_set_mem" to set
	memory, not some gdb_cmd contrivance.
	When sending data to gdb_set_mem, make sure that it
	is properly zero-padded.

2001-05-22  Keith Seitz  <keiths@@cygnus.com>

	* memwin.ith (error_dialog): Declare public method.
	* memwin.itb (error_dialog): Define.
	(edit): When attempting to set memory, post an error dialog
	if gdb told us an error occurred while writing the memory.

2001-05-22  Keith Seitz  <keiths@@cygnus.com>

	* library/interface.tcl (gdbtk_tcl_file_changed): Handle
	the case of empty-string files, sent by gdb when the
	user requests to reset the file.
	(_close_file): New proc to deal with closing an exe.
	* library/srcbar.itcl (create_file_menu): Add "Close" menu
	option.
	(create_view_menu): Change key binding for Watch Window to
	Ctrl+T to accomodate "Close" going to Ctrl+W.
	* library/srctextwin.itb (config_win): Update key binding
	for Watch Window.
	Add key binding for Close.
	(do_key): Add "close".
	(_clear_cache): Finally implement. I think this works now.

2001-05-22  Keith Seitz  <keiths@@cygnus.com>

	* library/variables.tcl (postMenu): Add mysterious workaround
	for popup menu bug in Tk for windows.
	Highlight the selection, too.

2001-05-21  Keith Seitz  <keiths@@cygnus.com>

	* library/managedwin.itb (_create): Check the geometry of
	any window we create. Don't create a window that is
	bigger than the screen.

2001-05-18  Keith Seitz  <keiths@@cygnus.com>

	* library/managedwin.ith (_geometry): Use a protected variable
	instead of a global from ManagedWin::reveal.
	(open): Make arg list reflect managedwin.itb.
	* library/managedwin.itb (window_name): Use class variable
	_top instead of recomputing the toplevel every time.
	(reveal): Ditto.
	Use class variable "_geometry" instead of global variable.
	(shutdown): Do not save ModalDialogs.
	(_create): If centering the new window, use libgui's
	center_window to do it.

2001-05-18  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-hooks.c (gdbtk_wait): Change integer pid
	argument to match gdb's new "ptid_t" pids.

2001-05-14  Keith Seitz  <keiths@@cygnus.com>

	* library/interface.tcl (gdbtk_quit_check): Don't save sessions
	here. It doesn't work for the Console Window.
	(gdbtk_cleanup): Save session information here.
	(gdbtk_tcl_exec_file_display): When files are loaded,
	get the full pathname to the exe.

2001-05-11  Tom Tromey  <tromey@@redhat.com>

	* library/prefs.tcl (pref_save): Fix bug when key in gdb space has
	extra `/' in it.

2001-05-11  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-bp.c (set_raw_breakpoint): Revise declaration
	to match the recently changed declaration in breakpoint.c. 
	Update all callers.

2001-05-11  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-bp.c (gdbtk_create_breakpoint): Safe guard
	against "invalid" (internal) breakpoint numbers.
	(gdbtk_modify_breakpoint): Ditto.
	(gdbtk_delete_breakpoint): Ditto.

2001-05-10  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-bp.c (gdb_set_bp): Generate a breakpoint event
	when we create a breakpoint. The hook is no longer used.
	(gdb_set_bp_addr): Ditto.

2001-05-10  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-bp.c (breakpoint_list, breakpoint_list_size): New
	variables. Gdb is forcing us to maintain our own breakpoint
	database.
	(Gdbtk_Breakpoint_Init): Initialize our breakpoint database.
	(gdb_find_bp_at_addr): Use our breakpoint database.
	(gdb_find_bp_at_line): Ditto.
	(gdb_get_breakpoint_list): Ditto.
	(gdb_get_breakpoint_info): Remove deleted breakpoint hack.
	(gdbtk_create_breakpoint): Moved here from gdbtk-hooks.c.
	Add breakpoint to our breakpoint database.
	(gdbtk_modify_breakpoint): Ditto the move.
	(gdbtk_delete_breakpoint): Ditto the move.
	Remove breakpoint from our database.
	(gdb_get_tracepoint_info): Remove delete tracepoint hack.
	It's not needed for tracepoints: they were implemented properly.
	(gdbtk_create_tracepoint): Moved here from gdbtk-hooks.c.
	(gdbtk_modify_tracepoint): Ditto.
	(gdbtk_delete_tracepoint): Ditto.
	* generic/gdbtk-hooks.c: Include "gdb-events.h".
	(gdbtk_create_breakpoint): Moved to gdbtk-bp.c
	(gdbtk_modify_breakpoint): Ditto.
	(gdbtk_delete_breakpoint): Ditto.
	(breakpoint_notify): Ditto.
	(gdbtk_create_tracepoint): Ditto.
	(gdbtk_modify_tracepoint): Ditto.
	(gdbtk_delete_tracepoint): Ditto.
	(tracepoint_notify): Ditto.
	(report_error): No longer static.
	(gdbtk_add_hooks): Create our own event handler
	vector and register breakpoint_create, breakpoint_modify,
	and breakpoint_delete handlers in gdbtk-bp.c.

2001-05-10  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-cmds.c: Put on diet. All breakpoint-,
	tracepoint-, register-, and stack-related functions moved
	into separate files.
	(call_wrapper): Renamed to "gdbtk_call_wrapper" and export.
	Update all callers.
	* generic/gdbtk.h: Move all breakpoint-related stuff into
	gdbtk-bp.c.
	Remove declaration for "call_wrapper". Now in gdbtk-cmds.h
	(and called "gdbtk_call_wrapper").
	* generic/gdbtk-varobj.c: Include "gdbtk-cmds.h".
	* generic/gdbtk-cmds.h: New file.
	* generic/gdbtk-bp.c: New file.
	* generic/gdbtk-register.c: New file.
	* generic/gdbtk-stack.c: New file.

2001-05-09  Keith Seitz  <keiths@@cygnus.com>

	* library/interface.tcl (gdb_quit_hook): Remove. It's unused.
	(gdbtk_quit): Do no shutdown window manager and save
	preferences here.
	(gdbtk_cleanup): This is the proper place to do those
	things.

2001-05-07  Keith Seitz  <keiths@@cygnus.com>

	* library/globalpref.itb (build_win): Preserve the
	current working directory.

2001-05-06  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_target_has_execution_command)
	(get_clear_file): Use ptid_equal() for comparing ptid values. 
	Use ``null_ptid'' instead of 0 in comparisons against
	``inferior_ptid''.

	From Phil Edwards <pedwards@@disaster.jaj.com>:
	* generic/gdbtk-cmds.c (gdb_target_has_execution_command)
	(get_clear_file): Rename ``inferior_pid'' to ``inferior_ptid''.

2001-05-01  Keith Seitz  <keiths@@cygnus.com>

        * gdbtk.c (gdbtk_init): Include the command "warp_pointer"
        for all platforms. Used for testing ONLY.

        * util.tcl (gdbtk_read_defs): If there is an error reading
        the testsuite definition file, print the error message to
        stderr, not stdout. This will allow tcl to know that an error
        has occurred.
        (find_iwidgets_library): Make it work for running testsuites
        from installed directory.

        * main.tcl: If we failed to find iwidgets, check if the
        testsuite is running. If it is running, do not pop up
        a dialog box: just print out the error and exit.
        Initialize _test(verbose) for the testsuite.

2001-04-23  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-cmds.c (gdb_get_breakpoint_info): If unable
	to find the requested breakpoint for lookup, check if
	it is about to be deleted and return information about
	that breakpoint.
	(gdb_get_tracepoint_info): Ditto for tracepoints.
	* generic/gdbtk-hooks.c (gdbtk_deleted_bp): New global.
	(gdbtk_delete_breakpoint): Remember the deleted breakpoint
	for gdb_get_breakpoint_info, in case it is called during
	the event notification.
	(gdbtk_delete_tracepoints): Ditto for tracepoints.

	* generic/gdbtk-cmds.c (gdb_entry_point): Return an empty
	string when there is no active target (i.e., there is no
	entry point to return yet).

2001-04-20  Keith Seitz  <keiths@@cygnus.com>

	* library/srctextwin.ith (handle_set_hook): Rename to set_variable.
	* library/srctextwin.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/srcbar.itcl: Inherit from GDBEventHandler.
	(set_hook): Rename to set_variable and handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/regwin.ith (handle_set_hook): Renamed to set_variable.
	* library/regwin.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/kod.ith (set_os): Renamed to "set_variable".
	* library/kod.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/tclIndex: Regenerated.

2001-04-20  Keith Seitz  <keiths@@cygnus.com>

	* library/interface.tcl (gdbtk_tcl_set_variable): New proc.
	* library/gdbevent.ith (SetVariableEvent): New event.
	* library/gdbevent.itb (SetVariableEvent::get): Override
	GDBEvent::get.
	* library/ehandler.ith (set_variable): New public method.
	* generic/gdbtk-hooks.c (gdbtk_set_hook): Let inteface function
	gdbtk_tcl_set_variable do all the work.
	* tclIndex: Regenerated.

2001-04-19  Keith Seitz  <keiths@@cygnus.com>

	* library/gdbevent.ith: New file. Defines new event model.
	* library/gdbevent.itb: New file. Implements new event
	model.
	* library/ehandler.ith: New file. Defines new event model.
	* library/ehandler.itb: New file. Implements new event
	model.
	* library/gdbwin.ith: Inherit from GDBEventHandler.
	(update): Delete unused method.
	(_state): Delete unused variable.
	* library/tclIndex: Regenerated.

	* generic/gdbtk-cmds.c (gdb_set_bp): Use create_breakpoint_hook
	to notify gui of changes.
	(gdb_set_bp_addr): Ditto.
	(gdb_get_breakpoint_info): Update comments to match reality.
	* generic/gdbtk-hooks.c (breakpoint_notify): Only pass the
	breakpoint number which generated the event.
	(tracepoint_notify): Ditto for tracepoints.
	* library/interface.tcl (gdb_breakpoint_change_hook): Mark
	as deprecated and comment out definition.
	(gdbtk_tcl_breakpoint): Use new GDBEvent event "breakpoint"
	to notify rest of UI about breakpoint event.
	(gdbtk_tcl_tracepoint): Ditto for "tracepoint" event.
	* library/bpwin.ith (update): Renamed to "breakpoint".
	(breakpoint): New public method.
	(tracepoint): New public method.
	(bp_add): Take event as argument instead of number.
	(bp_modify): Ditto.
	(bp_delete): Ditto.
	* library/bpwin.itb (constructor): Remove
	gdb_breakpoint_changed_hook.
	(destructor): Ditto.
	(build_win): Insert any existing breakpoints by
	making BreakpointEvents for them.
	(breakpoint): Renamed from "update" to handle
	breakpoint events.
	Remove code to deal with tracepoints.
	(tracepoint): New method to handle tracepoint
	events.
	(bp_add): Deal with breakpoint events, not breakpoint
	numbers.
	(bp_modify): Ditto.
	(bp_delete): Ditto.
	* library/srctextwin.ith: Inherit from GDBWin.
	(breakpoint): New public method.
	(tracepoint): New public method.
	* library/srctextwin.itb (constructor): Remove
	gdb_breakpoint_changed_hook.
	(destructor): Ditto.
	(breakpoint): New method to handle breakpoint event.
	(tracepoint): New method to handle tracepoint event.
	(do_bp): Handle duplicate breakpoints for asm, too.
	(remove_bp_at_line): Delete breakpoints by number, not
	linespec. clear_command removes breakpoints from the
	breakpoint_chain BEFORE deleting the breakpoint. delete_command
	does this afterward (so we can call gdb_get_breakpoint_info on
	an about-to-be-deleted breakpoint).

2001-04-18  Martin M. Hunt  <hunt@@redhat.com>
	
	* generic/gdbtk.c (gdbtk_init): Initialize uiout.

2001-04-18  Tom Tromey  <tromey@@redhat.com>

	* library/interface.tcl (run_executable): Use
	gdb_set_inferior_args.
	* library/session.tcl (session_load): Use gdb_set_inferior_args.
	* generic/gdbtk-cmds.c (Gdbtk_Init): Register
	gdb_set_inferior_args.
	(gdb_get_inferior_args): New function.

2001-04-17  Tom Tromey  <tromey@@redhat.com>

	* library/session.tcl (session_save): Use gdb_get_inferior_args.
	* generic/gdbtk-cmds.c (inferior_args): Removed.
	(Gdbtk_Init): Don't register gdb_inferior_args variable.  Do
	register gdb_get_inferior_args function.
	(gdb_get_inferior_args): New function.

2001-04-17  Fernando Nasser  <fnasser@@redhat.com>

	* library/variables.tcl (update): Temporary fix to the detection of
	"type_changed" condition.  Proper fix will require that this condition
	is properly reported by the underlying code.

2001-04-12  Nicholas Duffek  <nsd@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_entry_point): New TCL command.
	* library/interface.tcl (gdbtk_locate_main): Try the program's
	entry point if no main function is found.

2001-04-10  Keith Seitz  <keiths@@cygnus.com>

	From Tom Tromey (tromey@@redhat.com):
	* library/managedwin.itb (reveal): We actually do want to force
	the focus for Windows.

2001-04-09  Martin M. Hunt  <hunt@@redhat.com>

	* library/managedwin.itb (ManagedWin::reveal): After
	deiconifying window for the first time, set its geometry
	again, if the platform is unix. This fixes a problem with kde.
	(ManagedWin::_create): Set a variable with the initial
	geometry.

2001-04-04  Christopher Faylor  <cgf@@redhat.com>

	* generic/gdbtk.c: Add __CYGWIN__ conditional to WIN32 test.

2001-04-04  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_fileopen): New function.
	Initialize ui_file stuff for gdbtk.
	(gdbtk_fputs): Don't print if gdbtk_disable_fputs. Send
	stdlog and stdtarg to their handler functions.

	* generic/gdbtk.c (Gdbtk_Init): Don't set gdb_stdlog 
	and gdb_stdtarg to gdb_stdout, 
	(gdbtk_init): Unset gdbtk_disable_fputs
	when ready to accept output from gdb. Remove references to
	fputs_unfiltered_hook.
	
	* generic/gdbtk.h: Declare new flag gdbtk_disable_fputs.

	* generic/gdbtk-cmds.c (gdb_restore_fputs): Instead of setting
	fputs_unfiltered_hook, set the new flag gdbtk_disable_fputs.

	* library/prefs.tcl (pref_set_defaults): Add defaults
	for log_fg and target_fg.

	* library/interface.tcl (gdbtk_tcl_fputs_error): Use
	err_tag.
	(gdbtk_tcl_fputs_log): New function. Write log messages
	to console.
	(gdbtk_tcl_fputs_target): New function.	Write target
	IO to console.

	* library/console.ith (einsert): Add tag parameter.
	
	* library/console.itb (_build_win): Add new tags for log 
	and target IO.
	(einsert): Add tag parameter.

2001-04-02  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_loadfile): Adjust size of text_argv
	array to prevent writing out of range. Remove unused variables.
	Fix formatting.
	(gdb_get_tracepoint_info): Remove unused variable "fname".
	(gdb_load_disassembly): Remove unused variable "widget".
	(gdb_loc): Remove unused variable "sym".
	(gdb_set_bp_addr): Remove unused variable "line".
	(gdb_get_breakpoint_info): Remove unused variable "sym".
	(get_frame_name): Remove unused variable "name".

2001-03-29  Fernando Nasser  <fnasser@@redhat.com>

	* library/variables.tcl (update): Cope with varobj type changes.

2001-03-29  Fernando Nasser  <fnasser@@redhat.com>

	* library/variables.tcl (destructor): Remove file_changed_hook hook.

2001-03-29  Fernando Nasser  <fnasser@@redhat.com>

	* generic/gdbtk-varobj.c (variable_obj_command): Do not cache varobj
	handles as they may change -- use varobj_get_handle() instead.

2001-03-15  Martin Hunt  <hunt@@redhat.com>
	* library/browserwin.itb: Change all references to freeze_me,
	thaw_me and Top to _freeze_me, _thaw_me, and _top to match 
	changes to managedwin.
	
	* library/kod.itb: Ditto.  

2001-03-15  Tom Tromey  <tromey@@redhat.com>

	* library/mempref.itb (MemPref::build_win): Correctly set initial
	value of combobox.
	* library/memwin.itb: Added copyright header.
	(MemWin::constructor): Set defaults from preference database.
	(MemWin::reconfig): Update preference database.
	* library/prefs.tcl (pref_save): Save `mem' preferences.
	(pref_set_defaults): Define default memory preferences.

2001-03-08  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (map_arg_registers): Use REG_NUM instead of
	ARCH_REG_NUM.

2001-03-01  Nicholas Duffek  <nsd@@redhat.com>

	* README.GDBTK: Minor spelling, grammar, and formatting fixes.

2001-03-01  Keith Seitz  <keiths@@cygnus.com>

	* library/managedwin.ith: Move all implementations into
	managedwin.itb.
	(public variable nosize): Delete.
	(freeze_me, thaw_me, make_icon_window): Prepend with
	underscore to remind people these are not public
	methods/procs.
	(protected variable Top, screenwidth, screenheight): Ditto
	for these variables.
	(protected common manage_active, mainwindow): Delete.
	(enable): Delete.
	(reconfig): Add empty body.
	* library/managedwin.itb: Move all implementations from
	header here.
	Update all references to renamed variables/methods/procs.
	(destructor, restart, shutdown, _open, find) Let
	Itcl tell us which ManagedWins we have lying around.
	(enable): Delete.
	(reconfig): It's empty. Moved empty body to header.

2001-03-01  Nicholas Duffek  <nsd@@redhat.com>

	* library/managedwin.itb (ManagedWin::shutdown): Save each
	managed window's geometry as a preference.
	* library/managedwin.ith (ManagedWin::destructor): Don't save
	managed windows' geometries as preferences.

2001-03-01  Nicholas Duffek  <nsd@@redhat.com>

	* library/srctextwin.itb (SrcTextWin::location): Clear previous
	pane's cursor after switching panes.

2001-03-01  Nicholas Duffek  <nsd@@redhat.com>

	* library/srctextwin.itb (config_win): Give focus to $win.

Tue Feb 27 23:56:23 2001  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c: Include recently created "regcache.h"

2001-02-27  Keith Seitz  <kseitz@@nwlink.com>

	* generic/gdbtk-cmds.c (gdb_fetch_registers): Mark
	the result as generating a list only if it really does
	generate a list.

2001-02-21  Fernando Nasser  <fnasser@@redhat.com>

	* TODO: New file.  Initial version of the TODO file, as posted to the
	insight list circa October 2000.

2001-02-14  Fernando Nasser  <fnasser@@redhat.com>

	From 2001-02-09  Martin Hunt  <hunt@@redhat.com>
	* generic/gdbtk-cmds.c (gdb_load_disassembly): In mixed
	mode, source lines should be tagged with source_tag2.

2001-02-08  Fernando Nasser  <fnasser@@redhat.com>

	From 2001-02-06  Martin Hunt  <hunt@@redhat.com>
	* library/debugwin.itb: Change window name to "Insight Debug"
	* library/embeddedwin.ith: Fix debug messages.
	* library/locals.tcl: Ditto.
	* library/watch.tcl (postMenu): Ditto.
	* library/variables.tcl: Ditto.
	* library/interface.tcl: Ditto.
	* library/regwin.itb: Ditto.
	* library/gdbwin.ith: Ditto.
	* library/srcbar.itcl: Ditto.

2001-02-06  Fernando Nasser  <fnasser@@redhat.com>

	Originally from Martin Hunt <hunt@@redhat.com>, with modifications
	* library/srcwin.itb (_name): Check for errors when invoking
	gdb_find_file.
	* library/srctextwin.itb (_mtime_changed, location): Ditto.
	* generic/gdbtk-cmds.c (gdb_find_file_command): Better error checking.
	(full_lookup_symtab): Fix misleading comment.

2001-02-04  Fernando Nasser  <fnasser@@redhat.com>

	* library/plugins/plugins.tcl: Fix typos and remove "-transient"
	parameter from open command.
	* library/plugins/HOW-TO: New file.  Describes how to add a plug-in
	window to Insight.

2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/images/insight.gif: New splash screen/about graphics.
	* library/images2/insight.gif: New splash screen/about graphics.
	* library/about.tcl: Update copyright, window title and change colors
	to match new splash screen/about images.

2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbtoolbar.itcl (add): New method.  Emulate the style of the
	toolbar iwidget commands.
	(toolbar_show): Old name.
        (show): New name.
	(toolbar_create_button): Old name.
        (create): New name.
	(toolbar_configure_button): Old name.
        (itemconfigure): New name.
        (toolbar_bind_button): Old name.
        (itembind): New name.
        (toolbar_set_button_balloon): Old name.
        (itemballoon): New name.
        (toolbar_add_button): Make private.
        (toolbar_add_label): Ditto.
        (toolbar_add_button_separator): Ditto.
	(toolbar_remove_button): Ditto.
	(tollbar_insert_button): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/rhabout/rhabout.itcl: Ditto.

2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (constructor): Remove unused code.
	(add): New method.  Emulate the style of the menubar iwidget commands.
	(menubar_show): Old name.
	(show): New name.
	(menubar_menu_exists): Old name.
	(exists): New name.
	(menubar_clear_menu): Old name.
	(clear): New name.
	(menubar_delete_menu): Old name.
        (delete): New name.
	(menubar_new_menu): Make private.  Does not return anything.
	(menubar_add_menu_command): Make private.
	(menubar_add_menu_separator): Ditto.
	(menubar_change_menu_state): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/plugins.tcl: Ditto.
	* library/plugins/rhabout/rhabout.itcl: Ditto.

2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/pluginwin.itcl (contrucdtor, destructor): Use "code" to
	specify callbacks.
	(running, stopped, no_inferior): Make it a protected method.
	(childsite): Explicitly mark as a public method.
	* library/plugins/rhabout/rhabout.itcl (constructor): Add a label
	widget to show status messages.
	(running, stopped): Overload versions of the base class; display
	status messages as an example.

2001-01-31  Fernando Nasser  <fnasser@@redhat.com>

	* library/pluginwin.itcl: New file.  Implements the PluginWindow
	class that provides some basic functionality for plug-ins.
	* library/plugins/rhabout/rhabout.itcl: Inherit from the new
	PluginWindow class.  Remove code dependent on ModalDlg.
	(constructor): Creates menus and a toolbar to show how these
	PluginWindow components are used.
	* library/tclIndex: Regenerate.

2001-01-31  Fernando Nasser  <fnasser@@redhat.com>

	* library/plugins/rhabout.tcl: Add load for optional sample C command 
	procedure.
	* library/plugins/rhabout/rhabout.itcl (constructor): Try calling
	optional sample C command procedure rhabout_extra_text.
	* library/plugins/rhabout/rhabout.c: New file. Implement an example
	plug-in shared library with a sample C command procedure.
	* library/plugins/rhabout/Makefile: New file. Makefile for the sample
	shared library above (Linux only).

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/plugins: New directory.  Sample plug-in directory to help
	developers of Insight plug-ins.  See README file in that directory.
	* library/plugins/plugins.tcl: New file. Sample version of a code
	fragment file which adds entries to the PlugIn menu of the Source
	Window to activate custom plug-in windows.
	* library/plugins/pkgIndex.tcl: New file.  Sample version of a file
	with package information for the installed plug-ins.
	* library/plugins/rhabout.tcl: New file. Sample file providing a
	plug-in package.
	* library/plugins/rhabout: New directory.  Sample plug-in.
	* library/plugins/rhabout/rhabout.itcl: New file.  Sample class
	implementing a plug-in window.
	* library/plugins/rhabout/tclIndex: New file.  Tcl index for the sample
	plug-in implementation.

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/main.tcl: Add plugin subdirectory, if existent, to auto_path.
	* library/srcbar.itcl (create_plugin_menu): New method.  Create a pull
	down menu for plugins if there are any for this target configuration.
	(create_menu_items): Invoke the new method above.

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (menubar_new_menu): Save lable of a menu to
	use as index.
	(menubar_delete_menu): New function.  Delete a menu.

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (menu_list): Add missing declararion for
	global variable.

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (set_class_state): Turn off verbose debug
	messages.
	* library/gdbtoolbar.itcl (set_class_state): Ditto.

2001-01-26  Fernando Nasser  <fnasser@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_clear_file): Call exec_file_clear() and
	symbol_file_clear() instead of exec_file_command() and
	symbol_file_command().
	(gdb_find_file_command): Return the proper error text.

2001-01-25  Fernando Nasser  <fnasser@@redhat.com>

	* library/srcbar.itcl: New file. Implement SrcBar, a menu and toolbar
	for the Source Window (code previously in srcmenubar.itcl and
	srctoolbar.itcl).
	* library/srcmenubar.itcl: Remove obsolete file.
	* library/srctoolbar.itcl: Remove obsolete file.
	* library/srcbar.tcl: Remove obsolete file.
	* library/gdbmenubar.itcl (menubar_show): New method. Associate the
	menu with the toplevel window.
        * library/srcwin.itb (_build_win): Use SrcBar.
	* library/tclIndex: Regenerate.

2001-01-24  Fernando Nasser  <fnasser@@redhat.com>

	From  Martin Hunt  <hunt@@cygnus.com>
	* generic/gdbtk-cmds.c (gdb_set_bp_addr, gdb_set_bp): Change
	strsave() to xstrdup().

2001-01-24  Fernando Nasser  <fnasser@@redhat.com>

	From  Martin Hunt  <hunt@@cygnus.com>
	* generic/gdbtk-cmds.c (gdbtk_dis_asm_read_memory): Fix call
	to xfer_memory().

2001-01-19  Fernando Nasser  <fnasser@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Set default value of
	gdb/src/top_control to place the source window controls at the top.

2001-01-18  Fernando Nasser  <fnasser@@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FUNCNAME
	parameter.
        (FillAssembly, FillMixed): Pass the FUNCNAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FUNCNAME parameter
	to method definition.

2001-01-17  Fernando Nasser  <fnasser@@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FILENAME
	parameter.
        (FillAssembly, FillMixed): Pass the FILENAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FILENAME parameter
	to method definition.

2001-01-15  Fernando Nasser  <fnasser@@redhat.com>

	* srcwin.itb (clear_file): Pass the appropriate value to the GO 
	argument of mode() so it does not try to read a source file when
	no executable is loaded.

2001-01-09  Fernando Nasser  <fnasser@@redhat.com>

	* library/srcmenubar.itcl (create_file_menu): Add missing incr for
	session numbers.

2001-01-04  Fernando Nasser  <fnasser@@redhat.com>

	The following changes fix the problem of having to click on a splash
	window to make it disapear.
	* modal.tcl (post): Take as an argument "expire", the time a modal
	window is displayed.
	* managedwin.itb (open): Check for an "expire" argument and pass the
	value down to modal post method.

2001-01-04  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (set_class_state): New public method.
	Standard method to control state by class.
	(menubar_menu_class_find): Delete public accessor method.
	(menubar_change_menu_state): Change the state of a menu item
	not of a whole class list.
	* library/srcmenubar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.
        * library/gdbtoolbar.itcl (set_class_state): New public method.
        Standard method to control state by class.
        (toolbar_button_class_find): Delete public accessor method.
	* library/srctoolbar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.

2001-01-04  Fernando Nasser  <fnasser@@redhat.com>

	* library/interface.tcl (gdbtk_connect): New proc. Connects to ai
	 remote target (code previously at library/gdbmenubar.itcl).
	(disconnect): Rename to...
	(gdbtk_disconnect): New name for proc disconnect.
	* library/srcmenubar.itcl (do_connect): Remove the code mentioned
	above and call the new interface proc gdbtk_connect.
	Also, call ::update idletasks after changing the state of the
	menu entries.
	(do_detach): Call gdbtk_disconnect, not ::disconnect (old name).
	(do_disconnect): Call gdbtk_disconnect, not disconnect (old name).

2001-01-03  Fernando Nasser  <fnasser@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Define gdb/src/top_control
	to allow the source window controls to be placed at the top.
	* library/srcwin.itb (_build_win): Test for gdb/src/top_control
	and place the controls accordingly.

2001-01-02  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl: New file. Define the GDBMenuBar class,
	a generic menubar building facility for Insight windows (WIP).
	* library/gdbtoolbar.itcl: New file. Define the GDBToolBar class,
	a generic toolbar building facility for Insight windows (WIP).
	* library/srcmenubar.itcl: New file. Define the SrcMenuBar class,
	which implements the Source Window menubar (inherits GDBMenuBar).
	* library/srctoolbar.itcl: New file. Define the SrcToolBar class,
	which implements the Source Window toolbar (inherits GDBToolBar).
	* library/srcwin.itb (_build_win): Use SrcMenuBar and SrcToolBar
	instead of the obsolete GDBSrcBar.
	* library/srcbar.tcl: Mark as OBSOLETE.
	* library/toolbar.tcl: Mark as OBSOLETE. Rename class GDBToolBar
	to avoid conflict with new class with the same name.
	* library/Makefile (TCL): Include .itcl files.
	* library/tclIndex: Regenerate.

2001-01-02  Fernando Nasser  <fnasser@@redhat.com>

	* library/srcwin.itb (_build_win): If gdb is running a program, load
	the window with source for that location (if available).
	(download_progress): Calls to "update" must refer to the global
	namespace.

2001-01-02  Fernando Nasser  <fnasser@@redhat.com>

	* library/interface.tcl (gdbtk_quit_check): Save session whenever
	possible.

2001-01-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * library/ChangeLog: Removed. 
        * generic/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * generic/ChangeLog: Removed.

2000-12-14  Fernando Nasser  <fnasser@@redhat.com>

	* library/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* library/ChangeLog-1998: New file.  Similar change for 1998.
	* library/ChangeLog-1997: New file.  Similar change for 1997.
	* library/ChangeLog: Removed entries previous to 2000.
	* generic/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* generic/ChangeLog-1998: New file.  Similar change for 1998.
	* generic/ChangeLog-1997: New file.  Similar change for 1997.
	* generic/ChangeLog: Removed entries previous to 2000.

2000-04-17  Jonathan Larmour  <jlarmour@@redhat.co.uk>

	* ChangeLog-gdbtk: Renamed to ChangeLog
	* ChangeLog: New file
	* README.GDBTK: No need for changelog-default-name hint for Emacs now

Sat Feb  5 00:14:30 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* gdb.rc, gdbtool.ico, README.GDBTK: To here from top level GDB
 	directory.
	* gdb/gdbtcl2: Directory moved to gdbtk/library.
	* gdb/gdbtk/generic: New directory.
@


1.187
log
@2002-01-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb: Check for existence of $twin.
@
text
@d3 4
a6 1
	* library/srctextwin.itb: Check for existence of $twin.
@


1.186
log
@2002-01-11  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_tcl_exec_file_display):
	Set pathname in host-independent manner using "file" and
	gdb_current_directory.
@
text
@d3 2
@


1.185
log
@	* library/Makefile (ITCL_SH): Renamed to "ITCLSH".
	(tclIndex): We no longer have an Itcl shell, so we must use
	"package require Itcl".
@
text
@d1 6
@


1.184
log
@	* generic/gdbtk-cmds.c (gdb_find_file_command): If the symtab
	doesn't have the filename's fullname, look it up with
	symtab_to_filename.
@
text
@d1 6
@


1.183
log
@        * library/srcwin.itb (location): Fix typo. It's "addr" not
        "address".
@
text
@d3 6
@


1.182
log
@	* library/interface.tcl (gdbtk_tcl_preloop): Use current directory
	when `--args' given.
@
text
@d1 5
@


1.181
log
@	* library/srcbar.itcl (SrcBar::create_buttons): Line number
	and address fields have been removed and added to the
	status bar.
	* library/srcwin.itb (SrcWin::_build_win): Add address and
	line number fields to status bar.  Moved download progress
	bar to status bar.
	(SrcWin::download_progress):  Use canvas on status bar.
	Remember to adjust width of 64-bit address.
	(SrcWin::location): Set line number and address on status bar.
	* library/srcwin.ith (SrcWin): Added new private variable.
@
text
@d1 5
d66 1718
@


1.180
log
@s/BIG_ENDIAN/BFD_ENDIAN_BIG/
@
text
@d1 13
@


1.179
log
@Move value_ptr typedef to gdbtk-wrapper from value.h.
@
text
@d3 6
@


1.178
log
@2002-01-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/session.tcl (SESSION_serialize_bps): Ignore
	breakpoints set on internal_error and info_command because
	these are set by .gdbinit and will be recreated by it.
	This is a bit of a hack and should be fixed properly
	someday.
@
text
@d1 4
@


1.177
log
@2002-01-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/debugwin.itb: Fix incorrect button names
	so they will be enabled/disabled properly.
@
text
@d3 6
@


1.176
log
@2002-01-03  Martin M. Hunt  <hunt@@redhat.com>

	* library/srctextwin.itb: Set focus on srcwin only
	if another window doesn't have the focus.
@
text
@d3 3
@


1.175
log
@	* library/interface.tcl (set_exe): Allow users to debug
	executables with no debug information.
@
text
@d1 5
@


1.174
log
@	* library/console.ith (insert): Add tag parameter.
	(einsert): Delete.
	* library/console.itb: (insert): Add tag parameter.
	(einsert): Delete.
	* library/interface.tcl (gdbtk_tcl_fputs): Use Console::insert.
	(gdbtk_tcl_fputs_error): Likewise.
	(gdbtk_tcl_fputs_log): Likewise.
	(gdbtk_tcl_fputs_target): Likewise.
	(set_target): Likewise.
@
text
@d3 5
@


1.173
log
@Move 2002 change to new ChangeLog and rename old changelog to ChangeLog-2001.
@
text
@d1 12
@


1.172
log
@       * library/managedwin.itb (ManagedWin::_create):  When
       making a modal window transient, use the source window
       as the master and not ".".
@
text
@d1 1
a1 28
2001-12-21  Tom Tromey  <tromey@@redhat.com>

	* generic/gdbtk-cmds.h (full_lookup_symtab): Don't declare.
	* generic/gdbtk-cmds.c (gdb_find_file_command): Use
	lookup_symtab.
	(gdb_listfuncs): Likewise.
	(gdb_loadfile): Likewise.
	(full_lookup_symtab): Removed.
	* generic/gdbtk-bp.c (gdb_find_bp_at_line): Use lookup_symtab.
	(gdb_set_bp): Likewise.

2001-12-21  Keith Seitz  <keiths@@redhat.com>

	* library/bpwin.ith (_select_and_popup): New private method.
	* library/bpwin.itb (bp_select): Don't bind to Button-3.
	(build_win): Bind Button-3 to _select_and_popup.
	(_select_and_popup): New private method.

2001-12-18  Keith Seitz  <keiths@@redhat.com>

	* library/memwin.itb (incr_addr): Fix typo.

2001-12-16  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (hex2bin): Replace LITTLE_ENDIAN with
	BFD_ENDIAN_LITTLE.

2001-12-11  Ian Roxborough  <irox@@redhat.com>
a6 1692
2001-12-10  Ian Roxborough  <irox@@redhat.com>

	* library/interface.tcl (set_target_name): Call "pref getd"
	instead of "pref get" to avoid undefined preference error
	message for default-hostname.

2001-12-07  Keith Seitz  <keiths@@redhat.com>

	* library/managedwin.itb (shutdown): Don't save geometry for
	plugins, either.

2001-12-05  Keith Seitz  <keiths@@redhat.com>

	* library/console.itb (busy): Set the cursor to the watch.
	(idle): Reset cursor to normal.

2001-11-30  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_eval): Remove
	undocumented debug function.

2001-11-21  Tom Tromey  <tromey@@redhat.com>

	* library/interface.tcl (gdbtk_tcl_preloop): Override session's
	command-line arguments if required.

2001-11-20  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): If DISPLAY is not set on Unix,
	clear the init_ui_hook so that gdb will properly initialize
	the cli.

2001-11-08  Martin M. Hunt  <hunt@@redhat.com>
	* generic/gdbtk-cmds.c (gdb_eval): Add an optional
	format argument.
	(hex2bin): Swap bytes around if target is little endian.
	Fix loop count.
	(gdb_incr_addr): New function to do address arithmetic.
	Needed because some addresses are 64-bits and tcl can't
	deal with them, except as strings.

	* library/memwin.itb (MemWin::build_win): Add a label
	to indicate the target endianess.
	(MemWin::edit): Use gdb_incr_addr.
	(MemWin::busy): The constructor calls gdbtk_busy which
	calls this before the window has finished drawing, so
	don't disable items that don't exist yet.
	(MemWin::update_address): Set a flag, bad_expr, if the
	expression does not evaluate. Call gdb_eval with 'x' flag
	to force the result to be hex.
	(MemWin::BadExpr): Set bad_expr.
	(MemWin::incr_addr): Use gdb_incr_addr.
	(MemWin::update_addr): Return is bad_expr is set. Use
	gdb_incr_addr.
	(MemWin::goto): Call update_address.
	* library/memwin.itb: Declare private variable bad_expr.
	
	* library/util.tcl (gdbtk_endian): New procedure. Returns
	BIG or LITTLE to indicate target endianess.

2001-11-08  Martin M. Hunt  <hunt@@redhat.com>	
	* library/managedwin.itb (ManagedWin::shutdown): Fix
	typo in class name DebugWinDOpts.

	* library/debugwin.itb: Add MemWin to _classes.

2001-11-05  Martin M. Hunt  <hunt@@redhat.com>
	* generic/gdbtk-cmds.h (gdbtk_set_result): Declare.
	A printf-like function to return error messages.
	* generic/gdbtk-cmds.c (gdbtk_set_result): New
	function.
	(gdb_cmd): Use gdbtk_set_result.
	(gdb_immediate_command): Ditto.
	(gdb_load_info): Ditto.
	(gdb_find_file_command): Ditto.
	(gdb_listfuncs): Ditto.
	(gdb_load_disassembly): Ditto.
	(gdb_loc): Ditto.
	(gdb_set_mem): Ditto.
	(gdb_get_mem): Ditto.
	(gdb_loadfile): Ditto.
	* generic/gdbtk-varobj.c (variable_format): Ditto.
	(variable_value): Ditto.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Ditto.
	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Ditto.
	(gdb_set_bp): Ditto.
	(gdb_set_bp_addr): Ditto.
	(gdb_get_tracepoint_info): Ditto.

2001-11-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/stackwin.itb (StcakWin::reconfig): Destroy sbox 
	if it exists.

	* library/process.itb (ProcessWin::reconfig): Destroy sbox 
	if it exists. This fixes reconfig failures on Windows. Also 
	destroy slbox.

	* library/bpwin.itb (BpWin::reconfig): Destroy sbox if 
	it exists.This fixes reconfig failures on Windows. Also 
	destroy sf
	
	* library/tdump.tcl (TdumpWin::reconfig): Delete sbox
	and stext then rebuild window.

2001-11-05  Martin M. Hunt  <hunt@@redhat.com>	

	* library/debugwin.itb (DebugWin::build_win): 
	Initialize gdbtk_de(ERRORS_ONLY) and gdbtk_de(filter_var)
	(DebugWin::puts): Rewrite filter to handle new options.
	(DebugWinDOpts::build_win): Update list of classes. Change 
	filter dialog so we can not display only errors and warnings
	or choose between displaying ALL classes except those selected
	or only selected classes. Fix "OK" button to apply
	changes before closing dialog.
	DebugWinOpts::_apply): Now takes an agrument that
	indicates if dialog should exit after applying filter.
	
	* library/debugwin.ith (_apply): Now takes an arg.

	* library/main.tcl: If GDBTK_DEBUGFILE is not set,
	use "insight.log" as the default. If GDBTK_DEBUG is set
	and nonzero, start logging debug messages to
	GDBTK_DEBUGFILE immediately. Never open the debug window
	automatically.

	* library/managedwin.itb (ManagedWin::shutdown): Don't 
	save debug window options dialog on active list
	
	* library/srcwin.itb: Remove troublesome debug line.

2001-11-05  Martin M. Hunt  <hunt@@redhat.com>
	* library/globalpref.itb (GlobalPref::_init_var):
	New method to initialize _saved and _new arrays.
	(GlobalPref::constructor): Call _init_var.
	(GlobalPref::_buildwin): Use _new array for prefs
	variables. Font optimizations. Remove troublesome
	fonts and sort the list.
	(GlobalPref::toggle_tracing_mode): Removed.  Some
	functionality moved to _apply and _cancel.
	(GlobalPref::_apply): Set prefs with values from the
	_new array.
	(SrcPref::_cancel): Reset prefs with values from _saved.
	* library/globalpref.ith: Changed private variables
	and methods to start with underscore.
	(tracing_cb): Removed.
	(_init): Changed from proc to method.

2001-11-01  Keith Seitz  <keiths@@redhat.com>

	* library/memwin.itb (update_addr): Evaluate the address
	to be sent to gdb_get_mem to prevent passing error strings
	to string_to_coreaddr in gdb_get_mem.

2001-10-29  Martin M. Hunt  <hunt@@redhat.com>	

	* library/debugwin.itb: Don't increment number of
	TopLevelWins. 

	* library/managedwin.itb: Don't save DebugWins to
	active list.

2001-10-29  Martin M. Hunt  <hunt@@redhat.com>		

	* generic/gdbtk-bp.c (gdb_set_bp_addr): When setting
	the bp addr_string, use the string the function was called
	with instead of using sprintf to write a new one. This
	avoids a problem with truncating 64-bit addresses.

	* library/srcbar.itcl (SrcBar::create_buttons) Don't
	set width of address label.
	(SrcBar::address) When the address changes, recompute
	width of address label.  If it is more than 10, force it
	to 18, otherwise use 10.
	
2001-10-29  Martin M. Hunt  <hunt@@redhat.com>	

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Use
	string_to_core_addr to read address so 64 bits will work.
	(gdb_set_bp): Set error message with Tcl_SetObjResult()
	so it will be displayed.
	(gdb_set_bp_addr):Use string_to_core_addr to read address.
	Set error message with Tcl_SetObjResult().

	* generic/gdbtk-cmds.c (gdb_get_mem): :Use string_to_core_addr 
	to read address. Set error message with Tcl_SetObjResult() or
	Tcl_WrongNumArgs.
	
2001-10-27  Tom Tromey  <tromey@@redhat.com>

	* tclIndex: Updated.
	* library/main.tcl: Add session_notice_file_change to
	file_changed_hook.
	* library/session.tcl (session_load): Only load the executable.
	(session_notice_file_change): New proc.
	(SESSION_exe_name): New proc.
	(session_save): Use it.
	(session_notice_file_change): Likewise.
	* library/interface.tcl (gdbtk_tcl_exec_file_display): Don't call
	session_save.
	(gdbtk_tcl_preloop): Don't set executable name or try to find
	main.  Notice a new session if required.
	
2001-10-18  Martin M. Hunt  <hunt@@redhat.com>
	
	* library/srcpref.itb (SrcPref::contructor): Move array
	initialization to _init_var.
	(SrcPref::_init_var): New method to initialize _saved and 
	_new arrays.
	(SrcPref::buildwin): Rename to _buildwin. Have widgets use 
	_new instead of [pref varname ...].  Set initial value of
	tab size spinint.
	(SrcPref::_apply): Set prefs with values from the _new array.
	(SrcPref::_cancel): Reset disassembly flavor and don't call 
	_save because nothing is saved unless OK is selected.
	(SrcPref::set_flavor): Rename to _set_flavor.
	(SrcPref::_pick): Just set _new, not prefs.
	
	* library/srcpref.ith: Add private variable _new and
	private method cancel. Rename others with leading underscore.

2001-10-16  Andrew Cagney  <ac131313@@redhat.com>

	From 2001-08-29 John Moore <jmoore@@redhat.com>:
	* gdbtk/generic/gdbtk-cmds.c (gdb_disassemble): Replaced
	parse_and_eval_address() with string_to_core_addr().
	(gdb_load_disassembly): Same.
	(gdb_set_mem): Ditto.
	* gdbtk/generic/gdbtk-stack.c (gdb_block_vars): Ditto.
	* gdbtk/generic/gdbtk-varobj.c (variable_create): Same.

2001-10-17  Tom Tromey  <tromey@@cygnus.com>

	* console.itb (Console::_build_win): Handle bindings which
	are ";".  Also, completely override underlying Text binding.

2001-10-12  Tom Tromey  <tromey@@redhat.com>

	* library/console.itb (Console::_build_win): Bind Control-m and
	Control-j.

2001-10-12  Daniel Jacobowitz  <drow@@mvista.com>

	* generic/gdbtk-cmds.c (gdb_listfuncs): Use ALL_BLOCK_SYMBOLS.
	* generic/gdbtk-stack.c (gdb_block_vars): Likewise.
	(gdb_get_blocks): Likewise.
	(gdb_get_vars_command): Likewise.

2001-10-10  Ian Roxborough  <irox@@redhat.com>

	* library/gdbtoolbar.itcl (GDBToolBar::add): Add option
	for "custom" type. 
	(GDBToolBar::toolbar_add_custom): new method.

2001-10-06  Tom Tromey  <tromey@@redhat.com>

	* library/session.tcl (SESSION_recreate_bps): Use
	gdb_run_readline_command_no_output to recreate breakpoints.
	* library/interface.tcl (gdb_run_readline_command): Set
	readlineShowUser element of gdbtk_state.
	(gdb_run_readline_command_no_output): New proc.
	(initialize_gdbtk): Initialize readlineShowUser element.
	(gdbtk_tcl_readline_begin): Use readlineShowUser element.
	(gdbtk_tcl_readline): Likewise.

2001-10-05  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (get_breakpoint_commands): New function.
	(gdb_get_breakpoint_info): Use gdb_breakpoint_commands to
	assemble breakpoint commands information.

2001-10-02  Tom Tromey  <tromey@@redhat.com>

	* library/tclIndex: Updated.
	* library/prefs.tcl (pref_set_defaults): Define gdb/editor
	preference.
	* library/srcpref.itb (SrcPref::constructor): Save gdb/editor
	preference.
	(SrcPref::build_win): Added external editor control.
	* library/srctextwin.itb (SrcTextWin::do_source_popup): Always
	enable external editor.  Use `code' instead of `list'.
	* library/srcwin.itb (SrcWin::edit): Use Editor::edit.
	* library/editor.tcl: New file.
	* generic/gdbtk.c (enable_external_editor): Removed.
	(external_editor_command): Default to NULL.
	(gdbtk_init): Don't set enable_external_editor.  Free external
	editor command when finished with it.

2001-09-28  Tom Tromey  <tromey@@redhat.com>

	* library/console.itb (Console::_operate_and_get_next): New method.
	(Console::_setprompt): Insert next history element if requested.
	(Console::_build_win): Bind C-o to _operate_and_get_next.
	* library/console.ith (_operate_and_get_next): Declare.
	(_pendingHistElement): New variable.

2001-09-27  Elena Zannoni  <ezannoni@@redhat.com>

	* library/targetselection.itb (build_win, default_port): Handle
        hpux 11.00.

2001-09-27  Keith Seitz  <keiths@@redhat.com>

        * library/prefs.tcl (escape_value): Update to work
        with Tcl's new and old syntax.

2001-09-19  Keith Seitz  <keiths@@redhat.com>

	* library/main.tcl: Append iwidgets library path, if needed.
	* generic/gdbtk.c (gdbtk_init): Add TCLLIBPATH to iwidgets
	package index.
	Define IWIDGETS_LIBRARY in interpreter so that we can add
	this path to the auto_path at the right time later.

2001-09-10  Ian Roxborough <irox@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Set IWIDGETS_LIBRARY if
	Insight is launched from within the build directory.
	* library/util.tcl (find_iwidgets_library): Removed.
	* library/main.tcl: Don't call find_iwidgets_library, do a 
	package require instead.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/bpwin.itb (bp_select): Use standard preferences
	for selection fg & bg, not tixOption database.

	* process.itb, tracedlg.tcl: Remove all traces of those
	three evil little letters, "t", "i", "x".

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/tracedlg.tcl (build_win): Use libgui's
	Labelledframe instead of tixLabelFrame.
	Use iwidgets::scrolledlistbox instead of tixScrolledListbox.
	(edit): Check if there is a selection in the listbox
	before proceeding.
	Escape method callbacks before passing to ActionDlg.

	* library/actiondlg.tcl (constructor): Use "gdb_reginfo"

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/tdump.tcl (class TdumpWin): Inherit from GDBWin
	and ManagedWin.
	(constructor): Remove old itcl2 handling code and name the
	window.
	(build_win): Use iwidgets::scrolledtext instead of
	tixScrolledText.
	(twin): Remove unused variable. Use itk_component(stext)
	instead.
	(maxwidth): Remove unused variable.
	(destructor): Remove unused method.
	(config): Ditto.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/srcpref.itb (build_win): Use iwidgets::spinint
	instead of tixControl.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/process.ith (top): Remove unused protected variable.
	Use GDBWin::_top instead.
	(lb): Remove unused variable.
	(change_context): Remove parameter. It's not needed.
	* library/process.itb (constructor): Don't set the variable
	"top". It isn't needed. GDBWin has this information.
	(buildwin): Get rid of tixScrolledListbox. Use
	iwidgets::scrolledlistbox instead.
	Loose the balloon help. It annoys more than helps.
	(update): Use new scrolledlistbox component.
	Split the list of threads BEFORE doing llength. Someone
	shoot me if this has to be fixed one more time...
	(change_context): Update definition and usage.
	(cursor): Use GDBWin::_top instead of our own private copy.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_disassemble_driver): We should be
	looking for "thread", not "threads" to determine if we have
	a multi-threaded child process.

2001-08-28  Keith Seitz  <keiths@@redhat.com>

	* library/bpwin.itb (build_win): Get rid of tixScrolledWindow
	and use iwidgets::scrolledframe until something better comes
	along.

2001-08-23  Tom Tromey  <tromey@@redhat.com>

	* library/srcwin.itb (SrcWin::fillFuncCB): Sort function names.

2001-08-23  Martin M. Hunt  <hunt@@redhat.com>

	* library/targetselection.itb: Added PMON and DDB targets.

2001-08-22  Tom Tromey  <tromey@@redhat.com>

	* library/prefs.tcl (pref_read): Version number appears in
	comment.

2001-08-21  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Gdb just fixed this. No
	need for the workaround I just checked in anymore.

2001-08-21  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Reinitialize disassemle info's
	stream parameter: we just deleted the one it saved when we
	re-routed gdb_stdout to our own gdb_stdout.

2001-08-20  Keith Seitz  <keiths@@redhat.com>

	* library/stackwin.itb (build_win): Use iwidget's scrolled listbox
	instead of tix scrolled list box.
	(update): Update to use iwidget's scrolled list box.
	(change_frame): Ditto.
	Remove parameters.
	* library/stackwin.ith (change_frame): Remove all parameters.

2001-08-20  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_load_disassembly): Save the original
	address from parse_and_eval_address: if find_pc_partial_function
	errors, we will lose our original address.
	If find_pc_partial_function does error, print out both
	the address we thought we were disassembling at AND the address
	we actually did disassemble at. This should help elide address-
	to-pointer and pointer-to-address problems.
	* library/srctextwin.itb (FillAssembly): When gdb_load_disassembly
	fails, use its error message instead of the cooked "Unable to
	Read insturctions..." message.
	(UnLoadFromCache): If oldpane is empty, don't try show it,
	don't try to set our view to it, don't do anything but
	erase the given pane.

2001-08-17  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-varobj.c (variable_obj_command): Pass pointer
	to varobj* when calling variable_update (API changed).
	(variable_create): Don't pass varobj* to install_variable. It's
	not used.
	(variable_children): Likewise.
	(variable_update): Change parameters to accept pointer to
	varobj*. Matches API change in varobj_update.
	(install_variable): Remove unused "var" parameter.

2001-08-16  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Revert change from earlier.
	It is insufficient. We must get the absolute pathname
	from autoconf.
	Don't bother setting TCL_LIBRARY: it must be set already
	in order for us to execute a script.

2001-08-16  Keith Seitz  <keiths@@redhat.com>

	* library/globalpref.ith (_change_font, _change_size): New
	private methods.
	(_size): New private variable.
	(font_changed, wfont_changed): Removed.
	* library/globalpref.itb (make_font_item): Change combobox
	callback to use _change_font.
	Replace tixControl with iwidgets::spinint.
	(font_changed, wfont_changed): Removed.
	(_change_font, _change_size): New private methods.
	* tclIndex: Regenerate.

2001-08-16  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Make sure we're working with
	absolute pathnames in the *_LIBRAY variables.

2001-08-16  Keith Seitz  <keiths@@redhat.com>

	From Ian Roxborough  <irox@@redhat.com>
	* generic/gdbtk-hooks.c (x_event): Deal with Tcl API insanity
	for Tcl_ObjGetVar2 or Tcl_GetObjVar2.
	(gdbtk_trace_find): Likewise for Tcl_GlobalEvalObj
	or Tcl_EvalObj (TCL_EVAL_GLOBAL).

2001-08-15  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Don't assume a particular
	layout for the source directory, let the Makefile tell us
	where the real source directory is.
	When compiling under Cygwin, convert the (posix) path to a
	win32 path, which is what tcl really wants.

2001-08-15  Ian Roxborough  <irox@@redhat.com>

        * generic/gdbtk.c (gdbtk_init): If Insight isn't
        executed from inside a directory called "bin",
        assume that we are being running from the build
        directory and set the *_LIBRARY variables to point
        to (hopefully) the correct source directory.

2001-08-13  Keith Seitz  <keiths@@redhat.com>

	* library/regwin.ith: Rewrite.
	* library/regwin.itb: Rewrite.
	* library/tclIndex: Regenerate.

2001-08-13  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-register.c (gdb_register_info): New function.
	Consolidates all register handling.
	(get_register_size): New function.
	(gdb_changed_register_list, gdb_fetch_registers,
	gdb_regnames): Deprecate.
	(setup_architecture_data): Free old register cache
	when necessary.

2001-08-13  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Register
	architecture_changed event handler.
	(gdbtk_architecture_changed): New function.
	* library/gdbevent.ith (class ArchChangdEvent): New event.
	* library/ehandler.ith (arch_changed): New method. Handler
	for ArchChangedEvents.
	* library/interface.tcl (gdbtk_tcl_architecture_changed): New
	proc to handle architecture change events.

2001-08-09  Keith Seitz  <keiths@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Add new font
	color defaults for highlighting, headers, selecting, and "normal".
	Get rid of gdb/variable/highlight_fg and gdb/reg/highlight_fg.
	* library/variables.tcl (build_win): Use gdb/font/highlight_fg
	and gdb/font/highilght_bg to set highlight style.
	* library/memwin.itb (build_win): Use header_fg and header_bg.

2001-08-03  Keith Seitz  <keiths@@redhat.com>

	* library/srcbar.itcl (_post): New method.
	(_update_file_menu): New method.
	(create_file_menu): Move the guts to _update_file_menu.
	Add a post command to the menu.
	* library/interface.tcl (gdbtk_tcl_file_changed): Catch the
	call to run_hooks.
	(gdbtk_tcl_exec_file_display): Save the new session, too.
	(set_exe_name): Don't bother saving the session here.
	(_close_file): Save the session here, too.
	(gdbtk_clear_file): Catch the call to run_hooks, too.
	* library/gdbmenubar.itcl (menubar_new_menu): Allow caller
	to specify optional arguments to be passed to Tk when
	creating the menu.
	Tk's "menu add" command returns an empty string. Save the
	menu's index in the parent instead. This is what all
	the menu subcommands want.

2001-08-02  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Update
	with recent breakpoint structure changes in gdb.
	(gdb_set_bp_addr): Likewise.
	(gdb_get_tracepoint_info): Update with recent tracepoint
	structure changes in gdb.

2001-07-31  Elena Zannoni  <ezannoni@@redhat.com>

	* generic/gdbtk-cmds.c: Don't include regcache.h.
	* generic/gdbtk-register.c: Include regcache.h.
	
2001-07-26  Jonathan Larmour  <jlarmour@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Add additional entry
	points for eCos if main is not present.

2001-07-21  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_locate_main): Fix function 
	so that it returns either a null string or a valid location,
	as documented.

	* library/variables.tcl (build_menu_helper): Set
	the Format menu option to "disabled" initially.

2001-07-20  Martin M. Hunt  <hunt@@redhat.com>

	* library/managedwin.itb: Revert to global to properly
	initialize geometry with some window managers.
	* library/managedwin.ith (shutdown): Remove _geometry.

	* library/memwin.itb: Fix syntax to open a new window
	using the "-force" flag.

	* generic/gdbtk-register.c (gdb_regnames): Fix 'if'
	statement so count is decremented only if "-numbers"
	is the first arg.

2001-07-18  Martin M. Hunt  <hunt@@redhat.com>

	* library/util.tcl (find_iwidgets_library): Look
	for iwidgets3* so we don't accidently find iwidgets2.x.

2001-07-16  Nick Duffek  <nsd@@redhat.com>

	* library/regwin.itb (RegWin::build_win): Add radio button
	for unsigned register format.
	(RegWin::reg_select): Iterate through 8 rather than 7 formats.
	(RegWin::but3): Add menu option for unsigned register format.

2001-07-13  Keith Seitz  <keiths@@redhat.com>

	* library/download.itb (constructor): Use the iwidgets
	feedback widget instead of tixMeter.
	Pack all the topmost widgets together -- don't use grid.
	(update_download): Support the feedback widget.
	(done): Ditto.

	* library/download.ith (steps): New private variable.
	(num_steps): New common.

2001-07-12  Keith Seitz  <keiths@@redhat.com>

	* library/srcbar.itcl (create_trace_buttons): Fix
	syntax errors.

	* library/tracedlg.tcl: Update to work with Itcl3.0
	and ManagedWin.

	* library/actiondlg.tcl: Update to work with Itcl3.0
	and ManagedWin.
	(build_win): Use iwidgets scrolled listbox instead
	of the tix one.

2001-07-05  Keith Seitz  <keiths@@redhat.com>

	* library/managedwin.itb (_create): Don't pass "-over"
	to center_window unless we really are asked to put the
	window over another!

2001-06-18  Keith Seitz  <keiths@@redhat.com>

	* library/managedwin.itb (_create): When creating a
	window over another, be sure to center on the window,
	not the object.

2001-06-13  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-bp.c (gdbtk_tracepoint_create): Change
	parameter to int to match breakpoint notifications.
	(gdbtk_tracepoint_modify): Ditto.
	(gdbtk_tracepoint_delete): Ditto.
	(tracepoint_notify): Ditto.
	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Remove
	tracepoint hooks and install tracepoint event handlers.

2001-06-11  Tom Tromey  <tromey@@redhat.com>

	* library/help/session.html: New file.
	* library/help/index.html: Added link.

	* library/session.tcl (session_save): Save breakpoints.
	(SESSION_serialize_bps): New proc.
	(SESSION_recreate_bps): New proc.
	(session_load): Recreate breakpoints.
	* library/util.tcl (bp_exists): Expect user specification in
	breakpoint info.
	* library/srctextwin.itb (SrcTextWin::showBPBalloon): Expect user
	specification in breakpoint info.
	* library/gdbevent.itb (BreakpointEvent::_init): Initialize
	_user_specification.
	(BreakpointEvent::get): Handle user_specification.
	* library/gdbevent.ith (BreakpointEvent): Added
	_user_specification field.
	* library/bpwin.itb (BpWin::bp_store): Expect user specification
	and use it when saving.
	(BpWin::bp_type): Expect user specification.
	* generic/gdbtk-bp.c (BREAKPOINT_IS_WATCHPOINT): New macro.
	(gdb_get_breakpoint_info): Added `user specification' to result.

2001-06-11  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-stack.c (gdb_stack): Return TCL_ERROR if
	we are unable to get the current frame. get_current_frame
	may have output an error message.

2001-06-07  Keith Seitz  <keiths@@redhat.com>

	* generic/gdbtk-hooks.c (x_event): Remove unused variable "count".
	(tracepoint_notify): Remove superfluous declaration. This funtion
	was moved to gdbtk-bp.c.

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Remove unused variable
	"b".
	(gdb_set_bp): Remove unused variable "cmd".
	(gdb_set_bp_addr): Remove unused variables "cmd" and "filename".

	* generic/gdbtk.c (gdbtk_init): Remove unused variables
	"auto_path_name", "auto_path_elem", and "found_main".

2001-06-05  Martin Hunt  <hunt@@redhat.com>                                    

	* generic/gdbtk.c (_initialize_gdbtk): Don't close console yet.
	(gdbtk_init): Wait until after tcl/tk stuff is all initialized
	to close console (on Windows) and redirect ouput.
	
2001-06-05  Martin Hunt  <hunt@@redhat.com>

	* library/globalpref.itb(build_win): Don't change directory
	before building icon combobox.  Add debug lines.

2001-06-04  Keith Seitz  <keiths@@redhat.com>

	* library/srcbar.itcl (constructor): Set the toolbar's initial
	state.

2001-06-04  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdb_update_hook): Mark as deprecated.
	(gdbtk_update): Dispatch and UpdateEvent, too.
	* library/ehandler.ith (update): New event handler.
	* library/gdbevent.ith (UpdateEvent): New event.
	* library/gdbevent.itb (UpdateEvent::constructor): New method.
	(UpdateEvent::get): New method.
	* library/kod.ith (udpate): Match event handler definition.
	* library/kod.itb (update): Ditto.
	(build_win): Pass dummy argument to update method.
	(top): Ditto.
	(up): Ditto.
	(set_variable): Ditto.
	* library/memwin.ith (update): Match event handler definition.
	* library/memwin.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	* library/process.ith (update): Match event handler definition.
	* library/process.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	* library/regwin.ith (update): Match event handler definition.
	* library/regwin.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	(but3): Ditto.
	(unedit): Ditto.
	* library/stackwin.ith (update): Match event handler definition.
	* library/stackwin.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	* library/tdump.tcl (update): Match event handler definition.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	* library/variables.tcl (update): Match event handler definition.
	(build_win): Pass dummy argument to update method.
	* library/locals.tcl (update): Match event handler definition.
	(constructor): Pass dummy argument to update method.
	* library/watch.tcl (update): Match event handler definition.
	Pass dummy argument to VariableWin::update.
	(add): Pass dummy argument to update method.
	* library/srcwin.ith (update): New method.
	(update_hook_init): Remove.
	* library/srcwin.itb (update): New method.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	* tclIndex: Regenerate.

2001-06-01  Keith Seitz  <keiths@@redhat.com>

	* library/console.itb (constructor): Pass dummy argument
	to idle method.
	(destructor): Ditto.

2001-05-31  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdbtk_idle): Run hooks, too,
	until they're all gone.

2001-05-31  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdb_idle_hook): Mark as deprecated.
	(gdbtk_idle): Dispatch an IdleEvent. gdb_idle_hook is gone.
	* library/ehandler.ith (idle): New event handler.
	* library/gdbevent.ith (IdleEvent): New event.
	* library/console.ith (idle): Match event handler definition.
	* library/console.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/kod.ith (idle): Match event handler definition.
	* library/kod.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/memwin.ith (idle): Match event handler definition.
	* library/memwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/pluginwin.itcl (stopped): Rename to "idle" and
	match event handler definition.
	Fix misleading comments.
	* library/process.ith (idle): Match event handler definition.
	* library/process.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/regwin.ith (idle): Match event handler definition.
	* library/regwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/srcbar.itcl (idle): New method.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/srcwin.ith (idle): Match event handler definition.
	* library/srcwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/stackwin.ith (idle): Match event handler definition.
	* library/stackwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/variables.tcl (idle): Match event handler definition.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/plugins/rhabout/rhabout.itcl (stopped): Rename
	to "idle" and match new event handler definition.
	* library/tclIndex: Regenerated.

2001-05-31  Keith Seitz  <keiths@@redhat.com>

	* library/interface.tcl (gdb_busy_hook): Deprecate.
	(gdbtk_busy): Create and dispatch a BusyEvent instead
	of running hooks.
	* library/ehandler.ith (busy): New event handler.
	* library/gdbevent.ith (BusyEvent): New event class.
	* library/console.ith: Inherit from GDBEventHandler.
	(busy): Match event handler definition.
	* library/console.itb (busy): Ditto.
	(constructor): Remove gdb_busy_event.
	(destructor): Ditto.
	* library/kod.ith (busy): Match event handler definition.
	* library/kod.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/memwin.ith (busy): Match event handler definition.
	* library/memwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/pluginwin.itcl (running): Rename to "busy" and
	match event handler definition.
	(consturctor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/process.ith (busy): Match event handler definition.
	* library/process.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/regwin.ith (busy): Match event handler definition.
	* library/regwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/srcbar.itcl (constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	(busy): New method.
	* library/srcwin.ith (busy): Match event handler definition.
	* library/srcwin.itb (busy): Ditto.
	Only do the "busy" stuff if do_updates is set.
	(toggle_updates): Remove gdb_busy_hook.
	(constructor): Ditto.
	(destructor): Ditto.
	* library/stackwin.ith (busy): Match event handler definition.
	* library/stackwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/variables.tcl (constructor): Ditto.
	(destructor): Ditto.
	(disable_ui): Rename to "busy" and match event handler
	definition.
	* library/plugins/rhabout/rhabout.itcl (running): Rename
	to "busy" and match new event handler definition.
	* library/tclIndex: Regenerated.

2001-05-25  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-cmds.c (bin2hex): New function.
	(fromhex): New function.
	(gdb_set_mem): New function.
	(Gdbtk_Init): Add new command, "gdb_set_mem".
	* library/memwin.itb (edit): Use "gdb_set_mem" to set
	memory, not some gdb_cmd contrivance.
	When sending data to gdb_set_mem, make sure that it
	is properly zero-padded.

2001-05-22  Keith Seitz  <keiths@@cygnus.com>

	* memwin.ith (error_dialog): Declare public method.
	* memwin.itb (error_dialog): Define.
	(edit): When attempting to set memory, post an error dialog
	if gdb told us an error occurred while writing the memory.

2001-05-22  Keith Seitz  <keiths@@cygnus.com>

	* library/interface.tcl (gdbtk_tcl_file_changed): Handle
	the case of empty-string files, sent by gdb when the
	user requests to reset the file.
	(_close_file): New proc to deal with closing an exe.
	* library/srcbar.itcl (create_file_menu): Add "Close" menu
	option.
	(create_view_menu): Change key binding for Watch Window to
	Ctrl+T to accomodate "Close" going to Ctrl+W.
	* library/srctextwin.itb (config_win): Update key binding
	for Watch Window.
	Add key binding for Close.
	(do_key): Add "close".
	(_clear_cache): Finally implement. I think this works now.

2001-05-22  Keith Seitz  <keiths@@cygnus.com>

	* library/variables.tcl (postMenu): Add mysterious workaround
	for popup menu bug in Tk for windows.
	Highlight the selection, too.

2001-05-21  Keith Seitz  <keiths@@cygnus.com>

	* library/managedwin.itb (_create): Check the geometry of
	any window we create. Don't create a window that is
	bigger than the screen.

2001-05-18  Keith Seitz  <keiths@@cygnus.com>

	* library/managedwin.ith (_geometry): Use a protected variable
	instead of a global from ManagedWin::reveal.
	(open): Make arg list reflect managedwin.itb.
	* library/managedwin.itb (window_name): Use class variable
	_top instead of recomputing the toplevel every time.
	(reveal): Ditto.
	Use class variable "_geometry" instead of global variable.
	(shutdown): Do not save ModalDialogs.
	(_create): If centering the new window, use libgui's
	center_window to do it.

2001-05-18  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-hooks.c (gdbtk_wait): Change integer pid
	argument to match gdb's new "ptid_t" pids.

2001-05-14  Keith Seitz  <keiths@@cygnus.com>

	* library/interface.tcl (gdbtk_quit_check): Don't save sessions
	here. It doesn't work for the Console Window.
	(gdbtk_cleanup): Save session information here.
	(gdbtk_tcl_exec_file_display): When files are loaded,
	get the full pathname to the exe.

2001-05-11  Tom Tromey  <tromey@@redhat.com>

	* library/prefs.tcl (pref_save): Fix bug when key in gdb space has
	extra `/' in it.

2001-05-11  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-bp.c (set_raw_breakpoint): Revise declaration
	to match the recently changed declaration in breakpoint.c. 
	Update all callers.

2001-05-11  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-bp.c (gdbtk_create_breakpoint): Safe guard
	against "invalid" (internal) breakpoint numbers.
	(gdbtk_modify_breakpoint): Ditto.
	(gdbtk_delete_breakpoint): Ditto.

2001-05-10  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-bp.c (gdb_set_bp): Generate a breakpoint event
	when we create a breakpoint. The hook is no longer used.
	(gdb_set_bp_addr): Ditto.

2001-05-10  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-bp.c (breakpoint_list, breakpoint_list_size): New
	variables. Gdb is forcing us to maintain our own breakpoint
	database.
	(Gdbtk_Breakpoint_Init): Initialize our breakpoint database.
	(gdb_find_bp_at_addr): Use our breakpoint database.
	(gdb_find_bp_at_line): Ditto.
	(gdb_get_breakpoint_list): Ditto.
	(gdb_get_breakpoint_info): Remove deleted breakpoint hack.
	(gdbtk_create_breakpoint): Moved here from gdbtk-hooks.c.
	Add breakpoint to our breakpoint database.
	(gdbtk_modify_breakpoint): Ditto the move.
	(gdbtk_delete_breakpoint): Ditto the move.
	Remove breakpoint from our database.
	(gdb_get_tracepoint_info): Remove delete tracepoint hack.
	It's not needed for tracepoints: they were implemented properly.
	(gdbtk_create_tracepoint): Moved here from gdbtk-hooks.c.
	(gdbtk_modify_tracepoint): Ditto.
	(gdbtk_delete_tracepoint): Ditto.
	* generic/gdbtk-hooks.c: Include "gdb-events.h".
	(gdbtk_create_breakpoint): Moved to gdbtk-bp.c
	(gdbtk_modify_breakpoint): Ditto.
	(gdbtk_delete_breakpoint): Ditto.
	(breakpoint_notify): Ditto.
	(gdbtk_create_tracepoint): Ditto.
	(gdbtk_modify_tracepoint): Ditto.
	(gdbtk_delete_tracepoint): Ditto.
	(tracepoint_notify): Ditto.
	(report_error): No longer static.
	(gdbtk_add_hooks): Create our own event handler
	vector and register breakpoint_create, breakpoint_modify,
	and breakpoint_delete handlers in gdbtk-bp.c.

2001-05-10  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-cmds.c: Put on diet. All breakpoint-,
	tracepoint-, register-, and stack-related functions moved
	into separate files.
	(call_wrapper): Renamed to "gdbtk_call_wrapper" and export.
	Update all callers.
	* generic/gdbtk.h: Move all breakpoint-related stuff into
	gdbtk-bp.c.
	Remove declaration for "call_wrapper". Now in gdbtk-cmds.h
	(and called "gdbtk_call_wrapper").
	* generic/gdbtk-varobj.c: Include "gdbtk-cmds.h".
	* generic/gdbtk-cmds.h: New file.
	* generic/gdbtk-bp.c: New file.
	* generic/gdbtk-register.c: New file.
	* generic/gdbtk-stack.c: New file.

2001-05-09  Keith Seitz  <keiths@@cygnus.com>

	* library/interface.tcl (gdb_quit_hook): Remove. It's unused.
	(gdbtk_quit): Do no shutdown window manager and save
	preferences here.
	(gdbtk_cleanup): This is the proper place to do those
	things.

2001-05-07  Keith Seitz  <keiths@@cygnus.com>

	* library/globalpref.itb (build_win): Preserve the
	current working directory.

2001-05-06  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_target_has_execution_command)
	(get_clear_file): Use ptid_equal() for comparing ptid values. 
	Use ``null_ptid'' instead of 0 in comparisons against
	``inferior_ptid''.

	From Phil Edwards <pedwards@@disaster.jaj.com>:
	* generic/gdbtk-cmds.c (gdb_target_has_execution_command)
	(get_clear_file): Rename ``inferior_pid'' to ``inferior_ptid''.

2001-05-01  Keith Seitz  <keiths@@cygnus.com>

        * gdbtk.c (gdbtk_init): Include the command "warp_pointer"
        for all platforms. Used for testing ONLY.

        * util.tcl (gdbtk_read_defs): If there is an error reading
        the testsuite definition file, print the error message to
        stderr, not stdout. This will allow tcl to know that an error
        has occurred.
        (find_iwidgets_library): Make it work for running testsuites
        from installed directory.

        * main.tcl: If we failed to find iwidgets, check if the
        testsuite is running. If it is running, do not pop up
        a dialog box: just print out the error and exit.
        Initialize _test(verbose) for the testsuite.

2001-04-23  Keith Seitz  <keiths@@cygnus.com>

	* generic/gdbtk-cmds.c (gdb_get_breakpoint_info): If unable
	to find the requested breakpoint for lookup, check if
	it is about to be deleted and return information about
	that breakpoint.
	(gdb_get_tracepoint_info): Ditto for tracepoints.
	* generic/gdbtk-hooks.c (gdbtk_deleted_bp): New global.
	(gdbtk_delete_breakpoint): Remember the deleted breakpoint
	for gdb_get_breakpoint_info, in case it is called during
	the event notification.
	(gdbtk_delete_tracepoints): Ditto for tracepoints.

	* generic/gdbtk-cmds.c (gdb_entry_point): Return an empty
	string when there is no active target (i.e., there is no
	entry point to return yet).

2001-04-20  Keith Seitz  <keiths@@cygnus.com>

	* library/srctextwin.ith (handle_set_hook): Rename to set_variable.
	* library/srctextwin.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/srcbar.itcl: Inherit from GDBEventHandler.
	(set_hook): Rename to set_variable and handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/regwin.ith (handle_set_hook): Renamed to set_variable.
	* library/regwin.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/kod.ith (set_os): Renamed to "set_variable".
	* library/kod.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/tclIndex: Regenerated.

2001-04-20  Keith Seitz  <keiths@@cygnus.com>

	* library/interface.tcl (gdbtk_tcl_set_variable): New proc.
	* library/gdbevent.ith (SetVariableEvent): New event.
	* library/gdbevent.itb (SetVariableEvent::get): Override
	GDBEvent::get.
	* library/ehandler.ith (set_variable): New public method.
	* generic/gdbtk-hooks.c (gdbtk_set_hook): Let inteface function
	gdbtk_tcl_set_variable do all the work.
	* tclIndex: Regenerated.

2001-04-19  Keith Seitz  <keiths@@cygnus.com>

	* library/gdbevent.ith: New file. Defines new event model.
	* library/gdbevent.itb: New file. Implements new event
	model.
	* library/ehandler.ith: New file. Defines new event model.
	* library/ehandler.itb: New file. Implements new event
	model.
	* library/gdbwin.ith: Inherit from GDBEventHandler.
	(update): Delete unused method.
	(_state): Delete unused variable.
	* library/tclIndex: Regenerated.

	* generic/gdbtk-cmds.c (gdb_set_bp): Use create_breakpoint_hook
	to notify gui of changes.
	(gdb_set_bp_addr): Ditto.
	(gdb_get_breakpoint_info): Update comments to match reality.
	* generic/gdbtk-hooks.c (breakpoint_notify): Only pass the
	breakpoint number which generated the event.
	(tracepoint_notify): Ditto for tracepoints.
	* library/interface.tcl (gdb_breakpoint_change_hook): Mark
	as deprecated and comment out definition.
	(gdbtk_tcl_breakpoint): Use new GDBEvent event "breakpoint"
	to notify rest of UI about breakpoint event.
	(gdbtk_tcl_tracepoint): Ditto for "tracepoint" event.
	* library/bpwin.ith (update): Renamed to "breakpoint".
	(breakpoint): New public method.
	(tracepoint): New public method.
	(bp_add): Take event as argument instead of number.
	(bp_modify): Ditto.
	(bp_delete): Ditto.
	* library/bpwin.itb (constructor): Remove
	gdb_breakpoint_changed_hook.
	(destructor): Ditto.
	(build_win): Insert any existing breakpoints by
	making BreakpointEvents for them.
	(breakpoint): Renamed from "update" to handle
	breakpoint events.
	Remove code to deal with tracepoints.
	(tracepoint): New method to handle tracepoint
	events.
	(bp_add): Deal with breakpoint events, not breakpoint
	numbers.
	(bp_modify): Ditto.
	(bp_delete): Ditto.
	* library/srctextwin.ith: Inherit from GDBWin.
	(breakpoint): New public method.
	(tracepoint): New public method.
	* library/srctextwin.itb (constructor): Remove
	gdb_breakpoint_changed_hook.
	(destructor): Ditto.
	(breakpoint): New method to handle breakpoint event.
	(tracepoint): New method to handle tracepoint event.
	(do_bp): Handle duplicate breakpoints for asm, too.
	(remove_bp_at_line): Delete breakpoints by number, not
	linespec. clear_command removes breakpoints from the
	breakpoint_chain BEFORE deleting the breakpoint. delete_command
	does this afterward (so we can call gdb_get_breakpoint_info on
	an about-to-be-deleted breakpoint).

2001-04-18  Martin M. Hunt  <hunt@@redhat.com>
	
	* generic/gdbtk.c (gdbtk_init): Initialize uiout.

2001-04-18  Tom Tromey  <tromey@@redhat.com>

	* library/interface.tcl (run_executable): Use
	gdb_set_inferior_args.
	* library/session.tcl (session_load): Use gdb_set_inferior_args.
	* generic/gdbtk-cmds.c (Gdbtk_Init): Register
	gdb_set_inferior_args.
	(gdb_get_inferior_args): New function.

2001-04-17  Tom Tromey  <tromey@@redhat.com>

	* library/session.tcl (session_save): Use gdb_get_inferior_args.
	* generic/gdbtk-cmds.c (inferior_args): Removed.
	(Gdbtk_Init): Don't register gdb_inferior_args variable.  Do
	register gdb_get_inferior_args function.
	(gdb_get_inferior_args): New function.

2001-04-17  Fernando Nasser  <fnasser@@redhat.com>

	* library/variables.tcl (update): Temporary fix to the detection of
	"type_changed" condition.  Proper fix will require that this condition
	is properly reported by the underlying code.

2001-04-12  Nicholas Duffek  <nsd@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_entry_point): New TCL command.
	* library/interface.tcl (gdbtk_locate_main): Try the program's
	entry point if no main function is found.

2001-04-10  Keith Seitz  <keiths@@cygnus.com>

	From Tom Tromey (tromey@@redhat.com):
	* library/managedwin.itb (reveal): We actually do want to force
	the focus for Windows.

2001-04-09  Martin M. Hunt  <hunt@@redhat.com>

	* library/managedwin.itb (ManagedWin::reveal): After
	deiconifying window for the first time, set its geometry
	again, if the platform is unix. This fixes a problem with kde.
	(ManagedWin::_create): Set a variable with the initial
	geometry.

2001-04-04  Christopher Faylor  <cgf@@redhat.com>

	* generic/gdbtk.c: Add __CYGWIN__ conditional to WIN32 test.

2001-04-04  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_fileopen): New function.
	Initialize ui_file stuff for gdbtk.
	(gdbtk_fputs): Don't print if gdbtk_disable_fputs. Send
	stdlog and stdtarg to their handler functions.

	* generic/gdbtk.c (Gdbtk_Init): Don't set gdb_stdlog 
	and gdb_stdtarg to gdb_stdout, 
	(gdbtk_init): Unset gdbtk_disable_fputs
	when ready to accept output from gdb. Remove references to
	fputs_unfiltered_hook.
	
	* generic/gdbtk.h: Declare new flag gdbtk_disable_fputs.

	* generic/gdbtk-cmds.c (gdb_restore_fputs): Instead of setting
	fputs_unfiltered_hook, set the new flag gdbtk_disable_fputs.

	* library/prefs.tcl (pref_set_defaults): Add defaults
	for log_fg and target_fg.

	* library/interface.tcl (gdbtk_tcl_fputs_error): Use
	err_tag.
	(gdbtk_tcl_fputs_log): New function. Write log messages
	to console.
	(gdbtk_tcl_fputs_target): New function.	Write target
	IO to console.

	* library/console.ith (einsert): Add tag parameter.
	
	* library/console.itb (_build_win): Add new tags for log 
	and target IO.
	(einsert): Add tag parameter.

2001-04-02  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_loadfile): Adjust size of text_argv
	array to prevent writing out of range. Remove unused variables.
	Fix formatting.
	(gdb_get_tracepoint_info): Remove unused variable "fname".
	(gdb_load_disassembly): Remove unused variable "widget".
	(gdb_loc): Remove unused variable "sym".
	(gdb_set_bp_addr): Remove unused variable "line".
	(gdb_get_breakpoint_info): Remove unused variable "sym".
	(get_frame_name): Remove unused variable "name".

2001-03-29  Fernando Nasser  <fnasser@@redhat.com>

	* library/variables.tcl (update): Cope with varobj type changes.

2001-03-29  Fernando Nasser  <fnasser@@redhat.com>

	* library/variables.tcl (destructor): Remove file_changed_hook hook.

2001-03-29  Fernando Nasser  <fnasser@@redhat.com>

	* generic/gdbtk-varobj.c (variable_obj_command): Do not cache varobj
	handles as they may change -- use varobj_get_handle() instead.

2001-03-15  Martin Hunt  <hunt@@redhat.com>
	* library/browserwin.itb: Change all references to freeze_me,
	thaw_me and Top to _freeze_me, _thaw_me, and _top to match 
	changes to managedwin.
	
	* library/kod.itb: Ditto.  

2001-03-15  Tom Tromey  <tromey@@redhat.com>

	* library/mempref.itb (MemPref::build_win): Correctly set initial
	value of combobox.
	* library/memwin.itb: Added copyright header.
	(MemWin::constructor): Set defaults from preference database.
	(MemWin::reconfig): Update preference database.
	* library/prefs.tcl (pref_save): Save `mem' preferences.
	(pref_set_defaults): Define default memory preferences.

2001-03-08  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c (map_arg_registers): Use REG_NUM instead of
	ARCH_REG_NUM.

2001-03-01  Nicholas Duffek  <nsd@@redhat.com>

	* README.GDBTK: Minor spelling, grammar, and formatting fixes.

2001-03-01  Keith Seitz  <keiths@@cygnus.com>

	* library/managedwin.ith: Move all implementations into
	managedwin.itb.
	(public variable nosize): Delete.
	(freeze_me, thaw_me, make_icon_window): Prepend with
	underscore to remind people these are not public
	methods/procs.
	(protected variable Top, screenwidth, screenheight): Ditto
	for these variables.
	(protected common manage_active, mainwindow): Delete.
	(enable): Delete.
	(reconfig): Add empty body.
	* library/managedwin.itb: Move all implementations from
	header here.
	Update all references to renamed variables/methods/procs.
	(destructor, restart, shutdown, _open, find) Let
	Itcl tell us which ManagedWins we have lying around.
	(enable): Delete.
	(reconfig): It's empty. Moved empty body to header.

2001-03-01  Nicholas Duffek  <nsd@@redhat.com>

	* library/managedwin.itb (ManagedWin::shutdown): Save each
	managed window's geometry as a preference.
	* library/managedwin.ith (ManagedWin::destructor): Don't save
	managed windows' geometries as preferences.

2001-03-01  Nicholas Duffek  <nsd@@redhat.com>

	* library/srctextwin.itb (SrcTextWin::location): Clear previous
	pane's cursor after switching panes.

2001-03-01  Nicholas Duffek  <nsd@@redhat.com>

	* library/srctextwin.itb (config_win): Give focus to $win.

Tue Feb 27 23:56:23 2001  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-cmds.c: Include recently created "regcache.h"

2001-02-27  Keith Seitz  <kseitz@@nwlink.com>

	* generic/gdbtk-cmds.c (gdb_fetch_registers): Mark
	the result as generating a list only if it really does
	generate a list.

2001-02-21  Fernando Nasser  <fnasser@@redhat.com>

	* TODO: New file.  Initial version of the TODO file, as posted to the
	insight list circa October 2000.

2001-02-14  Fernando Nasser  <fnasser@@redhat.com>

	From 2001-02-09  Martin Hunt  <hunt@@redhat.com>
	* generic/gdbtk-cmds.c (gdb_load_disassembly): In mixed
	mode, source lines should be tagged with source_tag2.

2001-02-08  Fernando Nasser  <fnasser@@redhat.com>

	From 2001-02-06  Martin Hunt  <hunt@@redhat.com>
	* library/debugwin.itb: Change window name to "Insight Debug"
	* library/embeddedwin.ith: Fix debug messages.
	* library/locals.tcl: Ditto.
	* library/watch.tcl (postMenu): Ditto.
	* library/variables.tcl: Ditto.
	* library/interface.tcl: Ditto.
	* library/regwin.itb: Ditto.
	* library/gdbwin.ith: Ditto.
	* library/srcbar.itcl: Ditto.

2001-02-06  Fernando Nasser  <fnasser@@redhat.com>

	Originally from Martin Hunt <hunt@@redhat.com>, with modifications
	* library/srcwin.itb (_name): Check for errors when invoking
	gdb_find_file.
	* library/srctextwin.itb (_mtime_changed, location): Ditto.
	* generic/gdbtk-cmds.c (gdb_find_file_command): Better error checking.
	(full_lookup_symtab): Fix misleading comment.

2001-02-04  Fernando Nasser  <fnasser@@redhat.com>

	* library/plugins/plugins.tcl: Fix typos and remove "-transient"
	parameter from open command.
	* library/plugins/HOW-TO: New file.  Describes how to add a plug-in
	window to Insight.

2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/images/insight.gif: New splash screen/about graphics.
	* library/images2/insight.gif: New splash screen/about graphics.
	* library/about.tcl: Update copyright, window title and change colors
	to match new splash screen/about images.

2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbtoolbar.itcl (add): New method.  Emulate the style of the
	toolbar iwidget commands.
	(toolbar_show): Old name.
        (show): New name.
	(toolbar_create_button): Old name.
        (create): New name.
	(toolbar_configure_button): Old name.
        (itemconfigure): New name.
        (toolbar_bind_button): Old name.
        (itembind): New name.
        (toolbar_set_button_balloon): Old name.
        (itemballoon): New name.
        (toolbar_add_button): Make private.
        (toolbar_add_label): Ditto.
        (toolbar_add_button_separator): Ditto.
	(toolbar_remove_button): Ditto.
	(tollbar_insert_button): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/rhabout/rhabout.itcl: Ditto.

2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (constructor): Remove unused code.
	(add): New method.  Emulate the style of the menubar iwidget commands.
	(menubar_show): Old name.
	(show): New name.
	(menubar_menu_exists): Old name.
	(exists): New name.
	(menubar_clear_menu): Old name.
	(clear): New name.
	(menubar_delete_menu): Old name.
        (delete): New name.
	(menubar_new_menu): Make private.  Does not return anything.
	(menubar_add_menu_command): Make private.
	(menubar_add_menu_separator): Ditto.
	(menubar_change_menu_state): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/plugins.tcl: Ditto.
	* library/plugins/rhabout/rhabout.itcl: Ditto.

2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/pluginwin.itcl (contrucdtor, destructor): Use "code" to
	specify callbacks.
	(running, stopped, no_inferior): Make it a protected method.
	(childsite): Explicitly mark as a public method.
	* library/plugins/rhabout/rhabout.itcl (constructor): Add a label
	widget to show status messages.
	(running, stopped): Overload versions of the base class; display
	status messages as an example.

2001-01-31  Fernando Nasser  <fnasser@@redhat.com>

	* library/pluginwin.itcl: New file.  Implements the PluginWindow
	class that provides some basic functionality for plug-ins.
	* library/plugins/rhabout/rhabout.itcl: Inherit from the new
	PluginWindow class.  Remove code dependent on ModalDlg.
	(constructor): Creates menus and a toolbar to show how these
	PluginWindow components are used.
	* library/tclIndex: Regenerate.

2001-01-31  Fernando Nasser  <fnasser@@redhat.com>

	* library/plugins/rhabout.tcl: Add load for optional sample C command 
	procedure.
	* library/plugins/rhabout/rhabout.itcl (constructor): Try calling
	optional sample C command procedure rhabout_extra_text.
	* library/plugins/rhabout/rhabout.c: New file. Implement an example
	plug-in shared library with a sample C command procedure.
	* library/plugins/rhabout/Makefile: New file. Makefile for the sample
	shared library above (Linux only).

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/plugins: New directory.  Sample plug-in directory to help
	developers of Insight plug-ins.  See README file in that directory.
	* library/plugins/plugins.tcl: New file. Sample version of a code
	fragment file which adds entries to the PlugIn menu of the Source
	Window to activate custom plug-in windows.
	* library/plugins/pkgIndex.tcl: New file.  Sample version of a file
	with package information for the installed plug-ins.
	* library/plugins/rhabout.tcl: New file. Sample file providing a
	plug-in package.
	* library/plugins/rhabout: New directory.  Sample plug-in.
	* library/plugins/rhabout/rhabout.itcl: New file.  Sample class
	implementing a plug-in window.
	* library/plugins/rhabout/tclIndex: New file.  Tcl index for the sample
	plug-in implementation.

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/main.tcl: Add plugin subdirectory, if existent, to auto_path.
	* library/srcbar.itcl (create_plugin_menu): New method.  Create a pull
	down menu for plugins if there are any for this target configuration.
	(create_menu_items): Invoke the new method above.

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (menubar_new_menu): Save lable of a menu to
	use as index.
	(menubar_delete_menu): New function.  Delete a menu.

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (menu_list): Add missing declararion for
	global variable.

2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (set_class_state): Turn off verbose debug
	messages.
	* library/gdbtoolbar.itcl (set_class_state): Ditto.

2001-01-26  Fernando Nasser  <fnasser@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_clear_file): Call exec_file_clear() and
	symbol_file_clear() instead of exec_file_command() and
	symbol_file_command().
	(gdb_find_file_command): Return the proper error text.

2001-01-25  Fernando Nasser  <fnasser@@redhat.com>

	* library/srcbar.itcl: New file. Implement SrcBar, a menu and toolbar
	for the Source Window (code previously in srcmenubar.itcl and
	srctoolbar.itcl).
	* library/srcmenubar.itcl: Remove obsolete file.
	* library/srctoolbar.itcl: Remove obsolete file.
	* library/srcbar.tcl: Remove obsolete file.
	* library/gdbmenubar.itcl (menubar_show): New method. Associate the
	menu with the toplevel window.
        * library/srcwin.itb (_build_win): Use SrcBar.
	* library/tclIndex: Regenerate.

2001-01-24  Fernando Nasser  <fnasser@@redhat.com>

	From  Martin Hunt  <hunt@@cygnus.com>
	* generic/gdbtk-cmds.c (gdb_set_bp_addr, gdb_set_bp): Change
	strsave() to xstrdup().

2001-01-24  Fernando Nasser  <fnasser@@redhat.com>

	From  Martin Hunt  <hunt@@cygnus.com>
	* generic/gdbtk-cmds.c (gdbtk_dis_asm_read_memory): Fix call
	to xfer_memory().

2001-01-19  Fernando Nasser  <fnasser@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Set default value of
	gdb/src/top_control to place the source window controls at the top.

2001-01-18  Fernando Nasser  <fnasser@@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FUNCNAME
	parameter.
        (FillAssembly, FillMixed): Pass the FUNCNAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FUNCNAME parameter
	to method definition.

2001-01-17  Fernando Nasser  <fnasser@@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FILENAME
	parameter.
        (FillAssembly, FillMixed): Pass the FILENAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FILENAME parameter
	to method definition.

2001-01-15  Fernando Nasser  <fnasser@@redhat.com>

	* srcwin.itb (clear_file): Pass the appropriate value to the GO 
	argument of mode() so it does not try to read a source file when
	no executable is loaded.

2001-01-09  Fernando Nasser  <fnasser@@redhat.com>

	* library/srcmenubar.itcl (create_file_menu): Add missing incr for
	session numbers.

2001-01-04  Fernando Nasser  <fnasser@@redhat.com>

	The following changes fix the problem of having to click on a splash
	window to make it disapear.
	* modal.tcl (post): Take as an argument "expire", the time a modal
	window is displayed.
	* managedwin.itb (open): Check for an "expire" argument and pass the
	value down to modal post method.

2001-01-04  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (set_class_state): New public method.
	Standard method to control state by class.
	(menubar_menu_class_find): Delete public accessor method.
	(menubar_change_menu_state): Change the state of a menu item
	not of a whole class list.
	* library/srcmenubar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.
        * library/gdbtoolbar.itcl (set_class_state): New public method.
        Standard method to control state by class.
        (toolbar_button_class_find): Delete public accessor method.
	* library/srctoolbar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.

2001-01-04  Fernando Nasser  <fnasser@@redhat.com>

	* library/interface.tcl (gdbtk_connect): New proc. Connects to ai
	 remote target (code previously at library/gdbmenubar.itcl).
	(disconnect): Rename to...
	(gdbtk_disconnect): New name for proc disconnect.
	* library/srcmenubar.itcl (do_connect): Remove the code mentioned
	above and call the new interface proc gdbtk_connect.
	Also, call ::update idletasks after changing the state of the
	menu entries.
	(do_detach): Call gdbtk_disconnect, not ::disconnect (old name).
	(do_disconnect): Call gdbtk_disconnect, not disconnect (old name).

2001-01-03  Fernando Nasser  <fnasser@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Define gdb/src/top_control
	to allow the source window controls to be placed at the top.
	* library/srcwin.itb (_build_win): Test for gdb/src/top_control
	and place the controls accordingly.

2001-01-02  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl: New file. Define the GDBMenuBar class,
	a generic menubar building facility for Insight windows (WIP).
	* library/gdbtoolbar.itcl: New file. Define the GDBToolBar class,
	a generic toolbar building facility for Insight windows (WIP).
	* library/srcmenubar.itcl: New file. Define the SrcMenuBar class,
	which implements the Source Window menubar (inherits GDBMenuBar).
	* library/srctoolbar.itcl: New file. Define the SrcToolBar class,
	which implements the Source Window toolbar (inherits GDBToolBar).
	* library/srcwin.itb (_build_win): Use SrcMenuBar and SrcToolBar
	instead of the obsolete GDBSrcBar.
	* library/srcbar.tcl: Mark as OBSOLETE.
	* library/toolbar.tcl: Mark as OBSOLETE. Rename class GDBToolBar
	to avoid conflict with new class with the same name.
	* library/Makefile (TCL): Include .itcl files.
	* library/tclIndex: Regenerate.

2001-01-02  Fernando Nasser  <fnasser@@redhat.com>

	* library/srcwin.itb (_build_win): If gdb is running a program, load
	the window with source for that location (if available).
	(download_progress): Calls to "update" must refer to the global
	namespace.

2001-01-02  Fernando Nasser  <fnasser@@redhat.com>

	* library/interface.tcl (gdbtk_quit_check): Save session whenever
	possible.

2001-01-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * library/ChangeLog: Removed. 
        * generic/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * generic/ChangeLog: Removed.

2000-12-14  Fernando Nasser  <fnasser@@redhat.com>

	* library/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* library/ChangeLog-1998: New file.  Similar change for 1998.
	* library/ChangeLog-1997: New file.  Similar change for 1997.
	* library/ChangeLog: Removed entries previous to 2000.
	* generic/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* generic/ChangeLog-1998: New file.  Similar change for 1998.
	* generic/ChangeLog-1997: New file.  Similar change for 1997.
	* generic/ChangeLog: Removed entries previous to 2000.

2000-04-17  Jonathan Larmour  <jlarmour@@redhat.co.uk>

	* ChangeLog-gdbtk: Renamed to ChangeLog
	* ChangeLog: New file
	* README.GDBTK: No need for changelog-default-name hint for Emacs now

Sat Feb  5 00:14:30 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* gdb.rc, gdbtool.ico, README.GDBTK: To here from top level GDB
 	directory.
	* gdb/gdbtcl2: Directory moved to gdbtk/library.
	* gdb/gdbtk/generic: New directory.
	
@


1.171
log
@	* generic/gdbtk-cmds.h (full_lookup_symtab): Don't declare.
	* generic/gdbtk-cmds.c (gdb_find_file_command): Use
	lookup_symtab.
	(gdb_listfuncs): Likewise.
	(gdb_loadfile): Likewise.
	(full_lookup_symtab): Removed.
	* generic/gdbtk-bp.c (gdb_find_bp_at_line): Use lookup_symtab.
	(gdb_set_bp): Likewise.
@
text
@d28 6
@


1.170
log
@	* library/bpwin.ith (_select_and_popup): New private method.
	* library/bpwin.itb (bp_select): Don't bind to Button-3.
	(build_win): Bind Button-3 to _select_and_popup.
	(_select_and_popup): New private method.
@
text
@d1 11
@


1.169
log
@	* library/memwin.itb (incr_addr): Fix typo.
@
text
@d1 7
@


1.168
log
@LITTLE_ENDIAN -> BFD_ENDIAN_LITTLE
@
text
@d1 4
@


1.167
log
@	* library/interface.tcl (set_target_name): Call "pref getd"
	instead of "pref get" to avoid undefined preference error
	message for default-hostname.
@
text
@d1 5
@


1.166
log
@        * library/managedwin.itb (shutdown): Don't save geometry for                                    plugins, either.
@
text
@d1 6
@


1.165
log
@	* library/console.itb (busy): Set the cursor to the watch.
	(idle): Reset cursor to normal.
@
text
@d1 5
@


1.164
log
@2001-11-30  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_eval): Remove
	undocumented debug function.
@
text
@d1 5
@


1.163
log
@	* library/interface.tcl (gdbtk_tcl_preloop): Override session's
	command-line arguments if required.
@
text
@d1 5
@


1.162
log
@	* generic/gdbtk.c (gdbtk_init): If DISPLAY is not set on Unix,
	clear the init_ui_hook so that gdb will properly initialize
	the cli.
@
text
@d1 5
@


1.161
log
@2001-11-08  Martin M. Hunt  <hunt@@redhat.com>
	* generic/gdbtk-cmds.c (gdb_eval): Add an optional
	format argument.
	(hex2bin): Swap bytes around if target is little endian.
	Fix loop count.
	(gdb_incr_addr): New function to do address arithmetic.
	Needed because some addresses are 64-bits and tcl can't
	deal with them, except as strings.

	* library/memwin.itb (MemWin::build_win): Add a label
	to indicate the target endianess.
	(MemWin::edit): Use gdb_incr_addr.
	(MemWin::busy): The constructor calls gdbtk_busy which
	calls this before the window has finished drawing, so
	don't disable items that don't exist yet.
	(MemWin::update_address): Set a flag, bad_expr, if the
	expression does not evaluate. Call gdb_eval with 'x' flag
	to force the result to be hex.
	(MemWin::BadExpr): Set bad_expr.
	(MemWin::incr_addr): Use gdb_incr_addr.
	(MemWin::update_addr): Return is bad_expr is set. Use
	gdb_incr_addr.
	(MemWin::goto): Call update_address.
	* library/memwin.itb: Declare private variable bad_expr.

	* library/util.tcl (gdbtk_endian): New procedure. Returns
	BIG or LITTLE to indicate target endianess.
@
text
@d1 6
@


1.160
log
@2001-11-08  Martin M. Hunt  <hunt@@redhat.com>

	* library/managedwin.itb (ManagedWin::shutdown): Fix
	typo in class name DebugWinDOpts.

	* library/debugwin.itb: Add MemWin to _classes.
@
text
@d2 7
d10 20
@


1.159
log
@2001-11-05  Martin M. Hunt  <hunt@@redhat.com>
	* generic/gdbtk-cmds.h (gdbtk_set_result): Declare.
	A printf-like function to return error messages.
	* generic/gdbtk-cmds.c (gdbtk_set_result): New
	function.
	(gdb_cmd): Use gdbtk_set_result.
	(gdb_immediate_command): Ditto.
	(gdb_load_info): Ditto.
	(gdb_find_file_command): Ditto.
	(gdb_listfuncs): Ditto.
	(gdb_load_disassembly): Ditto.
	(gdb_loc): Ditto.
	(gdb_set_mem): Ditto.
	(gdb_get_mem): Ditto.
	(gdb_loadfile): Ditto.
	* generic/gdbtk-varobj.c (variable_format): Ditto.
	(variable_value): Ditto.
	* generic/gdbtk-stack.c (gdb_get_vars_command): Ditto.
	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Ditto.
	(gdb_set_bp): Ditto.
	(gdb_set_bp_addr): Ditto.
	(gdb_get_tracepoint_info): Ditto.
@
text
@d1 7
@


1.158
log
@2001-11-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/stackwin.itb (StcakWin::reconfig): Destroy sbox
	if it exists.

	* library/process.itb (ProcessWin::reconfig): Destroy sbox
	if it exists. This fixes reconfig failures on Windows. Also
	destroy slbox.

	* library/bpwin.itb (BpWin::reconfig): Destroy sbox if
	it exists.This fixes reconfig failures on Windows. Also
	destroy sf

	* library/tdump.tcl (TdumpWin::reconfig): Delete sbox
	and stext then rebuild window.
@
text
@d2 23
@


1.157
log
@2001-11-05  Martin M. Hunt  <hunt@@redhat.com>

	* library/debugwin.itb (DebugWin::build_win):
	Initialize gdbtk_de(ERRORS_ONLY) and gdbtk_de(filter_var)
	(DebugWin::puts): Rewrite filter to handle new options.
	(DebugWinDOpts::build_win): Update list of classes. Change
	filter dialog so we can not display only errors and warnings
	or choose between displaying ALL classes except those selected
	or only selected classes. Fix "OK" button to apply
	changes before closing dialog.
	DebugWinOpts::_apply): Now takes an agrument that
	indicates if dialog should exit after applying filter.

	* library/debugwin.ith (_apply): Now takes an arg.

	* library/main.tcl: If GDBTK_DEBUGFILE is not set,
	use "insight.log" as the default. If GDBTK_DEBUG is set
	and nonzero, start logging debug messages to
	GDBTK_DEBUGFILE immediately. Never open the debug window
	automatically.

	* library/managedwin.itb (ManagedWin::shutdown): Don't
	save debug window options dialog on active list

	* library/srcwin.itb: Remove troublesome debug line.
@
text
@d1 16
@


1.156
log
@2001-10-18  Martin M. Hunt  <hunt@@redhat.com>
	* library/globalpref.itb (GlobalPref::_init_var):
	New method to initialize _saved and _new arrays.
	(GlobalPref::constructor): Call _init_var.
	(GlobalPref::_buildwin): Use _new array for prefs
	variables. Font optimizations. Remove troublesome
	fonts and sort the list.
	(GlobalPref::toggle_tracing_mode): Removed.  Some
	functionality moved to _apply and _cancel.
	(GlobalPref::_apply): Set prefs with values from the
	_new array.
	(SrcPref::_cancel): Reset prefs with values from _saved.
	* library/globalpref.ith: Changed private variables
	and methods to start with underscore.
	(tracing_cb): Removed.
	(_init): Changed from proc to method.
@
text
@d1 27
a27 1
2001-10-18  Martin M. Hunt  <hunt@@redhat.com>
@


1.155
log
@	* library/memwin.itb (update_addr): Evaluate the address
	to be sent to gdb_get_mem to prevent passing error strings
	to string_to_coreaddr in gdb_get_mem.
@
text
@d1 17
@


1.154
log
@2001-10-29  Martin M. Hunt  <hunt@@redhat.com>

	* library/debugwin.itb: Don't increment number of
	TopLevelWins.

	* library/managedwin.itb: Don't save DebugWins to
	active list.
@
text
@d1 6
@


1.153
log
@2001-10-29  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-bp.c (gdb_set_bp_addr): When setting
	the bp addr_string, use the string the function was called
	with instead of using sprintf to write a new one. This
	avoids a problem with truncating 64-bit addresses.

	* library/srcbar.itcl (SrcBar::create_buttons) Don't
	set width of address label.
	(SrcBar::address) When the address changes, recompute
	width of address label.  If it is more than 10, force it
	to 18, otherwise use 10.
@
text
@d3 8
@


1.152
log
@2001-10-29  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Use
	string_to_core_addr to read address so 64 bits will work.
	(gdb_set_bp): Set error message with Tcl_SetObjResult()
	so it will be displayed.
	(gdb_set_bp_addr):Use string_to_core_addr to read address.
	Set error message with Tcl_SetObjResult().

	* generic/gdbtk-cmds.c (gdb_get_mem): :Use string_to_core_addr
	to read address. Set error message with Tcl_SetObjResult() or
	Tcl_WrongNumArgs.
@
text
@d1 14
a14 1
2001-10-29  Martin M. Hunt  <hunt@@redhat.com>
@


1.151
log
@	* tclIndex: Updated.
	* library/main.tcl: Add session_notice_file_change to
	file_changed_hook.
	* library/session.tcl (session_load): Only load the executable.
	(session_notice_file_change): New proc.
	(SESSION_exe_name): New proc.
	(session_save): Use it.
	(session_notice_file_change): Likewise.
	* library/interface.tcl (gdbtk_tcl_exec_file_display): Don't call
	session_save.
	(gdbtk_tcl_preloop): Don't set executable name or try to find
	main.  Notice a new session if required.
@
text
@d1 13
d28 1
a28 1

d30 1
a30 1

@


1.150
log
@2001-10-18  Martin M. Hunt  <hunt@@redhat.com>

	* library/srcpref.itb (SrcPref::contructor): Move array
	initialization to _init_var.
	(SrcPref::_init_var): New method to initialize _saved and
	_new arrays.
	(SrcPref::buildwin): Rename to _buildwin. Have widgets use
	_new instead of [pref varname ...].  Set initial value of
	tab size spinint.
	(SrcPref::_apply): Set prefs with values from the _new array.
	(SrcPref::_cancel): Reset disassembly flavor and don't call
	_save because nothing is saved unless OK is selected.
	(SrcPref::set_flavor): Rename to _set_flavor.
	(SrcPref::_pick): Just set _new, not prefs.

	* library/srcpref.ith: Add private variable _new and
	private method cancel. Rename others with leading underscore.
@
text
@d1 15
@


1.149
log
@Functions to convert to/from CORE_ADDR and a string.  Use in Insight.
@
text
@d1 18
@


1.148
log
@	* console.itb (Console::_build_win): Handle bindings which
	are ";".  Also, completely override underlying Text binding.
@
text
@d1 10
@


1.147
log
@	* library/console.itb (Console::_build_win): Bind Control-m and
	Control-j.
@
text
@d1 5
@


1.146
log
@2001-10-12  Daniel Jacobowitz  <drow@@mvista.com>

        * symtab.h (struct block): (ALL_BLOCK_SYMBOLS): New macro.

        * symtab.c (find_pc_sect_symtab): Use ALL_BLOCK_SYMBOLS.
        (make_symbol_completion_list): Likewise.
        (make_symbol_overload_list): Likewise.
        * buildsym.c (finish_block): Likewise.
        * breakpoint.c (get_catch_sals):  Likewise.
        * mdebugread.c (mylookup_symbol): Likewise.
        * objfiles.c (objfile_relocate): Likewise.
        * printcmd.c (print_frame_args): Likewise.
        * stack.c (print_block_frame_locals): Likewise.
        (print_block_frame_labels): Likewise.
        (print_frame_arg_vars): Likewise.
        * symmisc.c (dump_symtab): Likewise.
        * tracepoint.c (add_local_symbols): Likewise.
        (scope_info): Likewise.

2001-10-12  Daniel Jacobowitz  <drow@@mvista.com>

        * mi-cmd-stack.c (list_args_or_locals): Use ALL_BLOCK_SYMBOLS.

2001-10-12  Daniel Jacobowitz  <drow@@mvista.com>

        * generic/gdbtk-cmds.c (gdb_listfuncs): Use ALL_BLOCK_SYMBOLS.
        * generic/gdbtk-stack.c (gdb_block_vars): Likewise.
        (gdb_get_blocks): Likewise.
        (gdb_get_vars_command): Likewise.
5~
@
text
@d1 5
@


1.145
log
@	* library/gdbtoolbar.itcl (GDBToolBar::add): Add option
	for "custom" type.
	(GDBToolBar::toolbar_add_custom): new method.
@
text
@d1 7
@


1.144
log
@	* library/session.tcl (SESSION_recreate_bps): Use
	gdb_run_readline_command_no_output to recreate breakpoints.
	* library/interface.tcl (gdb_run_readline_command): Set
	readlineShowUser element of gdbtk_state.
	(gdb_run_readline_command_no_output): New proc.
	(initialize_gdbtk): Initialize readlineShowUser element.
	(gdbtk_tcl_readline_begin): Use readlineShowUser element.
	(gdbtk_tcl_readline): Likewise.
@
text
@d1 6
@


1.143
log
@	* generic/gdbtk-bp.c (get_breakpoint_commands): New function.
	(gdb_get_breakpoint_info): Use gdb_breakpoint_commands to
	assemble breakpoint commands information.
@
text
@d1 11
@


1.142
log
@	* library/tclIndex: Updated.
	* library/prefs.tcl (pref_set_defaults): Define gdb/editor
	preference.
	* library/srcpref.itb (SrcPref::constructor): Save gdb/editor
	preference.
	(SrcPref::build_win): Added external editor control.
	* library/srctextwin.itb (SrcTextWin::do_source_popup): Always
	enable external editor.  Use `code' instead of `list'.
	* library/srcwin.itb (SrcWin::edit): Use Editor::edit.
	* library/editor.tcl: New file.
	* generic/gdbtk.c (enable_external_editor): Removed.
	(external_editor_command): Default to NULL.
	(gdbtk_init): Don't set enable_external_editor.  Free external
	editor command when finished with it.
@
text
@d1 6
@


1.141
log
@	* library/console.itb (Console::_operate_and_get_next): New method.
	(Console::_setprompt): Insert next history element if requested.
	(Console::_build_win): Bind C-o to _operate_and_get_next.
	* library/console.ith (_operate_and_get_next): Declare.
	(_pendingHistElement): New variable.
@
text
@d1 17
@


1.140
log
@2001-09-27  Elena Zannoni  <ezannoni@@redhat.com>

	* library/targetselection.itb (build_win, default_port): Handle
        hpux 11.00.
@
text
@d1 8
@


1.139
log
@        * library/prefs.tcl (escape_value): Update to work
        with Tcl's new and old syntax.
@
text
@d1 5
@


1.138
log
@	* generic/gdbtk.c (gdbtk_init): Set IWIDGETS_LIBRARY if
	Insight is launched from within the build directory.
	* library/util.tcl (find_iwidgets_library): Removed.
	* library/main.tcl: Don't call find_iwidgets_library, do a
	package require instead.
@
text
@d1 13
@


1.137
log
@	* library/bpwin.itb (bp_select): Use standard preferences
	for selection fg & bg, not tixOption database.

	* process.itb, tracedlg.tcl: Remove all traces of those
	three evil little letters, "t", "i", "x".
@
text
@d1 8
@


1.136
log
@	* library/tracedlg.tcl (build_win): Use libgui's
	Labelledframe instead of tixLabelFrame.
	Use iwidgets::scrolledlistbox instead of tixScrolledListbox.
	(edit): Check if there is a selection in the listbox
	before proceeding.
	Escape method callbacks before passing to ActionDlg.

	* library/actiondlg.tcl (constructor): Use "gdb_reginfo"
@
text
@d3 8
@


1.135
log
@	* library/tdump.tcl (class TdumpWin): Inherit from GDBWin
	and ManagedWin.
	(constructor): Remove old itcl2 handling code and name the
	window.
	(build_win): Use iwidgets::scrolledtext instead of
	tixScrolledText.
	(twin): Remove unused variable. Use itk_component(stext)
	instead.
	(maxwidth): Remove unused variable.
	(destructor): Remove unused method.
	(config): Ditto.
@
text
@d3 11
@


1.134
log
@	* library/srcpref.itb (build_win): Use iwidgets::spinint
	instead of tixControl.
@
text
@d3 14
@


1.133
log
@	* library/process.ith (top): Remove unused protected variable.
	Use GDBWin::_top instead.
	(lb): Remove unused variable.
	(change_context): Remove parameter. It's not needed.
	* library/process.itb (constructor): Don't set the variable
	"top". It isn't needed. GDBWin has this information.
	(buildwin): Get rid of tixScrolledListbox. Use
	iwidgets::scrolledlistbox instead.
	Loose the balloon help. It annoys more than helps.
	(update): Use new scrolledlistbox component.
	Split the list of threads BEFORE doing llength. Someone
	shoot me if this has to be fixed one more time...
	(change_context): Update definition and usage.
	(cursor): Use GDBWin::_top instead of our own private copy.
@
text
@d3 5
@


1.132
log
@	* generic/gdbtk-cmds.c (gdb_disassemble_driver): We should be
	looking for "thread", not "threads" to determine if we have
	a multi-threaded child process.
@
text
@d3 17
@


1.131
log
@	* library/bpwin.itb (build_win): Get rid of tixScrolledWindow
	and use iwidgets::scrolledframe until something better comes
	along.
@
text
@d3 6
@


1.130
log
@	* library/srcwin.itb (SrcWin::fillFuncCB): Sort function names.
@
text
@d1 6
@


1.129
log
@2001-08-23  Martin M. Hunt  <hunt@@redhat.com>

	* library/targetselection.itb: Added PMON and DDB targets.
@
text
@d1 4
@


1.128
log
@	* library/prefs.tcl (pref_read): Version number appears in
	comment.
@
text
@d1 4
@


1.127
log
@	* generic/gdbtk.c (gdbtk_init): Reinitialize disassemle info's
	stream parameter: we just deleted the one it saved when we
@
text
@d1 5
@


1.126
log
@	* generic/gdbtk.c (gdbtk_init): Reinitialize disassemle info's
	stream parameter: we just deleted the one it saved when we
	re-routed gdb_stdout to our own gdb_stdout.
@
text
@d3 5
@


1.125
log
@	* library/stackwin.itb (build_win): Use iwidget's scrolled listbox
	instead of tix scrolled list box.
	(update): Update to use iwidget's scrolled list box.
	(change_frame): Ditto.
	Remove parameters.
	* library/stackwin.ith (change_frame): Remove all parameters.
@
text
@d1 6
@


1.124
log
@	* generic/gdbtk-cmds.c (gdb_load_disassembly): Save the original
	address from parse_and_eval_address: if find_pc_partial_function
	errors, we will lose our original address.
	If find_pc_partial_function does error, print out both
	the address we thought we were disassembling at AND the address
	we actually did disassemble at. This should help elide address-
	to-pointer and pointer-to-address problems in the tdep files.
	* library/srctextwin.itb (FillAssembly): When gdb_load_disassembly
	fails, use its error message instead of the cooked "Unable to
	Read insturctions..." message.
	(UnLoadFromCache): If oldpane is empty, don't try show it,
	don't try to set our view to it, don't do anything but
	erase the given pane.
@
text
@d3 9
@


1.123
log
@	* generic/gdbtk-varobj.c (variable_obj_command): Pass pointer
	to varobj* when calling variable_update (API changed).
	(variable_create): Don't pass varobj* to install_variable. It's
	not used.
	(variable_children): Likewise.
	(variable_update): Change parameters to accept pointer to
	varobj*. Matches API change in varobj_update.
	(install_variable): Remove unused "var" parameter.
@
text
@d1 16
@


1.122
log
@	* generic/gdbtk.c (gdbtk_init): Revert change from earlier.
	It is insufficient. We must get the absolute pathname
	from autoconf.
	Don't bother setting TCL_LIBRARY: it must be set already
	in order for us to execute a script.
@
text
@d1 11
@


1.121
log
@	* library/globalpref.ith (_change_font, _change_size): New
	private methods.
	(_size): New private variable.
	(font_changed, wfont_changed): Removed.
	* library/globalpref.itb (make_font_item): Change combobox
	callback to use _change_font.
	Replace tixControl with iwidgets::spinint.
	(font_changed, wfont_changed): Removed.
	(_change_font, _change_size): New private methods.
	* tclIndex: Regenerate.
@
text
@d3 8
@


1.120
log
@	* generic/gdbtk.c (gdbtk_init): Make sure we're working with
	absolute pathnames in the *_LIBRAY variables.
@
text
@d3 13
@


1.119
log
@	From Ian Roxborough  <irox@@redhat.com>
	* generic/gdbtk-hooks.c (x_event): Deal with Tcl API insanity
	for Tcl_ObjGetVar2 or Tcl_GetObjVar2.
	(gdbtk_trace_find): Likewise for Tcl_GlobalEvalObj
	or Tcl_EvalObj (TCL_EVAL_GLOBAL).
@
text
@d3 5
@


1.118
log
@	* generic/gdbtk.c (gdbtk_init): Don't assume a particular
	layout for the source directory, let the Makefile tell us
	where the real source directory is.
	When compiling under Cygwin, convert the (posix) path to a
	win32 path, which is what tcl really wants.

From Ian Roxborough <irox@@redhat.com>:

        * generic/gdbtk.c (gdbtk_init): If Insight isn't
        executed from inside a directory called "bin",
        assume that we are being running from the build
        directory and set the *_LIBRARY variables to point
        to (hopefully) the correct source directory.
@
text
@d1 8
@


1.117
log
@	* library/regwin.ith: Rewrite.
	* library/regwin.itb: Rewrite.
	* library/tclIndex: Regenerate.
@
text
@d1 16
@


1.116
log
@	* generic/gdbtk-register.c (gdb_register_info): New function.
	Consolidates all register handling.
	(get_register_size): New function.
	(gdb_changed_register_list, gdb_fetch_registers,
	gdb_regnames): Deprecate.
	(setup_architecture_data): Free old register cache
	when necessary.
@
text
@d3 6
@


1.115
log
@	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Register
	architecture_changed event handler.
	(gdbtk_architecture_changed): New function.
	* library/gdbevent.ith (class ArchChangdEvent): New event.
	* library/ehandler.ith (arch_changed): New method. Handler
	for ArchChangedEvents.
	* library/interface.tcl (gdbtk_tcl_architecture_changed): New
	proc to handle architecture change events.
@
text
@d3 10
@


1.114
log
@	* library/prefs.tcl (pref_set_defaults): Add new font
	color defaults for highlighting, headers, selecting, and "normal".
	Get rid of gdb/variable/highlight_fg and gdb/reg/highlight_fg.
	* library/variables.tcl (build_win): Use gdb/font/highlight_fg
	and gdb/font/highilght_bg to set highlight style.
	* library/memwin.itb (build_win): Use header_fg and header_bg.
@
text
@d1 11
@


1.113
log
@	* library/srcbar.itcl (_post): New method.
	(_update_file_menu): New method.
	(create_file_menu): Move the guts to _update_file_menu.
	Add a post command to the menu.
	* library/interface.tcl (gdbtk_tcl_file_changed): Catch the
	call to run_hooks.
	(gdbtk_tcl_exec_file_display): Save the new session, too.
	(set_exe_name): Don't bother saving the session here.
	(_close_file): Save the session here, too.
	(gdbtk_clear_file): Catch the call to run_hooks, too.
	* library/gdbmenubar.itcl (menubar_new_menu): Allow caller
	to specify optional arguments to be passed to Tk when
	creating the menu.
	Tk's "menu add" command returns an empty string. Save the
	menu's index in the parent instead. This is what all
	the menu subcommands want.
@
text
@d1 9
@


1.112
log
@	* generic/gdbtk-bp.c (gdb_get_breakpoint_info): Update
	with recent breakpoint structure changes in gdb.
	(gdb_set_bp_addr): Likewise.
	(gdb_get_tracepoint_info): Update with recent tracepoint
	structure changes in gdb.
@
text
@d1 19
@


1.111
log
@2001-07-31  Elena Zannoni  <ezannoni@@redhat.com>

	* generic/gdbtk-cmds.c: Don't include regcache.h.
	* generic/gdbtk-register.c: Include regcache.h.
@
text
@d1 8
@


1.110
log
@
	* library/prefs.tcl (pref_set_defaults): Add additional entry
	points for eCos if main is not present.
@
text
@d1 5
@


1.110.2.1
log
@        * generic/gdbtk-bp.c (gdb_get_breakpoint_info): Update
        with recent breakpoint structure changes in gdb.
        (gdb_set_bp_addr): Likewise.
        (gdb_get_tracepoint_info): Update with recent tracepoint
        structure changes in gdb.
@
text
@a0 8
2001-08-02  Keith Seitz  <keiths@@redhat.com>

        * generic/gdbtk-bp.c (gdb_get_breakpoint_info): Update
        with recent breakpoint structure changes in gdb.
        (gdb_set_bp_addr): Likewise.
        (gdb_get_tracepoint_info): Update with recent tracepoint
        structure changes in gdb.

@


1.110.2.2
log
@Include "regcache.h".
@
text
@a0 4
2001-10-20  Andrew Cagney  <ac131313@@redhat.com>

	* generic/gdbtk-register.c: Include "regcache.h".

@


1.109
log
@2001-07-21  Martin M. Hunt  <hunt@@redhat.com>

	* library/interface.tcl (gdbtk_locate_main): Fix function
	so that it returns either a null string or a valid location,
	as documented.
@
text
@d1 5
@


1.108
log
@2001-07-21  Martin M. Hunt  <hunt@@redhat.com>

	* library/variables.tcl (build_menu_helper): Set
	the Format menu option to "disabled" initially.
@
text
@d3 4
@


1.107
log
@2001-07-20  Martin M. Hunt  <hunt@@redhat.com>

	* library/memwin.itb: Fix syntax to open a new window
	using the "-force" flag.
@
text
@d1 5
d7 4
@


1.106
log
@2001-07-20  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-register.c (gdb_regnames): Fix 'if'
	statement so count is decremented only if "-numbers"
	is the first arg.
@
text
@d3 3
@


1.105
log
@2001-07-18  Martin M. Hunt  <hunt@@redhat.com>

	* library/util.tcl (find_iwidgets_library): Look
	for iwidgets3* so we don't accidently find iwidgets2.x.
@
text
@d1 6
@


1.104
log
@	* library/regwin.itb (RegWin::build_win): Add radio button
	for unsigned register format.
	(RegWin::reg_select): Iterate through 8 rather than 7 formats.
	(RegWin::but3): Add menu option for unsigned register format.
@
text
@d1 5
@


1.103
log
@	* library/download.itb (constructor): Use the iwidgets
	feedback widget instead of tixMeter.
	Pack all the topmost widgets together -- don't use grid.
	(update_download): Support the feedback widget.
	(done): Ditto.

	* library/download.ith (steps): New private variable.
	(num_steps): New common.
@
text
@d1 7
@


1.102
log
@	* library/srcbar.itcl (create_trace_buttons): Fix
	syntax errors.

	* library/tracedlg.tcl: Update to work with Itcl3.0
	and ManagedWin.

	* library/actiondlg.tcl: Update to work with Itcl3.0
	and ManagedWin.
	(build_win): Use iwidgets scrolled listbox instead
	of the tix one.
@
text
@d1 11
@


1.101
log
@	* library/managedwin.itb (_create): Don't pass "-over"
	to center_window unless we really are asked to put the
	window over another!
@
text
@d1 13
@


1.100
log
@	* library/managedwin.itb (_create): When creating a
	window over another, be sure to center on the window,
	not the object.
@
text
@d1 6
@


1.99
log
@	* generic/gdbtk-bp.c (gdbtk_tracepoint_create): Change
	parameter to int to match breakpoint notifications.
	(gdbtk_tracepoint_modify): Ditto.
	(gdbtk_tracepoint_delete): Ditto.
	(tracepoint_notify): Ditto.
	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Remove
	tracepoint hooks and install tracepoint event handlers.
@
text
@d1 6
@


1.98
log
@	* library/help/session.html: New file.
	* library/help/index.html: Added link.
@
text
@d1 10
@


1.97
log
@	* library/session.tcl (session_save): Save breakpoints.
	(SESSION_serialize_bps): New proc.
	(SESSION_recreate_bps): New proc.
	(session_load): Recreate breakpoints.
	* library/util.tcl (bp_exists): Expect user specification in
	breakpoint info.
	* library/srctextwin.itb (SrcTextWin::showBPBalloon): Expect user
	specification in breakpoint info.
	* library/gdbevent.itb (BreakpointEvent::_init): Initialize
	_user_specification.
	(BreakpointEvent::get): Handle user_specification.
	* library/gdbevent.ith (BreakpointEvent): Added
	_user_specification field.
	* library/bpwin.itb (BpWin::bp_store): Expect user specification
	and use it when saving.
	(BpWin::bp_type): Expect user specification.
	* generic/gdbtk-bp.c (BREAKPOINT_IS_WATCHPOINT): New macro.
	(gdb_get_breakpoint_info): Added `user specification' to result.
@
text
@d3 3
@


1.96
log
@	* generic/gdbtk-stack.c (gdb_stack): Return TCL_ERROR if
	we are unable to get the current frame. get_current_frame
	may have output an error message.
@
text
@d1 21
@


1.95
log
@	Some "-Wall" cleanups.

	* generic/gdbtk-hooks.c (x_event): Remove unused variable "count".
	(tracepoint_notify): Remove superfluous declaration. This funtion
	was moved to gdbtk-bp.c.

	* generic/gdbtk-bp.c (gdb_find_bp_at_addr): Remove unused variable
	"b".
	(gdb_set_bp): Remove unused variable "cmd".
	(gdb_set_bp_addr): Remove unused variables "cmd" and "filename".

	* generic/gdbtk.c (gdbtk_init): Remove unused variables
	"auto_path_name", "auto_path_elem", and "found_main".
@
text
@d1 6
@


1.94
log
@2001-06-05  Martin Hunt  <hunt@@redhat.com>
	* generic/gdbtk.c (_initialize_gdbtk): Don't close console yet.
	(gdbtk_init): Wait until after tcl/tk stuff is all initialized
	to close console (on Windows) and redirect ouput.
@
text
@d1 14
d16 1
@


1.93
log
@2001-06-05  Martin Hunt  <hunt@@redhat.com>

	* library/globalpref.itb(build_win): Don't change directory
	before building icon combobox.  Add debug lines.
@
text
@d1 5
@


1.92
log
@	* library/srcbar.itcl (constructor): Set the toolbar's initial
	state.
@
text
@d1 5
@


1.91
log
@	* library/interface.tcl (gdb_update_hook): Mark as deprecated.
	(gdbtk_update): Dispatch and UpdateEvent, too.
	* library/ehandler.ith (update): New event handler.
	* library/gdbevent.ith (UpdateEvent): New event.
	* library/gdbevent.itb (UpdateEvent::constructor): New method.
	(UpdateEvent::get): New method.
	* library/kod.ith (udpate): Match event handler definition.
	* library/kod.itb (update): Ditto.
	(build_win): Pass dummy argument to update method.
	(top): Ditto.
	(up): Ditto.
	(set_variable): Ditto.
	* library/memwin.ith (update): Match event handler definition.
	* library/memwin.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	* library/process.ith (update): Match event handler definition.
	* library/process.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	* library/regwin.ith (update): Match event handler definition.
	* library/regwin.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	(but3): Ditto.
	(unedit): Ditto.
	* library/stackwin.ith (update): Match event handler definition.
	* library/stackwin.itb (update): Ditto.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	* library/tdump.tcl (update): Match event handler definition.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	(build_win): Pass dummy argument to update method.
	* library/variables.tcl (update): Match event handler definition.
	(build_win): Pass dummy argument to update method.
	* library/locals.tcl (update): Match event handler definition.
	(constructor): Pass dummy argument to update method.
	* library/watch.tcl (update): Match event handler definition.
	Pass dummy argument to VariableWin::update.
	(add): Pass dummy argument to update method.
	* library/srcwin.ith (update): New method.
	(update_hook_init): Remove.
	* library/srcwin.itb (update): New method.
	(constructor): Remove gdb_update_hook.
	(destructor): Ditto.
	* tclIndex: Regenerate.
@
text
@d3 5
@


1.90
log
@	* library/console.itb (constructor): Pass dummy argument
	to idle method.
	(destructor): Ditto.
@
text
@d1 53
@


1.89
log
@	* library/interface.tcl (gdbtk_idle): Run hooks, too,
	until they're all gone.
@
text
@d1 6
@


1.88
log
@ChangeLog for the gdb_idle_hook->GDBEventHandler::idle change.
@
text
@d3 5
@


1.87
log
@	* library/interface.tcl (gdb_busy_hook): Deprecate.
	(gdbtk_busy): Create and dispatch a BusyEvent instead
	of running hooks.
	* library/ehandler.ith (busy): New event handler.
	* library/gdbevent.ith (BusyEvent): New event class.
	* library/console.ith: Inherit from GDBEventHandler.
	(busy): Match event handler definition.
	* library/console.itb (busy): Ditto.
	(constructor): Remove gdb_busy_event.
	(destructor): Ditto.
	* library/kod.ith (busy): Match event handler definition.
	* library/kod.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/memwin.ith (busy): Match event handler definition.
	* library/memwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/pluginwin.itcl (running): Rename to "busy" and
	match event handler definition.
	(consturctor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/process.ith (busy): Match event handler definition.
	* library/process.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/regwin.ith (busy): Match event handler definition.
	* library/regwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/srcbar.itcl (constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	(busy): New method.
	* library/srcwin.ith (busy): Match event handler definition.
	* library/srcwin.itb (busy): Ditto.
	Only do the "busy" stuff if do_updates is set.
	(toggle_updates): Remove gdb_busy_hook.
	(constructor): Ditto.
	(destructor): Ditto.
	* library/stackwin.ith (busy): Match event handler definition.
	* library/stackwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/variables.tcl (constructor): Ditto.
	(destructor): Ditto.
	(disable_ui): Rename to "busy" and match event handler
	definition.
	* library/plugins/rhabout/rhabout.itcl (running): Rename
	to "busy" and match new event handler definition.
	* library/tclIndex: Regenerated.
@
text
@d3 47
@


1.86
log
@	* generic/gdbtk-cmds.c (bin2hex): New function.
	(fromhex): New function.
	(gdb_set_mem): New function.
	(Gdbtk_Init): Add new command, "gdb_set_mem".
	* library/memwin.itb (edit): Use "gdb_set_mem" to set
	memory, not some gdb_cmd contrivance.
	When sending data to gdb_set_mem, make sure that it
	is properly zero-padded.
@
text
@d1 53
@


1.85
log
@
	* memwin.ith (error_dialog): Declare public method.
	* memwin.itb (error_dialog): Define.
	(edit): When attempting to set memory, post an error dialog
	if gdb told us an error occurred while writing the memory.
@
text
@d1 11
@


1.84
log
@	* library/interface.tcl (gdbtk_tcl_file_changed): Handle
	the case of empty-string files, sent by gdb when the
	user requests to reset the file.
	(_close_file): New proc to deal with closing an exe.
	* library/srcbar.itcl (create_file_menu): Add "Close" menu
	option.
	(create_view_menu): Change key binding for Watch Window to
	Ctrl+T to accomodate "Close" going to Ctrl+W.
	* library/srctextwin.itb (config_win): Update key binding
	for Watch Window.
	Add key binding for Close.
	(do_key): Add "close".
	(_clear_cache): Finally implement. I think this works now.
@
text
@d3 7
@


1.83
log
@	* library/variables.tcl (postMenu): Add mysterious workaround
	for popup menu bug in Tk for windows.
	Highlight the selection, too.
@
text
@d3 16
@


1.82
log
@	* library/managedwin.ith (_geometry): Use a protected variable
	instead of a global from ManagedWin::reveal.
	(open): Make arg list reflect managedwin.itb.
	* library/managedwin.itb (window_name): Use class variable
	_top instead of recomputing the toplevel every time.
	(reveal): Ditto.
	Use class variable "_geometry" instead of global variable.
	(shutdown): Do not save ModalDialogs.
	(_create): If centering the new window, use libgui's
	center_window to do it.
@
text
@d1 12
@


1.81
log
@It appears that I forgot to check this in!

	* generic/gdbtk-hooks.c (gdbtk_wait): Change integer pid
	argument to match gdb's new "ptid_t" pids.
@
text
@d3 13
@


1.80
log
@	* library/interface.tcl (gdbtk_quit_check): Don't save sessions
	here. It doesn't work for the Console Window.
	(gdbtk_cleanup): Save session information here.
	(gdbtk_tcl_exec_file_display): When files are loaded,
	get the full pathname to the exe.
@
text
@d1 5
@


1.79
log
@	* library/prefs.tcl (pref_save): Fix bug when key in gdb space has
	extra `/' in it.
@
text
@d1 8
@


1.78
log
@	* generic/gdbtk-bp.c (set_raw_breakpoint): Revise declaration
	to match the recently changed declaration in breakpoint.c.
	Update all callers.
@
text
@d1 5
@


1.77
log
@	* generic/gdbtk-bp.c (gdbtk_create_breakpoint): Safe guard
	against "invalid" (internal) breakpoint numbers.
	(gdbtk_modify_breakpoint): Ditto.
	(gdbtk_delete_breakpoint): Ditto.
@
text
@d1 6
@


1.76
log
@	* generic/gdbtk-bp.c (gdb_set_bp): Generate a breakpoint event
	when we create a breakpoint. The hook is no longer used.
	(gdb_set_bp_addr): Ditto.
@
text
@d1 7
@


1.75
log
@	* generic/gdbtk-bp.c (breakpoint_list, breakpoint_list_size): New
	variables. Gdb is forcing us to maintain our own breakpoint
	database.
	(Gdbtk_Breakpoint_Init): Initialize our breakpoint database.
	(gdb_find_bp_at_addr): Use our breakpoint database.
	(gdb_find_bp_at_line): Ditto.
	(gdb_get_breakpoint_list): Ditto.
	(gdb_get_breakpoint_info): Remove deleted breakpoint hack.
	(gdbtk_create_breakpoint): Moved here from gdbtk-hooks.c.
	Add breakpoint to our breakpoint database.
	(gdbtk_modify_breakpoint): Ditto the move.
	(gdbtk_delete_breakpoint): Ditto the move.
	Remove breakpoint from our database.
	(gdb_get_tracepoint_info): Remove delete tracepoint hack.
	It's not needed for tracepoints: they were implemented properly.
	(gdbtk_create_tracepoint): Moved here from gdbtk-hooks.c.
	(gdbtk_modify_tracepoint): Ditto.
	(gdbtk_delete_tracepoint): Ditto.
	* generic/gdbtk-hooks.c: Include "gdb-events.h".
	(gdbtk_create_breakpoint): Moved to gdbtk-bp.c
	(gdbtk_modify_breakpoint): Ditto.
	(gdbtk_delete_breakpoint): Ditto.
	(breakpoint_notify): Ditto.
	(gdbtk_create_tracepoint): Ditto.
	(gdbtk_modify_tracepoint): Ditto.
	(gdbtk_delete_tracepoint): Ditto.
	(tracepoint_notify): Ditto.
	(report_error): No longer static.
	(gdbtk_add_hooks): Create our own event handler
	vector and register breakpoint_create, breakpoint_modify,
	and breakpoint_delete handlers in gdbtk-bp.c.
@
text
@d3 6
@


1.74
log
@	* generic/gdbtk-cmds.c: Put on diet. All breakpoint-,
	tracepoint-, register-, and stack-related functions moved
	into separate files.
	(call_wrapper): Renamed to "gdbtk_call_wrapper" and export.
	Update all callers.
	* generic/gdbtk.h: Move all breakpoint-related stuff into
	gdbtk-bp.c.
	Remove declaration for "call_wrapper". Now in gdbtk-cmds.h
	(and called "gdbtk_call_wrapper").
	* generic/gdbtk-varobj.c: Include "gdbtk-cmds.h".
	* generic/gdbtk-cmds.h: New file.
	* generic/gdbtk-bp.c: New file.
	* generic/gdbtk-register.c: New file.
	* generic/gdbtk-stack.c: New file.
@
text
@d3 34
@


1.73
log
@	* library/interface.tcl (gdb_quit_hook): Remove. It's unused.
	(gdbtk_quit): Do no shutdown window manager and save
	preferences here.
	(gdbtk_cleanup): This is the proper place to do those
	things.
@
text
@d1 17
@


1.72
log
@	* library/globalpref.itb (build_win): Preserve the
	current working directory.
@
text
@d1 8
@


1.71
log
@Make ptid_t related changes.
@
text
@d1 5
@


1.70
log
@        * gdbtk.c (gdbtk_init): Include the command "warp_pointer"
        for all platforms. Used for testing ONLY.

        * util.tcl (gdbtk_read_defs): If there is an error reading
        the testsuite definition file, print the error message to
        stderr, not stdout. This will allow tcl to know that an error
        has occurred.
        (find_iwidgets_library): Make it work for running testsuites
        from installed directory.

        * main.tcl: If we failed to find iwidgets, check if the
        testsuite is running. If it is running, do not pop up
        a dialog box: just print out the error and exit.
        Initialize _test(verbose) for the testsuite.
@
text
@d1 11
@


1.69
log
@	* generic/gdbtk-cmds.c (gdb_entry_point): Return an empty
	string when there is no active target (i.e., there is no
	entry point to return yet).
@
text
@d1 17
@


1.68
log
@	* generic/gdbtk-cmds.c (gdb_get_breakpoint_info): If unable
	to find the requested breakpoint for lookup, check if
	it is about to be deleted and return information about
	that breakpoint.
	(gdb_get_tracepoint_info): Ditto for tracepoints.
	* generic/gdbtk-hooks.c (gdbtk_deleted_bp): New global.
	(gdbtk_delete_breakpoint): Remember the deleted breakpoint
	for gdb_get_breakpoint_info, in case it is called during
	the event notification.
	(gdbtk_delete_tracepoints): Ditto for tracepoints.
@
text
@d14 4
@


1.67
log
@Other half of SetVariableEvent:

	* library/srctextwin.ith (handle_set_hook): Rename to set_variable.
	* library/srctextwin.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/srcbar.itcl: Inherit from GDBEventHandler.
	(set_hook): Rename to set_variable and handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/regwin.ith (handle_set_hook): Renamed to set_variable.
	* library/regwin.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/kod.ith (set_os): Renamed to "set_variable".
	* library/kod.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/tclIndex: Regenerated.
@
text
@d1 13
@


1.66
log
@Event model revamp for "gdb_set_hook".

	* library/interface.tcl (gdbtk_tcl_set_variable): New proc.
	* library/gdbevent.ith (SetVariableEvent): New event.
	* library/gdbevent.itb (SetVariableEvent::get): Override
	GDBEvent::get.
	* library/ehandler.ith (set_variable): New public method.
	* generic/gdbtk-hooks.c (gdbtk_set_hook): Let inteface function
	gdbtk_tcl_set_variable do all the work.
	* tclIndex: Regenerated.
@
text
@d3 20
@


1.65
log
@Breakpoint/tracepoint event notification using new event model...

	* generic/gdbtk-cmds.c (gdb_set_bp): Use create_breakpoint_hook
	to notify gui of changes.
	(gdb_set_bp_addr): Ditto.
	(gdb_get_breakpoint_info): Update comments to match reality.
	* generic/gdbtk-hooks.c (breakpoint_notify): Only pass the
	breakpoint number which generated the event.
	(tracepoint_notify): Ditto for tracepoints.
	* library/interface.tcl (gdb_breakpoint_change_hook): Mark
	as deprecated and comment out definition.
	(gdbtk_tcl_breakpoint): Use new GDBEvent event "breakpoint"
	to notify rest of UI about breakpoint event.
	(gdbtk_tcl_tracepoint): Ditto for "tracepoint" event.
	* library/bpwin.ith (update): Renamed to "breakpoint".
	(breakpoint): New public method.
	(tracepoint): New public method.
	(bp_add): Take event as argument instead of number.
	(bp_modify): Ditto.
	(bp_delete): Ditto.
	* library/bpwin.itb (constructor): Remove
	gdb_breakpoint_changed_hook.
	(destructor): Ditto.
	(build_win): Insert any existing breakpoints by
	making BreakpointEvents for them.
	(breakpoint): Renamed from "update" to handle
	breakpoint events.
	Remove code to deal with tracepoints.
	(tracepoint): New method to handle tracepoint
	events.
	(bp_add): Deal with breakpoint events, not breakpoint
	numbers.
	(bp_modify): Ditto.
	(bp_delete): Ditto.
	* library/srctextwin.ith: Inherit from GDBWin.
	(breakpoint): New public method.
	(tracepoint): New public method.
	* library/srctextwin.itb (constructor): Remove
	gdb_breakpoint_changed_hook.
	(destructor): Ditto.
	(breakpoint): New method to handle breakpoint event.
	(tracepoint): New method to handle tracepoint event.
	(do_bp): Handle duplicate breakpoints for asm, too.
	(remove_bp_at_line): Delete breakpoints by number, not
	linespec. clear_command removes breakpoints from the
	breakpoint_chain BEFORE deleting the breakpoint. delete_command
	does this afterward (so we can call gdb_get_breakpoint_info on
	an about-to-be-deleted breakpoint).
@
text
@d1 11
@


1.64
log
@New event handling infrastructure.

	* library/gdbevent.ith: New file. Defines new event model.
	* library/gdbevent.itb: New file. Implements new event
	model.
	* library/ehandler.ith: New file. Defines new event model.
	* library/ehandler.itb: New file. Implements new event
	model.
	* library/gdbwin.ith: Inherit from GDBEventHandler.
	(update): Delete unused method.
	(_state): Delete unused variable.
	* library/tclIndex: Regenerated.
@
text
@d14 47
@


1.63
log
@2001-04-18  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk.c (gdbtk_init): Initialize uiout.
@
text
@d1 13
@


1.62
log
@	* library/interface.tcl (run_executable): Use
	gdb_set_inferior_args.
	* library/session.tcl (session_load): Use gdb_set_inferior_args.
	* generic/gdbtk-cmds.c (Gdbtk_Init): Register
	gdb_set_inferior_args.
	(gdb_get_inferior_args): New function.
@
text
@d1 4
@


1.61
log
@	* library/session.tcl (session_save): Use gdb_get_inferior_args.
	* generic/gdbtk-cmds.c (inferior_args): Removed.
	(Gdbtk_Init): Don't register gdb_inferior_args variable.  Do
	register gdb_get_inferior_args function.
	(gdb_get_inferior_args): New function.
@
text
@d1 9
@


1.60
log
@2001-04-17  Fernando Nasser  <fnasser@@redhat.com>

	* library/variables.tcl (update): Temporary fix to the detection of
	"type_changed" condition.  Proper fix will require that this condition
	is properly reported by the underlying code.
@
text
@d1 8
@


1.59
log
@	* generic/gdbtk-cmds.c (gdb_entry_point): New TCL command.
	* library/interface.tcl (gdbtk_locate_main): Try the program's
	entry point if no main function is found.
@
text
@d1 6
d79 1
a79 1
	* library/variable.tcl (update): Cope with varobj type changes.
d83 1
a83 1
	* library/variable.tcl (destructor): Remove file_changed_hook hook.
@


1.58
log
@	From Tom Tromey (tromey@@redhat.com):
	* library/managedwin.itb (reveal): We actually do want to force
	the focus for Windows.
@
text
@d1 6
@


1.57
log
@2001-04-09  Martin M. Hunt  <hunt@@redhat.com>

	* library/managedwin.itb (ManagedWin::reveal): After
	deiconifying window for the first time, set its geometry
	again, if the platform is unix. This fixes a problem with kde.
	(ManagedWin::_create): Set a variable with the initial
	geometry.
@
text
@d1 6
@


1.56
log
@Add missing ChangeLog entry.
@
text
@d1 8
@


1.55
log
@2001-04-04  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_fileopen): New function.
	Initialize ui_file stuff for gdbtk.
	(gdbtk_fputs): Don't print if gdbtk_disable_fputs. Send
	stdlog and stdtarg to their handler functions.

	* generic/gdbtk.c (Gdbtk_Init): Don't set gdb_stdlog
	and gdb_stdtarg to gdb_stdout,
	(gdbtk_init): Unset gdbtk_disable_fputs
	when ready to accept output from gdb. Remove references to
	fputs_unfiltered_hook.

	* generic/gdbtk.h: Declare new flag gdbtk_disable_fputs.

	* generic/gdbtk-cmds.c (gdb_restore_fputs): Instead of setting
	fputs_unfiltered_hook, set the new flag gdbtk_disable_fputs.

	* library/prefs.tcl (pref_set_defaults): Add defaults
	for log_fg and target_fg.

	* library/interface.tcl (gdbtk_tcl_fputs_error): Use
	err_tag.
	(gdbtk_tcl_fputs_log): New function. Write log messages
	to console.
	(gdbtk_tcl_fputs_target): New function.	Write target
	IO to console.

	* library/console.ith (einsert): Add tag parameter.

	* library/console.itb (_build_win): Add new tags for log
	and target IO.
	(einsert): Add tag parameter.
@
text
@d1 4
@


1.54
log
@2001-04-02  Martin M. Hunt  <hunt@@redhat.com>

	* generic/gdbtk-cmds.c (gdb_loadfile): Adjust size of text_argv
	array to prevent writing out of range. Remove unused variables.
	Fix formatting.
	(gdb_get_tracepoint_info): Remove unused variable "fname".
	(gdb_load_disassembly): Remove unused variable "widget".
	(gdb_loc): Remove unused variable "sym".
	(gdb_set_bp_addr): Remove unused variable "line".
	(gdb_get_breakpoint_info): Remove unused variable "sym".
	(get_frame_name): Remove unused variable "name".
@
text
@d1 34
@


1.53
log
@2001-03-29  Fernando Nasser  <fnasser@@redhat.com>

	* library/variable.tcl (update): Cope with varobj type changes.
@
text
@d1 12
@


1.52
log
@2001-03-29  Fernando Nasser  <fnasser@@redhat.com>

	* library/variable.tcl (destructor): Remove file_changed_hook hook.
@
text
@d3 4
@


1.51
log
@2001-03-29  Fernando Nasser  <fnasser@@redhat.com>

	* gdbtk-varobj.c (variable_obj_command): Do not cache varobj handles as
	they may change -- use varobj_get_handle() instead.
@
text
@d3 6
a8 2
	* gdbtk-varobj.c (variable_obj_command): Do not cache varobj handles as
	they may change -- use varobj_get_handle() instead.
@


1.50
log
@2001-03-15  Martin Hunt  <hunt@@redhat.com>
	* library/browserwin.itb: Change all references to freeze_me,
	thaw_me and Top to _freeze_me, _thaw_me, and _top to match
	changes to managedwin.

	* library/kod.itb: Ditto.
@
text
@d1 5
@


1.49
log
@	* library/mempref.itb (MemPref::build_win): Correctly set initial
	value of combobox.
	* library/memwin.itb: Added copyright header.
	(MemWin::constructor): Set defaults from preference database.
	(MemWin::reconfig): Update preference database.
	* library/prefs.tcl (pref_save): Save `mem' preferences.
	(pref_set_defaults): Define default memory preferences.
@
text
@d1 7
@


1.48
log
@Eliminate ARCH_NUM_REGS.
@
text
@d1 10
@


1.47
log
@	* README.GDBTK: Minor spelling, grammar, and formatting fixes.
@
text
@d1 5
@


1.46
log
@Cleanup of managedwin.ith and managedwin.itb

	* library/managedwin.ith: Move all implementations into
	managedwin.itb.
	(public variable nosize): Delete.
	(freeze_me, thaw_me, make_icon_window): Prepend with
	underscore to remind people these are not public
	methods/procs.
	(protected variable Top, screenwidth, screenheight): Ditto
	for these variables.
	(protected common manage_active, mainwindow): Delete.
	(enable): Delete.
	(reconfig): Add empty body.
	* library/managedwin.itb: Move all implementations from
	header here.
	Update all references to renamed variables/methods/procs.
	(destructor, restart, shutdown, _open, find) Let
	Itcl tell us which ManagedWins we have lying around.
	(enable): Delete.
	(reconfig): It's empty. Moved empty body to header.
@
text
@d1 4
@


1.45
log
@	* library/managedwin.itb (ManagedWin::shutdown): Save each
	managed window's geometry as a preference.
	* library/managedwin.ith (ManagedWin::destructor): Don't save
	managed windows' geometries as preferences.
@
text
@d1 21
@


1.44
log
@	* library/srctextwin.itb (SrcTextWin::location): Clear previous
	pane's cursor after switching panes.
@
text
@d3 7
@


1.43
log
@	* library/srctextwin.itb (config_win): Give focus to $win.
@
text
@d3 5
@


1.42
log
@* generic/gdbtk-cmds.c: Include recently created "regcache.h"
@
text
@d1 4
@


1.41
log
@	* generic/gdbtk-cmds.c (gdb_fetch_registers): Mark
	the result as generating a list only if it really does
	generate a list.
@
text
@d1 4
@


1.40
log
@2001-02-21  Fernando Nasser  <fnasser@@redhat.com>

	* TODO: New file.  Initial version of the TODO file, as posted to the
	insight list circa October 2000.
@
text
@d1 6
@


1.39
log
@2001-02-14  Fernando Nasser  <fnasser@@redhat.com>

	From 2001-02-09  Martin Hunt  <hunt@@redhat.com>
	* generic/gdbtk-cmds.c (gdb_load_disassembly): In mixed
	mode, source lines should be tagged with source_tag2.
@
text
@d1 5
@


1.38
log
@2001-02-08  Fernando Nasser  <fnasser@@redhat.com>

	From 2001-02-06  Martin Hunt  <hunt@@redhat.com>
	* library/debugwin.itb: Change window name to "Insight Debug"
	* library/embeddedwin.ith: Fix debug messages.
	* library/locals.tcl: Ditto.
	* library/watch.tcl (postMenu): Ditto.
	* library/variables.tcl: Ditto.
	* library/interface.tcl: Ditto.
	* library/regwin.itb: Ditto.
	* library/gdbwin.ith: Ditto.
	* library/srcbar.itcl: Ditto.
@
text
@d1 6
@


1.37
log
@2001-02-06  Fernando Nasser  <fnasser@@redhat.com>

	Originally from Martin Hunt <hunt@@redhat.com>, with modifications
	* library/srcwin.itb (_name): Check for errors when invoking
	gdb_find_file.
	* library/srctextwin.itb (_mtime_changed, location): Ditto.
	* generic/gdbtk-cmds.c (gdb_find_file_command): Better error checking.
	(full_lookup_symtab): Fix misleading comment.
@
text
@d1 13
@


1.36
log
@2001-02-04  Fernando Nasser  <fnasser@@redhat.com>

	* library/plugins/plugins.tcl: Fix typos and remove "-transient"
	parameter from open command.
	* library/plugins/HOW-TO: New file.  Describes how to add a plug-in
	window to Insight.
@
text
@d1 9
@


1.35
log
@2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/images/insight.gif: New splash screen/about graphics.
	* library/images2/insight.gif: New splash screen/about graphics.
	* library/about.tcl: Update copyright, window title and change colors
	to match new splash screen/about images.
@
text
@d1 7
@


1.34
log
@2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbtoolbar.itcl (add): New method.  Emulate the style of the
	toolbar iwidget commands.
	(toolbar_show): Old name.
        (show): New name.
	(toolbar_create_button): Old name.
        (create): New name.
	(toolbar_configure_button): Old name.
        (itemconfigure): New name.
        (toolbar_bind_button): Old name.
        (itembind): New name.
        (toolbar_set_button_balloon): Old name.
        (itemballoon): New name.
        (toolbar_add_button): Make private.
        (toolbar_add_label): Ditto.
        (toolbar_add_button_separator): Ditto.
	(toolbar_remove_button): Ditto.
	(tollbar_insert_button): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/rhabout/rhabout.itcl: Ditto.
@
text
@d3 7
@


1.33
log
@2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (constructor): Remove unused code.
	(add): New method.  Emulate the style of the menubar iwidget commands.
	(menubar_show): Old name.
	(show): New name.
	(menubar_menu_exists): Old name.
	(exists): New name.
	(menubar_clear_menu): Old name.
	(clear): New name.
	(menubar_delete_menu): Old name.
        (delete): New name.
	(menubar_new_menu): Make private.  Does not return anything.
	(menubar_add_menu_command): Make private.
	(menubar_add_menu_separator): Ditto.
	(menubar_change_menu_state): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/plugins.tcl: Ditto.
	* library/plugins/rhabout/rhabout.itcl: Ditto.
@
text
@d3 22
@


1.32
log
@2001-02-01  Fernando Nasser  <fnasser@@redhat.com>

	* library/pluginwin.itcl (contrucdtor, destructor): Use "code" to
	specify callbacks.
	(running, stopped, no_inferior): Make it a protected method.
	(childsite): Explicitly mark as a public method.
	* library/plugins/rhabout/rhabout.itcl (constructor): Add a label
	widget to show status messages.
	(running, stopped): Overload versions of the base class; display
	status messages as an example.
@
text
@d3 20
@


1.31
log
@2001-01-31  Fernando Nasser  <fnasser@@redhat.com>

	* library/pluginwin.itcl: New file.  Implements the PluginWindow
	class that provides some basic functionality for plug-ins.
	* library/plugins/rhabout/rhabout.itcl: Inherit from the new
	PluginWindow class.  Remove code dependent on ModalDlg.
	(constructor): Creates menus and a toolbar to show how these
	PluginWindow components are used.
	* library/tclIndex: Regenerate.
@
text
@d1 11
@


1.30
log
@2001-01-31  Fernando Nasser  <fnasser@@redhat.com>

	* library/pluginwin.itcl: New file.  Implements the PluginWindow
	class that provides some basic functionality for plug-ins.
	* library/plugins/rhabout/rhabout.itcl: Inherit from the new
	PluginWindow class.  Remove code dependent on ModalDlg.
	(constructor): Creates menus and a toolbar to show how these
	PluginWindow components are used.
@
text
@d9 1
@


1.29
log
@2001-01-31  Fernando Nasser  <fnasser@@redhat.com>

	* library/plugins/rhabout.tcl: Add load for optional sample C command
	procedure.
	* library/plugins/rhabout/rhabout.itcl (constructor): Try calling
	optional sample C command procedure rhabout_extra_text.
	* library/plugins/rhabout/rhabout.c: New file. Implement an example
	plug-in shared library with a sample C command procedure.
	* library/plugins/rhabout/Makefile: New file. Makefile for the sample
	shared library above (Linux only).
@
text
@d3 9
@


1.28
log
@2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/plugins: New directory.  Sample plug-in directory to help
	developers of Insight plug-ins.  See README file in that directory.
	* library/plugins/plugins.tcl: New file. Sample version of a code
	fragment file which adds entries to the PlugIn menu of the Source
	Window to activate custom plug-in windows.
	* library/plugins/pkgIndex.tcl: New file.  Sample version of a file
	with package information for the installed plug-ins.
	* library/plugins/rhabout.tcl: New file. Sample file providing a
	plug-in package.
	* library/plugins/rhabout: New directory.  Sample plug-in.
	* library/plugins/rhabout/rhabout.itcl: New file.  Sample class
	implementing a plug-in window.
	* library/plugins/rhabout/tclIndex: New file.  Tcl index for the sample
	plug-in implementation.
@
text
@d1 11
@


1.27
log
@2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/main.tcl: Add plugin subdirectory, if existent, to auto_path.
	* library/srcbar.itcl (create_plugin_menu): New method.  Create a pull
	down menu for plugins if there are any for this target configuration.
	(create_menu_items): Invoke the new method above.
@
text
@d3 17
@


1.26
log
@2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (menubar_new_menu): Save lable of a menu to
	use as index.
	(menubar_delete_menu): New function.  Delete a menu.
@
text
@d3 7
@


1.25
log
@2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (menu_list): Add missing declararion for
	global variable.
@
text
@d3 6
@


1.24
log
@2001-01-28  Fernando Nasser  <fnasser@@redhat.com>

	* library/gdbmenubar.itcl (set_class_state): Turn off verbose debug
	messages.
	* library/gdbtoolbar.itcl (set_class_state): Ditto.
@
text
@d3 5
@


1.23
log
@2001-01-26  Fernando Nasser  <fnasser@@redhat.com>

        * generic/gdbtk-cmds.c (gdb_clear_file): Call exec_file_clear() and
        symbol_file_clear() instead of exec_file_command() and
        symbol_file_command().
        (gdb_find_file_command): Return the proper error text.
@
text
@d1 6
@


1.22
log
@2001-01-25  Fernando Nasser  <fnasser@@redhat.com>

	* library/srcbar.itcl: New file. Implement SrcBar, a menu and toolbar
	for the Source Window (code previously in srcmenubar.itcl and
	srctoolbar.itcl).
	* library/srcmenubar.itcl: Remove obsolete file.
	* library/srctoolbar.itcl: Remove obsolete file.
	* library/srcbar.tcl: Remove obsolete file.
	* library/gdbmenubar.itcl (menubar_show): New method. Associate the
	menu with the toplevel window.
        * library/srcwin.itb (_build_win): Use SrcBar.
	* library/tclIndex: Regenerate.
@
text
@d1 7
@


1.21
log
@2001-01-25  Fernando Nasser  <fnasser@@redhat.com>

	* library/srcbar.itcl: New file. Implement SrcBar, a menu and toolbar
	for the Source Window (code previously in srcmenubar.itcl and
	srctoolbar.itcl).
	* library/srcmenubar.itcl: Remove obsolete file.
	* library/srctoolbar.itcl: Remove obsolete file.
	* library/srcbar.tcl: Remove obsolete file.
        * library/srcwin.itb (_build_win): Use SrcBar.
	* library/tclIndex: Regenerate.
@
text
@d9 2
@


1.20
log
@2001-01-24  Fernando Nasser  <fnasser@@redhat.com>

	From  Martin Hunt  <hunt@@cygnus.com>
	* generic/gdbtk-cmds.c (gdb_set_bp_addr, gdb_set_bp): Change
	strsave() to xstrdup().
@
text
@d1 11
@


1.19
log
@2001-01-24  Fernando Nasser  <fnasser@@redhat.com>

	From  Martin Hunt  <hunt@@cygnus.com>
	* generic/gdbtk-cmds.c (gdbtk_dis_asm_read_memory): Fix call
	to xfer_memory().
@
text
@d4 6
@


1.18
log
@2001-01-19  Fernando Nasser  <fnasser@@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Set default value of
	gdb/src/top_control to place the source window controls at the top.
@
text
@d1 6
@


1.17
log
@2001-01-18  Fernando Nasser  <fnasser@@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FUNCNAME
	parameter.
        (FillAssembly, FillMixed): Pass the FUNCNAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FUNCNAME parameter
	to method definition.
@
text
@d1 5
@


1.16
log
@2001-01-17  Fernando Nasser  <fnasser@@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FILENAME
	parameter.
        (FillAssembly, FillMixed): Pass the FILENAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FILENAME parameter
	to method definition.
@
text
@d1 9
@


1.15
log
@2001-01-15  Fernando Nasser  <fnasser@@redhat.com>

	* srcwin.itb (clear_file): Pass the appropriate value to the GO
	argument of mode() so it does not try to read a source file when
	no executable is loaded.
@
text
@d1 9
@


1.14
log
@2001-01-09  Fernando Nasser  <fnasser@@redhat.com>

	* library/srcmenubar.itcl (create_file_menu): Add missing incr for
	session numbers.
@
text
@d1 6
@


1.13
log
@2001-01-04  Fernando Nasser  <fnasser@@redhat.com>

	The following changes fix the problem of having to click on a splash
	window to make it disapear.
	* modal.tcl (post): Take as an argument "expire", the time a modal
	window is displayed.
	* managedwin.itb (open): Check for an "expire" argument and pass the
	value down to modal post method.
@
text
@d1 5
@


1.12
log
@2001-01-04  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>

	* library/gdbmenubar.itcl (set_class_state): New public method.
	Standard method to control state by class.
	(menubar_menu_class_find): Delete public accessor method.
	(menubar_change_menu_state): Change the state of a menu item
	not of a whole class list.
	* library/srcmenubar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.
        * library/gdbtoolbar.itcl (set_class_state): New public method.
        Standard method to control state by class.
        (toolbar_button_class_find): Delete public accessor method.
	* library/srctoolbar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.
@
text
@d1 10
a10 1
2001-01-04  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>
d25 1
a25 1
2001-01-04  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>
d38 1
a38 1
2001-01-03  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>
d45 1
a45 1
2001-01-02  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>
d63 1
a63 1
2001-01-02  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>
d70 1
a70 1
2001-01-02  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>
d75 1
a75 1
2001-01-01  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>
d84 1
a84 1
2000-12-14  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>
@


1.11
log
@Fix ChangeLog entry and commit typo (gdbmenubar should read srcmenubar).
@
text
@d3 15
@


1.10
log
@2001-01-04  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>

	* library/interface.tcl (gdbtk_connect): New proc. Connects to ai
	 remote target (code previously at library/gdbmenubar.itcl).
	(disconnect): Rename to...
	(gdbtk_disconnect): New name for proc disconnect.
	* library/gdbmenubar.itcl (do_connect): Remove the code mentioned
	above and call the new interface proc gdbtk_connect.
	Also, call ::update idletasks after changing the state of the
	menu entries.
	(do_detach): Call gdbtk_disconnect, not ::disconnect (old name).
	(do_disconnect): Call gdbtk_disconnect, not disconnect (old name).
@
text
@d7 1
a7 1
	* library/gdbmenubar.itcl (do_connect): Remove the code mentioned
@


1.9
log
@2001-01-03  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>

	* library/prefs.tcl (pref_set_defaults): Define gdb/src/top_control
	to allow the source window controls to be placed at the top.
	* library/srcwin.itb (_build_win): Test for gdb/src/top_control
	and place the controls accordingly.
@
text
@d1 13
@


1.8
log
@2001-01-02  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>

	* library/gdbmenubar.itcl: New file. Define the GDBMenuBar class,
	a generic menubar building facility for Insight windows (WIP).
	* library/gdbtoolbar.itcl: New file. Define the GDBToolBar class,
	a generic toolbar building facility for Insight windows (WIP).
	* library/srcmenubar.itcl: New file. Define the SrcMenuBar class,
	which implements the Source Window menubar (inherits GDBMenuBar).
	* library/srctoolbar.itcl: New file. Define the SrcToolBar class,
	which implements the Source Window toolbar (inherits GDBToolBar).
	* library/srcwin.itb (_build_win): Use SrcMenuBar and SrcToolBar
	instead of the obsolete GDBSrcBar.
	* library/srcbar.tcl: Mark as OBSOLETE.
	* library/toolbar.tcl: Mark as OBSOLETE. Rename class GDBToolBar
	to avoid conflict with new class with the same name.
	* library/Makefile (TCL): Include .itcl files.
	* library/tclIndex: Regenerate.
@
text
@d1 7
@


1.7
log
@2001-01-02  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>

	* library/srcwin.itb (_build_win): If gdb is running a program, load
	the window with source for that location (if available).
	(download_progress): Calls to "update" must refer to the global
	namespace.
@
text
@d3 18
@


1.6
log
@2001-01-02  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>

	* library/interface.tcl (gdbtk_quit_check): Save session whenever
	possible.
@
text
@d3 7
@


1.5
log
@2001-01-01  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>

	* library/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * library/ChangeLog: Removed.
        * generic/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * generic/ChangeLog: Removed.
@
text
@d1 5
@


1.4
log
@2000-12-14  Fernando Nasser  <fnasser@@totem.toronto.redhat.com>

	* library/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* library/ChangeLog-1998: New file.  Similar change for 1998.
	* library/ChangeLog-1997: New file.  Similar change for 1997.
	* library/ChangeLog: Removed entries previous to 2000.
	* generic/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* generic/ChangeLog-1998: New file.  Similar change for 1998.
	* generic/ChangeLog-1997: New file.  Similar change for 1997.
	* generic/ChangeLog: Removed entries previous to 2000.
@
text
@d1 9
@


1.3
log
@Move PARAMS elimination remarks to the appropriate ChangeLog file.
@
text
@d1 13
@


1.2
log
@PARAMS elimination.
@
text
@a0 8
2000-07-02  Kevin Buettner  <kevinb@@redhat.com>

	* generic/gdbtk-cmds.c, generic/gdbtk-hooks.c,
	generic/gdbtk-variable.c, generic/gdbtk-varobj.c,
	generic/gdbtk-wrapper.c, generic/gdbtk-wrapper.h,
	generic/gdbtk.c, generic/gdbtk.h: Eliminate use of PARAMS from
	declarations in these files.

@


1.1
log
@        * ChangeLog-gdbtk: Renamed to ChangeLog
        * ChangeLog: New file
        * README.GDBTK: No need for changelog-default-name hint for Emacs now
@
text
@d1 8
@

