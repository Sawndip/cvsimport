head	1.125;
access;
symbols
	drow-cplus-merge-20031224:1.124
	drow-cplus-merge-20031220:1.124
	carlton_dictionary-20031215-merge:1.124
	drow-cplus-merge-20031214:1.124
	carlton-dictionary-20031111-merge:1.124
	gdb_6_0-2003-10-04-release:1.111.2.4
	kettenis_sparc-20030918-branch:1.119.0.2
	kettenis_sparc-20030918-branchpoint:1.119
	carlton_dictionary-20030917-merge:1.119
	ezannoni_pie-20030916-branchpoint:1.118
	ezannoni_pie-20030916-branch:1.118.0.2
	cagney_x86i386-20030821-branch:1.117.0.2
	cagney_x86i386-20030821-branchpoint:1.117
	carlton_dictionary-20030805-merge:1.114
	carlton_dictionary-20030627-merge:1.111
	gdb_6_0-branch:1.111.0.2
	gdb_6_0-2003-06-23-branchpoint:1.111
	jimb-ppc64-linux-20030613-branch:1.110.0.2
	jimb-ppc64-linux-20030613-branchpoint:1.110
	cagney_convert-20030606-branch:1.107.0.6
	cagney_convert-20030606-branchpoint:1.107
	cagney_writestrings-20030508-branch:1.104.0.4
	cagney_writestrings-20030508-branchpoint:1.104
	jimb-ppc64-linux-20030528-branch:1.107.0.4
	jimb-ppc64-linux-20030528-branchpoint:1.107
	carlton_dictionary-20030523-merge:1.107
	cagney_fileio-20030521-branch:1.107.0.2
	cagney_fileio-20030521-branchpoint:1.107
	kettenis_i386newframe-20030517-mergepoint:1.107
	jimb-ppc64-linux-20030509-branch:1.104.0.2
	jimb-ppc64-linux-20030509-branchpoint:1.104
	kettenis_i386newframe-20030504-mergepoint:1.101
	carlton_dictionary-20030430-merge:1.100
	kettenis_i386newframe-20030419-branch:1.100.0.6
	kettenis_i386newframe-20030419-branchpoint:1.100
	carlton_dictionary-20030416-merge:1.100
	cagney_frameaddr-20030409-mergepoint:1.100
	kettenis_i386newframe-20030406-branch:1.100.0.4
	kettenis_i386newframe-20030406-branchpoint:1.100
	cagney_frameaddr-20030403-branchpoint:1.100
	cagney_frameaddr-20030403-branch:1.100.0.2
	cagney_framebase-20030330-mergepoint:1.99
	cagney_framebase-20030326-branch:1.98.0.4
	cagney_framebase-20030326-branchpoint:1.98
	cagney_lazyid-20030317-branch:1.98.0.2
	cagney_lazyid-20030317-branchpoint:1.98
	kettenis-i386newframe-20030316-mergepoint:1.98
	offbyone-20030313-branch:1.97.0.2
	offbyone-20030313-branchpoint:1.97
	kettenis-i386newframe-20030308-branch:1.96.0.4
	kettenis-i386newframe-20030308-branchpoint:1.96
	carlton_dictionary-20030305-merge:1.96
	cagney_offbyone-20030303-branch:1.96.0.2
	cagney_offbyone-20030303-branchpoint:1.96
	carlton_dictionary-20030207-merge:1.91
	interps-20030203-mergepoint:1.88
	interps-20030202-branch:1.88.0.2
	interps-20030202-branchpoint:1.88
	cagney-unwind-20030108-branch:1.85.0.2
	cagney-unwind-20030108-branchpoint:1.85
	carlton_dictionary-20021223-merge:1.84
	gdb_5_3-2002-12-12-release:1.68
	carlton_dictionary-20021115-merge:1.82
	kseitz_interps-20021105-merge:1.78
	kseitz_interps-20021103-merge:1.78
	drow-cplus-merge-20021020:1.76
	drow-cplus-merge-20021025:1.78
	carlton_dictionary-20021025-merge:1.78
	carlton_dictionary-20021011-merge:1.76
	drow-cplus-branch:1.76.0.2
	drow-cplus-branchpoint:1.76
	kseitz_interps-20020930-merge:1.72
	carlton_dictionary-20020927-merge:1.71
	carlton_dictionary-branch:1.69.0.2
	carlton_dictionary-20020920-branchpoint:1.69
	gdb_5_3-branch:1.68.0.6
	gdb_5_3-2002-09-04-branchpoint:1.68
	kseitz_interps-20020829-merge:1.68
	cagney_sysregs-20020825-branch:1.68.0.4
	cagney_sysregs-20020825-branchpoint:1.68
	readline_4_3-import-branch:1.68.0.2
	readline_4_3-import-branchpoint:1.68
	gdb_5_2_1-2002-07-23-release:1.57.2.1
	kseitz_interps-20020528-branch:1.66.0.2
	kseitz_interps-20020528-branchpoint:1.66
	cagney_regbuf-20020515-branch:1.65.0.4
	cagney_regbuf-20020515-branchpoint:1.65
	jimb-macro-020506-branch:1.65.0.2
	jimb-macro-020506-branchpoint:1.65
	gdb_5_2-2002-04-29-release:1.57.2.1
	gdb_5_2-branch:1.57.0.2
	gdb_5_2-2002-03-03-branchpoint:1.57
	gdb_5_1_1-2002-01-24-release:1.48.2.1
	gdb_5_1_0_1-2002-01-03-release:1.48
	cygnus_cvs_20020108_pre:1.52
	gdb_5_1_0_1-2002-01-03-branch:1.48.0.6
	gdb_5_1_0_1-2002-01-03-branchpoint:1.48
	gdb_5_1-2001-11-21-release:1.48
	gdb_s390-2001-09-26-branch:1.48.0.4
	gdb_s390-2001-09-26-branchpoint:1.48
	gdb_5_1-2001-07-29-branch:1.48.0.2
	gdb_5_1-2001-07-29-branchpoint:1.48
	dberlin-typesystem-branch:1.42.0.2
	dberlin-typesystem-branchpoint:1.42
	gdb-post-ptid_t-2001-05-03:1.15
	gdb-pre-ptid_t-2001-05-03:1.15
	insight-precleanup-2001-01-01:1.7
	gdb-post-protoization-2000-07-29:1.2
	gdb-pre-protoization-2000-07-29:1.2
	gdb-premipsmulti-2000-06-06-branch:1.1.0.2
	gdb-premipsmulti-2000-06-06-branchpoint:1.1
	gdb-post-params-removal-2000-06-04:1.1
	gdb-pre-params-removal-2000-06-04:1.1
	gdb-post-params-removal-2000-05-28:1.1
	gdb-pre-params-removal-2000-05-28:1.1;
locks; strict;
comment	@# @;


1.125
date	2004.01.12.15.16.43;	author cagney;	state dead;
branches;
next	1.124;

1.124
date	2003.11.06.22.54.02;	author cagney;	state Exp;
branches;
next	1.123;

1.123
date	2003.10.24.17.37.04;	author cagney;	state Exp;
branches;
next	1.122;

1.122
date	2003.10.02.20.28.31;	author cagney;	state Exp;
branches;
next	1.121;

1.121
date	2003.09.30.19.12.19;	author cagney;	state Exp;
branches;
next	1.120;

1.120
date	2003.09.20.17.50.28;	author cagney;	state Exp;
branches;
next	1.119;

1.119
date	2003.09.17.14.24.31;	author cagney;	state Exp;
branches;
next	1.118;

1.118
date	2003.09.11.02.34.00;	author ezannoni;	state Exp;
branches
	1.118.2.1;
next	1.117;

1.117
date	2003.08.08.19.00.08;	author cagney;	state Exp;
branches;
next	1.116;

1.116
date	2003.08.07.17.47.42;	author cagney;	state Exp;
branches;
next	1.115;

1.115
date	2003.08.05.19.55.17;	author cagney;	state Exp;
branches;
next	1.114;

1.114
date	2003.08.04.23.18.50;	author cagney;	state Exp;
branches;
next	1.113;

1.113
date	2003.08.04.17.08.24;	author carlton;	state Exp;
branches;
next	1.112;

1.112
date	2003.06.28.16.19.06;	author drow;	state Exp;
branches;
next	1.111;

1.111
date	2003.06.17.20.28.14;	author drow;	state Exp;
branches
	1.111.2.1;
next	1.110;

1.110
date	2003.06.11.23.29.49;	author carlton;	state Exp;
branches;
next	1.109;

1.109
date	2003.06.11.19.38.27;	author cagney;	state Exp;
branches;
next	1.108;

1.108
date	2003.06.08.18.27.14;	author cagney;	state Exp;
branches;
next	1.107;

1.107
date	2003.05.17.06.00.01;	author cagney;	state Exp;
branches;
next	1.106;

1.106
date	2003.05.14.17.43.20;	author ezannoni;	state Exp;
branches;
next	1.105;

1.105
date	2003.05.12.00.26.19;	author cagney;	state Exp;
branches;
next	1.104;

1.104
date	2003.05.08.20.52.49;	author cagney;	state Exp;
branches;
next	1.103;

1.103
date	2003.05.08.18.46.48;	author cagney;	state Exp;
branches;
next	1.102;

1.102
date	2003.05.05.17.56.57;	author cagney;	state Exp;
branches;
next	1.101;

1.101
date	2003.05.04.03.50.13;	author brobecke;	state Exp;
branches;
next	1.100;

1.100
date	2003.04.02.23.48.21;	author bobbybrasko;	state Exp;
branches
	1.100.6.1;
next	1.99;

1.99
date	2003.03.27.15.17.35;	author cagney;	state Exp;
branches;
next	1.98;

1.98
date	2003.03.14.17.07.01;	author cagney;	state Exp;
branches
	1.98.4.1;
next	1.97;

1.97
date	2003.03.08.20.04.27;	author cagney;	state Exp;
branches;
next	1.96;

1.96
date	2003.03.01.17.03.19;	author cagney;	state Exp;
branches
	1.96.4.1;
next	1.95;

1.95
date	2003.02.25.21.36.22;	author carlton;	state Exp;
branches;
next	1.94;

1.94
date	2003.02.21.15.23.35;	author drow;	state Exp;
branches;
next	1.93;

1.93
date	2003.02.20.00.01.07;	author carlton;	state Exp;
branches;
next	1.92;

1.92
date	2003.02.09.10.47.37;	author cagney;	state Exp;
branches;
next	1.91;

1.91
date	2003.02.07.00.27.31;	author cagney;	state Exp;
branches;
next	1.90;

1.90
date	2003.02.06.01.19.12;	author cagney;	state Exp;
branches;
next	1.89;

1.89
date	2003.02.04.18.41.29;	author cagney;	state Exp;
branches;
next	1.88;

1.88
date	2003.02.02.06.24.04;	author cagney;	state Exp;
branches
	1.88.2.1;
next	1.87;

1.87
date	2003.01.14.00.49.06;	author cagney;	state Exp;
branches;
next	1.86;

1.86
date	2003.01.14.00.07.43;	author ezannoni;	state Exp;
branches;
next	1.85;

1.85
date	2003.01.09.18.03.38;	author cagney;	state Exp;
branches;
next	1.84;

1.84
date	2002.12.13.17.00.22;	author jjohnstn;	state Exp;
branches;
next	1.83;

1.83
date	2002.11.29.19.15.16;	author cagney;	state Exp;
branches;
next	1.82;

1.82
date	2002.11.14.00.25.05;	author cagney;	state Exp;
branches;
next	1.81;

1.81
date	2002.11.11.17.09.50;	author jjohnstn;	state Exp;
branches;
next	1.80;

1.80
date	2002.11.08.20.39.06;	author jjohnstn;	state Exp;
branches;
next	1.79;

1.79
date	2002.11.07.01.43.59;	author jjohnstn;	state Exp;
branches;
next	1.78;

1.78
date	2002.10.23.21.17.51;	author jjohnstn;	state Exp;
branches;
next	1.77;

1.77
date	2002.10.22.17.53.42;	author kseitz;	state Exp;
branches;
next	1.76;

1.76
date	2002.10.03.22.31.31;	author jjohnstn;	state Exp;
branches
	1.76.2.1;
next	1.75;

1.75
date	2002.10.03.20.02.13;	author jjohnstn;	state Exp;
branches;
next	1.74;

1.74
date	2002.10.02.21.33.59;	author ezannoni;	state Exp;
branches;
next	1.73;

1.73
date	2002.10.01.21.15.43;	author cagney;	state Exp;
branches;
next	1.72;

1.72
date	2002.09.30.20.18.52;	author cagney;	state Exp;
branches;
next	1.71;

1.71
date	2002.09.27.18.09.27;	author cagney;	state Exp;
branches;
next	1.70;

1.70
date	2002.09.26.18.35.21;	author ezannoni;	state Exp;
branches;
next	1.69;

1.69
date	2002.09.11.21.49.04;	author kseitz;	state Exp;
branches
	1.69.2.1;
next	1.68;

1.68
date	2002.07.30.13.45.15;	author cagney;	state Exp;
branches;
next	1.67;

1.67
date	2002.06.17.17.30.57;	author kseitz;	state Exp;
branches;
next	1.66;

1.66
date	2002.05.20.18.09.56;	author kseitz;	state Exp;
branches
	1.66.2.1;
next	1.65;

1.65
date	2002.04.21.20.23.33;	author cagney;	state Exp;
branches
	1.65.4.1;
next	1.64;

1.64
date	2002.04.12.18.18.59;	author cagney;	state Exp;
branches;
next	1.63;

1.63
date	2002.04.08.00.43.22;	author ezannoni;	state Exp;
branches;
next	1.62;

1.62
date	2002.04.08.00.38.10;	author ezannoni;	state Exp;
branches;
next	1.61;

1.61
date	2002.04.05.22.04.42;	author jimb;	state Exp;
branches;
next	1.60;

1.60
date	2002.04.05.15.59.23;	author ezannoni;	state Exp;
branches;
next	1.59;

1.59
date	2002.04.04.20.23.36;	author drow;	state Exp;
branches;
next	1.58;

1.58
date	2002.03.19.02.51.08;	author cagney;	state Exp;
branches;
next	1.57;

1.57
date	2002.02.25.02.13.09;	author cagney;	state Exp;
branches
	1.57.2.1;
next	1.56;

1.56
date	2002.02.05.19.28.36;	author jimb;	state Exp;
branches;
next	1.55;

1.55
date	2002.01.22.17.15.57;	author cagney;	state Exp;
branches;
next	1.54;

1.54
date	2002.01.22.00.08.55;	author cagney;	state Exp;
branches;
next	1.53;

1.53
date	2002.01.17.22.15.18;	author cagney;	state Exp;
branches;
next	1.52;

1.52
date	2001.12.30.06.25.14;	author eliz;	state Exp;
branches;
next	1.51;

1.51
date	2001.10.12.23.51.30;	author drow;	state Exp;
branches;
next	1.50;

1.50
date	2001.09.18.05.00.51;	author cagney;	state Exp;
branches;
next	1.49;

1.49
date	2001.08.17.19.01.22;	author kseitz;	state Exp;
branches;
next	1.48;

1.48
date	2001.07.28.19.48.15;	author cagney;	state Exp;
branches
	1.48.2.1;
next	1.47;

1.47
date	2001.07.12.05.54.48;	author cagney;	state Exp;
branches;
next	1.46;

1.46
date	2001.07.09.22.19.50;	author kettenis;	state Exp;
branches;
next	1.45;

1.45
date	2001.07.09.16.53.03;	author kevinb;	state Exp;
branches;
next	1.44;

1.44
date	2001.07.09.14.50.37;	author cagney;	state Exp;
branches;
next	1.43;

1.43
date	2001.07.09.05.53.44;	author kevinb;	state Exp;
branches;
next	1.42;

1.42
date	2001.07.06.03.53.11;	author cagney;	state Exp;
branches;
next	1.41;

1.41
date	2001.06.27.17.27.06;	author cagney;	state Exp;
branches;
next	1.40;

1.40
date	2001.06.26.19.11.48;	author cagney;	state Exp;
branches;
next	1.39;

1.39
date	2001.06.26.18.50.51;	author cagney;	state Exp;
branches;
next	1.38;

1.38
date	2001.06.26.18.13.45;	author cagney;	state Exp;
branches;
next	1.37;

1.37
date	2001.06.26.04.48.47;	author cagney;	state Exp;
branches;
next	1.36;

1.36
date	2001.06.25.21.05.11;	author cagney;	state Exp;
branches;
next	1.35;

1.35
date	2001.06.25.20.08.52;	author cagney;	state Exp;
branches;
next	1.34;

1.34
date	2001.06.25.19.02.17;	author cagney;	state Exp;
branches;
next	1.33;

1.33
date	2001.06.25.18.34.24;	author cagney;	state Exp;
branches;
next	1.32;

1.32
date	2001.06.23.20.43.56;	author cagney;	state Exp;
branches;
next	1.31;

1.31
date	2001.06.21.19.27.50;	author cagney;	state Exp;
branches;
next	1.30;

1.30
date	2001.06.21.16.15.19;	author cagney;	state Exp;
branches;
next	1.29;

1.29
date	2001.06.21.15.39.54;	author cagney;	state Exp;
branches;
next	1.28;

1.28
date	2001.06.19.16.19.16;	author cagney;	state Exp;
branches;
next	1.27;

1.27
date	2001.06.18.17.57.41;	author cagney;	state Exp;
branches;
next	1.26;

1.26
date	2001.06.16.18.57.56;	author cagney;	state Exp;
branches;
next	1.25;

1.25
date	2001.06.11.21.54.04;	author cagney;	state Exp;
branches;
next	1.24;

1.24
date	2001.06.10.01.20.21;	author cagney;	state Exp;
branches;
next	1.23;

1.23
date	2001.06.10.01.16.14;	author cagney;	state Exp;
branches;
next	1.22;

1.22
date	2001.06.10.00.56.06;	author cagney;	state Exp;
branches;
next	1.21;

1.21
date	2001.06.10.00.22.41;	author cagney;	state Exp;
branches;
next	1.20;

1.20
date	2001.05.14.16.59.49;	author cagney;	state Exp;
branches;
next	1.19;

1.19
date	2001.05.12.04.08.24;	author cagney;	state Exp;
branches;
next	1.18;

1.18
date	2001.05.10.22.32.26;	author cagney;	state Exp;
branches;
next	1.17;

1.17
date	2001.05.10.20.31.46;	author cagney;	state Exp;
branches;
next	1.16;

1.16
date	2001.05.09.01.33.10;	author cagney;	state Exp;
branches;
next	1.15;

1.15
date	2001.03.28.23.21.43;	author cagney;	state Exp;
branches;
next	1.14;

1.14
date	2001.03.26.11.51.50;	author eliz;	state Exp;
branches;
next	1.13;

1.13
date	2001.03.20.17.19.04;	author cagney;	state Exp;
branches;
next	1.12;

1.12
date	2001.03.19.23.31.41;	author cagney;	state Exp;
branches;
next	1.11;

1.11
date	2001.03.13.23.31.14;	author cagney;	state Exp;
branches;
next	1.10;

1.10
date	2001.03.06.08.21.44;	author kevinb;	state Exp;
branches;
next	1.9;

1.9
date	2001.02.08.06.03.54;	author cagney;	state Exp;
branches;
next	1.8;

1.8
date	2001.01.27.22.18.15;	author fnasser;	state Exp;
branches;
next	1.7;

1.7
date	2000.12.15.03.00.38;	author kevinb;	state Exp;
branches;
next	1.6;

1.6
date	2000.12.15.02.56.42;	author kevinb;	state Exp;
branches;
next	1.5;

1.5
date	2000.11.20.02.06.19;	author cagney;	state Exp;
branches;
next	1.4;

1.4
date	2000.10.16.07.34.02;	author eliz;	state Exp;
branches;
next	1.3;

1.3
date	2000.08.23.09.15.25;	author eliz;	state Exp;
branches;
next	1.2;

1.2
date	2000.07.24.06.09.49;	author eliz;	state Exp;
branches;
next	1.1;

1.1
date	2000.05.16.05.07.53;	author cagney;	state Exp;
branches;
next	;

1.48.2.1
date	2001.12.30.06.19.46;	author eliz;	state Exp;
branches;
next	;

1.57.2.1
date	2002.04.07.15.15.50;	author chastain;	state Exp;
branches;
next	;

1.65.4.1
date	2002.05.16.00.54.57;	author cagney;	state Exp;
branches;
next	1.65.4.2;

1.65.4.2
date	2002.05.16.19.08.05;	author cagney;	state Exp;
branches;
next	1.65.4.3;

1.65.4.3
date	2002.06.15.16.43.13;	author cagney;	state Exp;
branches;
next	1.65.4.4;

1.65.4.4
date	2002.06.15.19.32.44;	author cagney;	state Exp;
branches;
next	1.65.4.5;

1.65.4.5
date	2002.06.21.16.19.58;	author cagney;	state Exp;
branches;
next	1.65.4.6;

1.65.4.6
date	2002.06.25.20.02.48;	author cagney;	state Exp;
branches;
next	;

1.66.2.1
date	2002.06.19.18.51.31;	author kseitz;	state Exp;
branches;
next	1.66.2.2;

1.66.2.2
date	2002.06.20.01.36.26;	author kseitz;	state Exp;
branches;
next	1.66.2.3;

1.66.2.3
date	2002.06.25.00.05.34;	author kseitz;	state Exp;
branches;
next	1.66.2.4;

1.66.2.4
date	2002.07.22.22.01.31;	author kseitz;	state Exp;
branches;
next	1.66.2.5;

1.66.2.5
date	2002.07.25.17.20.56;	author kseitz;	state Exp;
branches;
next	1.66.2.6;

1.66.2.6
date	2002.08.09.18.34.33;	author kseitz;	state Exp;
branches;
next	1.66.2.7;

1.66.2.7
date	2002.08.09.19.53.56;	author kseitz;	state Exp;
branches;
next	1.66.2.8;

1.66.2.8
date	2002.08.09.19.54.56;	author kseitz;	state Exp;
branches;
next	1.66.2.9;

1.66.2.9
date	2002.08.09.20.02.32;	author kseitz;	state Exp;
branches;
next	1.66.2.10;

1.66.2.10
date	2002.08.09.20.03.45;	author kseitz;	state Exp;
branches;
next	1.66.2.11;

1.66.2.11
date	2002.08.13.16.54.58;	author kseitz;	state Exp;
branches;
next	1.66.2.12;

1.66.2.12
date	2002.08.19.21.20.26;	author kseitz;	state Exp;
branches;
next	1.66.2.13;

1.66.2.13
date	2002.08.21.23.04.27;	author kseitz;	state Exp;
branches;
next	1.66.2.14;

1.66.2.14
date	2002.08.28.17.01.44;	author kseitz;	state Exp;
branches;
next	1.66.2.15;

1.66.2.15
date	2002.08.28.19.05.04;	author kseitz;	state Exp;
branches;
next	1.66.2.16;

1.66.2.16
date	2002.10.01.00.46.22;	author kseitz;	state Exp;
branches;
next	1.66.2.17;

1.66.2.17
date	2002.11.04.00.23.11;	author ezannoni;	state Exp;
branches;
next	1.66.2.18;

1.66.2.18
date	2002.11.04.16.18.02;	author ezannoni;	state Exp;
branches;
next	1.66.2.19;

1.66.2.19
date	2002.11.04.20.52.28;	author ezannoni;	state Exp;
branches;
next	1.66.2.20;

1.66.2.20
date	2002.11.04.21.43.51;	author ezannoni;	state Exp;
branches;
next	1.66.2.21;

1.66.2.21
date	2002.11.04.22.08.26;	author ezannoni;	state Exp;
branches;
next	1.66.2.22;

1.66.2.22
date	2002.11.04.22.47.26;	author ezannoni;	state Exp;
branches;
next	1.66.2.23;

1.66.2.23
date	2002.11.04.23.27.32;	author ezannoni;	state Exp;
branches;
next	1.66.2.24;

1.66.2.24
date	2002.11.04.23.45.13;	author ezannoni;	state Exp;
branches;
next	1.66.2.25;

1.66.2.25
date	2002.11.05.23.04.17;	author ezannoni;	state Exp;
branches;
next	;

1.69.2.1
date	2002.09.24.00.04.53;	author carlton;	state Exp;
branches;
next	1.69.2.2;

1.69.2.2
date	2002.09.27.20.03.13;	author carlton;	state Exp;
branches;
next	1.69.2.3;

1.69.2.3
date	2002.10.11.22.23.00;	author carlton;	state Exp;
branches;
next	1.69.2.4;

1.69.2.4
date	2002.10.18.23.42.59;	author carlton;	state Exp;
branches;
next	1.69.2.5;

1.69.2.5
date	2002.10.25.23.49.57;	author carlton;	state Exp;
branches;
next	1.69.2.6;

1.69.2.6
date	2002.11.15.19.19.11;	author carlton;	state Exp;
branches;
next	1.69.2.7;

1.69.2.7
date	2002.12.23.19.39.09;	author carlton;	state Exp;
branches;
next	1.69.2.8;

1.69.2.8
date	2003.02.07.19.17.56;	author carlton;	state Exp;
branches;
next	1.69.2.9;

1.69.2.9
date	2003.03.06.00.56.36;	author carlton;	state Exp;
branches;
next	1.69.2.10;

1.69.2.10
date	2003.04.16.19.57.01;	author carlton;	state Exp;
branches;
next	1.69.2.11;

1.69.2.11
date	2003.05.23.18.40.50;	author carlton;	state Exp;
branches;
next	1.69.2.12;

1.69.2.12
date	2003.06.27.21.50.19;	author carlton;	state Exp;
branches;
next	1.69.2.13;

1.69.2.13
date	2003.08.05.17.13.21;	author carlton;	state Exp;
branches;
next	1.69.2.14;

1.69.2.14
date	2003.09.17.21.28.47;	author carlton;	state Exp;
branches;
next	1.69.2.15;

1.69.2.15
date	2003.11.11.23.51.09;	author carlton;	state Exp;
branches;
next	1.69.2.16;

1.69.2.16
date	2004.01.26.19.11.40;	author carlton;	state dead;
branches;
next	;

1.76.2.1
date	2002.10.26.17.12.18;	author drow;	state Exp;
branches;
next	1.76.2.2;

1.76.2.2
date	2003.12.14.20.27.44;	author drow;	state Exp;
branches;
next	1.76.2.3;

1.76.2.3
date	2004.01.13.16.12.08;	author drow;	state dead;
branches;
next	;

1.88.2.1
date	2003.02.03.06.02.46;	author cagney;	state Exp;
branches;
next	1.88.2.2;

1.88.2.2
date	2003.02.04.07.02.36;	author cagney;	state Exp;
branches;
next	1.88.2.3;

1.88.2.3
date	2003.02.04.19.59.02;	author cagney;	state Exp;
branches;
next	;

1.96.4.1
date	2003.03.16.14.01.54;	author kettenis;	state Exp;
branches;
next	;

1.98.4.1
date	2003.03.30.16.35.24;	author cagney;	state Exp;
branches;
next	;

1.100.6.1
date	2003.05.04.11.37.47;	author kettenis;	state Exp;
branches;
next	1.100.6.2;

1.100.6.2
date	2003.05.18.09.44.34;	author kettenis;	state Exp;
branches;
next	;

1.111.2.1
date	2003.07.02.20.52.31;	author drow;	state Exp;
branches;
next	1.111.2.2;

1.111.2.2
date	2003.08.07.18.09.30;	author cagney;	state Exp;
branches;
next	1.111.2.3;

1.111.2.3
date	2003.08.08.18.35.23;	author cagney;	state Exp;
branches;
next	1.111.2.4;

1.111.2.4
date	2003.09.11.02.33.20;	author ezannoni;	state Exp;
branches;
next	;

1.118.2.1
date	2004.03.23.20.15.09;	author ezannoni;	state dead;
branches;
next	;


desc
@@


1.125
log
@Eliminate the old mi/tui specific ChangeLog files as in ...

Added Files:
	mi/ChangeLog-1999-2003 testsuite/gdb.mi/ChangeLog-1999-2003
	tui/ChangeLog-1998-2003
Removed Files:
	mi/ChangeLog testsuite/gdb.mi/ChangeLog tui/ChangeLog
@
text
@2003-11-06  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmd-var.c (mi_cmd_var_set_format): Replace STREQN with
	strncmp.

2003-10-24  Andrew Cagney  <cagney@@redhat.com>

	* tui-out.c: Fix "fortunatly"[sic].

2003-10-02  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_RAW_SIZE to
	DEPRECATED_REGISTER_RAW_SIZE.

2003-09-30  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_VIRTUAL_SIZE to
	DEPRECATED_REGISTER_VIRTUAL_SIZE.

2003-09-17  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_BYTE to DEPRECATED_REGISTER_BYTE.

2003-09-10  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): Don't use
	DEPRECATED_REGISTER_BYTES because some architecture don't set it
	and its default is 0. 

2003-08-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add "mi2" and "mi3" to
	interpreters that hack around CLI.
	* mi-interp.c (mi3_command_loop): New function.
	(mi_interpreter_resume): Check for "mi3", default to "mi2".

2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* mi-interp.c (_initialize_mi_interp): Register "mi2" and "mi3".
	Make "mi" select "mi2".

2003-08-05  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmd-env.c (env_execute_cli_command): Use an explicit "%s %s"
	when constructing the run command.
	(mi_cmd_env_cd, mi_cmd_env_path, mi_cmd_env_dir): Simplify command
	string removing the "%s".

2003-08-04  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmds.h (struct mi_cli): Define.
	(struct mi_cmd): Change type of "cli" to "struct mi_cli".
	* mi-cmds.c (mi_cmds): Update table.
	* mi-parse.c (mi_parse): Update.
	* mi-main.c (mi_execute_cli_command): Add "args_p" parameter, make
	others constant.
	(mi_cmd_execute): Update call.
	(captured_mi_execute_command): Ditto.

2003-08-04  David Carlton  <carlton@@kealia.com>

	* mi-main.c (mi_error_last_message): Add "%s" second argument to
	xasprintf call.

2003-06-28  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-out.c (mi_ui_out_impl): Add NULL for redirect member.

2003-06-17  Daniel Jacobowitz  <drow@@mvista.com>

        * mi-cmds.c (mi_cmds): Add "-target-disconnect".

2003-06-11  David Carlton  <carlton@@bactrian.org>

	* mi-cmd-stack.c: Include dictionary.h.
	(list_args_or_locals): Update use of ALL_BLOCK_SYMBOLS.

2003-06-11  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Replace REGISTER_CONVERTIBLE with
	DEPRECATED_REGISTER_CONVERTIBLE.

2003-06-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-parse.c (_initialize_mi_parse): Delete function.
	* mi-main.c: Include "mi-main.h".
	* mi-interp.c (_initialize_mi_interp): Add declaration.
	* mi-cmd-stack.c: Include "stack.h".
	(select_frame_command_wrapper): Delete extern declaration.
	(mi_cmd_stack_select_frame): Replace select_frame_command_wrapper
	with select_frame_command.

2003-05-16  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): 

2003-05-12  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-mi-cmd-stack.c (list_args_or_locals): Rename VAR_NAMESPACE to
	VAR_DOMAIN.

2003-05-11  Andrew Cagney  <cagney@@redhat.com>

	* mi-symbol-cmds.c: Rename "mi-cmd-symbol.c", avoid 8.3 problem.

2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (register_changed_p): Use MAX_REGISTER_SIZE instead of
	MAX_REGISTER_RAW_SIZE.

2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use MAX_REGISTER_SIZE.

2003-05-05  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_cmd_data_write_register_values): Replace
	REGISTER_SIZE with DEPRECATED_REGISTER_SIZE.

2003-05-03  J. Brobecker  <brobecker@@gnat.com>

	From  Thierry Schneider  <tpschneider1@@yahoo.com>:
	* mi-cmds.h (mi_cmd_symbol_list_lines): Add declaration.
	* mi-cmds.c (mi_cmds): Add entry for new MI command.
	* mi-cmd-symbol.c (mi_cmd_symbol_list_lines): New source file
	for all symbol-related commands.

2003-04-02  Bob Rossi  <bob_rossi@@cox.net>

	* mi-cmd-file.c: New file to implement mi file commands.
	* mi-getopt.c (mi_valid_noargs): Added mi_valid_noargs to verify 
        if a set of parameters passed to an MI function has no arguments
	* mi-getopt.h (mi_valid_noargs): Declare.
	* mi-cmds.c (mi_cmds): Added -file-list-exec-source-file command.
	* mi-cmds.h (mi_cmd_file_list_exec_source_file): Declare.

2003-03-27  Andrew Cagney  <cagney@@redhat.com>

	* gdbmi.texinfo: Delete file.  Contents moved to
	../doc/gdb.texinfo.

2003-03-12  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use frame_register instead of
	get_saved_register.

2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-out.c: Update copyright.
	(mi_out_data): Define typedef.  Use instead of ui_out_data.

2003-03-01  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use register_type instead of
	REGISTER_VIRTUAL_TYPE.

2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: Replace all instances of SYMBOL_NAME with
	DEPRECATED_SYMBOL_NAME.  Update copyright.

2003-02-21  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-cmd-stack.c (list_args_or_locals): Handle LOC_COMPUTED and
	LOC_COMPUTED_ARG.

2003-02-19  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: #include "block.h"

2003-02-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-interp.c (mi_remove_notify_hooks): Convert function
	definition to ISO C.

2003-02-06  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Include "gdb_stat.h" instead of <sys/stat.h>.

2003-02-04  Jim Ingham <jingham@@apple.com>
	    Keith Seitz  <keiths@@redhat.com>
            Elena Zannoni  <ezannoni@@redhat.com>
            Andrew Cagney  <ac131313@@redhat.com>
	
	* mi-main.h: New file.
	* mi-interp.c: New file.
	* mi-main.c: Include "interps.h".
	(mi_error_message): Make global.
	(mi_input): Delete static function, moved to "mi-interp.c".
	(mi_execute_command, mi_execute_command_wrapper): Ditto.
	(mi_command_loop, mi1_command_loop, mi2_command_loop): Ditto.
	(mi_load_progress): Make non-static.
	(mi_error_last_message): New function.
	(captured_mi_execute_command): If the interpreter changed, don't
	print anything.
	(mi_load_progress): Use current_interp_named_p.
	(mi_init_ui): Delete function.
	(_initialize_mi_main): Don't install the mi interpreter, handled
	by "mi-interp.c".
	(mi_exec_async_cli_cmd_continuation): Make static.
	* mi-console.h (mi_console_file_new): Add `quote' parameter.
	* mi-console.c (struct mi_console_file): Add `quote'.
	(mi_console_file_new): Add `quote' parameter.  Initialize `quote'.
	(mi_console_raw_packet): Only quote the output when `quote'.
	* mi-cmds.h (mi_cmd_interpreter_exec): Declare.
	(mi_error_message, mi_error_last_message): Declare.
	(mi_execute_command): Declare.
	* mi-cmds.c: Add `interpreter-exec' command.

2003-02-04  Andrew Cagney  <ac131313@@redhat.com>

	From Keith Seitz <keiths@@redhat.com>:
	* gdbmi.texinfo (GDB/MI Miscellaneous Commands): Document the
	interpreter-exec command.

2003-02-02  Andrew Cagney  <ac131313@@redhat.com>

	From 2002-11-10 Jason Molenda (jason-cl@@molenda.com):
        * mi-cmd-var.c (mi_cmd_var_list_children): CHILDREN field is
        now a list; still a tuple when in mi1.
        * gdbmi.texinfo: Update var-list-children example.

2003-01-13  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Update copyright.

2003-01-13  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_cmd_exec_return): Use print_stack_frame instead of
	show_and_print_stack_frame.

2003-01-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Include "gdb_string.h" instead of <string.h>.
	Move all includes to after "defs.h".

2002-12-13  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmds.c (-environment-directory) Change to use mi_cmd_env_dir,
	(-environment-cd): Change to use mi_cmd_env_cd,.
	(-environment-pwd): Change to use mi_cmd_env_pwd.
	(-environment-path): Change to use mi_cmd_env_path.
	* mi-cmds.h (mi_cmd_env_cd, mi_cmd_env_dir): New prototypes.
	(mi_cmd_env_path, mi_cmd_env_pwd): Ditto.
	* mi-cmd-env.c: New file.  Part of fix for PR gdb/741.
	* gdbmi.texinfo (environment-cd): Update output and example.
	(environment-pwd): Ditto.
	(environment-dir): Update output, description, and examples.
	(environment-path): Ditto.

2002-11-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi/mi-cmd-stack.c, mi/mi-main.c: Update to use
	deprecated_selected_frame.

2002-11-13  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_write_register_values): Use
	deprecated_write_register_bytes instead of write_register_bytes.

2002-11-11  Jeff Johnston  <jjohnstn@@redhat.com>

	* gdbmi.texinfo (-var-assign): Add comments about interaction
	with -var-update and add an example.  Part of fix for gdb/702.

2002-11-08  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-main.c (mi_command_loop): Initialize raw_stdout and gdb_stdout 
	only if mi version is <= 1.
	(mi_init_ui): Initialize raw_stdout and gdb_stdout if mi version 
	is > 1 so startup message is treated as console output.  This is 
	part of fix for PR gdb/604.

2002-11-06  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmd-var.c (mi_cmd_var_create): Change the function used to 
	parse the frame addr from parse_and_eval_address() to 
	string_to_core_addr().  This is a fix for PR gdb/494.

2002-10-23  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmd-var.c: Change all remaining occurrences of ui_out_tuple_begin 
	to make_cleanup_ui_out_tuple_begin_end.  Change all remaining 
	occurrences of ui_out_list_begin to make_cleanup_ui_out_list_begin_end.
	Use do_cleanups instead of ui_out_list_end or ui_out_tuple_end.  This 
	is a fix for PR gdb/680.
	* mi-cmd-stack.c: Ditto.
	* mi-main.c: Ditto.

2002-10-22  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (mi_cmd_thread_select): Only return MI_CMD_CAUGHT_ERROR
	when we really did catch an error(). If we got GDB_RC_FAIL, return
	MI_CMD_ERROR instead.

2002-10-03  Jeff Johnston  <jjohnstn@@redhat.com>

	* gdbmi.texinfo: Fix examples that show frames to remove
	extraneous blank in level field.  Part of fix for PR gdb/192.
        
2002-10-03  Jeff Johnston  <jjohnstn@@redhat.com>
        
	* mi-cmd-var.c (mi_cmd_var_update): Fix for PR gdb/672.  For m2, 
	output list begin and end for "changelist" rather than tuple begin/end.
	(varobj_update_one): For m2, add tuple begin and end for varobj 
	update output.

2002-10-02  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_cmd_exec_return): Don't use
	return_command_wrapper, use return_command instead.
	(mi_cmd_exec_interrupt): Don't use
	interrupt_target_command_wrapper, use interrupt_target_command
	instead.
	(return_command_wrapper, interrupt_target_command_wrapper):
	Delete.
	Include frame.h.

2002-10-01  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi2_command_loop): New function.
	(mi0_command_loop): Delete function.
	(_initialize_mi_main): Recognize, and default to, "mi2".  Do not
	recognize "mi0".
	* mi-out.c (mi_table_begin): Remove mi0 code.
	(mi_table_body, mi_table_end): Ditto.
	(mi_table_header, mi_open, mi_close): Ditto.

2002-09-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_version): New function.
	* mi-out.h (mi_version): Declare.

2002-09-27  Andrew Cagney  <ac131313@@redhat.com>

	From 2002-07-12 Mo DeJong <supermo@@bayarea.net>
	* gdbmi.texinfo (var-evaluate-expression): Note that
	var-list-children must be invoked before child variable
	values can be evaluated.

2002-09-26  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-disas.c (dump_insns): Add text only output for CLI.
        (do_mixed_source_and_assembly): Ditto.

2002-09-11  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (mi_cmd_data_list_register_names): Use cleanups
	for the uiout list. Do the cleanups when returning an error.
	(mi_cmd_data_list_changed_registers): Ditto.
	(mi_cmd_data_list_register_values): Use cleanups for the uiout list
	and tuples. Do the cleanups when returning errors.

2002-07-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-var.c: Include "gdb_string.h".
	* mi-cmd-disas.c: Ditto.

2002-06-17  Keith Seitz  <keiths@@redhat.com>

	* gdbmi.texinfo: Update command examples with real MI behavior.

2002-05-20  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add uiout parameter.
	"data" is now a structure which is used to pass data to/from this
	function to mi_execute_command.
	Modify function to comply with requirements from catch_exceptions.
	Store real return result and command's return result in data.
	(mi_execute_command): Use catch_exceptions.
	Use enum to handle actions to be performed instead of overloading
	catch_errors return result and the mi return result.

2002-04-14  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_exec_return): 

2002-04-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (register_changed_p): Use frame_register_read instead
	of read_relative_register_raw_bytes.
	(get_register): Delete out-of-date comment.

2002-04-07  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-disas.c: Run through indent.

2002-04-07  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-disas.c (dump_insns): New function.
        (do_mixed_source_and_assembly): New function.
        (do_assembly_only): New function.
        (do_disassembly): New function.
        (mi_cmd_disassemble): Rewrite using smaller, more modular
        functions.

2002-04-05  Jim Blandy  <jimb@@redhat.com>

	* mi-cmd-stack.c (list_args_or_locals): Pass new arg to
	get_frame_block.  (See entry in gdb/ChangeLog.)

2002-04-05  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): Use TARGET_PRINT_INSN
	instead of tm_print_insn.
	Update copyright year.

2002-04-04  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): Skip end-of-function
	markers in the line table.

2002-03-15  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (XMALLOC): Delete macro.
	* mi-out.c (XMALLOC): Ditto.
	* mi-parse.c (XMALLOC): Ditto.
	* mi-console.c (XMALLOC): Ditto.
	* mi-cmd-var.c (XMALLOC): Ditto.
	* mi-cmd-break.c (XMALLOC): Ditto.
	
	* mi/mi-cmd-var.c, mi/mi-console.c, mi/mi-out.c: Update copyright
	* mi/mi-parse.c: Ditto.

2002-02-24  Andrew Cagney  <ac131313@@redhat.com>

	From wiz at danbala:
	* gdbmi.texinfo: Fix grammar and typos.
	Fix PR gdb/287.

2002-02-03  Jim Blandy  <jimb@@redhat.com>

	* mi-cmd-stack.c (list_args_or_locals): Move declaration of
	print_me inside the loop body, so it gets re-initialized every
	iteration.  The cases for the different symbol kinds leave
	print_me unchanged if they don't want the symbol printed.

2002-01-22  Andrew Cagney  <ac131313@@redhat.com>

	* gdbmi.texinfo: Remove makeinfo 3.12 hacks.

2002-01-21  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-stack.c: Remove #else clause of #ifdef UI_OUT.
	* mi-cmd-break.c: Ditto.
	* mi-main.c: Ditto.

2001-12-30  Eli Zaretskii  <eliz@@is.elta.co.il>

	* gdbmi.texinfo: Fix the application of GFDL in the Copyright notice.

2001-10-12  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-cmd-stack.c (list_args_or_locals): Use ALL_BLOCK_SYMBOLS.

2001-09-18  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_thread_select): Pass uiout to
	gdb_thread_select.
	(mi_cmd_thread_list_ids): Pass uiout to gdb_list_thread_ids.

	* mi-cmd-break.c (breakpoint_notify): Pass uiout to
	gdb_breakpoint_query.

2001-08-17  Keith Seitz  <keiths@@redhat.com>

	* mi-cmd-var.c (varobj_update_one): Update call to
	varobj_update to reflect recent api change.

2001-07-26  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c: Include "gdb.h".
	* mi-cmd-break.c: Include "gdb.h".

2001-07-12  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_execute_command): Flush output after ``(gdb)''
	prompt.  Bug reported by David Whedon.
	(mi_execute_async_cli_command): Ditto.
	(mi_exec_async_cli_cmd_continuation): Ditto.
	(mi_command_loop): Ditto.

2001-07-10  Mark Kettenis  <kettenis@@gnu.org>

	* mi-out.c (mi_out_new): Initialize suppress_ouput field of newly
	created `struct ui_out_data'.

2001-07-09  Kevin Buettner  <kevinb@@redhat.com>

	* mi-main.c (register_changed_p, get_register): Use alloca()
	to allocate space previously allocated via gcc's
	variable-length array extension.
	(mi_cmd_data_write_register_values, mi_cmd_data_write_memory):
	Change type of ``buffer'' to ``void *''.  Don't cast return value
	from xmalloc().  Add a cleanup to free the xmalloc'd buffer.

2001-07-07  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_evaluate_expression): Replace value_ptr
	with `struct value *'.

2001-07-08  Kevin Buettner  <kevinb@@redhat.com>

	* mi-out.c (mi_table_header, mi_field_int, mi_field_skip)
	(mi_field_string) Make function declarators match earlier
	declarations.

2001-07-04  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_ui_out_impl): Initialize is_mi_like_p to one.

2001-06-27  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_table_begin): Include nr_cols and nr_rows in mi1
	table output.
	* mi-out.c (mi_table_begin): Only suppress output when mi0. Change
	the header to a list.
	(mi_table_body): For mi1, close the header list and open a table
	body list.
	(mi_table_end): For mi1, close the body list.
	(mi_table_header): For mi1, output a tuple containing all the
	header information.
	(mi_open, mi_close): Reverse logic of mi_version test.
	* gdbmi.texinfo (GDB/MI Breakpoint Table Commands): Update.

2001-06-26  Andrew Cagney  <ac131313@@redhat.com>

	* gdbmi.texinfo (GDB/MI Output Syntax): Delete reference to query
	packet.

2001-06-26  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-stack.c (list_args_or_locals): Output a list of "args" or
	"locals" entries.
	* gdbmi.texinfo (stack-list-locals, stack-list-arguments)
	(exec-interrupt, target-select, thread-select): Update
	documentation.

2001-06-26  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-stack.c (mi_cmd_stack_list_frames): Output a list of
	"stack" entries.
	(mi_cmd_stack_list_args): Ditto for "stack-args".
	* gdbmi.texinfo (stack-list-frames, stack-list-arguments): Update
	documentation.
	(GDB/MI Stack Manipulation Commands): Fix section title.  Was
	Stack Manipulation Commands in GDB/MI.

2001-06-25  Andrew Cagney  <ac131313@@redhat.com>

	* gdbmi.texinfo: Update output examples that contain stop reason
	output, change the args=.... to a list.
	(exec-return): Ditto.

2001-06-25  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_read_memory): Output the memory contents
	- memory and data - as a list.
	* gdbmi.texinfo (data-read-memory): Update documentation.

2001-06-25  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_list_register_values): Output a list of
	register values.
	* gdbmi.texinfo (data-list-register-values): Update documentation.

2001-06-25  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_list_register_names): Output a list of
	register names.
	(mi_cmd_data_list_register_names): Include the pseudo registers.
	(mi_cmd_data_list_register_names): Don't leave holes in the list,
	output "" for NULL registers.
	* gdbmi.texinfo (data-list-register-names): Update documentation.

2001-06-23  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_list_changed_registers): Output a list of
	register numbers.
	* gdbmi.texinfo (data-list-changed-registers): Update
	documentation.
	
2001-06-23  Andrew Cagney  <ac131313@@redhat.com>

	* gdbmi.texinfo (data-disassemble): Update documentation of
	output.  Produces a list of instructions and a list of source
	lines.

2001-06-22  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): For "-data-disassemble",
	output a list instead of a tupple.

2001-06-21  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (struct ui_out_data): Replace field first_header with
	suppress_output.
	(mi_begin, mi_end): Check suppress_header.
	(mi_field_int, mi_field_skip): Ditto.
	(mi_field_string, mi_field_fmt): Ditto.
	(mi_table_begin): When nr_rows is zero, set suppress_header else,
	output the start of the header.
	(mi_table_body): Clear suppress header.

2001-06-21  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_open): For lists, when mi_version > 0, use ``[''.
	(mi_close): Ditto for ``]''.

2001-06-20  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_table_header): Add parameter ``col_name''.

2001-06-18  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c: Include "gdb_assert.h".
	(mi_table_begin): Add parameter ``nr_rows''.

2001-06-18  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c: Use strncmp as the "mi" test.  Allow "mi", "mi0" and
	"mi1".
	(mi_command_loop): Add parameter mi_version, pass to mi_out_new.
	(mi1_command_loop, mi0_command_loop): New functions.
	(_initialize_mi_main): Recognize "mi", "mi0" and "mi1".
	* mi-out.c (mi_out_new): Add parameter mi_version.
	(struct ui_out_data): Add field mi_version.
	* mi-out.h (mi_out_new): Update.

2001-06-07  Andrew Cagney  <ac131313@@redhat.com>

	* gdbmi.texinfo (GDB/MI Output Syntax): Add tuples and lists to
	syntax.
	(GDB/MI Draft Changes to Output Syntax): Delete section.
	
Mon Jun 11 17:22:25 2001  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-out.c: Fix typo. s/supress/suppress/.

2001-06-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_table_end, mi_table_begin, mi_begin, mi_end): Move
	supress_field_separator updates from here.
	(mi_open, mi_close): To here.
	(mi_open): Add parameter name. Output a field_separator.
	(mi_table_begin): Update.
	(mi_table_header): Update.
	(mi_begin): Update.

2001-06-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_table_begin): Make char* parameters constant.
	(mi_table_header): Ditto.
	(mi_field_int): Ditto.
	(mi_field_skip): Ditto.
	(mi_field_string): Ditto.
	(mi_field_fmt): Ditto.
	(mi_text): Ditto.
	(mi_message): Ditto.

2001-05-12  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_close, mi_open): Output ``[]'' when a list.

Fri May 11 13:55:07 2001  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmd-var.c: Replace ui_out_list_begin, ui_out_list_end and
 	make_cleanup_ui_out_list_end with ui_out_tupple_begin,
 	ui_out_tupple_end and make_cleanup_ui_out_tupple_begin_end.
	* mi-cmd-stack.c: Ditto.
	* mi-cmd-disas.c: Ditto.
	* mi-main.c: Ditto.

2001-05-10  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_open, mi_close): Replace list_open and list_close.
	(mi_table_begin): Update.
	(mi_table_header): Update.
	(mi_begin): Update.
	(mi_table_body): Update.
	(mi_table_end): Update.
	(mi_end): Update.

Thu May 10 16:28:13 2001  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_execute_async_cli_command): Always initialize
 	old_cleanups.

2001-05-08  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_begin, mi_end): Replace mi_list_begin and
	mi_list_end.
	(mi_ui_out_impl): Update.

2001-03-28  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_read_memory): Use xcalloc.

2001-03-26  Eli Zaretskii  <eliz@@is.elta.co.il>

	* gdbmi.texinfo: Update copyright.  Change Permissions to GFDL.

2001-03-20  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): Initialize ``file_string''
	and ``line_num''.  Consolidate declaration of argument variables.

2001-03-19  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.h: Remove #ifdef __STDC__.

2001-03-08  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_list_register_names): Use NUM_REGS, not
	ARCH_NUM_REGS.
	(mi_cmd_data_list_changed_registers): Ditto.
	(mi_cmd_data_list_register_values): Ditto.
	(mi_cmd_data_write_register_values): Ditto.

2001-03-06  Kevin Buettner  <kevinb@@redhat.com>

	* gdbmi.texinfo, mi-cmd-disas.c, mi-cmd-stack.c, mi-cmd-var.c,
	mi-cmds.c, mi-cmds.h, mi-console.c, mi-console.h, mi-getopt.c,
	mi-getopt.h, mi-out.c, mi-out.h, mi-parse.c, mi-parse.h: 
	Update/correct copyright notices.

Wed Feb  7 19:50:37 2001  Andrew Cagney  <cagney@@redhat.com>

	* mi-getopt.c: Add __FILE__ and __LINE__ parameter to calls to
 	internal_error.
	* mi-console.c: Ditto.
	* mi-cmds.c: Ditto.
	* mi-cmd-break.c: Ditto.

2001-01-27  Fernando Nasser  <fnasser@@redhat.com>

	From Momchil Velikov  <velco@@fadata.bg>
	* mi-cmd-disas.c (gdb_dis_asm_read_memory): Add missing memory
	attributes argument in the call to `xfer_memory'.

2000-12-14  Kevin Buettner  <kevinb@@redhat.com>

	* mi-cmd-disas.c, mi-cmd-var.c, mi-console.c, mi-main.c,
	mi-parse.c: Replace occurrences of free() with xfree().

Fri Nov 17 16:07:23 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c: Replace asprintf with xasprintf.
	* mi-cmd-var.c (mi_cmd_var_create): Ditto.

2000-10-16  Eli Zaretskii  <eliz@@is.elta.co.il>

	* gdbmi.texinfo (GDB/MI Variable Objects): Dimensions of
	multitable changed to "@@columnfractions .4 .6".  Suggested by
	Dmitry Sivachenko <dima@@Chg.RU>.

2000-08-23  Eli Zaretskii  <eliz@@is.elta.co.il>

	* gdbmi.texinfo: Change flathead -> @@sc{gdb/mi}.
	Fix typos and markup mistakes (from Dmitry S.
	Sivachenko <dima@@Chg.RU>).

2000-07-24  Eli Zaretskii  <eliz@@is.elta.co.il>

	* gdbmi.texinfo: Change GDB -> @@value{GDBN}, and
	(gdb) -> (@@value{GDBP}).  Fix a few typos and some markup.  From
	Dmitry S. Sivachenko <dima@@Chg.RU>.

Tue May 16 14:13:41 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_cmd_execute): Use free_current_contents.
	(free_and_reset): Delete.

Mon May 15 16:17:56 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_cmd_data_assign, mi_cmd_data_evaluate_expression),
 	mi-cmd-var.c (mi_cmd_var_create, mi_cmd_var_delete): Delete
 	make_cleanup_func casts. Not needed.

2000-05-07  Eli Zaretskii  <eliz@@is.elta.co.il>

	* gdbmi.texinfo: Lots of typos and grammar fixes from Brian
        Youmans <3diff@@flib.gnu.ai.mit.edu>.

Wed Apr 26 18:35:19 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* gdbmi.texinfo (GDB/MI Output Syntax v2.0): Convert Draft 2.0
 	Output Syntax into a new section.  Cross reference.
	(menu): Fix tipo. GDB/MI Compatibility with CLI.

2000-04-23  Eli Zaretskii  <eliz@@is.elta.co.il>

	* gdbmi.texinfo: Lots of changes, to include this document as part
	of the GDB manual.

2000-03-13  James Ingham  <jingham@@leda.cygnus.com>

	* mi-cmd-var.c (mi_cmd_var_create): Add special frame cookie "@@"
	to indicate an "USE_CURRENT_FRAME" variable.
	(varobj_update_one): Add "in_scope" and "type_changed" to the
	result.

2000-03-06  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.h: Export mi_cmd_data_write_register_values.
	
	* mi-cmds.c (mi_cmds): Implement data-write-register-values with
 	mi_cmd_data_write_register_values.

	* mi-main.c (mi_cmd_data_write_register_values): New
 	function. Write a value into a register.

2000-03-06  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Update data-disassemble documentation.

2000-03-01  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): Use
 	ui_out_field_core_addr() instead of print_address_numeric(), to
 	maintain consistency throughout MI.

Wed Feb 23 17:09:39 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmd-break.c, mi-cmd-disas.c, mi-cmd-stack.c, mi-cmd-var.c,
 	mi-cmds.c, mi-cmds.h, mi-console.c, mi-console.h, mi-getopt.c,
 	mi-getopt.h, mi-main.c, mi-out.c, mi-out.h, mi-parse.c,
 	mi-parse.h: Update copyright information.

Wed Feb 23 13:31:16 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmd-disas.c (gdb_dis_asm_read_memory): Change LEN to unsigned
 	long.  Match ../include/dis-asm.h change.

Wed Feb 23 10:30:55 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* gdbmi.texinfo: Update copyright - FSF.  Update version
 	information.

	mi-cmd-break.c, mi-cmd-disas.c, mi-cmd-stack.c, mi-cmd-var.c,
 	mi-cmds.h, mi-main.c, mi-parse.c, mi-parse.h: Re-format using GNU
 	indent.

2000-02-21  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c: Add include of gdbcore.h for write_memory()
 	prototype.

2000-02-18  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): Change syntax of
 	command. Now use options.  
	Instead of printing the symbolic address of instructions via
 	print_address_symbolic(), use build_address_symbolic() and format
 	properly for output.
	(gdb_do_disassmble): Delete.

2000-02-18  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): 

2000-02-17  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_data_write_memory): New function. Write a
 	value into target memory.

	* mi-cmds.h (mi_cmd_data_write_memory): Export. 

	* mi-cmds.c (mi_cmds): Hook up data-write-memory to
 	mi_cmd_data_write_memory().

2000-02-17  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_target_download): Correct error message to
 	report right function name.
	(mi_cmd_target_select): Add doing exec cleanups at end.
	(mi_cmd_data_read_memory): Correct typo.
	(mi_cmd_execute): Do not simply free last_async_command, but reset
 	it to NULL as well.
	(free_and_reset): New function, free the argument and set it to
 	NULL.
	(mi_cmd_target_select_continuation): Delete prototype.
	
Tue Feb  1 00:17:12 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmd-disas.c, mi-cmds.h, mi-console.c, mi-console.h,
 	mi-main.c, mi-out.c, mi-out.h: Update to reflect rename of
 	gdb-file / GDB_FILE to ui-file / ``struct ui_file''.
	
Mon Jan 31 18:33:28 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_command_loop): Delete reference to
 	fputs_unfiltered_hook.

2000-01-27  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.c (mi_cmds): Update entries for
 	mi_cmd_data_list_register_names,
 	mi_cmd_data_list_changed_registers,
 	mi_cmd_data_list_register_values.

	* mi-cmds.h (mi_cmd_data_list_register_names,
 	mi_cmd_data_list_changed_registers,
 	mi_cmd_data_list_register_values): Update to mi_cmd_argv_ftype.

	* mi-main.c (mi_cmd_data_list_register_names,
 	mi_cmd_data_list_changed_registers,
 	mi_cmd_data_list_register_values): Update to use argc, argv
 	parameters.
	
2000-01-27  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_data_read_memory): Correct the computation of
 	next-row.

2000-01-27  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-cmd-var.c (mi_cmd_var_create): Test for NULL type.
	(mi_cmd_var_set_format, mi_cmd_var_show_format,
	mi_cmd_var_info_num_children, mi_cmd_var_list_children,
	mi_cmd_var_info_type, mi_cmd_var_info_expression,
	mi_cmd_var_show_attributes, mi_cmd_var_evaluate_expression,
	mi_cmd_var_assign, mi_cmd_var_update): Prevent possibility of memory
	leak on error.

2000-01-27  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-out.c (mi_field_string): Test for NULL string pointer.

2000-01-17  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmd-stack.c (mi_cmd_stack_list_frames): Call
 	print_frmae_info() with the correct arguments.

	* mi-main.c (mi_cmd_exec_return): Call
 	show_and_print_stack_frame() with LOC_AND_ADDRESS, so it does the
 	right thing.  Update Copyright.

2000-01-13  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c: Move disassemble commands from here.

	* mi-cmd-disas.c: To here. New file.

2000-01-13  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmd-stack.c: Remove include of mi-out.h.

	* mi-main.c (mi_cmd_disassemble): Update function to use argc/argv
 	interface.

	* mi-cmds.h: Ditto.

	* mi-cmds.c: Ditto.

2000-01-12  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Update stack commands descriptions.
	Add thread commands descriptions and examples.

	* mi-main.c (mi_cmd_thread_list_ids): Fix typo.

2000-01-12  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_thread_list_ids): New function, print a list
 	of currently known threads ids, and the total number of threads.
	(mi_cmd_thread_select): New function. Switch current thread.

	* mi-cmds.c (mi_cmds): Implement thread-list-ids by
 	mi_cmd_thread_list_ids, and thread-select by mi_cmd_thread_select.

	* mi-cmds.h (mi_cmd_thread_select, mi_cmd_thread_list_ids): Export.

2000-01-11  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c: Move stack commands from here.

	* mi-cmd-stack.c: To here. New file.

2000-01-07  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (list_args_or_locals): Add a new paramter, the frame
 	for which to display args or locals. Don't use selected_frame
 	anymore, use the new parameter instead. Return void instead of
 	mi_cmd_result, let callers do so.
	(mi_cmd_stack_list_args): Change interface. Now accept low and
 	high frame numbers to display args for a range of frames. Without
 	these two, display args for the whole stack.
	(mi_cmd_stack_list_locals): Adapt to new interface for
 	list_args_or_locals.

2000-01-06  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_stack_info_depth, mi_cmd_stack_list_args,
 	mi_cmd_stack_list_frames, mi_cmd_stack_list_locals,
 	mi_cmd_stack_select_frame): Change to use argv type of parameters.

	* mi-cmds.c (mi_cmds): Change stack-info-depth,
 	stack-list-arguments, stack-list-frames, stack-list-locals,
 	stack-select-frame to use argv parameters.

	* mi-cmds.h (mi_cmd_stack_info_depth, mi_cmd_stack_list_args,
 	mi_cmd_stack_list_frames, mi_cmd_stack_list_locals,
 	mi_cmd_stack_select_frame): Update definitions.

Tue Jan  4 12:38:54 2000  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_command_loop): Force the MI interface to use seven
 	bit strings.
	* gdbmi.texinfo: Make it clear that a quoted C string is seven
 	bit.

Thu Dec 30 14:15:22 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-getopt.c (mi_getopt): Rewrite.  Allow long options.
	* mi-getopt.h (struct mi_opt): Declare.
	(mi_getopt): Update.

	* mi-main.c (mi_cmd_data_read_memory), mi-cmd-break.c
 	(mi_cmd_break_insert, mi_cmd_break_watch): Update.

Wed Dec 29 23:38:35 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmd-break.c (mi_cmd_break_insert): Add support for -c
 	<condition>, -i <ignore-count> and -p <thread>.
	(breakpoint_notify): New function.
	(mi_cmd_break_insert): Wrap GDB call with callback hooks so that
 	MI is notified when ever a breakpoint is created.

	* gdbmi.texinfo: Update.

Fri Dec 24 11:23:22 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (gdb_do_disassemble): Strip out more useless #ifdef
 	UI_OUTs.

1999-12-23  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (gdb_do_disassemble): Fix output. Lines that have no
 	assembly instructions must still be outputted, to keep the source
 	line numbering correct.
	Remove #ifdef UI_OUT's, they are useless.

1999-12-17  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (gdb_do_disassemble): Don't print a new list in mixed
 	mode, every time. Just do it when we actually encounter a new
 	source line.

1999-12-17  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-cmd-var.c (mi_cmd_var_list_children): Add test for C++ pseudo
	variable objects (private, public, protected) as these do not have
        a type and the -var-list-children operation was dumping core.
	
Fri Dec 17 20:23:33 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* gdbmi.texinfo: Document recommended syntax for options.

	* mi-main.c (mi_cmd_data_read_memory): Add support for ``-o
 	<offset>''.
	* gdbmi.texinfo: Document.
	
Wed Dec 15 17:43:08 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-getopt.h (mi_getopt): Change optarg to a char pointer. Check
 	optind.
  	* mi-cmd-break.c (mi_cmd_break_insert): Update.

	* mi-main.c (mi_cmd_data_read_memory): Add fields "next-row-addr",
 	"prev-row-addr", "next-page-addr", "prev-page-addr" and a per row
 	"addr".
	* gdbmi.texinfo: Update.

Wed Dec 15 01:05:40 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmds.h (mi_cmd_result): Add MI_CMD_CAUGHT_ERROR for when the
 	error is caught.

	* mi-main.c (captured_mi_execute_command): When
 	MI_CMD_CAUGHT_ERROR return 0 rethrowing the eror.

1999-12-13  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmd-break.c (mi_cmd_break_insert): Remove unused var.

	* mi-cmd-var.c (mi_cmd_var_update): Remove unused variables.

Mon Dec 13 18:43:36 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-parse.c (mi_parse): Quote the command when printing it.
	(mi_parse_argv): Fix handling of quoted strings. Was not
 	de-quoting them.
	(mi_parse_argv): Make static.

Mon Dec 13 18:30:03 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmds.h (mi_cmd_break_insert, mi_cmd_break_watch): Change type
 	to mi_cmd_argv_ftype.
	* mi-cmds.c (mi_cmds): Update.
	* mi-cmd-break.c (mi_cmd_break_insert, mi_cmd_break_watch): Change
 	to new style of arguments with argc and argv.  Parse arguments
 	using mi_getopt.

	* mi-cmd-break.c (mi_cmd_break_insert): Wrap body in #ifdef UI_OUT
 	to avoid non-ui compile problems.

Mon Dec 13 15:08:36 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-getopt.h, mi-getopt.c: New files. Similar to getopt but with
 	well defined semantics.
	
Mon Dec 13 14:22:21 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_cmd_break_insert, mi_cmd_break_watch, enum
 	wp_type, enum bp_type): Move from here.
	* mi-cmd-break.c: To here.  New file.
	(mi_cmd_break_insert, mi_cmd_break_insert, mi_cmd_break_watch):
 	Use error to report problems.

1999-12-09  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Update description of exec-interrupt.

	* mi-main.c (mi_cmd_exec_interrupt): If the program is not
 	executing, don't try to interrupt it, but error out instead.  Make
 	sure previous_async_command is not null before duplicating it into
 	last_async_command.

	* gdbmi.texinfo: Add examples for data-evaluate-expression.

1999-12-08  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmd-var.c (mi_cmd_var_assign, mi_cmd_var_create,
 	mi_cmd_var_delete, mi_cmd_var_evaluate_expression,
 	mi_cmd_var_info_expression, mi_cmd_var_info_num_children,
 	mi_cmd_var_info_type, mi_cmd_var_list_children,
 	mi_cmd_var_set_format, mi_cmd_var_show_attributes,
 	mi_cmd_var_show_format, mi_cmd_var_update): Change to use new
 	style of arguments with argc and argv.
	(next_arg): Delete.
	(which_var): Delete.

	* mi-cmds.c (mi_cmds): Update entries for mi_cmd_var_assign,
 	mi_cmd_var_create, mi_cmd_var_delete,
 	mi_cmd_var_evaluate_expression, mi_cmd_var_info_expression,
 	mi_cmd_var_info_num_children, mi_cmd_var_info_type,
 	mi_cmd_var_list_children, mi_cmd_var_set_format,
 	mi_cmd_var_show_attributes, mi_cmd_var_show_format,
 	mi_cmd_var_update.

	* mi-cmds.h (mi_cmd_var_assign, mi_cmd_var_create,
 	mi_cmd_var_delete, mi_cmd_var_evaluate_expression,
 	mi_cmd_var_info_expression, mi_cmd_var_info_num_children,
 	mi_cmd_var_info_type, mi_cmd_var_list_children,
 	mi_cmd_var_set_format, mi_cmd_var_show_attributes,
 	mi_cmd_var_show_format, mi_cmd_var_update): Update declarations.

1999-12-08  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Comment out -data-assign command.  * mi-main.c
 	(mi_cmd_data_assign): Do not use, comment out.  * mi-cmds.h
 	(mi_cmd_data_assign): Remove.  * mi-cmds.c: Remove -data-assign
 	command from MI interface.

1999-12-07  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-parse.c (mi_parse): Add '\n' at end of error messages, so
 	that prompt comes out on new line.

	* gdbmi.texinfo: Update disassembly command output.

1999-12-06  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (gdb_do_disassemble): Update output for UI_OUT case.

1999-12-02  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Update exec-until output, including the reason
 	for stopping.

Thu Dec  2 17:17:22 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmds.c: Include <string.h> for memset.

1999-12-01  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_exec_return): ifdef the references to
 	return_command_wrapper().
	
1999-12-01  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_gdb_exit, mi_cmd_exec_interrupt,
 	mi_cmd_target_select, mi_execute_async_cli_command,
 	mi_exec_async_cli_cmd_continuation, mi_load_progress): Don't print
 	last_async_command if it is NULL.
	(mi_cmd_exec_return): 

1999-12-01  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_exec_return): Reimplement using
 	return_command() instead of mi_execute_async_cli_command().

1999-12-01  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.h: Export mi_cmd_data_assign and
 	mi_cmd_data_evaluate_expression.

	* mi-cmds.c (mi_cmds): Hook data-assign to mi_cmd_data_assign and
 	data-evaluate-expression to mi_cmd_data_evaluate_expression.

	* mi-main.c (mi_cmd_data_assign): New function. Implement
 	data-assign command.
	(mi_cmd_data_evaluate_expression): New function. Implement
 	data-evaluate-expression command.

1999-12-01  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Fix some texinfo formatting errors.

1999-12-01  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Update data-list-register-values description.

	* mi-cmds.h: Export mi_cmd_data_list_register_values.

	* mi-cmds.c (mi_cmds): Hook data-list-register-values to
 	mi_cmd_data_list_register_values.

	* mi-main.c (mi_cmd_data_list_register_values): New
 	function. Implements the -data-list-register-values command.
	(get_register): New function. Output the contents of a given
 	register.

Wed Dec  1 20:27:22 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_execute_async_cli_command): Append missing "\n"
 	for synchronous stopped message.

1999-11-30  James Ingham  <jingham@@leda.cygnus.com>

	* gdbmi.texinfo: Fix obvious typo in @@end statement.

Wed Dec  1 12:36:27 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmd-var.c: Include "value.h".
	* mi-console.c: Include <string.h>.

Wed Dec  1 00:21:03 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (captured_mi_execute_command): For a CLI command, pass
 	"%s" to mi_execute_cli_command to stop core dumps.
	(captured_mi_execute_command): Echo CLI commands on gdb_stdlog.

Wed Dec  1 00:10:07 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* gdbmi.texinfo: Explain NR-BYTES and ADDR.

Tue Nov 30 23:31:57 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmd-var.c (mi_cmd_var_create, mi_cmd_var_delete,
 	mi_cmd_var_set_format, mi_cmd_var_show_format,
 	mi_cmd_var_info_num_children, mi_cmd_var_list_children,
 	mi_cmd_var_info_type, mi_cmd_var_info_expression,
 	mi_cmd_var_show_attributes, mi_cmd_var_evaluate_expression,
 	mi_cmd_var_assign, mi_cmd_var_update, varobj_update_one, next_arg,
 	which_var): New file.  Move varobj commands to here from
 	mi-main.c.

	* mi-console.h, mi-console.c (mi_console_file_new,
 	mi_console_file_delete, mi_console_file_fputs,
 	mi_console_raw_packet, mi_console_file_flush): New files. Move
 	mi_console_file to here from mi-main.c.

Tue Nov 30 19:37:25 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (captured_mi_execute_command): Use fputstr_unfiltered
 	when printing error messages.
	(mi_cmd_execute): Ditto.

1999-11-29  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Describe -data-list-changed-registers,
 	-data-list-register-names. Add examples for
 	-exec-next-instruction, exec-step-instruction, -exec-run,
 	-exec-until.  Format examples for -data-read-memory.
	update example for -target-download.
	
1999-11-29  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Remove mentioning of inaccurate watchpoint hit
 	count.
	
Mon Nov 29 19:28:55 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_execute_async_cli_command): Return ``enum
 	mi_cmd_cmd_result''.  mi_cmd_exec_run, mi_cmd_exec_next,
 	mi_cmd_exec_step, mi_cmd_exec_step_instruction,
 	mi_cmd_exec_finish, mi_cmd_exec_until, mi_cmd_exec_return,
 	mi_cmd_exec_continue): Update call.
	(mi_execute_async_cli_command): When target is synchronous, fake
 	asynchronous behavour (ulgh).  Allows tests to be run on built-in
 	simulator and native targets.

Mon Nov 29 15:15:16 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmds.h (mi_cmd_gdb_exit), mi-cmds.c (mi_cmds), mi-main.c
 	(mi_cmd_gdb_exit): Change function signature to mi_cmd_argv_ftype.

1999-11-28  Andew Cagney  <cagney@@rat-in-a-hat.cygnus.com>

	* mi-parse.c: Include <ctype.h> and <string.h>

1999-11-26  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* gdbmi.texinfo: Added watchpoint command descriptions and
 	examples.

	* mi-main.c (mi_load_progress): Add parameter for total sent so far.
	Print it as well.
	
Fri Nov 26 10:17:49 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* gdbmi.texinfo (section Output Syntax): For lists, the <string>
 	part of a <result> is optional.  Clarify syntax.
	(appendix Proposed v2.0 Output Syntax): New section. Provide
 	record of discussion of possible changes to syntax.

Wed Nov 24 19:41:35 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_cmd_data_read_memory): Simplify.  Fix coredump
 	when arguments were bad.
	(mi_cmd_execute): Change parameter to ``struct mi_parse''.  Handle
 	case of argv_func as well as args_func.
	(captured_mi_execute_command): Update.

	* mi-cmds.c (struct mi_cmd): Add field for mi_cmd_argv_ftype.
	(mi_cmds): Update mi_cmd_data_read_memory.
	(mi_lookup): Return 

	* mi-cmds.h (mi_cmd_args_ftype): Rename mi_cmd_ftype. Make all
 	functions of type this type.
	(mi_cmd_argv_ftype): Declare.
	(mi_cmd_data_read_memory): Change type to mi_cmd_argv_fytpe.
	(struct mi_cmd): Move declaration to here from mi-cmds.c.
	(mi_lookup): Return a pointer to ``struct mi_cmd''.
	
Wed Nov 24 15:03:34 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-parse.c (mi_parse): Initialize TOKEN when a CLI command.

	* gdbmi.texinfo: Allow a <token> before a CLI command.

	* mi-parse.h (struct mi_parse): Declare.
	(mi_parse): Change to return a ``struct mi_parse''.
	(enum mi_command_type): Delete PARSE_ERROR.

	* mi-main.c (struct mi_execute_command_context): Delete.
	(captured_mi_execute_command): Update
	(mi_execute_command): Update.  Check for mi_parse returning NULL.

Wed Nov 24 12:57:14 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-parse.h: Remove const, from cmd parameter.  Causes cascading
 	warnings.

Wed Nov 24 15:03:34 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-parse.c (mi_parse): New function.  Move parse code to here.
	* mi-main.c (parse): From here. Delete.

Wed Nov 24 12:57:14 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-parse.c, mi-parse.h: New files. Implement mi_parse_env.

Wed Nov 24 11:24:05 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-out.c (mi_field_string): Make string parameter constant.

1999-11-23  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.h (mi_cmd_target_download): Export. 

	* mi-cmds.c (mi_cmds): Add mi_cmd_target_download.

	* mi-main.c: Include <sys/time.h>.
	(mi_cmd_target_download): New function, implement the
 	target-download command.
	(mi_load_progress): New function. Called via the
 	show_load_progress hook. Prints updates every 0.5 secs.
	(mi_command_loop): Initialize the show_load_progress hook.

1999-11-22  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_exec_until): New function. Implement until
 	command.
	(mi_cmd_exec_step_instruction): New function. Implement stepi
 	command.
	(mi_cmd_exec_next_instruction): New function. Implement nexti
 	command.
	
	* mi-cmds.c (mi_cmds): Add mi_cmd_exec_step_instruction,
 	mi_cmd_exec_next_instruction, mi_cmd_exec_until.

	* mi-cmds.h (mi_cmd_exec_step_instruction,
 	mi_cmd_exec_next_instruction, mi_cmd_exec_until): Export.
	
Tue Nov 23 00:30:37 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi/gdbmi.texinfo: Document -data-read-memory.
	
	* mi-main.c (mi_cmd_data_read_memory): Fix off-by-one check of
 	argc.
	(mi_cmd_data_read_memory): Label the output table with "memory".

Thu Nov 18 18:15:53 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_cmd_exec_interrupt, mi_cmd_break_insert,
 	mi_cmd_break_watch, mi_cmd_disassemble, mi_cmd_execute): Replace
 	strdup with xstrdup.

Thu Nov 18 20:50:09 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_cmd_data_read_memory): New function.  Implement
 	data-read-memory.

	* mi-cmds.h, mi-cmds.c: Add mi_cmd_data_read_memory.
	* mi-cmds.c (mi_cmds): Ditto.

1999-11-11  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.h (mi_cmd_break_watch): Export.

	* mi-cmds.c (mi_cmds): Hook up break-watch to function
 	mi_cmd_break_watch.

	* mi-main.c (wp_type): New enumeration for the possible types of
 	watchpoints.
	(mi_cmd_break_watch): New function, implements the break-watch
 	command.

1999-11-11  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_break_insert): Handle case in which the command is
	just a -break-insert w/o args.

Fri Nov 12 00:01:52 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-out.c (mi_field_string): Always quote the string.

1999-11-10  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.h(mi_cmd_data_list_changed_registers,
 	mi_cmd_data_list_register_names): Export.

	* mi-cmds.c (mi_cmds): Hook up data-list-changed-registers to
 	mi_cmd_data_list_changed_registers and data-list-register-names to
 	mi_cmd_data_list_register_names.

	* mi-main.c (mi_cmd_data_list_changed_registers): New function,
 	implements the data-list-changed-registers command.
	(mi_cmd_data_list_register_names): New function, implements the
 	data-list-register-names command.
	(register_changed_p): New function. Decide whether the register
 	contents have changed.
	(setup_architecture_data): New function. Initialize registers
 	memory.
	(_initialize_mi_main): Call setup_architecture_data(), and
 	register_gdbarch_swap().

Wed Nov 10 18:35:08 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_execute_command): Correctly quote error messages.

Wed Nov 10 11:05:14 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi/gdbmi.texinfo: Delete <stream-output>.  Replaced by
 	<c-string>.

	* mi-main.c (mi_console_raw_packet): Always quote console output.

Tue Nov  9 17:53:05 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_console_file_new), mi-out.c (mi_out_new): Replace
 	the tui_file with a mem_file. Ya!
	
	* mi-out.c (do_write): New function, wrapper to gdb_file_write.
	(mi_out_put): Pass do_write to gdb_file_put.

	* mi-main.c (mi_console_file_flush): Rewrite.  Use
 	mi_console_raw_packet to send data to the console.
	(mi_console_raw_packet): New function. Correctly
 	create quoted C string packets.

1999-11-08  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.c (mi_cmds): Break-insert is now implemented by
 	mi_cmd_break_insert.
	* mi-cmds.h (mi_cmd_break_insert): Export. 
	* mi-main.c (bp_type): New enumeration.
	(mi_cmd_break_insert): New function. Implements all flavors of
 	breakpoint insertion.

Mon Nov  8 17:49:17 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_console_file_flush): Replace gdb_file_get_strbuf
 	with tui_file_get_strbuf.

Fri Nov  5 17:06:07 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_console_file_delete, mi_console_file_fputs,
 	mi_console_file_flush): Call internal_error instead of error.

Thu Nov  4 19:53:32 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (captured_mi_execute_command): New function.
	(mi_execute_command): Rewrite.  Replace SET_TOP_LEVEL() with call
 	to captured_mi_execute_command via catch_errors.

Thu Nov  4 20:33:58 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (clean): Delete.
	(mi_command_loop): Delete extern declaration of
 	mi_execute_command.

1999-10-28  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_stack_select_frame): Conditionalize the body
 	on UI_OUT, because select_frame_command_wrapper is only defined if
 	UI_OUT is.
	(mi_cmd_exec_interrupt): Conditionalize the body on UI_OUT,
 	because interrupt_target_command_wrapper is only defined if UI_OUT is.

	* mi-cmds.c (mi_cmds): Implement command exec-interrupt by
 	mi_cmd_exec_interrupt.  

	* mi-main.c (mi_cmd_exec_interrupt): New function. Implements
 	exec-interrupt command.
	(mi_cmd_execute): If the target is running save execution command
 	token in previous_async_command. If the command is not 'interrupt' 
	and the target is running, reject it.
	(clean): New function. Free the arg and reset it to NULL.

	* mi-cmds.h (mi_cmd_exec_interrupt):Export.

1999-10-28  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.c (mi_cmds): Implement command stack-select-frame by
 	mi_cmd_stack_select_frame.  

	* mi-main.c (mi_cmd_stack_select_frame): New function. Implements
 	stack-select-frame command.

	* mi-cmds.h (mi_cmd_select_frame):Export.

1999-10-26  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.c (mi_cmds): Implement commands stack-list-locals and
 	stack-list-arguments by mi_cmd_stack_list_locals and
 	mi_cmd_stack_list_args.

	* mi-main.c (mi_cmd_stack_list_locals): New function. Implements
 	stack-list-locals command.
	(mi_cmd_stack_list_args): New function. Implements
 	stack-list-arguments command.
	(list_args_or_locals): New function. Do all the work for the
	listing of locals or arguments.

	* mi-cmds.h (mi_cmd_stack_list_args,mi_cmd_stack_list_locals) :
 	Export.

1999-10-25  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-cmds.c (mi_cmds): Add new command stack-info-depth.

	* mi-main.c (mi_cmd_stack_info_depth): New function. Implements
 	the stack-info-depth command.
	* mi-cmds.h (mi_cmd_stack_info_depth): Export.


1999-10-22  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_execute_command): Handle MI_CMD_ERROR case
 	properly, for command that return error code and don't set
 	mi_error_message.

	* mi-cmds.c (mi_cmds): Hook stack-list-frames command to
 	mi_cmd_stack_list_frames function.
	* mi-cmds.h (mi_cmd_stack_list_frames): Export.
	
	* mi-main.c (mi_execute_command): Deal with a return code of
 	MI_CMD_ERROR from the execution of mi commands.
	(mi_error_message): Static string variable, to contain the error
 	message from mi commands.
	(mi_cmd_stack_list_frames): New function. Prints a backtrace.

1999-10-18  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_disassemble): Handle the new command line
 	parameter that specifies the number of disassembly lines to be
 	displayed.
	(gdb_do_disassemble): Add new parameter. Count the number of lines
 	that have been displayed, and stop when limit is reached.

Wed Oct 13 18:04:13 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_command_loop): Don't initialize ``flush_hook''.

1999-10-13  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi/gdbmi.texinfo: More reformatting of the grammars.

1999-10-12  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi/gdbmi.texinfo: More TeX formatting.

1999-10-11  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi/gdbmi.texinfo: First pass completed. All commands should have
	some comments/info.
	Escape '@@' output special char.
	Reformat for TeX.

1999-10-08  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi/gdbmi.texinfo: Filled in part of file command section, and
 	stack section.

1999-10-07  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi/gdbmi.texinfo: Filled in some sections about execution
 	commands.

Tue Oct  5 15:27:28 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmds.h: Sort table
	* mi-cmds.c: Ditto.
	(MI_TABLE_SIZE): Increase to 251.

1999-10-04  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_cmd_var_create, mi_cmd_var_delete): Add missing
	cleanups.
	
1999-10-04  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (next_arg): Returns lenght as well.
	(which_var, mi_cmd_var_create, mi_cmd_var_delete,
	mi_cmd_var_set_format, mi_cmd_var_update): Do not modify the input
	string, use allocated storage instead.
	(mi_cmd_var_assign): Adjust call to next_arg() to include new
	argument.

1999-10-04  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_execute_command): Fix handling of errors.

1999-10-04  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-out.c (mi_out_new): Call tui_sfileopen() instead of
        deprecated gdb_file_init_astream().
	* mi-main.c (mi_console_file_new): Ditto.

Mon Oct  4 15:17:29 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmds.h: Sort function declarations.
 	(mi_lookup): Add extern.

	* mi-cmds.c (mi_lookup): Delete dead code.
	(build_table): Call  internal_error instead of error.
	(build_table): Send trace output to gdb_stdlog.

1999-10-01  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_execute_async_cli_command): Don't do the cleanups
 	if target_executing is null.

1999-09-28  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (async_p): Change var name to event_loop_p.

Mon Sep 27 15:11:00 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_execute_async_cli_command, mi_execute_command):
 	Replace target_has_async with function target_can_async_p.

Sun Sep 26 00:12:52 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_cmd_target_select_continuation): Delete function.
	(mi_cmd_target_select): Simplify.  target-connect is guarenteed to
 	be synchronous.

Sun Sep 26 00:12:52 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmds.h (mi_cmd_ftype): Replace mi_impl_ftype.
	(enum mi_cmd_result): Define.
	* mi-cmds.c (struct mi_cmd): Update.
	(mi_lookup): Update.
	* mi-main.c (mi_cmd_execute): Update.

	* mi-main.c (mi_cmd_gdb_exit, mi_cmd_exec_run, mi_cmd_exec_next,
 	mi_cmd_exec_step, mi_cmd_target_select, mi_cmd_exec_continue,
 	mi_cmd_exec_return, mi_cmd_exec_finish, mi_cmd_disassemble,
 	mi_cmd_var_create, mi_cmd_var_delete, mi_cmd_var_set_format,
 	mi_cmd_var_show_format, mi_cmd_var_info_num_children,
 	mi_cmd_var_list_children, mi_cmd_var_info_type,
 	mi_cmd_var_info_expression, mi_cmd_var_show_attributes,
 	mi_cmd_var_evaluate_expression, mi_cmd_var_update): Update.
  	Return MI_CMD_DONE.

1999-09-22  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_cmd_var_create): Use paddr() to format address
	on trace output.

1999-09-21  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_cmd_var_create): Test for varobjdebug before
	printing trace and send it to gdb_stdlog.

Mon Sep 20 13:41:04 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* Makefile.in (mi-out.o): Add dependency list.
	* mi-out.c: Include "mi-out.h".

1999-09-18  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (_initialize_mi_main): Events on stadin are now
 	handled by stdin_event_handler.

1999-09-17  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-cmds.c (mi_cmds): Add var-* commands.

1999-09-17  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_cmd_var_create, mi_cmd_var_delete,
	mi_cmd_var_set_format, mi_cmd_var_show_format,
	mi_cmd_var_info_num_children, mi_cmd_var_list_children,
	mi_cmd_var_info_type, mi_cmd_var_info_expression,
	mi_cmd_var_show_attributes, mi_cmd_var_evaluate_expression,
	mi_cmd_var_assign, mi_cmd_var_update, varobj_update_one,
	which_var, next_arg): New functions.  Implement the -var-*
	commands.
	* mi-cmds.h: Add prototypes for the above.

1999-09-14  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-cmds.c (mi_cmds): Add detach command.

1999-09-09  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-cmds.c (lookup_table): Fix typo.

1999-09-09  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-cmds.c (mi_cmds): Fix typo and missing command.

1999-09-09  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c: Properly align function prototypes.
	(mi_cmd_target_select): Proper check for NULL value.

1999-09-09  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_execute_async_cli_command): Fix for native targets
	that do not have async yet.

1999-09-01  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_disassemble): Remove unused var.
	(gdb_do_disassemble): Ditto.

1999-08-30  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c: Replace all the occurrences of 'asynch' in variable
 	or function names with 'async' to make it consistent with the rest
 	of gdb.

Mon Aug 30 18:16:39 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c: #include <ctype.h> for isspace().

1999-08-27  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (gdb_do_disassemble): This function returns void, not
 	int.

1999-08-26  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_disassemble): Don't use atoi() on the high
 	address string, just treat it same as address low.
	(gdb_do_disassemble): Parse high_address string before seeing if
 	it is zero.

1999-08-25  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_disassemble): New function to produce
 	disassembly output for mi.
	(gdb_dis_asm_read_memory): New function. Read the disassembly from
 	the executable file, instead of target memory.
	(compare_lines): New function. Compare order of disassembly lines.
	(gdb_do_disassemble): New function. Do the real job of getting the
 	assembly code out.

	* mi-cmds.c (mi_cmds): Do data-disassemble mi command via the
 	mi_cmd_disassemble function.

	* mi-cmds.h: Export new function mi_cmd_disassemble.

Wed Aug 25 15:58:31 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_command_loop): Remove references to ui-hooks.

1999-08-21  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_execute_asynch_cli_command): Fix the incorrect
	usage of strcat(): allocate enough space for the string.

1999-08-13  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	From Christopher Faylor <cgf@@cygnus.com>
	* mi-main.c (mi_execute_command): Make sure we flush all the
 	output after each command.

1999-08-10  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (_initialize_mi_main): Remove casting in call to
 	add_file_handler.

Sun Aug  8 17:20:57 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_cmd_target_select, mi_execute_asynch_cli_command):
 	Replace call to fatal with call to internal_error.

1999-07-26  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_cmd_execute): Add return code.
	(mi_execute_command): Make appropriate changes when calling the
	function mentioned above.
	(mi_cmd_gdb_exit, mi_cmd_target_select,
	mi_cmd_target_select_continuation, mi_execute_command,
	mi_exec_asynch_cli_cmd, mi_exec_asynch_cli_cmd_continuation):
	Print token, prefix, class and output (if any) in one single group
	of statements.
	(mi_execute_command, mi_cmd_execute): Fix error prefix.
	(mi_cmd_execute): Use exec cleanup for token.
	* mi-out.c (mi_out_rewind): New function.
	* mi-out.h: Prototype for the above.

1999-07-16  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_cmd_gdb_exit): Use buffer for exit message.
	(mi_cmd_execute): Route error messages to correct file.
	(mi_execute_asynch_cli_command): Insert line feed after running
	message.

1999-07-16  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-out.h (mi_out_buffered): Add extern declaration.
	* mi-out.c (mi_out_buffered): New function. Insert a string at the
	current buffer position.
	* mi-main.c (mi_cmd_target_select, mi_execute_command,
	mi_cmd_execute, mi_execute_asynch_cli_command): Use the above
	function instead of printing to raw_stdout.
	(mi_cmd_target_select, mi_cmd_target_select_continuation,
	mi_execute_command, mi_cmd_execute, mi_execute_cli_command,
	mi_exec_asynch_cli_cmd_continuation): Fix handling of token and
	prefix.
	(mi_execute_cli_command): Remove parameter no longer needed.

1999-07-15  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c (mi_cmd_target_select_continuation): Print the numeric
 	token when we are connected.
	(mi_execute_command): Don't print the token now, do it later.
	(mi_execute_cli_command): Add a new parameter for the numeric
 	token.  Print the token, the prefix and the class after the
 	command has executed, not before.
	(mi_execute_asynch_cli_command): Don't print an extra blank line.

1999-07-15  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_gdb_exit): Add \n at the end.

1999-07-15  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_cmd_execute): New function. Dispatch a mi operation.
	(mi_execute_command): Use the above.

1999-07-15  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c: Fix identation.

1999-07-15  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* mi-main.c: Include target.h and inferior.h.
	(mi_cmd_target_select): New function to execute the target-select
 	mi operation.
	(mi_cmd_target_select_continuation): New function. Continuation
 	for the target-select operation.
	(mi_execute_command): In case of an MI command which requires
 	asynchronous execution, do not try to display the result now. If
 	the execution has to look synchronous don't display the "(gdb)"
 	prompt.
	(mi_execute_asynch_cli_command): Invoke real asynchronous
 	commands, set up exec_cleanups, and continuations.
	(mi_exec_asynch_cli_cmd_continuation): New function. Continuation
 	for all the MI execution commands except 'target-select'.
	(mi_execute_command): Handle null commands by exiting gdb, instead
 	of core dumping.

	* mi-cmds.c (mi_cmds): Hook up -target-select operation to new mi
 	function.

	* mi-cmds.h (mi_cmd_target_select): Add extern declaration.

Thu Jul 15 10:31:39 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (struct mi_console_file): Add field ``prefix''.
	(mi_console_file_new): Add argument prefix.  Initialize prefix
 	field.
	(mi_console_file_flush): Use ``prefix'' instead of "~" as the
 	prefix string.
	(mi_command_loop): Update stream output prefixes. gdb_stdout ==
 	"~", gdb_stderr / gdb_stdlog == "&", gdb_stdtarg == "@@".

1999-07-13  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (ui_out_data): New field first_header. Fix output when
	no breakpoints are found.
	(mi_table_begin, mi_table_body, mi_table_header): Test for
	first_header.
	(mi_table_end): Test for supress_field_separator.
	(mi_message): Remove messages from MI output.

1999-06-30  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-cmds.c (mi_cmds[]): Delete gdb-cli operation.
	* mi-main.c (parse): Remove ifdefs for cli commands parsing.
	(mi-execute-command): Ditto.

Mon Jun 28 13:06:52 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-out.h: New file.
	(mi_out_new, mi_out_put): Move mi specific delcarations to here.
	* ui-out.h: From here.

	* mi-main.c: Include "mi-out.h".

1999-06-25  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* top.c (print_gdb_version): Add the word HEADLESS when output
	follows headless format.
	(print_command_lines): Fix typo.

1999-06-25  Elena Zannoni  <ezannoni@@kwikemart.cygnus.com>

	* event-loop.h: Export input_fd.  
	* mi-main.c (mi_command_loop): Use the event loop if running
 	asynchronously.
	(mi_execute_command_wrapper): New function.
	(_initialize_mi-main): Set things up for running asynchronously.

1999-06-18  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

        * mi-cmds.c (mi_lookup): Deleted.
        (lookup_table): New function. Replaces old mi_lookup() for local
        use.
        (mi_lookup): New function. External interface for command table
        searchs.
        (build_table): New definition.
        (mi_cmds[]): Add several command implementations and the gdb-cli
        special operation.
        (mi_cmd_execute): Deleted.
        * mi-cmds.h: Add type definition for command implementation
        function pointers, add declaration for new implementation
        functions and a declaration for mi_lookup().
        * mi-main.c (mi_execute_asynch_cli_command): New
        function. Captures code that was repeated for all asynch
        operations.
        (mi_cmd_exec_*): Use the above new function.
        (mi_gdb_cmd_exit): Fix the output, printing something appropriate.
        (mi_cmd_exec_finish): New operation implementation function.
        (mi_cmd_exec_return): Ditto.
        (parse): Prepare to remove cli commands.
        (mi_execute_command): Fix the output and change the way mi-cmds is
        used.

1999-06-18  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

        * mi-out.c (mi_table_begin): Add missing field separator call.

Thu Jun 17 21:05:40 1999  Fernando Nasser  <fnasser@@tofu.to.cygnus.com>

	* breakpoint.c (breakpoint_1): Remove space in breakpoint table
	id.
	(mention): Use ui_out for last new line (forgotten).

1999-06-16  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c (mi_console_file_flush): Prevent prefix printing when
	buffer empty; change prefix to '~'.
	(mi_cmd_exec_*): Prefix normal output with '^' instead of
	','; remove unwanted new lines before "stopped".

1999-06-16  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-cmds.c (struct mi_cmds): Updated entries for -exec-continue
	and exec-next operations.
	(mi_cmd_execute): New text for error messages.
	* mi-cmds.h: Add declaration for mi_cmd_exec_next and
	mi_cmd_exec_continue.
	* mi-main.c (mi_cmd_exec_next): New function. Implements exec-next
	operation.
	(mi_cmd_exec_continue): New function. Implements exec-continue
	operation.
	(mi_execute_comand): Add missing space to prompt.
	(mi_cmd_exec_run): Ditto.
	(mi_cmd_exec_step): Ditto.
	* mi-out.c (mi_out_new): Add flags argument to ui_out_new call.
	(ui_list_end): Reset supress_field_separator flag.

Sat Jun 12 11:49:10 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmds.h. mi-cmds.c (exec step): Command implemented by
 	mi_cmd_exec_step instead of cli call.
	* mi-main.c (mi_cmd_exec_step): New function.

	* mi-cmds.h. mi-cmds.c (exec run): Command implemented by
 	mi_cmd_exec_run instead of cli call.
	* mi-main.c (mi_cmd_exec_run): New function.

	* mi-cmds.h. mi-cmds.c (gdb exit): Command implemented by
 	mi_cmd_gdb_exit instead of quit_force.
	* mi-main.c (mi_cmd_gdb_exit): New function.

Sat Jun 12 11:33:23 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_command_loop): Pass mi_input to
 	simplified_command_loop.
	(mi_input): New function.  Calls gdb_readline with no prompt.

Sat Jun 12 11:19:02 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_console_file_fputs): Re-implement.  Use a buffer
 	to accumulate output.

	* mi-main.c (struct mi_console_file): Add a buffer.
	(mi_console_file_new): Create a buffer.
	(mi_console_file_flush): New function.

Sat Jun 12 10:59:39 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-cmds.h (raw_stdout): Declare.  Will be moved later.
	* mi-cmds.c (mi_cmd_execute): Send error messages to RAW stdout.
	(mi_cmds): Sort by class.

	* mi-main.c (raw_stdout): Make global.
	* mi-main.c: Remove #ifdef UI_OUT.  File assumes UI_OUT is
 	present.
	* mi-main.c: Include "gdb_string.h".
	(mi_out_put): Delete declaration.

1999-06-11  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-main.c: Add pre-processor test for UI_OUT.
	(mi_execute_command): Add pre-processor test for UI_OUT.

Fri Jun 11 23:11:41 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (raw_stdout): New variable.
	(mi_execute_command): Write mi-out direct to raw_stdout.
	(mi_command_loop): Create raw_stdout. Attach gdb_stdout to the
 	console.
	(mi_console_file_fputs, mi_console_file_delete,
 	mi_console_file_new): New functions.
	(struct mi_console_file): Declare.

Fri Jun 11 18:34:33 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c (mi_execute_command): Call mi_out_put to display the
 	result.
	* mi-out.c (mi_out_put): New function.
	* ui-out.h (mi_out_put): Add declare.  Will move later.
	* Makefile.in (mi-cmds.o, mi-main.o): Add dependency on ui-out.h.

	* mi-out.c (mi_field_string, mi_field_fmt, mi_message, mi_flush,
 	out_field_fmt, list_open, list_close): Replace gdb_stdout with
 	data->buffer.
	(field_separator, list_open, list_close): Add uiout parameter.
	(mi_table_begin, mi_table_body, mi_table_end, mi_list_begin,
 	mi_list_end, mi_field_string, mi_field_fmt, out_field_fmt,
 	out_field_fmt): Update.

	* mi-out.c (mi_out_new): Initialize supress_field_separator.
	(supress_field_separator): Move into mi-out local data object.
	(mi_table_begin, mi_list_begin, field_separator): Update.

Fri Jun 11 16:08:37 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-out.c (mi_out_new): New function, replace init_mi_out.
	* mi-main.c (mi_command_loop): Call mi_out_new().

	* ui-out.h (mi_out_new): Add declaration.  Will move later.
	(mi_ui_out_impl): Delete.

Wed Jun  9 16:42:16 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* mi-main.c: Include "ui-hooks.h".
 	(mi_init_ui, mi_command_loop): New functions.
	(_initialize_mi_main): Install ``mi'' as the interpreter when
 	selected.

Mon Jun  7 18:43:43 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	From Fernando Nasser  <fnasser@@totem.to.cygnus.com>
	* mi-cmds.c (build_table): Clean up error message.
	* mi-cmds.c (mi_cmd_execute), mi-main.c (mi_execute_command): Only
 	print debug information when mi_debug_p.
	* mi-cmds.h (mi_debug_p), mi-main.c: Global, control debug messages.
	
Thu Jun  3 00:44:52 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

  	From Fernando Nasser  <fnasser@@totem.to.cygnus.com>:
	* mi-cmds.c: Add CLI definitions for "exec-arguments",
 	"exec-next", "gdb-exit", "break-list", "break-info", "exec-step"
 	and "stack-list-frames" to mi_cmds.
	(struct mi_command): Add ``from_tty'' argument to func.
	* mi-cmds.h (quit_force): Declare.

1999-05-31  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-out.c (mi_table_end): Remove unwanted "\n".

Thu May 27 14:59:06 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* top.c: Include "ui-hooks.h".
	(call_interp_loop): Tempoary.  Pass mi_execute_command to
 	simplified_command_loop.  Initialize gdb_stdout & gdb_stderr to
 	stdio gdb_file streams.  Force all hooks to null.

	* mi-cmds.h, mi-main.c, mi-cmds.c: New files.
	* Makefile.in (SFILES): Add mi-main.c, mi-cmds.c
	(COMMON_OBS): Add mi-main.o, mi-cmds.o.
	(mi_cmds_h): Define.

Wed May 26 12:39:49 1999  Andrew Cagney  <cagney@@b1.cygnus.com>

	* top.c (call_interp_loop): Hack.  Add extern declaration for
 	mi_ui_out_impl.

1999-05-25  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-out.c: New table syntax.

Mon May 24 16:16:29 1999  Andrew Cagney  <cagney@@amy.cygnus.com>

	mi-out.c (_initialize_mi_out): Add external declaration.

1999-05-21  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-out.c (mi_table_begin): Added missing parameter.

1999-05-21  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-out.c: Changed table markers and added table id.

1999-05-21  Fernando Nasser  <fnasser@@totem.to.cygnus.com>

	* mi-out.c: New file. Implements low-level ui-out primitives for
	CLI-based interaction.


Local Variables:
mode: change-log
left-margin: 8
fill-column: 74
version-control: never
End:
@


1.124
log
@2003-11-06  Andrew Cagney  <cagney@@redhat.com>

	* valops.c (destructor_name_p): Replace STREQN with strncmp.
	* top.c (command_line_input): Ditto.
	* objc-exp.y (yylex): Ditto.
	* minsyms.c (prim_record_minimal_symbol_and_info): Ditto.
	* jv-exp.y (yylex): Ditto.
	* f-exp.y (yylex): Ditto.
	* event-top.c (command_line_handler): Ditto.
	* environ.c (get_in_environ): Ditto.
	(set_in_environ): Ditto.
	* dwarfread.c (handle_producer): Ditto.
	* dbxread.c (process_one_symbol): Ditto.
	* c-typeprint.c (c_type_print_base): Ditto.
	* c-exp.y (yylex): Ditto.

2003-11-06  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmd-var.c (mi_cmd_var_set_format): Replace STREQN with
	strncmp.
@
text
@@


1.123
log
@Index: mi/ChangeLog
2003-10-24  Andrew Cagney  <cagney@@redhat.com>

	* tui-out.c: Fix "fortunatly"[sic].

Index: doc/ChangeLog
2003-10-24  Andrew Cagney  <cagney@@redhat.com>

	* annotate.texinfo: Fix "fortunatly"[sic].

2003-10-24  Andrew Cagney  <cagney@@redhat.com>

	* osabi.c (gdbarch_init_osabi): Fix typos, and "fortunatly"[sic].
	* PROBLEMS, arch-utils.c, cli-out.c, command.h: Ditto.
	* complaints.c, cris-tdep.c, disasm.c, dwarf2-frame.c: Ditto.
	* frame.c, frame.h, infcall.c, infcmd.c, infrun.c: Ditto.
	* kod.c, mips-tdep.c, regcache.c, regcache.h, remote.c: Ditto.
@
text
@d1 5
@


1.122
log
@2003-10-02  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh (DEPRECATED_REGISTER_RAW_SIZE): Rename
	REGISTER_RAW_SIZE.
	* gdbarch.h, gdbarch.c: Re-generate.
	* aix-thread.c, alpha-tdep.h, arm-tdep.c, core-sol2.c: Update.
	* cris-tdep.c, dve3900-rom.c, findvar.c, frame.c: Update.
	* hppa-tdep.c, hppab-nat.c, hppah-nat.c, hppam3-nat.c: Update.
	* hpux-thread.c, i386gnu-nat.c, ia64-aix-nat.c: Update.
	* ia64-linux-nat.c, ia64-tdep.c, infcmd.c, infptrace.c: Update.
	* infrun.c, irix5-nat.c, lynx-nat.c, mips-linux-tdep.c: Update.
	* mips-nat.c, mips-tdep.c, mipsv4-nat.c, mn10300-tdep.c: Update.
	* monitor.c, ns32k-tdep.c, ppc-linux-nat.c, regcache.c: Update.
	* remote-e7000.c, remote-mips.c, remote-sim.c: Update.
	* remote-vxmips.c, remote-vxsparc.c, remote.c: Update.
	* rom68k-rom.c, rs6000-nat.c, rs6000-tdep.c, s390-tdep.c: Update.
	* sh64-tdep.c, sparc-nat.c, sparc-tdep.c, stack.c: Update.
	* target.c, tracepoint.c, v850-tdep.c, v850ice.c, valops.c: Update.
	* vax-tdep.c, vax-tdep.h, x86-64-tdep.c, xstormy16-tdep.c: Update.
	* config/m68k/tm-delta68.h, config/m68k/tm-vx68.h: Update.
	* config/sparc/tm-sparc.h, config/sparc/tm-sparclynx.h: Update.

2003-10-02  Andrew Cagney  <cagney@@redhat.com>

	* gdbint.texinfo (Target Architecture Definition): Rename
	REGISTER_RAW_SIZE to DEPRECATED_REGISTER_RAW_SIZE.
	* gdb.texinfo (Packets, Stop Reply Packets): Ditto.
	* gdbint.texinfo (Target Architecture Definition): Rename

2003-10-02  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_RAW_SIZE to
	DEPRECATED_REGISTER_RAW_SIZE.
@
text
@d1 4
@


1.121
log
@2003-09-30  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_VIRTUAL_SIZE to
	DEPRECATED_REGISTER_VIRTUAL_SIZE.

2003-09-30  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh (DEPRECATED_REGISTER_VIRTUAL_SIZE): Rename
	REGISTER_VIRTUAL_SIZE.
	* gdbarch.h, gdbarch.c: Regenerate.
	* vax-tdep.h, sparc-tdep.c, regcache.h: Update.
	* regcache.c, mn10300-tdep.c, mips-tdep.c: Update.
	* infcmd.c, frame.c, findvar.c, cris-tdep.c: Update.

2003-09-30  Andrew Cagney  <cagney@@redhat.com>

	* gdbint.texinfo (Target Architecture Definition): Rename
	REGISTER_VIRTUAL_SIZE to DEPRECATED_REGISTER_VIRTUAL_SIZE.
	(Target Architecture Definition):
@
text
@d1 5
d13 1
a13 1
	* mi/mi-main.c: Rename REGISTER_BYTE to DEPRECATED_REGISTER_BYTE.
@


1.120
log
@2003-09-20  Andrew Cagney  <cagney@@redhat.com>

	* cli/cli-script.c: Remove "register" attributes.
	* config/pa/tm-hppa.h: Ditto.
	* cli/cli-decode.c: Ditto.
	* cli/cli-cmds.c: Ditto.
@
text
@d1 1
a1 1
2003-09-20  Andrew Cagney  <cagney@@redhat.com>
d3 2
a4 1
	* mi-main.c (get_register): 
@


1.119
log
@2003-09-17  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh (DEPRECATED_REGISTER_BYTE): Rename REGISTER_BYTE.
	* gdbarch.h, gdbarch.c: Regenerate.
	* arm-linux-tdep.c, core-sol2.c, cris-tdep.c: Update.
	* d10v-tdep.c, frame.c: Update.
	* hppa-tdep.c, hppab-nat.c, hppah-nat.c, hppam3-nat.c: Update.
	* hpux-thread.c, i386gnu-nat.c, ia64-aix-nat.c: Update.
	* ia64-linux-nat.c, irix5-nat.c, lynx-nat.c, m68knbsd-nat.c: Update.
	* mcore-tdep.c, mips-linux-tdep.c, mips-tdep.c: Update.
	* mipsv4-nat.c, mn10300-tdep.c, ns32k-tdep.c: Update.
	* ns32knbsd-nat.c, ppc-bdm.c, regcache.c, remote-sds.c: Update.
	* remote-vx68.c, remote-vxmips.c, remote-vxsparc.c: Update.
	* remote.c, rs6000-tdep.c, s390-tdep.c, sh64-tdep.c: Update.
	* sparc-nat.c, sparc-tdep.c, sun3-nat.c, v850-tdep.c: Update.
	* v850ice.c, vax-tdep.c, xstormy16-tdep.c: Update.
	* config/m68k/tm-cisco.h, config/m68k/tm-delta68.h: Update.
	* config/pa/nm-hppah.h: Update.

2003-09-17  Andrew Cagney  <cagney@@redhat.com>

	* mi/mi-main.c: Rename REGISTER_BYTE to DEPRECATED_REGISTER_BYTE.
@
text
@d1 4
@


1.118
log
@2003-09-10  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): Don't use
	DEPRECATED_REGISTER_BYTES because some architecture don't set it
	and its default is 0.
@
text
@d1 4
@


1.118.2.1
log
@merge mainline changes into branch
@
text
@@


1.117
log
@2003-08-08  Andrew Cagney  <cagney@@redhat.com>

	* interps.c (interp_set): Check for a NULL "old_interp".

Index: mi/ChangeLog
2003-08-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add "mi2" and "mi3" to
	interpreters that hack around CLI.
	* mi-interp.c (mi3_command_loop): New function.
	(mi_interpreter_resume): Check for "mi3", default to "mi2".
@
text
@d1 6
@


1.116
log
@Index: ChangeLog
2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* interps.h (INTERP_MI2, INTERP_MI3): Define.

Index: doc/ChangeLog
2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* gdb.texinfo (Mode Options): Mention that "mi2" was included in
	GDB 6.0.

Index: mi/ChangeLog
2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* mi-interp.c (_initialize_mi_interp): Register "mi2" and "mi3".
	Make "mi" select "mi2".

Index: testsuite/gdb.mi/ChangeLog
2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* mi2-basics.exp: Copy base MI .exp file, set MIFLAGS to -i=mi2.
	* mi2-break.exp, mi2-cli.exp, mi2-console.exp: Ditto.
	* mi2-disassemble.exp, mi2-eval.exp, mi2-file.exp: Ditto.
	* mi2-hack-cli.exp, mi2-pthreads.exp, mi2-read-memory.exp: Ditto.
	* mi2-regs.exp, mi2-return.exp, mi2-simplerun.exp: Ditto.
	* mi2-stack.exp, mi2-stepi.exp, mi2-syn-frame.exp: Ditto.
	* mi2-until.exp, mi2-var-block.exp, mi2-var-child.exp: Ditto.
	* mi2-var-cmd.exp, mi2-var-display.exp, mi2-watch.exp: Ditto.
@
text
@d1 7
@


1.115
log
@2003-08-05  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmd-env.c (env_execute_cli_command): Use an explicit "%s %s"
	when constructing the run command.
	(mi_cmd_env_cd, mi_cmd_env_path, mi_cmd_env_dir): Simplify command
	string removing the "%s".
@
text
@d1 5
@


1.114
log
@2003-08-04  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmds.h (struct mi_cli): Define.
	(struct mi_cmd): Change type of "cli" to "struct mi_cli".
	* mi-cmds.c (mi_cmds): Update table.
	* mi-parse.c (mi_parse): Update.
	* mi-main.c (mi_execute_cli_command): Add "args_p" parameter, make
	others constant.
	(mi_cmd_execute): Update call.
	(captured_mi_execute_command): Ditto.
@
text
@d1 7
@


1.113
log
@2003-08-04  David Carlton  <carlton@@kealia.com>

	* charset.c (cached_iconv_convert): Add __FILE__ and __LINE__ args
	to internal_error call.
	* source.c (forward_search_command): Add "%s" format argument.
	(reverse_search_command): Ditto.
	* top.c (quit_confirm): Ditto.
	* cli/cli-setshow.c (do_setshow_command): Ditto.
	* cp-valprint.c (cp_print_class_method): Replace
	{f,}printf_{un,}filtered by {f,}puts_{un,}filtered.
	(cp_print_class_member): Ditto.
	* event-top.c (command_line_handler): Ditto.
	* linux-proc.c (linux_info_proc_cmd): Ditto.
	* p-typeprint.c (pascal_type_print_base): Ditto.
	* p-valprint.c (pascal_object_print_class_method): Ditto.
	(pascal_object_print_class_member): Ditto.
	* printcmd.c (print_scalar_formatted,printf_command): Ditto.
	* remote.c (remote_cisco_section_offsets): Ditto.
	* top.c (command_line_input): Ditto.
	* utils.c (vwarning,error_stream,quit): Ditto.
	* valprint.c (print_floating,print_binary_chars)
	(print_octal_chars,print_decimal_chars,print_hex_chars): Ditto.

2003-08-04  David Carlton  <carlton@@kealia.com>

	* mi-main.c (mi_error_last_message): Add "%s" second argument to
	xasprintf call.

2003-08-04  David Carlton  <carlton@@kealia.com>

	* generic/gdbtk.c (gdbtk_source_start_file): Add "%s" first
	argument to error call.
	(tk_command): Ditto.
	(view_command): Ditto.
@
text
@d1 11
@


1.112
log
@./
	* cli/cli-logging.c: New file.
	* cli-out.c (struct ui_out_data): Add original_stream.
	(cli_redirect): New function.
	(cli_ui_out_impl): Add cli_redirect.
	(cli_out_new): Initialize original_stream.
	* ui-out.c (default_ui_out_impl): Add NULL for redirect member.
	(uo_redirect, ui_out_redirect): New.
	* ui-out.h (struct ui_out_impl): Add redirect member.
	(redirect_ftype): New.
	(ui_out_redirect): Add prototype.
	* Makefile.in: Add rules for cli-logging.c.
	* NEWS: Mention "set logging".
mi/
	* mi-out.c (mi_ui_out_impl): Add NULL for redirect member.
tui/
	* tui-out.c (tui_ui_out_impl): Add NULL for redirect member.
doc/
	* gdb.texinfo (Logging output): New chapter.
@
text
@d1 5
@


1.111
log
@gdb/
        * NEWS: Mention gdbserver detach change and "disconnect" command.
        * infcmd.c (disconnect_command): New function.
        (_initialize_infcmd): Add ``disconnect'' command.
        * remote.c (remote_async_detach): Delete.
        (remote_detach): Merge remote_async_detach.
        (remote_disconnect): New.
        (init_remote_ops): Set to_disconnect.
        (init_remote_cisco_ops): Likewise.
        (init_remote_async_ops): Likewise.  Use remote_detach.
        * target.c (cleanup_target): Default to_disconnect.
        (update_current_target): Inherit to_disconnect.
        (target_disconnect, debug_to_disconnect): New functions.
        (setup_target_debug): Set to_disconnect.
        * target.h (struct target_ops): Add to_disconnect.
        (target_disconnect): Add prototype.
gdbserver/
	* linux-low.c: Move comment to linux_thread_alive where it belonged.
	(linux_detach_one_process, linux_detach): New functions.
	(linux_target_ops): Add linux_detach.
	* server.c (main): Handle 'D' packet.
	* target.h (struct target_ops): Add "detach" member.
	(detach_inferior): Define.
mi/
        * mi-cmds.c (mi_cmds): Add "-target-disconnect".
@
text
@d1 4
@


1.111.2.1
log
@./
	* cli/cli-logging.c: New file.
	* cli-out.c (struct ui_out_data): Add original_stream.
	(cli_redirect): New function.
	(cli_ui_out_impl): Add cli_redirect.
	(cli_out_new): Initialize original_stream.
	* ui-out.c (default_ui_out_impl): Add NULL for redirect member.
	(uo_redirect, ui_out_redirect): New.
	* ui-out.h (struct ui_out_impl): Add redirect member.
	(redirect_ftype): New.
	(ui_out_redirect): Add prototype.
	* Makefile.in: Add rules for cli-logging.c.
	* NEWS: Mention "set logging".
mi/
	* mi-out.c (mi_ui_out_impl): Add NULL for redirect member.
tui/
	* tui-out.c (tui_ui_out_impl): Add NULL for redirect member.
doc/
	* gdb.texinfo (Logging output): New chapter.
@
text
@a0 4
2003-07-02  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-out.c (mi_ui_out_impl): Add NULL for redirect member.

@


1.111.2.2
log
@Index: ChangeLog
2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* interps.h (INTERP_MI2, INTERP_MI3): Define.

Index: doc/ChangeLog
2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* gdb.texinfo (Mode Options): Mention that "mi2" was included in
	GDB 6.0.

Index: mi/ChangeLog
2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* mi-interp.c (_initialize_mi_interp): Register "mi2" and "mi3".
	Make "mi" select "mi2".

Index: testsuite/gdb.mi/ChangeLog
2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* mi2-basics.exp: Copy base MI .exp file, set MIFLAGS to -i=mi2.
	* mi2-break.exp, mi2-cli.exp, mi2-console.exp: Ditto.
	* mi2-disassemble.exp, mi2-eval.exp, mi2-file.exp: Ditto.
	* mi2-hack-cli.exp, mi2-pthreads.exp, mi2-read-memory.exp: Ditto.
	* mi2-regs.exp, mi2-return.exp, mi2-simplerun.exp: Ditto.
	* mi2-stack.exp, mi2-stepi.exp, mi2-syn-frame.exp: Ditto.
	* mi2-until.exp, mi2-var-block.exp, mi2-var-child.exp: Ditto.
	* mi2-var-cmd.exp, mi2-var-display.exp, mi2-watch.exp: Ditto.
@
text
@a0 5
2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* mi-interp.c (_initialize_mi_interp): Register "mi2" and "mi3".
	Make "mi" select "mi2".

@


1.111.2.3
log
@2003-08-08  Andrew Cagney  <cagney@@redhat.com>

	* interps.c (interp_set): Check for a NULL "old_interp".

Index: mi/ChangeLog
2003-08-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add "mi2" and "mi3" to
	interpreters that hack around CLI.
	* mi-interp.c (mi3_command_loop): New function.
	(mi_interpreter_resume): Check for "mi3", default to "mi2".
@
text
@a0 7
2003-08-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add "mi2" and "mi3" to
	interpreters that hack around CLI.
	* mi-interp.c (mi3_command_loop): New function.
	(mi_interpreter_resume): Check for "mi3", default to "mi2".

@


1.111.2.4
log
@2003-09-10  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): Don't use
	DEPRECATED_REGISTER_BYTES because some architecture don't set it
	and its default is 0.
@
text
@a0 6
2003-09-10  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): Don't use
	DEPRECATED_REGISTER_BYTES because some architecture don't set it
	and its default is 0.

@


1.110
log
@2003-06-11  David Carlton  <carlton@@bactrian.org>

	* dictionary.h: New.
	* dictionary.c: New.
	* block.h: Add opaque declaration for struct dictionary.
	(struct block): Add 'dict' member; delete 'hashtable', 'nsyms',
	'sym' members.
	(BLOCK_DICT): New macro.
	Delete macros BLOCK_HASHTABLE, BLOCK_NSYMS, BLOCK_SYM,
	BLOCK_BUCKETS, BLOCK_BUCKET, BLOCK_HASHTABLE_SIZE,
	BLOCK_SHOULD_SORT.
	(ALL_BLOCK_SYMBOLS): Update definition.
	* Makefile.in (SFILES): Add dictionary.c.
	(dictionary_h): New.
	(COMMON_OBS): Add dictionary.o.
	(dictionary.o): New.
	(ada-lang.o): Depend on dictionary_h.
	(buildsym.o, coffread.o, jv-lang.o, mdebugread.o, objfiles.o)
	(stack.o, symmisc.o, symtab.o, tracepoint.o, valops.o)
	(mi-cmd-stack.o): Ditto.
	(gdbtk-cmds.o): Update dependencies.
	(gdbtk-stack.o): Ditto.
	* ada-lang.c: Include dictionary.h.
	(symtab_for_sym): Update uses of ALL_BLOCK_SYMBOLS.
	(fill_in_ada_prototype, debug_print_block): Ditto.
	(ada_add_block_symbols): Update uses of ALL_BLOCK_SYMBOLS; replace
	explicit iteration by use of ALL_BLOCK_SYMBOLS.  Delete variable
	'is_sorted'.
	* mdebugread.c: Include dictionary.h.
	(struct parse_stack): Delete 'maxsyms' member.
	(parse_symbol): Update calls to new_block.  Delete calls to
	shrink_block.  Use dictionary methods.
	(psymtab_to_symtab_1): Delete calls to sort_symtab_syms.
	Update calls to new_symtab.  Don't maintain maxsyms data.
	(mylookup_symbol): Update use of ALL_BLOCK_SYMBOLS.
	(add_symbol): Just call dict_add_symbol.
	(new_symtab): Delete 'maxsyms' argument.
	(new_symtab): Update calls to new_block.
	(new_block): Delete 'maxsyms' argument; add 'function' argument.
	(shrink_block): Delete function.
	(fixup_sigtramp): Update call to new_block.  Add symbol via
	dict_add_symbol.
	* jv-lang.c: Include dictionary.h.
	(get_java_class_symtab): Set the BLOCK_DICT of the blocks
	appropriately.  Set class_symtab->free_func.  Make sure the
	blockvector is big enough to hold two blocks.
	(add_class_symtab_symbol): Use dictionary methods.
	(free_class_block): New function.
	(type_from_class): Replace explicit iteration by
	ALL_BLOCK_SYMBOLS.
	* symtab.h (struct symtab): Replace 'free_ptr' method by
	'free_func'.
	* dwarf2read.c (psymtab_to_symtab_1): Delete call to
	sort_symtab_syms.
	* dwarfread.c (psymtab_to_symtab_1): Delete call to
	sort_symtab_syms.
	* coffread.c (coff_symfile_read): Delete call to sort_symtab_syms.
	Include dictionary.h.
	(patch_opaque_types): Update use of ALL_BLOCK_SYMBOLS.
	* dbxread.c (dbx_psymtab_to_symtab_1): Delete call to
	sort_symtab_syms.
	* objfiles.c: Include dictionary.h.
	(objfile_relocate): Update use of ALL_BLOCK_SYMBOLS.
	* buildsym.c: Include dictionary.h.
	(finish_block): Use dictionary methods.
	(end_symtab): Set free_func to NULL, not free_ptr.
	* tracepoint.c: Include dictionary.h.
	(add_local_symbols): Update use of ALL_BLOCK_SYMBOLS.
	(scope_info): Ditto.
	* stack.c: Include dictionary.h.
	(print_block_frame_locals): Update use of ALL_BLOCK_SYMBOLS.
	(print_block_frame_labels, print_frame_arg_vars)
	(print_frame_args): Ditto.
	* symmisc.c (free_symtab_block): Use dictionary methods.
	(dump_symtab): Ditto.
	(free_symtab): Replace use of 'free_ptr' by 'free_func'.
	Include	dictionary.h.
	* symfile.h: Delete declarations of sort_block_syms,
	sort_symtab_syms.
	* symfile.c (sort_block_syms): Delete.
	(sort_symtab_syms): Delete.
	* symtab.c: Include dictionary.h.
	(lookup_block_symbol): Use dictionary iterators.
	(find_pc_sect_symtab): Update use of ALL_BLOCK_SYMBOLS.
	(search_symbols, make_symbol_completion_list): Ditto.
	(make_symbol_overload_list): Ditto.
	* valops.c (value_of_local): Use dict_empty.
	Include dictionary.h.

2003-06-11  David Carlton  <carlton@@bactrian.org>

	* generic/gdbtk-stack.c: Include dictionary.h.
	(gdb_block_vars): Update use of ALL_BLOCK_SYMBOLS.
	(gdb_get_blocks, gdb_get_vars_command): Ditto.
	* generic/gdbtk-cmds.c: Include dictionary.h.
	(gdb_listfuncs): Update use of ALL_BLOCK_SYMBOLS.

2003-06-11  David Carlton  <carlton@@bactrian.org>

	* mi-cmd-stack.c: Include dictionary.h.
	(list_args_or_locals): Update use of ALL_BLOCK_SYMBOLS.
@
text
@d1 4
@


1.109
log
@2003-06-11  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh (DEPRECATED_REGISTER_CONVERTIBLE): Deprecate
	REGISTER_CONVERTIBLE.
	(DEPRECATED_REGISTER_CONVERT_TO_VIRTUAL): Same.
	(DEPRECATED_REGISTER_CONVERT_TO_RAW): Same, make "from" constant.
	* gdbarch.h, gdbarch.c: Re-generate.
	* arch-utils.h (deprecated_register_convertible_not): Rename
	generic_register_convertible_not.
	* arch-utils.c (deprecated_register_convertible_not): Rename
	generic_register_convertible.
	(legacy_convert_register_p, legacy_register_to_value): Update.
	* sh-tdep.c (sh64_push_arguments): Update.
	* m68klinux-tdep.c (m68k_linux_extract_return_value): Update.
	* config/m68k/tm-delta68.h (DEPRECATED_EXTRACT_RETURN_VALUE): Update.
	* m68klinux-tdep.c (m68k_linux_store_return_value): Update.
	* config/m68k/tm-delta68.h (DEPRECATED_STORE_RETURN_VALUE): Update.
	* arch-utils.c (legacy_value_to_register): Update.
	* rs6000-tdep.c (rs6000_gdbarch_init): Update.
	(rs6000_register_convert_to_raw): Make parameter "from" const.
	* mips-tdep.c (mips_gdbarch_init): Update.
	(mips_register_convert_to_raw): Make  parameter"virt_buf" const.
	* infcmd.c (default_print_registers_info): Update.
	* ia64-tdep.c (ia64_gdbarch_init): Update.
	(ia64_register_convert_to_raw): Make parameter "from" const.
	* i386-tdep.c (i386_gdbarch_init): Update.
	(i386_register_convert_to_raw): Update.
@
text
@d1 5
@


1.108
log
@2003-06-08  Andrew Cagney  <cagney@@redhat.com>

	* acinclude.m4 (gcc_AC_CHECK_DECL, (gcc_AC_CHECK_DECL): Stolen
	from GCC's acinclude.m4.
	* configure.in: Check for getopt's delcaration.
	* aclocal.m4, config.in, configure: Re-generate.
	* main.c (error_init): Delete declaration.
	* defs.h (error_init): Declare.
	* rs6000-tdep.c (rs6000_fetch_pointer_argument): Make static.
	(rs6000_convert_from_func_ptr_addr): Make static.
	(_initialize_rs6000_tdep): Add declaration.
	* cli/cli-cmds.c (dont_repeat): Delete declaration.
	(show_commands, set_verbose, show_history): Delete declaration.
	* top.h (set_verbose): Add declaration.
	(show_history, set_history, show_commands): Add declaration.
	(do_restore_instream_cleanup): Add declaration.
	* objc-lang.c (specialcmp): Make static.
	(print_object_command): Make static.
	(find_objc_msgsend): Make static.
	(find_objc_msgcall_submethod_helper): Make static.
	(find_objc_msgcall_submethod): Make static.
	(_initialize_objc_language): Add declaration.
	(find_implementation_from_class): Make static.
	(find_implementation): Make static.
	* objc-exp.y (yylex): Delete lookup_struct_typedef declaration.
	* objc-lang.h (lookup_struct_typedef): Add declaration.
	* cli/cli-interp.c (_initialize_cli_interp): Add declaration.
	* cli/cli-script.c (clear_hook_in_cleanup): Make static.
	(do_restore_user_call_depth): Make static.
	(do_restore_instream_cleanup): Delete declaration.
	(dont_repeat): Delete declaration.
	* cli/cli-decode.c (add_abbrev_cmd): Delete function.
	* cli/cli-dump.c (_initialize_cli_dump): Add declaration.
	* reggroups.c (_initialize_reggroup): Add declaration.
	* cp-support.c (_initialize_cp_support): Add declaration.
	* cp-abi.c (_initialize_cp_abi): Add declaration.
	* hpacc-abi.c (_initialize_hpacc_abi): Add declaration.
	* gnu-v3-abi.c (gnuv3_baseclass_offset): Make static.
	(_initialize_gnu_v3_abi): Add declaration.
	* gnu-v2-abi.c (gnuv2_value_rtti_type): Make static.
	(_initialize_gnu_v2_abi): Add declaration.
	* frame-base.c (_initialize_frame_base): Add declaration.
	* doublest.c (floatformat_from_length): Make static.
	* frame-unwind.c (_initialize_frame_unwind): Add declaration.
	* frame.c (create_sentinel_frame): Make static.
	(_initialize_frame): Add declaration.
	* top.c (do_catch_errors): Make static.
	(gdb_rl_operate_and_get_next_completion): Make static.
	* typeprint.c: Include "typeprint.h".
	* sentinel-frame.c (sentinel_frame_prev_register): Make static.
	(sentinel_frame_this_id): Make static.
	* p-valprint.c (_initialize_pascal_valprint): Add declaration.
	* ui-out.c (make_cleanup_ui_out_begin_end): Delete function.
	* dwarf2-frame.c (dwarf2_frame_cache): Make static.
	* p-exp.y (push_current_type, pop_current_type): ISO C declaration.
	* dwarf2expr.h (dwarf_expr_context): ISO C declaration.
	* maint.c (maintenance_print_architecture): Make static.
	* signals/signals.c (_initialize_signals): Add declaration.
	* std-regs.c (_initialize_frame_reg): Add declaration.
	* jv-exp.y (push_variable): ISO C definition.
	(push_qualified_expression_name): Ditto.
	* memattr.c (_initialize_mem): Add declaration.
	* remote.c (remote_check_watch_resources): Make static.
	(remote_stopped_by_watchpoint): Make static.
	(remote_stopped_data_address): Make static.
	* d10v-tdep.c (nr_dmap_regs): Make static.
	(a0_regnum): Make static.
	(d10v_frame_unwind_cache): Make static.
	(d10v_frame_p): Make static.
	* osabi.c (show_osabi): Make static.
	(_initialize_gdb_osabi): Add extern declaration.
	* gdbtypes.c (make_qualified_type): Make static.
	(safe_parse_type): Make static.
	* macrocmd.c (_initialize_macrocmd): Add extern declaration.
	* macrotab.c (macro_bcache_free): Make static.
	* interps.c (interp_set_quiet): Make static.
	(interpreter_exec_cmd): Make static.
	* stack.h (select_frame_command): New file.
	* stack.c: Include "stack.h".
	(select_frame_command_wrapper): Delete function.
	(select_frame_command): Make global.
	* infcall.c: Include "infcall.h".
	* linespec.c: Include "linespec.h".
	* symfile.c (sections_overlap): Make static.
	* cp-support.h (cp_initialize_namespace): ISO C declaration.
	* charset.c (_initialize_charset): Add missing prototype.
	* regcache.c (init_legacy_regcache_descr): Make static.
	(do_regcache_xfree): Make static.
	(regcache_xfer_part): Make static.
	(_initialize_regcache): Add missing prototype.
	* breakpoint.c (parse_breakpoint_sals): Make static.
	(breakpoint_sals_to_pc): Make static.
	* interps.h (clear_interpreter_hooks): ISO C declaration.
	* Makefile.in (stack_h): Define.
	(stack.o, typeprint.o, mi-main.o): Update dependencies.
	(mi-cmd-stack.o, infcall.o, linespec.o): Update dependencies.

Index: mi/ChangeLog
2003-06-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-parse.c (_initialize_mi_parse): Delete function.
	* mi-main.c: Include "mi-main.h".
	* mi-interp.c (_initialize_mi_interp): Add declaration.
	* mi-cmd-stack.c: Include "stack.h".
	(select_frame_command_wrapper): Delete extern declaration.
	(mi_cmd_stack_select_frame): Replace select_frame_command_wrapper
	with select_frame_command.
@
text
@d1 5
@


1.107
log
@2003-05-16  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh (DEPRECATED_REGISTER_BYTES): Rename REGISTER_BYTES.
	* gdbarch.h, gdbarch.c: Re-generate.
	* arm-linux-tdep.c (arm_linux_extract_return_value): Delete reference.
	* TODO (REGISTER_BYTES): Delete reference.
	* alpha-tdep.c (alpha_gdbarch_init): Update.
	* xstormy16-tdep.c (xstormy16_gdbarch_init): Update.
	* x86-64-tdep.c (x86_64_init_abi): Update.
	* vax-tdep.c (vax_gdbarch_init): Update.
	* v850-tdep.c (v850_gdbarch_init): Update.
	* sparc-tdep.c (sparc_gdbarch_init): Update.
	* sh-tdep.c (sh_gdbarch_init): Update.
	* s390-tdep.c (s390_gdbarch_init): Update.
	* rs6000-tdep.c (rs6000_gdbarch_init): Update.
	* ns32k-tdep.c (ns32k_gdbarch_init_32082): Update.
	(ns32k_gdbarch_init_32382): Update.
	* mn10300-tdep.c (mn10300_gdbarch_init): Update.
	* mcore-tdep.c (mcore_gdbarch_init): Update.
	* m68k-tdep.c (m68k_gdbarch_init): Update.
	* m68hc11-tdep.c (m68hc11_gdbarch_init): Update.
	* ia64-tdep.c (ia64_gdbarch_init): Update.
	* i386-tdep.c (i386_gdbarch_init): Update.
	* i386-linux-tdep.c (i386_linux_init_abi): Update.
	* hppa-tdep.c (hppa_gdbarch_init): Update.
	* h8300-tdep.c (h8300_gdbarch_init): Update.
	* frv-tdep.c (frv_gdbarch_init): Update.
	* cris-tdep.c (cris_gdbarch_init): Update.
	* avr-tdep.c (avr_gdbarch_init): Update.
	* arm-tdep.c (arm_gdbarch_init): Update.
	* sparc-tdep.c (sparc_pop_frame): Update.
	* rs6000-tdep.c (rs6000_pop_frame): Update.
	* remote.c (init_remote_state): Update.
	(remote_prepare_to_store): Update.
	* remote-vx.c (vx_prepare_to_store): Update.
	* remote-sds.c (sds_fetch_registers): Update.
	(sds_prepare_to_store): Update.
	* remote-array.c: Update.
	* regcache.c (init_legacy_regcache_descr): Update.
	(init_regcache_descr): Update.
	* mips-tdep.c (mips_eabi_extract_return_value): Update.
	(mips_o64_extract_return_value): Update.
	* irix5-nat.c (fetch_core_registers): Update.
	* irix4-nat.c (fetch_core_registers): Update.
	* i386-tdep.h: Update.
	* hppa-tdep.c (pa_do_registers_info): Update.
	(pa_do_strcat_registers_info): Update.
	* cris-tdep.c (cris_register_bytes_ok): Update.
	* config/nm-gnu.h (CHILD_PREPARE_TO_STORE): Update.
	* config/sparc/tm-sparc.h (DEPRECATED_REGISTER_BYTES): Update.
	* config/sparc/nm-sun4sol2.h (CHILD_PREPARE_TO_STORE): Update.
	* config/sparc/nm-sun4os4.h (CHILD_PREPARE_TO_STORE): Update.
	* config/sparc/nm-nbsd.h (CHILD_PREPARE_TO_STORE): Update.
	* config/sparc/tm-sp64.h (DEPRECATED_REGISTER_BYTES): Update.
	* config/s390/tm-s390.h (DEPRECATED_REGISTER_BYTES): Update.
	* config/pa/tm-hppa64.h (DEPRECATED_REGISTER_BYTES): Update.
	* config/mips/tm-mips.h (DEPRECATED_REGISTER_BYTES): Update.
	* config/mips/tm-irix6.h (DEPRECATED_REGISTER_BYTES): Update.
	* config/mips/tm-irix5.h (DEPRECATED_REGISTER_BYTES): Update.
	* config/m68k/tm-sun3.h (DEPRECATED_REGISTER_BYTES): Update.
	(REGISTER_BYTES_OK): Update.
	* config/m68k/nm-sun3.h (CHILD_PREPARE_TO_STORE): Update.
	* config/ia64/tm-ia64.h (DEPRECATED_REGISTER_BYTES): Update.

Index: doc/ChangeLog
2003-05-16  Andrew Cagney  <cagney@@redhat.com>

	* gdbint.texinfo (Target Architecture Definition): Replace
	REGISTER_BYTES with DEPRECATED_REGISTER_BYTES.  Fix typo,
	DEPRECATED_REGISTER_SIZE instead of REGISTER_BYTE.

Index: mi/ChangeLog
2003-05-16  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_setup_architecture_data):
@
text
@d1 10
@


1.106
log
@2003-05-14  Elena Zannoni  <ezannoni@@redhat.com>

	* symtab.h (enum domain_enum): Rename from namespace_enum.
	(UNDEF_DOMAIN, VAR_DOMAIN, STRUCT_DOMAIN, LABEL_DOMAIN,
	VARIABLES_DOMAIN, FUNCTIONS_DOMAIN, TYPES_DOMAIN, METHODS_DOMAIN):
	Rename from UNDEF_NAMESPACE, VAR_NAMESPACE, STRUCT_NAMESPACE,
	LABEL_NAMESPACE, VARIABLES_NAMESPACE, FUNCTIONS_NAMESPACE,
	TYPES_NAMESPACE, METHODS_NAMESPACE.
	(SYMBOL_NAMESPACE): Rename to SYMBOL_DOMAIN.
	(struct symbol, struct partial_symbol): Rename field
	'namespace_enum namespace' to 'domain_enum domain'.
	(PSYMBOL_NAMESPACE): Rename to PSYMBOL_DOMAIN.
	Delete old define kludge for namespace.

	* ada-exp.y, ada-lang.c, ada-lang.h, alpha-tdep.c, arm-tdep.c,
	blockframe.c, c-exp.y, c-valprint.c, coffread.c, dbxread.c,
	dwarf2read.c, dwarfread.c, f-exp.y, gdbtypes.c, gdbtypes.h,
	gnu-v3-abi.c, hppa-tdep.c, hpread.c, jv-exp.y, jv-lang.c,
	language.c, linespec.c, m2-exp.y, m3-nat.c, mdebugread.c,
	mips-tdep.c, nlmread.c, objc-exp.y, objc-lang.c, objfiles.c,
	p-exp.y, p-valprint.c, parse.c, printcmd.c, scm-lang.c, source.c,
	stabsread.c, stack.c, symfile.c, symfile.h, symmisc.c, symtab.c,
	valops.c, values.c, xcoffread.c, xstormy16-tdep.c: Replace all
	occurrences of the above.

2003-05-12  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-mi-cmd-stack.c (list_args_or_locals): Rename VAR_NAMESPACE to
	VAR_DOMAIN.
@
text
@d1 4
@


1.105
log
@Index: gdb/ChangeLog
2003-05-11  Andrew Cagney  <cagney@@redhat.com>

	* Makefile.in (mi-symbol-cmds.o): Rename mi-cmd-symbol.
	* config/djgpp/fnchange.lst: Rename include/xtensa-isa-internal.h,
	include/xtensa-isa.h, sim/testsuite/sim/arm/misaligned1.ms,
	sim/testsuite/sim/arm/misaligned2.ms, and
	sim/testsuite/sim/arm/misaligned3.ms.
	* disasm.h (struct ui_file): Add opaque struct declaration.
	* config/pa/tm-hppa64.h (struct type, struct frame_info): Ditto.
	* frame.h (struct ui_file): Ditto.

Index: gdb/mi/ChangeLog
2003-05-11  Andrew Cagney  <cagney@@redhat.com>

	* mi-symbol-cmds.c: Rename "mi-cmd-symbol.c", avoid 8.3 problem.
@
text
@d1 5
@


1.104
log
@2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh: Delete references to MAX_REGISTER_RAW_SIZE.
	* gdbarch.h: Re-generate.
	* defs.h (MAX_REGISTER_RAW_SIZE): Delete macro.
	(legacy_max_register_raw_size): Delete declaration.
	* regcache.c (legacy_max_register_raw_size): Delete function.
	* valops.c: Replace MAX_REGISTER_RAW_SIZE with MAX_REGISTER_SIZE.
	* target.c, stack.c, sparc-tdep.c, sh-tdep.c: Update.
	* rs6000-tdep.c, rs6000-nat.c, remote.c, remote-sim.c: Update.
	* remote-rdp.c, remote-array.c, regcache.c: Update.
	* ppc-linux-nat.c, monitor.c, mn10300-tdep.c: Update.
	* mips-tdep.c, mips-linux-tdep.c, m68klinux-nat.c: Update.
	* infptrace.c, ia64-tdep.c, i386-tdep.c, frame.c: Update.
	* findvar.c, dwarf2cfi.c: Update.

Index: tui/ChangeLog
2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* tuiRegs.c: Use MAX_REGISTER_SIZE instead of
	MAX_REGISTER_RAW_SIZE.

Index: mi/ChangeLog
2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (register_changed_p): Use MAX_REGISTER_SIZE instead of
	MAX_REGISTER_RAW_SIZE.
@
text
@d1 4
@


1.103
log
@2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh: Add comments on MAX_REGISTER_SIZE.
	* gdbarch.h: Re-generate.
	* defs.h (MAX_REGISTER_VIRTUAL_SIZE): Delete macro.
	(legacy_max_register_virtual_size): Delete declaration.
	* infcmd.c (default_print_registers_info): Use MAX_REGISTER_SIZE.
	* d10v-tdep.c (d10v_print_registers_info): Ditto.
	* tracepoint.c (memrange_sortmerge): Ditto.
	* sparc-tdep.c (sparc_print_registers): Ditto.
	* regcache.c (legacy_max_register_virtual_size): Delete function.
@
text
@d3 5
@


1.102
log
@2003-05-03  Andrew Cagney  <cagney@@redhat.com>

	* gdbarch.sh (DEPRECATED_REGISTER_SIZE): Rename REGISTER_SIZE.
	(DEPRECATED_SIZEOF_CALL_DUMMY_WORDS): Rename
	SIZEOF_CALL_DUMMY_WORDS.
	(DEPRECATED_CALL_DUMMY_WORDS): Rename CALL_DUMMY_WORDS.
	(DEPRECATED_FIX_CALL_DUMMY): Rename FIX_CALL_DUMMY.
	(DEPRECATED_CALL_DUMMY_BREAKPOINT_OFFSET): Rename
	CALL_DUMMY_BREAKPOINT_OFFSET.
	(DEPRECATED_CALL_DUMMY_START_OFFSET): Rename
	CALL_DUMMY_START_OFFSET.
	(DEPRECATED_CALL_DUMMY_LENGTH): Rename CALL_DUMMY_LENGTH.
	* gdbarch.h, gdbarch.c: Re-generate.
	* alpha-tdep.c, alphafbsd-tdep.c, arm-linux-tdep.c: Update.
	* arm-tdep.c, avr-tdep.c, breakpoint.c, cris-tdep.c: Update.
	* dummy-frame.c, dummy-frame.h, frv-tdep.c, gdbarch.c: Update.
	* gdbarch.h, gdbarch.sh, h8300-tdep.c, hppa-tdep.c: Update.
	* i386-tdep.c, ia64-tdep.c, infcall.c, inferior.h: Update.
	* m68hc11-tdep.c, m68k-tdep.c, mcore-tdep.c: Update.
	* mips-tdep.c, mn10300-tdep.c, ns32k-tdep.c: Update.
	* rs6000-tdep.c, s390-tdep.c, sh-tdep.c, sol-thread.c: Update.
	* sparc-tdep.c, target.c, v850-tdep.c, valops.c: Update.
	* vax-tdep.c, x86-64-tdep.c, xstormy16-tdep.c: Update.
	* config/ia64/tm-ia64.h, config/m68k/tm-vx68.h: Update.
	* config/mips/tm-mips.h, config/pa/nm-hppah.h: Update.
	* config/pa/tm-hppa.h, config/pa/tm-hppa64.h: Update.
	* config/s390/tm-s390.h, config/sparc/tm-sp64.h: Update.
	* config/sparc/tm-sparc.h: Update.

Index: doc/ChangeLog
2003-05-03  Andrew Cagney  <cagney@@redhat.com>

	* gdbint.texinfo (Target Architecture Definition): Make
	CALL_DUMMY_WORDS, SIZEOF_CALL_DUMMY_WORDS, CALL_DUMMY_LENGTH,
	FIX_CALL_DUMMY, CALL_DUMMY_BREAKPOINT_OFFSET and
	CALL_DUMMY_BREAKPOINT_OFFSET deprecated.

Index: mi/ChangeLog
2003-05-03  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_cmd_data_write_register_values): Replace
	REGISTER_SIZE with DEPRECATED_REGISTER_SIZE.

Index: testsuite/ChangeLog
2003-05-03  Andrew Cagney  <cagney@@redhat.com>

	* gdb.base/watchpoint.exp: Rename CALL_DUMMY_BREAKPOINT_OFFSET to
	DEPRECATED_CALL_DUMMY_BREAKPOINT_OFFSET in comments.
@
text
@d1 4
@


1.101
log
@        From  Thierry Schneider  <tpschneider1@@yahoo.com>:
        * mi-cmds.h (mi_cmd_symbol_list_lines): Add declaration.
        * mi-cmds.c (mi_cmds): Add entry for new MI command.
        * mi-cmd-symbol.c (mi_cmd_symbol_list_lines): New source file
        for all symbol-related commands.
@
text
@d1 5
@


1.100
log
@I broke my first ChangeLog :), fixing it.
@
text
@d1 8
@


1.100.6.1
log
@Merge from mainline.
@
text
@a0 8
2003-05-03  J. Brobecker  <brobecker@@gnat.com>

	From  Thierry Schneider  <tpschneider1@@yahoo.com>:
	* mi-cmds.h (mi_cmd_symbol_list_lines): Add declaration.
	* mi-cmds.c (mi_cmds): Add entry for new MI command.
	* mi-cmd-symbol.c (mi_cmd_symbol_list_lines): New source file
	for all symbol-related commands.

@


1.100.6.2
log
@2003-05-18  Mark Kettenis  <kettenis@@gnu.org>

	Merge from mainline.
	* i386-tdep.h (I386_SIZEOF_GREGS, I386_SIZEOF_FREGS,
	I386_SIZEOF_XREGS): Remove defenitions.
	(IS_FP_REGNUM, IS_SSE_REGNUM): Remove definitions.
	* i386-tdep.c (i386_gdbarch_init): Don't set register_bytes,
	register_size, call_dummy_words and sizeof_call_dummy.
	* i386-linux-tdep.c (i386_linux_init_abi): Don't set register_bytes.
	* x86-64-tdep.c (x86_64_init_abi): Don't set register_bytes and
	register_size.
	(x86_64_register_bytes): Remove variable.
	(_initialize_x86_64_tdep): Remove function.

	* i386-linux-tdep.c (i386_linux_sigcontext_addr): Call read_memory
	with correct arguments.
	* config/i386/x86-64linux.mt (TDEPFILES): Add i386-linux-tdep.o.
@
text
@a0 27
2003-05-16  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): 

2003-05-12  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-mi-cmd-stack.c (list_args_or_locals): Rename VAR_NAMESPACE to
	VAR_DOMAIN.

2003-05-11  Andrew Cagney  <cagney@@redhat.com>

	* mi-symbol-cmds.c: Rename "mi-cmd-symbol.c", avoid 8.3 problem.

2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (register_changed_p): Use MAX_REGISTER_SIZE instead of
	MAX_REGISTER_RAW_SIZE.

2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use MAX_REGISTER_SIZE.

2003-05-05  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_cmd_data_write_register_values): Replace
	REGISTER_SIZE with DEPRECATED_REGISTER_SIZE.

@


1.99
log
@Index: doc/ChangeLog
2003-03-27  Andrew Cagney  <cagney@@redhat.com>

	* gdb.texinfo (GDB/MI Variable Objects): Replace @@include with
	chapter body.  Use @@smallexample instead of @@example.
	(Annotations): Ditto.
	* Makefile.in (GDB_DOC_SOURCE_INCLUDES): Remove gdbmi.texinfo and
	annotate.texi.

Index: mi/ChangeLog
2003-03-27  Andrew Cagney  <cagney@@redhat.com>

	* gdbmi.texinfo: Delete file.  Contents moved to
	../doc/gdb.texinfo.
@
text
@d1 9
@


1.98
log
@2003-03-12  Andrew Cagney  <cagney@@redhat.com>

	* frame.c (get_saved_register): Delete function.
	* xstormy16-tdep.c: Update comment.
	* regcache.h: Update comments.
	* sparc-tdep.c (sparc_init_extra_frame_info): Instead of
	get_saved_register and extract_address, use
	frame_read_unsigned_register.
	(sparc_frame_saved_pc): Ditto.
	(sparc_get_saved_register): Instead of get_saved_register, use
	frame_register.
	(sparc_pop_frame): Ditto.
	* frame.h (get_saved_register): Delete declaration.
	* findvar.c: Update comments.
	(value_of_register): Call frame_register instead of
	get_saved_register.
	(value_from_register): Ditto.
	* config/sparc/tm-sparc.h: Update comment.
	* breakpoint.c: Update comment.

Index: doc/ChangeLog
2003-03-12  Andrew Cagney  <cagney@@redhat.com>

	* gdbint.texinfo (Target Architecture Definition): Delete
	references to get_saved_register.
@
text
@d1 5
@


1.98.4.1
log
@Merge with mainline.
@
text
@a0 5
2003-03-27  Andrew Cagney  <cagney@@redhat.com>

	* gdbmi.texinfo: Delete file.  Contents moved to
	../doc/gdb.texinfo.

@


1.97
log
@Index: ChangeLog
2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* cli-out.c: Update copyright.
	(cli_out_data): Define typedef.  Use instead of ui_out_data.

Index: mi/ChangeLog
2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-out.c: Update copyright.
	(mi_out_data): Define typedef.  Use instead of ui_out_data.

Index: tui/ChangeLog
2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* tui-out.c: Update copyright.
	(tui_out_data): Define typedef.  Use instead of ui_out_data.
@
text
@d1 5
@


1.96
log
@2003-03-01  Andrew Cagney  <cagney@@redhat.com>

	* Makefile.in (ax-gdb.o): Update dependencies.
	* ax-gdb.c: Include "regcache.h".
	(gen_expr): Use register_type instead of REGISTER_VIRTUAL_TYPE.
	* findvar.c (value_of_register): Ditto.
	* infcmd.c (default_print_registers_info): Ditto.

Index: mi/ChangeLog
2003-03-01  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use register_type instead of
	REGISTER_VIRTUAL_TYPE.
@
text
@d1 5
@


1.96.4.1
log
@2003-03-16  Mark Kettenis  <kettenis@@gnu.org>

	Merge with mainline.  Tag is kettenis-i386newframe-20030316-mergepoint.
@
text
@a0 10
2003-03-12  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use frame_register instead of
	get_saved_register.

2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-out.c: Update copyright.
	(mi_out_data): Define typedef.  Use instead of ui_out_data.

@


1.95
log
@2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* symtab.h (SYMBOL_NATURAL_NAME): New macro.
	(SYMBOL_LINKAGE_NAME): Ditto.
	(SYMBOL_PRINT_NAME): Use SYMBOL_NATURAL_NAME and
	SYMBOL_LINKAGE_NAME.
	(struct general_symbol_info): Expand comment.
	(DEPRECATED_SYMBOL_NAME): Rename from SYMBOL_NAME.
	(SYMBOL_MATCHES_NAME): Use DEPRECATED_SYMBOL_NAME.
	(SYMBOL_MATCHES_REGEXP): Ditto.
	* symtab.c (symbol_natural_name): New function.
	* objfiles.h: Replace all uses of SYMBOL_NAME by
	DEPRECATED_SYMBOL_NAME.
	* xcoffread.c, valops.c, typeprint.c, tracepoint.c: Ditto.
	* symtab.c, symmisc.c, symfile.c, stack.c, stabsread.c: Ditto.
	* somsolib.c, sol-thread.c, rs6000-tdep.c, p-valprint.c: Ditto.
	* printcmd.c, objfiles.c, objc-lang.c, mipsread.c: Ditto.
	* minsyms.c, mdebugread.c, linespec.c, jv-lang.c: Ditto.
	* i386-tdep.c, i386-linux-tdep.c, hpread.c, hppa-tdep.c: Ditto.
	* gnu-v2-abi.c, f-valprint.c, findvar.c, expprint.c: Ditto.
	* dwarfread.c, dwarf2read.c, dbxread.c, c-valprint.c: Ditto.
	* cp-valprint.c, coffread.c, buildsym.c, breakpoint.c: Ditto.
	* blockframe.c, ax-gdb.c, arm-linux-tdep.c, ada-lang.c: Ditto.
	* ada-exp.y: Ditto.
	* ada-exp.y: Update copyright.
	* sol-thread.c, mipsread.c, jv-lang.c, f-valprint.c: Ditto.
	* cp-valprint.c: Ditto.

2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* generic/gdbtk.h: Replace all instances of SYMBOL_NAME by
	DEPRECATED_SYMBOL_NAME.
	* generic/gdbtk-stack.c, generic/gdbtk-cmds.c: Ditto.
	* generic/gdbtk-stack.c, generic/gdbtk-cmds.c: Update copyright.

2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: Replace all instances of SYMBOL_NAME with
	DEPRECATED_SYMBOL_NAME.  Update copyright.
@
text
@d1 5
@


1.94
log
@	* mi-cmd-stack.c (list_args_or_locals): Handle LOC_COMPUTED and
	LOC_COMPUTED_ARG.
@
text
@d1 5
@


1.93
log
@2003-02-19  David Carlton  <carlton@@math.stanford.edu>

	* Makefile.in (SFILES): Add block.c.
	(block_h): New.
	(COMMON_OBS): Add block.o.
	(block.o): New.
	(x86-64-tdep.o): Add $(block_h).
	(values.o, valops.o, tracepoint.o, symtab.o, symmisc.o, symfile.o)
	(stack.o, printcmd.o, p-exp.tab.o, parse.o, objfiles.o)
	(objc-exp.tab.o, objc-lang.o, nlmread.o, mips-tdep.o, mdebugread.o)
	(m2-exp.tab.o, linespec.o, jv-lang.o, jv-exp.tab.o, infcmd.o)
	(f-valprint.o, findvar.o, f-exp.tab.o, expprint.o, coffread.o)
	(c-exp.tab.o, buildsym.o, breakpoint.o, blockframe.o, ax-gdb.o)
	(alpha-tdep.o, ada-lang.o, ada-exp.tab.o, mi-cmd-stack.o): Ditto.
	* value.h: Add opaque declaration for struct block.
	* parser-defs.h, objc-lang.h, buildsym.h, breakpoint.h: Ditto.
	* ada-lang.h: Ditto.
	* x86-64-tdep.c: #include "block.h"
	* values.c, valops.c, tracepoint.c, symtab.c, symmisc.c: Ditto.
	* symfile.c, stack.c, printcmd.c, p-exp.y, parse.c: Ditto.
	* objfiles.c, objc-exp.y, objc-lang.c, nlmread.c: Ditto.
	* mips-tdep.c, mdebugread.c, m2-exp.y, linespec.c: Ditto.
	* jv-lang.c, jv-exp.y, infcmd.c, f-valprint.c: Ditto.
	* findvar.c, f-exp.y, expprint.c, coffread.c, c-exp.y: Ditto.
	* buildsym.c, breakpoint.c, blockframe.c, ax-gdb.c: Ditto.
	* alpha-tdep.c, ada-lang.c, ada-exp.y: Ditto.
	* blockframe.c (blockvector_for_pc_sect): Move to "block.c".
	(blockvector_for_pc, block_for_pc_sect, block_for_pc): Ditto.
	* symtab.c (block_function): Ditto.
	(contained_in): Ditto.
	* frame.h: Move block_for_pc and block_for_pc_sect declarations to
	block.h.  Add opaque declaration for struct block.
	* symtab.h: Move block_function and contained_in declarations to
	block.h.  Add opaque declarations for struct block, struct
	blockvector.
	(struct block): Move to block.h.
	(struct blockvector): Ditto.
	(BLOCK_START, BLOCK_END, BLOCK_FUNCTION, BLOCK_SUPERBLOCK)
	(BLOCK_GCC_COMPILED, BLOCK_HASHTABLE, BLOCK_NSYMS, BLOCK_SYM)
	(BLOCK_BUCKETS, BLOCK_BUCKET, BLOCK_HASHTABLE_SIZE)
	(ALL_BLOCK_SYMBOLS, BLOCK_SHOULD_SORT, BLOCKVECTOR_NBLOCKS)
	(BLOCKVECTOR_BLOCK, GLOBAL_BLOCK, STATIC_BLOCK, FIRST_LOCAL_BLOCK):
	Ditto.
	* block.c: New file.
	* block.h: New file.

2003-02-19  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: #include "block.h"
@
text
@d1 5
@


1.92
log
@2003-02-09  Andrew Cagney  <ac131313@@redhat.com>

	* interps.c (clear_interpreter_hooks): Convert function definition
	to ISO C.

Index: mi/ChangeLog
2003-02-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-interp.c (mi_remove_notify_hooks): Convert function
	definition to ISO C.
@
text
@d1 4
@


1.91
log
@2003-02-06  Andrew Cagney  <ac131313@@redhat.com>

	* linux-proc.c: Include "gdb_stat.h" instead of <sys/stat.h>.
	* cp-valprint.c (cp_print_value_fields): Eliminate STREQN.
	* jv-typeprint.c (java_type_print_base): Ditto.
	* typeprint.c (typedef_print): Eliminate STREQ.
	* cli/cli-script.c (define_command, define_command): Ditto.
	* main.c (captured_main): Ditto.
	* values.c (lookup_internalvar): Ditto.
	* utils.c (safe_strerror, parse_escape): Eliminate assignment
	within `if' conditional.
	* linespec.c (decode_line_2): Ditto.
	* cli/cli-dump.c (bfd_openr_with_cleanup): Ditto.
	(bfd_openw_with_cleanup): Ditto.

Index: mi/ChangeLog
2003-02-06  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Include "gdb_stat.h" instead of <sys/stat.h>.
@
text
@d1 5
@


1.90
log
@2003-02-05  Jim Ingham <jingham@@apple.com>
            Keith Seitz  <keiths@@redhat.com>
            Elena Zannoni  <ezannoni@@redhat.com>
            Andrew Cagney  <ac131313@@redhat.com>

	* Makefile.in (SUBDIR_CLI_OBS): Add "cli-interp.o".
	(SUBDIR_CLI_SRCS): Add "cli/cli-interp.c".
	(SUBDIR_MI_OBS): Add "mi-interp.o".
	(SUBDIR_MI_SRCS): Add "mi/mi-interp.c".
	(SFILES): Add "interps.c".
	(COMMON_OBS): Add "interps.o".
	(interps_h, mi_main_h): Define.
	(interps.o, cli-interp.o, mi-interp.o): Add dependencies.
	(mi-main.o, main.o, event-top.o): Update dependencies.
	* cli/cli-interp.c: New file.
	* interps.h, interps.c: New files.
	* top.c: (gdb_init): Don't install the default interpreter, handed
	by captured_main.
	* main.c: Include "interps.h".
	(interpreter_p): Note that it should malloc'ed.
	(captured_command_loop): Call current_interp_command_loop.
	(captured_main): Initialize interpreter_p to INTERP_CONSOLE.  Use
	xfree and xstrdup when updating interpreter_p.  Install the
	default interpreter.  Add hack to stop mi1's copyright notice
	being encoded.
	* event-top.h (gdb_setup_readline): Declare.
	(gdb_disable_readline): Declare.
	* event-top.c: Include "interps.h".
	(display_gdb_prompt): Call current_interp_display_prompt_p.
	(gdb_setup_readline): Initialize gdb_stdout, gdb_stderr,
	gdb_stdlog, and gdb_stdtarg.
	(_initialize_event_loop): Don't call gdb_setup_readline.
	* cli-out.c (cli_out_set_stream): New function.
	* cli-out.h (cli_out_set_stream): Declare.
@
text
@d1 4
@


1.89
log
@2003-02-04  Andrew Cagney  <ac131313@@redhat.com>

	From Keith Seitz <keiths@@redhat.com>:
	* gdbmi.texinfo (GDB/MI Miscellaneous Commands): Document the
	interpreter-exec command.
@
text
@d1 30
a175 1

@


1.88
log
@2003-02-02  Andrew Cagney  <ac131313@@redhat.com>

	From 2002-11-10 Jason Molenda (jason-cl@@molenda.com):
        * mi-cmd-var.c (mi_cmd_var_list_children): CHILDREN field is
        now a list; still a tuple when in mi1.
        * gdbmi.texinfo: Update var-list-children example.

2003-02-02  Andrew Cagney  <ac131313@@redhat.com>

	2002-11-10 Jason Molenda (jason-cl@@molenda.com):
        * gdb.mi/mi-var-child.exp: -var-list-children's CHILDREN field is
        now a list, not a tuple.
        * gdb.mi/mi-var-display.exp: Ditto.
        * gdb.mi/gdb792.exp: Ditto.
@
text
@d1 6
@


1.88.2.1
log
@Merge kseitz_interps-20020528-branch.
@
text
@a0 213
2002-11-05  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-stack.c (mi_cmd_stack_select_frame): Remove stray statement.
        Remove include of gdb-events.h.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi.h: Clean up interface, removing unnecessarily exported
	functions and data structures.
	* mi-events.c (mi_event_handlers): Move here...
	* mi-interps.c: .. from here.
	Include gdb_string.h.
	
2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c (mi_interpreter_resume): Ditto.
	(mi_cmd_interpreter_exec): Use gdb_interpreter_lookup.
	(_initialize_mi_interp): Use gdb_interpreter_new,
	gdb_interpreter_add.
	* mi-cmd-break.c (mi_cmd_break_insert): Use
	gdb_interpreter_current_is_named_p.
	(mi_cmd_break_watch): Ditto.
	* mi-events.c (mi_interp_stack_changed_hook): Ditto.
	(event_notify): Ditto.
	

	* mi-main.c (captured_mi_execute_command): Use
	gdb_interpreter_current_is_named_p.
	(mi_load_progress): Ditto.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c (_initialize_mi_interp): Use mi_interpreter_prompt_p
	instead of mi_interpreter_prompt.
	(mi_interpreter_prompt_p): Rename from mi_interpreter_prompt and
	rewrite.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c mi_interpreter_delete): Remove.
	(_initialize_mi_interp): Remove mi_interpreter_delete.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c (mi_interpreter_do_one_event): Remove.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-cmd-break.c (mi_cmd_break_insert): Initialize old_hooks.
	(mi_cmd_break_insert, mi_cmd_break_watch, mi_cmd_break_insert):
	Increment MI version number.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c: Increment mi version numbers: 0->1, 1->2,
	and 2->3. Remove MI0 references.
	* mi-events.c: Ditto.
	* mi-main.c: Ditto. Remove erroneously merged code.
	* mi.h: Ditto.
	
2002-08-28  Keith Seitz  <keiths@@redhat.com>

	* mi-interp.c (_initialize_mi_interp): Add exec_proc.
	(mi_interpreter_exec): New function. MI's exec_proc.

2002-08-28  Keith Seitz  <keiths@@redhat.com>

	* gdbmi.texinfo: Document the interpreter-exec command.

2002-08-21  Keith Seitz  <keiths@@redhat.com>

	* mi-events.c (mi_target_changed): Renamed from mi_register_update.
	* mi.h (mi_target_changed): Ditto.
	* mi-interp.c (mi_event_handlers): Ditto.

2002-08-19  Keith Seitz  <keiths@@redhat.com>

	* mi-cmd-stack.c (mi_cmd_stack_select_frame): Revert 2002-07-25
	change. stack.c now handles it properly.

2002-08-13  Keith Seitz  <keiths@@redhat.com>

	* mi-interp.c (mi_cmd_interpreter_set): Remove. We're not going
	to allow this.
	* mi-cmds.c: Remove "interpreter-set" command.
	* mi-cmds.h (mi_cmd_interpreter_set): Remove.

2002-08-09  Keith Seitz  <keiths@@redhat.com>

	* gdbmi.texinfo: Document selected-frame-changed, register-update,
	and context-changed events.

2002-08-09  Keith Seitz  <keiths@@redhat.com>

	* gdbmi.texinfo (-data-list-register-names): Document "-numbers"
	option.
	* mi-main.c (mi_cmd_data_list_register_names): Add "-numbers"
	option.

2002-08-09  Keith Seitz  <keiths@@redhat.com>

        * mi-interp.c (mi_event_handlers): Add context_changed event
        handler.
	(mi_command_loop): Remove big block of code repeated in 
	mi_interpreter_resume. I don't think this is needed.
        (mi_insert_notify_hooks): Remove context_hook.
        (mi_remove_notify_hooks): Likewise.
        * mi-events.c (mi_context_changed): New function.
        * mi.h (mi_context_changed): Add declaration.

2002-07-25  Keith Seitz  <keiths@@redhat.com>

	* mi-interp.c (mi_event_handlers): Add selected_frame_level_changed
	handler.
	(mi_insert_notify_hooks): Remove breakpoint hooks and frame
	changed hook.
	(mi_remove_notify_hooks): Likewise.
	* mi-events.c (mi_selected_frame_level_changed): New function.
	(mi_interp_frame_changed_hook): Remove.
	(mi_interp_create_breakpoint_hook): Remove.
	(mi_interp_modify_breakpoint_hook): Remove.
	(mi_interp_delete_breakpoint_hook): Remove.
	* mi.h (mi_selected_frame_level_changed): Add declaration.
        (mi_interp_create_breakpoint_hook): Remove declaration.
        (mi_interp_modify_breakpoint_hook): Remove declaration.
        (mi_interp_delete_breakpoint_hook): Remove declaration.
	* mi-cmd-stack.c (mi_cmd_stack_select_frame): If the stack level changes,
	issue a selected_frame_level_changed event.

2002-07-22  Keith Seitz  <keiths@@redhat.com>

	* mi-events.c (mi_register_update): New function.
	* mi-interp.c (mi_event_handlers): Add mi_register_update
	event handler.
	* mi.h (mi_register_update): Add declaration.
	
2002-06-24  Keith Seitz  <keiths@@redhat.com>

	* mi-cmds.h (mi_execute_command): Add "extern".
	(mi_error_last_message): New function.
	* mi-main.c (mi_error_last_message): New function.
	* mi-interp.c (mi_event_handlers): New static global.
	(mi_interpreter_init): Don't install mi event handlers here.
	(mi_interpreter_resume): Install mi event handlers here.
	(mi_interpreter_exec): Don't actually switch interpreters.
	Update error messages.
	exec_proc will return <0 if an error occurs.

2002-06-19  Keith Seitz  <keiths@@redhat.com>

	* mi-cmd-break.c (breakpoint_notify): Only query the breakpoint
	for user breakpoints.
	(mi_cmd_break_insert): Only reset event handlers for MI0 and MI1
	interpreters.
	(mi_cmd_break_watch): Reset uiout output to clear watchpoint
	query. This is only used for MI0 and MI1.

	* mi-console.h (mi_console_file_new): Add "quote" parameter.
	* mi_console.c (struct mi_console_file): Add "quote".
	(mi_console_file_new): Add "quote" parameter.
	(mi_console_raw_packet): Use the quote character specified in
	mi_console_file_new, instead of assuming it is '"'.

	* mi-interp.c (mi_event_channel): New channel for event notifications.
	(mi_interpreter_init): Make static.
	Set event handlers.
	(mi_interpreter_resume): Make static.
	Deal with MI version bump.
	(mi_interpreter_suspend): Make static.
	(mi_interpreter_delete): Ditto.
	(mi_do_one_event): Ditto.
	(mi_cmd_exec_continuation): Ditto.
	(mi_interp_query_hook): Ditto.
	(mi_interp_read_one_line_hook): Ditto.
	(_initialize_mi_interp): Create explicit mi1 interp.

	* mi-events.c (notify_event): New helper function.
	(mi_create_breakpoint, mi_modify_breakpoint, mi_delete_breakpoint,
	mi_create_tracepoint, mi_modify_tracepoint, mi_delete_tracepoint,
	mi_architecture_changed): New functions.

	* mi.h: Add declarations for mi_create_breakpoint, mi_modify_breakpoint,
	mi_delete_breakpoint, mi_create_tracepoint, mi_modify_tracepoint,
	mi_delete_tracepoint, mi_architecture_changed, mi_stdout, mi_stderr,
	mi_stdtarg, mi_stdlog, and mi_eventchannel.

	* mi-main.c (captured_mi_execute_command): Deal with mi version
	bump.
	(mi_load_progress): Ditto.

	* gdbmi.texinfo: Expand notify-async-output to include GDB events.
	Update all examples to show breakpoint events and
	remove redundant breakpoint info on "-break-insert" and "-break-watch".
	The event now supplies everything that is needed.

2002-05-28  Keith Seitz  <keiths@@redhat.com>

	* mi-interp.c:  New file. Almost entirely from Apple's
	sources. Collected and moved here.
	* mi-events.c: Ditto.
	* mi.h: New file.
	* mi-main.c (captured_execute_command): Use catch_exception
	instead of catch_errors.
	(mi_execute_command_wrapper): Remove. Using catch_errors now.
	(mi_input): Make global.
	(mi_load_progress): Ditto.
	Use interpreter functions instead of interpreter_p.
	(mi_command_loop): Moved to mi-interp.c
	(mi0_command_loop): Ditto.
	(mi1_command_loop): Ditto.
	(mi_init_ui): Remove.
	(_initialize_mi_main): Remove. No longer needed.

d140 1
@


1.88.2.2
log
@Clean up.
@
text
@a0 5
2003-02-03  Andrew Cagney  <ac131313@@redhat.com>

	* mi-interp.c, mi-main.c, mi.h: Update to current interp
	interface.

@


1.88.2.3
log
@Overhaul changelog entries.
@
text
@d1 17
a17 4
2003-02-04  Jim Ingham <jingham@@apple.com>
	    Keith Seitz  <keiths@@redhat.com>
            Elena Zannoni  <ezannoni@@redhat.com>
            Andrew Cagney  <ac131313@@redhat.com>
d19 126
a144 8
	* mi-main.h: New file.
	* mi-interp.c: New file.
	* mi-main.c: Include "interps.h".
	(mi_error_message): Make global.
	(mi_input): Delete static function, moved to "mi-interp.c".
	(mi_execute_command, mi_execute_command_wrapper): Ditto.
	(mi_command_loop, mi1_command_loop, mi2_command_loop): Ditto.
	(mi_load_progress): Make non-static.
d146 72
a217 15
	(captured_mi_execute_command): If the interpreter changed, don't
	print anything.
	(mi_load_progress): Use current_interp_named_p.
	(mi_init_ui): Delete function.
	(_initialize_mi_main): Don't install the mi interpreter, handled
	by "mi-interp.c".
	(mi_exec_async_cli_cmd_continuation): Make static.
	* mi-console.h (mi_console_file_new): Add `quote' parameter.
	* mi-console.c (struct mi_console_file): Add `quote'.
	(mi_console_file_new): Add `quote' parameter.  Initialize `quote'.
	(mi_console_raw_packet): Only quote the output when `quote'.
	* mi-cmds.h (mi_cmd_interpreter_exec): Declare.
	(mi_error_message, mi_error_last_message): Declare.
	(mi_execute_command): Declare.
	* mi-cmds.c: Add `interpreter-exec' command.
@


1.87
log
@2003-01-13  Andrew Cagney  <ac131313@@redhat.com>

	* ax-gdb.c, c-valprint.c, charset.c, corefile.c: Update copyright.
	* demangle.c, disasm.c, dwarf2cfi.c, dwarfread.c: Update copyright.
	* elfread.c, eval.c, expprint.c, expression.h: Update copyright.
	* f-typeprint.c, findvar.c, gcore.c, gdb_mbuild.sh: Update copyright.
	* gdbtypes.h, gnu-v2-abi.c, inferior.h, inftarg.c: Update copyright.
	* language.c, language.h, m32r-tdep.c: Update copyright.
	* mn10200-tdep.c, scm-lang.c, scm-lang.h: Update copyright.
	* somsolib.c, somsolib.h, symfile.c, symtab.h: Update copyright.
	* thread-db.c, typeprint.c, utils.c, valarith.c: Update copyright.
	* values.c, win32-nat.c, x86-64-linux-nat.c: Update copyright.
	* x86-64-linux-tdep.c, z8k-tdep.c: Update copyright.
	* cli/cli-decode.h, config/h8500/tm-h8500.h: Update copyright.

Index: mi/ChangeLog
2003-01-13  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Update copyright.
@
text
@d1 7
@


1.86
log
@2003-01-13  Elena Zannoni  <ezannoni@@redhat.com>

	* stack.c (print_frame_info, print_stack_frame_base_stub,
	print_stack_frame_base, show_and_print_stack_frame_stub,
	show_and_print_stack_frame, print_only_stack_frame_stub,
	print_only_stack_frame): Delete functions.
	(print_stack_frame_stub): Call print_frame_info instead of
	print_frame_info_base.
	(print_frame_info_base): Rename to print_frame_info.
	(backtrace_command_1): Call print_frame_info, instead of
	print_frame_info_base.
	(current_frame_command): Call print_stack_frame, instead of
	print_only_stack_frame.
	(frame_command): Call print_stack_frame, instead of
	show_and_print_stack_frame.
	(up_command): Ditto.
	(down_command): Ditto.
	* frame.h (print_only_stack_frame): Delete prototype.
	* infrun.c (normal_stop): Call print_stack_frame, instead of
	show_and_print_stack_frame.
	* thread.c (info_threads_command): Call print_stack_frame, instead
	of print_only_stack_frame.

2003-01-13  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_cmd_exec_return): Use print_stack_frame instead of
	show_and_print_stack_frame.
@
text
@d1 4
@


1.85
log
@2003-01-09  Andrew Cagney  <ac131313@@redhat.com>

	* infrun.c (follow_fork): Use ISO C definition.
	* expprint.c (print_subexp): Use xfree instead of free.
	* charset.c: Include "gdb_string.h" instead of <string.h>.
	(register_iconv_charsets): Use ISO C definition.
	(host_charset, target_charset): Ditto.
	* Makefile.in (charset.o): Update dependencies.
	(mi-cmd-env.o): Update dependencies.

Index: mi/ChangeLog
2003-01-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Include "gdb_string.h" instead of <string.h>.
	Move all includes to after "defs.h".
@
text
@d1 5
@


1.84
log
@
2002-12-13  Jeff Johnston  <jjohnstn@@redhat.com>

        * mi-cmds.c (-environment-directory) Change to use mi_cmd_env_dir,
        (-environment-cd): Change to use mi_cmd_env_cd,.
        (-environment-pwd): Change to use mi_cmd_env_pwd.
        (-environment-path): Change to use mi_cmd_env_path.
        * mi-cmds.h (mi_cmd_env_cd, mi_cmd_env_dir): New prototypes.
        (mi_cmd_env_path, mi_cmd_env_pwd): Ditto.
        * mi-cmd-env.c: New file.  Part of fix for PR gdb/741.
        * gdbmi.texinfo (environment-cd): Update output and example.
        (environment-pwd): Ditto.
        (environment-dir): Update output, description, and examples.
        (environment-path): Ditto.
@
text
@d1 5
@


1.83
log
@2002-11-29  Andrew Cagney  <ac131313@@redhat.com>

	* stack.c (selected_frame, select_frame): Move from here ...
	* frame.c (selected_frame, select_frame): ... to here.  Include
	"language.h".
	* Makefile.in (frame.o): Update dependencies.
	* frame.c (get_selected_frame): New function.
	* frame.h (get_selected_frame): Declare.
	(deprecated_selected_frame): Rename selected_frame.
	* ada-lang.c, ada-tasks.c, breakpoint.c, corelow.c: Update.
	* eval.c, f-valprint.c, findvar.c, frame.c, frame.h: Update.
	* h8300-tdep.c, h8500-tdep.c, hppa-tdep.c, infcmd.c: Update.
	* inflow.c, infrun.c, macroscope.c, mips-tdep.c: Update.
	* mn10300-tdep.c, ocd.c, regcache.h, remote-e7000.c: Update.
	* remote-mips.c, remote-rdp.c, sh-tdep.c, sparc-tdep.c: Update.
	* stack.c, thread.c, tracepoint.c, valops.c, varobj.c: Update.
	* z8k-tdep.c, cli/cli-cmds.c: Update.

Index: mi/ChangeLog
2002-11-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi/mi-cmd-stack.c, mi/mi-main.c: Update to use
	deprecated_selected_frame.

Index: tui/ChangeLog
2002-11-29  Andrew Cagney  <ac131313@@redhat.com>

	* tui/tui-hooks.c: Update to use deprecated_selected_frame.
	* tui/tui.c, tui/tuiDisassem.c, tui/tuiRegs.c: Ditto.
	* tui/tuiSource.c, tui/tuiSourceWin.c, tui/tuiWin.c: Ditto.
@
text
@d1 14
@


1.82
log
@2002-11-13  Andrew Cagney  <cagney@@redhat.com>

	* regcache.h (deprecated_read_register_bytes): Rename
	read_register_bytes.
	(deprecated_write_register_bytes): Rename write_register_bytes.
	* alpha-tdep.c, arm-tdep.c, cris-tdep.c, d10v-tdep.c: Update.
	* dwarf2cfi.c, frv-tdep.c, hppa-tdep.c, ia64-tdep.c: Update.
	* m68k-tdep.c, mcore-tdep.c, mips-tdep.c, mn10300-tdep.c: Update.
	* ns32k-tdep.c, regcache.c, remote-sds.c, remote-vx.c: Update.
	* remote.c, rs6000-tdep.c, s390-tdep.c, sh-tdep.c: Update.
	* sparc-tdep.c, v850-tdep.c, vax-tdep.c, x86-64-tdep.c: Update.
	* xstormy16-tdep.c, z8k-tdep.c, config/nm-gnu.h: Update.
	* config/nm-m3.h, config/h8500/tm-h8500.h: Update.
	* config/i386/nm-ptx4.h, config/i386/nm-symmetry.h: Update.
	* config/m32r/tm-m32r.h, config/m68k/nm-sun3.h: Update.
	* config/m68k/tm-delta68.h, config/m68k/tm-linux.h: Update.
	* config/mn10200/tm-mn10200.h, config/pa/tm-hppa64.h: Update.
	* config/sparc/nm-nbsd.h, config/sparc/nm-sun4os4.h: Update.
	* config/sparc/nm-sun4sol2.h, config/sparc/tm-sparclet.h: Update.

2002-11-13  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_write_register_values): Use
	deprecated_write_register_bytes instead of write_register_bytes.
@
text
@d1 5
@


1.81
log
@
2002-11-11  Jeff Johnston  <jjohnstn@@redhat.com>

        * gdbmi.texinfo (-var-assign): Add comments about interaction
        with -var-update and add an example.  Part of fix for gdb/702.
@
text
@d1 5
@


1.80
log
@
2002-11-08  Jeff Johnston  <jjohnstn@@redhat.com>

        * mi-main.c (mi_command_loop): Initialize raw_stdout and gdb_stdout
        only if mi version is <= 1.
        (mi_init_ui): Initialize raw_stdout and gdb_stdout if mi version
        is > 1 so startup message is treated as console output.  This is
        part of fix for PR gdb/604.
@
text
@d1 5
@


1.79
log
@
2002-11-06  Jeff Johnston  <jjohnstn@@redhat.com>

        * mi-cmd-var.c (mi_cmd_var_create): Change the function used to
        parse the frame addr from parse_and_eval_address() to
        string_to_core_addr().  This is a fix for PR gdb/494.
@
text
@d1 8
@


1.78
log
@
2002-10-23  Jeff Johnston  <jjohnstn@@redhat.com>

        * mi-cmd-var.c: Change all remaining occurrences of ui_out_tuple_begin
        to make_cleanup_ui_out_tuple_begin_end.  Change all remaining
        occurrences of ui_out_list_begin to make_cleanup_ui_out_list_begin_end.         Use do_cleanups instead of ui_out_list_end or ui_out_tuple_end.  This
        is a fix for PR gdb/680.
        * mi-cmd-stack.c: Ditto.
        * mi-main.c: Ditto.
@
text
@d1 6
@


1.77
log
@        * mi-main.c (mi_cmd_thread_select): Only return MI_CMD_CAUGHT_ERROR
        when we really did catch an error(). If we got GDB_RC_FAIL, return
        MI_CMD_ERROR instead.
@
text
@d1 10
@


1.76
log
@
2002-10-03  Jeff Johnston  <jjohnstn@@redhat.com>

        * gdbmi.texinfo: Fix examples that show frames to remove
        extraneous blank in level field.  Part of fix for PR gdb/192.
@
text
@d1 6
@


1.76.2.1
log
@Merge drow-cplus-merge-20021025 to drow-cplus-branch.
@
text
@a0 16
2002-10-23  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmd-var.c: Change all remaining occurrences of ui_out_tuple_begin 
	to make_cleanup_ui_out_tuple_begin_end.  Change all remaining 
	occurrences of ui_out_list_begin to make_cleanup_ui_out_list_begin_end.
	Use do_cleanups instead of ui_out_list_end or ui_out_tuple_end.  This 
	is a fix for PR gdb/680.
	* mi-cmd-stack.c: Ditto.
	* mi-main.c: Ditto.

2002-10-22  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (mi_cmd_thread_select): Only return MI_CMD_CAUGHT_ERROR
	when we really did catch an error(). If we got GDB_RC_FAIL, return
	MI_CMD_ERROR instead.

@


1.76.2.2
log
@Merge drow-cplus-branch to:
  cvs rtag -D 2003-12-14 00:00:00 UTC drow-cplus-merge-20031214 gdb+dejagnu
@
text
@a0 279
2003-11-06  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmd-var.c (mi_cmd_var_set_format): Replace STREQN with
	strncmp.

2003-10-24  Andrew Cagney  <cagney@@redhat.com>

	* tui-out.c: Fix "fortunatly"[sic].

2003-10-02  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_RAW_SIZE to
	DEPRECATED_REGISTER_RAW_SIZE.

2003-09-30  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_VIRTUAL_SIZE to
	DEPRECATED_REGISTER_VIRTUAL_SIZE.

2003-09-17  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_BYTE to DEPRECATED_REGISTER_BYTE.

2003-09-10  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): Don't use
	DEPRECATED_REGISTER_BYTES because some architecture don't set it
	and its default is 0. 

2003-08-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add "mi2" and "mi3" to
	interpreters that hack around CLI.
	* mi-interp.c (mi3_command_loop): New function.
	(mi_interpreter_resume): Check for "mi3", default to "mi2".

2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* mi-interp.c (_initialize_mi_interp): Register "mi2" and "mi3".
	Make "mi" select "mi2".

2003-08-05  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmd-env.c (env_execute_cli_command): Use an explicit "%s %s"
	when constructing the run command.
	(mi_cmd_env_cd, mi_cmd_env_path, mi_cmd_env_dir): Simplify command
	string removing the "%s".

2003-08-04  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmds.h (struct mi_cli): Define.
	(struct mi_cmd): Change type of "cli" to "struct mi_cli".
	* mi-cmds.c (mi_cmds): Update table.
	* mi-parse.c (mi_parse): Update.
	* mi-main.c (mi_execute_cli_command): Add "args_p" parameter, make
	others constant.
	(mi_cmd_execute): Update call.
	(captured_mi_execute_command): Ditto.

2003-08-04  David Carlton  <carlton@@kealia.com>

	* mi-main.c (mi_error_last_message): Add "%s" second argument to
	xasprintf call.

2003-06-28  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-out.c (mi_ui_out_impl): Add NULL for redirect member.

2003-06-17  Daniel Jacobowitz  <drow@@mvista.com>

        * mi-cmds.c (mi_cmds): Add "-target-disconnect".

2003-06-11  David Carlton  <carlton@@bactrian.org>

	* mi-cmd-stack.c: Include dictionary.h.
	(list_args_or_locals): Update use of ALL_BLOCK_SYMBOLS.

2003-06-11  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Replace REGISTER_CONVERTIBLE with
	DEPRECATED_REGISTER_CONVERTIBLE.

2003-06-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-parse.c (_initialize_mi_parse): Delete function.
	* mi-main.c: Include "mi-main.h".
	* mi-interp.c (_initialize_mi_interp): Add declaration.
	* mi-cmd-stack.c: Include "stack.h".
	(select_frame_command_wrapper): Delete extern declaration.
	(mi_cmd_stack_select_frame): Replace select_frame_command_wrapper
	with select_frame_command.

2003-05-16  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): 

2003-05-12  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-mi-cmd-stack.c (list_args_or_locals): Rename VAR_NAMESPACE to
	VAR_DOMAIN.

2003-05-11  Andrew Cagney  <cagney@@redhat.com>

	* mi-symbol-cmds.c: Rename "mi-cmd-symbol.c", avoid 8.3 problem.

2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (register_changed_p): Use MAX_REGISTER_SIZE instead of
	MAX_REGISTER_RAW_SIZE.

2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use MAX_REGISTER_SIZE.

2003-05-05  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_cmd_data_write_register_values): Replace
	REGISTER_SIZE with DEPRECATED_REGISTER_SIZE.

2003-05-03  J. Brobecker  <brobecker@@gnat.com>

	From  Thierry Schneider  <tpschneider1@@yahoo.com>:
	* mi-cmds.h (mi_cmd_symbol_list_lines): Add declaration.
	* mi-cmds.c (mi_cmds): Add entry for new MI command.
	* mi-cmd-symbol.c (mi_cmd_symbol_list_lines): New source file
	for all symbol-related commands.

2003-04-02  Bob Rossi  <bob_rossi@@cox.net>

	* mi-cmd-file.c: New file to implement mi file commands.
	* mi-getopt.c (mi_valid_noargs): Added mi_valid_noargs to verify 
        if a set of parameters passed to an MI function has no arguments
	* mi-getopt.h (mi_valid_noargs): Declare.
	* mi-cmds.c (mi_cmds): Added -file-list-exec-source-file command.
	* mi-cmds.h (mi_cmd_file_list_exec_source_file): Declare.

2003-03-27  Andrew Cagney  <cagney@@redhat.com>

	* gdbmi.texinfo: Delete file.  Contents moved to
	../doc/gdb.texinfo.

2003-03-12  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use frame_register instead of
	get_saved_register.

2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-out.c: Update copyright.
	(mi_out_data): Define typedef.  Use instead of ui_out_data.

2003-03-01  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use register_type instead of
	REGISTER_VIRTUAL_TYPE.

2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: Replace all instances of SYMBOL_NAME with
	DEPRECATED_SYMBOL_NAME.  Update copyright.

2003-02-21  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-cmd-stack.c (list_args_or_locals): Handle LOC_COMPUTED and
	LOC_COMPUTED_ARG.

2003-02-19  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: #include "block.h"

2003-02-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-interp.c (mi_remove_notify_hooks): Convert function
	definition to ISO C.

2003-02-06  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Include "gdb_stat.h" instead of <sys/stat.h>.

2003-02-04  Jim Ingham <jingham@@apple.com>
	    Keith Seitz  <keiths@@redhat.com>
            Elena Zannoni  <ezannoni@@redhat.com>
            Andrew Cagney  <ac131313@@redhat.com>
	
	* mi-main.h: New file.
	* mi-interp.c: New file.
	* mi-main.c: Include "interps.h".
	(mi_error_message): Make global.
	(mi_input): Delete static function, moved to "mi-interp.c".
	(mi_execute_command, mi_execute_command_wrapper): Ditto.
	(mi_command_loop, mi1_command_loop, mi2_command_loop): Ditto.
	(mi_load_progress): Make non-static.
	(mi_error_last_message): New function.
	(captured_mi_execute_command): If the interpreter changed, don't
	print anything.
	(mi_load_progress): Use current_interp_named_p.
	(mi_init_ui): Delete function.
	(_initialize_mi_main): Don't install the mi interpreter, handled
	by "mi-interp.c".
	(mi_exec_async_cli_cmd_continuation): Make static.
	* mi-console.h (mi_console_file_new): Add `quote' parameter.
	* mi-console.c (struct mi_console_file): Add `quote'.
	(mi_console_file_new): Add `quote' parameter.  Initialize `quote'.
	(mi_console_raw_packet): Only quote the output when `quote'.
	* mi-cmds.h (mi_cmd_interpreter_exec): Declare.
	(mi_error_message, mi_error_last_message): Declare.
	(mi_execute_command): Declare.
	* mi-cmds.c: Add `interpreter-exec' command.

2003-02-04  Andrew Cagney  <ac131313@@redhat.com>

	From Keith Seitz <keiths@@redhat.com>:
	* gdbmi.texinfo (GDB/MI Miscellaneous Commands): Document the
	interpreter-exec command.

2003-02-02  Andrew Cagney  <ac131313@@redhat.com>

	From 2002-11-10 Jason Molenda (jason-cl@@molenda.com):
        * mi-cmd-var.c (mi_cmd_var_list_children): CHILDREN field is
        now a list; still a tuple when in mi1.
        * gdbmi.texinfo: Update var-list-children example.

2003-01-13  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Update copyright.

2003-01-13  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_cmd_exec_return): Use print_stack_frame instead of
	show_and_print_stack_frame.

2003-01-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Include "gdb_string.h" instead of <string.h>.
	Move all includes to after "defs.h".

2002-12-13  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmds.c (-environment-directory) Change to use mi_cmd_env_dir,
	(-environment-cd): Change to use mi_cmd_env_cd,.
	(-environment-pwd): Change to use mi_cmd_env_pwd.
	(-environment-path): Change to use mi_cmd_env_path.
	* mi-cmds.h (mi_cmd_env_cd, mi_cmd_env_dir): New prototypes.
	(mi_cmd_env_path, mi_cmd_env_pwd): Ditto.
	* mi-cmd-env.c: New file.  Part of fix for PR gdb/741.
	* gdbmi.texinfo (environment-cd): Update output and example.
	(environment-pwd): Ditto.
	(environment-dir): Update output, description, and examples.
	(environment-path): Ditto.

2002-11-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi/mi-cmd-stack.c, mi/mi-main.c: Update to use
	deprecated_selected_frame.

2002-11-13  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_write_register_values): Use
	deprecated_write_register_bytes instead of write_register_bytes.

2002-11-11  Jeff Johnston  <jjohnstn@@redhat.com>

	* gdbmi.texinfo (-var-assign): Add comments about interaction
	with -var-update and add an example.  Part of fix for gdb/702.

2002-11-08  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-main.c (mi_command_loop): Initialize raw_stdout and gdb_stdout 
	only if mi version is <= 1.
	(mi_init_ui): Initialize raw_stdout and gdb_stdout if mi version 
	is > 1 so startup message is treated as console output.  This is 
	part of fix for PR gdb/604.

2002-11-06  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmd-var.c (mi_cmd_var_create): Change the function used to 
	parse the frame addr from parse_and_eval_address() to 
	string_to_core_addr().  This is a fix for PR gdb/494.

d76 1
@


1.76.2.3
log
@Merge mainline to branch.  GDB is broken until I update cp-names.y.
@
text
@@


1.75
log
@
2002-10-03  Jeff Johnston  <jjohnstn@@redhat.com>

        * mi-cmd-var.c (mi_cmd_var_update): Fix for PR gdb/672.  For m2,
        output list begin and end for "changelist" rather than tuple begin/end.
        (varobj_update_one): For m2, add tuple begin and end for varobj
        update output.
@
text
@d2 5
@


1.74
log
@2002-10-02  Elena Zannoni  <ezannoni@@redhat.com>

        * inferior.h (registers_info, stepi_command, nexti_command,
        continue_command, interrupt_target_command): Export from infcmd.c.
        * frame.h (args_info, selected_frame_level_changed_hook,
        return_command): Export from stack.c.
        * v850ice.c (stepi_command, nexti_command, continue_command): use
        prototypes from inferior.h.
        * tracepoint.c (registers_info, args_info, locals_info): Use
        prototypes from frame.h and inferior.h.
        * Makefile.in (mi-main.o): Add dependency on frame.h.

2002-10-02  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-main.c (mi_cmd_exec_return): Don't use
        return_command_wrapper, use return_command instead.
        (mi_cmd_exec_interrupt): Don't use
        interrupt_target_command_wrapper, use interrupt_target_command
        instead.
        (return_command_wrapper, interrupt_target_command_wrapper):
        Delete.
        Include frame.h.

2002-10-02  Elena Zannoni  <ezannoni@@redhat.com>

        * tui-hooks.c (selected_frame_level_changed_hook): Use the one
        exported from frame.h.
@
text
@d1 7
@


1.73
log
@2002-10-01  Andrew Cagney  <ac131313@@redhat.com>

        * NEWS: Mention that MI syntax, selected by "mi" changed to "mi2"
        and that "mi0" syntax has been removed.

2002-10-01  Andrew Cagney  <ac131313@@redhat.com>

        * gdb.texinfo (Mode Options): Update --interpreter option.  "mi2"
        and "mi1" instead of "mi1" and "mi0".

2002-10-01  Andrew Cagney  <ac131313@@redhat.com>

        * mi-main.c (mi2_command_loop): New function.
        (mi0_command_loop): Delete function.
        (_initialize_mi_main): Recognize, and default to, "mi2".  Do not
        recognize "mi0".
        * mi-out.c (mi_table_begin): Remove mi0 code.
        (mi_table_body, mi_table_end): Ditto.
        (mi_table_header, mi_open, mi_close): Ditto.
@
text
@d1 11
@


1.72
log
@2002-09-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_version): New function.
	* mi-out.h (mi_version): Declare.
@
text
@d1 10
@


1.71
log
@2002-07-12  Mo DeJong  <supermo@@bayarea.net>
* gdbmi.texinfo (var-evaluate-expression): Note that
var-list-children must be invoked before child variable
values can be evaluated.
@
text
@d1 5
@


1.70
log
@2002-09-26  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-disas.c (dump_insns): Add text only output for CLI.
        (do_mixed_source_and_assembly): Ditto.
@
text
@d1 7
@


1.69
log
@        * mi-main.c (mi_cmd_data_list_register_names): Use cleanups
        for the uiout list. Do the cleanups when returning an error.
        (mi_cmd_data_list_changed_registers): Ditto.
        (mi_cmd_data_list_register_values): Use cleanups for the uiout list
        and tuples. Do the cleanups when returning errors.
@
text
@d1 5
@


1.69.2.1
log
@2002-09-23  David Carlton  <carlton@@math.stanford.edu>

	* dictionary.c (struct dict_vtbl): 'add_symbol' field.
	(add_symbol_generic): New function.
	(free_obstack): New function.
	(dict_create_hashed): New function.
	(lookup_hashed): New function.
	(iterator_first_hashed): New function.
	(iterator_hashed_advance): New function.
	(iterator_next_hashed): New function.
	* dictionary.h: A few more declarations.
	* mdebugread.c (parse_symbol): Use dict_iterator when finding
	parameters.
	* Makefile.in (valops.o): Depend on dictionary_h.
	* valops.c (value_of_this): Check empty block via dict_empty.
	#include "dictionary.h"
	* symfile.c (free_named_symtabs): Check empty block via dict_empty.
	* dictionary.h: Declare dict_empty.
	* symmisc.c (dump_symtab): Don't print out number of
	symbols/buckets.
	* printcmd.c (print_frame_args): Delete assertion that block isn't
	a hashtable.
	* symmisc.c (free_symtab_block): Update to use dictionary
	methods.
	* symtab.h (struct symtab): Comment on free_contents.
	* jv-lang.c (get_java_class_symtab): Set class_symtab->free_code.
	* mdebugread.c (add_symbol): Delete 'nsyms' variable.
	(fixup_sigtramp): Add symbol via dict_add_symbol_block.
	* Makefile.in (mi-cmd-stack.o): Depend on dictionary_h.
	* ada-lang.c (symtab_for_sym): Update uses of ALL_BLOCK_SYMBOLS.
	(ada_add_block_symbols): Ditto.
	(debug_print_block): Ditto.
	(fill_in_ada_prototype): Ditto.
	* breakpoint.c (get_catch_sals): Ditto.
	* coffread.c (patch_opaque_types): Ditto.
	* tracepoint.c (add_local_symbols): Ditto.
	(scope_info): Ditto.
	* symtab.c (find_pc_sect_symtab): Ditto.
	(search_symbols): Ditto.
	(make_symbol_completion_list): Ditto.
	(find_addr_symbol): Ditto.
	(make_file_symbol_completion_list): Ditto.
	(make_symbol_overload_list): Ditto.
	* symmisc.c (dump_symtab): Ditto.
	* stack.c (print_block_frame_locals): Ditto.
	(print_block_frame_labels): Ditto.
	(print_frame_arg_vars): Ditto.
	* printcmd.c (print_frame_args): Ditto.
	* objfiles.c (objfile_relocate): Ditto.
	* mdebugread.c (mylookup_symbol): Ditto.
	* Makefile.in (ada-lang.o): Depend on dictionary_h.
	* Makefile.in (tracepoint.o): Ditto.
	* Makefile.in (symmisc.o): Ditto.
	* Makefile.in (stack.o): Ditto.
	* Makefile.in (printcmd.o): Ditto.
	* Makefile.in (objfiles.o): Ditto.
	* Makefile.in (coffread.o): Ditto.
	* Makefile.in (breakpoint.o): Ditto.
	* ada-lang.c: #include "dictionary.h"
	* tracepoint.c: Ditto.
	* symmisc.c: Ditto.
	* stack.c: Ditto.
	* printcmd.c: Ditto.
	* objfiles.c: Ditto.
	* coffread.c: Ditto.
	* breakpoint.c: Ditto.
	* symtab.h: Comment out ALL_BLOCK_SYMBOLS.  (Moved to
	dictionary.h.)
	* dictionary.c: Dict_iterator accessor macros.
	(struct dict_vtbl): Add iterator_first, iterator_next.
	(dict_iterator_first): New function.
	(dict_iterator_next): New function.
	(iterator_first_block): New function.
	(iterator_next_block): New function.
	(iterator_block_hashed_advance): New function.
	* dictionary.h: Add dict_iterator stuff.
	* Makefile.in (symtab.o): Depend on dictionary_h.
	* symtab.c: #include "dictionary.h"
	* dictionary.c: Move down #include "dictionary.h", for now...
	(free_block): Rename from dict_free_block.
	(struct dict_vtbl): Add LOOKUP member.
	(dict_lookup): New function.
	(lookup_block): New function.
	* dictionary.h: Declare dict_lookup.
	* symtab.c (lookup_block_symbol): Use dict_lookup.

2002-09-23  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c (list_args_or_locals): Update use of
	ALL_BLOCK_SYMBOLS.
	#include "dictionary.h"
@
text
@a0 6
2002-09-23  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c (list_args_or_locals): Update use of
	ALL_BLOCK_SYMBOLS.
	#include "dictionary.h"

@


1.69.2.2
log
@Merge with mainline; tag is carlton_dictionary-20020927-merge
@
text
@a0 12
2002-09-27  Andrew Cagney  <ac131313@@redhat.com>

	From 2002-07-12 Mo DeJong <supermo@@bayarea.net>
	* gdbmi.texinfo (var-evaluate-expression): Note that
	var-list-children must be invoked before child variable
	values can be evaluated.

2002-09-26  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-disas.c (dump_insns): Add text only output for CLI.
        (do_mixed_source_and_assembly): Ditto.

@


1.69.2.3
log
@Merge with mainline; merge tag carlton_dictionary-20021011-merge.
@
text
@a0 38
2002-10-03  Jeff Johnston  <jjohnstn@@redhat.com>

	* gdbmi.texinfo: Fix examples that show frames to remove
	extraneous blank in level field.  Part of fix for PR gdb/192.
        
2002-10-03  Jeff Johnston  <jjohnstn@@redhat.com>
        
	* mi-cmd-var.c (mi_cmd_var_update): Fix for PR gdb/672.  For m2, 
	output list begin and end for "changelist" rather than tuple begin/end.
	(varobj_update_one): For m2, add tuple begin and end for varobj 
	update output.

2002-10-02  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_cmd_exec_return): Don't use
	return_command_wrapper, use return_command instead.
	(mi_cmd_exec_interrupt): Don't use
	interrupt_target_command_wrapper, use interrupt_target_command
	instead.
	(return_command_wrapper, interrupt_target_command_wrapper):
	Delete.
	Include frame.h.

2002-10-01  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi2_command_loop): New function.
	(mi0_command_loop): Delete function.
	(_initialize_mi_main): Recognize, and default to, "mi2".  Do not
	recognize "mi0".
	* mi-out.c (mi_table_begin): Remove mi0 code.
	(mi_table_body, mi_table_end): Ditto.
	(mi_table_header, mi_open, mi_close): Ditto.

2002-09-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_version): New function.
	* mi-out.h (mi_version): Declare.

@


1.69.2.4
log
@2002-10-18  David Carlton  <carlton@@math.stanford.edu>

	* Makefile.in (block_h): New variable.
	Updated dependencies to reflect it.
	* parse.c (parse_exp_1): Use BLOCK_START.
	#include "block.h"
	* p-exp.tab.c: Regenerated.
	* m2-exp.tab.c: Ditto.
	* jv-exp.tab.c: Ditto.
	* f-exp.tab.c: Ditto.
	* c-exp.tab.c: Ditto.
	* ada-exp.tab.c: Ditto.
	* ada-lang.c: #include "block.h"
	* p-exp.y: Ditto.
	* objc-exp.y: Ditto.
	* m2-exp.y: Ditto.
	* jv-exp.y: Ditto.
	* f-exp.y: Ditto.
	* c-exp.y: Ditto.
	* ada-exp.y: Ditto.
	* values.c: Ditto.
	* valops.c: Ditto.
	* tracepoint.c: Ditto.
	* symtab.c: Ditto.
	* symmisc.c: Ditto.
	* symfile.c: Ditto.
	* stack.c: Ditto.
	* printcmd.c: Ditto.
	* objfiles.c: Ditto.
	* objc-lang.c: Ditto.
	* nlmread.c: Ditto.
	* mips-tdep.c: Ditto.
	* mdebugread.c: Ditto.
	* linespec.c: Ditto.
	* jv-lang.c: Ditto.
	* infcmd.c: Ditto.
	* f-valprint.c: Ditto.
	* findvar.c: Ditto.
	* expprint.c: Ditto.
	* coffread.c: Ditto.
	* buildsym.c: Ditto.
	* breakpoint.c: Ditto.
	* blockframe.c: Ditto.
	* ax-gdb.c: Ditto.
	* alpha-tdep.c: Ditto.
	* block.h: New file.
	* symtab.h: Moved struct block, struct blockvector, and related
	macros and function declarations to block.h.
	* dwarf2read.c (process_die): Set processing_has_namespace_info if
	we run into DW_TAG_namespace, DW_TAG_imported_declaration, or
	DW_TAG_imported_module.
	New variable current_namespace.
	(psymtab_to_symtab_1): Set current_namespace to "".
	(dwarf2_name): New function.
	(dwarf2_add_member_fn): Get name via dwarf2_name.
	(read_typedef): Ditto.
	(read_file_scope): Ditto.
	(dwarf2_add_field): Ditto.
	(read_structure_scope): Ditto.
	(read_enumeration): Ditto.
	(dwarf2_extension): New function.
	(read_namespace): Set current_namespace correctly; also, if we're
	entering an anonymous namespace, add an appropriate using
	directive.
	* buildsym.c (start_symtab): Reset processing_has_namespace_info
	to 0.
	(add_symbol_to_list): Only scan for anonymous namespaces if
	!processing_has_namespace_info.
	* buildsym.h: Add new flag processing_has_namespace_info.

2002-10-18  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: #include "block.h"
@
text
@a0 4
2002-10-18  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: #include "block.h"

@


1.69.2.5
log
@2002-10-25  David Carlton  <carlton@@math.stanford.edu>

	* symtab.c (lookup_symbol_aux_block): New function.
	(lookup_symbol_aux_local): Call lookup_symbol_aux_block.
	(lookup_symbol_aux): Ditto.

	* Merge from mainline; tag is carlton_dictionary-20021025-merge.

2002-10-25  David Carlton  <carlton@@math.stanford.edu>

	* cp-support.c: Add comment to demangled name pitfalls.
	* symtab.c (lookup_transparent_type): Add FIXME comment at
	beginning.

2002-10-23  David Carlton  <carlton@@math.stanford.edu>

	* symtab.c: Delete cplusplus_hint.
	Delete prototype for find_template_name_end.
	* dwarf2read.c (scan_partial_symbols): Add in a gdb_assert from a
	later version of my namespace_minimal patch.

2002-10-25  David Carlton  <carlton@@math.stanford.edu>

	* gdb.c++/namespace.exp: Change all of the setup_xfail tests that
	I added into setup_kfails.
@
text
@a0 16
2002-10-23  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmd-var.c: Change all remaining occurrences of ui_out_tuple_begin 
	to make_cleanup_ui_out_tuple_begin_end.  Change all remaining 
	occurrences of ui_out_list_begin to make_cleanup_ui_out_list_begin_end.
	Use do_cleanups instead of ui_out_list_end or ui_out_tuple_end.  This 
	is a fix for PR gdb/680.
	* mi-cmd-stack.c: Ditto.
	* mi-main.c: Ditto.

2002-10-22  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (mi_cmd_thread_select): Only return MI_CMD_CAUGHT_ERROR
	when we really did catch an error(). If we got GDB_RC_FAIL, return
	MI_CMD_ERROR instead.

@


1.69.2.6
log
@2002-11-15  David Carlton  <carlton@@math.stanford.edu>

	* Merge from mainline; tag is carlton_dictionary-20021115-merge.
@
text
@a0 24
2002-11-13  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi_cmd_data_write_register_values): Use
	deprecated_write_register_bytes instead of write_register_bytes.

2002-11-11  Jeff Johnston  <jjohnstn@@redhat.com>

	* gdbmi.texinfo (-var-assign): Add comments about interaction
	with -var-update and add an example.  Part of fix for gdb/702.

2002-11-08  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-main.c (mi_command_loop): Initialize raw_stdout and gdb_stdout 
	only if mi version is <= 1.
	(mi_init_ui): Initialize raw_stdout and gdb_stdout if mi version 
	is > 1 so startup message is treated as console output.  This is 
	part of fix for PR gdb/604.

2002-11-06  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmd-var.c (mi_cmd_var_create): Change the function used to 
	parse the frame addr from parse_and_eval_address() to 
	string_to_core_addr().  This is a fix for PR gdb/494.

@


1.69.2.7
log
@2002-12-23  David Carlton  <carlton@@math.stanford.edu>

	* Merge from mainline; tag is carlton_dictionary-20021223-merge.
@
text
@a0 19
2002-12-13  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmds.c (-environment-directory) Change to use mi_cmd_env_dir,
	(-environment-cd): Change to use mi_cmd_env_cd,.
	(-environment-pwd): Change to use mi_cmd_env_pwd.
	(-environment-path): Change to use mi_cmd_env_path.
	* mi-cmds.h (mi_cmd_env_cd, mi_cmd_env_dir): New prototypes.
	(mi_cmd_env_path, mi_cmd_env_pwd): Ditto.
	* mi-cmd-env.c: New file.  Part of fix for PR gdb/741.
	* gdbmi.texinfo (environment-cd): Update output and example.
	(environment-pwd): Ditto.
	(environment-dir): Update output, description, and examples.
	(environment-path): Ditto.

2002-11-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi/mi-cmd-stack.c, mi/mi-main.c: Update to use
	deprecated_selected_frame.

@


1.69.2.8
log
@2003-02-07  David Carlton  <carlton@@math.stanford.edu>

	* Merge with mainline; tag is carlton_dictionary-20030207-merge.
@
text
@a0 61
2003-02-06  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Include "gdb_stat.h" instead of <sys/stat.h>.

2003-02-04  Jim Ingham <jingham@@apple.com>
	    Keith Seitz  <keiths@@redhat.com>
            Elena Zannoni  <ezannoni@@redhat.com>
            Andrew Cagney  <ac131313@@redhat.com>
	
	* mi-main.h: New file.
	* mi-interp.c: New file.
	* mi-main.c: Include "interps.h".
	(mi_error_message): Make global.
	(mi_input): Delete static function, moved to "mi-interp.c".
	(mi_execute_command, mi_execute_command_wrapper): Ditto.
	(mi_command_loop, mi1_command_loop, mi2_command_loop): Ditto.
	(mi_load_progress): Make non-static.
	(mi_error_last_message): New function.
	(captured_mi_execute_command): If the interpreter changed, don't
	print anything.
	(mi_load_progress): Use current_interp_named_p.
	(mi_init_ui): Delete function.
	(_initialize_mi_main): Don't install the mi interpreter, handled
	by "mi-interp.c".
	(mi_exec_async_cli_cmd_continuation): Make static.
	* mi-console.h (mi_console_file_new): Add `quote' parameter.
	* mi-console.c (struct mi_console_file): Add `quote'.
	(mi_console_file_new): Add `quote' parameter.  Initialize `quote'.
	(mi_console_raw_packet): Only quote the output when `quote'.
	* mi-cmds.h (mi_cmd_interpreter_exec): Declare.
	(mi_error_message, mi_error_last_message): Declare.
	(mi_execute_command): Declare.
	* mi-cmds.c: Add `interpreter-exec' command.

2003-02-04  Andrew Cagney  <ac131313@@redhat.com>

	From Keith Seitz <keiths@@redhat.com>:
	* gdbmi.texinfo (GDB/MI Miscellaneous Commands): Document the
	interpreter-exec command.

2003-02-02  Andrew Cagney  <ac131313@@redhat.com>

	From 2002-11-10 Jason Molenda (jason-cl@@molenda.com):
        * mi-cmd-var.c (mi_cmd_var_list_children): CHILDREN field is
        now a list; still a tuple when in mi1.
        * gdbmi.texinfo: Update var-list-children example.

2003-01-13  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Update copyright.

2003-01-13  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_cmd_exec_return): Use print_stack_frame instead of
	show_and_print_stack_frame.

2003-01-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-env.c: Include "gdb_string.h" instead of <string.h>.
	Move all includes to after "defs.h".

d129 1
@


1.69.2.9
log
@2003-03-05  David Carlton  <carlton@@math.stanford.edu>

	* Merge with mainline.  Tag is carlton_dictionary-20030305-merge.
@
text
@a0 24
2003-03-01  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use register_type instead of
	REGISTER_VIRTUAL_TYPE.

2003-02-25  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: Replace all instances of SYMBOL_NAME with
	DEPRECATED_SYMBOL_NAME.  Update copyright.

2003-02-21  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-cmd-stack.c (list_args_or_locals): Handle LOC_COMPUTED and
	LOC_COMPUTED_ARG.

2003-02-19  David Carlton  <carlton@@math.stanford.edu>

	* mi-cmd-stack.c: #include "block.h"

2003-02-09  Andrew Cagney  <ac131313@@redhat.com>

	* mi-interp.c (mi_remove_notify_hooks): Convert function
	definition to ISO C.

@


1.69.2.10
log
@2003-04-16  David Carlton  <carlton@@bactrian.org>

	* Merge with mainline; tag is carlton_dictionary-20030416-merge.
@
text
@a0 24
2003-04-02  Bob Rossi  <bob_rossi@@cox.net>

	* mi-cmd-file.c: New file to implement mi file commands.
	* mi-getopt.c (mi_valid_noargs): Added mi_valid_noargs to verify 
        if a set of parameters passed to an MI function has no arguments
	* mi-getopt.h (mi_valid_noargs): Declare.
	* mi-cmds.c (mi_cmds): Added -file-list-exec-source-file command.
	* mi-cmds.h (mi_cmd_file_list_exec_source_file): Declare.

2003-03-27  Andrew Cagney  <cagney@@redhat.com>

	* gdbmi.texinfo: Delete file.  Contents moved to
	../doc/gdb.texinfo.

2003-03-12  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use frame_register instead of
	get_saved_register.

2003-03-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-out.c: Update copyright.
	(mi_out_data): Define typedef.  Use instead of ui_out_data.

@


1.69.2.11
log
@2003-05-23  David Carlton  <carlton@@bactrian.org>

	* Merge with mainline; tag is carlton_dictionary-20030523-merge.
@
text
@a0 35
2003-05-16  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): 

2003-05-12  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-mi-cmd-stack.c (list_args_or_locals): Rename VAR_NAMESPACE to
	VAR_DOMAIN.

2003-05-11  Andrew Cagney  <cagney@@redhat.com>

	* mi-symbol-cmds.c: Rename "mi-cmd-symbol.c", avoid 8.3 problem.

2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (register_changed_p): Use MAX_REGISTER_SIZE instead of
	MAX_REGISTER_RAW_SIZE.

2003-05-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Use MAX_REGISTER_SIZE.

2003-05-05  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (mi_cmd_data_write_register_values): Replace
	REGISTER_SIZE with DEPRECATED_REGISTER_SIZE.

2003-05-03  J. Brobecker  <brobecker@@gnat.com>

	From  Thierry Schneider  <tpschneider1@@yahoo.com>:
	* mi-cmds.h (mi_cmd_symbol_list_lines): Add declaration.
	* mi-cmds.c (mi_cmds): Add entry for new MI command.
	* mi-cmd-symbol.c (mi_cmd_symbol_list_lines): New source file
	for all symbol-related commands.

@


1.69.2.12
log
@2003-06-27  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton_dictionary-20030627-merge.
@
text
@a0 24
2003-06-17  Daniel Jacobowitz  <drow@@mvista.com>

        * mi-cmds.c (mi_cmds): Add "-target-disconnect".

2003-06-11  David Carlton  <carlton@@bactrian.org>

	* mi-cmd-stack.c: Include dictionary.h.
	(list_args_or_locals): Update use of ALL_BLOCK_SYMBOLS.

2003-06-11  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (get_register): Replace REGISTER_CONVERTIBLE with
	DEPRECATED_REGISTER_CONVERTIBLE.

2003-06-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-parse.c (_initialize_mi_parse): Delete function.
	* mi-main.c: Include "mi-main.h".
	* mi-interp.c (_initialize_mi_interp): Add declaration.
	* mi-cmd-stack.c: Include "stack.h".
	(select_frame_command_wrapper): Delete extern declaration.
	(mi_cmd_stack_select_frame): Replace select_frame_command_wrapper
	with select_frame_command.

@


1.69.2.13
log
@2003-08-05  David Carlton  <carlton@@kealia.com>

	* configure.in (build_warnings): Delete -Wformat-nonliteral.
	* configure (build_warnings): Ditto.

	* Merge with mainline; tag is carlton_dictionary-20030805-merge.
@
text
@a0 20
2003-08-04  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmds.h (struct mi_cli): Define.
	(struct mi_cmd): Change type of "cli" to "struct mi_cli".
	* mi-cmds.c (mi_cmds): Update table.
	* mi-parse.c (mi_parse): Update.
	* mi-main.c (mi_execute_cli_command): Add "args_p" parameter, make
	others constant.
	(mi_cmd_execute): Update call.
	(captured_mi_execute_command): Ditto.

2003-08-04  David Carlton  <carlton@@kealia.com>

	* mi-main.c (mi_error_last_message): Add "%s" second argument to
	xasprintf call.

2003-06-28  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-out.c (mi_ui_out_impl): Add NULL for redirect member.

@


1.69.2.14
log
@2003-09-17  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton_dictionary-20030917-merge.
@
text
@a0 29
2003-09-17  Andrew Cagney  <cagney@@redhat.com>

	* mi/mi-main.c: Rename REGISTER_BYTE to DEPRECATED_REGISTER_BYTE.

2003-09-10  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_setup_architecture_data): Don't use
	DEPRECATED_REGISTER_BYTES because some architecture don't set it
	and its default is 0. 

2003-08-08  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add "mi2" and "mi3" to
	interpreters that hack around CLI.
	* mi-interp.c (mi3_command_loop): New function.
	(mi_interpreter_resume): Check for "mi3", default to "mi2".

2003-08-07  Andrew Cagney  <cagney@@redhat.com>

	* mi-interp.c (_initialize_mi_interp): Register "mi2" and "mi3".
	Make "mi" select "mi2".

2003-08-05  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmd-env.c (env_execute_cli_command): Use an explicit "%s %s"
	when constructing the run command.
	(mi_cmd_env_cd, mi_cmd_env_path, mi_cmd_env_dir): Simplify command
	string removing the "%s".

@


1.69.2.15
log
@2003-11-11  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton-dictionary-20031111-merge.
@
text
@a0 19
2003-11-06  Andrew Cagney  <cagney@@redhat.com>

	* mi-cmd-var.c (mi_cmd_var_set_format): Replace STREQN with
	strncmp.

2003-10-24  Andrew Cagney  <cagney@@redhat.com>

	* tui-out.c: Fix "fortunatly"[sic].

2003-10-02  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_RAW_SIZE to
	DEPRECATED_REGISTER_RAW_SIZE.

2003-09-30  Andrew Cagney  <cagney@@redhat.com>

	* mi-main.c: Rename REGISTER_VIRTUAL_SIZE to
	DEPRECATED_REGISTER_VIRTUAL_SIZE.

d3 1
a3 1
	* mi-main.c: Rename REGISTER_BYTE to DEPRECATED_REGISTER_BYTE.
@


1.69.2.16
log
@2004-01-26  David Carlton  <carlton@@kealia.com>

	* Merge with mainline; tag is carlton_dictionary-20040126-merge.
@
text
@@


1.68
log
@2002-07-30  Andrew Cagney  <ac131313@@redhat.com>

* symtab.h: Replace #include "gdb_obstack.h" with opaque
declaration.
* cli/cli-cmds.c, cli/cli-script.c: Include "gdb_string.h".
* gnu-v3-abi.c, arc-tdep.c, cli/cli-decode.c: Ditto.
* avr-tdep.c, mon960-rom.c, i960-tdep.c: Ditto.
* arch-utils.c, cli/cli-setshow.c: Unconditionally include
"gdb_string.h".
* Makefile.in (cli-script.o, cli-cmds.o): Update dependencies.
(gnu-v3-abi.o, cli-setshow.o, i960-tdep.o): Ditto.
(cli-decode.o, mi-cmd-var.o, mi-cmd-disas.o): Ditto.
(avr-tdep.o, mon960-rom.o): Ditto.
(aout_stabs_gnu_h): Define.
(symtab_h): Remove $(gdb_obstack_h).
@
text
@d1 8
@


1.67
log
@        * gdbmi.texinfo: Update command examples with real MI behavior.
@
text
@d1 6
@


1.66
log
@        * mi-main.c (captured_mi_execute_command): Add uiout parameter.
        "data" is now a structure which is used to pass data to/from this
        function to mi_execute_command.
        Modify function to comply with requirements from catch_exceptions.
        Store real return result and command's return result in data.
        (mi_execute_command): Use catch_exceptions.
        Use enum to handle actions to be performed instead of overloading
        catch_errors return result and the mi return result.
@
text
@d1 4
@


1.66.2.1
log
@        * mi-cmd-break.c (breakpoint_notify): Only query the breakpoint
        for user breakpoints.
        (mi_cmd_break_insert): Only reset event handlers for MI0 and MI1
        interpreters.
        (mi_cmd_break_watch): Reset uiout output to clear watchpoint
        query. This is only used for MI0 and MI1.

        * mi-console.h (mi_console_file_new): Add "quote" parameter.
        * mi_console.c (struct mi_console_file): Add "quote".
        (mi_console_file_new): Add "quote" parameter.
        (mi_console_raw_packet): Use the quote character specified in
        mi_console_file_new, instead of assuming it is '"'.

        * mi-interp.c (mi_event_channel): New channel for event notifications.
        (mi_interpreter_init): Make static.
        Set event handlers.
        (mi_interpreter_resume): Make static.
        Deal with MI version bump.
        (mi_interpreter_suspend): Make static.
        (mi_interpreter_delete): Ditto.
        (mi_do_one_event): Ditto.
        (mi_cmd_exec_continuation): Ditto.
        (mi_interp_query_hook): Ditto.
        (mi_interp_read_one_line_hook): Ditto.
        (_initialize_mi_interp): Create explicit mi1 interp.

        * mi-events.c (notify_event): New helper function.
        (mi_create_breakpoint, mi_modify_breakpoint, mi_delete_breakpoint,
        mi_create_tracepoint, mi_modify_tracepoint, mi_delete_tracepoint,
        mi_architecture_changed): New functions.

        * mi.h: Add declarations for mi_create_breakpoint, mi_modify_breakpoint,
        mi_delete_breakpoint, mi_create_tracepoint, mi_modify_tracepoint,
        mi_delete_tracepoint, mi_architecture_changed, mi_stdout, mi_stderr,
        mi_stdtarg, mi_stdlog, and mi_eventchannel.

        * mi-main.c (captured_mi_execute_command): Deal with mi version
        bump.
        (mi_load_progress): Ditto.

        * gdbmi.texinfo: Expand notify-async-output to include GDB events.
        Update all examples to show breakpoint events and
        remove redundant breakpoint info on "-break-insert" and "-break-watch".
        The event now supplies everything that is needed.
@
text
@a0 47
2002-06-19  Keith Seitz  <keiths@@redhat.com>

	* mi-cmd-break.c (breakpoint_notify): Only query the breakpoint
	for user breakpoints.
	(mi_cmd_break_insert): Only reset event handlers for MI0 and MI1
	interpreters.
	(mi_cmd_break_watch): Reset uiout output to clear watchpoint
	query. This is only used for MI0 and MI1.

	* mi-console.h (mi_console_file_new): Add "quote" parameter.
	* mi_console.c (struct mi_console_file): Add "quote".
	(mi_console_file_new): Add "quote" parameter.
	(mi_console_raw_packet): Use the quote character specified in
	mi_console_file_new, instead of assuming it is '"'.

	* mi-interp.c (mi_event_channel): New channel for event notifications.
	(mi_interpreter_init): Make static.
	Set event handlers.
	(mi_interpreter_resume): Make static.
	Deal with MI version bump.
	(mi_interpreter_suspend): Make static.
	(mi_interpreter_delete): Ditto.
	(mi_do_one_event): Ditto.
	(mi_cmd_exec_continuation): Ditto.
	(mi_interp_query_hook): Ditto.
	(mi_interp_read_one_line_hook): Ditto.
	(_initialize_mi_interp): Create explicit mi1 interp.

	* mi-events.c (notify_event): New helper function.
	(mi_create_breakpoint, mi_modify_breakpoint, mi_delete_breakpoint,
	mi_create_tracepoint, mi_modify_tracepoint, mi_delete_tracepoint,
	mi_architecture_changed): New functions.

	* mi.h: Add declarations for mi_create_breakpoint, mi_modify_breakpoint,
	mi_delete_breakpoint, mi_create_tracepoint, mi_modify_tracepoint,
	mi_delete_tracepoint, mi_architecture_changed, mi_stdout, mi_stderr,
	mi_stdtarg, mi_stdlog, and mi_eventchannel.

	* mi-main.c (captured_mi_execute_command): Deal with mi version
	bump.
	(mi_load_progress): Ditto.

	* gdbmi.texinfo: Expand notify-async-output to include GDB events.
	Update all examples to show breakpoint events and
	remove redundant breakpoint info on "-break-insert" and "-break-watch".
	The event now supplies everything that is needed.

@


1.66.2.2
log
@Merge with mainline, kseitz_interps-20020619-merge.
@
text
@a47 4
2002-06-17  Keith Seitz  <keiths@@redhat.com>

	* gdbmi.texinfo: Update command examples with real MI behavior.

@


1.66.2.3
log
@        * mi-cmds.h (mi_execute_command): Add "extern".
        (mi_error_last_message): New function.
        * mi-main.c (mi_error_last_message): New function.
        * mi-interp.c (mi_event_handlers): New static global.
        (mi_interpreter_init): Don't install mi event handlers here.
        (mi_interpreter_resume): Install mi event handlers here.
        (mi_interpreter_exec): Don't actually switch interpreters.
        Update error messages.
        exec_proc will return <0 if an error occurs.
@
text
@a0 12
2002-06-24  Keith Seitz  <keiths@@redhat.com>

	* mi-cmds.h (mi_execute_command): Add "extern".
	(mi_error_last_message): New function.
	* mi-main.c (mi_error_last_message): New function.
	* mi-interp.c (mi_event_handlers): New static global.
	(mi_interpreter_init): Don't install mi event handlers here.
	(mi_interpreter_resume): Install mi event handlers here.
	(mi_interpreter_exec): Don't actually switch interpreters.
	Update error messages.
	exec_proc will return <0 if an error occurs.

@


1.66.2.4
log
@        * mi-events.c (mi_register_update): New function.
        * mi-interp.c (mi_event_handlers): Add mi_register_update
        event handler.
        * mi.h (mi_register_update): Add declaration.
@
text
@a0 7
2002-07-22  Keith Seitz  <keiths@@redhat.com>

	* mi-events.c (mi_register_update): New function.
	* mi-interp.c (mi_event_handlers): Add mi_register_update
	event handler.
	* mi.h (mi_register_update): Add declaration.
	
@


1.66.2.5
log
@        * mi-interp.c (mi_event_handlers): Add selected_frame_level_changed
        handler.
        (mi_insert_notify_hooks): Remove breakpoint hooks and frame
        changed hook.
        (mi_remove_notify_hooks): Likewise.
        * mi-events.c (mi_selected_frame_level_changed): New function.
        (mi_interp_frame_changed_hook): Remove.
        (mi_interp_create_breakpoint_hook): Remove.
        (mi_interp_modify_breakpoint_hook): Remove.
        (mi_interp_delete_breakpoint_hook): Remove.
        * mi.h (mi_selected_frame_level_changed): Add declaration.
        (mi_interp_create_breakpoint_hook): Remove declaration.
        (mi_interp_modify_breakpoint_hook): Remove declaration.
        (mi_interp_delete_breakpoint_hook): Remove declaration.
        * mi-cmd-stack.c (mi_cmd_stack_select_frame): If the stack level changes,
        issue a selected_frame_level_changed event.
@
text
@a0 19
2002-07-25  Keith Seitz  <keiths@@redhat.com>

	* mi-interp.c (mi_event_handlers): Add selected_frame_level_changed
	handler.
	(mi_insert_notify_hooks): Remove breakpoint hooks and frame
	changed hook.
	(mi_remove_notify_hooks): Likewise.
	* mi-events.c (mi_selected_frame_level_changed): New function.
	(mi_interp_frame_changed_hook): Remove.
	(mi_interp_create_breakpoint_hook): Remove.
	(mi_interp_modify_breakpoint_hook): Remove.
	(mi_interp_delete_breakpoint_hook): Remove.
	* mi.h (mi_selected_frame_level_changed): Add declaration.
        (mi_interp_create_breakpoint_hook): Remove declaration.
        (mi_interp_modify_breakpoint_hook): Remove declaration.
        (mi_interp_delete_breakpoint_hook): Remove declaration.
	* mi-cmd-stack.c (mi_cmd_stack_select_frame): If the stack level changes,
	issue a selected_frame_level_changed event.

@


1.66.2.6
log
@Merge with kseitz_interps-20020809-merge of CVS head.
@
text
@a85 5
2002-07-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi-cmd-var.c: Include "gdb_string.h".
	* mi-cmd-disas.c: Ditto.

@


1.66.2.7
log
@        * mi-interp.c (mi_event_handlers): Add context_changed event
        handler.
        (mi_command_loop): Remove big block of code repeated in
        mi_interpreter_resume. I don't think this is needed.
        (mi_insert_notify_hooks): Remove context_hook.
        (mi_remove_notify_hooks): Likewise.
        * mi-events.c (mi_context_changed): New function.
        * mi.h (mi_context_changed): Add declaration.
@
text
@a0 11
2002-08-09  Keith Seitz  <keiths@@redhat.com>

        * mi-interp.c (mi_event_handlers): Add context_changed event
        handler.
	(mi_command_loop): Remove big block of code repeated in 
	mi_interpreter_resume. I don't think this is needed.
        (mi_insert_notify_hooks): Remove context_hook.
        (mi_remove_notify_hooks): Likewise.
        * mi-events.c (mi_context_changed): New function.
        * mi.h (mi_context_changed): Add declaration.

a84 18

2002-05-28  Keith Seitz  <keiths@@redhat.com>

	* mi-interp.c:  New file. Almost entirely from Apple's
	sources. Collected and moved here.
	* mi-events.c: Ditto.
	* mi.h: New file.
	* mi-main.c (captured_execute_command): Use catch_exception
	instead of catch_errors.
	(mi_execute_command_wrapper): Remove. Using catch_errors now.
	(mi_input): Make global.
	(mi_load_progress): Ditto.
	Use interpreter functions instead of interpreter_p.
	(mi_command_loop): Moved to mi-interp.c
	(mi0_command_loop): Ditto.
	(mi1_command_loop): Ditto.
	(mi_init_ui): Remove.
	(_initialize_mi_main): Remove. No longer needed.
@


1.66.2.8
log
@        * mi-main.c (mi_cmd_data_list_register_names): Add "-numbers"
        option.
@
text
@a2 5
	* mi-main.c (mi_cmd_data_list_register_names): Add "-numbers"
	option.

2002-08-09  Keith Seitz  <keiths@@redhat.com>

@


1.66.2.9
log
@        * gdbmi.texinfo: Document selected-frame-changed, register-update,
        and context-changed events.
@
text
@a2 5
	* gdbmi.texinfo: Document selected-frame-changed, register-update,
	and context-changed events.

2002-08-09  Keith Seitz  <keiths@@redhat.com>

@


1.66.2.10
log
@        * gdbmi.texinfo (-data-list-register-names): Document "-numbers"
        option.
@
text
@a7 2
	* gdbmi.texinfo (-data-list-register-names): Document "-numbers"
	option.
@


1.66.2.11
log
@        * mi-interp.c (mi_cmd_interpreter_set): Remove. We're not going
        to allow this.
        * mi-cmds.c: Remove "interpreter-set" command.
        * mi-cmds.h (mi_cmd_interpreter_set): Remove.
@
text
@a0 7
2002-08-13  Keith Seitz  <keiths@@redhat.com>

	* mi-interp.c (mi_cmd_interpreter_set): Remove. We're not going
	to allow this.
	* mi-cmds.c: Remove "interpreter-set" command.
	* mi-cmds.h (mi_cmd_interpreter_set): Remove.

@


1.66.2.12
log
@        * mi-cmd-stack.c (mi_cmd_stack_select_frame): Revert 2002-07-25
        change. stack.c now handles it properly.
@
text
@a0 5
2002-08-19  Keith Seitz  <keiths@@redhat.com>

	* mi-cmd-stack.c (mi_cmd_stack_select_frame): Revert 2002-07-25
	change. stack.c now handles it properly.

@


1.66.2.13
log
@        * mi-events.c (mi_target_changed): Renamed from mi_register_update.
        * mi.h (mi_target_changed): Ditto.
        * mi-interp.c (mi_event_handlers): Ditto.
@
text
@a0 6
2002-08-21  Keith Seitz  <keiths@@redhat.com>

	* mi-events.c (mi_target_changed): Renamed from mi_register_update.
	* mi.h (mi_target_changed): Ditto.
	* mi-interp.c (mi_event_handlers): Ditto.

@


1.66.2.14
log
@        * gdbmi.texinfo: Document the interpreter-exec command.
@
text
@a0 4
2002-08-28  Keith Seitz  <keiths@@redhat.com>

	* gdbmi.texinfo: Document the interpreter-exec command.

@


1.66.2.15
log
@        * mi-interp.c (_initialize_mi_interp): Add exec_proc.
        (mi_interpreter_exec): New function. MI's exec_proc.
@
text
@a2 5
	* mi-interp.c (_initialize_mi_interp): Add exec_proc.
	(mi_interpreter_exec): New function. MI's exec_proc.

2002-08-28  Keith Seitz  <keiths@@redhat.com>

@


1.66.2.16
log
@Merge with kseitz_interps-20020930-merge.
@
text
@a153 25
2002-09-29  Andrew Cagney  <ac131313@@redhat.com>

	* mi-out.c (mi_version): New function.
	* mi-out.h (mi_version): Declare.

2002-09-27  Andrew Cagney  <ac131313@@redhat.com>

	From 2002-07-12 Mo DeJong <supermo@@bayarea.net>
	* gdbmi.texinfo (var-evaluate-expression): Note that
	var-list-children must be invoked before child variable
	values can be evaluated.

2002-09-26  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-disas.c (dump_insns): Add text only output for CLI.
        (do_mixed_source_and_assembly): Ditto.

2002-09-11  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (mi_cmd_data_list_register_names): Use cleanups
	for the uiout list. Do the cleanups when returning an error.
	(mi_cmd_data_list_changed_registers): Ditto.
	(mi_cmd_data_list_register_values): Use cleanups for the uiout list
	and tuples. Do the cleanups when returning errors.

@


1.66.2.17
log
@merge from mainline
@
text
@a153 49
2002-10-23  Jeff Johnston  <jjohnstn@@redhat.com>

	* mi-cmd-var.c: Change all remaining occurrences of ui_out_tuple_begin 
	to make_cleanup_ui_out_tuple_begin_end.  Change all remaining 
	occurrences of ui_out_list_begin to make_cleanup_ui_out_list_begin_end.
	Use do_cleanups instead of ui_out_list_end or ui_out_tuple_end.  This 
	is a fix for PR gdb/680.
	* mi-cmd-stack.c: Ditto.
	* mi-main.c: Ditto.

2002-10-22  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (mi_cmd_thread_select): Only return MI_CMD_CAUGHT_ERROR
	when we really did catch an error(). If we got GDB_RC_FAIL, return
	MI_CMD_ERROR instead.

2002-10-03  Jeff Johnston  <jjohnstn@@redhat.com>

	* gdbmi.texinfo: Fix examples that show frames to remove
	extraneous blank in level field.  Part of fix for PR gdb/192.
        
2002-10-03  Jeff Johnston  <jjohnstn@@redhat.com>
        
	* mi-cmd-var.c (mi_cmd_var_update): Fix for PR gdb/672.  For m2, 
	output list begin and end for "changelist" rather than tuple begin/end.
	(varobj_update_one): For m2, add tuple begin and end for varobj 
	update output.

2002-10-02  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-main.c (mi_cmd_exec_return): Don't use
	return_command_wrapper, use return_command instead.
	(mi_cmd_exec_interrupt): Don't use
	interrupt_target_command_wrapper, use interrupt_target_command
	instead.
	(return_command_wrapper, interrupt_target_command_wrapper):
	Delete.
	Include frame.h.

2002-10-01  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (mi2_command_loop): New function.
	(mi0_command_loop): Delete function.
	(_initialize_mi_main): Recognize, and default to, "mi2".  Do not
	recognize "mi0".
	* mi-out.c (mi_table_begin): Remove mi0 code.
	(mi_table_body, mi_table_end): Ditto.
	(mi_table_header, mi_open, mi_close): Ditto.

@


1.66.2.18
log
@2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* interps.h (GDB_INTERPRETER_MI2): Define.
	(GDB_INTERPRETER_MI0): Remove.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c: Increment mi version numbers: 0->1, 1->2,
	and 2->3. Remove MI0 references.
	* mi-events.c: Ditto.
	* mi-main.c: Ditto. Remove erroneously merged code.
	* mi.h: Ditto.
@
text
@a0 8
2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c: Increment mi version numbers: 0->1, 1->2,
	and 2->3. Remove MI0 references.
	* mi-events.c: Ditto.
	* mi-main.c: Ditto. Remove erroneously merged code.
	* mi.h: Ditto.
	
@


1.66.2.19
log
@2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-cmd-break.c (mi_cmd_break_insert): Initialize old_hooks.
	(mi_cmd_break_insert, mi_cmd_break_watch, mi_cmd_break_insert):
	Increment MI version number.
@
text
@a2 6
	* mi-cmd-break.c (mi_cmd_break_insert): Initialize old_hooks.
	(mi_cmd_break_insert, mi_cmd_break_watch, mi_cmd_break_insert):
	Increment MI version number.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

@


1.66.2.20
log
@2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* interps.h (struct gdb_interpreter_procs): Remove do_one_event_proc.
	(interp_do_one_event_ftype): Delete.
	* interps.c (gdb_new_interpreter): Remove setup of do_one_event
	procedure.
	(interpreter_do_one_event): Delete.
	* event-loop.c (start_event_loop): Remove no-op call to
	interpreter_do_one_event.
	* cli/cli-interps.c: (cli_interpreter_do_one_event): Delete.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c (mi_interpreter_do_one_event): Remove.
@
text
@a2 4
	* mi-interp.c (mi_interpreter_do_one_event): Remove.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

@


1.66.2.21
log
@2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* cli/cli-interp.c (cli_interpreter_delete): Delete.
	(_initialize_cli_interp): Remove delete_proc.

	* interps.h (struct gdb_interpreter_procs): Remove delete_proc.
	(interp_delete_ftype): Delete.
	(gdb_delete_interpreter): Remove.

	* interps.c (gdb_delete_interpreter): Remove.
	(gdb_new_interpreter): Don't initialize delete_proc.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c mi_interpreter_delete): Remove.
	(_initialize_mi_interp): Remove mi_interpreter_delete.
@
text
@a2 5
	* mi-interp.c mi_interpreter_delete): Remove.
	(_initialize_mi_interp): Remove mi_interpreter_delete.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

@


1.66.2.22
log
@2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* event-top.c (display_gdb_prompt): Use
	gdb_interpreter_display_prompt_p.
	* cli/cli-interp.c (cli_interpreter_display_prompt_p): Rename from
	cli_interpreter_display_prompt and rewrite.
	(_initialize_cli_interp): New proc name is
	cli_interpreter_display_prompt_p.
	* interps.c (gdb_new_interpreter): Initialize prompt_proc_p
	instead of prompt_proc.
	(gdb_interpreter_display_prompt_p): Rewrite as a predicate.
	* interps.h (interp_prompt_ftype): Update typedef.
	(struct gdb_interpreter_procs): Rename prompt_proc to
	prompt_proc_p.
	(gdb_interpreter_display_prompt_p): Export this instead of old
	function.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c (_initialize_mi_interp): Use mi_interpreter_prompt_p
	instead of mi_interpreter_prompt.
	(mi_interpreter_prompt_p): Rename from mi_interpreter_prompt and
	rewrite.
@
text
@a2 7
	* mi-interp.c (_initialize_mi_interp): Use mi_interpreter_prompt_p
	instead of mi_interpreter_prompt.
	(mi_interpreter_prompt_p): Rename from mi_interpreter_prompt and
	rewrite.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

@


1.66.2.23
log
@2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* cli/cli-interp.c (_initialize_cli_interp): Call
	gdb_interpreter_new and gdb_interpreter_add.
	* top.c (gdb_init): Call gdb_interpreter_lookup.
	(gdb_init): Call gdb_interpreter_set.
	* interps.c (gdb_interpreter_new): Renamed from
	gdb_new_interpreter.
	(gdb_interpreter_add): Renamed from gdb_add_interpreter.
	(gdb_interpreter_set): Renamed from gdb_set_interpreter.
	(gdb_interpreter_lookup): Renamed from gdb_lookup_interpreter.
	(gdb_interpreter_current): Renamed from gdb_current_interpreter.
	Update all callers.
	* interps.h: Ditto.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-interp.c (mi_interpreter_resume): Ditto.
	(mi_cmd_interpreter_exec): Use gdb_interpreter_lookup.
	(_initialize_mi_interp): Use gdb_interpreter_new,
	gdb_interpreter_add.
	* mi-cmd-break.c (mi_cmd_break_insert): Use
	gdb_interpreter_current_is_named_p.
	(mi_cmd_break_watch): Ditto.
	* mi-events.c (mi_interp_stack_changed_hook): Ditto.
	(event_notify): Ditto.
	* mi-main.c (captured_mi_execute_command): Use
	gdb_interpreter_current_is_named_p.
	(mi_load_progress): Ditto.
@
text
@a2 15
	* mi-interp.c (mi_interpreter_resume): Ditto.
	(mi_cmd_interpreter_exec): Use gdb_interpreter_lookup.
	(_initialize_mi_interp): Use gdb_interpreter_new,
	gdb_interpreter_add.
	* mi-cmd-break.c (mi_cmd_break_insert): Use
	gdb_interpreter_current_is_named_p.
	(mi_cmd_break_watch): Ditto.
	* mi-events.c (mi_interp_stack_changed_hook): Ditto.
	(event_notify): Ditto.
	* mi-main.c (captured_mi_execute_command): Use
	gdb_interpreter_current_is_named_p.
	(mi_load_progress): Ditto.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

@


1.66.2.24
log
@2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* interps.h (clear_interpreter_hooks): Add 'extern' keyword.

2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

	* mi.h: Clean up interface, removing unnecessarily exported
	functions and data structures.
	* mi-events.c (mi_event_handlers): Move here...
	* mi-interps.c: .. from here.
	Include gdb_string.h.
@
text
@a2 8
	* mi.h: Clean up interface, removing unnecessarily exported
	functions and data structures.
	* mi-events.c (mi_event_handlers): Move here...
	* mi-interps.c: .. from here.
	Include gdb_string.h.
	
2002-11-04  Elena Zannoni  <ezannoni@@redhat.com>

a11 2
	

@


1.66.2.25
log
@2002-11-05  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-stack.c (mi_cmd_stack_select_frame): Remove stray statement.
        Remove include of gdb-events.h.
@
text
@a0 5
2002-11-05  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-stack.c (mi_cmd_stack_select_frame): Remove stray statement.
        Remove include of gdb-events.h.

@


1.65
log
@* frame.h (selected_frame_level): Document as deprecated.
(frame_relative_level): Declare.
* stack.c (frame_relative_level): New function.
(selected_frame_level): Document as deprecated.
(select_frame): Do not set the selected_frame_level.

* stack.c (frame_info, record_selected_frame): Update.
(frame_command, current_frame_command): Update.
(up_silently_base, up_command, down_silently_base): Update.
(down_command): Update.
* inflow.c (kill_command): Update.
* tracepoint.c (finish_tfind_command): Update.
* corelow.c (core_open): Update.
* thread.c (info_threads_command): Update.
(do_captured_thread_select): Update.
* infcmd.c (finish_command): Update.
* breakpoint.c (insert_breakpoints, do_enable_breakpoint): Update.
@
text
@d1 11
@


1.65.4.1
log
@regbuf
@
text
@a0 7
2002-05-11  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c: Include "regbuf.h".
	(old_regs): Change type of old_regs to a regbuf.
	(register_changed_p): Use regbuf_read and regbuf_write.
	(setup_architecture_data): Use regbuf_xmalloc.

@


1.65.4.2
log
@regbuf->regcache
@
text
@a0 6
2002-05-16  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c (register_changed_p): Update.
	(setup_architecture_data): Update
	(_initialize_mi_main): Don't call setup_architecture_data.

@


1.65.4.3
log
@merge from trunk
@
text
@a13 11
2002-05-20  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add uiout parameter.
	"data" is now a structure which is used to pass data to/from this
	function to mi_execute_command.
	Modify function to comply with requirements from catch_exceptions.
	Store real return result and command's return result in data.
	(mi_execute_command): Use catch_exceptions.
	Use enum to handle actions to be performed instead of overloading
	catch_errors return result and the mi return result.

@


1.65.4.4
log
@fixes for HEAD->branch merge.
@
text
@a0 4
2002-06-15  Andrew Cagney  <ac131313@@redhat.com>

	* mi-main.c: Do not include "regbuf.h".

@


1.65.4.5
log
@Merge with trunk.
@
text
@a28 15
2002-06-17  Keith Seitz  <keiths@@redhat.com>

	* gdbmi.texinfo: Update command examples with real MI behavior.

2002-05-20  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add uiout parameter.
	"data" is now a structure which is used to pass data to/from this
	function to mi_execute_command.
	Modify function to comply with requirements from catch_exceptions.
	Store real return result and command's return result in data.
	(mi_execute_command): Use catch_exceptions.
	Use enum to handle actions to be performed instead of overloading
	catch_errors return result and the mi return result.

@


1.65.4.6
log
@merge with trunk
@
text
@a43 15
2002-06-17  Keith Seitz  <keiths@@redhat.com>

	* gdbmi.texinfo: Update command examples with real MI behavior.

2002-05-20  Keith Seitz  <keiths@@redhat.com>

	* mi-main.c (captured_mi_execute_command): Add uiout parameter.
	"data" is now a structure which is used to pass data to/from this
	function to mi_execute_command.
	Modify function to comply with requirements from catch_exceptions.
	Store real return result and command's return result in data.
	(mi_execute_command): Use catch_exceptions.
	Use enum to handle actions to be performed instead of overloading
	catch_errors return result and the mi return result.

@


1.64
log
@* defs.h (read_relative_register_raw_bytes): Delete declaration.
* frame.c (frame_register_read): New function.  Return non-zero on
success.
(read_relative_register_raw_bytes_for_frame): Delete.
(read_relative_register_raw_bytes): Delete.
* frame.h (frame_register_read): Declare.
* d30v-tdep.c: Update Copyright.  Use frame_register_read.
* sh-tdep.c: Ditto.
* infcmd.c (do_registers_info): Ditto.
* hppa-tdep.c: Ditto.
* rs6000-tdep.c: Ditto.
* h8500-tdep.c: Ditto.
* mips-tdep.c: Ditto.
* h8300-tdep.c: Ditto.
* z8k-tdep.c: Ditto.
@
text
@d1 4
@


1.63
log
@2002-04-07  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-disas.c: Run through indent.
@
text
@d1 6
@


1.62
log
@2002-04-07  Elena Zannoni  <ezannoni@@redhat.com>

        * mi-cmd-disas.c (dump_insns): New function.
        (do_mixed_source_and_assembly): New function.
        (do_assembly_only): New function.
        (do_disassembly): New function.
        (mi_cmd_disassemble): Rewrite using smaller, more modular
        functions.
@
text
@d3 4
@


1.61
log
@gdb/ChangeLog:
* stack.c (get_selected_block): Add new argument `addr_in_block',
used to return the exact code address we used to select the block,
not just the block.
* blockframe.c (get_frame_block, get_current_block): Same.
* frame.h (get_frame_block, get_current_block,
get_selected_block): Update declarations.
* linespec.c, stack.c, blockframe.c, breakpoint.c, findvar.c,
linespec.c, varobj.c, printcmd.c, symtab.c: Callers changed.

gdb/mi/ChangeLog:
* mi-cmd-stack.c (list_args_or_locals): Pass new arg to
get_frame_block.  (See entry in gdb/ChangeLog.)
@
text
@d1 9
@


1.60
log
@2002-04-05  Elena Zannoni  <ezannoni@@redhat.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): Use TARGET_PRINT_INSN
	instead of tm_print_insn.
	Update copyright year.
@
text
@d1 5
@


1.59
log
@2002-04-04  Daniel Jacobowitz  <drow@@mvista.com>

        * mi-cmd-disas.c (mi_cmd_disassemble): Skip end-of-function
        markers in the line table.
@
text
@d1 6
@


1.58
log
@* defs.h (XMALLOC): Define.
* gdb-events.sh (XMALLOC): Delete macro.
* gdb-events.c, gdb-events.h: Regenerate.
* gdbarch.sh (XMALLOC): Delete macro.
* gdbarch.c: Regenerate.
* serial.c (XMALLOC): Delete macro.
* ui-file.c (XMALLOC): Ditto.
* ser-unix.h (XMALLOC): Ditto.
* sh-tdep.c (XMALLOC): Ditto.
* ui-out.c (XMALLOC): Ditto.
* utils.c (XMALLOC): Ditto.
* i386-tdep.c (XMALLOC): Ditto.
* gdb-events.c (XMALLOC): Ditto.
* d10v-tdep.c (XMALLOC): Ditto.
* cli-out.c (XMALLOC): Ditto.

* cli-out.c, d10v-tdep.c, gdb-events.c: Update copyright.
* gdb-events.sh, i386-tdep.c, ser-unix.h, serial.c: Ditto.
* ui-file.c, ui-out.c: Ditto.
@
text
@d1 5
@


1.57
log
@Fix PR gdb/287.  From wiz at danbala.  Then->than and typos.
@
text
@d1 12
@


1.57.2.1
log
@2002-04-07  Michael Chastain  <mec@@shout.net>

	Merge from HEAD to fix PR gdb/381:

	2002-04-04  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): Skip end-of-function
 	markers in the line table.
@
text
@a0 9
2002-04-07  Michael Chastain  <mec@@shout.net>

	Merge from HEAD to fix PR gdb/381:

	2002-04-04  Daniel Jacobowitz  <drow@@mvista.com>

	* mi-cmd-disas.c (mi_cmd_disassemble): Skip end-of-function
 	markers in the line table.
 
@


1.56
log
@* mi-cmd-stack.c (list_args_or_locals): Move declaration of
print_me inside the loop body, so it gets re-initialized every
iteration.  The cases for the different symbol kinds leave
print_me unchanged if they don't want the symbol printed.
@
text
@d1 6
@


1.55
log
@Eliminate texinfo 3.12 hacks.
@
text
@d1 7
@


1.54
log
@FOOBAR, didn't ChangeLog UI_OUT removal.
@
text
@d1 5
a5 1
2002-01-13  Andrew Cagney  <ac131313@@redhat.com>
@


1.53
log
@Remove else clause to #if UI_OUT.
@
text
@d3 3
a5 5
	* mi-cmd-stack.c: 

	* mi-cmd-break.c: 

	* mi-main.c: 
@


1.52
log
@Fix the application of GFDL in the Copyright notice.
@
text
@d1 8
@


1.51
log
@2001-10-12  Daniel Jacobowitz  <drow@@mvista.com>

        * symtab.h (struct block): (ALL_BLOCK_SYMBOLS): New macro.

        * symtab.c (find_pc_sect_symtab): Use ALL_BLOCK_SYMBOLS.
        (make_symbol_completion_list): Likewise.
        (make_symbol_overload_list): Likewise.
        * buildsym.c (finish_block): Likewise.
        * breakpoint.c (get_catch_sals):  Likewise.
        * mdebugread.c (mylookup_symbol): Likewise.
        * objfiles.c (objfile_relocate): Likewise.
        * printcmd.c (print_frame_args): Likewise.
        * stack.c (print_block_frame_locals): Likewise.
        (print_block_frame_labels): Likewise.
        (print_frame_arg_vars): Likewise.
        * symmisc.c (dump_symtab): Likewise.
        * tracepoint.c (add_local_symbols): Likewise.
        (scope_info): Likewise.

2001-10-12  Daniel Jacobowitz  <drow@@mvista.com>

        * mi-cmd-stack.c (list_args_or_locals): Use ALL_BLOCK_SYMBOLS.

2001-10-12  Daniel Jacobowitz  <drow@@mvista.com>

        * generic/gdbtk-cmds.c (gdb_listfuncs): Use ALL_BLOCK_SYMBOLS.
        * generic/gdbtk-stack.c (gdb_block_vars): Likewise.
        (gdb_get_blocks): Likewise.
        (gdb_get_vars_command): Likewise.
5~
@
text
@d1 4
@


1.50
log
@Add ui_out parameter to libgdb functions.
@
text
@d1 4
@


1.49
log
@	* mi-cmd-var.c (varobj_update_one): Update call to
	varobj_update to reflect recent api change.
@
text
@d1 9
@


1.48
log
@Move libgdb library functions to gdb.h (new file).
Update everything related to this.
@
text
@d1 5
@


1.48.2.1
log
@Fix the use of GFDL in the Copyright notice.
@
text
@a0 4
2001-12-30  Eli Zaretskii  <eliz@@is.elta.co.il>

	* gdbmi.texinfo: Fix the application of GFDL in the Copyright notice.

@


1.47
log
@* mi-main.c (mi_execute_command): Flush output after ``(gdb)''
prompt.  Bug reported by David Whedon.
(mi_execute_async_cli_command): Ditto.
(mi_exec_async_cli_cmd_continuation): Ditto.
(mi_command_loop): Ditto.
@
text
@d1 5
@


1.46
log
@* mi-out.c (mi_out_new): Initialize suppress_ouput field of newly
created `struct ui_out_data'.
@
text
@d1 8
@


1.45
log
@Fix memory leak and compilation problems using AIX 5 native compiler.
@
text
@d1 5
@


1.44
log
@* mi-main.c (mi_cmd_data_evaluate_expression): Replace value_ptr
with `struct value *'.
@
text
@d1 9
@


1.43
log
@Make function declarators match function declarations.
@
text
@d1 5
@


1.42
log
@Replace:
  if (interpreter_p && strncmp (interpreter_p, "mi", 2) == 0)
with:
  if (ui_out_is_mi_like_p (uiout))
@
text
@d1 6
@


1.41
log
@For MI>0, output full breakpoint table header information.  Output the
breakpoint table body as a list.
@
text
@d1 4
@


1.40
log
@delete reference to query output
@
text
@d1 14
@


1.39
log
@* mi-cmd-stack.c (list_args_or_locals): Output a list of "args" or
"locals" entries.
* gdbmi.texinfo (stack-list-locals, stack-list-arguments)
(exec-interrupt, target-select, thread-select): Update
documentation.
* mi-stack.exp: Update.  Output for args=... and
locals=... changed to a list.
@
text
@d3 5
@


1.38
log
@* mi-cmd-stack.c (mi_cmd_stack_list_frames): Output a list of
"stack" entries.
(mi_cmd_stack_list_args): Ditto for "stack-args".
* gdbmi.texinfo (stack-list-frames, stack-list-arguments): Update
documentation.
(GDB/MI Stack Manipulation Commands): Fix section title.  Was
Stack Manipulation Commands in GDB/MI.
* mi-stack.exp: Update. Output for stack=..., args=... and
stack-args=... changed to a list.
@
text
@d3 8
@


1.37
log
@* stack.c (print_frame): For ui_out, output a list of arguments.
Update all tests.  Update doco.
@
text
@d1 10
@


1.36
log
@Update data-read-memory so that it outputs lists.
@
text
@d3 6
@


1.35
log
@For data-list-register-values output a list of register values.
@
text
@d3 6
@


1.34
log
@Output register-names as a list.
@
text
@d3 6
@


1.33
log
@data-list-changed-registers outputs a list of registers.
@
text
@d1 9
@


1.32
log
@Change mi/data-disassemble command output to a list ([]) instead of
({}).
@
text
@d3 7
@


1.31
log
@* mi-out.c (struct ui_out_data): Replace field first_header with
suppress_output.
(mi_begin, mi_end): Check suppress_header.
(mi_field_int, mi_field_skip): Ditto.
(mi_field_string, mi_field_fmt): Ditto.
(mi_table_begin): When nr_rows is zero, set suppress_header else,
output the start of the header.
(mi_table_body): Clear suppress header.
@
text
@d1 11
@


1.30
log
@Output ``[]'' when a list.
@
text
@d3 11
@


1.29
log
@* ui-out.h (ui_out_table_header): Add parameter ``col_name''.
(table_header_ftype): Ditto.
* cli-out.c (cli_table_header): Update.
* ui-out.c (ui_out_table_header): Update.
(uo_table_header): Update.
(default_table_header): Update.
(append_header_to_list): Update.
(struct ui_out_header): Add field ``col_name''.
(append_header_to_list): Use xstrdup.  Initialize col_name.
* breakpoint.c (breakpoint_1): Pass COL_NAME to
ui_out_table_header.
@
text
@d1 5
@


1.28
log
@* ui-out.c (ui_out_table_begin): Add parameter ``nr_rows''.
(default_table_begin): Ditto.
* breakpoint.c (breakpoint_1): Pass nr_printable_breakpoints to
ui_out_table_begin.
Update everything.
@
text
@d1 4
@


1.27
log
@Recognize -i=mi0, -i=mi1 and -i=mi.
@
text
@d3 5
@


1.26
log
@* gdbmi.texinfo (GDB/MI Output Syntax): Add tuples and lists to
syntax.
(GDB/MI Draft Changes to Output Syntax): Delete section.
@
text
@d1 11
@


1.25
log
@s/supress/suppress/
@
text
@d1 6
@


1.24
log
@Oops (again), missed a comment.
@
text
@d1 4
@


1.23
log
@Move supress_field_separator logic into mi_open() and mi_close().
@
text
@d8 1
a8 1
	(mi_table_header): 
@


1.22
log
@Oops.  Clean up changelog entry.
@
text
@d3 10
@


1.21
log
@Make char *, const char *.
@
text
@d3 8
a10 8
	* mi-out.c (mi_table_begin): 
	(mi_table_header): 
	(mi_field_int): 
	(mi_field_skip): 
	(mi_field_string): 
	(mi_field_fmt): 
	(mi_text): 
	(mi_message): 
@


1.20
log
@Output ``[...]'' when a list.
@
text
@d1 11
@


1.19
log
@s/ui_out_list/ui_out_tupple/
@
text
@d1 4
@


1.18
log
@Pass the tupple/list parameter.
@
text
@d1 9
@


1.17
log
@Fix -Werror problem with mi-main.c.
@
text
@d1 10
@


1.16
log
@Replace ui_out_list_{begin,end}() with ui_out_{begin,end}().
@
text
@d1 5
@


1.15
log
@* config/pa/xm-hppah.h (malloc): Really delete declaration
(MALLOC_INCOMPATIBLE): Really delete macro.
* cli/cli-cmds.c (apropos_command): Use xcalloc.
@
text
@d1 6
@


1.14
log
@	* gdbint.texinfo: Change Permissions to GFDL.  Update Copyright.

	* gdbgui.texinfo: Change Permissions to GFDL.  Update Copyright.
	Replace "GDB" with "@@value{GDBN}".  Fix markup.

	* annotate.texi: Change Permissions to GFDL.  Update Copyright.

	* gdb.texinfo: Change Permissions to GFDL.  Update Copyright.

	* gdbmi.texinfo: Update copyright.  Change Permissions to GFDL.
@
text
@d1 4
@


1.13
log
@Zap -Wuninitialized warnings.
@
text
@d1 4
@


1.12
log
@Zap __STDC__ references.
@
text
@d1 5
@


1.11
log
@Eliminate ARCH_NUM_REGS.
@
text
@d1 4
@


1.10
log
@Update/correct copyright notices.
@
text
@d1 8
@


1.9
log
@Add __FILE__ and __LINE__ parameter to internal_error() /
internal_verror().
@
text
@d1 7
@


1.8
log
@2001-01-27  Fernando Nasser  <fnasser@@redhat.com>

	From Momchil Velikov  <velco@@fadata.bg>
	* mi-cmd-disas.c (gdb_dis_asm_read_memory): Add missing memory
	attributes argument in the call to `xfer_memory'.
@
text
@d1 8
@


1.7
log
@Removed (tui and mi) directory prefixes from ChangeLog comments that I
added in last commit.
@
text
@d1 6
@


1.6
log
@Put mi and tui comments for free -> xfree change in proper ChangeLogs.
@
text
@d3 2
a4 3
	* mi/mi-cmd-disas.c, mi/mi-cmd-var.c, mi/mi-console.c,
	mi/mi-main.c, mi/mi-parse.c: Replace occurrences of free()
	with xfree().
@


1.5
log
@Replace asprintf() / vasprintf() with xasprintf() xvasprintf().
@
text
@d1 6
@


1.4
log
@Spelling changes from Dmitry Sivachenko <dima@@Chg.RU>.
@
text
@d1 5
@


1.3
log
@	* gdbmi.texinfo: Change flathead -> @@sc{gdb/mi}.
	Fix typos and markup mistakes (from Dmitry S.
	Sivachenko <dima@@Chg.RU>).
@
text
@d1 6
@


1.2
log
@	* gdbmi.texinfo: Change GDB -> @@value{GDBN}, and
	(gdb) -> (@@value{GDBP}).  Fix a few typos and some markup.  From
	Dmitry S. Sivachenko <dima@@Chg.RU>.
@
text
@d1 6
@


1.1
log
@Rename mi/ChangeLog-mi -> mi/ChangeLog
@
text
@d1 6
@

