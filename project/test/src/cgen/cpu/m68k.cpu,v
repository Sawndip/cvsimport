head	1.2;
access;
symbols
	sid-snapshot-20180601:1.2
	cgen-snapshot-20180601:1.2
	sid-snapshot-20180501:1.2
	cgen-snapshot-20180501:1.2
	sid-snapshot-20180401:1.2
	cgen-snapshot-20180401:1.2
	sid-snapshot-20180301:1.2
	cgen-snapshot-20180301:1.2
	sid-snapshot-20180201:1.2
	cgen-snapshot-20180201:1.2
	sid-snapshot-20180101:1.2
	cgen-snapshot-20180101:1.2
	sid-snapshot-20171201:1.2
	cgen-snapshot-20171201:1.2
	sid-snapshot-20171101:1.2
	cgen-snapshot-20171101:1.2
	sid-snapshot-20171001:1.2
	cgen-snapshot-20171001:1.2
	sid-snapshot-20170901:1.2
	cgen-snapshot-20170901:1.2
	sid-snapshot-20170801:1.2
	cgen-snapshot-20170801:1.2
	sid-snapshot-20170701:1.2
	cgen-snapshot-20170701:1.2
	sid-snapshot-20170601:1.2
	cgen-snapshot-20170601:1.2
	sid-snapshot-20170501:1.2
	cgen-snapshot-20170501:1.2
	sid-snapshot-20170401:1.2
	cgen-snapshot-20170401:1.2
	sid-snapshot-20170301:1.2
	cgen-snapshot-20170301:1.2
	sid-snapshot-20170201:1.2
	cgen-snapshot-20170201:1.2
	sid-snapshot-20170101:1.2
	cgen-snapshot-20170101:1.2
	sid-snapshot-20161201:1.2
	cgen-snapshot-20161201:1.2
	sid-snapshot-20161101:1.2
	cgen-snapshot-20161101:1.2
	sid-snapshot-20160901:1.2
	cgen-snapshot-20160901:1.2
	sid-snapshot-20160801:1.2
	cgen-snapshot-20160801:1.2
	sid-snapshot-20160701:1.2
	cgen-snapshot-20160701:1.2
	sid-snapshot-20160601:1.2
	cgen-snapshot-20160601:1.2
	sid-snapshot-20160501:1.2
	cgen-snapshot-20160501:1.2
	sid-snapshot-20160401:1.2
	cgen-snapshot-20160401:1.2
	sid-snapshot-20160301:1.2
	cgen-snapshot-20160301:1.2
	sid-snapshot-20160201:1.2
	cgen-snapshot-20160201:1.2
	sid-snapshot-20160101:1.2
	cgen-snapshot-20160101:1.2
	sid-snapshot-20151201:1.2
	cgen-snapshot-20151201:1.2
	sid-snapshot-20151101:1.2
	cgen-snapshot-20151101:1.2
	sid-snapshot-20151001:1.2
	cgen-snapshot-20151001:1.2
	sid-snapshot-20150901:1.2
	cgen-snapshot-20150901:1.2
	sid-snapshot-20150801:1.2
	cgen-snapshot-20150801:1.2
	sid-snapshot-20150701:1.2
	cgen-snapshot-20150701:1.2
	sid-snapshot-20150601:1.2
	cgen-snapshot-20150601:1.2
	sid-snapshot-20150501:1.2
	cgen-snapshot-20150501:1.2
	sid-snapshot-20150401:1.2
	cgen-snapshot-20150401:1.2
	sid-snapshot-20150301:1.2
	cgen-snapshot-20150301:1.2
	sid-snapshot-20150201:1.2
	cgen-snapshot-20150201:1.2
	sid-snapshot-20150101:1.2
	cgen-snapshot-20150101:1.2
	sid-snapshot-20141201:1.2
	cgen-snapshot-20141201:1.2
	sid-snapshot-20141101:1.2
	cgen-snapshot-20141101:1.2
	sid-snapshot-20141001:1.2
	cgen-snapshot-20141001:1.2
	sid-snapshot-20140901:1.2
	cgen-snapshot-20140901:1.2
	sid-snapshot-20140801:1.2
	cgen-snapshot-20140801:1.2
	sid-snapshot-20140701:1.2
	cgen-snapshot-20140701:1.2
	sid-snapshot-20140601:1.2
	cgen-snapshot-20140601:1.2
	sid-snapshot-20140501:1.2
	cgen-snapshot-20140501:1.2
	sid-snapshot-20140401:1.2
	cgen-snapshot-20140401:1.2
	sid-snapshot-20140301:1.2
	cgen-snapshot-20140301:1.2
	sid-snapshot-20140201:1.2
	cgen-snapshot-20140201:1.2
	sid-snapshot-20140101:1.2
	cgen-snapshot-20140101:1.2
	sid-snapshot-20131201:1.2
	cgen-snapshot-20131201:1.2
	sid-snapshot-20131101:1.2
	cgen-snapshot-20131101:1.2
	sid-snapshot-20131001:1.2
	cgen-snapshot-20131001:1.2
	sid-snapshot-20130901:1.2
	cgen-snapshot-20130901:1.2
	sid-snapshot-20130801:1.2
	cgen-snapshot-20130801:1.2
	sid-snapshot-20130701:1.2
	cgen-snapshot-20130701:1.2
	sid-snapshot-20130601:1.2
	cgen-snapshot-20130601:1.2
	sid-snapshot-20130501:1.2
	cgen-snapshot-20130501:1.2
	sid-snapshot-20130401:1.2
	cgen-snapshot-20130401:1.2
	sid-snapshot-20130301:1.2
	cgen-snapshot-20130301:1.2
	sid-snapshot-20130201:1.2
	cgen-snapshot-20130201:1.2
	sid-snapshot-20130101:1.2
	cgen-snapshot-20130101:1.2
	sid-snapshot-20121201:1.2
	cgen-snapshot-20121201:1.2
	sid-snapshot-20121101:1.2
	cgen-snapshot-20121101:1.2
	sid-snapshot-20121001:1.2
	cgen-snapshot-20121001:1.2
	sid-snapshot-20120901:1.2
	cgen-snapshot-20120901:1.2
	sid-snapshot-20120801:1.2
	cgen-snapshot-20120801:1.2
	sid-snapshot-20120701:1.2
	cgen-snapshot-20120701:1.2
	sid-snapshot-20120601:1.2
	cgen-snapshot-20120601:1.2
	sid-snapshot-20120501:1.2
	cgen-snapshot-20120501:1.2
	sid-snapshot-20120401:1.2
	cgen-snapshot-20120401:1.2
	sid-snapshot-20120301:1.2
	cgen-snapshot-20120301:1.2
	sid-snapshot-20120201:1.2
	cgen-snapshot-20120201:1.2
	sid-snapshot-20120101:1.2
	cgen-snapshot-20120101:1.2
	sid-snapshot-20111201:1.2
	cgen-snapshot-20111201:1.2
	sid-snapshot-20111101:1.2
	cgen-snapshot-20111101:1.2
	sid-snapshot-20111001:1.2
	cgen-snapshot-20111001:1.2
	sid-snapshot-20110901:1.2
	cgen-snapshot-20110901:1.2
	sid-snapshot-20110801:1.2
	cgen-snapshot-20110801:1.2
	sid-snapshot-20110701:1.2
	cgen-snapshot-20110701:1.2
	sid-snapshot-20110601:1.2
	cgen-snapshot-20110601:1.2
	sid-snapshot-20110501:1.2
	cgen-snapshot-20110501:1.2
	sid-snapshot-20110401:1.2
	cgen-snapshot-20110401:1.2
	sid-snapshot-20110301:1.2
	cgen-snapshot-20110301:1.2
	sid-snapshot-20110201:1.2
	cgen-snapshot-20110201:1.2
	sid-snapshot-20110101:1.2
	cgen-snapshot-20110101:1.2
	sid-snapshot-20101201:1.2
	cgen-snapshot-20101201:1.2
	sid-snapshot-20101101:1.2
	cgen-snapshot-20101101:1.2
	sid-snapshot-20101001:1.2
	cgen-snapshot-20101001:1.2
	sid-snapshot-20100901:1.2
	cgen-snapshot-20100901:1.2
	sid-snapshot-20100801:1.2
	cgen-snapshot-20100801:1.2
	sid-snapshot-20100701:1.2
	cgen-snapshot-20100701:1.2
	sid-snapshot-20100601:1.2
	cgen-snapshot-20100601:1.2
	sid-snapshot-20100501:1.2
	cgen-snapshot-20100501:1.2
	sid-snapshot-20100401:1.2
	cgen-snapshot-20100401:1.2
	sid-snapshot-20100301:1.2
	cgen-snapshot-20100301:1.2
	sid-snapshot-20100201:1.2
	cgen-snapshot-20100201:1.2
	sid-snapshot-20100101:1.2
	cgen-snapshot-20100101:1.2
	sid-snapshot-20091201:1.2
	cgen-snapshot-20091201:1.2
	sid-snapshot-20091101:1.2
	cgen-snapshot-20091101:1.2
	sid-snapshot-20091001:1.2
	cgen-snapshot-20091001:1.2
	arc-sim-20090309:1.1
	sid-snapshot-20090901:1.2
	cgen-snapshot-20090901:1.2
	sid-snapshot-20090801:1.1
	cgen-snapshot-20090801:1.1
	sid-snapshot-20090701:1.1
	cgen-snapshot-20090701:1.1
	dje-cgen-play1-branch:1.1.0.88
	dje-cgen-play1-branchpoint:1.1
	cgen-1_1-branch:1.1.0.86
	cgen-1_1-branchpoint:1.1
	sid-snapshot-20090601:1.1
	cgen-snapshot-20090601:1.1
	sid-snapshot-20090501:1.1
	cgen-snapshot-20090501:1.1
	sid-snapshot-20090401:1.1
	cgen-snapshot-20090401:1.1
	arc-insight_6_8-branch:1.1.0.84
	arc-insight_6_8-branchpoint:1.1
	sid-snapshot-20090301:1.1
	cgen-snapshot-20090301:1.1
	sid-snapshot-20090201:1.1
	cgen-snapshot-20090201:1.1
	sid-snapshot-20090101:1.1
	cgen-snapshot-20090101:1.1
	sid-snapshot-20081201:1.1
	cgen-snapshot-20081201:1.1
	sid-snapshot-20081101:1.1
	cgen-snapshot-20081101:1.1
	sid-snapshot-20081001:1.1
	cgen-snapshot-20081001:1.1
	sid-snapshot-20080901:1.1
	cgen-snapshot-20080901:1.1
	sid-snapshot-20080801:1.1
	cgen-snapshot-20080801:1.1
	sid-snapshot-20080701:1.1
	cgen-snapshot-20080701:1.1
	sid-snapshot-20080601:1.1
	cgen-snapshot-20080601:1.1
	sid-snapshot-20080501:1.1
	cgen-snapshot-20080501:1.1
	sid-snapshot-20080403:1.1
	sid-snapshot-20080401:1.1
	cgen-snapshot-20080401:1.1
	sid-snapshot-20080301:1.1
	cgen-snapshot-20080301:1.1
	sid-snapshot-20080201:1.1
	cgen-snapshot-20080201:1.1
	sid-snapshot-20080101:1.1
	cgen-snapshot-20080101:1.1
	sid-snapshot-20071201:1.1
	cgen-snapshot-20071201:1.1
	sid-snapshot-20071101:1.1
	cgen-snapshot-20071101:1.1
	sid-snapshot-20071001:1.1
	cgen-snapshot-20071001:1.1
	msnyder-fork-checkpoint-branch:1.1.0.82
	msnyder-fork-checkpoint-branchpoint:1.1
	gdb-csl-arm-20051020-branch:1.1.0.78
	gdb-csl-arm-20051020-branchpoint:1.1
	drow_intercu-merge-20040921:1.1
	drow_intercu-merge-20040915:1.1
	jimb-gdb_6_2-e500-branch:1.1.0.80
	jimb-gdb_6_2-e500-branchpoint:1.1
	gdb_6_2-20040730-release:1.1
	gdb_6_2-branch:1.1.0.76
	gdb_6_2-2004-07-10-gmt-branchpoint:1.1
	gdb_6_1_1-20040616-release:1.1
	gdb_6_1-2004-04-05-release:1.1
	drow_intercu-merge-20040402:1.1
	drow_intercu-merge-20040327:1.1
	ezannoni_pie-20040323-branch:1.1.0.74
	ezannoni_pie-20040323-branchpoint:1.1
	cagney_tramp-20040321-mergepoint:1.1
	cagney_tramp-20040309-branch:1.1.0.72
	cagney_tramp-20040309-branchpoint:1.1
	gdb_6_1-branch:1.1.0.70
	gdb_6_1-2004-03-01-gmt-branchpoint:1.1
	drow_intercu-20040221-branch:1.1.0.68
	drow_intercu-20040221-branchpoint:1.1
	cagney_bfdfile-20040213-branch:1.1.0.66
	cagney_bfdfile-20040213-branchpoint:1.1
	drow-cplus-merge-20040208:1.1
	carlton_dictionary-20040126-merge:1.1
	cagney_bigcore-20040122-branch:1.1.0.64
	cagney_bigcore-20040122-branchpoint:1.1
	drow-cplus-merge-20040113:1.1
	drow-cplus-merge-20031224:1.1
	drow-cplus-merge-20031220:1.1
	carlton_dictionary-20031215-merge:1.1
	drow-cplus-merge-20031214:1.1
	carlton-dictionary-20031111-merge:1.1
	gdb_6_0-2003-10-04-release:1.1
	kettenis_sparc-20030918-branch:1.1.0.62
	kettenis_sparc-20030918-branchpoint:1.1
	carlton_dictionary-20030917-merge:1.1
	ezannoni_pie-20030916-branchpoint:1.1
	ezannoni_pie-20030916-branch:1.1.0.60
	cagney_x86i386-20030821-branch:1.1.0.58
	cagney_x86i386-20030821-branchpoint:1.1
	carlton_dictionary-20030805-merge:1.1
	carlton_dictionary-20030627-merge:1.1
	gdb_6_0-branch:1.1.0.56
	gdb_6_0-2003-06-23-branchpoint:1.1
	jimb-ppc64-linux-20030613-branch:1.1.0.54
	jimb-ppc64-linux-20030613-branchpoint:1.1
	cagney_convert-20030606-branch:1.1.0.52
	cagney_convert-20030606-branchpoint:1.1
	cagney_writestrings-20030508-branch:1.1.0.50
	cagney_writestrings-20030508-branchpoint:1.1
	jimb-ppc64-linux-20030528-branch:1.1.0.48
	jimb-ppc64-linux-20030528-branchpoint:1.1
	carlton_dictionary-20030523-merge:1.1
	cagney_fileio-20030521-branch:1.1.0.46
	cagney_fileio-20030521-branchpoint:1.1
	kettenis_i386newframe-20030517-mergepoint:1.1
	jimb-ppc64-linux-20030509-branch:1.1.0.44
	jimb-ppc64-linux-20030509-branchpoint:1.1
	kettenis_i386newframe-20030504-mergepoint:1.1
	carlton_dictionary-20030430-merge:1.1
	kettenis_i386newframe-20030419-branch:1.1.0.42
	kettenis_i386newframe-20030419-branchpoint:1.1
	carlton_dictionary-20030416-merge:1.1
	cagney_frameaddr-20030409-mergepoint:1.1
	kettenis_i386newframe-20030406-branch:1.1.0.40
	kettenis_i386newframe-20030406-branchpoint:1.1
	cagney_frameaddr-20030403-branchpoint:1.1
	cagney_frameaddr-20030403-branch:1.1.0.38
	cagney_framebase-20030330-mergepoint:1.1
	cagney_framebase-20030326-branch:1.1.0.36
	cagney_framebase-20030326-branchpoint:1.1
	cagney_lazyid-20030317-branch:1.1.0.34
	cagney_lazyid-20030317-branchpoint:1.1
	kettenis-i386newframe-20030316-mergepoint:1.1
	offbyone-20030313-branch:1.1.0.32
	offbyone-20030313-branchpoint:1.1
	kettenis-i386newframe-20030308-branch:1.1.0.30
	kettenis-i386newframe-20030308-branchpoint:1.1
	carlton_dictionary-20030305-merge:1.1
	cagney_offbyone-20030303-branch:1.1.0.28
	cagney_offbyone-20030303-branchpoint:1.1
	carlton_dictionary-20030207-merge:1.1
	interps-20030202-branch:1.1.0.26
	interps-20030202-branchpoint:1.1
	cagney-unwind-20030108-branch:1.1.0.24
	cagney-unwind-20030108-branchpoint:1.1
	carlton_dictionary-20021223-merge:1.1
	gdb_5_3-2002-12-12-release:1.1
	carlton_dictionary-20021115-merge:1.1
	kseitz_interps-20021105-merge:1.1
	kseitz_interps-20021103-merge:1.1
	drow-cplus-merge-20021020:1.1
	drow-cplus-merge-20021025:1.1
	carlton_dictionary-20021025-merge:1.1
	carlton_dictionary-20021011-merge:1.1
	drow-cplus-branch:1.1.0.22
	drow-cplus-branchpoint:1.1
	kseitz_interps-20020930-merge:1.1
	carlton_dictionary-20020927-merge:1.1
	carlton_dictionary-branch:1.1.0.20
	carlton_dictionary-20020920-branchpoint:1.1
	sid-20020905-branchpoint:1.1
	sid-20020905-branch:1.1.0.18
	gdb_5_3-branch:1.1.0.16
	gdb_5_3-2002-09-04-branchpoint:1.1
	kseitz_interps-20020829-merge:1.1
	cagney_sysregs-20020825-branch:1.1.0.14
	cagney_sysregs-20020825-branchpoint:1.1
	readline_4_3-import-branch:1.1.0.12
	readline_4_3-import-branchpoint:1.1
	gdb_5_2_1-2002-07-23-release:1.1
	kseitz_interps-20020528-branch:1.1.0.10
	kseitz_interps-20020528-branchpoint:1.1
	cagney_regbuf-20020515-branch:1.1.0.8
	cagney_regbuf-20020515-branchpoint:1.1
	jimb-macro-020506-branch:1.1.0.6
	jimb-macro-020506-branchpoint:1.1
	gdb_5_2-2002-04-29-release:1.1
	gdb_5_2-branch:1.1.0.4
	gdb_5_2-2002-03-03-branchpoint:1.1
	cygnus_cvs_20020108_pre:1.1
	cgen-1-1-branch:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2009.08.24.06.46.16;	author devans;	state Exp;
branches;
next	1.1;

1.1
date	2001.07.05.12.45.47;	author bje;	state Exp;
branches;
next	;


desc
@@


1.2
log
@	* hardware.scm (<keyword>): Rename member print-name -> enum-prefix.
	Rename member prefix -> name-prefix.
	(<keyword> getters): Update.
	(-keyword-parse): Update.  Default enum-prefix to NAME-.
	(-keyword-read): Update.  Don't compute default value for
	enum-prefix here.
	(define-keyword): Update.
	(-hw-parse-keyword): Pass "UNUSED" for enum-prefix to -keyword-parse.
	* read.scm (cgen-rtl-version): New function.
	(-supported-rtl-versions): Add (0 8).
	* desc-cpu.scm (-gen-hw-decl): Remove cruft.
	* desc.scm (<keyword> gen-defn): prefix -> name-prefix.
	* gas-test.scm (<keyword> test-data): prefix -> name-prefix.
	* cpu/arm.cpu (gr-names, shift-type): Call define-rtl-version.
	Update, print-name -> enum-prefix, make uppercase.
	Remove unnecessary name-prefix spec.
	* cpu/fr30.cpu (gr-names, cr-names, dr-names): Ditto.
	* cpu/ip2k.cpu (register-names): Ditto.
	* cpu/m68k.cpu (dr-names, ar-names): Ditto.
	* cpu/sparc.cpu (gr-names): Ditto.
	* cpu/xc16x.cpu (gr-names, ext-names,psw-names): Ditto.
	(grb-names, conditioncode-names, extconditioncode-names): Ditto.
	(grb8-names, r8-names, regmem8-names, regdiv8-names): Ditto.
	(reg0-name, reg0-name1, regbmem8-names, memgr8-names): Ditto.
	* cpu/ia32.cpu (gr8-names, gr16-names, gr-names): Call
	define-rtl-version.  Update, print-name -> enum-prefix, make uppercase,
	prefix -> name-prefix.
	* cpu/sh64-compact.cpu (frc-names): Call define-rtl-version.
	Update, print-name -> enum-prefix, make uppercase.
	(drc-names, xf-names): Ditto.
	* cpu/xstormy16.cpu (gr-names, gr-Rb-names): Ditto.
	* doc/rtl.texi (Keywords): New section.
	(hardware indices): Update text.
	(rtl versions): Add 0.8.
@
text
@; Motorola M68000 family CPU description.  -*- Scheme -*-
; Copyright (C) 2000, 2009 Red Hat, Inc.
; This file is part of CGEN.
; See file COPYING.CGEN for details.

(define-rtl-version 0 8)

; NOTE: this file is still strictly WORK-IN-PROGRESS.

(include "simplify.inc")

(define-arch
  (name m68k)
  (comment "Motorola M68000 architecture")
  (insn-lsb0? #t)
  (machs m68k16)
  (isas basic)
)

(define-isa
  (name basic)
  (comment "Basic M68K instruction set")
  (default-insn-word-bitsize 16)
  (default-insn-bitsize 16)
  (base-insn-bitsize 16)
  (decode-assist (15 14 13 12))
)

(define-cpu
  (name m68k)
  (comment "Motorola M68000 family")
  (endian big)
  (word-bitsize 32)
)

(define-mach
  (name m68k16)
  (comment "Motorola M68000 (16-bit bus)")
  (cpu m68k)
  (isas basic)
)

(define-model
  (name mc68000)
  (comment "Motorola MC68000 microprocessor")
  (mach m68k16)
  (unit u-exec "Execution Unit" ()
	1 1 ; issue done
	() () () ())
)

; Hardware elements.

(dnh h-pc "program counter" (PC PROFILE (ISA basic)) (pc) () () ())

(dsh h-ccr "condition code register" () (register HI))

(define-keyword
  (name dr-names)
  (enum-prefix H-DR-)
  (values (d0 0) (d1 1) (d2 2) (d3 3) (d4 4) (d5 5) (d6 6) (d7 7))
)

(define-keyword
  (name ar-names)
  (enum-prefix H-AR-)
  (values (a0 0) (a1 1) (a2 2) (a3 3) (a4 4) (a5 5) (a6 6) (a7 7)
	  (sp 7))
)

(define-hardware 
  (name h-dr)
  (comment "data registers")
  (attrs (ISA basic) CACHE-ADDR)
  (type register SI (8))
  (indices extern-keyword dr-names)
)

(define-hardware
  (name h-ar)
  (comment "address registers")
  (attrs (ISA basic) CACHE-ADDR)
  (type register SI (8))
  (indices extern-keyword ar-names)
)

; FIXME: need three shadowed A7 registers here for:
;   * User stack pointer (USP)
;   * Interrupt stack pointer (ISP)
;   * Master stack pointer (MSP).
; These can be omitted for now since we intend to only do user mode.
; c.f. arm.cpu for tips on how to do this.  ARM shadows some registers
; depending on any of its five operating modes.


; Instruction fields.

(define-pmacro (d68f x-name x-comment x-attrs x-word-offset x-word-length
		     x-start x-length x-mode x-encode x-decode)
  (define-ifield
    (name x-name)
    (comment x-comment)
    (.splice attrs (.unsplice x-attrs))
    (word-offset x-word-offset)
    (word-length x-word-length)
    (start x-start)
    (length x-length)
    (mode x-mode)
    (encode x-encode)
    (decode x-decode)
  )
)

(define-pmacro (dn68f x-name x-comment x-attrs x-word-offset
		      x-word-length x-start x-length)
  (d68f x-name x-comment x-attrs x-word-offset x-word-length x-start
	x-length UINT #f #f)
)

(d68f f-simm8  "signed 8 bit immediate"  () 16 16 7  8  INT #f #f)
(d68f f-simm16 "signed 16 bit immediate" () 16 16 15 16 INT #f #f)
(d68f f-simm32 "signed 32 bit immediate" () 16 32 31 32 INT #f #f)

(dn68f f-uimm8  "unsigned 8 bit immediate"  () 16 16 7  8)
(dn68f f-uimm16 "unsigned 16 bit immediate" () 16 16 15 16)
(dn68f f-iumm32 "unsigned 32 bit immediate" () 16 32 31 32)

(dn68f f-imm8-filler "unused part of 8 bit immediate" () 16 16 15 8)

(dn68f f-15-4  "4 bits at bit 15"  () 0 16 15 4)
(dn68f f-15-12 "12 bits at bit 15" () 0 16 15 12)
(dn68f f-15-13 "13 bits at bit 15" () 0 16 15 13)
(dn68f f-15-16 "16 bits at bit 15" () 0 16 15 16)
(dn68f f-8-1   "1 bit at bit 8"    () 0 16 8  1)

(dnf f-rx     "register Rx field"              ()   11  3)
(dnf f-ry     "register Ry field"              ()    2  3)
(dnf f-opmode "operation mode"                 ()    7  5)
(dnf f-vector "vector field"                   ()    3  4)

(dnf f-imm8   "immediate constant (8 bits)"    ()    7  8)

; Operands.
(dnop rx      "register Rx operand"            () h-uint f-rx)
(dnop reg-@@2  "general reg number (at bit 2)"  () h-uint f-rx)
(dnop reg-@@11 "general reg number (at bit 11)" () h-uint f-ry)
(dnop ry      "register Ry operand"            () h-uint f-ry)
(dnop vector  "trap vector operand"            () h-uint f-vector)
(dnop imm8    "immediate constant (8 bits)"    () h-uint f-imm8)

; Instructions.

(dni nop "no operation" ()
     "nop"
      (+ (f-15-16 #x4E71))
      (nop)
      ()
)

(dni exg-data "exchange data registers" ()
     "FIXME"
     (+ (f-15-4 #xC) rx (f-8-1 1) (f-opmode 8) ry)
     (sequence ((SI temp))
	       (set temp (reg h-dr rx))
	       (set (reg h-dr rx) (reg h-dr ry))
	       (set (reg h-dr ry) temp))
     ()
)

(dni exg-addr "exchange address registers" ()
     "FIXME"
     (+ (f-15-4 #xC) rx (f-8-1 1) (f-opmode 9) ry)
     (sequence ((SI temp))
	       (set temp (reg h-ar rx))
	       (set (reg h-ar rx) (reg h-ar ry))
	       (set (reg h-ar ry) temp))
     ()
)

(dni exg-data-addr "exchange data and address register" ()
     "FIXME"
     (+ (f-15-4 #xC) rx (f-8-1 1) (f-opmode #x11) ry)
     (sequence ((SI temp))
	       (set temp (reg h-dr rx))
	       (set (reg h-dr rx) (reg h-ar ry))
	       (set (reg h-ar ry) temp))
     ()
)

(dni illegal "illegal instruction" ()
     "FIXME"
     (+ (f-15-16 #x4AFC))
     (nop)
     ()
)

(dni moveq "move quick" ()
     "FIXME"
     (+ (f-15-4 7) reg-@@2 (f-8-1 0) imm8)
     ; FIXME: set condition codes.
     (sequence ()
	       (set (reg h-dr reg-@@2) (ext SI imm8)))
     ()
)

(dni reset "reset external devices" ()
     "FIXME"
     (+ (f-15-16 #x4E70))
     (nop)
     ()
)

(dni rte "return from exception" ()
     "FIXME"
     (+ (f-15-16 #x4E73))
     (nop)
     ()
)

(dni rtr "return and restore condition codes" ()
     "FIXME"
     (+ (f-15-16 #x4E77))
     (nop)
     ()
)

(dni rts "return from subroutine" ()
     "RTS"
     (+ (f-15-16 #x4E75))
     (nop)
     ()
)

(dni trap "trap" ()
     "FIXME"
     (+ (f-15-12 #x4E4) vector)
     (nop)
     ()
)

(dni trapv "trap on overflow" ()
     "FIXME"
     (+ (f-15-16 #x4E76))
     (nop)
     ()
)

(dni unlk "unlink" ()
     "FIXME"
     (+ (f-15-13 #x9CB) reg-@@2)
     (nop)
     ()
)
@


1.1
log
@2001-07-05  Ben Elliston  <bje@@redhat.com>

	* README: Update.

	* read.scm (include): Include files from srcdir/cpu.
	(-cgen): Likewise for loading .cpu files.
	* *.cpu: Move all cpu descriptions into cpu subdirectory.
	* *.opc: Likewise.
	* simplify.inc: Likewise.
@
text
@d2 1
a2 1
; Copyright (C) 2000 Red Hat, Inc.
d6 2
d60 2
a61 3
  (print-name h-dr)
  (prefix "")
  (values (d0 0)  (d1 1) (d2 2)  (d3 3)  (d4 4)  (d5 5)  (d6 6)  (d7 7))
d66 1
a66 2
  (print-name h-ar)
  (prefix "")
@

